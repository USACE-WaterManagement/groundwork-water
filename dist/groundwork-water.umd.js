(function(Ea,Gn){typeof exports=="object"&&typeof module<"u"?Gn(exports,require("react"),require("@tanstack/react-query")):typeof define=="function"&&define.amd?define(["exports","react","@tanstack/react-query"],Gn):(Ea=typeof globalThis<"u"?globalThis:Ea||self,Gn(Ea.GroundworkWater={},Ea.React,Ea.ReactQuery))})(this,function(Ea,Gn,Ol){"use strict";var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function il(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var al={exports:{}},as={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ul;function uf(){if(Ul)return as;Ul=1;var e=Gn,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,x=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S={key:!0,ref:!0,__self:!0,__source:!0};function f(u,r,i){var c,a={},l=null,s=null;i!==void 0&&(l=""+i),r.key!==void 0&&(l=""+r.key),r.ref!==void 0&&(s=r.ref);for(c in r)h.call(r,c)&&!S.hasOwnProperty(c)&&(a[c]=r[c]);if(u&&u.defaultProps)for(c in r=u.defaultProps,r)a[c]===void 0&&(a[c]=r[c]);return{$$typeof:t,type:u,key:l,ref:s,props:a,_owner:x.current}}return as.Fragment=n,as.jsx=f,as.jsxs=f,as}var os={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bl;function ff(){return Bl||(Bl=1,process.env.NODE_ENV!=="production"&&function(){var e=Gn,t=Symbol.for("react.element"),n=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),u=Symbol.for("react.context"),r=Symbol.for("react.forward_ref"),i=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),a=Symbol.for("react.memo"),l=Symbol.for("react.lazy"),s=Symbol.for("react.offscreen"),v=Symbol.iterator,d="@@iterator";function p(he){if(he===null||typeof he!="object")return null;var Ee=v&&he[v]||he[d];return typeof Ee=="function"?Ee:null}var o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function y(he){{for(var Ee=arguments.length,Pe=new Array(Ee>1?Ee-1:0),Ne=1;Ne<Ee;Ne++)Pe[Ne-1]=arguments[Ne];_("error",he,Pe)}}function _(he,Ee,Pe){{var Ne=o.ReactDebugCurrentFrame,ht=Ne.getStackAddendum();ht!==""&&(Ee+="%s",Pe=Pe.concat([ht]));var nt=Pe.map(function(Ye){return String(Ye)});nt.unshift("Warning: "+Ee),Function.prototype.apply.call(console[he],console,nt)}}var E=!1,M=!1,b=!1,w=!1,A=!1,R;R=Symbol.for("react.module.reference");function T(he){return!!(typeof he=="string"||typeof he=="function"||he===h||he===S||A||he===x||he===i||he===c||w||he===s||E||M||b||typeof he=="object"&&he!==null&&(he.$$typeof===l||he.$$typeof===a||he.$$typeof===f||he.$$typeof===u||he.$$typeof===r||he.$$typeof===R||he.getModuleId!==void 0))}function C(he,Ee,Pe){var Ne=he.displayName;if(Ne)return Ne;var ht=Ee.displayName||Ee.name||"";return ht!==""?Pe+"("+ht+")":Pe}function m(he){return he.displayName||"Context"}function L(he){if(he==null)return null;if(typeof he.tag=="number"&&y("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof he=="function")return he.displayName||he.name||null;if(typeof he=="string")return he;switch(he){case h:return"Fragment";case n:return"Portal";case S:return"Profiler";case x:return"StrictMode";case i:return"Suspense";case c:return"SuspenseList"}if(typeof he=="object")switch(he.$$typeof){case u:var Ee=he;return m(Ee)+".Consumer";case f:var Pe=he;return m(Pe._context)+".Provider";case r:return C(he,he.render,"ForwardRef");case a:var Ne=he.displayName||null;return Ne!==null?Ne:L(he.type)||"Memo";case l:{var ht=he,nt=ht._payload,Ye=ht._init;try{return L(Ye(nt))}catch{return null}}}return null}var D=Object.assign,O=0,N,V,X,k,Z,B,J;function ne(){}ne.__reactDisabledLog=!0;function oe(){{if(O===0){N=console.log,V=console.info,X=console.warn,k=console.error,Z=console.group,B=console.groupCollapsed,J=console.groupEnd;var he={configurable:!0,enumerable:!0,value:ne,writable:!0};Object.defineProperties(console,{info:he,log:he,warn:he,error:he,group:he,groupCollapsed:he,groupEnd:he})}O++}}function Y(){{if(O--,O===0){var he={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:D({},he,{value:N}),info:D({},he,{value:V}),warn:D({},he,{value:X}),error:D({},he,{value:k}),group:D({},he,{value:Z}),groupCollapsed:D({},he,{value:B}),groupEnd:D({},he,{value:J})})}O<0&&y("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var G=o.ReactCurrentDispatcher,K;function ee(he,Ee,Pe){{if(K===void 0)try{throw Error()}catch(ht){var Ne=ht.stack.trim().match(/\n( *(at )?)/);K=Ne&&Ne[1]||""}return`
`+K+he}}var ie=!1,re;{var se=typeof WeakMap=="function"?WeakMap:Map;re=new se}function ge(he,Ee){if(!he||ie)return"";{var Pe=re.get(he);if(Pe!==void 0)return Pe}var Ne;ie=!0;var ht=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var nt;nt=G.current,G.current=null,oe();try{if(Ee){var Ye=function(){throw Error()};if(Object.defineProperty(Ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ye,[])}catch(Ft){Ne=Ft}Reflect.construct(he,[],Ye)}else{try{Ye.call()}catch(Ft){Ne=Ft}he.call(Ye.prototype)}}else{try{throw Error()}catch(Ft){Ne=Ft}he()}}catch(Ft){if(Ft&&Ne&&typeof Ft.stack=="string"){for(var Be=Ft.stack.split(`
`),ut=Ne.stack.split(`
`),Dt=Be.length-1,Nt=ut.length-1;Dt>=1&&Nt>=0&&Be[Dt]!==ut[Nt];)Nt--;for(;Dt>=1&&Nt>=0;Dt--,Nt--)if(Be[Dt]!==ut[Nt]){if(Dt!==1||Nt!==1)do if(Dt--,Nt--,Nt<0||Be[Dt]!==ut[Nt]){var Wt=`
`+Be[Dt].replace(" at new "," at ");return he.displayName&&Wt.includes("<anonymous>")&&(Wt=Wt.replace("<anonymous>",he.displayName)),typeof he=="function"&&re.set(he,Wt),Wt}while(Dt>=1&&Nt>=0);break}}}finally{ie=!1,G.current=nt,Y(),Error.prepareStackTrace=ht}var $t=he?he.displayName||he.name:"",Vt=$t?ee($t):"";return typeof he=="function"&&re.set(he,Vt),Vt}function xe(he,Ee,Pe){return ge(he,!1)}function Se(he){var Ee=he.prototype;return!!(Ee&&Ee.isReactComponent)}function ce(he,Ee,Pe){if(he==null)return"";if(typeof he=="function")return ge(he,Se(he));if(typeof he=="string")return ee(he);switch(he){case i:return ee("Suspense");case c:return ee("SuspenseList")}if(typeof he=="object")switch(he.$$typeof){case r:return xe(he.render);case a:return ce(he.type,Ee,Pe);case l:{var Ne=he,ht=Ne._payload,nt=Ne._init;try{return ce(nt(ht),Ee,Pe)}catch{}}}return""}var pe=Object.prototype.hasOwnProperty,ye={},U=o.ReactDebugCurrentFrame;function W(he){if(he){var Ee=he._owner,Pe=ce(he.type,he._source,Ee?Ee.type:null);U.setExtraStackFrame(Pe)}else U.setExtraStackFrame(null)}function j(he,Ee,Pe,Ne,ht){{var nt=Function.call.bind(pe);for(var Ye in he)if(nt(he,Ye)){var Be=void 0;try{if(typeof he[Ye]!="function"){var ut=Error((Ne||"React class")+": "+Pe+" type `"+Ye+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof he[Ye]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw ut.name="Invariant Violation",ut}Be=he[Ye](Ee,Ye,Ne,Pe,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Dt){Be=Dt}Be&&!(Be instanceof Error)&&(W(ht),y("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Ne||"React class",Pe,Ye,typeof Be),W(null)),Be instanceof Error&&!(Be.message in ye)&&(ye[Be.message]=!0,W(ht),y("Failed %s type: %s",Pe,Be.message),W(null))}}}var F=Array.isArray;function P(he){return F(he)}function q(he){{var Ee=typeof Symbol=="function"&&Symbol.toStringTag,Pe=Ee&&he[Symbol.toStringTag]||he.constructor.name||"Object";return Pe}}function z(he){try{return te(he),!1}catch{return!0}}function te(he){return""+he}function ue(he){if(z(he))return y("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",q(he)),te(he)}var ve=o.ReactCurrentOwner,_e={key:!0,ref:!0,__self:!0,__source:!0},Re,Le,Ve;Ve={};function Xe(he){if(pe.call(he,"ref")){var Ee=Object.getOwnPropertyDescriptor(he,"ref").get;if(Ee&&Ee.isReactWarning)return!1}return he.ref!==void 0}function Ze(he){if(pe.call(he,"key")){var Ee=Object.getOwnPropertyDescriptor(he,"key").get;if(Ee&&Ee.isReactWarning)return!1}return he.key!==void 0}function Te(he,Ee){if(typeof he.ref=="string"&&ve.current&&Ee&&ve.current.stateNode!==Ee){var Pe=L(ve.current.type);Ve[Pe]||(y('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',L(ve.current.type),he.ref),Ve[Pe]=!0)}}function we(he,Ee){{var Pe=function(){Re||(Re=!0,y("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ee))};Pe.isReactWarning=!0,Object.defineProperty(he,"key",{get:Pe,configurable:!0})}}function be(he,Ee){{var Pe=function(){Le||(Le=!0,y("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ee))};Pe.isReactWarning=!0,Object.defineProperty(he,"ref",{get:Pe,configurable:!0})}}var ke=function(he,Ee,Pe,Ne,ht,nt,Ye){var Be={$$typeof:t,type:he,key:Ee,ref:Pe,props:Ye,_owner:nt};return Be._store={},Object.defineProperty(Be._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Be,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Ne}),Object.defineProperty(Be,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ht}),Object.freeze&&(Object.freeze(Be.props),Object.freeze(Be)),Be};function He(he,Ee,Pe,Ne,ht){{var nt,Ye={},Be=null,ut=null;Pe!==void 0&&(ue(Pe),Be=""+Pe),Ze(Ee)&&(ue(Ee.key),Be=""+Ee.key),Xe(Ee)&&(ut=Ee.ref,Te(Ee,ht));for(nt in Ee)pe.call(Ee,nt)&&!_e.hasOwnProperty(nt)&&(Ye[nt]=Ee[nt]);if(he&&he.defaultProps){var Dt=he.defaultProps;for(nt in Dt)Ye[nt]===void 0&&(Ye[nt]=Dt[nt])}if(Be||ut){var Nt=typeof he=="function"?he.displayName||he.name||"Unknown":he;Be&&we(Ye,Nt),ut&&be(Ye,Nt)}return ke(he,Be,ut,ht,Ne,ve.current,Ye)}}var Ke=o.ReactCurrentOwner,st=o.ReactDebugCurrentFrame;function vt(he){if(he){var Ee=he._owner,Pe=ce(he.type,he._source,Ee?Ee.type:null);st.setExtraStackFrame(Pe)}else st.setExtraStackFrame(null)}var pt;pt=!1;function ft(he){return typeof he=="object"&&he!==null&&he.$$typeof===t}function lt(){{if(Ke.current){var he=L(Ke.current.type);if(he)return`

Check the render method of \``+he+"`."}return""}}function Mt(he){return""}var ot={};function Ct(he){{var Ee=lt();if(!Ee){var Pe=typeof he=="string"?he:he.displayName||he.name;Pe&&(Ee=`

Check the top-level render call using <`+Pe+">.")}return Ee}}function kt(he,Ee){{if(!he._store||he._store.validated||he.key!=null)return;he._store.validated=!0;var Pe=Ct(Ee);if(ot[Pe])return;ot[Pe]=!0;var Ne="";he&&he._owner&&he._owner!==Ke.current&&(Ne=" It was passed a child from "+L(he._owner.type)+"."),vt(he),y('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Pe,Ne),vt(null)}}function St(he,Ee){{if(typeof he!="object")return;if(P(he))for(var Pe=0;Pe<he.length;Pe++){var Ne=he[Pe];ft(Ne)&&kt(Ne,Ee)}else if(ft(he))he._store&&(he._store.validated=!0);else if(he){var ht=p(he);if(typeof ht=="function"&&ht!==he.entries)for(var nt=ht.call(he),Ye;!(Ye=nt.next()).done;)ft(Ye.value)&&kt(Ye.value,Ee)}}}function Et(he){{var Ee=he.type;if(Ee==null||typeof Ee=="string")return;var Pe;if(typeof Ee=="function")Pe=Ee.propTypes;else if(typeof Ee=="object"&&(Ee.$$typeof===r||Ee.$$typeof===a))Pe=Ee.propTypes;else return;if(Pe){var Ne=L(Ee);j(Pe,he.props,"prop",Ne,he)}else if(Ee.PropTypes!==void 0&&!pt){pt=!0;var ht=L(Ee);y("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ht||"Unknown")}typeof Ee.getDefaultProps=="function"&&!Ee.getDefaultProps.isReactClassApproved&&y("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Ue(he){{for(var Ee=Object.keys(he.props),Pe=0;Pe<Ee.length;Pe++){var Ne=Ee[Pe];if(Ne!=="children"&&Ne!=="key"){vt(he),y("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Ne),vt(null);break}}he.ref!==null&&(vt(he),y("Invalid attribute `ref` supplied to `React.Fragment`."),vt(null))}}var De={};function Ie(he,Ee,Pe,Ne,ht,nt){{var Ye=T(he);if(!Ye){var Be="";(he===void 0||typeof he=="object"&&he!==null&&Object.keys(he).length===0)&&(Be+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var ut=Mt();ut?Be+=ut:Be+=lt();var Dt;he===null?Dt="null":P(he)?Dt="array":he!==void 0&&he.$$typeof===t?(Dt="<"+(L(he.type)||"Unknown")+" />",Be=" Did you accidentally export a JSX literal instead of a component?"):Dt=typeof he,y("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Dt,Be)}var Nt=He(he,Ee,Pe,ht,nt);if(Nt==null)return Nt;if(Ye){var Wt=Ee.children;if(Wt!==void 0)if(Ne)if(P(Wt)){for(var $t=0;$t<Wt.length;$t++)St(Wt[$t],he);Object.freeze&&Object.freeze(Wt)}else y("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else St(Wt,he)}if(pe.call(Ee,"key")){var Vt=L(he),Ft=Object.keys(Ee).filter(function(Xt){return Xt!=="key"}),qt=Ft.length>0?"{key: someKey, "+Ft.join(": ..., ")+": ...}":"{key: someKey}";if(!De[Vt+qt]){var Gt=Ft.length>0?"{"+Ft.join(": ..., ")+": ...}":"{}";y(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,qt,Vt,Gt,Vt),De[Vt+qt]=!0}}return he===h?Ue(Nt):Et(Nt),Nt}}function Fe(he,Ee,Pe){return Ie(he,Ee,Pe,!0)}function We(he,Ee,Pe){return Ie(he,Ee,Pe,!1)}var de=We,Me=Fe;os.Fragment=h,os.jsx=de,os.jsxs=Me}()),os}process.env.NODE_ENV==="production"?al.exports=uf():al.exports=ff();var un=al.exports,wo=function(e,t,n,h){function x(S){return S instanceof n?S:new n(function(f){f(S)})}return new(n||(n=Promise))(function(S,f){function u(c){try{i(h.next(c))}catch(a){f(a)}}function r(c){try{i(h.throw(c))}catch(a){f(a)}}function i(c){c.done?S(c.value):x(c.value).then(u,r)}i((h=h.apply(e,t||[])).next())})};const cf="https://cwms-data.usace.army.mil/cwms-data".replace(/\/+$/,"");class _s{constructor(t={}){this.configuration=t}set config(t){this.configuration=t}get basePath(){return this.configuration.basePath!=null?this.configuration.basePath:cf}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||Gl}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){const t=this.configuration.apiKey;if(t)return typeof t=="function"?t:()=>t}get accessToken(){const t=this.configuration.accessToken;if(t)return typeof t=="function"?t:()=>wo(this,void 0,void 0,function*(){return t})}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}}const hf=new _s;class Ts{constructor(t=hf){this.configuration=t,this.fetchApi=(n,h)=>wo(this,void 0,void 0,function*(){let x={url:n,init:h};for(const f of this.middleware)f.pre&&(x=(yield f.pre(Object.assign({fetch:this.fetchApi},x)))||x);let S;try{S=yield(this.configuration.fetchApi||fetch)(x.url,x.init)}catch(f){for(const u of this.middleware)u.onError&&(S=(yield u.onError({fetch:this.fetchApi,url:x.url,init:x.init,error:f,response:S?S.clone():void 0}))||S);if(S===void 0)throw f instanceof Error?new gf(f,"The request failed and the interceptors did not return an alternative response"):f}for(const f of this.middleware)f.post&&(S=(yield f.post({fetch:this.fetchApi,url:x.url,init:x.init,response:S.clone()}))||S);return S}),this.middleware=t.middleware}withMiddleware(...t){const n=this.clone();return n.middleware=n.middleware.concat(...t),n}withPreMiddleware(...t){const n=t.map(h=>({pre:h}));return this.withMiddleware(...n)}withPostMiddleware(...t){const n=t.map(h=>({post:h}));return this.withMiddleware(...n)}isJsonMime(t){return t?Ts.jsonRegex.test(t):!1}request(t,n){return wo(this,void 0,void 0,function*(){const{url:h,init:x}=yield this.createFetchParams(t,n),S=yield this.fetchApi(h,x);if(S&&S.status>=200&&S.status<300)return S;throw new pf(S,"Response returned an error code")})}createFetchParams(t,n){return wo(this,void 0,void 0,function*(){let h=this.configuration.basePath+t.path;t.query!==void 0&&Object.keys(t.query).length!==0&&(h+="?"+this.configuration.queryParamsStringify(t.query));const x=Object.assign({},this.configuration.headers,t.headers);Object.keys(x).forEach(c=>x[c]===void 0?delete x[c]:{});const S=typeof n=="function"?n:()=>wo(this,void 0,void 0,function*(){return n}),f={method:t.method,headers:x,body:t.body,credentials:this.configuration.credentials},u=Object.assign(Object.assign({},f),yield S({init:f,context:t}));let r;df(u.body)||u.body instanceof URLSearchParams||vf(u.body)?r=u.body:this.isJsonMime(x["Content-Type"])?r=JSON.stringify(u.body):r=u.body;const i=Object.assign(Object.assign({},u),{body:r});return{url:h,init:i}})}clone(){const t=this.constructor,n=new t(this.configuration);return n.middleware=this.middleware.slice(),n}}Ts.jsonRegex=new RegExp("^(:?application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(:?;.*)?$","i");function vf(e){return typeof Blob<"u"&&e instanceof Blob}function df(e){return typeof FormData<"u"&&e instanceof FormData}class pf extends Error{constructor(t,n){super(n),this.response=t,this.name="ResponseError"}}class gf extends Error{constructor(t,n){super(n),this.cause=t,this.name="FetchError"}}class co extends Error{constructor(t,n){super(n),this.field=t,this.name="RequiredError"}}function Gl(e,t=""){return Object.keys(e).map(n=>Hl(n,e[n],t)).filter(n=>n.length>0).join("&")}function Hl(e,t,n=""){const h=n+(n.length?`[${e}]`:e);if(t instanceof Array){const x=t.map(S=>encodeURIComponent(String(S))).join(`&${encodeURIComponent(h)}=`);return`${encodeURIComponent(h)}=${x}`}if(t instanceof Set){const x=Array.from(t);return Hl(e,x,n)}return t instanceof Date?`${encodeURIComponent(h)}=${encodeURIComponent(t.toISOString())}`:t instanceof Object?Gl(t,h):`${encodeURIComponent(h)}=${encodeURIComponent(String(t))}`}class yf{constructor(t,n=h=>h){this.raw=t,this.transformer=n}value(){return wo(this,void 0,void 0,function*(){return this.transformer(yield this.raw.json())})}}class ol{constructor(t){this.raw=t}value(){return wo(this,void 0,void 0,function*(){})}}function mf(e){return xf(e)}function xf(e,t){return e==null?e:{estimate:e.estimate==null?void 0:e.estimate,toDatum:e.toDatum==null?void 0:e.toDatum,value:e.value==null?void 0:e.value}}function _f(e){return e==null?e:{estimate:e.estimate,toDatum:e.toDatum,value:e.value}}function Tf(e){return bf(e)}function bf(e,t){return e==null?e:{name:e.name==null?void 0:e.name,ordinal:e.ordinal==null?void 0:e.ordinal,datatype:e.datatype==null?void 0:e.datatype}}function Af(e){return Mf(e)}function Mf(e,t){return e==null?e:{seconds:e.seconds==null?void 0:e.seconds,nano:e.nano==null?void 0:e.nano,zero:e.zero==null?void 0:e.zero,negative:e.negative==null?void 0:e.negative}}function Ef(e){return e==null?e:{seconds:e.seconds,nano:e.nano,zero:e.zero,negative:e.negative}}function wf(e){return Cf(e)}function Cf(e,t){return e==null?e:{duration:e.duration==null?void 0:Af(e.duration),durationEstimated:e.durationEstimated==null?void 0:e.durationEstimated,dateBased:e.dateBased==null?void 0:e.dateBased,timeBased:e.timeBased==null?void 0:e.timeBased}}function Sf(e){return e==null?e:{duration:Ef(e.duration),durationEstimated:e.durationEstimated,dateBased:e.dateBased,timeBased:e.timeBased}}function Lf(e){return Rf(e)}function Rf(e,t){return e==null?e:{seconds:e.seconds==null?void 0:e.seconds,nano:e.nano==null?void 0:e.nano,zero:e.zero==null?void 0:e.zero,units:e.units==null?void 0:e.units.map(wf),negative:e.negative==null?void 0:e.negative}}function Df(e){return e==null?e:{seconds:e.seconds,nano:e.nano,zero:e.zero,units:e.units==null?void 0:e.units.map(Sf),negative:e.negative}}function If(e){return Pf(e)}function Pf(e,t){return e==null?e:{office:e.office==null?void 0:e.office,unit:e.unit==null?void 0:e.unit,location:e.location==null?void 0:e.location,nativeDatum:e["native-datum"]==null?void 0:e["native-datum"],elevation:e.elevation==null?void 0:e.elevation,offsets:e.offsets==null?void 0:e.offsets.map(mf)}}function kf(e){return e==null?e:{office:e.office,unit:e.unit,location:e.location,"native-datum":e.nativeDatum,elevation:e.elevation,offsets:e.offsets==null?void 0:e.offsets.map(_f)}}function Ff(e){return Nf(e)}function Nf(e,t){return e==null?e:{begin:e.begin==null?void 0:new Date(e.begin),end:e.end==null?void 0:new Date(e.end),interval:e.interval==null?void 0:Lf(e.interval),intervalOffset:e["interval-offset"]==null?void 0:e["interval-offset"],name:e.name==null?void 0:e.name,nextPage:e["next-page"]==null?void 0:e["next-page"],officeId:e["office-id"]==null?void 0:e["office-id"],page:e.page==null?void 0:e.page,pageSize:e["page-size"]==null?void 0:e["page-size"],timeZone:e["time-zone"]==null?void 0:e["time-zone"],total:e.total==null?void 0:e.total,units:e.units,valueColumns:e["value-columns"]==null?void 0:e["value-columns"].map(Tf),values:e.values==null?void 0:e.values,verticalDatumInfo:e["vertical-datum-info"]==null?void 0:If(e["vertical-datum-info"])}}function Yl(e){return e==null?e:{interval:Df(e.interval),name:e.name,"office-id":e.officeId,units:e.units,values:e.values,"vertical-datum-info":kf(e.verticalDatumInfo)}}var ho=function(e,t,n,h){function x(S){return S instanceof n?S:new n(function(f){f(S)})}return new(n||(n=Promise))(function(S,f){function u(c){try{i(h.next(c))}catch(a){f(a)}}function r(c){try{i(h.throw(c))}catch(a){f(a)}}function i(c){c.done?S(c.value):x(c.value).then(u,r)}i((h=h.apply(e,t||[])).next())})};class sl extends Ts{deleteCwmsDataTimeseriesWithTimeseriesRaw(t,n){return ho(this,void 0,void 0,function*(){if(t.timeseries==null)throw new co("timeseries",'Required parameter "timeseries" was null or undefined when calling deleteCwmsDataTimeseriesWithTimeseries().');if(t.office==null)throw new co("office",'Required parameter "office" was null or undefined when calling deleteCwmsDataTimeseriesWithTimeseries().');if(t.begin==null)throw new co("begin",'Required parameter "begin" was null or undefined when calling deleteCwmsDataTimeseriesWithTimeseries().');if(t.end==null)throw new co("end",'Required parameter "end" was null or undefined when calling deleteCwmsDataTimeseriesWithTimeseries().');const h={};t.office!=null&&(h.office=t.office),t.begin!=null&&(h.begin=t.begin),t.end!=null&&(h.end=t.end),t.timezone!=null&&(h.timezone=t.timezone),t.versionDate!=null&&(h["version-date"]=t.versionDate),t.startTimeInclusive!=null&&(h["start-time-inclusive"]=t.startTimeInclusive),t.endTimeInclusive!=null&&(h["end-time-inclusive"]=t.endTimeInclusive),t.maxVersion!=null&&(h["max-version"]=t.maxVersion),t.overrideProtection!=null&&(h["override-protection"]=t.overrideProtection);const x={};this.configuration&&this.configuration.apiKey&&(x.Authorization=yield this.configuration.apiKey("Authorization"));const S=yield this.request({path:"/timeseries/{timeseries}".replace("{timeseries}",encodeURIComponent(String(t.timeseries))),method:"DELETE",headers:x,query:h},n);return new ol(S)})}deleteCwmsDataTimeseriesWithTimeseries(t,n){return ho(this,void 0,void 0,function*(){yield this.deleteCwmsDataTimeseriesWithTimeseriesRaw(t,n)})}getCwmsDataTimeseriesRaw(t,n){return ho(this,void 0,void 0,function*(){if(t.name==null)throw new co("name",'Required parameter "name" was null or undefined when calling getCwmsDataTimeseries().');const h={};t.name!=null&&(h.name=t.name),t.office!=null&&(h.office=t.office),t.unit!=null&&(h.unit=t.unit),t.datum!=null&&(h.datum=t.datum),t.begin!=null&&(h.begin=t.begin),t.end!=null&&(h.end=t.end),t.timezone!=null&&(h.timezone=t.timezone),t.format!=null&&(h.format=t.format),t.page!=null&&(h.page=t.page),t.pageSize!=null&&(h["page-size"]=t.pageSize);const x={},S=yield this.request({path:"/timeseries",method:"GET",headers:x,query:h},n);return new yf(S,f=>Ff(f))})}getCwmsDataTimeseries(t,n){return ho(this,void 0,void 0,function*(){return yield(yield this.getCwmsDataTimeseriesRaw(t,n)).value()})}patchCwmsDataTimeseriesWithTimeseriesRaw(t,n){return ho(this,void 0,void 0,function*(){if(t.timeseries==null)throw new co("timeseries",'Required parameter "timeseries" was null or undefined when calling patchCwmsDataTimeseriesWithTimeseries().');if(t.timeSeries==null)throw new co("timeSeries",'Required parameter "timeSeries" was null or undefined when calling patchCwmsDataTimeseriesWithTimeseries().');const h={};t.versionDate!=null&&(h["version-date"]=t.versionDate),t.timezone!=null&&(h.timezone=t.timezone),t.createAsLrts!=null&&(h["create-as-lrts"]=t.createAsLrts),t.storeRule!=null&&(h["store-rule"]=t.storeRule),t.overrideProtection!=null&&(h["override-protection"]=t.overrideProtection);const x={};x["Content-Type"]="application/json;version=2",this.configuration&&this.configuration.apiKey&&(x.Authorization=yield this.configuration.apiKey("Authorization"));const S=yield this.request({path:"/timeseries/{timeseries}".replace("{timeseries}",encodeURIComponent(String(t.timeseries))),method:"PATCH",headers:x,query:h,body:Yl(t.timeSeries)},n);return new ol(S)})}patchCwmsDataTimeseriesWithTimeseries(t,n){return ho(this,void 0,void 0,function*(){yield this.patchCwmsDataTimeseriesWithTimeseriesRaw(t,n)})}postCwmsDataTimeseriesRaw(t,n){return ho(this,void 0,void 0,function*(){if(t.timeSeries==null)throw new co("timeSeries",'Required parameter "timeSeries" was null or undefined when calling postCwmsDataTimeseries().');const h={};t.versionDate!=null&&(h["version-date"]=t.versionDate),t.timezone!=null&&(h.timezone=t.timezone),t.createAsLrts!=null&&(h["create-as-lrts"]=t.createAsLrts),t.storeRule!=null&&(h["store-rule"]=t.storeRule),t.overrideProtection!=null&&(h["override-protection"]=t.overrideProtection);const x={};x["Content-Type"]="application/json;version=2",this.configuration&&this.configuration.apiKey&&(x.Authorization=yield this.configuration.apiKey("Authorization"));const S=yield this.request({path:"/timeseries",method:"POST",headers:x,query:h,body:Yl(t.timeSeries)},n);return new ol(S)})}postCwmsDataTimeseries(t,n){return ho(this,void 0,void 0,function*(){yield this.postCwmsDataTimeseriesRaw(t,n)})}}var Wl={exports:{}};(function(e,t){(function(h,x){e.exports=x()})(self,function(){return function(){var n={9288:function(f,u,r){var i=r(3400),c={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var a in c){var l=a.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");i.addStyleRule(l,c[a])}},6712:function(f,u,r){f.exports=r(1843)},7240:function(f,u,r){f.exports=r(1132)},6144:function(f,u,r){f.exports=r(7776)},2016:function(f,u,r){f.exports=r(4884)},5556:function(f,u,r){f.exports=r(6744)},6489:function(f,u,r){f.exports=r(2028)},3472:function(f,u,r){var i=r(2016);i.register([r(7240),r(260),r(6712),r(5556),r(6489),r(7312),r(6144)]),f.exports=i},260:function(f,u,r){f.exports=r(5792)},7312:function(f,u,r){f.exports=r(6272)},2196:function(f){f.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},3916:function(f,u,r){var i=r(2196),c=r(5376),a=r(3816),l=r(1780).templatedArray;r(6208),f.exports=l("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:c({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:i.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:i.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",a.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:c({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},272:function(f,u,r){var i=r(3400),c=r(4460),a=r(6196).draw;f.exports=function(d){var p=d._fullLayout,o=i.filterVisible(p.annotations);if(o.length&&d._fullData.length)return i.syncOrAsync([a,l],d)};function l(v){var d=v._fullLayout;i.filterVisible(d.annotations).forEach(function(p){var o=c.getFromId(v,p.xref),y=c.getFromId(v,p.yref),_=c.getRefType(p.xref),E=c.getRefType(p.yref);p._extremes={},_==="range"&&s(p,o),E==="range"&&s(p,y)})}function s(v,d){var p=d._id,o=p.charAt(0),y=v[o],_=v["a"+o],E=v[o+"ref"],M=v["a"+o+"ref"],b=v["_"+o+"padplus"],w=v["_"+o+"padminus"],A={x:1,y:-1}[o]*v[o+"shift"],R=3*v.arrowsize*v.arrowwidth||0,T=R+A,C=R-A,m=3*v.startarrowsize*v.arrowwidth||0,L=m+A,D=m-A,O;if(M===E){var N=c.findExtremes(d,[d.r2c(y)],{ppadplus:T,ppadminus:C}),V=c.findExtremes(d,[d.r2c(_)],{ppadplus:Math.max(b,L),ppadminus:Math.max(w,D)});O={min:[N.min[0],V.min[0]],max:[N.max[0],V.max[0]]}}else L=_?L+_:L,D=_?D-_:D,O=c.findExtremes(d,[d.r2c(y)],{ppadplus:Math.max(b,T,L),ppadminus:Math.max(w,C,D)});v._extremes[p]=O}},2300:function(f,u,r){var i=r(3400),c=r(4040),a=r(1780).arrayEditor;f.exports={hasClickToShow:l,onClick:s};function l(p,o){var y=v(p,o);return y.on.length>0||y.explicitOff.length>0}function s(p,o){var y=v(p,o),_=y.on,E=y.off.concat(y.explicitOff),M={},b=p._fullLayout.annotations,w,A;if(_.length||E.length){for(w=0;w<_.length;w++)A=a(p.layout,"annotations",b[_[w]]),A.modifyItem("visible",!0),i.extendFlat(M,A.getUpdateObj());for(w=0;w<E.length;w++)A=a(p.layout,"annotations",b[E[w]]),A.modifyItem("visible",!1),i.extendFlat(M,A.getUpdateObj());return c.call("update",p,{},M)}}function v(p,o){var y=p._fullLayout.annotations,_=[],E=[],M=[],b=(o||[]).length,w,A,R,T,C,m,L,D;for(w=0;w<y.length;w++)if(R=y[w],T=R.clicktoshow,T){for(A=0;A<b;A++)if(C=o[A],m=C.xaxis,L=C.yaxis,m._id===R.xref&&L._id===R.yref&&m.d2r(C.x)===d(R._xclick,m)&&L.d2r(C.y)===d(R._yclick,L)){R.visible?T==="onout"?D=E:D=M:D=_,D.push(w);break}A===b&&R.visible&&T==="onout"&&E.push(w)}return{on:_,off:E,explicitOff:M}}function d(p,o){return o.type==="log"?o.l2r(p):o.d2r(p)}},7192:function(f,u,r){var i=r(3400),c=r(6308);f.exports=function(l,s,v,d){d("opacity");var p=d("bgcolor"),o=d("bordercolor"),y=c.opacity(o);d("borderpad");var _=d("borderwidth"),E=d("showarrow");d("text",E?" ":v._dfltTitle.annotation),d("textangle"),i.coerceFont(d,"font",v.font),d("width"),d("align");var M=d("height");if(M&&d("valign"),E){var b=d("arrowside"),w,A;b.indexOf("end")!==-1&&(w=d("arrowhead"),A=d("arrowsize")),b.indexOf("start")!==-1&&(d("startarrowhead",w),d("startarrowsize",A)),d("arrowcolor",y?s.bordercolor:c.defaultLine),d("arrowwidth",(y&&_||1)*2),d("standoff"),d("startstandoff")}var R=d("hovertext"),T=v.hoverlabel||{};if(R){var C=d("hoverlabel.bgcolor",T.bgcolor||(c.opacity(p)?c.rgb(p):c.defaultLine)),m=d("hoverlabel.bordercolor",T.bordercolor||c.contrast(C)),L=i.extendFlat({},T.font);L.color||(L.color=m),i.coerceFont(d,"hoverlabel.font",L)}d("captureevents",!!R)}},9208:function(f,u,r){var i=r(8248),c=r(6896);f.exports=function(l,s,v,d){s=s||{};var p=v==="log"&&s.type==="linear",o=v==="linear"&&s.type==="log";if(!(p||o))return;var y=l._fullLayout.annotations,_=s._id.charAt(0),E,M;function b(A){var R=E[A],T=null;p?T=c(R,s.range):T=Math.pow(10,R),i(T)||(T=null),d(M+A,T)}for(var w=0;w<y.length;w++)E=y[w],M="annotations["+w+"].",E[_+"ref"]===s._id&&b(_),E["a"+_+"ref"]===s._id&&b("a"+_)}},5216:function(f,u,r){var i=r(3400),c=r(4460),a=r(1272),l=r(7192),s=r(3916);f.exports=function(p,o){a(p,o,{name:"annotations",handleItemDefaults:v})};function v(d,p,o){function y(X,k){return i.coerce(d,p,s,X,k)}var _=y("visible"),E=y("clicktoshow");if(_||E){l(d,p,o,y);for(var M=p.showarrow,b=["x","y"],w=[-10,-30],A={_fullLayout:o},R=0;R<2;R++){var T=b[R],C=c.coerceRef(d,p,A,T,"","paper");if(C!=="paper"){var m=c.getFromId(A,C);m._annIndices.push(p._index)}if(c.coercePosition(p,A,y,C,T,.5),M){var L="a"+T,D=c.coerceRef(d,p,A,L,"pixel",["pixel","paper"]);D!=="pixel"&&D!==C&&(D=p[L]="pixel");var O=D==="pixel"?w[R]:.4;c.coercePosition(p,A,y,D,L,O)}y(T+"anchor"),y(T+"shift")}if(i.noneOrAll(d,p,["x","y"]),M&&i.noneOrAll(d,p,["ax","ay"]),E){var N=y("xclick"),V=y("yclick");p._xclick=N===void 0?p.x:c.cleanPosition(N,A,p.xref),p._yclick=V===void 0?p.y:c.cleanPosition(V,A,p.yref)}}}},6196:function(f,u,r){var i=r(3428),c=r(4040),a=r(7316),l=r(3400),s=l.strTranslate,v=r(4460),d=r(6308),p=r(3616),o=r(3024),y=r(2736),_=r(3972),E=r(6476),M=r(1780).arrayEditor,b=r(3652);f.exports={draw:w,drawOne:A,drawRaw:T};function w(C){var m=C._fullLayout;m._infolayer.selectAll(".annotation").remove();for(var L=0;L<m.annotations.length;L++)m.annotations[L].visible&&A(C,L);return a.previousPromises(C)}function A(C,m){var L=C._fullLayout,D=L.annotations[m]||{},O=v.getFromId(C,D.xref),N=v.getFromId(C,D.yref);O&&O.setScale(),N&&N.setScale(),T(C,D,m,!1,O,N)}function R(C,m,L,D,O){var N=O[L],V=O[L+"ref"],X=L.indexOf("y")!==-1,k=v.getRefType(V)==="domain",Z=X?D.h:D.w;return C?k?N+(X?-m:m)/C._length:C.p2r(C.r2p(N)+m):N+(X?-m:m)/Z}function T(C,m,L,D,O,N){var V=C._fullLayout,X=C._fullLayout._size,k=C._context.edits,Z,B;D?(Z="annotation-"+D,B=D+".annotations"):(Z="annotation",B="annotations");var J=M(C.layout,B,m),ne=J.modifyBase,oe=J.modifyItem,Y=J.getUpdateObj;V._infolayer.selectAll("."+Z+'[data-index="'+L+'"]').remove();var G="clip"+V._uid+"_ann"+L;if(!m._input||m.visible===!1){i.selectAll("#"+G).remove();return}var K={x:{},y:{}},ee=+m.textangle||0,ie=V._infolayer.append("g").classed(Z,!0).attr("data-index",String(L)).style("opacity",m.opacity),re=ie.append("g").classed("annotation-text-g",!0),se=k[m.showarrow?"annotationTail":"annotationPosition"],ge=m.captureevents||k.annotationText||se;function xe(ue){var ve={index:L,annotation:m._input,fullAnnotation:m,event:ue};return D&&(ve.subplotId=D),ve}var Se=re.append("g").style("pointer-events",ge?"all":null).call(_,"pointer").on("click",function(){C._dragging=!1,C.emit("plotly_clickannotation",xe(i.event))});m.hovertext&&Se.on("mouseover",function(){var ue=m.hoverlabel,ve=ue.font,_e=this.getBoundingClientRect(),Re=C.getBoundingClientRect();o.loneHover({x0:_e.left-Re.left,x1:_e.right-Re.left,y:(_e.top+_e.bottom)/2-Re.top,text:m.hovertext,color:ue.bgcolor,borderColor:ue.bordercolor,fontFamily:ve.family,fontSize:ve.size,fontColor:ve.color,fontWeight:ve.weight,fontStyle:ve.style,fontVariant:ve.variant,fontShadow:ve.fontShadow,fontLineposition:ve.fontLineposition,fontTextcase:ve.fontTextcase},{container:V._hoverlayer.node(),outerContainer:V._paper.node(),gd:C})}).on("mouseout",function(){o.loneUnhover(V._hoverlayer.node())});var ce=m.borderwidth,pe=m.borderpad,ye=ce+pe,U=Se.append("rect").attr("class","bg").style("stroke-width",ce+"px").call(d.stroke,m.bordercolor).call(d.fill,m.bgcolor),W=m.width||m.height,j=V._topclips.selectAll("#"+G).data(W?[0]:[]);j.enter().append("clipPath").classed("annclip",!0).attr("id",G).append("rect"),j.exit().remove();var F=m.font,P=V._meta?l.templateString(m.text,V._meta):m.text,q=Se.append("text").classed("annotation-text",!0).text(P);function z(ue){return ue.call(p.font,F).attr({"text-anchor":{left:"start",right:"end"}[m.align]||"middle"}),y.convertToTspans(ue,C,te),ue}function te(){var ue=q.selectAll("a");if(ue.size()===1&&ue.text()===q.text()){var ve=Se.insert("a",":first-child").attr({"xlink:xlink:href":ue.attr("xlink:href"),"xlink:xlink:show":ue.attr("xlink:show")}).style({cursor:"pointer"});ve.node().appendChild(U.node())}var _e=Se.select(".annotation-text-math-group"),Re=!_e.empty(),Le=p.bBox((Re?_e:q).node()),Ve=Le.width,Xe=Le.height,Ze=m.width||Ve,Te=m.height||Xe,we=Math.round(Ze+2*ye),be=Math.round(Te+2*ye);function ke(Vt,Ft){return Ft==="auto"&&(Vt<.3333333333333333?Ft="left":Vt>.6666666666666666?Ft="right":Ft="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Ft]}for(var He=!1,Ke=["x","y"],st=0;st<Ke.length;st++){var vt=Ke[st],pt=m[vt+"ref"]||vt,ft=m["a"+vt+"ref"],lt={x:O,y:N}[vt],Mt=(ee+(vt==="x"?0:-90))*Math.PI/180,ot=we*Math.cos(Mt),Ct=be*Math.sin(Mt),kt=Math.abs(ot)+Math.abs(Ct),St=m[vt+"anchor"],Et=m[vt+"shift"]*(vt==="x"?1:-1),Ue=K[vt],De,Ie,Fe,We,de,Me=v.getRefType(pt);if(lt&&Me!=="domain"){var he=lt.r2fraction(m[vt]);(he<0||he>1)&&(ft===pt?(he=lt.r2fraction(m["a"+vt]),(he<0||he>1)&&(He=!0)):He=!0),De=lt._offset+lt.r2p(m[vt]),We=.5}else{var Ee=Me==="domain";vt==="x"?(Fe=m[vt],De=Ee?lt._offset+lt._length*Fe:De=X.l+X.w*Fe):(Fe=1-m[vt],De=Ee?lt._offset+lt._length*Fe:De=X.t+X.h*Fe),We=m.showarrow?.5:Fe}if(m.showarrow){Ue.head=De;var Pe=m["a"+vt];if(de=ot*ke(.5,m.xanchor)-Ct*ke(.5,m.yanchor),ft===pt){var Ne=v.getRefType(ft);Ne==="domain"?(vt==="y"&&(Pe=1-Pe),Ue.tail=lt._offset+lt._length*Pe):Ne==="paper"?vt==="y"?(Pe=1-Pe,Ue.tail=X.t+X.h*Pe):Ue.tail=X.l+X.w*Pe:Ue.tail=lt._offset+lt.r2p(Pe),Ie=de}else Ue.tail=De+Pe,Ie=de+Pe;Ue.text=Ue.tail+de;var ht=V[vt==="x"?"width":"height"];if(pt==="paper"&&(Ue.head=l.constrain(Ue.head,1,ht-1)),ft==="pixel"){var nt=-Math.max(Ue.tail-3,Ue.text),Ye=Math.min(Ue.tail+3,Ue.text)-ht;nt>0?(Ue.tail+=nt,Ue.text+=nt):Ye>0&&(Ue.tail-=Ye,Ue.text-=Ye)}Ue.tail+=Et,Ue.head+=Et}else de=kt*ke(We,St),Ie=de,Ue.text=De+de;Ue.text+=Et,de+=Et,Ie+=Et,m["_"+vt+"padplus"]=kt/2+Ie,m["_"+vt+"padminus"]=kt/2-Ie,m["_"+vt+"size"]=kt,m["_"+vt+"shift"]=de}if(He){Se.remove();return}var Be=0,ut=0;if(m.align!=="left"&&(Be=(Ze-Ve)*(m.align==="center"?.5:1)),m.valign!=="top"&&(ut=(Te-Xe)*(m.valign==="middle"?.5:1)),Re)_e.select("svg").attr({x:ye+Be-1,y:ye+ut}).call(p.setClipUrl,W?G:null,C);else{var Dt=ye+ut-Le.top,Nt=ye+Be-Le.left;q.call(y.positionText,Nt,Dt).call(p.setClipUrl,W?G:null,C)}j.select("rect").call(p.setRect,ye,ye,Ze,Te),U.call(p.setRect,ce/2,ce/2,we-ce,be-ce),Se.call(p.setTranslate,Math.round(K.x.text-we/2),Math.round(K.y.text-be/2)),re.attr({transform:"rotate("+ee+","+K.x.text+","+K.y.text+")"});var Wt=function(Vt,Ft){ie.selectAll(".annotation-arrow-g").remove();var qt=K.x.head,Gt=K.y.head,Xt=K.x.tail+Vt,sr=K.y.tail+Ft,jt=K.x.text+Vt,Ut=K.y.text+Ft,tr=l.rotationXYMatrix(ee,jt,Ut),Ht=l.apply2DTransform(tr),lr=l.apply2DTransform2(tr),yr=+U.attr("width"),xr=+U.attr("height"),er=jt-.5*yr,fe=er+yr,Q=Ut-.5*xr,Je=Q+xr,Ge=[[er,Q,er,Je],[er,Je,fe,Je],[fe,Je,fe,Q],[fe,Q,er,Q]].map(lr);if(!Ge.reduce(function(At,Ot){return At^!!l.segmentsIntersect(qt,Gt,qt+1e6,Gt+1e6,Ot[0],Ot[1],Ot[2],Ot[3])},!1)){Ge.forEach(function(At){var Ot=l.segmentsIntersect(Xt,sr,qt,Gt,At[0],At[1],At[2],At[3]);Ot&&(Xt=Ot.x,sr=Ot.y)});var Qe=m.arrowwidth,it=m.arrowcolor,rt=m.arrowside,$e=ie.append("g").style({opacity:d.opacity(it)}).classed("annotation-arrow-g",!0),je=$e.append("path").attr("d","M"+Xt+","+sr+"L"+qt+","+Gt).style("stroke-width",Qe+"px").call(d.stroke,d.rgb(it));if(b(je,rt,m),k.annotationPosition&&je.node().parentNode&&!D){var ct=qt,dt=Gt;if(m.standoff){var xt=Math.sqrt(Math.pow(qt-Xt,2)+Math.pow(Gt-sr,2));ct+=m.standoff*(Xt-qt)/xt,dt+=m.standoff*(sr-Gt)/xt}var yt=$e.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Xt-ct)+","+(sr-dt),transform:s(ct,dt)}).style("stroke-width",Qe+6+"px").call(d.stroke,"rgba(0,0,0,0)").call(d.fill,"rgba(0,0,0,0)"),Lt,wt;E.init({element:yt.node(),gd:C,prepFn:function(){var At=p.getTranslate(Se);Lt=At.x,wt=At.y,O&&O.autorange&&ne(O._name+".autorange",!0),N&&N.autorange&&ne(N._name+".autorange",!0)},moveFn:function(At,Ot){var zt=Ht(Lt,wt),Zt=zt[0]+At,Kt=zt[1]+Ot;Se.call(p.setTranslate,Zt,Kt),oe("x",R(O,At,"x",X,m)),oe("y",R(N,Ot,"y",X,m)),m.axref===m.xref&&oe("ax",R(O,At,"ax",X,m)),m.ayref===m.yref&&oe("ay",R(N,Ot,"ay",X,m)),$e.attr("transform",s(At,Ot)),re.attr({transform:"rotate("+ee+","+Zt+","+Kt+")"})},doneFn:function(){c.call("_guiRelayout",C,Y());var At=document.querySelector(".js-notes-box-panel");At&&At.redraw(At.selectedObj)}})}}};if(m.showarrow&&Wt(0,0),se){var $t;E.init({element:Se.node(),gd:C,prepFn:function(){$t=re.attr("transform")},moveFn:function(Vt,Ft){var qt="pointer";if(m.showarrow)m.axref===m.xref?oe("ax",R(O,Vt,"ax",X,m)):oe("ax",m.ax+Vt),m.ayref===m.yref?oe("ay",R(N,Ft,"ay",X.w,m)):oe("ay",m.ay+Ft),Wt(Vt,Ft);else{if(D)return;var Gt,Xt;if(O)Gt=R(O,Vt,"x",X,m);else{var sr=m._xsize/X.w,jt=m.x+(m._xshift-m.xshift)/X.w-sr/2;Gt=E.align(jt+Vt/X.w,sr,0,1,m.xanchor)}if(N)Xt=R(N,Ft,"y",X,m);else{var Ut=m._ysize/X.h,tr=m.y-(m._yshift+m.yshift)/X.h-Ut/2;Xt=E.align(tr-Ft/X.h,Ut,0,1,m.yanchor)}oe("x",Gt),oe("y",Xt),(!O||!N)&&(qt=E.getCursor(O?.5:Gt,N?.5:Xt,m.xanchor,m.yanchor))}re.attr({transform:s(Vt,Ft)+$t}),_(Se,qt)},clickFn:function(Vt,Ft){m.captureevents&&C.emit("plotly_clickannotation",xe(Ft))},doneFn:function(){_(Se),c.call("_guiRelayout",C,Y());var Vt=document.querySelector(".js-notes-box-panel");Vt&&Vt.redraw(Vt.selectedObj)}})}}k.annotationText?q.call(y.makeEditable,{delegate:Se,gd:C}).call(z).on("edit",function(ue){m.text=ue,this.call(z),oe("text",ue),O&&O.autorange&&ne(O._name+".autorange",!0),N&&N.autorange&&ne(N._name+".autorange",!0),c.call("_guiRelayout",C,Y())}):q.call(z)}},3652:function(f,u,r){var i=r(3428),c=r(6308),a=r(2196),l=r(3400),s=l.strScale,v=l.strRotate,d=l.strTranslate;f.exports=function(o,y,_){var E=o.node(),M=a[_.arrowhead||0],b=a[_.startarrowhead||0],w=(_.arrowwidth||1)*(_.arrowsize||1),A=(_.arrowwidth||1)*(_.startarrowsize||1),R=y.indexOf("start")>=0,T=y.indexOf("end")>=0,C=M.backoff*w+_.standoff,m=b.backoff*A+_.startstandoff,L,D,O,N;if(E.nodeName==="line"){L={x:+o.attr("x1"),y:+o.attr("y1")},D={x:+o.attr("x2"),y:+o.attr("y2")};var V=L.x-D.x,X=L.y-D.y;if(O=Math.atan2(X,V),N=O+Math.PI,C&&m&&C+m>Math.sqrt(V*V+X*X)){re();return}if(C){if(C*C>V*V+X*X){re();return}var k=C*Math.cos(O),Z=C*Math.sin(O);D.x+=k,D.y+=Z,o.attr({x2:D.x,y2:D.y})}if(m){if(m*m>V*V+X*X){re();return}var B=m*Math.cos(O),J=m*Math.sin(O);L.x-=B,L.y-=J,o.attr({x1:L.x,y1:L.y})}}else if(E.nodeName==="path"){var ne=E.getTotalLength(),oe="";if(ne<C+m){re();return}var Y=E.getPointAtLength(0),G=E.getPointAtLength(.1);O=Math.atan2(Y.y-G.y,Y.x-G.x),L=E.getPointAtLength(Math.min(m,ne)),oe="0px,"+m+"px,";var K=E.getPointAtLength(ne),ee=E.getPointAtLength(ne-.1);N=Math.atan2(K.y-ee.y,K.x-ee.x),D=E.getPointAtLength(Math.max(0,ne-C));var ie=oe?m+C:C;oe+=ne-ie+"px,"+ne+"px",o.style("stroke-dasharray",oe)}function re(){o.style("stroke-dasharray","0px,100px")}function se(ge,xe,Se,ce){ge.path&&(ge.noRotate&&(Se=0),i.select(E.parentNode).append("path").attr({class:o.attr("class"),d:ge.path,transform:d(xe.x,xe.y)+v(Se*180/Math.PI)+s(ce)}).style({fill:c.rgb(_.arrowcolor),"stroke-width":0}))}R&&se(b,L,O,A),T&&se(M,D,N,w)}},9180:function(f,u,r){var i=r(6196),c=r(2300);f.exports={moduleType:"component",name:"annotations",layoutAttributes:r(3916),supplyLayoutDefaults:r(5216),includeBasePlot:r(6632)("annotations"),calcAutorange:r(272),draw:i.draw,drawOne:i.drawOne,drawRaw:i.drawRaw,hasClickToShow:c.hasClickToShow,onClick:c.onClick,convertCoords:r(9208)}},5899:function(f,u,r){var i=r(3916),c=r(7824).overrideAll,a=r(1780).templatedArray;f.exports=c(a("annotation",{visible:i.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:i.xanchor,xshift:i.xshift,yanchor:i.yanchor,yshift:i.yshift,text:i.text,textangle:i.textangle,font:i.font,width:i.width,height:i.height,opacity:i.opacity,align:i.align,valign:i.valign,bgcolor:i.bgcolor,bordercolor:i.bordercolor,borderpad:i.borderpad,borderwidth:i.borderwidth,showarrow:i.showarrow,arrowcolor:i.arrowcolor,arrowhead:i.arrowhead,startarrowhead:i.startarrowhead,arrowside:i.arrowside,arrowsize:i.arrowsize,startarrowsize:i.startarrowsize,arrowwidth:i.arrowwidth,standoff:i.standoff,startstandoff:i.startstandoff,hovertext:i.hovertext,hoverlabel:i.hoverlabel,captureevents:i.captureevents}),"calc","from-root")},76:function(f,u,r){var i=r(3400),c=r(4460);f.exports=function(s){for(var v=s.fullSceneLayout,d=v.annotations,p=0;p<d.length;p++)a(d[p],s);s.fullLayout._infolayer.selectAll(".annotation-"+s.id).remove()};function a(l,s){var v=s.fullSceneLayout,d=v.domain,p=s.fullLayout._size,o={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};l._xa={},i.extendFlat(l._xa,o),c.setConvert(l._xa),l._xa._offset=p.l+d.x[0]*p.w,l._xa.l2p=function(){return .5*(1+l._pdata[0]/l._pdata[3])*p.w*(d.x[1]-d.x[0])},l._ya={},i.extendFlat(l._ya,o),c.setConvert(l._ya),l._ya._offset=p.t+(1-d.y[1])*p.h,l._ya.l2p=function(){return .5*(1-l._pdata[1]/l._pdata[3])*p.h*(d.y[1]-d.y[0])}}},2808:function(f,u,r){var i=r(3400),c=r(4460),a=r(1272),l=r(7192),s=r(5899);f.exports=function(p,o,y){a(p,o,{name:"annotations",handleItemDefaults:v,fullLayout:y.fullLayout})};function v(d,p,o,y){function _(b,w){return i.coerce(d,p,s,b,w)}function E(b){var w=b+"axis",A={_fullLayout:{}};return A._fullLayout[w]=o[w],c.coercePosition(p,A,_,b,b,.5)}var M=_("visible");M&&(l(d,p,y.fullLayout,_),E("x"),E("y"),E("z"),i.noneOrAll(d,p,["x","y","z"]),p.xref="x",p.yref="y",p.zref="z",_("xanchor"),_("yanchor"),_("xshift"),_("yshift"),p.showarrow&&(p.axref="pixel",p.ayref="pixel",_("ax",-10),_("ay",-30),i.noneOrAll(d,p,["ax","ay"])))}},1836:function(f,u,r){var i=r(6196).drawRaw,c=r(4424),a=["x","y","z"];f.exports=function(s){for(var v=s.fullSceneLayout,d=s.dataScale,p=v.annotations,o=0;o<p.length;o++){for(var y=p[o],_=!1,E=0;E<3;E++){var M=a[E],b=y[M],w=v[M+"axis"],A=w.r2fraction(b);if(A<0||A>1){_=!0;break}}_?s.fullLayout._infolayer.select(".annotation-"+s.id+'[data-index="'+o+'"]').remove():(y._pdata=c(s.glplot.cameraParams,[v.xaxis.r2l(y.x)*d[0],v.yaxis.r2l(y.y)*d[1],v.zaxis.r2l(y.z)*d[2]]),i(s.graphDiv,y,o,s.id,y._xa,y._ya))}}},6864:function(f,u,r){var i=r(4040),c=r(3400);f.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:r(5899)}}},layoutAttributes:r(5899),handleDefaults:r(2808),includeBasePlot:a,convert:r(76),draw:r(1836)};function a(l,s){var v=i.subplotsRegistry.gl3d;if(v)for(var d=v.attrRegex,p=Object.keys(l),o=0;o<p.length;o++){var y=p[o];d.test(y)&&(l[y].annotations||[]).length&&(c.pushUnique(s._basePlotModules,v),c.pushUnique(s._subplots.gl3d,y))}}},4976:function(f,u,r){f.exports=r(8700),r(5168),r(7020),r(7411),r(5668),r(2787),r(2084),r(6368),r(4747),r(5616),r(632),r(3040),r(1104),r(9075),r(4592),r(5348)},7776:function(f,u,r){var i=r(4976),c=r(3400),a=r(9032),l=a.EPOCHJD,s=a.ONEDAY,v={valType:"enumerated",values:c.sortObjectKeys(i.calendars),editType:"calc",dflt:"gregorian"},d=function(O,N,V,X){var k={};return k[V]=v,c.coerce(O,N,k,V,X)},p=function(O,N,V,X){for(var k=0;k<V.length;k++)d(O,N,V[k]+"calendar",X.calendar)},o={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},y={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},_={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},E="##",M={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:E,w:E,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function b(O,N,V){for(var X=Math.floor((N+.05)/s)+l,k=A(V).fromJD(X),Z=0,B,J,ne,oe,Y;(Z=O.indexOf("%",Z))!==-1;)B=O.charAt(Z+1),B==="0"||B==="-"||B==="_"?(ne=3,J=O.charAt(Z+2),B==="_"&&(B="-")):(J=B,B="0",ne=2),oe=M[J],oe?(oe===E?Y=E:Y=k.formatDate(oe[B]),O=O.substr(0,Z)+Y+O.substr(Z+ne),Z+=Y.length):Z+=ne;return O}var w={};function A(O){var N=w[O];return N||(N=w[O]=i.instance(O),N)}function R(O){return c.extendFlat({},v,{description:O})}function T(O){return"Sets the calendar system to use with `"+O+"` date data."}var C={xcalendar:R(T("x"))},m=c.extendFlat({},C,{ycalendar:R(T("y"))}),L=c.extendFlat({},m,{zcalendar:R(T("z"))}),D=R(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));f.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:m,bar:m,box:m,heatmap:m,contour:m,histogram:m,histogram2d:m,histogram2dcontour:m,scatter3d:L,surface:L,mesh3d:L,scattergl:m,ohlc:C,candlestick:C},layout:{calendar:R(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:D},yaxis:{calendar:D},scene:{xaxis:{calendar:D},yaxis:{calendar:D},zaxis:{calendar:D}},polar:{radialaxis:{calendar:D}}},transforms:{filter:{valuecalendar:R(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:R(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:v,handleDefaults:d,handleTraceDefaults:p,CANONICAL_SUNDAY:y,CANONICAL_TICK:o,DFLTRANGE:_,getCal:A,worldCalFmt:b}},2548:function(f,u){u.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],u.defaultLine="#444",u.lightLine="#eee",u.background="#fff",u.borderLine="#BEC8D9",u.lightFraction=90.9090909090909},6308:function(f,u,r){var i=r(9760),c=r(8248),a=r(8116).isTypedArray,l=f.exports={},s=r(2548);l.defaults=s.defaults;var v=l.defaultLine=s.defaultLine;l.lightLine=s.lightLine;var d=l.background=s.background;l.tinyRGB=function(o){var y=o.toRgb();return"rgb("+Math.round(y.r)+", "+Math.round(y.g)+", "+Math.round(y.b)+")"},l.rgb=function(o){return l.tinyRGB(i(o))},l.opacity=function(o){return o?i(o).getAlpha():0},l.addOpacity=function(o,y){var _=i(o).toRgb();return"rgba("+Math.round(_.r)+", "+Math.round(_.g)+", "+Math.round(_.b)+", "+y+")"},l.combine=function(o,y){var _=i(o).toRgb();if(_.a===1)return i(o).toRgbString();var E=i(y||d).toRgb(),M=E.a===1?E:{r:255*(1-E.a)+E.r*E.a,g:255*(1-E.a)+E.g*E.a,b:255*(1-E.a)+E.b*E.a},b={r:M.r*(1-_.a)+_.r*_.a,g:M.g*(1-_.a)+_.g*_.a,b:M.b*(1-_.a)+_.b*_.a};return i(b).toRgbString()},l.interpolate=function(o,y,_){var E=i(o).toRgb(),M=i(y).toRgb(),b={r:_*E.r+(1-_)*M.r,g:_*E.g+(1-_)*M.g,b:_*E.b+(1-_)*M.b};return i(b).toRgbString()},l.contrast=function(o,y,_){var E=i(o);E.getAlpha()!==1&&(E=i(l.combine(o,d)));var M=E.isDark()?y?E.lighten(y):d:_?E.darken(_):v;return M.toString()},l.stroke=function(o,y){var _=i(y);o.style({stroke:l.tinyRGB(_),"stroke-opacity":_.getAlpha()})},l.fill=function(o,y){var _=i(y);o.style({fill:l.tinyRGB(_),"fill-opacity":_.getAlpha()})},l.clean=function(o){if(!(!o||typeof o!="object")){var y=Object.keys(o),_,E,M,b;for(_=0;_<y.length;_++)if(M=y[_],b=o[M],M.substr(M.length-5)==="color")if(Array.isArray(b))for(E=0;E<b.length;E++)b[E]=p(b[E]);else o[M]=p(b);else if(M.substr(M.length-10)==="colorscale"&&Array.isArray(b))for(E=0;E<b.length;E++)Array.isArray(b[E])&&(b[E][1]=p(b[E][1]));else if(Array.isArray(b)){var w=b[0];if(!Array.isArray(w)&&w&&typeof w=="object")for(E=0;E<b.length;E++)l.clean(b[E])}else b&&typeof b=="object"&&!a(b)&&l.clean(b)}};function p(o){if(c(o)||typeof o!="string")return o;var y=o.trim();if(y.substr(0,3)!=="rgb")return o;var _=y.match(/^rgba?\s*\(([^()]*)\)$/);if(!_)return o;var E=_[1].trim().split(/\s*[\s,]\s*/),M=y.charAt(3)==="a"&&E.length===4;if(!M&&E.length!==3)return o;for(var b=0;b<E.length;b++){if(!E[b].length||(E[b]=Number(E[b]),!(E[b]>=0)))return o;if(b===3)E[b]>1&&(E[b]=1);else if(E[b]>=1)return o}var w=Math.round(E[0]*255)+", "+Math.round(E[1]*255)+", "+Math.round(E[2]*255);return M?"rgba("+w+", "+E[3]+")":"rgb("+w+")"}},616:function(f,u,r){var i=r(4724),c=r(5376),a=r(2880).extendFlat,l=r(7824).overrideAll;f.exports=l({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:i.linecolor,outlinewidth:i.linewidth,bordercolor:i.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:i.minor.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:a({},i.ticks,{dflt:""}),ticklabeloverflow:a({},i.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,labelalias:i.labelalias,tickfont:c({}),tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,separatethousands:i.separatethousands,exponentformat:i.exponentformat,minexponent:i.minexponent,showexponent:i.showexponent,title:{text:{valType:"string"},font:c({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:c({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},3964:function(f){f.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},4013:function(f,u,r){var i=r(3400),c=r(1780),a=r(6332),l=r(5404),s=r(5936),v=r(2568),d=r(616);f.exports=function(o,y,_){var E=c.newContainer(y,"colorbar"),M=o.colorbar||{};function b(K,ee){return i.coerce(M,E,d,K,ee)}var w=_.margin||{t:0,b:0,l:0,r:0},A=_.width-w.l-w.r,R=_.height-w.t-w.b,T=b("orientation"),C=T==="v",m=b("thicknessmode");b("thickness",m==="fraction"?30/(C?A:R):30);var L=b("lenmode");b("len",L==="fraction"?1:C?R:A);var D=b("yref"),O=b("xref"),N=D==="paper",V=O==="paper",X,k,Z,B="left";C?(Z="middle",B=V?"left":"right",X=V?1.02:1,k=.5):(Z=N?"bottom":"top",B="center",X=.5,k=N?1.02:1),i.coerce(M,E,{x:{valType:"number",min:V?-2:0,max:V?3:1,dflt:X}},"x"),i.coerce(M,E,{y:{valType:"number",min:N?-2:0,max:N?3:1,dflt:k}},"y"),b("xanchor",B),b("xpad"),b("yanchor",Z),b("ypad"),i.noneOrAll(M,E,["x","y"]),b("outlinecolor"),b("outlinewidth"),b("bordercolor"),b("borderwidth"),b("bgcolor");var J=i.coerce(M,E,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:C?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");b("ticklabeloverflow",J.indexOf("inside")!==-1?"hide past domain":"hide past div"),a(M,E,b,"linear");var ne=_.font,oe={noAutotickangles:!0,outerTicks:!1,font:ne};J.indexOf("inside")!==-1&&(oe.bgColor="black"),v(M,E,b,"linear",oe),s(M,E,b,"linear",oe),l(M,E,b,"linear",oe),b("title.text",_._dfltTitle.colorbar);var Y=E.showticklabels?E.tickfont:ne,G=i.extendFlat({},ne,{family:Y.family,size:i.bigFont(Y.size)});i.coerceFont(b,"title.font",G),b("title.side",C?"top":"right")}},7848:function(f,u,r){var i=r(3428),c=r(9760),a=r(7316),l=r(4040),s=r(4460),v=r(6476),d=r(3400),p=d.strTranslate,o=r(2880).extendFlat,y=r(3972),_=r(3616),E=r(6308),M=r(1668),b=r(2736),w=r(4288).flipScale,A=r(5955),R=r(7668),T=r(4724),C=r(4284),m=C.LINE_SPACING,L=C.FROM_TL,D=C.FROM_BR,O=r(3964).cn;function N(J){var ne=J._fullLayout,oe=ne._infolayer.selectAll("g."+O.colorbar).data(V(J),function(Y){return Y._id});oe.enter().append("g").attr("class",function(Y){return Y._id}).classed(O.colorbar,!0),oe.each(function(Y){var G=i.select(this);d.ensureSingle(G,"rect",O.cbbg),d.ensureSingle(G,"g",O.cbfills),d.ensureSingle(G,"g",O.cblines),d.ensureSingle(G,"g",O.cbaxis,function(ee){ee.classed(O.crisp,!0)}),d.ensureSingle(G,"g",O.cbtitleunshift,function(ee){ee.append("g").classed(O.cbtitle,!0)}),d.ensureSingle(G,"rect",O.cboutline);var K=X(G,Y,J);K&&K.then&&(J._promises||[]).push(K),J._context.edits.colorbarPosition&&k(G,Y,J)}),oe.exit().each(function(Y){a.autoMargin(J,Y._id)}).remove(),oe.order()}function V(J){var ne=J._fullLayout,oe=J.calcdata,Y=[],G,K,ee,ie;function re(F){return o(F,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function se(){typeof ie.calc=="function"?ie.calc(J,ee,G):(G._fillgradient=K.reversescale?w(K.colorscale):K.colorscale,G._zrange=[K[ie.min],K[ie.max]])}for(var ge=0;ge<oe.length;ge++){var xe=oe[ge];if(ee=xe[0].trace,!!ee._module){var Se=ee._module.colorbar;if(ee.visible===!0&&Se)for(var ce=Array.isArray(Se),pe=ce?Se:[Se],ye=0;ye<pe.length;ye++){ie=pe[ye];var U=ie.container;K=U?ee[U]:ee,K&&K.showscale&&(G=re(K.colorbar),G._id="cb"+ee.uid+(ce&&U?"-"+U:""),G._traceIndex=ee.index,G._propPrefix=(U?U+".":"")+"colorbar.",G._meta=ee._meta,se(),Y.push(G))}}}for(var W in ne._colorAxes)if(K=ne[W],K.showscale){var j=ne._colorAxes[W];G=re(K.colorbar),G._id="cb"+W,G._propPrefix=W+".colorbar.",G._meta=ne._meta,ie={min:"cmin",max:"cmax"},j[0]!=="heatmap"&&(ee=j[1],ie.calc=ee._module.colorbar.calc),se(),Y.push(G)}return Y}function X(J,ne,oe){var Y=ne.orientation==="v",G=ne.len,K=ne.lenmode,ee=ne.thickness,ie=ne.thicknessmode,re=ne.outlinewidth,se=ne.borderwidth,ge=ne.bgcolor,xe=ne.xanchor,Se=ne.yanchor,ce=ne.xpad,pe=ne.ypad,ye=ne.x,U=Y?ne.y:1-ne.y,W=ne.yref==="paper",j=ne.xref==="paper",F=oe._fullLayout,P=F._size,q=ne._fillcolor,z=ne._line,te=ne.title,ue=te.side,ve=ne._zrange||i.extent((typeof q=="function"?q:z.color).domain()),_e=typeof z.color=="function"?z.color:function(){return z.color},Re=typeof q=="function"?q:function(){return q},Le=ne._levels,Ve=Z(oe,ne,ve),Xe=Ve.fill,Ze=Ve.line,Te=Math.round(ee*(ie==="fraction"?Y?P.w:P.h:1)),we=Te/(Y?P.w:P.h),be=Math.round(G*(K==="fraction"?Y?P.h:P.w:1)),ke=be/(Y?P.h:P.w),He=j?P.w:oe._fullLayout.width,Ke=W?P.h:oe._fullLayout.height,st=Math.round(Y?ye*He+ce:U*Ke+pe),vt={center:.5,right:1}[xe]||0,pt={top:1,middle:.5}[Se]||0,ft=Y?ye-vt*we:U-pt*we,lt=Y?U-pt*ke:ye-vt*ke,Mt=Math.round(Y?Ke*(1-lt):He*lt);ne._lenFrac=ke,ne._thickFrac=we,ne._uFrac=ft,ne._vFrac=lt;var ot=ne._axis=B(oe,ne,ve);ot.position=we+(Y?ye+ce/P.w:U+pe/P.h);var Ct=["top","bottom"].indexOf(ue)!==-1;if(Y&&Ct&&(ot.title.side=ue,ot.titlex=ye+ce/P.w,ot.titley=lt+(te.side==="top"?ke-pe/P.h:pe/P.h)),!Y&&!Ct&&(ot.title.side=ue,ot.titley=U+pe/P.h,ot.titlex=lt+ce/P.w),z.color&&ne.tickmode==="auto"){ot.tickmode="linear",ot.tick0=Le.start;var kt=Le.size,St=d.constrain(be/50,4,15)+1,Et=(ve[1]-ve[0])/((ne.nticks||St)*kt);if(Et>1){var Ue=Math.pow(10,Math.floor(Math.log(Et)/Math.LN10));kt*=Ue*d.roundUp(Et/Ue,[2,5,10]),(Math.abs(Le.start)/Le.size+1e-6)%1<2e-6&&(ot.tick0=0)}ot.dtick=kt}ot.domain=Y?[lt+pe/P.h,lt+ke-pe/P.h]:[lt+ce/P.w,lt+ke-ce/P.w],ot.setScale(),J.attr("transform",p(Math.round(P.l),Math.round(P.t)));var De=J.select("."+O.cbtitleunshift).attr("transform",p(-Math.round(P.l),-Math.round(P.t))),Ie=ot.ticklabelposition,Fe=ot.title.font.size,We=J.select("."+O.cbaxis),de,Me=0,he=0;function Ee(Ye,Be){var ut={propContainer:ot,propName:ne._propPrefix+"title",traceIndex:ne._traceIndex,_meta:ne._meta,placeholder:F._dfltTitle.colorbar,containerGroup:J.select("."+O.cbtitle)},Dt=Ye.charAt(0)==="h"?Ye.substr(1):"h"+Ye;J.selectAll("."+Dt+",."+Dt+"-math-group").remove(),M.draw(oe,Ye,o(ut,Be||{}))}function Pe(){if(Y&&Ct||!Y&&!Ct){var Ye,Be;ue==="top"&&(Ye=ce+P.l+He*ye,Be=pe+P.t+Ke*(1-lt-ke)+3+Fe*.75),ue==="bottom"&&(Ye=ce+P.l+He*ye,Be=pe+P.t+Ke*(1-lt)-3-Fe*.25),ue==="right"&&(Be=pe+P.t+Ke*U+3+Fe*.75,Ye=ce+P.l+He*lt),Ee(ot._id+"title",{attributes:{x:Ye,y:Be,"text-anchor":Y?"start":"middle"}})}}function Ne(){if(Y&&!Ct||!Y&&Ct){var Ye=ot.position||0,Be=ot._offset+ot._length/2,ut,Dt;if(ue==="right")Dt=Be,ut=P.l+He*Ye+10+Fe*(ot.showticklabels?1:.5);else if(ut=Be,ue==="bottom"&&(Dt=P.t+Ke*Ye+10+(Ie.indexOf("inside")===-1?ot.tickfont.size:0)+(ot.ticks!=="intside"&&ne.ticklen||0)),ue==="top"){var Nt=te.text.split("<br>").length;Dt=P.t+Ke*Ye+10-Te-m*Fe*Nt}Ee((Y?"h":"v")+ot._id+"title",{avoid:{selection:i.select(oe).selectAll("g."+ot._id+"tick"),side:ue,offsetTop:Y?0:P.t,offsetLeft:Y?P.l:0,maxShift:Y?F.width:F.height},attributes:{x:ut,y:Dt,"text-anchor":"middle"},transform:{rotate:Y?-90:0,offset:0}})}}function ht(){if(!Y&&!Ct||Y&&Ct){var Ye=J.select("."+O.cbtitle),Be=Ye.select("text"),ut=[-re/2,re/2],Dt=Ye.select(".h"+ot._id+"title-math-group").node(),Nt=15.6;Be.node()&&(Nt=parseInt(Be.node().style.fontSize,10)*m);var Wt;if(Dt?(Wt=_.bBox(Dt),he=Wt.width,Me=Wt.height,Me>Nt&&(ut[1]-=(Me-Nt)/2)):Be.node()&&!Be.classed(O.jsPlaceholder)&&(Wt=_.bBox(Be.node()),he=Wt.width,Me=Wt.height),Y){if(Me){if(Me+=5,ue==="top")ot.domain[1]-=Me/P.h,ut[1]*=-1;else{ot.domain[0]+=Me/P.h;var $t=b.lineCount(Be);ut[1]+=(1-$t)*Nt}Ye.attr("transform",p(ut[0],ut[1])),ot.setScale()}}else he&&(ue==="right"&&(ot.domain[0]+=(he+Fe/2)/P.w),Ye.attr("transform",p(ut[0],ut[1])),ot.setScale())}J.selectAll("."+O.cbfills+",."+O.cblines).attr("transform",Y?p(0,Math.round(P.h*(1-ot.domain[1]))):p(Math.round(P.w*ot.domain[0]),0)),We.attr("transform",Y?p(0,Math.round(-P.t)):p(Math.round(-P.l),0));var Vt=J.select("."+O.cbfills).selectAll("rect."+O.cbfill).attr("style","").data(Xe);Vt.enter().append("rect").classed(O.cbfill,!0).attr("style",""),Vt.exit().remove();var Ft=ve.map(ot.c2p).map(Math.round).sort(function(jt,Ut){return jt-Ut});Vt.each(function(jt,Ut){var tr=[Ut===0?ve[0]:(Xe[Ut]+Xe[Ut-1])/2,Ut===Xe.length-1?ve[1]:(Xe[Ut]+Xe[Ut+1])/2].map(ot.c2p).map(Math.round);Y&&(tr[1]=d.constrain(tr[1]+(tr[1]>tr[0])?1:-1,Ft[0],Ft[1]));var Ht=i.select(this).attr(Y?"x":"y",st).attr(Y?"y":"x",i.min(tr)).attr(Y?"width":"height",Math.max(Te,2)).attr(Y?"height":"width",Math.max(i.max(tr)-i.min(tr),2));if(ne._fillgradient)_.gradient(Ht,oe,ne._id,Y?"vertical":"horizontalreversed",ne._fillgradient,"fill");else{var lr=Re(jt).replace("e-","");Ht.attr("fill",c(lr).toHexString())}});var qt=J.select("."+O.cblines).selectAll("path."+O.cbline).data(z.color&&z.width?Ze:[]);qt.enter().append("path").classed(O.cbline,!0),qt.exit().remove(),qt.each(function(jt){var Ut=st,tr=Math.round(ot.c2p(jt))+z.width/2%1;i.select(this).attr("d","M"+(Y?Ut+","+tr:tr+","+Ut)+(Y?"h":"v")+Te).call(_.lineGroupStyle,z.width,_e(jt),z.dash)}),We.selectAll("g."+ot._id+"tick,path").remove();var Gt=st+Te+(re||0)/2-(ne.ticks==="outside"?1:0),Xt=s.calcTicks(ot),sr=s.getTickSigns(ot)[2];return s.drawTicks(oe,ot,{vals:ot.ticks==="inside"?s.clipEnds(ot,Xt):Xt,layer:We,path:s.makeTickPath(ot,Gt,sr),transFn:s.makeTransTickFn(ot)}),s.drawLabels(oe,ot,{vals:Xt,layer:We,transFn:s.makeTransTickLabelFn(ot),labelFns:s.makeLabelFns(ot,Gt)})}function nt(){var Ye,Be=Te+re/2;Ie.indexOf("inside")===-1&&(Ye=_.bBox(We.node()),Be+=Y?Ye.width:Ye.height),de=De.select("text");var ut=0,Dt=Y&&ue==="top",Nt=!Y&&ue==="right",Wt=0;if(de.node()&&!de.classed(O.jsPlaceholder)){var $t,Vt=De.select(".h"+ot._id+"title-math-group").node();Vt&&(Y&&Ct||!Y&&!Ct)?(Ye=_.bBox(Vt),ut=Ye.width,$t=Ye.height):(Ye=_.bBox(De.node()),ut=Ye.right-P.l-(Y?st:Mt),$t=Ye.bottom-P.t-(Y?Mt:st),!Y&&ue==="top"&&(Be+=Ye.height,Wt=Ye.height)),Nt&&(de.attr("transform",p(ut/2+Fe/2,0)),ut*=2),Be=Math.max(Be,Y?ut:$t)}var Ft=(Y?ce:pe)*2+Be+se+re/2,qt=0;!Y&&te.text&&Se==="bottom"&&U<=0&&(qt=Ft/2,Ft+=qt,Wt+=qt),F._hColorbarMoveTitle=qt,F._hColorbarMoveCBTitle=Wt;var Gt=se+re,Xt=(Y?st:Mt)-Gt/2-(Y?ce:0),sr=(Y?Mt:st)-(Y?be:pe+Wt-qt);J.select("."+O.cbbg).attr("x",Xt).attr("y",sr).attr(Y?"width":"height",Math.max(Ft-qt,2)).attr(Y?"height":"width",Math.max(be+Gt,2)).call(E.fill,ge).call(E.stroke,ne.bordercolor).style("stroke-width",se);var jt=Nt?Math.max(ut-10,0):0;J.selectAll("."+O.cboutline).attr("x",(Y?st:Mt+ce)+jt).attr("y",(Y?Mt+pe-be:st)+(Dt?Me:0)).attr(Y?"width":"height",Math.max(Te,2)).attr(Y?"height":"width",Math.max(be-(Y?2*pe+Me:2*ce+jt),2)).call(E.stroke,ne.outlinecolor).style({fill:"none","stroke-width":re});var Ut=Y?vt*Ft:0,tr=Y?0:(1-pt)*Ft-Wt;if(Ut=j?P.l-Ut:-Ut,tr=W?P.t-tr:-tr,J.attr("transform",p(Ut,tr)),!Y&&(se||c(ge).getAlpha()&&!c.equals(F.paper_bgcolor,ge))){var Ht=We.selectAll("text"),lr=Ht[0].length,yr=J.select("."+O.cbbg).node(),xr=_.bBox(yr),er=_.getTranslate(J),fe=2;Ht.each(function(dt,xt){var yt=0,Lt=lr-1;if(xt===yt||xt===Lt){var wt=_.bBox(this),At=_.getTranslate(this),Ot;if(xt===Lt){var zt=wt.right+At.x,Zt=xr.right+er.x+Mt-se-fe+ye;Ot=Zt-zt,Ot>0&&(Ot=0)}else if(xt===yt){var Kt=wt.left+At.x,cr=xr.left+er.x+Mt+se+fe;Ot=cr-Kt,Ot<0&&(Ot=0)}Ot&&(lr<3?this.setAttribute("transform","translate("+Ot+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Q={},Je=L[xe],Ge=D[xe],Qe=L[Se],it=D[Se],rt=Ft-Te;Y?(K==="pixels"?(Q.y=U,Q.t=be*Qe,Q.b=be*it):(Q.t=Q.b=0,Q.yt=U+G*Qe,Q.yb=U-G*it),ie==="pixels"?(Q.x=ye,Q.l=Ft*Je,Q.r=Ft*Ge):(Q.l=rt*Je,Q.r=rt*Ge,Q.xl=ye-ee*Je,Q.xr=ye+ee*Ge)):(K==="pixels"?(Q.x=ye,Q.l=be*Je,Q.r=be*Ge):(Q.l=Q.r=0,Q.xl=ye+G*Je,Q.xr=ye-G*Ge),ie==="pixels"?(Q.y=1-U,Q.t=Ft*Qe,Q.b=Ft*it):(Q.t=rt*Qe,Q.b=rt*it,Q.yt=U-ee*Qe,Q.yb=U+ee*it));var $e=ne.y<.5?"b":"t",je=ne.x<.5?"l":"r";oe._fullLayout._reservedMargin[ne._id]={};var ct={r:F.width-Xt-Ut,l:Xt+Q.r,b:F.height-sr-tr,t:sr+Q.b};j&&W?a.autoMargin(oe,ne._id,Q):j?oe._fullLayout._reservedMargin[ne._id][$e]=ct[$e]:W||Y?oe._fullLayout._reservedMargin[ne._id][je]=ct[je]:oe._fullLayout._reservedMargin[ne._id][$e]=ct[$e]}return d.syncOrAsync([a.previousPromises,Pe,ht,Ne,a.previousPromises,nt],oe)}function k(J,ne,oe){var Y=ne.orientation==="v",G=oe._fullLayout,K=G._size,ee,ie,re;v.init({element:J.node(),gd:oe,prepFn:function(){ee=J.attr("transform"),y(J)},moveFn:function(se,ge){J.attr("transform",ee+p(se,ge)),ie=v.align((Y?ne._uFrac:ne._vFrac)+se/K.w,Y?ne._thickFrac:ne._lenFrac,0,1,ne.xanchor),re=v.align((Y?ne._vFrac:1-ne._uFrac)-ge/K.h,Y?ne._lenFrac:ne._thickFrac,0,1,ne.yanchor);var xe=v.getCursor(ie,re,ne.xanchor,ne.yanchor);y(J,xe)},doneFn:function(){if(y(J),ie!==void 0&&re!==void 0){var se={};se[ne._propPrefix+"x"]=ie,se[ne._propPrefix+"y"]=re,ne._traceIndex!==void 0?l.call("_guiRestyle",oe,se,ne._traceIndex):l.call("_guiRelayout",oe,se)}}})}function Z(J,ne,oe){var Y=ne._levels,G=[],K=[],ee,ie,re=Y.end+Y.size/100,se=Y.size,ge=1.001*oe[0]-.001*oe[1],xe=1.001*oe[1]-.001*oe[0];for(ie=0;ie<1e5&&(ee=Y.start+ie*se,!(se>0?ee>=re:ee<=re));ie++)ee>ge&&ee<xe&&G.push(ee);if(ne._fillgradient)K=[0];else if(typeof ne._fillcolor=="function"){var Se=ne._filllevels;if(Se)for(re=Se.end+Se.size/100,se=Se.size,ie=0;ie<1e5&&(ee=Se.start+ie*se,!(se>0?ee>=re:ee<=re));ie++)ee>oe[0]&&ee<oe[1]&&K.push(ee);else K=G.map(function(ce){return ce-Y.size/2}),K.push(K[K.length-1]+Y.size)}else ne._fillcolor&&typeof ne._fillcolor=="string"&&(K=[0]);return Y.size<0&&(G.reverse(),K.reverse()),{line:G,fill:K}}function B(J,ne,oe){var Y=J._fullLayout,G=ne.orientation==="v",K={type:"linear",range:oe,tickmode:ne.tickmode,nticks:ne.nticks,tick0:ne.tick0,dtick:ne.dtick,tickvals:ne.tickvals,ticktext:ne.ticktext,ticks:ne.ticks,ticklen:ne.ticklen,tickwidth:ne.tickwidth,tickcolor:ne.tickcolor,showticklabels:ne.showticklabels,labelalias:ne.labelalias,ticklabelposition:ne.ticklabelposition,ticklabeloverflow:ne.ticklabeloverflow,ticklabelstep:ne.ticklabelstep,tickfont:ne.tickfont,tickangle:ne.tickangle,tickformat:ne.tickformat,exponentformat:ne.exponentformat,minexponent:ne.minexponent,separatethousands:ne.separatethousands,showexponent:ne.showexponent,showtickprefix:ne.showtickprefix,tickprefix:ne.tickprefix,showticksuffix:ne.showticksuffix,ticksuffix:ne.ticksuffix,title:ne.title,showline:!0,anchor:"free",side:G?"right":"bottom",position:1},ee=G?"y":"x",ie={type:"linear",_id:ee+ne._id},re={letter:ee,font:Y.font,noAutotickangles:ee==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:Y.calendar};function se(ge,xe){return d.coerce(K,ie,T,ge,xe)}return A(K,ie,se,re,Y),R(K,ie,se,re),ie}f.exports={draw:N}},553:function(f,u,r){var i=r(3400);f.exports=function(a){return i.isPlainObject(a.colorbar)}},5080:function(f,u,r){f.exports={moduleType:"component",name:"colorbar",attributes:r(616),supplyDefaults:r(4013),draw:r(7848).draw,hasColorbar:r(553)}},9084:function(f,u,r){var i=r(616),c=r(3756).counter,a=r(2996),l=r(8304).scales;a(l),f.exports=function(v,d){v=v||"",d=d||{};var p=d.cLetter||"c";"onlyIfNumerical"in d&&d.onlyIfNumerical;var o="noScale"in d?d.noScale:v==="marker.line",y="showScaleDflt"in d?d.showScaleDflt:p==="z",_=typeof d.colorscaleDflt=="string"?l[d.colorscaleDflt]:null,E=d.editTypeOverride||"",M;"colorAttr"in d?(M=d.colorAttr,d.colorAttr):M={z:"z",c:"color"}[p];var b=p+"auto",w=p+"min",A=p+"max",R=p+"mid",T={};T[w]=T[A]=void 0;var C={};C[b]=!1;var m={};return M==="color"&&(m.color={valType:"color",arrayOk:!0,editType:E||"style"},d.anim&&(m.color.anim=!0)),m[b]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:T},m[w]={valType:"number",dflt:null,editType:E||"plot",impliedEdits:C},m[A]={valType:"number",dflt:null,editType:E||"plot",impliedEdits:C},m[R]={valType:"number",dflt:null,editType:"calc",impliedEdits:T},m.colorscale={valType:"colorscale",editType:"calc",dflt:_,impliedEdits:{autocolorscale:!1}},m.autocolorscale={valType:"boolean",dflt:d.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},m.reversescale={valType:"boolean",dflt:!1,editType:"plot"},o||(m.showscale={valType:"boolean",dflt:y,editType:"calc"},m.colorbar=i),d.noColorAxis||(m.coloraxis={valType:"subplotid",regex:c("coloraxis"),dflt:null,editType:"calc"}),m}},7128:function(f,u,r){var i=r(8248),c=r(3400),a=r(4288).extractOpts;f.exports=function(s,v,d){var p=s._fullLayout,o=d.vals,y=d.containerStr,_=y?c.nestedProperty(v,y).get():v,E=a(_),M=E.auto!==!1,b=E.min,w=E.max,A=E.mid,R=function(){return c.aggNums(Math.min,null,o)},T=function(){return c.aggNums(Math.max,null,o)};if(b===void 0?b=R():M&&(_._colorAx&&i(b)?b=Math.min(b,R()):b=R()),w===void 0?w=T():M&&(_._colorAx&&i(w)?w=Math.max(w,T()):w=T()),M&&A!==void 0&&(w-A>A-b?b=A-(w-A):w-A<A-b&&(w=A+(A-b))),b===w&&(b-=.5,w+=.5),E._sync("min",b),E._sync("max",w),E.autocolorscale){var C;b*w<0?C=p.colorscale.diverging:b>=0?C=p.colorscale.sequential:C=p.colorscale.sequentialminus,E._sync("colorscale",C)}}},5504:function(f,u,r){var i=r(3400),c=r(4288).hasColorscale,a=r(4288).extractOpts;f.exports=function(s,v){function d(b,w){var A=b["_"+w];A!==void 0&&(b[w]=A)}function p(b,w){var A=w.container?i.nestedProperty(b,w.container).get():b;if(A)if(A.coloraxis)A._colorAx=v[A.coloraxis];else{var R=a(A),T=R.auto;(T||R.min===void 0)&&d(A,w.min),(T||R.max===void 0)&&d(A,w.max),R.autocolorscale&&d(A,"colorscale")}}for(var o=0;o<s.length;o++){var y=s[o],_=y._module.colorbar;if(_)if(Array.isArray(_))for(var E=0;E<_.length;E++)p(y,_[E]);else p(y,_);c(y,"marker.line")&&p(y,{container:"marker.line",min:"cmin",max:"cmax"})}for(var M in v._colorAxes)p(v[M],{min:"cmin",max:"cmax"})}},7260:function(f,u,r){var i=r(8248),c=r(3400),a=r(553),l=r(4013),s=r(8304).isValid,v=r(4040).traceIs;function d(p,o){var y=o.slice(0,o.length-1);return o?c.nestedProperty(p,y).get()||{}:p}f.exports=function p(o,y,_,E,M){var b=M.prefix,w=M.cLetter,A="_module"in y,R=d(o,b),T=d(y,b),C=d(y._template||{},b)||{},m=function(){return delete o.coloraxis,delete y.coloraxis,p(o,y,_,E,M)};if(A){var L=_._colorAxes||{},D=E(b+"coloraxis");if(D){var O=v(y,"contour")&&c.nestedProperty(y,"contours.coloring").get()||"heatmap",N=L[D];N?(N[2].push(m),N[0]!==O&&(N[0]=!1,c.warn(["Ignoring coloraxis:",D,"setting","as it is linked to incompatible colorscales."].join(" ")))):L[D]=[O,y,[m]];return}}var V=R[w+"min"],X=R[w+"max"],k=i(V)&&i(X)&&V<X,Z=E(b+w+"auto",!k);Z?E(b+w+"mid"):(E(b+w+"min"),E(b+w+"max"));var B=R.colorscale,J=C.colorscale,ne;if(B!==void 0&&(ne=!s(B)),J!==void 0&&(ne=!s(J)),E(b+"autocolorscale",ne),E(b+"colorscale"),E(b+"reversescale"),b!=="marker.line."){var oe;b&&A&&(oe=a(R));var Y=E(b+"showscale",oe);Y&&(b&&C&&(T._template=C),l(R,T,_))}}},4288:function(f,u,r){var i=r(3428),c=r(9760),a=r(8248),l=r(3400),s=r(6308),v=r(8304).isValid;function d(A,R,T){var C=R?l.nestedProperty(A,R).get()||{}:A,m=C[T||"color"];m&&m._inputArray&&(m=m._inputArray);var L=!1;if(l.isArrayOrTypedArray(m)){for(var D=0;D<m.length;D++)if(a(m[D])){L=!0;break}}return l.isPlainObject(C)&&(L||C.showscale===!0||a(C.cmin)&&a(C.cmax)||v(C.colorscale)||l.isPlainObject(C.colorbar))}var p=["showscale","autocolorscale","colorscale","reversescale","colorbar"],o=["min","max","mid","auto"];function y(A){var R=A._colorAx,T=R||A,C={},m,L,D;for(L=0;L<p.length;L++)D=p[L],C[D]=T[D];if(R)for(m="c",L=0;L<o.length;L++)D=o[L],C[D]=T["c"+D];else{var O;for(L=0;L<o.length;L++){if(D=o[L],O="c"+D,O in T){C[D]=T[O];continue}O="z"+D,O in T&&(C[D]=T[O])}m=O.charAt(0)}return C._sync=function(N,V){var X=o.indexOf(N)!==-1?m+N:N;T[X]=T["_"+X]=V},C}function _(A){for(var R=y(A),T=R.min,C=R.max,m=R.reversescale?E(R.colorscale):R.colorscale,L=m.length,D=new Array(L),O=new Array(L),N=0;N<L;N++){var V=m[N];D[N]=T+V[0]*(C-T),O[N]=V[1]}return{domain:D,range:O}}function E(A){for(var R=A.length,T=new Array(R),C=R-1,m=0;C>=0;C--,m++){var L=A[C];T[m]=[1-L[0],L[1]]}return T}function M(A,R){R=R||{};for(var T=A.domain,C=A.range,m=C.length,L=new Array(m),D=0;D<m;D++){var O=c(C[D]).toRgb();L[D]=[O.r,O.g,O.b,O.a]}var N=i.scale.linear().domain(T).range(L).clamp(!0),V=R.noNumericCheck,X=R.returnArray,k;return V&&X?k=N:V?k=function(Z){return w(N(Z))}:X?k=function(Z){return a(Z)?N(Z):c(Z).isValid()?Z:s.defaultLine}:k=function(Z){return a(Z)?w(N(Z)):c(Z).isValid()?Z:s.defaultLine},k.domain=N.domain,k.range=function(){return C},k}function b(A,R){return M(_(A),R)}function w(A){var R={r:A[0],g:A[1],b:A[2],a:A[3]};return c(R).toRgbString()}f.exports={hasColorscale:d,extractOpts:y,extractScale:_,flipScale:E,makeColorScaleFunc:M,makeColorScaleFuncFromTrace:b}},8932:function(f,u,r){var i=r(8304),c=r(4288);f.exports={moduleType:"component",name:"colorscale",attributes:r(9084),layoutAttributes:r(2332),supplyLayoutDefaults:r(1608),handleDefaults:r(7260),crossTraceDefaults:r(5504),calc:r(7128),scales:i.scales,defaultScale:i.defaultScale,getScale:i.get,isValidScale:i.isValid,hasColorscale:c.hasColorscale,extractOpts:c.extractOpts,extractScale:c.extractScale,flipScale:c.flipScale,makeColorScaleFunc:c.makeColorScaleFunc,makeColorScaleFuncFromTrace:c.makeColorScaleFuncFromTrace}},2332:function(f,u,r){var i=r(2880).extendFlat,c=r(9084),a=r(8304).scales;f.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:a.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:a.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:a.RdBu,editType:"calc"}},coloraxis:i({_isSubplotObj:!0,editType:"calc"},c("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},1608:function(f,u,r){var i=r(3400),c=r(1780),a=r(2332),l=r(7260);f.exports=function(v,d){function p(A,R){return i.coerce(v,d,a,A,R)}p("colorscale.sequential"),p("colorscale.sequentialminus"),p("colorscale.diverging");var o=d._colorAxes,y,_;function E(A,R){return i.coerce(y,_,a.coloraxis,A,R)}for(var M in o){var b=o[M];if(b[0])y=v[M]||{},_=c.newContainer(d,M,"coloraxis"),_._name=M,l(y,_,d,E,{prefix:"",cLetter:"c"});else{for(var w=0;w<b[2].length;w++)b[2][w]();delete d._colorAxes[M]}}}},8304:function(f,u,r){var i=r(9760),c={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},a=c.RdBu;function l(d,p){if(p||(p=a),!d)return p;function o(){try{d=c[d]||JSON.parse(d)}catch{d=p}}return typeof d=="string"&&(o(),typeof d=="string"&&o()),s(d)?d:p}function s(d){var p=0;if(!Array.isArray(d)||d.length<2||!d[0]||!d[d.length-1]||+d[0][0]!=0||+d[d.length-1][0]!=1)return!1;for(var o=0;o<d.length;o++){var y=d[o];if(y.length!==2||+y[0]<p||!i(y[1]).isValid())return!1;p=+y[0]}return!0}function v(d){return c[d]!==void 0?!0:s(d)}f.exports={scales:c,defaultScale:a,get:l,isValid:v}},8316:function(f){f.exports=function(r,i,c,a,l){var s=(r-c)/(a-c),v=s+i/(a-c),d=(s+v)/2;return l==="left"||l==="bottom"?s:l==="center"||l==="middle"?d:l==="right"||l==="top"?v:s<.6666666666666666-d?s:v>1.3333333333333333-d?v:d}},7416:function(f,u,r){var i=r(3400),c=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];f.exports=function(l,s,v,d){return v==="left"?l=0:v==="center"?l=1:v==="right"?l=2:l=i.constrain(Math.floor(l*3),0,2),d==="bottom"?s=0:d==="middle"?s=1:d==="top"?s=2:s=i.constrain(Math.floor(s*3),0,2),c[s][l]}},2760:function(f,u){u.selectMode=function(r){return r==="lasso"||r==="select"},u.drawMode=function(r){return r==="drawclosedpath"||r==="drawopenpath"||r==="drawline"||r==="drawrect"||r==="drawcircle"},u.openMode=function(r){return r==="drawline"||r==="drawopenpath"},u.rectMode=function(r){return r==="select"||r==="drawline"||r==="drawrect"||r==="drawcircle"},u.freeMode=function(r){return r==="lasso"||r==="drawclosedpath"||r==="drawopenpath"},u.selectingOrDrawing=function(r){return u.freeMode(r)||u.rectMode(r)}},6476:function(f,u,r){var i=r(9128),c=r(2264),a=r(9184),l=r(3400).removeElement,s=r(3816),v=f.exports={};v.align=r(8316),v.getCursor=r(7416);var d=r(2616);v.unhover=d.wrapped,v.unhoverRaw=d.raw,v.init=function(_){var E=_.gd,M=1,b=E._context.doubleClickDelay,w=_.element,A,R,T,C,m,L,D,O;E._mouseDownTime||(E._mouseDownTime=0),w.style.pointerEvents="all",w.onmousedown=X,a?(w._ontouchstart&&w.removeEventListener("touchstart",w._ontouchstart),w._ontouchstart=X,w.addEventListener("touchstart",X,{passive:!1})):w.ontouchstart=X;function N(B,J,ne){return Math.abs(B)<ne&&(B=0),Math.abs(J)<ne&&(J=0),[B,J]}var V=_.clampFn||N;function X(B){E._dragged=!1,E._dragging=!0;var J=o(B);A=J[0],R=J[1],D=B.target,L=B,O=B.buttons===2||B.ctrlKey,typeof B.clientX>"u"&&typeof B.clientY>"u"&&(B.clientX=A,B.clientY=R),T=new Date().getTime(),T-E._mouseDownTime<b?M+=1:(M=1,E._mouseDownTime=T),_.prepFn&&_.prepFn(B,A,R),c&&!O?(m=p(),m.style.cursor=window.getComputedStyle(w).cursor):c||(m=document,C=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(w).cursor),document.addEventListener("mouseup",Z),document.addEventListener("touchend",Z),_.dragmode!==!1&&(B.preventDefault(),document.addEventListener("mousemove",k),document.addEventListener("touchmove",k,{passive:!1}))}function k(B){B.preventDefault();var J=o(B),ne=_.minDrag||s.MINDRAG,oe=V(J[0]-A,J[1]-R,ne),Y=oe[0],G=oe[1];(Y||G)&&(E._dragged=!0,v.unhover(E,B)),E._dragged&&_.moveFn&&!O&&(E._dragdata={element:w,dx:Y,dy:G},_.moveFn(Y,G))}function Z(B){if(delete E._dragdata,_.dragmode!==!1&&(B.preventDefault(),document.removeEventListener("mousemove",k),document.removeEventListener("touchmove",k)),document.removeEventListener("mouseup",Z),document.removeEventListener("touchend",Z),c?l(m):C&&(m.documentElement.style.cursor=C,C=null),!E._dragging){E._dragged=!1;return}if(E._dragging=!1,new Date().getTime()-E._mouseDownTime>b&&(M=Math.max(M-1,1)),E._dragged)_.doneFn&&_.doneFn();else if(_.clickFn&&_.clickFn(M,L),!O){var J;try{J=new MouseEvent("click",B)}catch{var ne=o(B);J=document.createEvent("MouseEvents"),J.initMouseEvent("click",B.bubbles,B.cancelable,B.view,B.detail,B.screenX,B.screenY,ne[0],ne[1],B.ctrlKey,B.altKey,B.shiftKey,B.metaKey,B.button,B.relatedTarget)}D.dispatchEvent(J)}E._dragging=!1,E._dragged=!1}};function p(){var y=document.createElement("div");y.className="dragcover";var _=y.style;return _.position="fixed",_.left=0,_.right=0,_.top=0,_.bottom=0,_.zIndex=999999999,_.background="none",document.body.appendChild(y),y}v.coverSlip=p;function o(y){return i(y.changedTouches?y.changedTouches[0]:y,document.body)}},2616:function(f,u,r){var i=r(5924),c=r(1200),a=r(2200).getGraphDiv,l=r(2456),s=f.exports={};s.wrapped=function(v,d,p){v=a(v),v._fullLayout&&c.clear(v._fullLayout._uid+l.HOVERID),s.raw(v,d,p)},s.raw=function(d,p){var o=d._fullLayout,y=d._hoverdata;p||(p={}),!(p.target&&!d._dragged&&i.triggerHandler(d,"plotly_beforehover",p)===!1)&&(o._hoverlayer.selectAll("g").remove(),o._hoverlayer.selectAll("line").remove(),o._hoverlayer.selectAll("circle").remove(),d._hoverdata=void 0,p.target&&y&&d.emit("plotly_unhover",{event:p,points:y}))}},8192:function(f,u){u.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},u.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},3616:function(f,u,r){var i=r(3428),c=r(3400),a=c.numberFormat,l=r(8248),s=r(9760),v=r(4040),d=r(6308),p=r(8932),o=c.strTranslate,y=r(2736),_=r(9616),E=r(4284),M=E.LINE_SPACING,b=r(3448).DESELECTDIM,w=r(3028),A=r(7152),R=r(624).appendArrayPointValue,T=f.exports={};T.font=function(Te,we){var be=we.variant,ke=we.style,He=we.weight,Ke=we.color,st=we.size,vt=we.family,pt=we.shadow,ft=we.lineposition,lt=we.textcase;vt&&Te.style("font-family",vt),st+1&&Te.style("font-size",st+"px"),Ke&&Te.call(d.fill,Ke),He&&Te.style("font-weight",He),ke&&Te.style("font-style",ke),be&&Te.style("font-variant",be),lt&&Te.style("text-transform",C(L(lt))),pt&&Te.style("text-shadow",pt==="auto"?y.makeTextShadow(d.contrast(Ke)):C(pt)),ft&&Te.style("text-decoration-line",C(D(ft)))};function C(Te){return Te==="none"?void 0:Te}var m={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function L(Te){return m[Te]}function D(Te){return Te.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}T.setPosition=function(Te,we,be){Te.attr("x",we).attr("y",be)},T.setSize=function(Te,we,be){Te.attr("width",we).attr("height",be)},T.setRect=function(Te,we,be,ke,He){Te.call(T.setPosition,we,be).call(T.setSize,ke,He)},T.translatePoint=function(Te,we,be,ke){var He=be.c2p(Te.x),Ke=ke.c2p(Te.y);if(l(He)&&l(Ke)&&we.node())we.node().nodeName==="text"?we.attr("x",He).attr("y",Ke):we.attr("transform",o(He,Ke));else return!1;return!0},T.translatePoints=function(Te,we,be){Te.each(function(ke){var He=i.select(this);T.translatePoint(ke,He,we,be)})},T.hideOutsideRangePoint=function(Te,we,be,ke,He,Ke){we.attr("display",be.isPtWithinRange(Te,He)&&ke.isPtWithinRange(Te,Ke)?null:"none")},T.hideOutsideRangePoints=function(Te,we){if(we._hasClipOnAxisFalse){var be=we.xaxis,ke=we.yaxis;Te.each(function(He){var Ke=He[0].trace,st=Ke.xcalendar,vt=Ke.ycalendar,pt=v.traceIs(Ke,"bar-like")?".bartext":".point,.textpoint";Te.selectAll(pt).each(function(ft){T.hideOutsideRangePoint(ft,i.select(this),be,ke,st,vt)})})}},T.crispRound=function(Te,we,be){return!we||!l(we)?be||0:Te._context.staticPlot?we:we<1?1:Math.round(we)},T.singleLineStyle=function(Te,we,be,ke,He){we.style("fill","none");var Ke=(((Te||[])[0]||{}).trace||{}).line||{},st=be||Ke.width||0,vt=He||Ke.dash||"";d.stroke(we,ke||Ke.color),T.dashLine(we,vt,st)},T.lineGroupStyle=function(Te,we,be,ke){Te.style("fill","none").each(function(He){var Ke=(((He||[])[0]||{}).trace||{}).line||{},st=we||Ke.width||0,vt=ke||Ke.dash||"";i.select(this).call(d.stroke,be||Ke.color).call(T.dashLine,vt,st)})},T.dashLine=function(Te,we,be){be=+be||0,we=T.dashStyle(we,be),Te.style({"stroke-dasharray":we,"stroke-width":be+"px"})},T.dashStyle=function(Te,we){we=+we||1;var be=Math.max(we,3);return Te==="solid"?Te="":Te==="dot"?Te=be+"px,"+be+"px":Te==="dash"?Te=3*be+"px,"+3*be+"px":Te==="longdash"?Te=5*be+"px,"+5*be+"px":Te==="dashdot"?Te=3*be+"px,"+be+"px,"+be+"px,"+be+"px":Te==="longdashdot"&&(Te=5*be+"px,"+2*be+"px,"+be+"px,"+2*be+"px"),Te};function O(Te,we,be,ke){var He=we.fillpattern,Ke=we.fillgradient,st=He&&T.getPatternAttr(He.shape,0,"");if(st){var vt=T.getPatternAttr(He.bgcolor,0,null),pt=T.getPatternAttr(He.fgcolor,0,null),ft=He.fgopacity,lt=T.getPatternAttr(He.size,0,8),Mt=T.getPatternAttr(He.solidity,0,.3),ot=we.uid;T.pattern(Te,"point",be,ot,st,lt,Mt,void 0,He.fillmode,vt,pt,ft)}else if(Ke&&Ke.type!=="none"){var Ct=Ke.type,kt="scatterfill-"+we.uid;if(ke&&(kt="legendfill-"+we.uid),!ke&&(Ke.start!==void 0||Ke.stop!==void 0)){var St,Et;Ct==="horizontal"?(St={x:Ke.start,y:0},Et={x:Ke.stop,y:0}):Ct==="vertical"&&(St={x:0,y:Ke.start},Et={x:0,y:Ke.stop}),St.x=we._xA.c2p(St.x===void 0?we._extremes.x.min[0].val:St.x,!0),St.y=we._yA.c2p(St.y===void 0?we._extremes.y.min[0].val:St.y,!0),Et.x=we._xA.c2p(Et.x===void 0?we._extremes.x.max[0].val:Et.x,!0),Et.y=we._yA.c2p(Et.y===void 0?we._extremes.y.max[0].val:Et.y,!0),Te.call(J,be,kt,"linear",Ke.colorscale,"fill",St,Et,!0,!1)}else Ct==="horizontal"&&(Ct=Ct+"reversed"),Te.call(T.gradient,be,kt,Ct,Ke.colorscale,"fill")}else we.fillcolor&&Te.call(d.fill,we.fillcolor)}T.singleFillStyle=function(Te,we){var be=i.select(Te.node()),ke=be.data(),He=((ke[0]||[])[0]||{}).trace||{};O(Te,He,we,!1)},T.fillGroupStyle=function(Te,we,be){Te.style("stroke-width",0).each(function(ke){var He=i.select(this);ke[0].trace&&O(He,ke[0].trace,we,be)})};var N=r(1984);T.symbolNames=[],T.symbolFuncs=[],T.symbolBackOffs=[],T.symbolNeedLines={},T.symbolNoDot={},T.symbolNoFill={},T.symbolList=[],Object.keys(N).forEach(function(Te){var we=N[Te],be=we.n;T.symbolList.push(be,String(be),Te,be+100,String(be+100),Te+"-open"),T.symbolNames[be]=Te,T.symbolFuncs[be]=we.f,T.symbolBackOffs[be]=we.backoff||0,we.needLine&&(T.symbolNeedLines[be]=!0),we.noDot?T.symbolNoDot[be]=!0:T.symbolList.push(be+200,String(be+200),Te+"-dot",be+300,String(be+300),Te+"-open-dot"),we.noFill&&(T.symbolNoFill[be]=!0)});var V=T.symbolNames.length,X="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";T.symbolNumber=function(Te){if(l(Te))Te=+Te;else if(typeof Te=="string"){var we=0;Te.indexOf("-open")>0&&(we=100,Te=Te.replace("-open","")),Te.indexOf("-dot")>0&&(we+=200,Te=Te.replace("-dot","")),Te=T.symbolNames.indexOf(Te),Te>=0&&(Te+=we)}return Te%100>=V||Te>=400?0:Math.floor(Math.max(Te,0))};function k(Te,we,be,ke){var He=Te%100;return T.symbolFuncs[He](we,be,ke)+(Te>=200?X:"")}var Z=a("~f"),B={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};T.gradient=function(Te,we,be,ke,He,Ke){var st=B[ke];return J(Te,we,be,st.type,He,Ke,st.start,st.stop,!1,st.reversed)};function J(Te,we,be,ke,He,Ke,st,vt,pt,ft){var lt=He.length,Mt;ke==="linear"?Mt={node:"linearGradient",attrs:{x1:st.x,y1:st.y,x2:vt.x,y2:vt.y,gradientUnits:pt?"userSpaceOnUse":"objectBoundingBox"},reversed:ft}:ke==="radial"&&(Mt={node:"radialGradient",reversed:ft});for(var ot=new Array(lt),Ct=0;Ct<lt;Ct++)Mt.reversed?ot[lt-1-Ct]=[Z((1-He[Ct][0])*100),He[Ct][1]]:ot[Ct]=[Z(He[Ct][0]*100),He[Ct][1]];var kt=we._fullLayout,St="g"+kt._uid+"-"+be,Et=kt._defs.select(".gradients").selectAll("#"+St).data([ke+ot.join(";")],c.identity);Et.exit().remove(),Et.enter().append(Mt.node).each(function(){var Ue=i.select(this);Mt.attrs&&Ue.attr(Mt.attrs),Ue.attr("id",St);var De=Ue.selectAll("stop").data(ot);De.exit().remove(),De.enter().append("stop"),De.each(function(Ie){var Fe=s(Ie[1]);i.select(this).attr({offset:Ie[0]+"%","stop-color":d.tinyRGB(Fe),"stop-opacity":Fe.getAlpha()})})}),Te.style(Ke,W(St,we)).style(Ke+"-opacity",null),Te.classed("gradient_filled",!0)}T.pattern=function(Te,we,be,ke,He,Ke,st,vt,pt,ft,lt,Mt){var ot=we==="legend";vt&&(pt==="overlay"?(ft=vt,lt=d.contrast(ft)):(ft=void 0,lt=vt));var Ct=be._fullLayout,kt="p"+Ct._uid+"-"+ke,St,Et,Ue=function(nt,Ye,Be,ut,Dt){return ut+(Dt-ut)*(nt-Ye)/(Be-Ye)},De,Ie,Fe,We,de={},Me=s(lt),he=d.tinyRGB(Me),Ee=Me.getAlpha(),Pe=Mt*Ee;switch(He){case"/":St=Ke*Math.sqrt(2),Et=Ke*Math.sqrt(2),De="M-"+St/4+","+Et/4+"l"+St/2+",-"+Et/2+"M0,"+Et+"L"+St+",0M"+St/4*3+","+Et/4*5+"l"+St/2+",-"+Et/2,Ie=st*Ke,We="path",de={d:De,opacity:Pe,stroke:he,"stroke-width":Ie+"px"};break;case"\\":St=Ke*Math.sqrt(2),Et=Ke*Math.sqrt(2),De="M"+St/4*3+",-"+Et/4+"l"+St/2+","+Et/2+"M0,0L"+St+","+Et+"M-"+St/4+","+Et/4*3+"l"+St/2+","+Et/2,Ie=st*Ke,We="path",de={d:De,opacity:Pe,stroke:he,"stroke-width":Ie+"px"};break;case"x":St=Ke*Math.sqrt(2),Et=Ke*Math.sqrt(2),De="M-"+St/4+","+Et/4+"l"+St/2+",-"+Et/2+"M0,"+Et+"L"+St+",0M"+St/4*3+","+Et/4*5+"l"+St/2+",-"+Et/2+"M"+St/4*3+",-"+Et/4+"l"+St/2+","+Et/2+"M0,0L"+St+","+Et+"M-"+St/4+","+Et/4*3+"l"+St/2+","+Et/2,Ie=Ke-Ke*Math.sqrt(1-st),We="path",de={d:De,opacity:Pe,stroke:he,"stroke-width":Ie+"px"};break;case"|":St=Ke,Et=Ke,We="path",De="M"+St/2+",0L"+St/2+","+Et,Ie=st*Ke,We="path",de={d:De,opacity:Pe,stroke:he,"stroke-width":Ie+"px"};break;case"-":St=Ke,Et=Ke,We="path",De="M0,"+Et/2+"L"+St+","+Et/2,Ie=st*Ke,We="path",de={d:De,opacity:Pe,stroke:he,"stroke-width":Ie+"px"};break;case"+":St=Ke,Et=Ke,We="path",De="M"+St/2+",0L"+St/2+","+Et+"M0,"+Et/2+"L"+St+","+Et/2,Ie=Ke-Ke*Math.sqrt(1-st),We="path",de={d:De,opacity:Pe,stroke:he,"stroke-width":Ie+"px"};break;case".":St=Ke,Et=Ke,st<Math.PI/4?Fe=Math.sqrt(st*Ke*Ke/Math.PI):Fe=Ue(st,Math.PI/4,1,Ke/2,Ke/Math.sqrt(2)),We="circle",de={cx:St/2,cy:Et/2,r:Fe,opacity:Pe,fill:he};break}var Ne=[He||"noSh",ft||"noBg",lt||"noFg",Ke,st].join(";"),ht=Ct._defs.select(".patterns").selectAll("#"+kt).data([Ne],c.identity);ht.exit().remove(),ht.enter().append("pattern").each(function(){var nt=i.select(this);if(nt.attr({id:kt,width:St+"px",height:Et+"px",patternUnits:"userSpaceOnUse",patternTransform:ot?"scale(0.8)":""}),ft){var Ye=s(ft),Be=d.tinyRGB(Ye),ut=Ye.getAlpha(),Dt=nt.selectAll("rect").data([0]);Dt.exit().remove(),Dt.enter().append("rect").attr({width:St+"px",height:Et+"px",fill:Be,"fill-opacity":ut})}var Nt=nt.selectAll(We).data([0]);Nt.exit().remove(),Nt.enter().append(We).attr(de)}),Te.style("fill",W(kt,be)).style("fill-opacity",null),Te.classed("pattern_filled",!0)},T.initGradients=function(Te){var we=Te._fullLayout,be=c.ensureSingle(we._defs,"g","gradients");be.selectAll("linearGradient,radialGradient").remove(),i.select(Te).selectAll(".gradient_filled").classed("gradient_filled",!1)},T.initPatterns=function(Te){var we=Te._fullLayout,be=c.ensureSingle(we._defs,"g","patterns");be.selectAll("pattern").remove(),i.select(Te).selectAll(".pattern_filled").classed("pattern_filled",!1)},T.getPatternAttr=function(Te,we,be){return Te&&c.isArrayOrTypedArray(Te)?we<Te.length?Te[we]:be:Te},T.pointStyle=function(Te,we,be,ke){if(Te.size()){var He=T.makePointStyleFns(we);Te.each(function(Ke){T.singlePointStyle(Ke,i.select(this),we,He,be,ke)})}},T.singlePointStyle=function(Te,we,be,ke,He,Ke){var st=be.marker,vt=st.line;if(Ke&&Ke.i>=0&&Te.i===void 0&&(Te.i=Ke.i),we.style("opacity",ke.selectedOpacityFn?ke.selectedOpacityFn(Te):Te.mo===void 0?st.opacity:Te.mo),ke.ms2mrc){var pt;Te.ms==="various"||st.size==="various"?pt=3:pt=ke.ms2mrc(Te.ms),Te.mrc=pt,ke.selectedSizeFn&&(pt=Te.mrc=ke.selectedSizeFn(Te));var ft=T.symbolNumber(Te.mx||st.symbol)||0;Te.om=ft%200>=100;var lt=Ze(Te,be),Mt=P(Te,be);we.attr("d",k(ft,pt,lt,Mt))}var ot=!1,Ct,kt,St;if(Te.so)St=vt.outlierwidth,kt=vt.outliercolor,Ct=st.outliercolor;else{var Et=(vt||{}).width;St=(Te.mlw+1||Et+1||(Te.trace?(Te.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in Te?kt=Te.mlcc=ke.lineScale(Te.mlc):c.isArrayOrTypedArray(vt.color)?kt=d.defaultLine:kt=vt.color,c.isArrayOrTypedArray(st.color)&&(Ct=d.defaultLine,ot=!0),"mc"in Te?Ct=Te.mcc=ke.markerScale(Te.mc):Ct=st.color||st.colors||"rgba(0,0,0,0)",ke.selectedColorFn&&(Ct=ke.selectedColorFn(Te))}if(Te.om)we.call(d.stroke,Ct).style({"stroke-width":(St||1)+"px",fill:"none"});else{we.style("stroke-width",(Te.isBlank?0:St)+"px");var Ue=st.gradient,De=Te.mgt;De?ot=!0:De=Ue&&Ue.type,c.isArrayOrTypedArray(De)&&(De=De[0],B[De]||(De=0));var Ie=st.pattern,Fe=Ie&&T.getPatternAttr(Ie.shape,Te.i,"");if(De&&De!=="none"){var We=Te.mgc;We?ot=!0:We=Ue.color;var de=be.uid;ot&&(de+="-"+Te.i),T.gradient(we,He,de,De,[[0,We],[1,Ct]],"fill")}else if(Fe){var Me=!1,he=Ie.fgcolor;!he&&Ke&&Ke.color&&(he=Ke.color,Me=!0);var Ee=T.getPatternAttr(he,Te.i,Ke&&Ke.color||null),Pe=T.getPatternAttr(Ie.bgcolor,Te.i,null),Ne=Ie.fgopacity,ht=T.getPatternAttr(Ie.size,Te.i,8),nt=T.getPatternAttr(Ie.solidity,Te.i,.3);Me=Me||Te.mcc||c.isArrayOrTypedArray(Ie.shape)||c.isArrayOrTypedArray(Ie.bgcolor)||c.isArrayOrTypedArray(Ie.fgcolor)||c.isArrayOrTypedArray(Ie.size)||c.isArrayOrTypedArray(Ie.solidity);var Ye=be.uid;Me&&(Ye+="-"+Te.i),T.pattern(we,"point",He,Ye,Fe,ht,nt,Te.mcc,Ie.fillmode,Pe,Ee,Ne)}else c.isArrayOrTypedArray(Ct)?d.fill(we,Ct[Te.i]):d.fill(we,Ct);St&&d.stroke(we,kt)}},T.makePointStyleFns=function(Te){var we={},be=Te.marker;return we.markerScale=T.tryColorscale(be,""),we.lineScale=T.tryColorscale(be,"line"),v.traceIs(Te,"symbols")&&(we.ms2mrc=w.isBubble(Te)?A(Te):function(){return(be.size||6)/2}),Te.selectedpoints&&c.extendFlat(we,T.makeSelectedPointStyleFns(Te)),we},T.makeSelectedPointStyleFns=function(Te){var we={},be=Te.selected||{},ke=Te.unselected||{},He=Te.marker||{},Ke=be.marker||{},st=ke.marker||{},vt=He.opacity,pt=Ke.opacity,ft=st.opacity,lt=pt!==void 0,Mt=ft!==void 0;(c.isArrayOrTypedArray(vt)||lt||Mt)&&(we.selectedOpacityFn=function(Fe){var We=Fe.mo===void 0?He.opacity:Fe.mo;return Fe.selected?lt?pt:We:Mt?ft:b*We});var ot=He.color,Ct=Ke.color,kt=st.color;(Ct||kt)&&(we.selectedColorFn=function(Fe){var We=Fe.mcc||ot;return Fe.selected?Ct||We:kt||We});var St=He.size,Et=Ke.size,Ue=st.size,De=Et!==void 0,Ie=Ue!==void 0;return v.traceIs(Te,"symbols")&&(De||Ie)&&(we.selectedSizeFn=function(Fe){var We=Fe.mrc||St/2;return Fe.selected?De?Et/2:We:Ie?Ue/2:We}),we},T.makeSelectedTextStyleFns=function(Te){var we={},be=Te.selected||{},ke=Te.unselected||{},He=Te.textfont||{},Ke=be.textfont||{},st=ke.textfont||{},vt=He.color,pt=Ke.color,ft=st.color;return we.selectedTextColorFn=function(lt){var Mt=lt.tc||vt;return lt.selected?pt||Mt:ft||(pt?Mt:d.addOpacity(Mt,b))},we},T.selectedPointStyle=function(Te,we){if(!(!Te.size()||!we.selectedpoints)){var be=T.makeSelectedPointStyleFns(we),ke=we.marker||{},He=[];be.selectedOpacityFn&&He.push(function(Ke,st){Ke.style("opacity",be.selectedOpacityFn(st))}),be.selectedColorFn&&He.push(function(Ke,st){d.fill(Ke,be.selectedColorFn(st))}),be.selectedSizeFn&&He.push(function(Ke,st){var vt=st.mx||ke.symbol||0,pt=be.selectedSizeFn(st);Ke.attr("d",k(T.symbolNumber(vt),pt,Ze(st,we),P(st,we))),st.mrc2=pt}),He.length&&Te.each(function(Ke){for(var st=i.select(this),vt=0;vt<He.length;vt++)He[vt](st,Ke)})}},T.tryColorscale=function(Te,we){var be=we?c.nestedProperty(Te,we).get():Te;if(be){var ke=be.color;if((be.colorscale||be._colorAx)&&c.isArrayOrTypedArray(ke))return p.makeColorScaleFuncFromTrace(be)}return c.identity};var ne={start:1,end:-1,middle:0,bottom:1,top:-1};function oe(Te,we,be,ke,He){var Ke=i.select(Te.node().parentNode),st=we.indexOf("top")!==-1?"top":we.indexOf("bottom")!==-1?"bottom":"middle",vt=we.indexOf("left")!==-1?"end":we.indexOf("right")!==-1?"start":"middle",pt=ke?ke/.8+1:0,ft=(y.lineCount(Te)-1)*M+1,lt=ne[vt]*pt,Mt=be*.75+ne[st]*pt+(ne[st]-1)*ft*be/2;Te.attr("text-anchor",vt),He||Ke.attr("transform",o(lt,Mt))}function Y(Te,we){var be=Te.ts||we.textfont.size;return l(be)&&be>0?be:0}T.textPointStyle=function(Te,we,be){if(Te.size()){var ke;if(we.selectedpoints){var He=T.makeSelectedTextStyleFns(we);ke=He.selectedTextColorFn}var Ke=we.texttemplate,st=be._fullLayout;Te.each(function(vt){var pt=i.select(this),ft=Ke?c.extractOption(vt,we,"txt","texttemplate"):c.extractOption(vt,we,"tx","text");if(!ft&&ft!==0){pt.remove();return}if(Ke){var lt=we._module.formatLabels,Mt=lt?lt(vt,we,st):{},ot={};R(ot,we,vt.i);var Ct=we._meta||{};ft=c.texttemplateString(ft,Mt,st._d3locale,ot,vt,Ct)}var kt=vt.tp||we.textposition,St=Y(vt,we),Et=ke?ke(vt):vt.tc||we.textfont.color;pt.call(T.font,{family:vt.tf||we.textfont.family,weight:vt.tw||we.textfont.weight,style:vt.ty||we.textfont.style,variant:vt.tv||we.textfont.variant,textcase:vt.tC||we.textfont.textcase,lineposition:vt.tE||we.textfont.lineposition,shadow:vt.tS||we.textfont.shadow,size:St,color:Et}).text(ft).call(y.convertToTspans,be).call(oe,kt,St,vt.mrc)})}},T.selectedTextStyle=function(Te,we){if(!(!Te.size()||!we.selectedpoints)){var be=T.makeSelectedTextStyleFns(we);Te.each(function(ke){var He=i.select(this),Ke=be.selectedTextColorFn(ke),st=ke.tp||we.textposition,vt=Y(ke,we);d.fill(He,Ke);var pt=v.traceIs(we,"bar-like");oe(He,st,vt,ke.mrc2||ke.mrc,pt)})}};var G=.5;T.smoothopen=function(Te,we){if(Te.length<3)return"M"+Te.join("L");var be="M"+Te[0],ke=[],He;for(He=1;He<Te.length-1;He++)ke.push(ge(Te[He-1],Te[He],Te[He+1],we));for(be+="Q"+ke[0][0]+" "+Te[1],He=2;He<Te.length-1;He++)be+="C"+ke[He-2][1]+" "+ke[He-1][0]+" "+Te[He];return be+="Q"+ke[Te.length-3][1]+" "+Te[Te.length-1],be},T.smoothclosed=function(Te,we){if(Te.length<3)return"M"+Te.join("L")+"Z";var be="M"+Te[0],ke=Te.length-1,He=[ge(Te[ke],Te[0],Te[1],we)],Ke;for(Ke=1;Ke<ke;Ke++)He.push(ge(Te[Ke-1],Te[Ke],Te[Ke+1],we));for(He.push(ge(Te[ke-1],Te[ke],Te[0],we)),Ke=1;Ke<=ke;Ke++)be+="C"+He[Ke-1][1]+" "+He[Ke][0]+" "+Te[Ke];return be+="C"+He[ke][1]+" "+He[0][0]+" "+Te[0]+"Z",be};var K,ee;function ie(Te,we,be){return be&&(Te=ce(Te)),we?se(Te[1]):re(Te[0])}function re(Te){var we=i.round(Te,2);return K=we,we}function se(Te){var we=i.round(Te,2);return ee=we,we}function ge(Te,we,be,ke){var He=Te[0]-we[0],Ke=Te[1]-we[1],st=be[0]-we[0],vt=be[1]-we[1],pt=Math.pow(He*He+Ke*Ke,G/2),ft=Math.pow(st*st+vt*vt,G/2),lt=(ft*ft*He-pt*pt*st)*ke,Mt=(ft*ft*Ke-pt*pt*vt)*ke,ot=3*ft*(pt+ft),Ct=3*pt*(pt+ft);return[[re(we[0]+(ot&&lt/ot)),se(we[1]+(ot&&Mt/ot))],[re(we[0]-(Ct&&lt/Ct)),se(we[1]-(Ct&&Mt/Ct))]]}var xe={hv:function(Te,we,be){return"H"+re(we[0])+"V"+ie(we,1,be)},vh:function(Te,we,be){return"V"+se(we[1])+"H"+ie(we,0,be)},hvh:function(Te,we,be){return"H"+re((Te[0]+we[0])/2)+"V"+se(we[1])+"H"+ie(we,0,be)},vhv:function(Te,we,be){return"V"+se((Te[1]+we[1])/2)+"H"+re(we[0])+"V"+ie(we,1,be)}},Se=function(Te,we,be){return"L"+ie(we,0,be)+","+ie(we,1,be)};T.steps=function(Te){var we=xe[Te]||Se;return function(be){for(var ke="M"+re(be[0][0])+","+se(be[0][1]),He=be.length,Ke=1;Ke<He;Ke++)ke+=we(be[Ke-1],be[Ke],Ke===He-1);return ke}};function ce(Te,we){var be=Te.backoff,ke=Te.trace,He=Te.d,Ke=Te.i;if(be&&ke&&ke.marker&&ke.marker.angle%360===0&&ke.line&&ke.line.shape!=="spline"){var st=c.isArrayOrTypedArray(be),vt=Te,pt=we?we[0]:K||0,ft=we?we[1]:ee||0,lt=vt[0],Mt=vt[1],ot=lt-pt,Ct=Mt-ft,kt=Math.atan2(Ct,ot),St=st?be[Ke]:be;if(St==="auto"){var Et=vt.i;ke.type==="scatter"&&Et--;var Ue=vt.marker,De=Ue.symbol;c.isArrayOrTypedArray(De)&&(De=De[Et]);var Ie=Ue.size;c.isArrayOrTypedArray(Ie)&&(Ie=Ie[Et]),St=Ue?T.symbolBackOffs[T.symbolNumber(De)]*Ie:0,St+=T.getMarkerStandoff(He[Et],ke)||0}var Fe=lt-St*Math.cos(kt),We=Mt-St*Math.sin(kt);(Fe<=lt&&Fe>=pt||Fe>=lt&&Fe<=pt)&&(We<=Mt&&We>=ft||We>=Mt&&We<=ft)&&(Te=[Fe,We])}return Te}T.applyBackoff=ce,T.makeTester=function(){var Te=c.ensureSingleById(i.select("body"),"svg","js-plotly-tester",function(be){be.attr(_.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),we=c.ensureSingle(Te,"path","js-reference-point",function(be){be.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});T.tester=Te,T.testref=we},T.savedBBoxes={};var pe=0,ye=1e4;T.bBox=function(Te,we,be){be||(be=U(Te));var ke;if(be){if(ke=T.savedBBoxes[be],ke)return c.extendFlat({},ke)}else if(Te.childNodes.length===1){var He=Te.childNodes[0];if(be=U(He),be){var Ke=+He.getAttribute("x")||0,st=+He.getAttribute("y")||0,vt=He.getAttribute("transform");if(!vt){var pt=T.bBox(He,!1,be);return Ke&&(pt.left+=Ke,pt.right+=Ke),st&&(pt.top+=st,pt.bottom+=st),pt}if(be+="~"+Ke+"~"+st+"~"+vt,ke=T.savedBBoxes[be],ke)return c.extendFlat({},ke)}}var ft,lt;we?ft=Te:(lt=T.tester.node(),ft=Te.cloneNode(!0),lt.appendChild(ft)),i.select(ft).attr("transform",null).call(y.positionText,0,0);var Mt=ft.getBoundingClientRect(),ot=T.testref.node().getBoundingClientRect();we||lt.removeChild(ft);var Ct={height:Mt.height,width:Mt.width,left:Mt.left-ot.left,top:Mt.top-ot.top,right:Mt.right-ot.left,bottom:Mt.bottom-ot.top};return pe>=ye&&(T.savedBBoxes={},pe=0),be&&(T.savedBBoxes[be]=Ct),pe++,c.extendFlat({},Ct)};function U(Te){var we=Te.getAttribute("data-unformatted");if(we!==null)return we+Te.getAttribute("data-math")+Te.getAttribute("text-anchor")+Te.getAttribute("style")}T.setClipUrl=function(Te,we,be){Te.attr("clip-path",W(we,be))};function W(Te,we){if(!Te)return null;var be=we._context,ke=be._exportedPlot?"":be._baseUrl||"";return ke?"url('"+ke+"#"+Te+"')":"url(#"+Te+")"}T.getTranslate=function(Te){var we=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,be=Te.attr?"attr":"getAttribute",ke=Te[be]("transform")||"",He=ke.replace(we,function(Ke,st,vt){return[st,vt].join(" ")}).split(" ");return{x:+He[0]||0,y:+He[1]||0}},T.setTranslate=function(Te,we,be){var ke=/(\btranslate\(.*?\);?)/,He=Te.attr?"attr":"getAttribute",Ke=Te.attr?"attr":"setAttribute",st=Te[He]("transform")||"";return we=we||0,be=be||0,st=st.replace(ke,"").trim(),st+=o(we,be),st=st.trim(),Te[Ke]("transform",st),st},T.getScale=function(Te){var we=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,be=Te.attr?"attr":"getAttribute",ke=Te[be]("transform")||"",He=ke.replace(we,function(Ke,st,vt){return[st,vt].join(" ")}).split(" ");return{x:+He[0]||1,y:+He[1]||1}},T.setScale=function(Te,we,be){var ke=/(\bscale\(.*?\);?)/,He=Te.attr?"attr":"getAttribute",Ke=Te.attr?"attr":"setAttribute",st=Te[He]("transform")||"";return we=we||1,be=be||1,st=st.replace(ke,"").trim(),st+="scale("+we+","+be+")",st=st.trim(),Te[Ke]("transform",st),st};var j=/\s*sc.*/;T.setPointGroupScale=function(Te,we,be){if(we=we||1,be=be||1,!!Te){var ke=we===1&&be===1?"":"scale("+we+","+be+")";Te.each(function(){var He=(this.getAttribute("transform")||"").replace(j,"");He+=ke,He=He.trim(),this.setAttribute("transform",He)})}};var F=/translate\([^)]*\)\s*$/;T.setTextPointsScale=function(Te,we,be){Te&&Te.each(function(){var ke,He=i.select(this),Ke=He.select("text");if(Ke.node()){var st=parseFloat(Ke.attr("x")||0),vt=parseFloat(Ke.attr("y")||0),pt=(He.attr("transform")||"").match(F);we===1&&be===1?ke=[]:ke=[o(st,vt),"scale("+we+","+be+")",o(-st,-vt)],pt&&ke.push(pt),He.attr("transform",ke.join(""))}})};function P(Te,we){var be;return Te&&(be=Te.mf),be===void 0&&(be=we.marker&&we.marker.standoff||0),!we._geo&&!we._xA?-be:be}T.getMarkerStandoff=P;var q=Math.atan2,z=Math.cos,te=Math.sin;function ue(Te,we){var be=we[0],ke=we[1];return[be*z(Te)-ke*te(Te),be*te(Te)+ke*z(Te)]}var ve,_e,Re,Le,Ve,Xe;function Ze(Te,we){var be=Te.ma;be===void 0&&(be=we.marker.angle,(!be||c.isArrayOrTypedArray(be))&&(be=0));var ke,He,Ke=we.marker.angleref;if(Ke==="previous"||Ke==="north"){if(we._geo){var st=we._geo.project(Te.lonlat);ke=st[0],He=st[1]}else{var vt=we._xA,pt=we._yA;if(vt&&pt)ke=vt.c2p(Te.x),He=pt.c2p(Te.y);else return 90}if(we._geo){var ft=Te.lonlat[0],lt=Te.lonlat[1],Mt=we._geo.project([ft,lt+1e-5]),ot=we._geo.project([ft+1e-5,lt]),Ct=q(ot[1]-He,ot[0]-ke),kt=q(Mt[1]-He,Mt[0]-ke),St;if(Ke==="north")St=be/180*Math.PI;else if(Ke==="previous"){var Et=ft/180*Math.PI,Ue=lt/180*Math.PI,De=ve/180*Math.PI,Ie=_e/180*Math.PI,Fe=De-Et,We=z(Ie)*te(Fe),de=te(Ie)*z(Ue)-z(Ie)*te(Ue)*z(Fe);St=-q(We,de)-Math.PI,ve=ft,_e=lt}var Me=ue(Ct,[z(St),0]),he=ue(kt,[te(St),0]);be=q(Me[1]+he[1],Me[0]+he[0])/Math.PI*180,Ke==="previous"&&!(Xe===we.uid&&Te.i===Ve+1)&&(be=null)}if(Ke==="previous"&&!we._geo)if(Xe===we.uid&&Te.i===Ve+1&&l(ke)&&l(He)){var Ee=ke-Re,Pe=He-Le,Ne=we.line&&we.line.shape||"",ht=Ne.slice(Ne.length-1);ht==="h"&&(Pe=0),ht==="v"&&(Ee=0),be+=q(Pe,Ee)/Math.PI*180+90}else be=null}return Re=ke,Le=He,Ve=Te.i,Xe=we.uid,be}T.getMarkerAngle=Ze},1984:function(f,u,r){var i=r(9604),c=r(3428).round,a="M0,0Z",l=Math.sqrt(2),s=Math.sqrt(3),v=Math.PI,d=Math.cos,p=Math.sin;f.exports={circle:{n:0,f:function(w,A,R){if(o(A))return a;var T=c(w,2),C="M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z";return R?b(A,R,C):C}},square:{n:1,f:function(w,A,R){if(o(A))return a;var T=c(w,2);return b(A,R,"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z")}},diamond:{n:2,f:function(w,A,R){if(o(A))return a;var T=c(w*1.3,2);return b(A,R,"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"Z")}},cross:{n:3,f:function(w,A,R){if(o(A))return a;var T=c(w*.4,2),C=c(w*1.2,2);return b(A,R,"M"+C+","+T+"H"+T+"V"+C+"H-"+T+"V"+T+"H-"+C+"V-"+T+"H-"+T+"V-"+C+"H"+T+"V-"+T+"H"+C+"Z")}},x:{n:4,f:function(w,A,R){if(o(A))return a;var T=c(w*.8/l,2),C="l"+T+","+T,m="l"+T+",-"+T,L="l-"+T+",-"+T,D="l-"+T+","+T;return b(A,R,"M0,"+T+C+m+L+m+L+D+L+D+C+D+C+"Z")}},"triangle-up":{n:5,f:function(w,A,R){if(o(A))return a;var T=c(w*2/s,2),C=c(w/2,2),m=c(w,2);return b(A,R,"M-"+T+","+C+"H"+T+"L0,-"+m+"Z")}},"triangle-down":{n:6,f:function(w,A,R){if(o(A))return a;var T=c(w*2/s,2),C=c(w/2,2),m=c(w,2);return b(A,R,"M-"+T+",-"+C+"H"+T+"L0,"+m+"Z")}},"triangle-left":{n:7,f:function(w,A,R){if(o(A))return a;var T=c(w*2/s,2),C=c(w/2,2),m=c(w,2);return b(A,R,"M"+C+",-"+T+"V"+T+"L-"+m+",0Z")}},"triangle-right":{n:8,f:function(w,A,R){if(o(A))return a;var T=c(w*2/s,2),C=c(w/2,2),m=c(w,2);return b(A,R,"M-"+C+",-"+T+"V"+T+"L"+m+",0Z")}},"triangle-ne":{n:9,f:function(w,A,R){if(o(A))return a;var T=c(w*.6,2),C=c(w*1.2,2);return b(A,R,"M-"+C+",-"+T+"H"+T+"V"+C+"Z")}},"triangle-se":{n:10,f:function(w,A,R){if(o(A))return a;var T=c(w*.6,2),C=c(w*1.2,2);return b(A,R,"M"+T+",-"+C+"V"+T+"H-"+C+"Z")}},"triangle-sw":{n:11,f:function(w,A,R){if(o(A))return a;var T=c(w*.6,2),C=c(w*1.2,2);return b(A,R,"M"+C+","+T+"H-"+T+"V-"+C+"Z")}},"triangle-nw":{n:12,f:function(w,A,R){if(o(A))return a;var T=c(w*.6,2),C=c(w*1.2,2);return b(A,R,"M-"+T+","+C+"V-"+T+"H"+C+"Z")}},pentagon:{n:13,f:function(w,A,R){if(o(A))return a;var T=c(w*.951,2),C=c(w*.588,2),m=c(-w,2),L=c(w*-.309,2),D=c(w*.809,2);return b(A,R,"M"+T+","+L+"L"+C+","+D+"H-"+C+"L-"+T+","+L+"L0,"+m+"Z")}},hexagon:{n:14,f:function(w,A,R){if(o(A))return a;var T=c(w,2),C=c(w/2,2),m=c(w*s/2,2);return b(A,R,"M"+m+",-"+C+"V"+C+"L0,"+T+"L-"+m+","+C+"V-"+C+"L0,-"+T+"Z")}},hexagon2:{n:15,f:function(w,A,R){if(o(A))return a;var T=c(w,2),C=c(w/2,2),m=c(w*s/2,2);return b(A,R,"M-"+C+","+m+"H"+C+"L"+T+",0L"+C+",-"+m+"H-"+C+"L-"+T+",0Z")}},octagon:{n:16,f:function(w,A,R){if(o(A))return a;var T=c(w*.924,2),C=c(w*.383,2);return b(A,R,"M-"+C+",-"+T+"H"+C+"L"+T+",-"+C+"V"+C+"L"+C+","+T+"H-"+C+"L-"+T+","+C+"V-"+C+"Z")}},star:{n:17,f:function(w,A,R){if(o(A))return a;var T=w*1.4,C=c(T*.225,2),m=c(T*.951,2),L=c(T*.363,2),D=c(T*.588,2),O=c(-T,2),N=c(T*-.309,2),V=c(T*.118,2),X=c(T*.809,2),k=c(T*.382,2);return b(A,R,"M"+C+","+N+"H"+m+"L"+L+","+V+"L"+D+","+X+"L0,"+k+"L-"+D+","+X+"L-"+L+","+V+"L-"+m+","+N+"H-"+C+"L0,"+O+"Z")}},hexagram:{n:18,f:function(w,A,R){if(o(A))return a;var T=c(w*.66,2),C=c(w*.38,2),m=c(w*.76,2);return b(A,R,"M-"+m+",0l-"+C+",-"+T+"h"+m+"l"+C+",-"+T+"l"+C+","+T+"h"+m+"l-"+C+","+T+"l"+C+","+T+"h-"+m+"l-"+C+","+T+"l-"+C+",-"+T+"h-"+m+"Z")}},"star-triangle-up":{n:19,f:function(w,A,R){if(o(A))return a;var T=c(w*s*.8,2),C=c(w*.8,2),m=c(w*1.6,2),L=c(w*4,2),D="A "+L+","+L+" 0 0 1 ";return b(A,R,"M-"+T+","+C+D+T+","+C+D+"0,-"+m+D+"-"+T+","+C+"Z")}},"star-triangle-down":{n:20,f:function(w,A,R){if(o(A))return a;var T=c(w*s*.8,2),C=c(w*.8,2),m=c(w*1.6,2),L=c(w*4,2),D="A "+L+","+L+" 0 0 1 ";return b(A,R,"M"+T+",-"+C+D+"-"+T+",-"+C+D+"0,"+m+D+T+",-"+C+"Z")}},"star-square":{n:21,f:function(w,A,R){if(o(A))return a;var T=c(w*1.1,2),C=c(w*2,2),m="A "+C+","+C+" 0 0 1 ";return b(A,R,"M-"+T+",-"+T+m+"-"+T+","+T+m+T+","+T+m+T+",-"+T+m+"-"+T+",-"+T+"Z")}},"star-diamond":{n:22,f:function(w,A,R){if(o(A))return a;var T=c(w*1.4,2),C=c(w*1.9,2),m="A "+C+","+C+" 0 0 1 ";return b(A,R,"M-"+T+",0"+m+"0,"+T+m+T+",0"+m+"0,-"+T+m+"-"+T+",0Z")}},"diamond-tall":{n:23,f:function(w,A,R){if(o(A))return a;var T=c(w*.7,2),C=c(w*1.4,2);return b(A,R,"M0,"+C+"L"+T+",0L0,-"+C+"L-"+T+",0Z")}},"diamond-wide":{n:24,f:function(w,A,R){if(o(A))return a;var T=c(w*1.4,2),C=c(w*.7,2);return b(A,R,"M0,"+C+"L"+T+",0L0,-"+C+"L-"+T+",0Z")}},hourglass:{n:25,f:function(w,A,R){if(o(A))return a;var T=c(w,2);return b(A,R,"M"+T+","+T+"H-"+T+"L"+T+",-"+T+"H-"+T+"Z")},noDot:!0},bowtie:{n:26,f:function(w,A,R){if(o(A))return a;var T=c(w,2);return b(A,R,"M"+T+","+T+"V-"+T+"L-"+T+","+T+"V-"+T+"Z")},noDot:!0},"circle-cross":{n:27,f:function(w,A,R){if(o(A))return a;var T=c(w,2);return b(A,R,"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(w,A,R){if(o(A))return a;var T=c(w,2),C=c(w/l,2);return b(A,R,"M"+C+","+C+"L-"+C+",-"+C+"M"+C+",-"+C+"L-"+C+","+C+"M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(w,A,R){if(o(A))return a;var T=c(w,2);return b(A,R,"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(w,A,R){if(o(A))return a;var T=c(w,2);return b(A,R,"M"+T+","+T+"L-"+T+",-"+T+"M"+T+",-"+T+"L-"+T+","+T+"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(w,A,R){if(o(A))return a;var T=c(w*1.3,2);return b(A,R,"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"ZM0,-"+T+"V"+T+"M-"+T+",0H"+T)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(w,A,R){if(o(A))return a;var T=c(w*1.3,2),C=c(w*.65,2);return b(A,R,"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"ZM-"+C+",-"+C+"L"+C+","+C+"M-"+C+","+C+"L"+C+",-"+C)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(w,A,R){if(o(A))return a;var T=c(w*1.4,2);return b(A,R,"M0,"+T+"V-"+T+"M"+T+",0H-"+T)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(w,A,R){if(o(A))return a;var T=c(w,2);return b(A,R,"M"+T+","+T+"L-"+T+",-"+T+"M"+T+",-"+T+"L-"+T+","+T)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(w,A,R){if(o(A))return a;var T=c(w*1.2,2),C=c(w*.85,2);return b(A,R,"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+C+","+C+"L-"+C+",-"+C+"M"+C+",-"+C+"L-"+C+","+C)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(w,A,R){if(o(A))return a;var T=c(w/2,2),C=c(w,2);return b(A,R,"M"+T+","+C+"V-"+C+"M"+(T-C)+",-"+C+"V"+C+"M"+C+","+T+"H-"+C+"M-"+C+","+(T-C)+"H"+C)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(w,A,R){if(o(A))return a;var T=c(w*1.2,2),C=c(w*1.6,2),m=c(w*.8,2);return b(A,R,"M-"+T+","+m+"L0,0M"+T+","+m+"L0,0M0,-"+C+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(w,A,R){if(o(A))return a;var T=c(w*1.2,2),C=c(w*1.6,2),m=c(w*.8,2);return b(A,R,"M-"+T+",-"+m+"L0,0M"+T+",-"+m+"L0,0M0,"+C+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(w,A,R){if(o(A))return a;var T=c(w*1.2,2),C=c(w*1.6,2),m=c(w*.8,2);return b(A,R,"M"+m+","+T+"L0,0M"+m+",-"+T+"L0,0M-"+C+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(w,A,R){if(o(A))return a;var T=c(w*1.2,2),C=c(w*1.6,2),m=c(w*.8,2);return b(A,R,"M-"+m+","+T+"L0,0M-"+m+",-"+T+"L0,0M"+C+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(w,A,R){if(o(A))return a;var T=c(w*1.4,2);return b(A,R,"M"+T+",0H-"+T)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(w,A,R){if(o(A))return a;var T=c(w*1.4,2);return b(A,R,"M0,"+T+"V-"+T)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(w,A,R){if(o(A))return a;var T=c(w,2);return b(A,R,"M"+T+",-"+T+"L-"+T+","+T)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(w,A,R){if(o(A))return a;var T=c(w,2);return b(A,R,"M"+T+","+T+"L-"+T+",-"+T)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(w,A,R){if(o(A))return a;var T=c(w,2),C=c(w*2,2);return b(A,R,"M0,0L-"+T+","+C+"H"+T+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(w,A,R){if(o(A))return a;var T=c(w,2),C=c(w*2,2);return b(A,R,"M0,0L-"+T+",-"+C+"H"+T+"Z")},noDot:!0},"arrow-left":{n:47,f:function(w,A,R){if(o(A))return a;var T=c(w*2,2),C=c(w,2);return b(A,R,"M0,0L"+T+",-"+C+"V"+C+"Z")},noDot:!0},"arrow-right":{n:48,f:function(w,A,R){if(o(A))return a;var T=c(w*2,2),C=c(w,2);return b(A,R,"M0,0L-"+T+",-"+C+"V"+C+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(w,A,R){if(o(A))return a;var T=c(w,2),C=c(w*2,2);return b(A,R,"M-"+T+",0H"+T+"M0,0L-"+T+","+C+"H"+T+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(w,A,R){if(o(A))return a;var T=c(w,2),C=c(w*2,2);return b(A,R,"M-"+T+",0H"+T+"M0,0L-"+T+",-"+C+"H"+T+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(w,A,R){if(o(A))return a;var T=c(w*2,2),C=c(w,2);return b(A,R,"M0,-"+C+"V"+C+"M0,0L"+T+",-"+C+"V"+C+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(w,A,R){if(o(A))return a;var T=c(w*2,2),C=c(w,2);return b(A,R,"M0,-"+C+"V"+C+"M0,0L-"+T+",-"+C+"V"+C+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(w,A,R){if(o(A))return a;var T=v/2.5,C=2*w*d(T),m=2*w*p(T);return b(A,R,"M0,0L"+-C+","+m+"L"+C+","+m+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(w,A,R){if(o(A))return a;var T=v/4,C=2*w*d(T),m=2*w*p(T);return b(A,R,"M0,0L"+-C+","+m+"A "+2*w+","+2*w+" 0 0 1 "+C+","+m+"Z")},backoff:.4,noDot:!0}};function o(w){return w===null}var y,_,E,M;function b(w,A,R){if((!w||w%360===0)&&!A)return R;if(E===w&&M===A&&y===R)return _;E=w,M=A,y=R;function T(ne,oe){var Y=d(ne),G=p(ne),K=oe[0],ee=oe[1]+(A||0);return[K*Y-ee*G,K*G+ee*Y]}for(var C=w/180*v,m=0,L=0,D=i(R),O="",N=0;N<D.length;N++){var V=D[N],X=V[0],k=m,Z=L;if(X==="M"||X==="L")m=+V[1],L=+V[2];else if(X==="m"||X==="l")m+=+V[1],L+=+V[2];else if(X==="H")m=+V[1];else if(X==="h")m+=+V[1];else if(X==="V")L=+V[1];else if(X==="v")L+=+V[1];else if(X==="A"){m=+V[1],L=+V[2];var B=T(C,[+V[6],+V[7]]);V[6]=B[0],V[7]=B[1],V[3]=+V[3]+w}(X==="H"||X==="V")&&(X="L"),(X==="h"||X==="v")&&(X="l"),(X==="m"||X==="l")&&(m-=k,L-=Z);var J=T(C,[m,L]);(X==="H"||X==="V")&&(X="L"),(X==="M"||X==="L"||X==="m"||X==="l")&&(V[1]=J[0],V[2]=J[1]),V[0]=X,O+=V[0]+V.slice(1).join(",")}return _=O,O}},7644:function(f){f.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},4880:function(f,u,r){var i=r(8248),c=r(4040),a=r(4460),l=r(3400),s=r(3792);f.exports=function(p){for(var o=p.calcdata,y=0;y<o.length;y++){var _=o[y],E=_[0].trace;if(E.visible===!0&&c.traceIs(E,"errorBarsOK")){var M=a.getFromId(p,E.xaxis),b=a.getFromId(p,E.yaxis);v(_,E,M,"x"),v(_,E,b,"y")}}};function v(d,p,o,y){var _=p["error_"+y]||{},E=_.visible&&["linear","log"].indexOf(o.type)!==-1,M=[];if(E){for(var b=s(_),w=0;w<d.length;w++){var A=d[w],R=A.i;if(R===void 0)R=w;else if(R===null)continue;var T=A[y];if(i(o.c2l(T))){var C=b(T,R);if(i(C[0])&&i(C[1])){var m=A[y+"s"]=T-C[0],L=A[y+"h"]=T+C[1];M.push(m,L)}}}var D=o._id,O=p._extremes[D],N=a.findExtremes(o,M,l.extendFlat({tozero:O.opts.tozero},{padded:!0}));O.min=O.min.concat(N.min),O.max=O.max.concat(N.max)}}},3792:function(f){f.exports=function(i){var c=i.type,a=i.symmetric;if(c==="data"){var l=i.array||[];if(a)return function(o,y){var _=+l[y];return[_,_]};var s=i.arrayminus||[];return function(o,y){var _=+l[y],E=+s[y];return!isNaN(_)||!isNaN(E)?[E||0,_||0]:[NaN,NaN]}}else{var v=u(c,i.value),d=u(c,i.valueminus);return a||i.valueminus===void 0?function(o){var y=v(o);return[y,y]}:function(o){return[d(o),v(o)]}}};function u(r,i){if(r==="percent")return function(c){return Math.abs(c*i/100)};if(r==="constant")return function(){return Math.abs(i)};if(r==="sqrt")return function(c){return Math.sqrt(Math.abs(c))}}},5200:function(f,u,r){var i=r(8248),c=r(4040),a=r(3400),l=r(1780),s=r(7644);f.exports=function(v,d,p,o){var y="error_"+o.axis,_=l.newContainer(d,y),E=v[y]||{};function M(m,L){return a.coerce(E,_,s,m,L)}var b=E.array!==void 0||E.value!==void 0||E.type==="sqrt",w=M("visible",b);if(w!==!1){var A=M("type","array"in E?"data":"percent"),R=!0;A!=="sqrt"&&(R=M("symmetric",!((A==="data"?"arrayminus":"valueminus")in E))),A==="data"?(M("array"),M("traceref"),R||(M("arrayminus"),M("tracerefminus"))):(A==="percent"||A==="constant")&&(M("value"),R||M("valueminus"));var T="copy_"+o.inherit+"style";if(o.inherit){var C=d["error_"+o.inherit];(C||{}).visible&&M(T,!(E.color||i(E.thickness)||i(E.width)))}(!o.inherit||!_[T])&&(M("color",p),M("thickness"),M("width",c.traceIs(d,"gl3d")?0:4))}}},4968:function(f,u,r){var i=r(3400),c=r(7824).overrideAll,a=r(7644),l={error_x:i.extendFlat({},a),error_y:i.extendFlat({},a)};delete l.error_x.copy_zstyle,delete l.error_y.copy_zstyle,delete l.error_y.copy_ystyle;var s={error_x:i.extendFlat({},a),error_y:i.extendFlat({},a),error_z:i.extendFlat({},a)};delete s.error_x.copy_ystyle,delete s.error_y.copy_ystyle,delete s.error_z.copy_ystyle,delete s.error_z.copy_zstyle,f.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:l,bar:l,histogram:l,scatter3d:c(s,"calc","nested"),scattergl:c(l,"calc","nested")}},supplyDefaults:r(5200),calc:r(4880),makeComputeError:r(3792),plot:r(8512),style:r(2036),hoverInfo:v};function v(d,p,o){(p.error_y||{}).visible&&(o.yerr=d.yh-d.y,p.error_y.symmetric||(o.yerrneg=d.y-d.ys)),(p.error_x||{}).visible&&(o.xerr=d.xh-d.x,p.error_x.symmetric||(o.xerrneg=d.x-d.xs))}},8512:function(f,u,r){var i=r(3428),c=r(8248),a=r(3616),l=r(3028);f.exports=function(d,p,o,y){var _,E=o.xaxis,M=o.yaxis,b=y&&y.duration>0,w=d._context.staticPlot;p.each(function(A){var R=A[0].trace,T=R.error_x||{},C=R.error_y||{},m;R.ids&&(m=function(N){return N.id});var L=l.hasMarkers(R)&&R.marker.maxdisplayed>0;!C.visible&&!T.visible&&(A=[]);var D=i.select(this).selectAll("g.errorbar").data(A,m);if(D.exit().remove(),!!A.length){T.visible||D.selectAll("path.xerror").remove(),C.visible||D.selectAll("path.yerror").remove(),D.style("opacity",1);var O=D.enter().append("g").classed("errorbar",!0);b&&O.style("opacity",0).transition().duration(y.duration).style("opacity",1),a.setClipUrl(D,o.layerClipId,d),D.each(function(N){var V=i.select(this),X=s(N,E,M);if(!(L&&!N.vis)){var k,Z=V.select("path.yerror");if(C.visible&&c(X.x)&&c(X.yh)&&c(X.ys)){var B=C.width;k="M"+(X.x-B)+","+X.yh+"h"+2*B+"m-"+B+",0V"+X.ys,X.noYS||(k+="m-"+B+",0h"+2*B),_=!Z.size(),_?Z=V.append("path").style("vector-effect",w?"none":"non-scaling-stroke").classed("yerror",!0):b&&(Z=Z.transition().duration(y.duration).ease(y.easing)),Z.attr("d",k)}else Z.remove();var J=V.select("path.xerror");if(T.visible&&c(X.y)&&c(X.xh)&&c(X.xs)){var ne=(T.copy_ystyle?C:T).width;k="M"+X.xh+","+(X.y-ne)+"v"+2*ne+"m0,-"+ne+"H"+X.xs,X.noXS||(k+="m0,-"+ne+"v"+2*ne),_=!J.size(),_?J=V.append("path").style("vector-effect",w?"none":"non-scaling-stroke").classed("xerror",!0):b&&(J=J.transition().duration(y.duration).ease(y.easing)),J.attr("d",k)}else J.remove()}})}})};function s(v,d,p){var o={x:d.c2p(v.x),y:p.c2p(v.y)};return v.yh!==void 0&&(o.yh=p.c2p(v.yh),o.ys=p.c2p(v.ys),c(o.ys)||(o.noYS=!0,o.ys=p.c2p(v.ys,!0))),v.xh!==void 0&&(o.xh=d.c2p(v.xh),o.xs=d.c2p(v.xs),c(o.xs)||(o.noXS=!0,o.xs=d.c2p(v.xs,!0))),o}},2036:function(f,u,r){var i=r(3428),c=r(6308);f.exports=function(l){l.each(function(s){var v=s[0].trace,d=v.error_y||{},p=v.error_x||{},o=i.select(this);o.selectAll("path.yerror").style("stroke-width",d.thickness+"px").call(c.stroke,d.color),p.copy_ystyle&&(p=d),o.selectAll("path.xerror").style("stroke-width",p.thickness+"px").call(c.stroke,p.color)})}},5756:function(f,u,r){var i=r(5376),c=r(5460).hoverlabel,a=r(2880).extendFlat;f.exports={hoverlabel:{bgcolor:a({},c.bgcolor,{arrayOk:!0}),bordercolor:a({},c.bordercolor,{arrayOk:!0}),font:i({arrayOk:!0,editType:"none"}),align:a({},c.align,{arrayOk:!0}),namelength:a({},c.namelength,{arrayOk:!0}),editType:"none"}}},5056:function(f,u,r){var i=r(3400),c=r(4040);f.exports=function(s){var v=s.calcdata,d=s._fullLayout;function p(M){return function(b){return i.coerceHoverinfo({hoverinfo:b},{_module:M._module},d)}}for(var o=0;o<v.length;o++){var y=v[o],_=y[0].trace;if(!c.traceIs(_,"pie-like")){var E=c.traceIs(_,"2dMap")?a:i.fillArray;E(_.hoverinfo,y,"hi",p(_)),_.hovertemplate&&E(_.hovertemplate,y,"ht"),_.hoverlabel&&(E(_.hoverlabel.bgcolor,y,"hbg"),E(_.hoverlabel.bordercolor,y,"hbc"),E(_.hoverlabel.font.size,y,"hts"),E(_.hoverlabel.font.color,y,"htc"),E(_.hoverlabel.font.family,y,"htf"),E(_.hoverlabel.font.weight,y,"htw"),E(_.hoverlabel.font.style,y,"hty"),E(_.hoverlabel.font.variant,y,"htv"),E(_.hoverlabel.namelength,y,"hnl"),E(_.hoverlabel.align,y,"hta"))}}};function a(l,s,v,d){d=d||i.identity,Array.isArray(l)&&(s[0][v]=d(l))}},2376:function(f,u,r){var i=r(4040),c=r(3292).hover;f.exports=function(l,s,v){var d=i.getComponentMethod("annotations","onClick")(l,l._hoverdata);v!==void 0&&c(l,s,v,!0);function p(){l.emit("plotly_click",{points:l._hoverdata,event:s})}l._hoverdata&&s&&s.target&&(d&&d.then?d.then(p):p(),s.stopImmediatePropagation&&s.stopImmediatePropagation())}},2456:function(f){f.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},5448:function(f,u,r){var i=r(3400),c=r(5756),a=r(6132);f.exports=function(s,v,d,p){function o(_,E){return i.coerce(s,v,c,_,E)}var y=i.extendFlat({},p.hoverlabel);v.hovertemplate&&(y.namelength=-1),a(s,v,o,y)}},624:function(f,u,r){var i=r(3400);u.getSubplot=function(d){return d.subplot||d.xaxis+d.yaxis||d.geo},u.isTraceInSubplots=function(d,p){if(d.type==="splom"){for(var o=d.xaxes||[],y=d.yaxes||[],_=0;_<o.length;_++)for(var E=0;E<y.length;E++)if(p.indexOf(o[_]+y[E])!==-1)return!0;return!1}return p.indexOf(u.getSubplot(d))!==-1},u.flat=function(d,p){for(var o=new Array(d.length),y=0;y<d.length;y++)o[y]=p;return o},u.p2c=function(d,p){for(var o=new Array(d.length),y=0;y<d.length;y++)o[y]=d[y].p2c(p);return o},u.getDistanceFunction=function(d,p,o,y){return d==="closest"?y||u.quadrature(p,o):d.charAt(0)==="x"?p:o},u.getClosest=function(d,p,o){if(o.index!==!1)o.index>=0&&o.index<d.length?o.distance=0:o.index=!1;else for(var y=0;y<d.length;y++){var _=p(d[y]);_<=o.distance&&(o.index=y,o.distance=_)}return o},u.inbox=function(d,p,o){return d*p<0||d===0?o:1/0},u.quadrature=function(d,p){return function(o){var y=d(o),_=p(o);return Math.sqrt(y*y+_*_)}},u.makeEventData=function(d,p,o){var y="index"in d?d.index:d.pointNumber,_={data:p._input,fullData:p,curveNumber:p.index,pointNumber:y};if(p._indexToPoints){var E=p._indexToPoints[y];E.length===1?_.pointIndex=E[0]:_.pointIndices=E}else _.pointIndex=y;return p._module.eventData?_=p._module.eventData(_,d,p,o,y):("xVal"in d?_.x=d.xVal:"x"in d&&(_.x=d.x),"yVal"in d?_.y=d.yVal:"y"in d&&(_.y=d.y),d.xa&&(_.xaxis=d.xa),d.ya&&(_.yaxis=d.ya),d.zLabelVal!==void 0&&(_.z=d.zLabelVal)),u.appendArrayPointValue(_,p,y),_},u.appendArrayPointValue=function(d,p,o){var y=p._arrayAttrs;if(y)for(var _=0;_<y.length;_++){var E=y[_],M=a(E);if(d[M]===void 0){var b=i.nestedProperty(p,E).get(),w=l(b,o);w!==void 0&&(d[M]=w)}}},u.appendArrayMultiPointValues=function(d,p,o){var y=p._arrayAttrs;if(y)for(var _=0;_<y.length;_++){var E=y[_],M=a(E);if(d[M]===void 0){for(var b=i.nestedProperty(p,E).get(),w=new Array(o.length),A=0;A<o.length;A++)w[A]=l(b,o[A]);d[M]=w}}};var c={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function a(d){return c[d]||d}function l(d,p){if(Array.isArray(p)){if(Array.isArray(d)&&Array.isArray(d[p[0]]))return d[p[0]][p[1]]}else return d[p]}var s={x:!0,y:!0},v={"x unified":!0,"y unified":!0};u.isUnifiedHover=function(d){return typeof d!="string"?!1:!!v[d]},u.isXYhover=function(d){return typeof d!="string"?!1:!!s[d]}},3292:function(f,u,r){var i=r(3428),c=r(8248),a=r(9760),l=r(3400),s=l.pushUnique,v=l.strTranslate,d=l.strRotate,p=r(5924),o=r(2736),y=r(2213),_=r(3616),E=r(6308),M=r(6476),b=r(4460),w=r(4040),A=r(624),R=r(2456),T=r(7864),C=r(1140),m=R.YANGLE,L=Math.PI*m/180,D=1/Math.sin(L),O=Math.cos(L),N=Math.sin(L),V=R.HOVERARROWSIZE,X=R.HOVERTEXTPAD,k={box:!0,ohlc:!0,violin:!0,candlestick:!0},Z={scatter:!0,scattergl:!0,splom:!0};function B(F,P){return F.distance-P.distance}u.hover=function(P,q,z,te){P=l.getGraphDiv(P);var ue=q.target;l.throttle(P._fullLayout._uid+R.HOVERID,R.HOVERMINTIME,function(){J(P,q,z,te,ue)})},u.loneHover=function(P,q){var z=!0;Array.isArray(P)||(z=!1,P=[P]);var te=q.gd,ue=U(te),ve=W(te),_e=P.map(function(ke){var He=ke._x0||ke.x0||ke.x||0,Ke=ke._x1||ke.x1||ke.x||0,st=ke._y0||ke.y0||ke.y||0,vt=ke._y1||ke.y1||ke.y||0,pt=ke.eventData;if(pt){var ft=Math.min(He,Ke),lt=Math.max(He,Ke),Mt=Math.min(st,vt),ot=Math.max(st,vt),Ct=ke.trace;if(w.traceIs(Ct,"gl3d")){var kt=te._fullLayout[Ct.scene]._scene.container,St=kt.offsetLeft,Et=kt.offsetTop;ft+=St,lt+=St,Mt+=Et,ot+=Et}pt.bbox={x0:ft+ve,x1:lt+ve,y0:Mt+ue,y1:ot+ue},q.inOut_bbox&&q.inOut_bbox.push(pt.bbox)}else pt=!1;return{color:ke.color||E.defaultLine,x0:ke.x0||ke.x||0,x1:ke.x1||ke.x||0,y0:ke.y0||ke.y||0,y1:ke.y1||ke.y||0,xLabel:ke.xLabel,yLabel:ke.yLabel,zLabel:ke.zLabel,text:ke.text,name:ke.name,idealAlign:ke.idealAlign,borderColor:ke.borderColor,fontFamily:ke.fontFamily,fontSize:ke.fontSize,fontColor:ke.fontColor,fontWeight:ke.fontWeight,fontStyle:ke.fontStyle,fontVariant:ke.fontVariant,nameLength:ke.nameLength,textAlign:ke.textAlign,trace:ke.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ke.hovertemplate||!1,hovertemplateLabels:ke.hovertemplateLabels||!1,eventData:pt}}),Re=!1,Le=Y(_e,{gd:te,hovermode:"closest",rotateLabels:Re,bgColor:q.bgColor||E.background,container:i.select(q.container),outerContainer:q.outerContainer||q.container}),Ve=Le.hoverLabels,Xe=5,Ze=0,Te=0;Ve.sort(function(ke,He){return ke.y0-He.y0}).each(function(ke,He){var Ke=ke.y0-ke.by/2;Ke-Xe<Ze?ke.offset=Ze-Ke+Xe:ke.offset=0,Ze=Ke+ke.by+ke.offset,He===q.anchorIndex&&(Te=ke.offset)}).each(function(ke){ke.offset-=Te});var we=te._fullLayout._invScaleX,be=te._fullLayout._invScaleY;return re(Ve,Re,we,be),z?Ve:Ve.node()};function J(F,P,q,z,te){q||(q="xy");var ue=Array.isArray(q)?q:[q],ve,_e=F._fullLayout,Re=_e.hoversubplots,Le=_e._plots||[],Ve=Le[q],Xe=_e._has("cartesian"),Ze=P.hovermode||_e.hovermode,Te=(Ze||"").charAt(0)==="x",we=(Ze||"").charAt(0)==="y",be,ke;if(Xe&&(Te||we)&&Re==="axis"){for(var He=ue.length,Ke=0;Ke<He;Ke++)if(ve=ue[Ke],Le[ve]){be=b.getFromId(F,ve,"x"),ke=b.getFromId(F,ve,"y");var st=(Te?be:ke)._subplotsWith;if(st&&st.length)for(var vt=0;vt<st.length;vt++)s(ue,st[vt])}}if(Ve&&Re!=="single"){var pt=Ve.overlays.map(function(_r){return _r.id});ue=ue.concat(pt)}for(var ft=ue.length,lt=new Array(ft),Mt=new Array(ft),ot=!1,Ct=0;Ct<ft;Ct++)if(ve=ue[Ct],Le[ve])ot=!0,lt[Ct]=Le[ve].xaxis,Mt[Ct]=Le[ve].yaxis;else if(_e[ve]&&_e[ve]._subplot){var kt=_e[ve]._subplot;lt[Ct]=kt.xaxis,Mt[Ct]=kt.yaxis}else{l.warn("Unrecognized subplot: "+ve);return}if(Ze&&!ot&&(Ze="closest"),["x","y","closest","x unified","y unified"].indexOf(Ze)===-1||!F.calcdata||F.querySelector(".zoombox")||F._dragging)return M.unhoverRaw(F,P);var St=_e.hoverdistance;St===-1&&(St=1/0);var Et=_e.spikedistance;Et===-1&&(Et=1/0);var Ue=[],De=[],Ie,Fe,We,de,Me,he,Ee,Pe,Ne,ht,nt,Ye,Be,ut={hLinePoint:null,vLinePoint:null},Dt=!1;if(Array.isArray(P))for(Ze="array",We=0;We<P.length;We++)Me=F.calcdata[P[We].curveNumber||0],Me&&(he=Me[0].trace,Me[0].trace.hoverinfo!=="skip"&&(De.push(Me),he.orientation==="h"&&(Dt=!0)));else{var Nt=F.calcdata.slice();for(Nt.sort(function(_r,mn){var Mr=_r[0].trace.zorder||0,Br=mn[0].trace.zorder||0;return Mr-Br}),de=0;de<Nt.length;de++)Me=Nt[de],he=Me[0].trace,he.hoverinfo!=="skip"&&A.isTraceInSubplots(he,ue)&&(De.push(Me),he.orientation==="h"&&(Dt=!0));var Wt=!te,$t,Vt;if(Wt)"xpx"in P?$t=P.xpx:$t=lt[0]._length/2,"ypx"in P?Vt=P.ypx:Vt=Mt[0]._length/2;else{if(p.triggerHandler(F,"plotly_beforehover",P)===!1)return;var Ft=te.getBoundingClientRect();$t=P.clientX-Ft.left,Vt=P.clientY-Ft.top,_e._calcInverseTransform(F);var qt=l.apply3DTransform(_e._invTransform)($t,Vt);if($t=qt[0],Vt=qt[1],$t<0||$t>lt[0]._length||Vt<0||Vt>Mt[0]._length)return M.unhoverRaw(F,P)}if(P.pointerX=$t+lt[0]._offset,P.pointerY=Vt+Mt[0]._offset,"xval"in P?Ie=A.flat(ue,P.xval):Ie=A.p2c(lt,$t),"yval"in P?Fe=A.flat(ue,P.yval):Fe=A.p2c(Mt,Vt),!c(Ie[0])||!c(Fe[0]))return l.warn("Fx.hover failed",P,F),M.unhoverRaw(F,P)}var Gt=1/0;function Xt(_r,mn){for(de=0;de<De.length;de++)if(Me=De[de],!(!Me||!Me[0]||!Me[0].trace)&&(he=Me[0].trace,!(he.visible!==!0||he._length===0)&&["carpet","contourcarpet"].indexOf(he._module.name)===-1)){if(Ne=Ze,A.isUnifiedHover(Ne)&&(Ne=Ne.charAt(0)),he.type==="splom"?(Pe=0,Ee=ue[Pe]):(Ee=A.getSubplot(he),Pe=ue.indexOf(Ee)),Ye={cd:Me,trace:he,xa:lt[Pe],ya:Mt[Pe],maxHoverDistance:St,maxSpikeDistance:Et,index:!1,distance:Math.min(Gt,St),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:E.defaultLine,name:he.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},_e[Ee]&&(Ye.subplot=_e[Ee]._subplot),_e._splomScenes&&_e._splomScenes[he.uid]&&(Ye.scene=_e._splomScenes[he.uid]),Ne==="array"){var Mr=P[de];"pointNumber"in Mr?(Ye.index=Mr.pointNumber,Ne="closest"):(Ne="","xval"in Mr&&(ht=Mr.xval,Ne="x"),"yval"in Mr&&(nt=Mr.yval,Ne=Ne?"closest":"y"))}else _r!==void 0&&mn!==void 0?(ht=_r,nt=mn):(ht=Ie[Pe],nt=Fe[Pe]);if(Be=Ue.length,St!==0)if(he._module&&he._module.hoverPoints){var Br=he._module.hoverPoints(Ye,ht,nt,Ne,{finiteRange:!0,hoverLayer:_e._hoverlayer,hoversubplots:Re,gd:F});if(Br)for(var zr,Wr=0;Wr<Br.length;Wr++)zr=Br[Wr],c(zr.x0)&&c(zr.y0)&&Ue.push(se(zr,Ze))}else l.log("Unrecognized trace type in hover:",he);if(Ze==="closest"&&Ue.length>Be&&(Ue.splice(0,Be),Gt=Ue[0].distance),Xe&&Et!==0&&Ue.length===0){Ye.distance=Et,Ye.index=!1;var Gr=he._module.hoverPoints(Ye,ht,nt,"closest",{hoverLayer:_e._hoverlayer});if(Gr&&(Gr=Gr.filter(function(Jr){return Jr.spikeDistance<=Et})),Gr&&Gr.length){var Qr,Ur=Gr.filter(function(Jr){return Jr.xa.showspikes&&Jr.xa.spikesnap!=="hovered data"});if(Ur.length){var an=Ur[0];c(an.x0)&&c(an.y0)&&(Qr=jt(an),(!ut.vLinePoint||ut.vLinePoint.spikeDistance>Qr.spikeDistance)&&(ut.vLinePoint=Qr))}var Un=Gr.filter(function(Jr){return Jr.ya.showspikes&&Jr.ya.spikesnap!=="hovered data"});if(Un.length){var xn=Un[0];c(xn.x0)&&c(xn.y0)&&(Qr=jt(xn),(!ut.hLinePoint||ut.hLinePoint.spikeDistance>Qr.spikeDistance)&&(ut.hLinePoint=Qr))}}}}}Xt();function sr(_r,mn,Mr){for(var Br=null,zr=1/0,Wr,Gr=0;Gr<_r.length;Gr++)be&&be._id!==_r[Gr].xa._id||ke&&ke._id!==_r[Gr].ya._id||(Wr=_r[Gr].spikeDistance,Mr&&Gr===0&&(Wr=-1/0),Wr<=zr&&Wr<=mn&&(Br=_r[Gr],zr=Wr));return Br}function jt(_r){return _r?{xa:_r.xa,ya:_r.ya,x:_r.xSpike!==void 0?_r.xSpike:(_r.x0+_r.x1)/2,y:_r.ySpike!==void 0?_r.ySpike:(_r.y0+_r.y1)/2,distance:_r.distance,spikeDistance:_r.spikeDistance,curveNumber:_r.trace.index,color:_r.color,pointNumber:_r.index}:null}var Ut={fullLayout:_e,container:_e._hoverlayer,event:P};F._spikepoints;var tr={vLinePoint:ut.vLinePoint,hLinePoint:ut.hLinePoint};F._spikepoints=tr;var Ht=function(){var _r=Ue.filter(function(Mr){return be&&be._id===Mr.xa._id&&ke&&ke._id===Mr.ya._id}),mn=Ue.filter(function(Mr){return!(be&&be._id===Mr.xa._id&&ke&&ke._id===Mr.ya._id)});_r.sort(B),mn.sort(B),Ue=_r.concat(mn),Ue=pe(Ue,Ze)};Ht();var lr=Ze.charAt(0),yr=(lr==="x"||lr==="y")&&Ue[0]&&Z[Ue[0].trace.type];if(Xe&&Et!==0&&Ue.length!==0){var xr=Ue.filter(function(_r){return _r.ya.showspikes}),er=sr(xr,Et,yr);ut.hLinePoint=jt(er);var fe=Ue.filter(function(_r){return _r.xa.showspikes}),Q=sr(fe,Et,yr);ut.vLinePoint=jt(Q)}if(Ue.length===0){var Je=M.unhoverRaw(F,P);return Xe&&(ut.hLinePoint!==null||ut.vLinePoint!==null)&&Se()&&ge(F,ut,Ut),Je}if(Xe&&Se()&&ge(F,ut,Ut),A.isXYhover(Ne)&&Ue[0].length!==0&&Ue[0].trace.type!=="splom"){var Ge=Ue[0];k[Ge.trace.type]?Ue=Ue.filter(function(_r){return _r.trace.index===Ge.trace.index}):Ue=[Ge];var Qe=Ue.length,it=ye("x",Ge,_e),rt=ye("y",Ge,_e);Xt(it,rt);var $e=[],je={},ct=0,dt=function(_r){var mn=k[_r.trace.type]?ne(_r):_r.trace.index;if(!je[mn])ct++,je[mn]=ct,$e.push(_r);else{var Mr=je[mn]-1,Br=$e[Mr];Mr>0&&Math.abs(_r.distance)<Math.abs(Br.distance)&&($e[Mr]=_r)}},xt;for(xt=0;xt<Qe;xt++)dt(Ue[xt]);for(xt=Ue.length-1;xt>Qe-1;xt--)dt(Ue[xt]);Ue=$e,Ht()}var yt=F._hoverdata,Lt=[],wt=U(F),At=W(F);for(We=0;We<Ue.length;We++){var Ot=Ue[We],zt=A.makeEventData(Ot,Ot.trace,Ot.cd);if(Ot.hovertemplate!==!1){var Zt=!1;Ot.cd[Ot.index]&&Ot.cd[Ot.index].ht&&(Zt=Ot.cd[Ot.index].ht),Ot.hovertemplate=Zt||Ot.trace.hovertemplate||!1}if(Ot.xa&&Ot.ya){var Kt=Ot.x0+Ot.xa._offset,cr=Ot.x1+Ot.xa._offset,or=Ot.y0+Ot.ya._offset,nr=Ot.y1+Ot.ya._offset,mr=Math.min(Kt,cr),pr=Math.max(Kt,cr),Ar=Math.min(or,nr),en=Math.max(or,nr);zt.bbox={x0:mr+At,x1:pr+At,y0:Ar+wt,y1:en+wt}}Ot.eventData=[zt],Lt.push(zt)}F._hoverdata=Lt;var Lr=Ze==="y"&&(De.length>1||Ue.length>1)||Ze==="closest"&&Dt&&Ue.length>1,Pr=E.combine(_e.plot_bgcolor||E.background,_e.paper_bgcolor),nn=Y(Ue,{gd:F,hovermode:Ze,rotateLabels:Lr,bgColor:Pr,container:_e._hoverlayer,outerContainer:_e._paper.node(),commonLabelOpts:_e.hoverlabel,hoverdistance:_e.hoverdistance}),Dn=nn.hoverLabels;if(A.isUnifiedHover(Ze)||(K(Dn,Lr,_e,nn.commonLabelBoundingBox),re(Dn,Lr,_e._invScaleX,_e._invScaleY)),te&&te.tagName){var Pn=w.getComponentMethod("annotations","hasClickToShow")(F,Lt);y(i.select(te),Pn?"pointer":"")}!te||z||!xe(F,P,yt)||(yt&&F.emit("plotly_unhover",{event:P,points:yt}),F.emit("plotly_hover",{event:P,points:F._hoverdata,xaxes:lt,yaxes:Mt,xvals:Ie,yvals:Fe}))}function ne(F){return[F.trace.index,F.index,F.x0,F.y0,F.name,F.attr,F.xa?F.xa._id:"",F.ya?F.ya._id:""].join(",")}var oe=/<extra>([\s\S]*)<\/extra>/;function Y(F,P){var q=P.gd,z=q._fullLayout,te=P.hovermode,ue=P.rotateLabels,ve=P.bgColor,_e=P.container,Re=P.outerContainer,Le=P.commonLabelOpts||{};if(F.length===0)return[[]];var Ve=P.fontFamily||R.HOVERFONT,Xe=P.fontSize||R.HOVERFONTSIZE,Ze=P.fontWeight||z.font.weight,Te=P.fontStyle||z.font.style,we=P.fontVariant||z.font.variant,be=P.fontTextcase||z.font.textcase,ke=P.fontLineposition||z.font.lineposition,He=P.fontShadow||z.font.shadow,Ke=F[0],st=Ke.xa,vt=Ke.ya,pt=te.charAt(0),ft=pt+"Label",lt=Ke[ft];if(lt===void 0&&st.type==="multicategory")for(var Mt=0;Mt<F.length&&(lt=F[Mt][ft],lt===void 0);Mt++);var ot=j(q,Re),Ct=ot.top,kt=ot.width,St=ot.height,Et=lt!==void 0&&Ke.distance<=P.hoverdistance&&(te==="x"||te==="y");if(Et){var Ue=!0,De,Ie;for(De=0;De<F.length;De++)if(Ue&&F[De].zLabel===void 0&&(Ue=!1),Ie=F[De].hoverinfo||F[De].trace.hoverinfo,Ie){var Fe=Array.isArray(Ie)?Ie:Ie.split("+");if(Fe.indexOf("all")===-1&&Fe.indexOf(te)===-1){Et=!1;break}}Ue&&(Et=!1)}var We=_e.selectAll("g.axistext").data(Et?[0]:[]);We.enter().append("g").classed("axistext",!0),We.exit().remove();var de={minX:0,maxX:0,minY:0,maxY:0};if(We.each(function(){var Q=i.select(this),Je=l.ensureSingle(Q,"path","",function(pr){pr.style({"stroke-width":"1px"})}),Ge=l.ensureSingle(Q,"text","",function(pr){pr.attr("data-notex",1)}),Qe=Le.bgcolor||E.defaultLine,it=Le.bordercolor||E.contrast(Qe),rt=E.contrast(Qe),$e=Le.font,je={weight:$e.weight||Ze,style:$e.style||Te,variant:$e.variant||we,textcase:$e.textcase||be,lineposition:$e.lineposition||ke,shadow:$e.shadow||He,family:$e.family||Ve,size:$e.size||Xe,color:$e.color||rt};Je.style({fill:Qe,stroke:it}),Ge.text(lt).call(_.font,je).call(o.positionText,0,0).call(o.convertToTspans,q),Q.attr("transform","");var ct=j(q,Ge.node()),dt,xt;if(te==="x"){var yt=st.side==="top"?"-":"";Ge.attr("text-anchor","middle").call(o.positionText,0,st.side==="top"?Ct-ct.bottom-V-X:Ct-ct.top+V+X),dt=st._offset+(Ke.x0+Ke.x1)/2,xt=vt._offset+(st.side==="top"?0:vt._length);var Lt=ct.width/2+X,wt=dt;dt<Lt?wt=Lt:dt>z.width-Lt&&(wt=z.width-Lt),Je.attr("d","M"+(dt-wt)+",0L"+(dt-wt+V)+","+yt+V+"H"+Lt+"v"+yt+(X*2+ct.height)+"H"+-Lt+"V"+yt+V+"H"+(dt-wt-V)+"Z"),dt=wt,de.minX=dt-Lt,de.maxX=dt+Lt,st.side==="top"?(de.minY=xt-(X*2+ct.height),de.maxY=xt-X):(de.minY=xt+X,de.maxY=xt+(X*2+ct.height))}else{var At,Ot,zt;vt.side==="right"?(At="start",Ot=1,zt="",dt=st._offset+st._length):(At="end",Ot=-1,zt="-",dt=st._offset),xt=vt._offset+(Ke.y0+Ke.y1)/2,Ge.attr("text-anchor",At),Je.attr("d","M0,0L"+zt+V+","+V+"V"+(X+ct.height/2)+"h"+zt+(X*2+ct.width)+"V-"+(X+ct.height/2)+"H"+zt+V+"V-"+V+"Z"),de.minY=xt-(X+ct.height/2),de.maxY=xt+(X+ct.height/2),vt.side==="right"?(de.minX=dt+V,de.maxX=dt+V+(X*2+ct.width)):(de.minX=dt-V-(X*2+ct.width),de.maxX=dt-V);var Zt=ct.height/2,Kt=Ct-ct.top-Zt,cr="clip"+z._uid+"commonlabel"+vt._id,or;if(dt<ct.width+2*X+V){or="M-"+(V+X)+"-"+Zt+"h-"+(ct.width-X)+"V"+Zt+"h"+(ct.width-X)+"Z";var nr=ct.width-dt+X;o.positionText(Ge,nr,Kt),At==="end"&&Ge.selectAll("tspan").each(function(){var pr=i.select(this),Ar=_.tester.append("text").text(pr.text()).call(_.font,je),en=j(q,Ar.node());Math.round(en.width)<Math.round(ct.width)&&pr.attr("x",nr-en.width),Ar.remove()})}else o.positionText(Ge,Ot*(X+V),Kt),or=null;var mr=z._topclips.selectAll("#"+cr).data(or?[0]:[]);mr.enter().append("clipPath").attr("id",cr).append("path"),mr.exit().remove(),mr.select("path").attr("d",or),_.setClipUrl(Ge,or?cr:null,q)}Q.attr("transform",v(dt,xt))}),A.isUnifiedHover(te)){_e.selectAll("g.hovertext").remove();var Me=F.filter(function(Q){return Q.hoverinfo!=="none"});if(Me.length===0)return[];var he=z.hoverlabel,Ee=he.font,Pe={showlegend:!0,legend:{title:{text:lt,font:Ee},font:Ee,bgcolor:he.bgcolor,bordercolor:he.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:z.legend?z.legend.traceorder:void 0,orientation:"v"}},Ne={font:Ee};T(Pe,Ne,q._fullData);var ht=Ne.legend;ht.entries=[];for(var nt=0;nt<Me.length;nt++){var Ye=Me[nt];if(Ye.hoverinfo!=="none"){var Be=G(Ye,!0,te,z,lt),ut=Be[0],Dt=Be[1];Ye.name=Dt,Dt!==""?Ye.text=Dt+" : "+ut:Ye.text=ut;var Nt=Ye.cd[Ye.index];Nt&&(Nt.mc&&(Ye.mc=Nt.mc),Nt.mcc&&(Ye.mc=Nt.mcc),Nt.mlc&&(Ye.mlc=Nt.mlc),Nt.mlcc&&(Ye.mlc=Nt.mlcc),Nt.mlw&&(Ye.mlw=Nt.mlw),Nt.mrc&&(Ye.mrc=Nt.mrc),Nt.dir&&(Ye.dir=Nt.dir)),Ye._distinct=!0,ht.entries.push([Ye])}}ht.entries.sort(function(Q,Je){return Q[0].trace.index-Je[0].trace.index}),ht.layer=_e,ht._inHover=!0,ht._groupTitleFont=he.grouptitlefont,C(q,ht);var Wt=_e.select("g.legend"),$t=j(q,Wt.node()),Vt=$t.width+2*X,Ft=$t.height+2*X,qt=Me[0],Gt=(qt.x0+qt.x1)/2,Xt=(qt.y0+qt.y1)/2,sr=!(w.traceIs(qt.trace,"bar-like")||w.traceIs(qt.trace,"box-violin")),jt,Ut;pt==="y"?sr?(Ut=Xt-X,jt=Xt+X):(Ut=Math.min.apply(null,Me.map(function(Q){return Math.min(Q.y0,Q.y1)})),jt=Math.max.apply(null,Me.map(function(Q){return Math.max(Q.y0,Q.y1)}))):Ut=jt=l.mean(Me.map(function(Q){return(Q.y0+Q.y1)/2}))-Ft/2;var tr,Ht;pt==="x"?sr?(tr=Gt+X,Ht=Gt-X):(tr=Math.max.apply(null,Me.map(function(Q){return Math.max(Q.x0,Q.x1)})),Ht=Math.min.apply(null,Me.map(function(Q){return Math.min(Q.x0,Q.x1)}))):tr=Ht=l.mean(Me.map(function(Q){return(Q.x0+Q.x1)/2}))-Vt/2;var lr=st._offset,yr=vt._offset;jt+=yr,tr+=lr,Ht+=lr-Vt,Ut+=yr-Ft;var xr,er;return tr+Vt<kt&&tr>=0?xr=tr:Ht+Vt<kt&&Ht>=0?xr=Ht:lr+Vt<kt?xr=lr:tr-Gt<Gt-Ht+Vt?xr=kt-Vt:xr=0,xr+=X,jt+Ft<St&&jt>=0?er=jt:Ut+Ft<St&&Ut>=0?er=Ut:yr+Ft<St?er=yr:jt-Xt<Xt-Ut+Ft?er=St-Ft:er=0,er+=X,Wt.attr("transform",v(xr-1,er-1)),Wt}var fe=_e.selectAll("g.hovertext").data(F,function(Q){return ne(Q)});return fe.enter().append("g").classed("hovertext",!0).each(function(){var Q=i.select(this);Q.append("rect").call(E.fill,E.addOpacity(ve,.8)),Q.append("text").classed("name",!0),Q.append("path").style("stroke-width","1px"),Q.append("text").classed("nums",!0).call(_.font,{weight:Ze,style:Te,variant:we,textcase:be,lineposition:ke,shadow:He,family:Ve,size:Xe})}),fe.exit().remove(),fe.each(function(Q){var Je=i.select(this).attr("transform",""),Ge=Q.color;Array.isArray(Ge)&&(Ge=Ge[Q.eventData[0].pointNumber]);var Qe=Q.bgcolor||Ge,it=E.combine(E.opacity(Qe)?Qe:E.defaultLine,ve),rt=E.combine(E.opacity(Ge)?Ge:E.defaultLine,ve),$e=Q.borderColor||E.contrast(it),je=G(Q,Et,te,z,lt,Je),ct=je[0],dt=je[1],xt=Je.select("text.nums").call(_.font,{family:Q.fontFamily||Ve,size:Q.fontSize||Xe,color:Q.fontColor||$e,weight:Q.fontWeight||Ze,style:Q.fontStyle||Te,variant:Q.fontVariant||we,textcase:Q.fontTextcase||be,lineposition:Q.fontLineposition||ke,shadow:Q.fontShadow||He}).text(ct).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,q),yt=Je.select("text.name"),Lt=0,wt=0;if(dt&&dt!==ct){yt.call(_.font,{family:Q.fontFamily||Ve,size:Q.fontSize||Xe,color:rt,weight:Q.fontWeight||Ze,style:Q.fontStyle||Te,variant:Q.fontVariant||we,textcase:Q.fontTextcase||be,lineposition:Q.fontLineposition||ke,shadow:Q.fontShadow||He}).text(dt).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,q);var At=j(q,yt.node());Lt=At.width+2*X,wt=At.height+2*X}else yt.remove(),Je.select("rect").remove();Je.select("path").style({fill:it,stroke:$e});var Ot=Q.xa._offset+(Q.x0+Q.x1)/2,zt=Q.ya._offset+(Q.y0+Q.y1)/2,Zt=Math.abs(Q.x1-Q.x0),Kt=Math.abs(Q.y1-Q.y0),cr=j(q,xt.node()),or=cr.width/z._invScaleX,nr=cr.height/z._invScaleY;Q.ty0=(Ct-cr.top)/z._invScaleY,Q.bx=or+2*X,Q.by=Math.max(nr+2*X,wt),Q.anchor="start",Q.txwidth=or,Q.tx2width=Lt,Q.offset=0;var mr=(or+V+X+Lt)*z._invScaleX,pr,Ar;if(ue)Q.pos=Ot,pr=zt+Kt/2+mr<=St,Ar=zt-Kt/2-mr>=0,(Q.idealAlign==="top"||!pr)&&Ar?(zt-=Kt/2,Q.anchor="end"):pr?(zt+=Kt/2,Q.anchor="start"):Q.anchor="middle",Q.crossPos=zt;else{if(Q.pos=zt,pr=Ot+Zt/2+mr<=kt,Ar=Ot-Zt/2-mr>=0,(Q.idealAlign==="left"||!pr)&&Ar)Ot-=Zt/2,Q.anchor="end";else if(pr)Ot+=Zt/2,Q.anchor="start";else{Q.anchor="middle";var en=mr/2,Lr=Ot+en-kt,Pr=Ot-en;Lr>0&&(Ot-=Lr),Pr<0&&(Ot+=-Pr)}Q.crossPos=Ot}xt.attr("text-anchor",Q.anchor),Lt&&yt.attr("text-anchor",Q.anchor),Je.attr("transform",v(Ot,zt)+(ue?d(m):""))}),{hoverLabels:fe,commonLabelBoundingBox:de}}function G(F,P,q,z,te,ue){var ve="",_e="";F.nameOverride!==void 0&&(F.name=F.nameOverride),F.name&&(F.trace._meta&&(F.name=l.templateString(F.name,F.trace._meta)),ve=ce(F.name,F.nameLength));var Re=q.charAt(0),Le=Re==="x"?"y":"x";F.zLabel!==void 0?(F.xLabel!==void 0&&(_e+="x: "+F.xLabel+"<br>"),F.yLabel!==void 0&&(_e+="y: "+F.yLabel+"<br>"),F.trace.type!=="choropleth"&&F.trace.type!=="choroplethmapbox"&&(_e+=(_e?"z: ":"")+F.zLabel)):P&&F[Re+"Label"]===te?_e=F[Le+"Label"]||"":F.xLabel===void 0?F.yLabel!==void 0&&F.trace.type!=="scattercarpet"&&(_e=F.yLabel):F.yLabel===void 0?_e=F.xLabel:_e="("+F.xLabel+", "+F.yLabel+")",(F.text||F.text===0)&&!Array.isArray(F.text)&&(_e+=(_e?"<br>":"")+F.text),F.extraText!==void 0&&(_e+=(_e?"<br>":"")+F.extraText),ue&&_e===""&&!F.hovertemplate&&(ve===""&&ue.remove(),_e=ve);var Ve=F.hovertemplate||!1;if(Ve){var Xe=F.hovertemplateLabels||F;F[Re+"Label"]!==te&&(Xe[Re+"other"]=Xe[Re+"Val"],Xe[Re+"otherLabel"]=Xe[Re+"Label"]),_e=l.hovertemplateString(Ve,Xe,z._d3locale,F.eventData[0]||{},F.trace._meta),_e=_e.replace(oe,function(Ze,Te){return ve=ce(Te,F.nameLength),""})}return[_e,ve]}function K(F,P,q,z){var te=P?"xa":"ya",ue=P?"ya":"xa",ve=0,_e=1,Re=F.size(),Le=new Array(Re),Ve=0,Xe=z.minX,Ze=z.maxX,Te=z.minY,we=z.maxY,be=function(Ie){return Ie*q._invScaleX},ke=function(Ie){return Ie*q._invScaleY};F.each(function(Ie){var Fe=Ie[te],We=Ie[ue],de=Fe._id.charAt(0)==="x",Me=Fe.range;Ve===0&&Me&&Me[0]>Me[1]!==de&&(_e=-1);var he=0,Ee=de?q.width:q.height;if(q.hovermode==="x"||q.hovermode==="y"){var Pe=ee(Ie,P),Ne=Ie.anchor,ht=Ne==="end"?-1:1,nt,Ye;if(Ne==="middle")nt=Ie.crossPos+(de?ke(Pe.y-Ie.by/2):be(Ie.bx/2+Ie.tx2width/2)),Ye=nt+(de?ke(Ie.by):be(Ie.bx));else if(de)nt=Ie.crossPos+ke(V+Pe.y)-ke(Ie.by/2-V),Ye=nt+ke(Ie.by);else{var Be=be(ht*V+Pe.x),ut=Be+be(ht*Ie.bx);nt=Ie.crossPos+Math.min(Be,ut),Ye=Ie.crossPos+Math.max(Be,ut)}de?Te!==void 0&&we!==void 0&&Math.min(Ye,we)-Math.max(nt,Te)>1&&(We.side==="left"?(he=We._mainLinePosition,Ee=q.width):Ee=We._mainLinePosition):Xe!==void 0&&Ze!==void 0&&Math.min(Ye,Ze)-Math.max(nt,Xe)>1&&(We.side==="top"?(he=We._mainLinePosition,Ee=q.height):Ee=We._mainLinePosition)}Le[Ve++]=[{datum:Ie,traceIndex:Ie.trace.index,dp:0,pos:Ie.pos,posref:Ie.posref,size:Ie.by*(de?D:1)/2,pmin:he,pmax:Ee}]}),Le.sort(function(Ie,Fe){return Ie[0].posref-Fe[0].posref||_e*(Fe[0].traceIndex-Ie[0].traceIndex)});var He,Ke,st,vt,pt,ft,lt;function Mt(Ie){var Fe=Ie[0],We=Ie[Ie.length-1];if(Ke=Fe.pmin-Fe.pos-Fe.dp+Fe.size,st=We.pos+We.dp+We.size-Fe.pmax,Ke>.01){for(pt=Ie.length-1;pt>=0;pt--)Ie[pt].dp+=Ke;He=!1}if(!(st<.01)){if(Ke<-.01){for(pt=Ie.length-1;pt>=0;pt--)Ie[pt].dp-=st;He=!1}if(He){var de=0;for(vt=0;vt<Ie.length;vt++)ft=Ie[vt],ft.pos+ft.dp+ft.size>Fe.pmax&&de++;for(vt=Ie.length-1;vt>=0&&!(de<=0);vt--)ft=Ie[vt],ft.pos>Fe.pmax-1&&(ft.del=!0,de--);for(vt=0;vt<Ie.length&&!(de<=0);vt++)if(ft=Ie[vt],ft.pos<Fe.pmin+1)for(ft.del=!0,de--,st=ft.size*2,pt=Ie.length-1;pt>=0;pt--)Ie[pt].dp-=st;for(vt=Ie.length-1;vt>=0&&!(de<=0);vt--)ft=Ie[vt],ft.pos+ft.dp+ft.size>Fe.pmax&&(ft.del=!0,de--)}}}for(;!He&&ve<=Re;){for(ve++,He=!0,vt=0;vt<Le.length-1;){var ot=Le[vt],Ct=Le[vt+1],kt=ot[ot.length-1],St=Ct[0];if(Ke=kt.pos+kt.dp+kt.size-St.pos-St.dp+St.size,Ke>.01&&kt.pmin===St.pmin&&kt.pmax===St.pmax){for(pt=Ct.length-1;pt>=0;pt--)Ct[pt].dp+=Ke;for(ot.push.apply(ot,Ct),Le.splice(vt+1,1),lt=0,pt=ot.length-1;pt>=0;pt--)lt+=ot[pt].dp;for(st=lt/ot.length,pt=ot.length-1;pt>=0;pt--)ot[pt].dp-=st;He=!1}else vt++}Le.forEach(Mt)}for(vt=Le.length-1;vt>=0;vt--){var Et=Le[vt];for(pt=Et.length-1;pt>=0;pt--){var Ue=Et[pt],De=Ue.datum;De.offset=Ue.dp,De.del=Ue.del}}}function ee(F,P){var q=0,z=F.offset;return P&&(z*=-N,q=F.offset*O),{x:q,y:z}}function ie(F){var P={start:1,end:-1,middle:0}[F.anchor],q=P*(V+X),z=q+P*(F.txwidth+X),te=F.anchor==="middle";return te&&(q-=F.tx2width/2,z+=F.txwidth/2+X),{alignShift:P,textShiftX:q,text2ShiftX:z}}function re(F,P,q,z){var te=function(ve){return ve*q},ue=function(ve){return ve*z};F.each(function(ve){var _e=i.select(this);if(ve.del)return _e.remove();var Re=_e.select("text.nums"),Le=ve.anchor,Ve=Le==="end"?-1:1,Xe=ie(ve),Ze=ee(ve,P),Te=Ze.x,we=Ze.y,be=Le==="middle";_e.select("path").attr("d",be?"M-"+te(ve.bx/2+ve.tx2width/2)+","+ue(we-ve.by/2)+"h"+te(ve.bx)+"v"+ue(ve.by)+"h-"+te(ve.bx)+"Z":"M0,0L"+te(Ve*V+Te)+","+ue(V+we)+"v"+ue(ve.by/2-V)+"h"+te(Ve*ve.bx)+"v-"+ue(ve.by)+"H"+te(Ve*V+Te)+"V"+ue(we-V)+"Z");var ke=Te+Xe.textShiftX,He=we+ve.ty0-ve.by/2+X,Ke=ve.textAlign||"auto";Ke!=="auto"&&(Ke==="left"&&Le!=="start"?(Re.attr("text-anchor","start"),ke=be?-ve.bx/2-ve.tx2width/2+X:-ve.bx-X):Ke==="right"&&Le!=="end"&&(Re.attr("text-anchor","end"),ke=be?ve.bx/2-ve.tx2width/2-X:ve.bx+X)),Re.call(o.positionText,te(ke),ue(He)),ve.tx2width&&(_e.select("text.name").call(o.positionText,te(Xe.text2ShiftX+Xe.alignShift*X+Te),ue(we+ve.ty0-ve.by/2+X)),_e.select("rect").call(_.setRect,te(Xe.text2ShiftX+(Xe.alignShift-1)*ve.tx2width/2+Te),ue(we-ve.by/2-1),te(ve.tx2width),ue(ve.by+2)))})}function se(F,P){var q=F.index,z=F.trace||{},te=F.cd[0],ue=F.cd[q]||{};function ve(Ze){return Ze||c(Ze)&&Ze===0}var _e=Array.isArray(q)?function(Ze,Te){var we=l.castOption(te,q,Ze);return ve(we)?we:l.extractOption({},z,"",Te)}:function(Ze,Te){return l.extractOption(ue,z,Ze,Te)};function Re(Ze,Te,we){var be=_e(Te,we);ve(be)&&(F[Ze]=be)}if(Re("hoverinfo","hi","hoverinfo"),Re("bgcolor","hbg","hoverlabel.bgcolor"),Re("borderColor","hbc","hoverlabel.bordercolor"),Re("fontFamily","htf","hoverlabel.font.family"),Re("fontSize","hts","hoverlabel.font.size"),Re("fontColor","htc","hoverlabel.font.color"),Re("fontWeight","htw","hoverlabel.font.weight"),Re("fontStyle","hty","hoverlabel.font.style"),Re("fontVariant","htv","hoverlabel.font.variant"),Re("nameLength","hnl","hoverlabel.namelength"),Re("textAlign","hta","hoverlabel.align"),F.posref=P==="y"||P==="closest"&&z.orientation==="h"?F.xa._offset+(F.x0+F.x1)/2:F.ya._offset+(F.y0+F.y1)/2,F.x0=l.constrain(F.x0,0,F.xa._length),F.x1=l.constrain(F.x1,0,F.xa._length),F.y0=l.constrain(F.y0,0,F.ya._length),F.y1=l.constrain(F.y1,0,F.ya._length),F.xLabelVal!==void 0&&(F.xLabel="xLabel"in F?F.xLabel:b.hoverLabelText(F.xa,F.xLabelVal,z.xhoverformat),F.xVal=F.xa.c2d(F.xLabelVal)),F.yLabelVal!==void 0&&(F.yLabel="yLabel"in F?F.yLabel:b.hoverLabelText(F.ya,F.yLabelVal,z.yhoverformat),F.yVal=F.ya.c2d(F.yLabelVal)),F.zLabelVal!==void 0&&F.zLabel===void 0&&(F.zLabel=String(F.zLabelVal)),!isNaN(F.xerr)&&!(F.xa.type==="log"&&F.xerr<=0)){var Le=b.tickText(F.xa,F.xa.c2l(F.xerr),"hover").text;F.xerrneg!==void 0?F.xLabel+=" +"+Le+" / -"+b.tickText(F.xa,F.xa.c2l(F.xerrneg),"hover").text:F.xLabel+="  "+Le,P==="x"&&(F.distance+=1)}if(!isNaN(F.yerr)&&!(F.ya.type==="log"&&F.yerr<=0)){var Ve=b.tickText(F.ya,F.ya.c2l(F.yerr),"hover").text;F.yerrneg!==void 0?F.yLabel+=" +"+Ve+" / -"+b.tickText(F.ya,F.ya.c2l(F.yerrneg),"hover").text:F.yLabel+="  "+Ve,P==="y"&&(F.distance+=1)}var Xe=F.hoverinfo||F.trace.hoverinfo;return Xe&&Xe!=="all"&&(Xe=Array.isArray(Xe)?Xe:Xe.split("+"),Xe.indexOf("x")===-1&&(F.xLabel=void 0),Xe.indexOf("y")===-1&&(F.yLabel=void 0),Xe.indexOf("z")===-1&&(F.zLabel=void 0),Xe.indexOf("text")===-1&&(F.text=void 0),Xe.indexOf("name")===-1&&(F.name=void 0)),F}function ge(F,P,q){var z=q.container,te=q.fullLayout,ue=te._size,ve=q.event,_e=!!P.hLinePoint,Re=!!P.vLinePoint,Le,Ve;if(z.selectAll(".spikeline").remove(),!!(Re||_e)){var Xe=E.combine(te.plot_bgcolor,te.paper_bgcolor);if(_e){var Ze=P.hLinePoint,Te,we;Le=Ze&&Ze.xa,Ve=Ze&&Ze.ya;var be=Ve.spikesnap;be==="cursor"?(Te=ve.pointerX,we=ve.pointerY):(Te=Le._offset+Ze.x,we=Ve._offset+Ze.y);var ke=a.readability(Ze.color,Xe)<1.5?E.contrast(Xe):Ze.color,He=Ve.spikemode,Ke=Ve.spikethickness,st=Ve.spikecolor||ke,vt=b.getPxPosition(F,Ve),pt,ft;if(He.indexOf("toaxis")!==-1||He.indexOf("across")!==-1){if(He.indexOf("toaxis")!==-1&&(pt=vt,ft=Te),He.indexOf("across")!==-1){var lt=Ve._counterDomainMin,Mt=Ve._counterDomainMax;Ve.anchor==="free"&&(lt=Math.min(lt,Ve.position),Mt=Math.max(Mt,Ve.position)),pt=ue.l+lt*ue.w,ft=ue.l+Mt*ue.w}z.insert("line",":first-child").attr({x1:pt,x2:ft,y1:we,y2:we,"stroke-width":Ke,stroke:st,"stroke-dasharray":_.dashStyle(Ve.spikedash,Ke)}).classed("spikeline",!0).classed("crisp",!0),z.insert("line",":first-child").attr({x1:pt,x2:ft,y1:we,y2:we,"stroke-width":Ke+2,stroke:Xe}).classed("spikeline",!0).classed("crisp",!0)}He.indexOf("marker")!==-1&&z.insert("circle",":first-child").attr({cx:vt+(Ve.side!=="right"?Ke:-Ke),cy:we,r:Ke,fill:st}).classed("spikeline",!0)}if(Re){var ot=P.vLinePoint,Ct,kt;Le=ot&&ot.xa,Ve=ot&&ot.ya;var St=Le.spikesnap;St==="cursor"?(Ct=ve.pointerX,kt=ve.pointerY):(Ct=Le._offset+ot.x,kt=Ve._offset+ot.y);var Et=a.readability(ot.color,Xe)<1.5?E.contrast(Xe):ot.color,Ue=Le.spikemode,De=Le.spikethickness,Ie=Le.spikecolor||Et,Fe=b.getPxPosition(F,Le),We,de;if(Ue.indexOf("toaxis")!==-1||Ue.indexOf("across")!==-1){if(Ue.indexOf("toaxis")!==-1&&(We=Fe,de=kt),Ue.indexOf("across")!==-1){var Me=Le._counterDomainMin,he=Le._counterDomainMax;Le.anchor==="free"&&(Me=Math.min(Me,Le.position),he=Math.max(he,Le.position)),We=ue.t+(1-he)*ue.h,de=ue.t+(1-Me)*ue.h}z.insert("line",":first-child").attr({x1:Ct,x2:Ct,y1:We,y2:de,"stroke-width":De,stroke:Ie,"stroke-dasharray":_.dashStyle(Le.spikedash,De)}).classed("spikeline",!0).classed("crisp",!0),z.insert("line",":first-child").attr({x1:Ct,x2:Ct,y1:We,y2:de,"stroke-width":De+2,stroke:Xe}).classed("spikeline",!0).classed("crisp",!0)}Ue.indexOf("marker")!==-1&&z.insert("circle",":first-child").attr({cx:Ct,cy:Fe-(Le.side!=="top"?De:-De),r:De,fill:Ie}).classed("spikeline",!0)}}}function xe(F,P,q){if(!q||q.length!==F._hoverdata.length)return!0;for(var z=q.length-1;z>=0;z--){var te=q[z],ue=F._hoverdata[z];if(te.curveNumber!==ue.curveNumber||String(te.pointNumber)!==String(ue.pointNumber)||String(te.pointNumbers)!==String(ue.pointNumbers))return!0}return!1}function Se(F,P){return!0}function ce(F,P){return o.plainText(F||"",{len:P,allowedTags:["br","sub","sup","b","i","em"]})}function pe(F,P){for(var q=P.charAt(0),z=[],te=[],ue=[],ve=0;ve<F.length;ve++){var _e=F[ve];w.traceIs(_e.trace,"bar-like")||w.traceIs(_e.trace,"box-violin")?ue.push(_e):_e.trace[q+"period"]?te.push(_e):z.push(_e)}return z.concat(te).concat(ue)}function ye(F,P,q){var z=P[F+"a"],te=P[F+"Val"],ue=P.cd[0];if(z.type==="category"||z.type==="multicategory")te=z._categoriesMap[te];else if(z.type==="date"){var ve=P.trace[F+"periodalignment"];if(ve){var _e=P.cd[P.index],Re=_e[F+"Start"];Re===void 0&&(Re=_e[F]);var Le=_e[F+"End"];Le===void 0&&(Le=_e[F]);var Ve=Le-Re;ve==="end"?te+=Ve:ve==="middle"&&(te+=Ve/2)}te=z.d2c(te)}return ue&&ue.t&&ue.t.posLetter===z._id&&(q.boxmode==="group"||q.violinmode==="group")&&(te+=ue.t.dPos),te}function U(F){return F.offsetTop+F.clientTop}function W(F){return F.offsetLeft+F.clientLeft}function j(F,P){var q=F._fullLayout,z=P.getBoundingClientRect(),te=z.left,ue=z.top,ve=te+z.width,_e=ue+z.height,Re=l.apply3DTransform(q._invTransform)(te,ue),Le=l.apply3DTransform(q._invTransform)(ve,_e),Ve=Re[0],Xe=Re[1],Ze=Le[0],Te=Le[1];return{x:Ve,y:Xe,width:Ze-Ve,height:Te-Xe,top:Math.min(Xe,Te),left:Math.min(Ve,Ze),right:Math.max(Ve,Ze),bottom:Math.max(Xe,Te)}}},6132:function(f,u,r){var i=r(3400),c=r(6308),a=r(624).isUnifiedHover;f.exports=function(s,v,d,p){p=p||{};var o=v.legend;function y(_){p.font[_]||(p.font[_]=o?v.legend.font[_]:v.font[_])}v&&a(v.hovermode)&&(p.font||(p.font={}),y("size"),y("family"),y("color"),y("weight"),y("style"),y("variant"),o?(p.bgcolor||(p.bgcolor=c.combine(v.legend.bgcolor,v.paper_bgcolor)),p.bordercolor||(p.bordercolor=v.legend.bordercolor)):p.bgcolor||(p.bgcolor=v.paper_bgcolor)),d("hoverlabel.bgcolor",p.bgcolor),d("hoverlabel.bordercolor",p.bordercolor),d("hoverlabel.namelength",p.namelength),i.coerceFont(d,"hoverlabel.font",p.font),d("hoverlabel.align",p.align)}},1008:function(f,u,r){var i=r(3400),c=r(5460);f.exports=function(l,s){function v(d,p){return s[d]!==void 0?s[d]:i.coerce(l,s,c,d,p)}return v("clickmode"),v("hoversubplots"),v("hovermode")}},3024:function(f,u,r){var i=r(3428),c=r(3400),a=r(6476),l=r(624),s=r(5460),v=r(3292);f.exports={moduleType:"component",name:"fx",constants:r(2456),schema:{layout:s},attributes:r(5756),layoutAttributes:s,supplyLayoutGlobalDefaults:r(1976),supplyDefaults:r(5448),supplyLayoutDefaults:r(8336),calc:r(5056),getDistanceFunction:l.getDistanceFunction,getClosest:l.getClosest,inbox:l.inbox,quadrature:l.quadrature,appendArrayPointValue:l.appendArrayPointValue,castHoverOption:p,castHoverinfo:o,hover:v.hover,unhover:a.unhover,loneHover:v.loneHover,loneUnhover:d,click:r(2376)};function d(y){var _=c.isD3Selection(y)?y:i.select(y);_.selectAll("g.hovertext").remove(),_.selectAll(".spikeline").remove()}function p(y,_,E){return c.castOption(y,_,"hoverlabel."+E)}function o(y,_,E){function M(b){return c.coerceHoverinfo({hoverinfo:b},{_module:y._module},_)}return c.castOption(y,E,"hoverinfo",M)}},5460:function(f,u,r){var i=r(2456),c=r(5376),a=c({editType:"none"});a.family.dflt=i.HOVERFONT,a.size.dflt=i.HOVERFONTSIZE,f.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,grouptitlefont:c({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},8336:function(f,u,r){var i=r(3400),c=r(5460),a=r(1008),l=r(6132);f.exports=function(v,d){function p(b,w){return i.coerce(v,d,c,b,w)}var o=a(v,d);o&&(p("hoverdistance"),p("spikedistance"));var y=p("dragmode");y==="select"&&p("selectdirection");var _=d._has("mapbox"),E=d._has("geo"),M=d._basePlotModules.length;d.dragmode==="zoom"&&((_||E)&&M===1||_&&E&&M===2)&&(d.dragmode="pan"),l(v,d,p),i.coerceFont(p,"hoverlabel.grouptitlefont",d.hoverlabel.font)}},1976:function(f,u,r){var i=r(3400),c=r(6132),a=r(5460);f.exports=function(s,v){function d(p,o){return i.coerce(s,v,a,p,o)}c(s,v,d)}},2704:function(f,u,r){var i=r(3400),c=r(3756).counter,a=r(6968).u,l=r(3816).idRegex,s=r(1780),v={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[c("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[l.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[l.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function d(E,M,b){var w=M[b+"axes"],A=Object.keys((E._splomAxes||{})[b]||{});if(Array.isArray(w))return w;if(A.length)return A}function p(E,M){var b=E.grid||{},w=d(M,b,"x"),A=d(M,b,"y");if(!E.grid&&!w&&!A)return;var R=Array.isArray(b.subplots)&&Array.isArray(b.subplots[0]),T=Array.isArray(w),C=Array.isArray(A),m=T&&w!==b.xaxes&&C&&A!==b.yaxes,L,D;R?(L=b.subplots.length,D=b.subplots[0].length):(C&&(L=A.length),T&&(D=w.length));var O=s.newContainer(M,"grid");function N(G,K){return i.coerce(b,O,v,G,K)}var V=N("rows",L),X=N("columns",D);if(!(V*X>1)){delete M.grid;return}if(!R&&!T&&!C){var k=N("pattern")==="independent";k&&(R=!0)}O._hasSubplotGrid=R;var Z=N("roworder"),B=Z==="top to bottom",J=R?.2:.1,ne=R?.3:.1,oe,Y;m&&M._splomGridDflt&&(oe=M._splomGridDflt.xside,Y=M._splomGridDflt.yside),O._domains={x:o("x",N,J,oe,X),y:o("y",N,ne,Y,V,B)}}function o(E,M,b,w,A,R){var T=M(E+"gap",b),C=M("domain."+E);M(E+"side",w);for(var m=new Array(A),L=C[0],D=(C[1]-L)/(A-T),O=D*(1-T),N=0;N<A;N++){var V=L+D*N;m[R?A-1-N:N]=[V,V+O]}return m}function y(E,M){var b=M.grid;if(!(!b||!b._domains)){var w=E.grid||{},A=M._subplots,R=b._hasSubplotGrid,T=b.rows,C=b.columns,m=b.pattern==="independent",L,D,O,N,V,X,k,Z=b._axisMap={};if(R){var B=w.subplots||[];X=b.subplots=new Array(T);var J=1;for(L=0;L<T;L++){var ne=X[L]=new Array(C),oe=B[L]||[];for(D=0;D<C;D++)if(m?(V=J===1?"xy":"x"+J+"y"+J,J++):V=oe[D],ne[D]="",A.cartesian.indexOf(V)!==-1){if(k=V.indexOf("y"),O=V.slice(0,k),N=V.slice(k),Z[O]!==void 0&&Z[O]!==D||Z[N]!==void 0&&Z[N]!==L)continue;ne[D]=V,Z[O]=D,Z[N]=L}}}else{var Y=d(M,w,"x"),G=d(M,w,"y");b.xaxes=_(Y,A.xaxis,C,Z,"x"),b.yaxes=_(G,A.yaxis,T,Z,"y")}var K=b._anchors={},ee=b.roworder==="top to bottom";for(var ie in Z){var re=ie.charAt(0),se=b[re+"side"],ge,xe,Se;if(se.length<8)K[ie]="free";else if(re==="x"){if(se.charAt(0)==="t"===ee?(ge=0,xe=1,Se=T):(ge=T-1,xe=-1,Se=-1),R){var ce=Z[ie];for(L=ge;L!==Se;L+=xe)if(V=X[L][ce],!!V&&(k=V.indexOf("y"),V.slice(0,k)===ie)){K[ie]=V.slice(k);break}}else for(L=ge;L!==Se;L+=xe)if(N=b.yaxes[L],A.cartesian.indexOf(ie+N)!==-1){K[ie]=N;break}}else if(se.charAt(0)==="l"?(ge=0,xe=1,Se=C):(ge=C-1,xe=-1,Se=-1),R){var pe=Z[ie];for(L=ge;L!==Se;L+=xe)if(V=X[pe][L],!!V&&(k=V.indexOf("y"),V.slice(k)===ie)){K[ie]=V.slice(0,k);break}}else for(L=ge;L!==Se;L+=xe)if(O=b.xaxes[L],A.cartesian.indexOf(O+ie)!==-1){K[ie]=O;break}}}}function _(E,M,b,w,A){var R=new Array(b),T;function C(m,L){M.indexOf(L)!==-1&&w[L]===void 0?(R[m]=L,w[L]=m):R[m]=""}if(Array.isArray(E))for(T=0;T<b;T++)C(T,E[T]);else for(C(0,A),T=1;T<b;T++)C(T,A+(T+1));return R}f.exports={moduleType:"component",name:"grid",schema:{layout:{grid:v}},layoutAttributes:v,sizeDefaults:p,contentDefaults:y}},5760:function(f,u,r){var i=r(3816),c=r(1780).templatedArray;r(6208),f.exports=c("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},3556:function(f,u,r){var i=r(8248),c=r(6896);f.exports=function(l,s,v,d){s=s||{};var p=v==="log"&&s.type==="linear",o=v==="linear"&&s.type==="log";if(p||o){for(var y=l._fullLayout.images,_=s._id.charAt(0),E,M,b=0;b<y.length;b++)if(E=y[b],M="images["+b+"].",E[_+"ref"]===s._id){var w=E[_],A=E["size"+_],R=null,T=null;if(p){R=c(w,s.range);var C=A/Math.pow(10,R)/2;T=2*Math.log(C+Math.sqrt(1+C*C))/Math.LN10}else R=Math.pow(10,w),T=R*(Math.pow(10,A/2)-Math.pow(10,-A/2));i(R)?i(T)||(T=null):(R=null,T=null),d(M+_,R),d(M+"size"+_,T)}}}},7404:function(f,u,r){var i=r(3400),c=r(4460),a=r(1272),l=r(5760),s="images";f.exports=function(p,o){var y={name:s,handleItemDefaults:v};a(p,o,y)};function v(d,p,o){function y(C,m){return i.coerce(d,p,l,C,m)}var _=y("source"),E=y("visible",!!_);if(!E)return p;y("layer"),y("xanchor"),y("yanchor"),y("sizex"),y("sizey"),y("sizing"),y("opacity");for(var M={_fullLayout:o},b=["x","y"],w=0;w<2;w++){var A=b[w],R=c.coerceRef(d,p,M,A,"paper",void 0);if(R!=="paper"){var T=c.getFromId(M,R);T._imgIndices.push(p._index)}c.coercePosition(p,M,y,R,A,0)}return p}},963:function(f,u,r){var i=r(3428),c=r(3616),a=r(4460),l=r(9811),s=r(9616);f.exports=function(d){var p=d._fullLayout,o=[],y={},_=[],E,M;for(M=0;M<p.images.length;M++){var b=p.images[M];if(b.visible)if(b.layer==="below"&&b.xref!=="paper"&&b.yref!=="paper"){E=l.ref2id(b.xref)+l.ref2id(b.yref);var w=p._plots[E];if(!w){_.push(b);continue}w.mainplot&&(E=w.mainplot.id),y[E]||(y[E]=[]),y[E].push(b)}else b.layer==="above"?o.push(b):_.push(b)}var A={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function R(N){var V=i.select(this);if(this._imgSrc!==N.source)if(V.attr("xmlns",s.svg),N.source&&N.source.slice(0,5)==="data:")V.attr("xlink:href",N.source),this._imgSrc=N.source;else{var X=new Promise((function(k){var Z=new Image;this.img=Z,Z.setAttribute("crossOrigin","anonymous"),Z.onerror=B,Z.onload=function(){var J=document.createElement("canvas");J.width=this.width,J.height=this.height;var ne=J.getContext("2d",{willReadFrequently:!0});ne.drawImage(this,0,0);var oe=J.toDataURL("image/png");V.attr("xlink:href",oe),k()},V.on("error",B),Z.src=N.source,this._imgSrc=N.source;function B(){V.remove(),k()}}).bind(this));d._promises.push(X)}}function T(N){var V=i.select(this),X=a.getFromId(d,N.xref),k=a.getFromId(d,N.yref),Z=a.getRefType(N.xref)==="domain",B=a.getRefType(N.yref)==="domain",J=p._size,ne,oe;X!==void 0?ne=typeof N.xref=="string"&&Z?X._length*N.sizex:Math.abs(X.l2p(N.sizex)-X.l2p(0)):ne=N.sizex*J.w,k!==void 0?oe=typeof N.yref=="string"&&B?k._length*N.sizey:Math.abs(k.l2p(N.sizey)-k.l2p(0)):oe=N.sizey*J.h;var Y=ne*A.x[N.xanchor].offset,G=oe*A.y[N.yanchor].offset,K=A.x[N.xanchor].sizing+A.y[N.yanchor].sizing,ee,ie;switch(X!==void 0?ee=typeof N.xref=="string"&&Z?X._length*N.x+X._offset:X.r2p(N.x)+X._offset:ee=N.x*J.w+J.l,ee+=Y,k!==void 0?ie=typeof N.yref=="string"&&B?k._length*(1-N.y)+k._offset:k.r2p(N.y)+k._offset:ie=J.h-N.y*J.h+J.t,ie+=G,N.sizing){case"fill":K+=" slice";break;case"stretch":K="none";break}V.attr({x:ee,y:ie,width:ne,height:oe,preserveAspectRatio:K,opacity:N.opacity});var re=X&&a.getRefType(N.xref)!=="domain"?X._id:"",se=k&&a.getRefType(N.yref)!=="domain"?k._id:"",ge=re+se;c.setClipUrl(V,ge?"clip"+p._uid+ge:null,d)}var C=p._imageLowerLayer.selectAll("image").data(_),m=p._imageUpperLayer.selectAll("image").data(o);C.enter().append("image"),m.enter().append("image"),C.exit().remove(),m.exit().remove(),C.each(function(N){R.bind(this)(N),T.bind(this)(N)}),m.each(function(N){R.bind(this)(N),T.bind(this)(N)});var L=Object.keys(p._plots);for(M=0;M<L.length;M++){E=L[M];var D=p._plots[E];if(D.imagelayer){var O=D.imagelayer.selectAll("image").data(y[E]||[]);O.enter().append("image"),O.exit().remove(),O.each(function(N){R.bind(this)(N),T.bind(this)(N)})}}}},7402:function(f,u,r){f.exports={moduleType:"component",name:"images",layoutAttributes:r(5760),supplyLayoutDefaults:r(7404),includeBasePlot:r(6632)("images"),draw:r(963),convertCoords:r(3556)}},3800:function(f,u,r){var i=r(5376),c=r(2548);f.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:i({editType:"legend"}),grouptitlefont:i({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:i({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},5196:function(f){f.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},7864:function(f,u,r){var i=r(4040),c=r(3400),a=r(1780),l=r(5464),s=r(3800),v=r(4859),d=r(2451);function p(o,y,_,E){var M=y[o]||{},b=a.newContainer(_,o);function w(Se,ce){return c.coerce(M,b,s,Se,ce)}var A=c.coerceFont(w,"font",_.font);w("bgcolor",_.paper_bgcolor),w("bordercolor");var R=w("visible");if(R){for(var T,C=function(Se,ce){var pe=T._input,ye=T;return c.coerce(pe,ye,l,Se,ce)},m=_.font||{},L=c.coerceFont(w,"grouptitlefont",m,{overrideDflt:{size:Math.round(m.size*1.1)}}),D=0,O=!1,N="normal",V=(_.shapes||[]).filter(function(Se){return Se.showlegend}),X=E.concat(V).filter(function(Se){return o===(Se.legend||"legend")}),k=0;k<X.length;k++)if(T=X[k],!!T.visible){var Z=T._isShape;(T.showlegend||T._dfltShowLegend&&!(T._module&&T._module.attributes&&T._module.attributes.showlegend&&T._module.attributes.showlegend.dflt===!1))&&(D++,T.showlegend&&(O=!0,(!Z&&i.traceIs(T,"pie-like")||T._input.showlegend===!0)&&D++),c.coerceFont(C,"legendgrouptitle.font",L)),(!Z&&i.traceIs(T,"bar")&&_.barmode==="stack"||["tonextx","tonexty"].indexOf(T.fill)!==-1)&&(N=d.isGrouped({traceorder:N})?"grouped+reversed":"reversed"),T.legendgroup!==void 0&&T.legendgroup!==""&&(N=d.isReversed({traceorder:N})?"reversed+grouped":"grouped")}var B=c.coerce(y,_,v,"showlegend",O&&D>(o==="legend"?1:0));if(B===!1&&(_[o]=void 0),!(B===!1&&!M.uirevision)&&(w("uirevision",_.uirevision),B!==!1)){w("borderwidth");var J=w("orientation"),ne=w("yref"),oe=w("xref"),Y=J==="h",G=ne==="paper",K=oe==="paper",ee,ie,re,se="left";Y?(ee=0,i.getComponentMethod("rangeslider","isVisible")(y.xaxis)?G?(ie=1.1,re="bottom"):(ie=1,re="top"):G?(ie=-.1,re="top"):(ie=0,re="bottom")):(ie=1,re="auto",K?ee=1.02:(ee=1,se="right")),c.coerce(M,b,{x:{valType:"number",editType:"legend",min:K?-2:0,max:K?3:1,dflt:ee}},"x"),c.coerce(M,b,{y:{valType:"number",editType:"legend",min:G?-2:0,max:G?3:1,dflt:ie}},"y"),w("traceorder",N),d.isGrouped(_[o])&&w("tracegroupgap"),w("entrywidth"),w("entrywidthmode"),w("indentation"),w("itemsizing"),w("itemwidth"),w("itemclick"),w("itemdoubleclick"),w("groupclick"),w("xanchor",se),w("yanchor",re),w("valign"),c.noneOrAll(M,b,["x","y"]);var ge=w("title.text");if(ge){w("title.side",Y?"left":"top");var xe=c.extendFlat({},A,{size:c.bigFont(A.size)});c.coerceFont(w,"title.font",xe)}}}}f.exports=function(y,_,E){var M,b=E.slice(),w=_.shapes;if(w)for(M=0;M<w.length;M++){var A=w[M];if(A.showlegend){var R={_input:A._input,visible:A.visible,showlegend:A.showlegend,legend:A.legend};b.push(R)}}var T=["legend"];for(M=0;M<b.length;M++)c.pushUnique(T,b[M].legend);for(_._legends=[],M=0;M<T.length;M++){var C=T[M];p(C,y,_,b),_[C]&&_[C].visible&&(_[C]._id=C),_._legends.push(C)}}},1140:function(f,u,r){var i=r(3428),c=r(3400),a=r(7316),l=r(4040),s=r(5924),v=r(6476),d=r(3616),p=r(6308),o=r(2736),y=r(3048),_=r(5196),E=r(4284),M=E.LINE_SPACING,b=E.FROM_TL,w=E.FROM_BR,A=r(3076),R=r(2012),T=r(2451),C=1,m=/^legend[0-9]*$/;f.exports=function(ie,re){if(re)D(ie,re);else{var se=ie._fullLayout,ge=se._legends,xe=se._infolayer.selectAll('[class^="legend"]');xe.each(function(){var ye=i.select(this),U=ye.attr("class"),W=U.split(" ")[0];W.match(m)&&ge.indexOf(W)===-1&&ye.remove()});for(var Se=0;Se<ge.length;Se++){var ce=ge[Se],pe=ie._fullLayout[ce];D(ie,pe)}}};function L(ee,ie,re){if(!(ie.title.side!=="top center"&&ie.title.side!=="top right")){var se=ie.title.font,ge=se.size*M,xe=0,Se=ee.node(),ce=d.bBox(Se).width;ie.title.side==="top center"?xe=.5*(ie._width-2*re-2*_.titlePad-ce):ie.title.side==="top right"&&(xe=ie._width-2*re-2*_.titlePad-ce),o.positionText(ee,re+_.titlePad+xe,re+ge)}}function D(ee,ie){var re=ie||{},se=ee._fullLayout,ge=K(re),xe,Se,ce=re._inHover;if(ce?(Se=re.layer,xe="hover"):(Se=se._infolayer,xe=ge),!!Se){xe+=se._uid,ee._legendMouseDownTime||(ee._legendMouseDownTime=0);var pe;if(ce){if(!re.entries)return;pe=A(re.entries,re)}else{for(var ye=(ee.calcdata||[]).slice(),U=se.shapes,W=0;W<U.length;W++){var j=U[W];if(j.showlegend){var F={_isShape:!0,_fullInput:j,index:j._index,name:j.name||j.label.text||"shape "+j._index,legend:j.legend,legendgroup:j.legendgroup,legendgrouptitle:j.legendgrouptitle,legendrank:j.legendrank,legendwidth:j.legendwidth,showlegend:j.showlegend,visible:j.visible,opacity:j.opacity,mode:j.type==="line"?"lines":"markers",line:j.line,marker:{line:j.line,color:j.fillcolor,size:12,symbol:j.type==="rect"?"square":j.type==="circle"?"circle":"hexagon2"}};ye.push([{trace:F}])}}pe=se.showlegend&&A(ye,re,se._legends.length>1)}var P=se.hiddenlabels||[];if(!ce&&(!se.showlegend||!pe.length))return Se.selectAll("."+ge).remove(),se._topdefs.select("#"+xe).remove(),a.autoMargin(ee,ge);var q=c.ensureSingle(Se,"g",ge,function(Xe){ce||Xe.attr("pointer-events","all")}),z=c.ensureSingleById(se._topdefs,"clipPath",xe,function(Xe){Xe.append("rect")}),te=c.ensureSingle(q,"rect","bg",function(Xe){Xe.attr("shape-rendering","crispEdges")});te.call(p.stroke,re.bordercolor).call(p.fill,re.bgcolor).style("stroke-width",re.borderwidth+"px");var ue=c.ensureSingle(q,"g","scrollbox"),ve=re.title;re._titleWidth=0,re._titleHeight=0;var _e;ve.text?(_e=c.ensureSingle(ue,"text",ge+"titletext"),_e.attr("text-anchor","start").call(d.font,ve.font).text(ve.text),Z(_e,ue,ee,re,C)):ue.selectAll("."+ge+"titletext").remove();var Re=c.ensureSingle(q,"rect","scrollbar",function(Xe){Xe.attr(_.scrollBarEnterAttrs).call(p.fill,_.scrollBarColor)}),Le=ue.selectAll("g.groups").data(pe);Le.enter().append("g").attr("class","groups"),Le.exit().remove();var Ve=Le.selectAll("g.traces").data(c.identity);Ve.enter().append("g").attr("class","traces"),Ve.exit().remove(),Ve.style("opacity",function(Xe){var Ze=Xe[0].trace;return l.traceIs(Ze,"pie-like")?P.indexOf(Xe[0].label)!==-1?.5:1:Ze.visible==="legendonly"?.5:1}).each(function(){i.select(this).call(V,ee,re)}).call(R,ee,re).each(function(){ce||i.select(this).call(k,ee,ge)}),c.syncOrAsync([a.previousPromises,function(){return ne(ee,Le,Ve,re)},function(){var Xe=se._size,Ze=re.borderwidth,Te=re.xref==="paper",we=re.yref==="paper";if(ve.text&&L(_e,re,Ze),!ce){var be,ke;Te?be=Xe.l+Xe.w*re.x-b[Y(re)]*re._width:be=se.width*re.x-b[Y(re)]*re._width,we?ke=Xe.t+Xe.h*(1-re.y)-b[G(re)]*re._effHeight:ke=se.height*(1-re.y)-b[G(re)]*re._effHeight;var He=oe(ee,ge,be,ke);if(He)return;if(se.margin.autoexpand){var Ke=be,st=ke;be=Te?c.constrain(be,0,se.width-re._width):Ke,ke=we?c.constrain(ke,0,se.height-re._effHeight):st,be!==Ke&&c.log("Constrain "+ge+".x to make legend fit inside graph"),ke!==st&&c.log("Constrain "+ge+".y to make legend fit inside graph")}d.setTranslate(q,be,ke)}if(Re.on(".drag",null),q.on("wheel",null),ce||re._height<=re._maxHeight||ee._context.staticPlot){var vt=re._effHeight;ce&&(vt=re._height),te.attr({width:re._width-Ze,height:vt-Ze,x:Ze/2,y:Ze/2}),d.setTranslate(ue,0,0),z.select("rect").attr({width:re._width-2*Ze,height:vt-2*Ze,x:Ze,y:Ze}),d.setClipUrl(ue,xe,ee),d.setRect(Re,0,0,0,0),delete re._scrollY}else{var pt=Math.max(_.scrollBarMinHeight,re._effHeight*re._effHeight/re._height),ft=re._effHeight-pt-2*_.scrollBarMargin,lt=re._height-re._effHeight,Mt=ft/lt,ot=Math.min(re._scrollY||0,lt);te.attr({width:re._width-2*Ze+_.scrollBarWidth+_.scrollBarMargin,height:re._effHeight-Ze,x:Ze/2,y:Ze/2}),z.select("rect").attr({width:re._width-2*Ze+_.scrollBarWidth+_.scrollBarMargin,height:re._effHeight-2*Ze,x:Ze,y:Ze+ot}),d.setClipUrl(ue,xe,ee),Fe(ot,pt,Mt),q.on("wheel",function(){ot=c.constrain(re._scrollY+i.event.deltaY/ft*lt,0,lt),Fe(ot,pt,Mt),ot!==0&&ot!==lt&&i.event.preventDefault()});var Ct,kt,St,Et=function(Ee,Pe,Ne){var ht=(Ne-Pe)/Mt+Ee;return c.constrain(ht,0,lt)},Ue=function(Ee,Pe,Ne){var ht=(Pe-Ne)/Mt+Ee;return c.constrain(ht,0,lt)},De=i.behavior.drag().on("dragstart",function(){var Ee=i.event.sourceEvent;Ee.type==="touchstart"?Ct=Ee.changedTouches[0].clientY:Ct=Ee.clientY,St=ot}).on("drag",function(){var Ee=i.event.sourceEvent;Ee.buttons===2||Ee.ctrlKey||(Ee.type==="touchmove"?kt=Ee.changedTouches[0].clientY:kt=Ee.clientY,ot=Et(St,Ct,kt),Fe(ot,pt,Mt))});Re.call(De);var Ie=i.behavior.drag().on("dragstart",function(){var Ee=i.event.sourceEvent;Ee.type==="touchstart"&&(Ct=Ee.changedTouches[0].clientY,St=ot)}).on("drag",function(){var Ee=i.event.sourceEvent;Ee.type==="touchmove"&&(kt=Ee.changedTouches[0].clientY,ot=Ue(St,Ct,kt),Fe(ot,pt,Mt))});ue.call(Ie)}function Fe(Ee,Pe,Ne){re._scrollY=ee._fullLayout[ge]._scrollY=Ee,d.setTranslate(ue,0,-Ee),d.setRect(Re,re._width,_.scrollBarMargin+Ee*Ne,_.scrollBarWidth,Pe),z.select("rect").attr("y",Ze+Ee)}if(ee._context.edits.legendPosition){var We,de,Me,he;q.classed("cursor-move",!0),v.init({element:q.node(),gd:ee,prepFn:function(Ee){if(Ee.target!==Re.node()){var Pe=d.getTranslate(q);Me=Pe.x,he=Pe.y}},moveFn:function(Ee,Pe){if(Me!==void 0&&he!==void 0){var Ne=Me+Ee,ht=he+Pe;d.setTranslate(q,Ne,ht),We=v.align(Ne,re._width,Xe.l,Xe.l+Xe.w,re.xanchor),de=v.align(ht+re._height,-re._height,Xe.t+Xe.h,Xe.t,re.yanchor)}},doneFn:function(){if(We!==void 0&&de!==void 0){var Ee={};Ee[ge+".x"]=We,Ee[ge+".y"]=de,l.call("_guiRelayout",ee,Ee)}},clickFn:function(Ee,Pe){var Ne=Se.selectAll("g.traces").filter(function(){var ht=this.getBoundingClientRect();return Pe.clientX>=ht.left&&Pe.clientX<=ht.right&&Pe.clientY>=ht.top&&Pe.clientY<=ht.bottom});Ne.size()>0&&N(ee,q,Ne,Ee,Pe)}})}}],ee)}}function O(ee,ie,re){var se=ee[0],ge=se.width,xe=ie.entrywidthmode,Se=se.trace.legendwidth||ie.entrywidth;return xe==="fraction"?ie._maxWidth*Se:re+(Se||ge)}function N(ee,ie,re,se,ge){var xe=re.data()[0][0].trace,Se={event:ge,node:re.node(),curveNumber:xe.index,expandedIndex:xe._expandedIndex,data:ee.data,layout:ee.layout,frames:ee._transitionData._frames,config:ee._context,fullData:ee._fullData,fullLayout:ee._fullLayout};xe._group&&(Se.group=xe._group),l.traceIs(xe,"pie-like")&&(Se.label=re.datum()[0].label);var ce=s.triggerHandler(ee,"plotly_legendclick",Se);if(se===1){if(ce===!1)return;ie._clickTimeout=setTimeout(function(){ee._fullLayout&&y(re,ee,se)},ee._context.doubleClickDelay)}else if(se===2){ie._clickTimeout&&clearTimeout(ie._clickTimeout),ee._legendMouseDownTime=0;var pe=s.triggerHandler(ee,"plotly_legenddoubleclick",Se);pe!==!1&&ce!==!1&&y(re,ee,se)}}function V(ee,ie,re){var se=K(re),ge=ee.data()[0][0],xe=ge.trace,Se=l.traceIs(xe,"pie-like"),ce=!re._inHover&&ie._context.edits.legendText&&!Se,pe=re._maxNameLength,ye,U;ge.groupTitle?(ye=ge.groupTitle.text,U=ge.groupTitle.font):(U=re.font,re.entries?ye=ge.text:(ye=Se?ge.label:xe.name,xe._meta&&(ye=c.templateString(ye,xe._meta))));var W=c.ensureSingle(ee,"text",se+"text");W.attr("text-anchor","start").call(d.font,U).text(ce?X(ye,pe):ye);var j=re.indentation+re.itemwidth+_.itemGap*2;o.positionText(W,j,0),ce?W.call(o.makeEditable,{gd:ie,text:ye}).call(Z,ee,ie,re).on("edit",function(F){this.text(X(F,pe)).call(Z,ee,ie,re);var P=ge.trace._fullInput||{},q={};if(l.hasTransform(P,"groupby")){var z=l.getTransformIndices(P,"groupby"),te=z[z.length-1],ue=c.keyedContainer(P,"transforms["+te+"].styles","target","value.name");ue.set(ge.trace._group,F),q=ue.constructUpdate()}else q.name=F;return P._isShape?l.call("_guiRelayout",ie,"shapes["+xe.index+"].name",q.name):l.call("_guiRestyle",ie,q,xe.index)}):Z(W,ee,ie,re)}function X(ee,ie){var re=Math.max(4,ie);if(ee&&ee.trim().length>=re/2)return ee;ee=ee||"";for(var se=re-ee.length;se>0;se--)ee+=" ";return ee}function k(ee,ie,re){var se=ie._context.doubleClickDelay,ge,xe=1,Se=c.ensureSingle(ee,"rect",re+"toggle",function(ce){ie._context.staticPlot||ce.style("cursor","pointer").attr("pointer-events","all"),ce.call(p.fill,"rgba(0,0,0,0)")});ie._context.staticPlot||(Se.on("mousedown",function(){ge=new Date().getTime(),ge-ie._legendMouseDownTime<se?xe+=1:(xe=1,ie._legendMouseDownTime=ge)}),Se.on("mouseup",function(){if(!(ie._dragged||ie._editing)){var ce=ie._fullLayout[re];new Date().getTime()-ie._legendMouseDownTime>se&&(xe=Math.max(xe-1,1)),N(ie,ce,ee,xe,i.event)}}))}function Z(ee,ie,re,se,ge){se._inHover&&ee.attr("data-notex",!0),o.convertToTspans(ee,re,function(){B(ie,re,se,ge)})}function B(ee,ie,re,se){var ge=ee.data()[0][0];if(!re._inHover&&ge&&!ge.trace.showlegend){ee.remove();return}var xe=ee.select("g[class*=math-group]"),Se=xe.node(),ce=K(re);re||(re=ie._fullLayout[ce]);var pe=re.borderwidth,ye;se===C?ye=re.title.font:ge.groupTitle?ye=ge.groupTitle.font:ye=re.font;var U=ye.size*M,W,j;if(Se){var F=d.bBox(Se);W=F.height,j=F.width,se===C?d.setTranslate(xe,pe,pe+W*.75):d.setTranslate(xe,0,W*.25)}else{var P="."+ce+(se===C?"title":"")+"text",q=ee.select(P),z=o.lineCount(q),te=q.node();if(W=U*z,j=te?d.bBox(te).width:0,se===C)re.title.side==="left"&&(j+=_.itemGap*2),o.positionText(q,pe+_.titlePad,pe+U);else{var ue=_.itemGap*2+re.indentation+re.itemwidth;ge.groupTitle&&(ue=_.itemGap,j-=re.indentation+re.itemwidth),o.positionText(q,ue,-U*((z-1)/2-.3))}}se===C?(re._titleWidth=j,re._titleHeight=W):(ge.lineHeight=U,ge.height=Math.max(W,16)+3,ge.width=j)}function J(ee){var ie=0,re=0,se=ee.title.side;return se&&(se.indexOf("left")!==-1&&(ie=ee._titleWidth),se.indexOf("top")!==-1&&(re=ee._titleHeight)),[ie,re]}function ne(ee,ie,re,se){var ge=ee._fullLayout,xe=K(se);se||(se=ge[xe]);var Se=ge._size,ce=T.isVertical(se),pe=T.isGrouped(se),ye=se.entrywidthmode==="fraction",U=se.borderwidth,W=2*U,j=_.itemGap,F=se.indentation+se.itemwidth+j*2,P=2*(U+j),q=G(se),z=se.y<0||se.y===0&&q==="top",te=se.y>1||se.y===1&&q==="bottom",ue=se.tracegroupgap,ve={};se._maxHeight=Math.max(z||te?ge.height/2:Se.h,30);var _e=0;se._width=0,se._height=0;var Re=J(se);if(ce)re.each(function(St){var Et=St[0].height;d.setTranslate(this,U+Re[0],U+Re[1]+se._height+Et/2+j),se._height+=Et,se._width=Math.max(se._width,St[0].width)}),_e=F+se._width,se._width+=j+F+W,se._height+=P,pe&&(ie.each(function(St,Et){d.setTranslate(this,0,Et*se.tracegroupgap)}),se._height+=(se._lgroupsLength-1)*se.tracegroupgap);else{var Le=Y(se),Ve=se.x<0||se.x===0&&Le==="right",Xe=se.x>1||se.x===1&&Le==="left",Ze=te||z,Te=ge.width/2;se._maxWidth=Math.max(Ve?Ze&&Le==="left"?Se.l+Se.w:Te:Xe?Ze&&Le==="right"?Se.r+Se.w:Te:Se.w,2*F);var we=0,be=0;re.each(function(St){var Et=O(St,se,F);we=Math.max(we,Et),be+=Et}),_e=null;var ke=0;if(pe){var He=0,Ke=0,st=0;ie.each(function(){var St=0,Et=0;i.select(this).selectAll("g.traces").each(function(De){var Ie=O(De,se,F),Fe=De[0].height;d.setTranslate(this,Re[0],Re[1]+U+j+Fe/2+Et),Et+=Fe,St=Math.max(St,Ie),ve[De[0].trace.legendgroup]=St});var Ue=St+j;Ke>0&&Ue+U+Ke>se._maxWidth?(ke=Math.max(ke,Ke),Ke=0,st+=He+ue,He=Et):He=Math.max(He,Et),d.setTranslate(this,Ke,st),Ke+=Ue}),se._width=Math.max(ke,Ke)+U,se._height=st+He+P}else{var vt=re.size(),pt=be+W+(vt-1)*j<se._maxWidth,ft=0,lt=0,Mt=0,ot=0;re.each(function(St){var Et=St[0].height,Ue=O(St,se,F),De=pt?Ue:we;ye||(De+=j),De+U+lt-j>=se._maxWidth&&(ke=Math.max(ke,ot),lt=0,Mt+=ft,se._height+=ft,ft=0),d.setTranslate(this,Re[0]+U+lt,Re[1]+U+Mt+Et/2+j),ot=lt+Ue+j,lt+=De,ft=Math.max(ft,Et)}),pt?(se._width=lt+W,se._height=ft+P):(se._width=Math.max(ke,ot)+W,se._height+=ft+P)}}se._width=Math.ceil(Math.max(se._width+Re[0],se._titleWidth+2*(U+_.titlePad))),se._height=Math.ceil(Math.max(se._height+Re[1],se._titleHeight+2*(U+_.itemGap))),se._effHeight=Math.min(se._height,se._maxHeight);var Ct=ee._context.edits,kt=Ct.legendText||Ct.legendPosition;re.each(function(St){var Et=i.select(this).select("."+xe+"toggle"),Ue=St[0].height,De=St[0].trace.legendgroup,Ie=O(St,se,F);pe&&De!==""&&(Ie=ve[De]);var Fe=kt?F:_e||Ie;!ce&&!ye&&(Fe+=j/2),d.setRect(Et,0,-Ue/2,Fe,Ue)})}function oe(ee,ie,re,se){var ge=ee._fullLayout,xe=ge[ie],Se=Y(xe),ce=G(xe),pe=xe.xref==="paper",ye=xe.yref==="paper";ee._fullLayout._reservedMargin[ie]={};var U=xe.y<.5?"b":"t",W=xe.x<.5?"l":"r",j={r:ge.width-re,l:re+xe._width,b:ge.height-se,t:se+xe._effHeight};if(pe&&ye)return a.autoMargin(ee,ie,{x:xe.x,y:xe.y,l:xe._width*b[Se],r:xe._width*w[Se],b:xe._effHeight*w[ce],t:xe._effHeight*b[ce]});pe?ee._fullLayout._reservedMargin[ie][U]=j[U]:ye||xe.orientation==="v"?ee._fullLayout._reservedMargin[ie][W]=j[W]:ee._fullLayout._reservedMargin[ie][U]=j[U]}function Y(ee){return c.isRightAnchor(ee)?"right":c.isCenterAnchor(ee)?"center":"left"}function G(ee){return c.isBottomAnchor(ee)?"bottom":c.isMiddleAnchor(ee)?"middle":"top"}function K(ee){return ee._id||"legend"}},3076:function(f,u,r){var i=r(4040),c=r(2451);f.exports=function(l,s,v){var d=s._inHover,p=c.isGrouped(s),o=c.isReversed(s),y={},_=[],E=!1,M={},b=0,w=0,A,R;function T(ee,ie,re){if(s.visible!==!1&&!(v&&ee!==s._id))if(ie===""||!c.isGrouped(s)){var se="~~i"+b;_.push(se),y[se]=[re],b++}else _.indexOf(ie)===-1?(_.push(ie),E=!0,y[ie]=[re]):y[ie].push(re)}for(A=0;A<l.length;A++){var C=l[A],m=C[0],L=m.trace,D=L.legend,O=L.legendgroup;if(!(!d&&(!L.visible||!L.showlegend)))if(i.traceIs(L,"pie-like"))for(M[O]||(M[O]={}),R=0;R<C.length;R++){var N=C[R].label;M[O][N]||(T(D,O,{label:N,color:C[R].color,i:C[R].i,trace:L,pts:C[R].pts}),M[O][N]=!0,w=Math.max(w,(N||"").length))}else T(D,O,m),w=Math.max(w,(L.name||"").length)}if(!_.length)return[];var V=!E||!p,X=[];for(A=0;A<_.length;A++){var k=y[_[A]];V?X.push(k[0]):X.push(k)}for(V&&(X=[X]),A=0;A<X.length;A++){var Z=1/0;for(R=0;R<X[A].length;R++){var B=X[A][R].trace.legendrank;Z>B&&(Z=B)}X[A][0]._groupMinRank=Z,X[A][0]._preGroupSort=A}var J=function(ee,ie){return ee[0]._groupMinRank-ie[0]._groupMinRank||ee[0]._preGroupSort-ie[0]._preGroupSort},ne=function(ee,ie){return ee.trace.legendrank-ie.trace.legendrank||ee._preSort-ie._preSort};for(X.forEach(function(ee,ie){ee[0]._preGroupSort=ie}),X.sort(J),A=0;A<X.length;A++){X[A].forEach(function(ee,ie){ee._preSort=ie}),X[A].sort(ne);var oe=X[A][0].trace,Y=null;for(R=0;R<X[A].length;R++){var G=X[A][R].trace.legendgrouptitle;if(G&&G.text){Y=G,d&&(G.font=s._groupTitleFont);break}}if(o&&X[A].reverse(),Y){var K=!1;for(R=0;R<X[A].length;R++)if(i.traceIs(X[A][R].trace,"pie-like")){K=!0;break}X[A].unshift({i:-1,groupTitle:Y,noClick:K,trace:{showlegend:oe.showlegend,legendgroup:oe.legendgroup,visible:s.groupclick==="toggleitem"?!0:oe.visible}})}for(R=0;R<X[A].length;R++)X[A][R]=[X[A][R]]}return s._lgroupsLength=X.length,s._maxNameLength=w,X}},3048:function(f,u,r){var i=r(4040),c=r(3400),a=c.pushUnique,l=!0;f.exports=function(v,d,p){var o=d._fullLayout;if(d._dragged||d._editing)return;var y=o.legend.itemclick,_=o.legend.itemdoubleclick,E=o.legend.groupclick;p===1&&y==="toggle"&&_==="toggleothers"&&l&&d.data&&d._context.showTips&&c.notifier(c._(d,"Double-click on legend to isolate one trace"),"long"),l=!1;var M;if(p===1?M=y:p===2&&(M=_),!M)return;var b=E==="togglegroup",w=o.hiddenlabels?o.hiddenlabels.slice():[],A=v.data()[0][0];if(A.groupTitle&&A.noClick)return;var R=d._fullData,T=(o.shapes||[]).filter(function(Te){return Te.showlegend}),C=R.concat(T),m=A.trace;m._isShape&&(m=m._fullInput);var L=m.legendgroup,D,O,N,V,X,k,Z={},B=[],J=[],ne=[];function oe(Te,we){var be=B.indexOf(Te),ke=Z.visible;return ke||(ke=Z.visible=[]),B.indexOf(Te)===-1&&(B.push(Te),be=B.length-1),ke[be]=we,be}var Y=(o.shapes||[]).map(function(Te){return Te._input}),G=!1;function K(Te,we){Y[Te].visible=we,G=!0}function ee(Te,we){if(!(A.groupTitle&&!b)){var be=Te._fullInput||Te,ke=be._isShape,He=be.index;if(He===void 0&&(He=be._index),i.hasTransform(be,"groupby")){var Ke=J[He];if(!Ke){var st=i.getTransformIndices(be,"groupby"),vt=st[st.length-1];Ke=c.keyedContainer(be,"transforms["+vt+"].styles","target","value.visible"),J[He]=Ke}var pt=Ke.get(Te._group);pt===void 0&&(pt=!0),pt!==!1&&Ke.set(Te._group,we),ne[He]=oe(He,be.visible!==!1)}else{var ft=be.visible===!1?!1:we;ke?K(He,ft):oe(He,ft)}}}var ie=m.legend,re=m._fullInput,se=re&&re._isShape;if(!se&&i.traceIs(m,"pie-like")){var ge=A.label,xe=w.indexOf(ge);if(M==="toggle")xe===-1?w.push(ge):w.splice(xe,1);else if(M==="toggleothers"){var Se=xe!==-1,ce=[];for(D=0;D<d.calcdata.length;D++){var pe=d.calcdata[D];for(O=0;O<pe.length;O++){var ye=pe[O],U=ye.label;ie===pe[0].trace.legend&&ge!==U&&(w.indexOf(U)===-1&&(Se=!0),a(w,U),ce.push(U))}}if(!Se)for(var W=0;W<ce.length;W++){var j=w.indexOf(ce[W]);j!==-1&&w.splice(j,1)}}i.call("_guiRelayout",d,"hiddenlabels",w)}else{var F=L&&L.length,P=[],q;if(F)for(D=0;D<C.length;D++)q=C[D],q.visible&&q.legendgroup===L&&P.push(D);if(M==="toggle"){var z;switch(m.visible){case!0:z="legendonly";break;case!1:z=!1;break;case"legendonly":z=!0;break}if(F)if(b)for(D=0;D<C.length;D++){var te=C[D];te.visible!==!1&&te.legendgroup===L&&ee(te,z)}else ee(m,z);else ee(m,z)}else if(M==="toggleothers"){var ue,ve,_e,Re,Le,Ve=!0;for(D=0;D<C.length;D++)if(Le=C[D],ue=Le===m,_e=Le.showlegend!==!0,!(ue||_e)&&(ve=F&&Le.legendgroup===L,!ve&&Le.legend===ie&&Le.visible===!0&&!i.traceIs(Le,"notLegendIsolatable"))){Ve=!1;break}for(D=0;D<C.length;D++)if(Le=C[D],!(Le.visible===!1||Le.legend!==ie)&&!i.traceIs(Le,"notLegendIsolatable"))switch(m.visible){case"legendonly":ee(Le,!0);break;case!0:Re=Ve?!0:"legendonly",ue=Le===m,_e=Le.showlegend!==!0&&!Le.legendgroup,ve=ue||F&&Le.legendgroup===L,ee(Le,ve||_e?!0:Re);break}}for(D=0;D<J.length;D++)if(N=J[D],!!N){var Xe=N.constructUpdate(),Ze=Object.keys(Xe);for(O=0;O<Ze.length;O++)V=Ze[O],k=Z[V]=Z[V]||[],k[ne[D]]=Xe[V]}for(X=Object.keys(Z),D=0;D<X.length;D++)for(V=X[D],O=0;O<B.length;O++)Z[V].hasOwnProperty(O)||(Z[V][O]=void 0);G?i.call("_guiUpdate",d,Z,{shapes:Y},B):i.call("_guiRestyle",d,Z,B)}}},2451:function(f,u){u.isGrouped=function(i){return(i.traceorder||"").indexOf("grouped")!==-1},u.isVertical=function(i){return i.orientation!=="h"},u.isReversed=function(i){return(i.traceorder||"").indexOf("reversed")!==-1}},2780:function(f,u,r){f.exports={moduleType:"component",name:"legend",layoutAttributes:r(3800),supplyLayoutDefaults:r(7864),draw:r(1140),style:r(2012)}},2012:function(f,u,r){var i=r(3428),c=r(4040),a=r(3400),l=a.strTranslate,s=r(3616),v=r(6308),d=r(4288).extractOpts,p=r(3028),o=r(528),y=r(9656).castOption,_=r(5196),E=12,M=5,b=2,w=10,A=5;f.exports=function(L,D,O){var N=D._fullLayout;O||(O=N.legend);var V=O.itemsizing==="constant",X=O.itemwidth,k=(X+_.itemGap*2)/2,Z=l(k,0),B=function(ce,pe,ye,U){var W;if(ce+1)W=ce;else if(pe&&pe.width>0)W=pe.width;else return 0;return V?U:Math.min(W,ye)};L.each(function(ce){var pe=i.select(this),ye=a.ensureSingle(pe,"g","layers");ye.style("opacity",ce[0].trace.opacity);var U=O.indentation,W=O.valign,j=ce[0].lineHeight,F=ce[0].height;if(W==="middle"&&U===0||!j||!F)ye.attr("transform",null);else{var P={top:1,bottom:-1}[W],q=P*(.5*(j-F+3))||0,z=O.indentation;ye.attr("transform",l(z,q))}var te=ye.selectAll("g.legendfill").data([ce]);te.enter().append("g").classed("legendfill",!0);var ue=ye.selectAll("g.legendlines").data([ce]);ue.enter().append("g").classed("legendlines",!0);var ve=ye.selectAll("g.legendsymbols").data([ce]);ve.enter().append("g").classed("legendsymbols",!0),ve.selectAll("g.legendpoints").data([ce]).enter().append("g").classed("legendpoints",!0)}).each(Se).each(oe).each(G).each(Y).each(ee).each(ge).each(se).each(J).each(ne).each(ie).each(re);function J(ce){var pe=T(ce),ye=pe.showFill,U=pe.showLine,W=pe.showGradientLine,j=pe.showGradientFill,F=pe.anyFill,P=pe.anyLine,q=ce[0],z=q.trace,te,ue,ve=d(z),_e=ve.colorscale,Re=ve.reversescale,Le=function(ke){if(ke.size())if(ye)s.fillGroupStyle(ke,D,!0);else{var He="legendfill-"+z.uid;s.gradient(ke,D,He,R(Re),_e,"fill")}},Ve=function(ke){if(ke.size()){var He="legendline-"+z.uid;s.lineGroupStyle(ke),s.gradient(ke,D,He,R(Re),_e,"stroke")}},Xe=p.hasMarkers(z)||!F?"M5,0":P?"M5,-2":"M5,-3",Ze=i.select(this),Te=Ze.select(".legendfill").selectAll("path").data(ye||j?[ce]:[]);if(Te.enter().append("path").classed("js-fill",!0),Te.exit().remove(),Te.attr("d",Xe+"h"+X+"v6h-"+X+"z").call(Le),U||W){var we=B(void 0,z.line,w,M);ue=a.minExtend(z,{line:{width:we}}),te=[a.minExtend(q,{trace:ue})]}var be=Ze.select(".legendlines").selectAll("path").data(U||W?[te]:[]);be.enter().append("path").classed("js-line",!0),be.exit().remove(),be.attr("d",Xe+(W?"l"+X+",0.0001":"h"+X)).call(U?s.lineGroupStyle:Ve)}function ne(ce){var pe=T(ce),ye=pe.anyFill,U=pe.anyLine,W=pe.showLine,j=pe.showMarker,F=ce[0],P=F.trace,q=!j&&!U&&!ye&&p.hasText(P),z,te;function ue(Te,we,be,ke){var He=a.nestedProperty(P,Te).get(),Ke=a.isArrayOrTypedArray(He)&&we?we(He):He;if(V&&Ke&&ke!==void 0&&(Ke=ke),be){if(Ke<be[0])return be[0];if(Ke>be[1])return be[1]}return Ke}function ve(Te){return F._distinct&&F.index&&Te[F.index]?Te[F.index]:Te[0]}if(j||q||W){var _e={},Re={};if(j){_e.mc=ue("marker.color",ve),_e.mx=ue("marker.symbol",ve),_e.mo=ue("marker.opacity",a.mean,[.2,1]),_e.mlc=ue("marker.line.color",ve),_e.mlw=ue("marker.line.width",a.mean,[0,5],b),Re.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Le=ue("marker.size",a.mean,[2,16],E);_e.ms=Le,Re.marker.size=Le}W&&(Re.line={width:ue("line.width",ve,[0,10],M)}),q&&(_e.tx="Aa",_e.tp=ue("textposition",ve),_e.ts=10,_e.tc=ue("textfont.color",ve),_e.tf=ue("textfont.family",ve),_e.tw=ue("textfont.weight",ve),_e.ty=ue("textfont.style",ve),_e.tv=ue("textfont.variant",ve),_e.tC=ue("textfont.textcase",ve),_e.tE=ue("textfont.lineposition",ve),_e.tS=ue("textfont.shadow",ve)),z=[a.minExtend(F,_e)],te=a.minExtend(P,Re),te.selectedpoints=null,te.texttemplate=null}var Ve=i.select(this).select("g.legendpoints"),Xe=Ve.selectAll("path.scatterpts").data(j?z:[]);Xe.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",Z),Xe.exit().remove(),Xe.call(s.pointStyle,te,D),j&&(z[0].mrc=3);var Ze=Ve.selectAll("g.pointtext").data(q?z:[]);Ze.enter().append("g").classed("pointtext",!0).append("text").attr("transform",Z),Ze.exit().remove(),Ze.selectAll("text").call(s.textPointStyle,te,D)}function oe(ce){var pe=ce[0].trace,ye=pe.type==="waterfall";if(ce[0]._distinct&&ye){var U=ce[0].trace[ce[0].dir].marker;return ce[0].mc=U.color,ce[0].mlw=U.line.width,ce[0].mlc=U.line.color,K(ce,this,"waterfall")}var W=[];pe.visible&&ye&&(W=ce[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var j=i.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(W);j.enter().append("path").classed("legendwaterfall",!0).attr("transform",Z).style("stroke-miterlimit",1),j.exit().remove(),j.each(function(F){var P=i.select(this),q=pe[F[0]].marker,z=B(void 0,q.line,A,b);P.attr("d",F[1]).style("stroke-width",z+"px").call(v.fill,q.color),z&&P.call(v.stroke,q.line.color)})}function Y(ce){K(ce,this)}function G(ce){K(ce,this,"funnel")}function K(ce,pe,ye){var U=ce[0].trace,W=U.marker||{},j=W.line||{},F=W.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",P=ye?U.visible&&U.type===ye:c.traceIs(U,"bar"),q=i.select(pe).select("g.legendpoints").selectAll("path.legend"+ye).data(P?[ce]:[]);q.enter().append("path").classed("legend"+ye,!0).attr("d",F).attr("transform",Z),q.exit().remove(),q.each(function(z){var te=i.select(this),ue=z[0],ve=B(ue.mlw,W.line,A,b);te.style("stroke-width",ve+"px");var _e=ue.mcc;if(!O._inHover&&"mc"in ue){var Re=d(W),Le=Re.mid;Le===void 0&&(Le=(Re.max+Re.min)/2),_e=s.tryColorscale(W,"")(Le)}var Ve=_e||ue.mc||W.color,Xe=W.pattern,Ze=Xe&&s.getPatternAttr(Xe.shape,0,"");if(Ze){var Te=s.getPatternAttr(Xe.bgcolor,0,null),we=s.getPatternAttr(Xe.fgcolor,0,null),be=Xe.fgopacity,ke=C(Xe.size,8,10),He=C(Xe.solidity,.5,1),Ke="legend-"+U.uid;te.call(s.pattern,"legend",D,Ke,Ze,ke,He,_e,Xe.fillmode,Te,we,be)}else te.call(v.fill,Ve);ve&&v.stroke(te,ue.mlc||j.color)})}function ee(ce){var pe=ce[0].trace,ye=i.select(this).select("g.legendpoints").selectAll("path.legendbox").data(pe.visible&&c.traceIs(pe,"box-violin")?[ce]:[]);ye.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",Z),ye.exit().remove(),ye.each(function(){var U=i.select(this);if((pe.boxpoints==="all"||pe.points==="all")&&v.opacity(pe.fillcolor)===0&&v.opacity((pe.line||{}).color)===0){var W=a.minExtend(pe,{marker:{size:V?E:a.constrain(pe.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});ye.call(s.pointStyle,W,D)}else{var j=B(void 0,pe.line,A,b);U.style("stroke-width",j+"px").call(v.fill,pe.fillcolor),j&&v.stroke(U,pe.line.color)}})}function ie(ce){var pe=ce[0].trace,ye=i.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(pe.visible&&pe.type==="candlestick"?[ce,ce]:[]);ye.enter().append("path").classed("legendcandle",!0).attr("d",function(U,W){return W?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",Z).style("stroke-miterlimit",1),ye.exit().remove(),ye.each(function(U,W){var j=i.select(this),F=pe[W?"increasing":"decreasing"],P=B(void 0,F.line,A,b);j.style("stroke-width",P+"px").call(v.fill,F.fillcolor),P&&v.stroke(j,F.line.color)})}function re(ce){var pe=ce[0].trace,ye=i.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(pe.visible&&pe.type==="ohlc"?[ce,ce]:[]);ye.enter().append("path").classed("legendohlc",!0).attr("d",function(U,W){return W?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",Z).style("stroke-miterlimit",1),ye.exit().remove(),ye.each(function(U,W){var j=i.select(this),F=pe[W?"increasing":"decreasing"],P=B(void 0,F.line,A,b);j.style("fill","none").call(s.dashLine,F.line.dash,P),P&&v.stroke(j,F.line.color)})}function se(ce){xe(ce,this,"pie")}function ge(ce){xe(ce,this,"funnelarea")}function xe(ce,pe,ye){var U=ce[0],W=U.trace,j=ye?W.visible&&W.type===ye:c.traceIs(W,ye),F=i.select(pe).select("g.legendpoints").selectAll("path.legend"+ye).data(j?[ce]:[]);if(F.enter().append("path").classed("legend"+ye,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",Z),F.exit().remove(),F.size()){var P=W.marker||{},q=B(y(P.line.width,U.pts),P.line,A,b),z="pieLike",te=a.minExtend(W,{marker:{line:{width:q}}},z),ue=a.minExtend(U,{trace:te},z);o(F,ue,te,D)}}function Se(ce){var pe=ce[0].trace,ye,U=[];if(pe.visible)switch(pe.type){case"histogram2d":case"heatmap":U=[["M-15,-2V4H15V-2Z"]],ye=!0;break;case"choropleth":case"choroplethmapbox":U=[["M-6,-6V6H6V-6Z"]],ye=!0;break;case"densitymapbox":U=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],ye="radial";break;case"cone":U=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],ye=!1;break;case"streamtube":U=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],ye=!1;break;case"surface":U=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],ye=!0;break;case"mesh3d":U=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],ye=!1;break;case"volume":U=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],ye=!0;break;case"isosurface":U=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],ye=!1;break}var W=i.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(U);W.enter().append("path").classed("legend3dandfriends",!0).attr("transform",Z).style("stroke-miterlimit",1),W.exit().remove(),W.each(function(j,F){var P=i.select(this),q=d(pe),z=q.colorscale,te=q.reversescale,ue=function(Le){if(Le.size()){var Ve="legendfill-"+pe.uid;s.gradient(Le,D,Ve,R(te,ye==="radial"),z,"fill")}},ve;if(z){if(!ye){var Re=z.length;ve=F===0?z[te?Re-1:0][1]:F===1?z[te?0:Re-1][1]:z[Math.floor((Re-1)/2)][1]}}else{var _e=pe.vertexcolor||pe.facecolor||pe.color;ve=a.isArrayOrTypedArray(_e)?_e[F]||_e[0]:_e}P.attr("d",j[0]),ve?P.call(v.fill,ve):P.call(ue)})}};function R(m,L){var D=L?"radial":"horizontal";return D+(m?"":"reversed")}function T(m){var L=m[0].trace,D=L.contours,O=p.hasLines(L),N=p.hasMarkers(L),V=L.visible&&L.fill&&L.fill!=="none",X=!1,k=!1;if(D){var Z=D.coloring;Z==="lines"?X=!0:O=Z==="none"||Z==="heatmap"||D.showlines,D.type==="constraint"?V=D._operation!=="=":(Z==="fill"||Z==="heatmap")&&(k=!0)}return{showMarker:N,showLine:O,showFill:V,showGradientLine:X,showGradientFill:k,anyLine:O||X,anyFill:V||k}}function C(m,L,D){return m&&a.isArrayOrTypedArray(m)?L:m>D?D:m}},6540:function(f,u,r){r(6052),f.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},1868:function(f,u,r){var i=r(4040),c=r(7316),a=r(9811),l=r(9224),s=r(4016).eraseActiveShape,v=r(3400),d=v._,p=f.exports={};p.toImage={name:"toImage",title:function(m){var L=m._context.toImageButtonOptions||{},D=L.format||"png";return D==="png"?d(m,"Download plot as a png"):d(m,"Download plot")},icon:l.camera,click:function(m){var L=m._context.toImageButtonOptions,D={format:L.format||"png"};v.notifier(d(m,"Taking snapshot - this may take a few seconds"),"long"),D.format!=="svg"&&v.isIE()&&(v.notifier(d(m,"IE only supports svg.  Changing format to svg."),"long"),D.format="svg"),["filename","width","height","scale"].forEach(function(O){O in L&&(D[O]=L[O])}),i.call("downloadImage",m,D).then(function(O){v.notifier(d(m,"Snapshot succeeded")+" - "+O,"long")}).catch(function(){v.notifier(d(m,"Sorry, there was a problem downloading your snapshot!"),"long")})}},p.sendDataToCloud={name:"sendDataToCloud",title:function(m){return d(m,"Edit in Chart Studio")},icon:l.disk,click:function(m){c.sendDataToCloud(m)}},p.editInChartStudio={name:"editInChartStudio",title:function(m){return d(m,"Edit in Chart Studio")},icon:l.pencil,click:function(m){c.sendDataToCloud(m)}},p.zoom2d={name:"zoom2d",_cat:"zoom",title:function(m){return d(m,"Zoom")},attr:"dragmode",val:"zoom",icon:l.zoombox,click:o},p.pan2d={name:"pan2d",_cat:"pan",title:function(m){return d(m,"Pan")},attr:"dragmode",val:"pan",icon:l.pan,click:o},p.select2d={name:"select2d",_cat:"select",title:function(m){return d(m,"Box Select")},attr:"dragmode",val:"select",icon:l.selectbox,click:o},p.lasso2d={name:"lasso2d",_cat:"lasso",title:function(m){return d(m,"Lasso Select")},attr:"dragmode",val:"lasso",icon:l.lasso,click:o},p.drawclosedpath={name:"drawclosedpath",title:function(m){return d(m,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:l.drawclosedpath,click:o},p.drawopenpath={name:"drawopenpath",title:function(m){return d(m,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:l.drawopenpath,click:o},p.drawline={name:"drawline",title:function(m){return d(m,"Draw line")},attr:"dragmode",val:"drawline",icon:l.drawline,click:o},p.drawrect={name:"drawrect",title:function(m){return d(m,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:l.drawrect,click:o},p.drawcircle={name:"drawcircle",title:function(m){return d(m,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:l.drawcircle,click:o},p.eraseshape={name:"eraseshape",title:function(m){return d(m,"Erase active shape")},icon:l.eraseshape,click:s},p.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(m){return d(m,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:o},p.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(m){return d(m,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:o},p.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(m){return d(m,"Autoscale")},attr:"zoom",val:"auto",icon:l.autoscale,click:o},p.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(m){return d(m,"Reset axes")},attr:"zoom",val:"reset",icon:l.home,click:o},p.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(m){return d(m,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:o},p.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(m){return d(m,"Compare data on hover")},attr:"hovermode",val:function(m){return m._fullLayout._isHoriz?"y":"x"},icon:l.tooltip_compare,gravity:"ne",click:o};function o(m,L){var D=L.currentTarget,O=D.getAttribute("data-attr"),N=D.getAttribute("data-val")||!0,V=m._fullLayout,X={},k=a.list(m,null,!0),Z=V._cartesianSpikesEnabled,B,J;if(O==="zoom"){var ne=N==="in"?.5:2,oe=(1+ne)/2,Y=(1-ne)/2,G;for(J=0;J<k.length;J++)if(B=k[J],!B.fixedrange)if(G=B._name,N==="auto")X[G+".autorange"]=!0;else if(N==="reset")B._rangeInitial0===void 0&&B._rangeInitial1===void 0?X[G+".autorange"]=!0:B._rangeInitial0===void 0?(X[G+".autorange"]=B._autorangeInitial,X[G+".range"]=[null,B._rangeInitial1]):B._rangeInitial1===void 0?(X[G+".range"]=[B._rangeInitial0,null],X[G+".autorange"]=B._autorangeInitial):X[G+".range"]=[B._rangeInitial0,B._rangeInitial1],B._showSpikeInitial!==void 0&&(X[G+".showspikes"]=B._showSpikeInitial,Z==="on"&&!B._showSpikeInitial&&(Z="off"));else{var K=[B.r2l(B.range[0]),B.r2l(B.range[1])],ee=[oe*K[0]+Y*K[1],oe*K[1]+Y*K[0]];X[G+".range[0]"]=B.l2r(ee[0]),X[G+".range[1]"]=B.l2r(ee[1])}}else O==="hovermode"&&(N==="x"||N==="y")&&(N=V._isHoriz?"y":"x",D.setAttribute("data-val",N)),X[O]=N;V._cartesianSpikesEnabled=Z,i.call("_guiRelayout",m,X)}p.zoom3d={name:"zoom3d",_cat:"zoom",title:function(m){return d(m,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:l.zoombox,click:y},p.pan3d={name:"pan3d",_cat:"pan",title:function(m){return d(m,"Pan")},attr:"scene.dragmode",val:"pan",icon:l.pan,click:y},p.orbitRotation={name:"orbitRotation",title:function(m){return d(m,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:l["3d_rotate"],click:y},p.tableRotation={name:"tableRotation",title:function(m){return d(m,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:l["z-axis"],click:y};function y(m,L){for(var D=L.currentTarget,O=D.getAttribute("data-attr"),N=D.getAttribute("data-val")||!0,V=m._fullLayout._subplots.gl3d||[],X={},k=O.split("."),Z=0;Z<V.length;Z++)X[V[Z]+"."+k[1]]=N;var B=N==="pan"?N:"zoom";X.dragmode=B,i.call("_guiRelayout",m,X)}p.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(m){return d(m,"Reset camera to default")},attr:"resetDefault",icon:l.home,click:_},p.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(m){return d(m,"Reset camera to last save")},attr:"resetLastSave",icon:l.movie,click:_};function _(m,L){for(var D=L.currentTarget,O=D.getAttribute("data-attr"),N=O==="resetLastSave",V=O==="resetDefault",X=m._fullLayout,k=X._subplots.gl3d||[],Z={},B=0;B<k.length;B++){var J=k[B],ne=J+".camera",oe=J+".aspectratio",Y=J+".aspectmode",G=X[J]._scene,K;N?(Z[ne+".up"]=G.viewInitial.up,Z[ne+".eye"]=G.viewInitial.eye,Z[ne+".center"]=G.viewInitial.center,K=!0):V&&(Z[ne+".up"]=null,Z[ne+".eye"]=null,Z[ne+".center"]=null,K=!0),K&&(Z[oe+".x"]=G.viewInitial.aspectratio.x,Z[oe+".y"]=G.viewInitial.aspectratio.y,Z[oe+".z"]=G.viewInitial.aspectratio.z,Z[Y]=G.viewInitial.aspectmode)}i.call("_guiRelayout",m,Z)}p.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(m){return d(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:M};function E(m,L){var D=L.currentTarget,O=D._previousVal,N=m._fullLayout,V=N._subplots.gl3d||[],X=["xaxis","yaxis","zaxis"],k={},Z={};if(O)Z=O,D._previousVal=null;else{for(var B=0;B<V.length;B++){var J=V[B],ne=N[J],oe=J+".hovermode";k[oe]=ne.hovermode,Z[oe]=!1;for(var Y=0;Y<3;Y++){var G=X[Y],K=J+"."+G+".showspikes";Z[K]=!1,k[K]=ne[G].showspikes}}D._previousVal=k}return Z}function M(m,L){var D=E(m,L);i.call("_guiRelayout",m,D)}p.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(m){return d(m,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:b},p.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(m){return d(m,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:b},p.resetGeo={name:"resetGeo",_cat:"reset",title:function(m){return d(m,"Reset")},attr:"reset",val:null,icon:l.autoscale,click:b},p.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(m){return d(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:A};function b(m,L){for(var D=L.currentTarget,O=D.getAttribute("data-attr"),N=D.getAttribute("data-val")||!0,V=m._fullLayout,X=V._subplots.geo||[],k=0;k<X.length;k++){var Z=X[k],B=V[Z];if(O==="zoom"){var J=B.projection.scale,ne=N==="in"?2*J:.5*J;i.call("_guiRelayout",m,Z+".projection.scale",ne)}}O==="reset"&&C(m,"geo")}p.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(m){return d(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:A},p.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(m){return d(m,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:A};function w(m){var L=m._fullLayout;return L.hovermode?!1:L._has("cartesian")?L._isHoriz?"y":"x":"closest"}function A(m){var L=w(m);i.call("_guiRelayout",m,"hovermode",L)}p.resetViewSankey={name:"resetSankeyGroup",title:function(m){return d(m,"Reset view")},icon:l.home,click:function(m){for(var L={"node.groups":[],"node.x":[],"node.y":[]},D=0;D<m._fullData.length;D++){var O=m._fullData[D]._viewInitial;L["node.groups"].push(O.node.groups.slice()),L["node.x"].push(O.node.x.slice()),L["node.y"].push(O.node.y.slice())}i.call("restyle",m,L)}},p.toggleHover={name:"toggleHover",title:function(m){return d(m,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:function(m,L){var D=E(m,L);D.hovermode=w(m),i.call("_guiRelayout",m,D)}},p.resetViews={name:"resetViews",title:function(m){return d(m,"Reset views")},icon:l.home,click:function(m,L){var D=L.currentTarget;D.setAttribute("data-attr","zoom"),D.setAttribute("data-val","reset"),o(m,L),D.setAttribute("data-attr","resetLastSave"),_(m,L),C(m,"geo"),C(m,"mapbox")}},p.toggleSpikelines={name:"toggleSpikelines",title:function(m){return d(m,"Toggle Spike Lines")},icon:l.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(m){var L=m._fullLayout,D=L._cartesianSpikesEnabled;L._cartesianSpikesEnabled=D==="on"?"off":"on",i.call("_guiRelayout",m,R(m))}};function R(m){for(var L=m._fullLayout,D=L._cartesianSpikesEnabled==="on",O=a.list(m,null,!0),N={},V=0;V<O.length;V++){var X=O[V];N[X._name+".showspikes"]=D?!0:X._showSpikeInitial}return N}p.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(m){return d(m,"Reset view")},attr:"reset",icon:l.home,click:function(m){C(m,"mapbox")}},p.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(m){return d(m,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:T},p.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(m){return d(m,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:T};function T(m,L){for(var D=L.currentTarget,O=D.getAttribute("data-val"),N=m._fullLayout,V=N._subplots.mapbox||[],X=1.05,k={},Z=0;Z<V.length;Z++){var B=V[Z],J=N[B].zoom,ne=O==="in"?X*J:J/X;k[B+".zoom"]=ne}i.call("_guiRelayout",m,k)}function C(m,L){for(var D=m._fullLayout,O=D._subplots[L]||[],N={},V=0;V<O.length;V++)for(var X=O[V],k=D[X]._subplot,Z=k.viewInitial,B=Object.keys(Z),J=0;J<B.length;J++){var ne=B[J];N[X+"."+ne]=Z[ne]}i.call("_guiRelayout",m,N)}},6052:function(f,u,r){var i=r(1868),c=Object.keys(i),a=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],l=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(a),s=[],v=function(d){if(l.indexOf(d._cat||d.name)===-1){var p=d.name,o=(d._cat||d.name).toLowerCase();s.indexOf(p)===-1&&s.push(p),s.indexOf(o)===-1&&s.push(o)}};c.forEach(function(d){v(i[d])}),s.sort(),f.exports={DRAW_MODES:a,backButtons:l,foreButtons:s}},824:function(f,u,r){var i=r(3400),c=r(6308),a=r(1780),l=r(6540);f.exports=function(v,d){var p=v.modebar||{},o=a.newContainer(d,"modebar");function y(E,M){return i.coerce(p,o,l,E,M)}y("orientation"),y("bgcolor",c.addOpacity(d.paper_bgcolor,.5));var _=c.contrast(c.rgb(d.modebar.bgcolor));y("color",c.addOpacity(_,.3)),y("activecolor",c.addOpacity(_,.7)),y("uirevision",d.uirevision),y("add"),y("remove")}},3080:function(f,u,r){f.exports={moduleType:"component",name:"modebar",layoutAttributes:r(6540),supplyLayoutDefaults:r(824),manage:r(8816)}},8816:function(f,u,r){var i=r(9811),c=r(3028),a=r(4040),l=r(624).isUnifiedHover,s=r(6400),v=r(1868),d=r(6052).DRAW_MODES,p=r(3400).extendDeep;f.exports=function(A){var R=A._fullLayout,T=A._context,C=R._modeBar;if(!T.displayModeBar&&!T.watermark){C&&(C.destroy(),delete R._modeBar);return}if(!Array.isArray(T.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(T.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var m=T.modeBarButtons,L;Array.isArray(m)&&m.length?L=b(m):!T.displayModeBar&&T.watermark?L=[]:L=o(A),C?C.update(A,L):R._modeBar=s(A,L)};function o(w){var A=w._fullLayout,R=w._fullData,T=w._context;function C(F,P){if(typeof P=="string"){if(P.toLowerCase()===F.toLowerCase())return!0}else{var q=P.name,z=P._cat||P.name;if(q===F||z===F.toLowerCase())return!0}return!1}var m=A.modebar.add;typeof m=="string"&&(m=[m]);var L=A.modebar.remove;typeof L=="string"&&(L=[L]);var D=T.modeBarButtonsToAdd.concat(m.filter(function(F){for(var P=0;P<T.modeBarButtonsToRemove.length;P++)if(C(F,T.modeBarButtonsToRemove[P]))return!1;return!0})),O=T.modeBarButtonsToRemove.concat(L.filter(function(F){for(var P=0;P<T.modeBarButtonsToAdd.length;P++)if(C(F,T.modeBarButtonsToAdd[P]))return!1;return!0})),N=A._has("cartesian"),V=A._has("gl3d"),X=A._has("geo"),k=A._has("pie"),Z=A._has("funnelarea"),B=A._has("gl2d"),J=A._has("ternary"),ne=A._has("mapbox"),oe=A._has("polar"),Y=A._has("smith"),G=A._has("sankey"),K=y(A),ee=l(A.hovermode),ie=[];function re(F){if(F.length){for(var P=[],q=0;q<F.length;q++){for(var z=F[q],te=v[z],ue=te.name.toLowerCase(),ve=(te._cat||te.name).toLowerCase(),_e=!1,Re=0;Re<O.length;Re++){var Le=O[Re].toLowerCase();if(Le===ue||Le===ve){_e=!0;break}}_e||P.push(v[z])}ie.push(P)}}var se=["toImage"];T.showEditInChartStudio?se.push("editInChartStudio"):T.showSendToCloud&&se.push("sendDataToCloud"),re(se);var ge=[],xe=[],Se=[],ce=[];(N||B||k||Z||J)+X+V+ne+oe+Y>1?(xe=["toggleHover"],Se=["resetViews"]):X?(ge=["zoomInGeo","zoomOutGeo"],xe=["hoverClosestGeo"],Se=["resetGeo"]):V?(xe=["hoverClosest3d"],Se=["resetCameraDefault3d","resetCameraLastSave3d"]):ne?(ge=["zoomInMapbox","zoomOutMapbox"],xe=["toggleHover"],Se=["resetViewMapbox"]):B?xe=["hoverClosestGl2d"]:k?xe=["hoverClosestPie"]:G?(xe=["hoverClosestCartesian","hoverCompareCartesian"],Se=["resetViewSankey"]):xe=["toggleHover"],N&&(xe=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(E(R)||ee)&&(xe=[]),(N||B)&&!K&&(ge=["zoomIn2d","zoomOut2d","autoScale2d"],Se[0]!=="resetViews"&&(Se=["resetScale2d"])),V?ce=["zoom3d","pan3d","orbitRotation","tableRotation"]:(N||B)&&!K||J?ce=["zoom2d","pan2d"]:ne||X?ce=["pan2d"]:oe&&(ce=["zoom2d"]),_(R)&&ce.push("select2d","lasso2d");var pe=[],ye=function(F){pe.indexOf(F)===-1&&xe.indexOf(F)!==-1&&pe.push(F)};if(Array.isArray(D)){for(var U=[],W=0;W<D.length;W++){var j=D[W];typeof j=="string"?(j=j.toLowerCase(),d.indexOf(j)!==-1?(A._has("mapbox")||A._has("cartesian"))&&ce.push(j):j==="togglespikelines"?ye("toggleSpikelines"):j==="togglehover"?ye("toggleHover"):j==="hovercompare"?ye("hoverCompareCartesian"):j==="hoverclosest"?(ye("hoverClosestCartesian"),ye("hoverClosestGeo"),ye("hoverClosest3d"),ye("hoverClosestGl2d"),ye("hoverClosestPie")):j==="v1hovermode"&&(ye("toggleHover"),ye("hoverClosestCartesian"),ye("hoverCompareCartesian"),ye("hoverClosestGeo"),ye("hoverClosest3d"),ye("hoverClosestGl2d"),ye("hoverClosestPie"))):U.push(j)}D=U}return re(ce),re(ge.concat(Se)),re(pe),M(ie,D)}function y(w){for(var A=i.list({_fullLayout:w},null,!0),R=0;R<A.length;R++)if(!A[R].fixedrange)return!1;return!0}function _(w){for(var A=!1,R=0;R<w.length&&!A;R++){var T=w[R];!T._module||!T._module.selectPoints||(a.traceIs(T,"scatter-like")?(c.hasMarkers(T)||c.hasText(T))&&(A=!0):a.traceIs(T,"box-violin")?(T.boxpoints==="all"||T.points==="all")&&(A=!0):A=!0)}return A}function E(w){for(var A=0;A<w.length;A++)if(!a.traceIs(w[A],"noHover"))return!1;return!0}function M(w,A){if(A.length)if(Array.isArray(A[0]))for(var R=0;R<A.length;R++)w.push(A[R]);else w.push(A);return w}function b(w){for(var A=p([],w),R=0;R<A.length;R++)for(var T=A[R],C=0;C<T.length;C++){var m=T[C];if(typeof m=="string")if(v[m]!==void 0)A[R][C]=v[m];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return A}},6400:function(f,u,r){var i=r(3428),c=r(8248),a=r(3400),l=r(9224),s=r(5788).version,v=new DOMParser;function d(_){this.container=_.container,this.element=document.createElement("div"),this.update(_.graphInfo,_.buttons),this.container.appendChild(this.element)}var p=d.prototype;p.update=function(_,E){this.graphInfo=_;var M=this.graphInfo._context,b=this.graphInfo._fullLayout,w="modebar-"+b._uid;this.element.setAttribute("id",w),this._uid=w,this.element.className="modebar",M.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),b.modebar.orientation==="v"&&(this.element.className+=" vertical",E=E.reverse());var A=b.modebar,R=M.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";a.deleteRelatedStyleRule(w),a.addRelatedStyleRule(w,R+"#"+w+" .modebar-group","background-color: "+A.bgcolor),a.addRelatedStyleRule(w,"#"+w+" .modebar-btn .icon path","fill: "+A.color),a.addRelatedStyleRule(w,"#"+w+" .modebar-btn:hover .icon path","fill: "+A.activecolor),a.addRelatedStyleRule(w,"#"+w+" .modebar-btn.active .icon path","fill: "+A.activecolor);var T=!this.hasButtons(E),C=this.hasLogo!==M.displaylogo,m=this.locale!==M.locale;if(this.locale=M.locale,(T||C||m)&&(this.removeAllButtons(),this.updateButtons(E),M.watermark||M.displaylogo)){var L=this.getLogo();M.watermark&&(L.className=L.className+" watermark"),b.modebar.orientation==="v"?this.element.insertBefore(L,this.element.childNodes[0]):this.element.appendChild(L),this.hasLogo=!0}this.updateActiveButton()},p.updateButtons=function(_){var E=this;this.buttons=_,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(M){var b=E.createGroup();M.forEach(function(w){var A=w.name;if(!A)throw new Error("must provide button 'name' in button config");if(E.buttonsNames.indexOf(A)!==-1)throw new Error("button name '"+A+"' is taken");E.buttonsNames.push(A);var R=E.createButton(w);E.buttonElements.push(R),b.appendChild(R)}),E.element.appendChild(b)})},p.createGroup=function(){var _=document.createElement("div");return _.className="modebar-group",_},p.createButton=function(_){var E=this,M=document.createElement("a");M.setAttribute("rel","tooltip"),M.className="modebar-btn";var b=_.title;b===void 0?b=_.name:typeof b=="function"&&(b=b(this.graphInfo)),(b||b===0)&&M.setAttribute("data-title",b),_.attr!==void 0&&M.setAttribute("data-attr",_.attr);var w=_.val;w!==void 0&&(typeof w=="function"&&(w=w(this.graphInfo)),M.setAttribute("data-val",w));var A=_.click;if(typeof A!="function")throw new Error("must provide button 'click' function in button config");M.addEventListener("click",function(T){_.click(E.graphInfo,T),E.updateActiveButton(T.currentTarget)}),M.setAttribute("data-toggle",_.toggle||!1),_.toggle&&i.select(M).classed("active",!0);var R=_.icon;return typeof R=="function"?M.appendChild(R()):M.appendChild(this.createIcon(R||l.question)),M.setAttribute("data-gravity",_.gravity||"n"),M},p.createIcon=function(_){var E=c(_.height)?Number(_.height):_.ascent-_.descent,M="http://www.w3.org/2000/svg",b;if(_.path){b=document.createElementNS(M,"svg"),b.setAttribute("viewBox",[0,0,_.width,E].join(" ")),b.setAttribute("class","icon");var w=document.createElementNS(M,"path");w.setAttribute("d",_.path),_.transform?w.setAttribute("transform",_.transform):_.ascent!==void 0&&w.setAttribute("transform","matrix(1 0 0 -1 0 "+_.ascent+")"),b.appendChild(w)}if(_.svg){var A=v.parseFromString(_.svg,"application/xml");b=A.childNodes[0]}return b.setAttribute("height","1em"),b.setAttribute("width","1em"),b},p.updateActiveButton=function(_){var E=this.graphInfo._fullLayout,M=_!==void 0?_.getAttribute("data-attr"):null;this.buttonElements.forEach(function(b){var w=b.getAttribute("data-val")||!0,A=b.getAttribute("data-attr"),R=b.getAttribute("data-toggle")==="true",T=i.select(b);if(R)A===M&&T.classed("active",!T.classed("active"));else{var C=A===null?A:a.nestedProperty(E,A).get();T.classed("active",C===w)}})},p.hasButtons=function(_){var E=this.buttons;if(!E||_.length!==E.length)return!1;for(var M=0;M<_.length;++M){if(_[M].length!==E[M].length)return!1;for(var b=0;b<_[M].length;b++)if(_[M][b].name!==E[M][b].name)return!1}return!0};function o(_){return _+" (v"+s+")"}p.getLogo=function(){var _=this.createGroup(),E=document.createElement("a");return E.href="https://plotly.com/",E.target="_blank",E.setAttribute("data-title",o(a._(this.graphInfo,"Produced with Plotly.js"))),E.className="modebar-btn plotlyjsicon modebar-btn--logo",E.appendChild(this.createIcon(l.newplotlylogo)),_.appendChild(E),_},p.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},p.destroy=function(){a.removeElement(this.container.querySelector(".modebar")),a.deleteRelatedStyleRule(this._uid)};function y(_,E){var M=_._fullLayout,b=new d({graphInfo:_,container:M._modebardiv.node(),buttons:E});return M._privateplot&&i.select(b.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),b}f.exports=y},6680:function(f,u,r){var i=r(5376),c=r(2548),a=r(1780).templatedArray,l=a("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});f.exports={visible:{valType:"boolean",editType:"plot"},buttons:l,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:i({editType:"plot"}),bgcolor:{valType:"color",dflt:c.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},5984:function(f){f.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},2148:function(f,u,r){var i=r(3400),c=r(6308),a=r(1780),l=r(1272),s=r(6680),v=r(5984);f.exports=function(y,_,E,M,b){var w=y.rangeselector||{},A=a.newContainer(_,"rangeselector");function R(D,O){return i.coerce(w,A,s,D,O)}var T=l(w,A,{name:"buttons",handleItemDefaults:d,calendar:b}),C=R("visible",T.length>0);if(C){var m=p(_,E,M);R("x",m[0]),R("y",m[1]),i.noneOrAll(y,_,["x","y"]),R("xanchor"),R("yanchor"),i.coerceFont(R,"font",E.font);var L=R("bgcolor");R("activecolor",c.contrast(L,v.lightAmount,v.darkAmount)),R("bordercolor"),R("borderwidth")}};function d(o,y,_,E){var M=E.calendar;function b(R,T){return i.coerce(o,y,s.buttons,R,T)}var w=b("visible");if(w){var A=b("step");A!=="all"&&(M&&M!=="gregorian"&&(A==="month"||A==="year")?y.stepmode="backward":b("stepmode"),b("count")),b("label")}}function p(o,y,_){for(var E=_.filter(function(A){return y[A].anchor===o._id}),M=0,b=0;b<E.length;b++){var w=y[E[b]].domain;w&&(M=Math.max(w[1],M))}return[o.domain[0],M+v.yPad]}},216:function(f,u,r){var i=r(3428),c=r(4040),a=r(7316),l=r(6308),s=r(3616),v=r(3400),d=v.strTranslate,p=r(2736),o=r(9811),y=r(4284),_=y.LINE_SPACING,E=y.FROM_TL,M=y.FROM_BR,b=r(5984),w=r(8040);f.exports=function(V){var X=V._fullLayout,k=X._infolayer.selectAll(".rangeselector").data(A(V),R);k.enter().append("g").classed("rangeselector",!0),k.exit().remove(),k.style({cursor:"pointer","pointer-events":"all"}),k.each(function(Z){var B=i.select(this),J=Z,ne=J.rangeselector,oe=B.selectAll("g.button").data(v.filterVisible(ne.buttons));oe.enter().append("g").classed("button",!0),oe.exit().remove(),oe.each(function(Y){var G=i.select(this),K=w(J,Y);Y._isActive=T(J,Y,K),G.call(C,ne,Y),G.call(L,ne,Y,V),G.on("click",function(){V._dragged||c.call("_guiRelayout",V,K)}),G.on("mouseover",function(){Y._isHovered=!0,G.call(C,ne,Y)}),G.on("mouseout",function(){Y._isHovered=!1,G.call(C,ne,Y)})}),O(V,oe,ne,J._name,B)})};function A(N){for(var V=o.list(N,"x",!0),X=[],k=0;k<V.length;k++){var Z=V[k];Z.rangeselector&&Z.rangeselector.visible&&X.push(Z)}return X}function R(N){return N._id}function T(N,V,X){if(V.step==="all")return N.autorange===!0;var k=Object.keys(X);return N.range[0]===X[k[0]]&&N.range[1]===X[k[1]]}function C(N,V,X){var k=v.ensureSingle(N,"rect","selector-rect",function(Z){Z.attr("shape-rendering","crispEdges")});k.attr({rx:b.rx,ry:b.ry}),k.call(l.stroke,V.bordercolor).call(l.fill,m(V,X)).style("stroke-width",V.borderwidth+"px")}function m(N,V){return V._isActive||V._isHovered?N.activecolor:N.bgcolor}function L(N,V,X,k){function Z(J){p.convertToTspans(J,k)}var B=v.ensureSingle(N,"text","selector-text",function(J){J.attr("text-anchor","middle")});B.call(s.font,V.font).text(D(X,k._fullLayout._meta)).call(Z)}function D(N,V){return N.label?V?v.templateString(N.label,V):N.label:N.step==="all"?"all":N.count+N.step.charAt(0)}function O(N,V,X,k,Z){var B=0,J=0,ne=X.borderwidth;V.each(function(){var ie=i.select(this),re=ie.select(".selector-text"),se=X.font.size*_,ge=Math.max(se*p.lineCount(re),16)+3;J=Math.max(J,ge)}),V.each(function(){var ie=i.select(this),re=ie.select(".selector-rect"),se=ie.select(".selector-text"),ge=se.node()&&s.bBox(se.node()).width,xe=X.font.size*_,Se=p.lineCount(se),ce=Math.max(ge+10,b.minButtonWidth);ie.attr("transform",d(ne+B,ne)),re.attr({x:0,y:0,width:ce,height:J}),p.positionText(se,ce/2,J/2-(Se-1)*xe/2+3),B+=ce+5});var oe=N._fullLayout._size,Y=oe.l+oe.w*X.x,G=oe.t+oe.h*(1-X.y),K="left";v.isRightAnchor(X)&&(Y-=B,K="right"),v.isCenterAnchor(X)&&(Y-=B/2,K="center");var ee="top";v.isBottomAnchor(X)&&(G-=J,ee="bottom"),v.isMiddleAnchor(X)&&(G-=J/2,ee="middle"),B=Math.ceil(B),J=Math.ceil(J),Y=Math.round(Y),G=Math.round(G),a.autoMargin(N,k+"-range-selector",{x:X.x,y:X.y,l:B*E[K],r:B*M[K],b:J*M[ee],t:J*E[ee]}),Z.attr("transform",d(Y,G))}},8040:function(f,u,r){var i=r(3220),c=r(3400).titleCase;f.exports=function(s,v){var d=s._name,p={};if(v.step==="all")p[d+".autorange"]=!0;else{var o=a(s,v);p[d+".range[0]"]=o[0],p[d+".range[1]"]=o[1]}return p};function a(l,s){var v=l.range,d=new Date(l.r2l(v[1])),p=s.step,o=i["utc"+c(p)],y=s.count,_;switch(s.stepmode){case"backward":_=l.l2r(+o.offset(d,-y));break;case"todate":var E=o.offset(d,-y);_=l.l2r(+o.ceil(E));break}var M=v[1];return[_,M]}},1152:function(f,u,r){f.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:r(6680)}}},layoutAttributes:r(6680),handleDefaults:r(2148),draw:r(216)}},8820:function(f,u,r){var i=r(2548);f.exports={bgcolor:{valType:"color",dflt:i.background,editType:"plot"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},6652:function(f,u,r){var i=r(9811).list,c=r(9280).getAutoRange,a=r(4636);f.exports=function(s){for(var v=i(s,"x",!0),d=0;d<v.length;d++){var p=v[d],o=p[a.name];o&&o.visible&&o.autorange&&(o._input.autorange=!0,o._input.range=o.range=c(s,p))}}},4636:function(f){f.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},1659:function(f,u,r){var i=r(3400),c=r(1780),a=r(9811),l=r(8820),s=r(936);f.exports=function(d,p,o){var y=d[o],_=p[o];if(!(y.rangeslider||p._requestRangeslider[_._id]))return;i.isPlainObject(y.rangeslider)||(y.rangeslider={});var E=y.rangeslider,M=c.newContainer(_,"rangeslider");function b(k,Z){return i.coerce(E,M,l,k,Z)}var w,A;function R(k,Z){return i.coerce(w,A,s,k,Z)}var T=b("visible");if(T){b("bgcolor",p.plot_bgcolor),b("bordercolor"),b("borderwidth"),b("thickness"),b("autorange",!_.isValidRange(E.range)),b("range");var C=p._subplots;if(C)for(var m=C.cartesian.filter(function(k){return k.substr(0,k.indexOf("y"))===a.name2id(o)}).map(function(k){return k.substr(k.indexOf("y"),k.length)}),L=i.simpleMap(m,a.id2name),D=0;D<L.length;D++){var O=L[D];w=E[O]||{},A=c.newContainer(M,O,"yaxis");var N=p[O],V;w.range&&N.isValidRange(w.range)&&(V="fixed");var X=R("rangemode",V);X!=="match"&&R("range",N.range.slice())}M._input=E}}},60:function(f,u,r){var i=r(3428),c=r(4040),a=r(7316),l=r(3400),s=l.strTranslate,v=r(3616),d=r(6308),p=r(1668),o=r(7952),y=r(9811),_=r(6476),E=r(3972),M=r(4636);f.exports=function(V){for(var X=V._fullLayout,k=X._rangeSliderData,Z=0;Z<k.length;Z++){var B=k[Z][M.name];B._clipId=B._id+"-"+X._uid}function J(oe){return oe._name}var ne=X._infolayer.selectAll("g."+M.containerClassName).data(k,J);ne.exit().each(function(oe){var Y=oe[M.name];X._topdefs.select("#"+Y._clipId).remove()}).remove(),k.length!==0&&(ne.enter().append("g").classed(M.containerClassName,!0).attr("pointer-events","all"),ne.each(function(oe){var Y=i.select(this),G=oe[M.name],K=X[y.id2name(oe.anchor)],ee=G[y.id2name(oe.anchor)];if(G.range){var ie=l.simpleMap(G.range,oe.r2l),re=l.simpleMap(oe.range,oe.r2l),se;re[0]<re[1]?se=[Math.min(ie[0],re[0]),Math.max(ie[1],re[1])]:se=[Math.max(ie[0],re[0]),Math.min(ie[1],re[1])],G.range=G._input.range=l.simpleMap(se,oe.l2r)}oe.cleanRange("rangeslider.range");var ge=X._size,xe=oe.domain;G._width=ge.w*(xe[1]-xe[0]);var Se=Math.round(ge.l+ge.w*xe[0]),ce=Math.round(ge.t+ge.h*(1-oe._counterDomainMin)+(oe.side==="bottom"?oe._depth:0)+G._offsetShift+M.extraPad);Y.attr("transform",s(Se,ce)),G._rl=l.simpleMap(G.range,oe.r2l);var pe=G._rl[0],ye=G._rl[1],U=ye-pe;if(G.p2d=function(_e){return _e/G._width*U+pe},G.d2p=function(_e){return(_e-pe)/U*G._width},oe.rangebreaks){var W=oe.locateBreaks(pe,ye);if(W.length){var j,F,P=0;for(j=0;j<W.length;j++)F=W[j],P+=F.max-F.min;var q=G._width/(ye-pe-P),z=[-q*pe];for(j=0;j<W.length;j++)F=W[j],z.push(z[z.length-1]-q*(F.max-F.min));for(G.d2p=function(_e){for(var Re=z[0],Le=0;Le<W.length;Le++){var Ve=W[Le];if(_e>=Ve.max)Re=z[Le+1];else if(_e<Ve.min)break}return Re+q*_e},j=0;j<W.length;j++)F=W[j],F.pmin=G.d2p(F.min),F.pmax=G.d2p(F.max);G.p2d=function(_e){for(var Re=z[0],Le=0;Le<W.length;Le++){var Ve=W[Le];if(_e>=Ve.pmax)Re=z[Le+1];else if(_e<Ve.pmin)break}return(_e-Re)/q}}}if(ee.rangemode!=="match"){var te=K.r2l(ee.range[0]),ue=K.r2l(ee.range[1]),ve=ue-te;G.d2pOppAxis=function(_e){return(_e-te)/ve*G._height}}Y.call(T,V,oe,G).call(C,V,oe,G).call(m,V,oe,G).call(D,V,oe,G,ee).call(O,V,oe,G).call(N,V,oe,G),w(Y,V,oe,G),R(Y,V,oe,G,K,ee),oe.side==="bottom"&&p.draw(V,oe._id+"title",{propContainer:oe,propName:oe._name+".title",placeholder:X._dfltTitle.x,attributes:{x:oe._offset+oe._length/2,y:ce+G._height+G._offsetShift+10+1.5*oe.title.font.size,"text-anchor":"middle"}})}))};function b(V){return typeof V.clientX=="number"?V.clientX:V.touches&&V.touches.length>0?V.touches[0].clientX:0}function w(V,X,k,Z){if(X._context.staticPlot)return;var B=V.select("rect."+M.slideBoxClassName).node(),J=V.select("rect."+M.grabAreaMinClassName).node(),ne=V.select("rect."+M.grabAreaMaxClassName).node();function oe(){var Y=i.event,G=Y.target,K=b(Y),ee=K-V.node().getBoundingClientRect().left,ie=Z.d2p(k._rl[0]),re=Z.d2p(k._rl[1]),se=_.coverSlip();this.addEventListener("touchmove",ge),this.addEventListener("touchend",xe),se.addEventListener("mousemove",ge),se.addEventListener("mouseup",xe);function ge(Se){var ce=b(Se),pe=+ce-K,ye,U,W;switch(G){case B:if(W="ew-resize",ie+pe>k._length||re+pe<0)return;ye=ie+pe,U=re+pe;break;case J:if(W="col-resize",ie+pe>k._length)return;ye=ie+pe,U=re;break;case ne:if(W="col-resize",re+pe<0)return;ye=ie,U=re+pe;break;default:W="ew-resize",ye=ee,U=ee+pe;break}if(U<ye){var j=U;U=ye,ye=j}Z._pixelMin=ye,Z._pixelMax=U,E(i.select(se),W),A(V,X,k,Z)}function xe(){se.removeEventListener("mousemove",ge),se.removeEventListener("mouseup",xe),this.removeEventListener("touchmove",ge),this.removeEventListener("touchend",xe),l.removeElement(se)}}V.on("mousedown",oe),V.on("touchstart",oe)}function A(V,X,k,Z){function B(oe){return k.l2r(l.constrain(oe,Z._rl[0],Z._rl[1]))}var J=B(Z.p2d(Z._pixelMin)),ne=B(Z.p2d(Z._pixelMax));window.requestAnimationFrame(function(){c.call("_guiRelayout",X,k._name+".range",[J,ne])})}function R(V,X,k,Z,B,J){var ne=M.handleWidth/2;function oe(Se){return l.constrain(Se,0,Z._width)}function Y(Se){return l.constrain(Se,0,Z._height)}function G(Se){return l.constrain(Se,-ne,Z._width+ne)}var K=oe(Z.d2p(k._rl[0])),ee=oe(Z.d2p(k._rl[1]));if(V.select("rect."+M.slideBoxClassName).attr("x",K).attr("width",ee-K),V.select("rect."+M.maskMinClassName).attr("width",K),V.select("rect."+M.maskMaxClassName).attr("x",ee).attr("width",Z._width-ee),J.rangemode!=="match"){var ie=Z._height-Y(Z.d2pOppAxis(B._rl[1])),re=Z._height-Y(Z.d2pOppAxis(B._rl[0]));V.select("rect."+M.maskMinOppAxisClassName).attr("x",K).attr("height",ie).attr("width",ee-K),V.select("rect."+M.maskMaxOppAxisClassName).attr("x",K).attr("y",re).attr("height",Z._height-re).attr("width",ee-K),V.select("rect."+M.slideBoxClassName).attr("y",ie).attr("height",re-ie)}var se=.5,ge=Math.round(G(K-ne))-se,xe=Math.round(G(ee-ne))+se;V.select("g."+M.grabberMinClassName).attr("transform",s(ge,se)),V.select("g."+M.grabberMaxClassName).attr("transform",s(xe,se))}function T(V,X,k,Z){var B=l.ensureSingle(V,"rect",M.bgClassName,function(Y){Y.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),J=Z.borderwidth%2===0?Z.borderwidth:Z.borderwidth-1,ne=-Z._offsetShift,oe=v.crispRound(X,Z.borderwidth);B.attr({width:Z._width+J,height:Z._height+J,transform:s(ne,ne),"stroke-width":oe}).call(d.stroke,Z.bordercolor).call(d.fill,Z.bgcolor)}function C(V,X,k,Z){var B=X._fullLayout,J=l.ensureSingleById(B._topdefs,"clipPath",Z._clipId,function(ne){ne.append("rect").attr({x:0,y:0})});J.select("rect").attr({width:Z._width,height:Z._height})}function m(V,X,k,Z){var B=X.calcdata,J=V.selectAll("g."+M.rangePlotClassName).data(k._subplotsWith,l.identity);J.enter().append("g").attr("class",function(oe){return M.rangePlotClassName+" "+oe}).call(v.setClipUrl,Z._clipId,X),J.order(),J.exit().remove();var ne;J.each(function(oe,Y){var G=i.select(this),K=Y===0,ee=y.getFromId(X,oe,"y"),ie=ee._name,re=Z[ie],se={data:[],layout:{xaxis:{type:k.type,domain:[0,1],range:Z.range.slice(),calendar:k.calendar},width:Z._width,height:Z._height,margin:{t:0,b:0,l:0,r:0}},_context:X._context};k.rangebreaks&&(se.layout.xaxis.rangebreaks=k.rangebreaks),se.layout[ie]={type:ee.type,domain:[0,1],range:re.rangemode!=="match"?re.range.slice():ee.range.slice(),calendar:ee.calendar},ee.rangebreaks&&(se.layout[ie].rangebreaks=ee.rangebreaks),a.supplyDefaults(se);var ge=se._fullLayout.xaxis,xe=se._fullLayout[ie];ge.clearCalc(),ge.setScale(),xe.clearCalc(),xe.setScale();var Se={id:oe,plotgroup:G,xaxis:ge,yaxis:xe,isRangePlot:!0};K?ne=Se:(Se.mainplot="xy",Se.mainplotinfo=ne),o.rangePlot(X,Se,L(B,oe))})}function L(V,X){for(var k=[],Z=0;Z<V.length;Z++){var B=V[Z],J=B[0].trace;J.xaxis+J.yaxis===X&&k.push(B)}return k}function D(V,X,k,Z,B){var J=l.ensureSingle(V,"rect",M.maskMinClassName,function(G){G.attr({x:0,y:0,"shape-rendering":"crispEdges"})});J.attr("height",Z._height).call(d.fill,M.maskColor);var ne=l.ensureSingle(V,"rect",M.maskMaxClassName,function(G){G.attr({y:0,"shape-rendering":"crispEdges"})});if(ne.attr("height",Z._height).call(d.fill,M.maskColor),B.rangemode!=="match"){var oe=l.ensureSingle(V,"rect",M.maskMinOppAxisClassName,function(G){G.attr({y:0,"shape-rendering":"crispEdges"})});oe.attr("width",Z._width).call(d.fill,M.maskOppAxisColor);var Y=l.ensureSingle(V,"rect",M.maskMaxOppAxisClassName,function(G){G.attr({y:0,"shape-rendering":"crispEdges"})});Y.attr("width",Z._width).style("border-top",M.maskOppBorder).call(d.fill,M.maskOppAxisColor)}}function O(V,X,k,Z){if(!X._context.staticPlot){var B=l.ensureSingle(V,"rect",M.slideBoxClassName,function(J){J.attr({y:0,cursor:M.slideBoxCursor,"shape-rendering":"crispEdges"})});B.attr({height:Z._height,fill:M.slideBoxFill})}}function N(V,X,k,Z){var B=l.ensureSingle(V,"g",M.grabberMinClassName),J=l.ensureSingle(V,"g",M.grabberMaxClassName),ne={x:0,width:M.handleWidth,rx:M.handleRadius,fill:d.background,stroke:d.defaultLine,"stroke-width":M.handleStrokeWidth,"shape-rendering":"crispEdges"},oe={y:Math.round(Z._height/4),height:Math.round(Z._height/2)},Y=l.ensureSingle(B,"rect",M.handleMinClassName,function(re){re.attr(ne)});Y.attr(oe);var G=l.ensureSingle(J,"rect",M.handleMaxClassName,function(re){re.attr(ne)});G.attr(oe);var K={width:M.grabAreaWidth,x:0,y:0,fill:M.grabAreaFill,cursor:X._context.staticPlot?void 0:M.grabAreaCursor},ee=l.ensureSingle(B,"rect",M.grabAreaMinClassName,function(re){re.attr(K)});ee.attr("height",Z._height);var ie=l.ensureSingle(J,"rect",M.grabAreaMaxClassName,function(re){re.attr(K)});ie.attr("height",Z._height)}},7944:function(f,u,r){var i=r(9811),c=r(2736),a=r(4636),l=r(4284).LINE_SPACING,s=a.name;function v(d){var p=d&&d[s];return p&&p.visible}u.isVisible=v,u.makeData=function(d){var p=i.list({_fullLayout:d},"x",!0),o=d.margin,y=[];if(!d._has("gl2d"))for(var _=0;_<p.length;_++){var E=p[_];if(v(E)){y.push(E);var M=E[s];M._id=s+E._id,M._height=(d.height-o.b-o.t)*M.thickness,M._offsetShift=Math.floor(M.borderwidth/2)}}d._rangeSliderData=y},u.autoMarginOpts=function(d,p){var o=d._fullLayout,y=p[s],_=p._id.charAt(0),E=0,M=0;if(p.side==="bottom"&&(E=p._depth,p.title.text!==o._dfltTitle[_])){M=1.5*p.title.font.size+10+y._offsetShift;var b=(p.title.text.match(c.BR_TAG_ALL)||[]).length;M+=b*p.title.font.size*l}return{x:0,y:p._counterDomainMin,l:0,r:0,t:0,b:y._height+E+Math.max(o.margin.b,M),pad:a.extraPad+y._offsetShift*2}}},9692:function(f,u,r){var i=r(3400),c=r(8820),a=r(936),l=r(7944);f.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:i.extendFlat({},c,{yaxis:a})}}},layoutAttributes:r(8820),handleDefaults:r(1659),calcAutorange:r(6652),draw:r(60),isVisible:l.isVisible,makeData:l.makeData,autoMarginOpts:l.autoMarginOpts}},936:function(f){f.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},3956:function(f,u,r){var i=r(3916),c=r(2904).line,a=r(8192).u,l=r(2880).extendFlat,s=r(7824).overrideAll,v=r(1780).templatedArray;r(6208),f.exports=s(v("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:l({},i.xref,{}),yref:l({},i.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:c.color,width:l({},c.width,{min:1,dflt:1}),dash:l({},a,{dflt:"dot"})}}),"arraydraw","from-root")},3280:function(f){f.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},4224:function(f,u,r){var i=r(3400),c=r(4460),a=r(1272),l=r(3956),s=r(5152);f.exports=function(p,o){a(p,o,{name:"selections",handleItemDefaults:v});for(var y=o.selections,_=0;_<y.length;_++){var E=y[_];E&&E.path===void 0&&(E.x0===void 0||E.x1===void 0||E.y0===void 0||E.y1===void 0)&&(o.selections[_]=null)}};function v(d,p,o){function y(B,J){return i.coerce(d,p,l,B,J)}var _=y("path"),E=_?"path":"rect",M=y("type",E),b=M!=="path";b&&delete p.path,y("opacity"),y("line.color"),y("line.width"),y("line.dash");for(var w=["x","y"],A=0;A<2;A++){var R=w[A],T={_fullLayout:o},C,m,L,D=c.coerceRef(d,p,T,R);if(C=c.getFromId(T,D),C._selectionIndices.push(p._index),L=s.rangeToShapePosition(C),m=s.shapePositionToRange(C),b){var O=R+"0",N=R+"1",V=d[O],X=d[N];d[O]=m(d[O],!0),d[N]=m(d[N],!0),c.coercePosition(p,T,y,D,O),c.coercePosition(p,T,y,D,N);var k=p[O],Z=p[N];k!==void 0&&Z!==void 0&&(p[O]=L(k),p[N]=L(Z),d[O]=V,d[N]=X)}}b&&i.noneOrAll(d,p,["x0","x1","y0","y1"])}},3640:function(f,u,r){var i=r(9856).readPaths,c=r(5496),a=r(1936).clearOutlineControllers,l=r(6308),s=r(3616),v=r(1780).arrayEditor,d=r(5152),p=d.getPathString;f.exports={draw:o,drawOne:_,activateLastSelection:b};function o(A){var R=A._fullLayout;a(A),R._selectionLayer.selectAll("path").remove();for(var T in R._plots){var C=R._plots[T].selectionLayer;C&&C.selectAll("path").remove()}for(var m=0;m<R.selections.length;m++)_(A,m)}function y(A){return A._context.editSelection}function _(A,R){A._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+R+'"]').remove();var T=d.makeSelectionsOptionsAndPlotinfo(A,R),C=T.options,m=T.plotinfo;if(!C._input)return;L(A._fullLayout._selectionLayer);function L(D){var O=p(A,C),N={"data-index":R,"fill-rule":"evenodd",d:O},V=C.opacity,X="rgba(0,0,0,0)",k=C.line.color||l.contrast(A._fullLayout.plot_bgcolor),Z=C.line.width,B=C.line.dash;Z||(Z=5,B="solid");var J=y(A)&&A._fullLayout._activeSelectionIndex===R;J&&(X=A._fullLayout.activeselection.fillcolor,V=A._fullLayout.activeselection.opacity);for(var ne=[],oe=1;oe>=0;oe--){var Y=D.append("path").attr(N).style("opacity",oe?.1:V).call(l.stroke,k).call(l.fill,X).call(s.dashLine,oe?"solid":B,oe?4+Z:Z);if(E(Y,A,C),J){var G=v(A.layout,"selections",C);Y.style({cursor:"move"});var K={element:Y.node(),plotinfo:m,gd:A,editHelpers:G,isActiveSelection:!0},ee=i(O,A);c(ee,Y,K)}else Y.style("pointer-events",oe?"all":"none");ne[oe]=Y}var ie=ne[0],re=ne[1];re.node().addEventListener("click",function(){return M(A,ie)})}}function E(A,R,T){var C=T.xref+T.yref;s.setClipUrl(A,"clip"+R._fullLayout._uid+C,R)}function M(A,R){if(y(A)){var T=R.node(),C=+T.getAttribute("data-index");if(C>=0){if(C===A._fullLayout._activeSelectionIndex){w(A);return}A._fullLayout._activeSelectionIndex=C,A._fullLayout._deactivateSelection=w,o(A)}}}function b(A){if(y(A)){var R=A._fullLayout.selections.length-1;A._fullLayout._activeSelectionIndex=R,A._fullLayout._deactivateSelection=w,o(A)}}function w(A){if(y(A)){var R=A._fullLayout._activeSelectionIndex;R>=0&&(a(A),delete A._fullLayout._activeSelectionIndex,o(A))}}},4200:function(f,u,r){var i=r(8192).u,c=r(2880).extendFlat;f.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:c({},i,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},1004:function(f){f.exports=function(r,i,c){c("newselection.mode");var a=c("newselection.line.width");a&&(c("newselection.line.color"),c("newselection.line.dash")),c("activeselection.fillcolor"),c("activeselection.opacity")}},5968:function(f,u,r){var i=r(2760),c=i.selectMode,a=r(1936),l=a.clearOutline,s=r(9856),v=s.readPaths,d=s.writePaths,p=s.fixDatesForPaths;f.exports=function(y,_){if(y.length){var E=y[0][0];if(E){var M=E.getAttribute("d"),b=_.gd,w=b._fullLayout.newselection,A=_.plotinfo,R=A.xaxis,T=A.yaxis,C=_.isActiveSelection,m=_.dragmode,L=(b.layout||{}).selections||[];if(!c(m)&&C!==void 0){var D=b._fullLayout._activeSelectionIndex;if(D<L.length)switch(b._fullLayout.selections[D].type){case"rect":m="select";break;case"path":m="lasso";break}}var O=v(M,b,A,C),N={xref:R._id,yref:T._id,opacity:w.opacity,line:{color:w.line.color,width:w.line.width,dash:w.line.dash}},V;O.length===1&&(V=O[0]),V&&V.length===5&&m==="select"?(N.type="rect",N.x0=V[0][1],N.y0=V[0][2],N.x1=V[2][1],N.y1=V[2][2]):(N.type="path",R&&T&&p(O,R,T),N.path=d(O),V=null),l(b);for(var X=_.editHelpers,k=(X||{}).modifyItem,Z=[],B=0;B<L.length;B++){var J=b._fullLayout.selections[B];if(!J){Z[B]=J;continue}if(Z[B]=J._input,C!==void 0&&B===b._fullLayout._activeSelectionIndex){var ne=N;switch(J.type){case"rect":k("x0",ne.x0),k("x1",ne.x1),k("y0",ne.y0),k("y1",ne.y1);break;case"path":k("path",ne.path);break}}}return C===void 0?(Z.push(N),Z):X?X.getUpdateObj():{}}}}},5840:function(f,u,r){var i=r(3400).strTranslate;function c(v,d){switch(v.type){case"log":return v.p2d(d);case"date":return v.p2r(d,0,v.calendar);default:return v.p2r(d)}}function a(v,d){switch(v.type){case"log":return v.d2p(d);case"date":return v.r2p(d,0,v.calendar);default:return v.r2p(d)}}function l(v){var d=v._id.charAt(0)==="y"?1:0;return function(p){return c(v,p[d])}}function s(v){return i(v.xaxis._offset,v.yaxis._offset)}f.exports={p2r:c,r2p:a,axValue:l,getTransform:s}},2676:function(f,u,r){var i=r(3640),c=r(3156);f.exports={moduleType:"component",name:"selections",layoutAttributes:r(3956),supplyLayoutDefaults:r(4224),supplyDrawNewSelectionDefaults:r(1004),includeBasePlot:r(6632)("selections"),draw:i.draw,drawOne:i.drawOne,reselect:c.reselect,prepSelect:c.prepSelect,clearOutline:c.clearOutline,clearSelectionsCache:c.clearSelectionsCache,selectOnClick:c.selectOnClick}},3156:function(f,u,r){var i=r(4756),c=r(1456),a=r(4040),l=r(3616).dashStyle,s=r(6308),v=r(3024),d=r(624).makeEventData,p=r(2760),o=p.freeMode,y=p.rectMode,_=p.drawMode,E=p.openMode,M=p.selectMode,b=r(5152),w=r(3068),A=r(5496),R=r(1936).clearOutline,T=r(9856),C=T.handleEllipse,m=T.readPaths,L=r(3940).newShapes,D=r(5968),O=r(3640).activateLastSelection,N=r(3400),V=N.sorterAsc,X=r(2065),k=r(1200),Z=r(9811).getFromId,B=r(3696),J=r(9172).redrawReglTraces,ne=r(3280),oe=ne.MINSELECT,Y=X.filter,G=X.tester,K=r(5840),ee=K.p2r,ie=K.axValue,re=K.getTransform;function se(Ue){return Ue.subplot!==void 0}function ge(Ue,De,Ie,Fe,We){var de=!se(Fe),Me=o(We),he=y(We),Ee=E(We),Pe=_(We),Ne=M(We),ht=We==="drawline",nt=We==="drawcircle",Ye=ht||nt,Be=Fe.gd,ut=Be._fullLayout,Dt=Ne&&ut.newselection.mode==="immediate"&&de,Nt=ut._zoomlayer,Wt=Fe.element.getBoundingClientRect(),$t=Fe.plotinfo,Vt=re($t),Ft=De-Wt.left,qt=Ie-Wt.top;ut._calcInverseTransform(Be);var Gt=N.apply3DTransform(ut._invTransform)(Ft,qt);Ft=Gt[0],qt=Gt[1];var Xt=ut._invScaleX,sr=ut._invScaleY,jt=Ft,Ut=qt,tr="M"+Ft+","+qt,Ht=Fe.xaxes[0],lr=Fe.yaxes[0],yr=Ht._length,xr=lr._length,er=Ue.altKey&&!(_(We)&&Ee),fe,Q,Je,Ge,Qe,it,rt;U(Ue,Be,Fe),Me&&(fe=Y([[Ft,qt]],ne.BENDPX));var $e=Nt.selectAll("path.select-outline-"+$t.id).data([1]),je=Pe?ut.newshape:ut.newselection;Pe&&(Fe.hasText=je.label.text||je.label.texttemplate);var ct=Pe&&!Ee?je.fillcolor:"rgba(0,0,0,0)",dt=je.line.color||(de?s.contrast(Be._fullLayout.plot_bgcolor):"#7f7f7f");$e.enter().append("path").attr("class","select-outline select-outline-"+$t.id).style({opacity:Pe?je.opacity/2:1,"stroke-dasharray":l(je.line.dash,je.line.width),"stroke-width":je.line.width+"px","shape-rendering":"crispEdges"}).call(s.stroke,dt).call(s.fill,ct).attr("fill-rule","evenodd").classed("cursor-move",!!Pe).attr("transform",Vt).attr("d",tr+"Z");var xt=Nt.append("path").attr("class","zoombox-corners").style({fill:s.background,stroke:s.defaultLine,"stroke-width":1}).attr("transform",Vt).attr("d","M0,0Z");if(Pe&&Fe.hasText){var yt=Nt.select(".label-temp");yt.empty()&&(yt=Nt.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Lt=ut._uid+ne.SELECTID,wt=[],At=q(Be,Fe.xaxes,Fe.yaxes,Fe.subplot);Dt&&!Ue.shiftKey&&(Fe._clearSubplotSelections=function(){if(de){var zt=Ht._id,Zt=lr._id;Ke(Be,zt,Zt,At);for(var Kt=(Be.layout||{}).selections||[],cr=[],or=!1,nr=0;nr<Kt.length;nr++){var mr=ut.selections[nr];mr.xref!==zt||mr.yref!==Zt?cr.push(Kt[nr]):or=!0}or&&(Be._fullLayout._noEmitSelectedAtStart=!0,a.call("_guiRelayout",Be,{selections:cr}))}});var Ot=Ct(Fe);Fe.moveFn=function(zt,Zt){Fe._clearSubplotSelections&&(Fe._clearSubplotSelections(),Fe._clearSubplotSelections=void 0),jt=Math.max(0,Math.min(yr,Xt*zt+Ft)),Ut=Math.max(0,Math.min(xr,sr*Zt+qt));var Kt=Math.abs(jt-Ft),cr=Math.abs(Ut-qt);if(he){var or,nr,mr;if(Ne){var pr=ut.selectdirection;switch(pr==="any"?cr<Math.min(Kt*.6,oe)?or="h":Kt<Math.min(cr*.6,oe)?or="v":or="d":or=pr,or){case"h":nr=nt?xr/2:0,mr=xr;break;case"v":nr=nt?yr/2:0,mr=yr;break}}if(Pe)switch(ut.newshape.drawdirection){case"vertical":or="h",nr=nt?xr/2:0,mr=xr;break;case"horizontal":or="v",nr=nt?yr/2:0,mr=yr;break;case"ortho":Kt<cr?(or="h",nr=qt,mr=Ut):(or="v",nr=Ft,mr=jt);break;default:or="d"}or==="h"?(Ge=Ye?C(nt,[jt,nr],[jt,mr]):[[Ft,nr],[Ft,mr],[jt,mr],[jt,nr]],Ge.xmin=Ye?jt:Math.min(Ft,jt),Ge.xmax=Ye?jt:Math.max(Ft,jt),Ge.ymin=Math.min(nr,mr),Ge.ymax=Math.max(nr,mr),xt.attr("d","M"+Ge.xmin+","+(qt-oe)+"h-4v"+2*oe+"h4ZM"+(Ge.xmax-1)+","+(qt-oe)+"h4v"+2*oe+"h-4Z")):or==="v"?(Ge=Ye?C(nt,[nr,Ut],[mr,Ut]):[[nr,qt],[nr,Ut],[mr,Ut],[mr,qt]],Ge.xmin=Math.min(nr,mr),Ge.xmax=Math.max(nr,mr),Ge.ymin=Ye?Ut:Math.min(qt,Ut),Ge.ymax=Ye?Ut:Math.max(qt,Ut),xt.attr("d","M"+(Ft-oe)+","+Ge.ymin+"v-4h"+2*oe+"v4ZM"+(Ft-oe)+","+(Ge.ymax-1)+"v4h"+2*oe+"v-4Z")):or==="d"&&(Ge=Ye?C(nt,[Ft,qt],[jt,Ut]):[[Ft,qt],[Ft,Ut],[jt,Ut],[jt,qt]],Ge.xmin=Math.min(Ft,jt),Ge.xmax=Math.max(Ft,jt),Ge.ymin=Math.min(qt,Ut),Ge.ymax=Math.max(qt,Ut),xt.attr("d","M0,0Z"))}else Me&&(fe.addPt([jt,Ut]),Ge=fe.filtered);if(Fe.selectionDefs&&Fe.selectionDefs.length?(Je=Xe(Fe.mergedPolygons,Ge,er),Ge.subtract=er,Q=ye(Fe.selectionDefs.concat([Ge]))):(Je=[Ge],Q=G(Ge)),A(Te(Je,Ee),$e,Fe),Ne){var Ar=be(Be,!1),en=Ar.eventData?Ar.eventData.points.slice():[];Ar=be(Be,!1,Q,At,Fe),Q=Ar.selectionTesters,rt=Ar.eventData;var Lr;fe?Lr=fe.filtered:Lr=lt(Je),k.throttle(Lt,ne.SELECTDELAY,function(){wt=we(Q,At);for(var Pr=wt.slice(),nn=0;nn<en.length;nn++){for(var Dn=en[nn],Pn=!1,_r=0;_r<Pr.length;_r++)if(Pr[_r].curveNumber===Dn.curveNumber&&Pr[_r].pointNumber===Dn.pointNumber){Pn=!0;break}Pn||Pr.push(Dn)}Pr.length&&(rt||(rt={}),rt.points=Pr),Ot(rt,Lr),kt(Be,rt)})}},Fe.clickFn=function(zt,Zt){if(xt.remove(),Be._fullLayout._activeShapeIndex>=0){Be._fullLayout._deactivateShape(Be);return}if(!Pe){var Kt=ut.clickmode;k.done(Lt).then(function(){if(k.clear(Lt),zt===2){for($e.remove(),Qe=0;Qe<At.length;Qe++)it=At[Qe],it._module.selectPoints(it,!1);if(Le(Be,At),F(Fe),Et(Be),At.length){var cr=At[0].xaxis,or=At[0].yaxis;if(cr&&or){for(var nr=[],mr=Be._fullLayout.selections,pr=0;pr<mr.length;pr++){var Ar=mr[pr];Ar&&(Ar.xref!==cr._id||Ar.yref!==or._id)&&nr.push(Ar)}nr.length<mr.length&&(Be._fullLayout._noEmitSelectedAtStart=!0,a.call("_guiRelayout",Be,{selections:nr}))}}}else Kt.indexOf("select")>-1&&xe(Zt,Be,Fe.xaxes,Fe.yaxes,Fe.subplot,Fe,$e),Kt==="event"&&St(Be,void 0);v.click(Be,Zt,$t.id)}).catch(N.error)}},Fe.doneFn=function(){xt.remove(),k.done(Lt).then(function(){k.clear(Lt),!Dt&&Ge&&Fe.selectionDefs&&(Ge.subtract=er,Fe.selectionDefs.push(Ge),Fe.mergedPolygons.length=0,[].push.apply(Fe.mergedPolygons,Je)),(Dt||Pe)&&F(Fe,Dt),Fe.doneFnCompleted&&Fe.doneFnCompleted(wt),Ne&&St(Be,rt)}).catch(N.error)}}function xe(Ue,De,Ie,Fe,We,de,Me){var he=De._hoverdata,Ee=De._fullLayout,Pe=Ee.clickmode,Ne=Pe.indexOf("event")>-1,ht=[],nt,Ye,Be,ut,Dt,Nt,Wt,$t,Vt,Ft;if(te(he)){U(Ue,De,de),nt=q(De,Ie,Fe,We);var qt=ue(he,nt),Gt=qt.pointNumbers.length>0;if(Gt?_e(nt,qt):Re(nt)&&(Wt=ve(qt))){for(Me&&Me.remove(),Ft=0;Ft<nt.length;Ft++)Ye=nt[Ft],Ye._module.selectPoints(Ye,!1);Le(De,nt),F(de),Ne&&Et(De)}else{$t=Ue.shiftKey&&(Wt!==void 0?Wt:ve(qt)),Be=Se(qt.pointNumber,qt.searchInfo,$t);var Xt=de.selectionDefs.concat([Be]);for(ut=ye(Xt),Ft=0;Ft<nt.length;Ft++)if(Dt=nt[Ft]._module.selectPoints(nt[Ft],ut),Nt=Ze(Dt,nt[Ft]),ht.length)for(var sr=0;sr<Nt.length;sr++)ht.push(Nt[sr]);else ht=Nt;if(Vt={points:ht},Le(De,nt,Vt),Be&&de&&de.selectionDefs.push(Be),Me){var jt=de.mergedPolygons,Ut=E(de.dragmode);A(Te(jt,Ut),Me,de)}Ne&&St(De,Vt)}}}function Se(Ue,De,Ie){return{pointNumber:Ue,searchInfo:De,subtract:!!Ie}}function ce(Ue){return"pointNumber"in Ue&&"searchInfo"in Ue}function pe(Ue){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(De,Ie,Fe,We){var de=Ue.searchInfo.cd[0].trace._expandedIndex,Me=We.cd[0].trace._expandedIndex;return Me===de&&Fe===Ue.pointNumber},isRect:!1,degenerate:!1,subtract:!!Ue.subtract}}function ye(Ue){if(!Ue.length)return;for(var De=[],Ie=ce(Ue[0])?0:Ue[0][0][0],Fe=Ie,We=ce(Ue[0])?0:Ue[0][0][1],de=We,Me=0;Me<Ue.length;Me++)if(ce(Ue[Me]))De.push(pe(Ue[Me]));else{var he=G(Ue[Me]);he.subtract=!!Ue[Me].subtract,De.push(he),Ie=Math.min(Ie,he.xmin),Fe=Math.max(Fe,he.xmax),We=Math.min(We,he.ymin),de=Math.max(de,he.ymax)}function Ee(Pe,Ne,ht,nt){for(var Ye=!1,Be=0;Be<De.length;Be++)De[Be].contains(Pe,Ne,ht,nt)&&(Ye=!De[Be].subtract);return Ye}return{xmin:Ie,xmax:Fe,ymin:We,ymax:de,pts:[],contains:Ee,isRect:!1,degenerate:!1}}function U(Ue,De,Ie){var Fe=De._fullLayout,We=Ie.plotinfo,de=Ie.dragmode,Me=Fe._lastSelectedSubplot&&Fe._lastSelectedSubplot===We.id,he=(Ue.shiftKey||Ue.altKey)&&!(_(de)&&E(de));Me&&he&&We.selection&&We.selection.selectionDefs&&!Ie.selectionDefs?(Ie.selectionDefs=We.selection.selectionDefs,Ie.mergedPolygons=We.selection.mergedPolygons):(!he||!We.selection)&&F(Ie),Me||(R(De),Fe._lastSelectedSubplot=We.id)}function W(Ue){return Ue._fullLayout._activeShapeIndex>=0}function j(Ue){return Ue._fullLayout._activeSelectionIndex>=0}function F(Ue,De){var Ie=Ue.dragmode,Fe=Ue.plotinfo,We=Ue.gd;W(We)&&We._fullLayout._deactivateShape(We),j(We)&&We._fullLayout._deactivateSelection(We);var de=We._fullLayout,Me=de._zoomlayer,he=_(Ie),Ee=M(Ie);if(he||Ee){var Pe=Me.selectAll(".select-outline-"+Fe.id);if(Pe&&We._fullLayout._outlining){var Ne;he&&(Ne=L(Pe,Ue)),Ne&&a.call("_guiRelayout",We,{shapes:Ne});var ht;Ee&&!se(Ue)&&(ht=D(Pe,Ue)),ht&&(We._fullLayout._noEmitSelectedAtStart=!0,a.call("_guiRelayout",We,{selections:ht}).then(function(){De&&O(We)})),We._fullLayout._outlining=!1}}Fe.selection={},Fe.selection.selectionDefs=Ue.selectionDefs=[],Fe.selection.mergedPolygons=Ue.mergedPolygons=[]}function P(Ue){return Ue._id}function q(Ue,De,Ie,Fe){if(!Ue.calcdata)return[];var We=[],de=De.map(P),Me=Ie.map(P),he,Ee,Pe;for(Pe=0;Pe<Ue.calcdata.length;Pe++)if(he=Ue.calcdata[Pe],Ee=he[0].trace,!(Ee.visible!==!0||!Ee._module||!Ee._module.selectPoints))if(se({subplot:Fe})&&(Ee.subplot===Fe||Ee.geo===Fe))We.push(z(Ee._module,he,De[0],Ie[0]));else if(Ee.type==="splom"){if(Ee._xaxes[de[0]]&&Ee._yaxes[Me[0]]){var Ne=z(Ee._module,he,De[0],Ie[0]);Ne.scene=Ue._fullLayout._splomScenes[Ee.uid],We.push(Ne)}}else if(Ee.type==="sankey"){var ht=z(Ee._module,he,De[0],Ie[0]);We.push(ht)}else{if(de.indexOf(Ee.xaxis)===-1&&(!Ee._xA||!Ee._xA.overlaying)||Me.indexOf(Ee.yaxis)===-1&&(!Ee._yA||!Ee._yA.overlaying))continue;We.push(z(Ee._module,he,Z(Ue,Ee.xaxis),Z(Ue,Ee.yaxis)))}return We}function z(Ue,De,Ie,Fe){return{_module:Ue,cd:De,xaxis:Ie,yaxis:Fe}}function te(Ue){return Ue&&Array.isArray(Ue)&&Ue[0].hoverOnBox!==!0}function ue(Ue,De){var Ie=Ue[0],Fe=-1,We=[],de,Me;for(Me=0;Me<De.length;Me++)if(de=De[Me],Ie.fullData._expandedIndex===de.cd[0].trace._expandedIndex){if(Ie.hoverOnBox===!0)break;Ie.pointNumber!==void 0?Fe=Ie.pointNumber:Ie.binNumber!==void 0&&(Fe=Ie.binNumber,We=Ie.pointNumbers);break}return{pointNumber:Fe,pointNumbers:We,searchInfo:de}}function ve(Ue){var De=Ue.searchInfo.cd[0].trace,Ie=Ue.pointNumber,Fe=Ue.pointNumbers,We=Fe.length>0,de=We?Fe[0]:Ie;return De.selectedpoints?De.selectedpoints.indexOf(de)>-1:!1}function _e(Ue,De){var Ie=[],Fe,We,de,Me;for(Me=0;Me<Ue.length;Me++)Fe=Ue[Me],Fe.cd[0].trace.selectedpoints&&Fe.cd[0].trace.selectedpoints.length>0&&Ie.push(Fe);if(Ie.length===1&&(de=Ie[0]===De.searchInfo,de&&(We=De.searchInfo.cd[0].trace,We.selectedpoints.length===De.pointNumbers.length))){for(Me=0;Me<De.pointNumbers.length;Me++)if(We.selectedpoints.indexOf(De.pointNumbers[Me])<0)return!1;return!0}return!1}function Re(Ue){var De=0,Ie,Fe,We;for(We=0;We<Ue.length;We++)if(Ie=Ue[We],Fe=Ie.cd[0].trace,Fe.selectedpoints&&(Fe.selectedpoints.length>1||(De+=Fe.selectedpoints.length,De>1)))return!1;return De===1}function Le(Ue,De,Ie){var Fe;for(Fe=0;Fe<De.length;Fe++){var We=De[Fe].cd[0].trace._fullInput,de=Ue._fullLayout._tracePreGUI[We.uid]||{};de.selectedpoints===void 0&&(de.selectedpoints=We._input.selectedpoints||null)}var Me;if(Ie){var he=Ie.points||[];for(Fe=0;Fe<De.length;Fe++)Me=De[Fe].cd[0].trace,Me._input.selectedpoints=Me._fullInput.selectedpoints=[],Me._fullInput!==Me&&(Me.selectedpoints=[]);for(var Ee=0;Ee<he.length;Ee++){var Pe=he[Ee],Ne=Pe.data,ht=Pe.fullData,nt=Pe.pointIndex,Ye=Pe.pointIndices;Ye?([].push.apply(Ne.selectedpoints,Ye),Me._fullInput!==Me&&[].push.apply(ht.selectedpoints,Ye)):(Ne.selectedpoints.push(nt),Me._fullInput!==Me&&ht.selectedpoints.push(nt))}}else for(Fe=0;Fe<De.length;Fe++)Me=De[Fe].cd[0].trace,delete Me.selectedpoints,delete Me._input.selectedpoints,Me._fullInput!==Me&&delete Me._fullInput.selectedpoints;Ve(Ue,De)}function Ve(Ue,De){for(var Ie=!1,Fe=0;Fe<De.length;Fe++){var We=De[Fe],de=We.cd;a.traceIs(de[0].trace,"regl")&&(Ie=!0);var Me=We._module,he=Me.styleOnSelect||Me.style;he&&(he(Ue,de,de[0].node3),de[0].nodeRangePlot3&&he(Ue,de,de[0].nodeRangePlot3))}Ie&&(B(Ue),J(Ue))}function Xe(Ue,De,Ie){for(var Fe=Ie?i.difference:i.union,We=Fe({regions:Ue},{regions:[De]}),de=We.regions.reverse(),Me=0;Me<de.length;Me++){var he=de[Me];he.subtract=pt(he,de.slice(0,Me))}return de}function Ze(Ue,De){if(Array.isArray(Ue))for(var Ie=De.cd,Fe=De.cd[0].trace,We=0;We<Ue.length;We++)Ue[We]=d(Ue[We],Fe,Ie);return Ue}function Te(Ue,De){for(var Ie=[],Fe=0;Fe<Ue.length;Fe++){Ie[Fe]=[];for(var We=0;We<Ue[Fe].length;We++){Ie[Fe][We]=[],Ie[Fe][We][0]=We?"L":"M";for(var de=0;de<Ue[Fe][We].length;de++)Ie[Fe][We].push(Ue[Fe][We][de])}De||Ie[Fe].push(["Z",Ie[Fe][0][1],Ie[Fe][0][2]])}return Ie}function we(Ue,De){for(var Ie=[],Fe,We,de=0;de<De.length;de++){var Me=De[de];We=Me._module.selectPoints(Me,Ue),Fe=Ze(We,Me),Ie=Ie.concat(Fe)}return Ie}function be(Ue,De,Ie,Fe,We){var de=!!Fe,Me,he,Ee;We&&(Me=We.plotinfo,he=We.xaxes[0]._id,Ee=We.yaxes[0]._id);var Pe=[],Ne=[],ht=vt(Ue),nt=Ue._fullLayout;if(Me){var Ye=nt._zoomlayer,Be=nt.dragmode,ut=_(Be),Dt=M(Be);if(ut||Dt){var Nt=Z(Ue,he,"x"),Wt=Z(Ue,Ee,"y");if(Nt&&Wt){var $t=Ye.selectAll(".select-outline-"+Me.id);if($t&&Ue._fullLayout._outlining&&$t.length){for(var Vt=$t[0][0],Ft=Vt.getAttribute("d"),qt=m(Ft,Ue,Me),Gt=[],Xt=0;Xt<qt.length;Xt++){for(var sr=qt[Xt],jt=[],Ut=0;Ut<sr.length;Ut++)jt.push([ft(Nt,sr[Ut][1]),ft(Wt,sr[Ut][2])]);jt.xref=he,jt.yref=Ee,jt.subtract=pt(jt,Gt),Gt.push(jt)}ht=ht.concat(Gt)}}}}var tr=he&&Ee?[he+Ee]:nt._subplots.cartesian;ke(Ue);for(var Ht={},lr=0;lr<tr.length;lr++){var yr=tr[lr],xr=yr.indexOf("y"),er=yr.slice(0,xr),fe=yr.slice(xr),Q=he&&Ee?Ie:void 0;if(Q=st(ht,er,fe,Q),Q){var Je=Fe;if(!de){var Ge=Z(Ue,er,"x"),Qe=Z(Ue,fe,"y");Je=q(Ue,[Ge],[Qe],yr);for(var it=0;it<Je.length;it++){var rt=Je[it],$e=rt.cd[0],je=$e.trace;if(rt._module.name==="scattergl"&&!$e.t.xpx){var ct=je.x,dt=je.y,xt=je._length;$e.t.xpx=[],$e.t.ypx=[];for(var yt=0;yt<xt;yt++)$e.t.xpx[yt]=Ge.c2p(ct[yt]),$e.t.ypx[yt]=Qe.c2p(dt[yt])}rt._module.name==="splom"&&(Ht[je.uid]||(Ht[je.uid]=!0))}}var Lt=we(Q,Je);Pe=Pe.concat(Lt),Ne=Ne.concat(Je)}}var wt={points:Pe};Le(Ue,Ne,wt);var At=nt.clickmode,Ot=At.indexOf("event")>-1&&De;if(!Me&&De){var zt=vt(Ue,!0);if(zt.length){var Zt=zt[0].xref,Kt=zt[0].yref;if(Zt&&Kt){var cr=lt(zt),or=ot([Z(Ue,Zt,"x"),Z(Ue,Kt,"y")]);or(wt,cr)}}Ue._fullLayout._noEmitSelectedAtStart?Ue._fullLayout._noEmitSelectedAtStart=!1:Ot&&St(Ue,wt),nt._reselect=!1}if(!Me&&nt._deselect){var nr=nt._deselect;he=nr.xref,Ee=nr.yref,He(he,Ee,Ne)||Ke(Ue,he,Ee,Fe),Ot&&(wt.points.length?St(Ue,wt):Et(Ue)),nt._deselect=!1}return{eventData:wt,selectionTesters:Ie}}function ke(Ue){var De=Ue.calcdata;if(De)for(var Ie=0;Ie<De.length;Ie++){var Fe=De[Ie][0],We=Fe.trace,de=Ue._fullLayout._splomScenes;if(de){var Me=de[We.uid];Me&&(Me.selectBatch=[])}}}function He(Ue,De,Ie){for(var Fe=0;Fe<Ie.length;Fe++){var We=Ie[Fe];if(We.xaxis&&We.xaxis._id===Ue&&We.yaxis&&We.yaxis._id===De)return!0}return!1}function Ke(Ue,De,Ie,Fe){Fe=q(Ue,[Z(Ue,De,"x")],[Z(Ue,Ie,"y")],De+Ie);for(var We=0;We<Fe.length;We++){var de=Fe[We];de._module.selectPoints(de,!1)}Le(Ue,Fe)}function st(Ue,De,Ie,Fe){for(var We,de=0;de<Ue.length;de++){var Me=Ue[de];if(!(De!==Me.xref||Ie!==Me.yref))if(We){var he=!!Me.subtract;We=Xe(We,Me,he),Fe=ye(We)}else We=[Me],Fe=G(Me)}return Fe}function vt(Ue,De){for(var Ie=[],Fe=Ue._fullLayout,We=Fe.selections,de=We.length,Me=0;Me<de;Me++)if(!(De&&Me!==Fe._activeSelectionIndex)){var he=We[Me];if(he){var Ee=he.xref,Pe=he.yref,Ne=Z(Ue,Ee,"x"),ht=Z(Ue,Pe,"y"),nt,Ye,Be,ut,Dt;if(he.type==="rect"){Dt=[];var Nt=ft(Ne,he.x0),Wt=ft(Ne,he.x1),$t=ft(ht,he.y0),Vt=ft(ht,he.y1);Dt=[[Nt,$t],[Nt,Vt],[Wt,Vt],[Wt,$t]],nt=Math.min(Nt,Wt),Ye=Math.max(Nt,Wt),Be=Math.min($t,Vt),ut=Math.max($t,Vt),Dt.xmin=nt,Dt.xmax=Ye,Dt.ymin=Be,Dt.ymax=ut,Dt.xref=Ee,Dt.yref=Pe,Dt.subtract=!1,Dt.isRect=!0,Ie.push(Dt)}else if(he.type==="path")for(var Ft=he.path.split("Z"),qt=[],Gt=0;Gt<Ft.length;Gt++){var Xt=Ft[Gt];if(Xt){Xt+="Z";var sr=b.extractPathCoords(Xt,w.paramIsX,"raw"),jt=b.extractPathCoords(Xt,w.paramIsY,"raw");nt=1/0,Ye=-1/0,Be=1/0,ut=-1/0,Dt=[];for(var Ut=0;Ut<sr.length;Ut++){var tr=ft(Ne,sr[Ut]),Ht=ft(ht,jt[Ut]);Dt.push([tr,Ht]),nt=Math.min(tr,nt),Ye=Math.max(tr,Ye),Be=Math.min(Ht,Be),ut=Math.max(Ht,ut)}Dt.xmin=nt,Dt.xmax=Ye,Dt.ymin=Be,Dt.ymax=ut,Dt.xref=Ee,Dt.yref=Pe,Dt.subtract=pt(Dt,qt),qt.push(Dt),Ie.push(Dt)}}}}return Ie}function pt(Ue,De){for(var Ie=!1,Fe=0;Fe<De.length;Fe++)for(var We=De[Fe],de=0;de<Ue.length;de++)if(c(Ue[de],We)){Ie=!Ie;break}return Ie}function ft(Ue,De){return Ue.type==="date"&&(De=De.replace("_"," ")),Ue.type==="log"?Ue.c2p(De):Ue.r2p(De,null,Ue.calendar)}function lt(Ue){for(var De=Ue.length,Ie=[],Fe=0;Fe<De;Fe++){var We=Ue[Fe];Ie=Ie.concat(We),Ie=Ie.concat([We[0]])}return Mt(Ie)}function Mt(Ue){return Ue.isRect=Ue.length===5&&Ue[0][0]===Ue[4][0]&&Ue[0][1]===Ue[4][1]&&Ue[0][0]===Ue[1][0]&&Ue[2][0]===Ue[3][0]&&Ue[0][1]===Ue[3][1]&&Ue[1][1]===Ue[2][1]||Ue[0][1]===Ue[1][1]&&Ue[2][1]===Ue[3][1]&&Ue[0][0]===Ue[3][0]&&Ue[1][0]===Ue[2][0],Ue.isRect&&(Ue.xmin=Math.min(Ue[0][0],Ue[2][0]),Ue.xmax=Math.max(Ue[0][0],Ue[2][0]),Ue.ymin=Math.min(Ue[0][1],Ue[2][1]),Ue.ymax=Math.max(Ue[0][1],Ue[2][1])),Ue}function ot(Ue){return function(De,Ie){for(var Fe,We,de=0;de<Ue.length;de++){var Me=Ue[de],he=Me._id,Ee=he.charAt(0);if(Ie.isRect){Fe||(Fe={});var Pe=Ie[Ee+"min"],Ne=Ie[Ee+"max"];Pe!==void 0&&Ne!==void 0&&(Fe[he]=[ee(Me,Pe),ee(Me,Ne)].sort(V))}else We||(We={}),We[he]=Ie.map(ie(Me))}Fe&&(De.range=Fe),We&&(De.lassoPoints=We)}}function Ct(Ue){var De=Ue.plotinfo;return De.fillRangeItems||ot(Ue.xaxes.concat(Ue.yaxes))}function kt(Ue,De){Ue.emit("plotly_selecting",De)}function St(Ue,De){De&&(De.selections=(Ue.layout||{}).selections||[]),Ue.emit("plotly_selected",De)}function Et(Ue){Ue.emit("plotly_deselect",null)}f.exports={reselect:be,prepSelect:ge,clearOutline:R,clearSelectionsCache:F,selectOnClick:xe}},6056:function(f,u,r){var i=r(3916),c=r(5376),a=r(2904).line,l=r(8192).u,s=r(2880).extendFlat,v=r(1780).templatedArray;r(6208);var d=r(5464),p=r(1776).ye,o=r(7728);f.exports=v("shape",{visible:s({},d.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:s({},d.legend,{editType:"calc+arraydraw"}),legendgroup:s({},d.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:s({},d.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:c({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:s({},d.legendrank,{editType:"calc+arraydraw"}),legendwidth:s({},d.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:s({},i.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:s({},i.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:s({},a.color,{editType:"arraydraw"}),width:s({},a.width,{editType:"calc+arraydraw"}),dash:s({},l,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:p({},{keys:Object.keys(o)}),font:c({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},6084:function(f,u,r){var i=r(3400),c=r(4460),a=r(3068),l=r(5152);f.exports=function(y){var _=y._fullLayout,E=i.filterVisible(_.shapes);if(!(!E.length||!y._fullData.length))for(var M=0;M<E.length;M++){var b=E[M];b._extremes={};var w,A,R=c.getRefType(b.xref),T=c.getRefType(b.yref);if(b.xref!=="paper"&&R!=="domain"){var C=b.xsizemode==="pixel"?b.xanchor:b.x0,m=b.xsizemode==="pixel"?b.xanchor:b.x1;w=c.getFromId(y,b.xref),A=p(w,C,m,b.path,a.paramIsX),A&&(b._extremes[w._id]=c.findExtremes(w,A,s(b)))}if(b.yref!=="paper"&&T!=="domain"){var L=b.ysizemode==="pixel"?b.yanchor:b.y0,D=b.ysizemode==="pixel"?b.yanchor:b.y1;w=c.getFromId(y,b.yref),A=p(w,L,D,b.path,a.paramIsY),A&&(b._extremes[w._id]=c.findExtremes(w,A,v(b)))}}};function s(o){return d(o.line.width,o.xsizemode,o.x0,o.x1,o.path,!1)}function v(o){return d(o.line.width,o.ysizemode,o.y0,o.y1,o.path,!0)}function d(o,y,_,E,M,b){var w=o/2,A=b;if(y==="pixel"){var R=M?l.extractPathCoords(M,b?a.paramIsY:a.paramIsX):[_,E],T=i.aggNums(Math.max,null,R),C=i.aggNums(Math.min,null,R),m=C<0?Math.abs(C)+w:w,L=T>0?T+w:w;return{ppad:w,ppadplus:A?m:L,ppadminus:A?L:m}}else return{ppad:w}}function p(o,y,_,E,M){var b=o.type==="category"||o.type==="multicategory"?o.r2c:o.d2c;if(y!==void 0)return[b(y),b(_)];if(E){var w=1/0,A=-1/0,R=E.match(a.segmentRE),T,C,m,L,D;for(o.type==="date"&&(b=l.decodeDate(b)),T=0;T<R.length;T++)C=R[T],m=M[C.charAt(0)].drawn,m!==void 0&&(L=R[T].substr(1).match(a.paramRE),!(!L||L.length<m)&&(D=b(L[m]),D<w&&(w=D),D>A&&(A=D)));if(A>=w)return[w,A]}}},3068:function(f){f.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},3712:function(f,u,r){var i=r(3400),c=r(4460),a=r(1272),l=r(6056),s=r(5152);f.exports=function(o,y){a(o,y,{name:"shapes",handleItemDefaults:d})};function v(p,o){return p?"bottom":o.indexOf("top")!==-1?"top":o.indexOf("bottom")!==-1?"bottom":"middle"}function d(p,o,y){function _(ce,pe){return i.coerce(p,o,l,ce,pe)}o._isShape=!0;var E=_("visible");if(E){var M=_("showlegend");M&&(_("legend"),_("legendwidth"),_("legendgroup"),_("legendgrouptitle.text"),i.coerceFont(_,"legendgrouptitle.font"),_("legendrank"));var b=_("path"),w=b?"path":"rect",A=_("type",w),R=A!=="path";R&&delete o.path,_("editable"),_("layer"),_("opacity"),_("fillcolor"),_("fillrule");var T=_("line.width");T&&(_("line.color"),_("line.dash"));for(var C=_("xsizemode"),m=_("ysizemode"),L=["x","y"],D=0;D<2;D++){var O=L[D],N=O+"anchor",V=O==="x"?C:m,X={_fullLayout:y},k,Z,B,J=c.coerceRef(p,o,X,O,void 0,"paper"),ne=c.getRefType(J);if(ne==="range"?(k=c.getFromId(X,J),k._shapeIndices.push(o._index),B=s.rangeToShapePosition(k),Z=s.shapePositionToRange(k)):Z=B=i.identity,R){var oe=.25,Y=.75,G=O+"0",K=O+"1",ee=p[G],ie=p[K];p[G]=Z(p[G],!0),p[K]=Z(p[K],!0),V==="pixel"?(_(G,0),_(K,10)):(c.coercePosition(o,X,_,J,G,oe),c.coercePosition(o,X,_,J,K,Y)),o[G]=B(o[G]),o[K]=B(o[K]),p[G]=ee,p[K]=ie}if(V==="pixel"){var re=p[N];p[N]=Z(p[N],!0),c.coercePosition(o,X,_,J,N,.25),o[N]=B(o[N]),p[N]=re}}R&&i.noneOrAll(p,o,["x0","x1","y0","y1"]);var se=A==="line",ge,xe;if(R&&(ge=_("label.texttemplate")),ge||(xe=_("label.text")),xe||ge){_("label.textangle");var Se=_("label.textposition",se?"middle":"middle center");_("label.xanchor"),_("label.yanchor",v(se,Se)),_("label.padding"),i.coerceFont(_,"label.font",y.font)}}}},728:function(f,u,r){var i=r(3400),c=r(4460),a=r(2736),l=r(3616),s=r(9856).readPaths,v=r(5152),d=v.getPathString,p=r(7728),o=r(4284).FROM_TL;f.exports=function(M,b,w,A){if(A.selectAll(".shape-label").remove(),!!(w.label.text||w.label.texttemplate)){var R;if(w.label.texttemplate){var T={};if(w.type!=="path"){var C=c.getFromId(M,w.xref),m=c.getFromId(M,w.yref);for(var L in p){var D=p[L](w,C,m);D!==void 0&&(T[L]=D)}}R=i.texttemplateStringForShapes(w.label.texttemplate,{},M._fullLayout._d3locale,T)}else R=w.label.text;var O={"data-index":b},N=w.label.font,V={"data-notex":1},X=A.append("g").attr(O).classed("shape-label",!0),k=X.append("text").attr(V).classed("shape-label-text",!0).text(R),Z,B,J,ne;if(w.path){var oe=d(M,w),Y=s(oe,M);Z=1/0,J=1/0,B=-1/0,ne=-1/0;for(var G=0;G<Y.length;G++)for(var K=0;K<Y[G].length;K++)for(var ee=Y[G][K],ie=1;ie<ee.length;ie+=2){var re=ee[ie],se=ee[ie+1];Z=Math.min(Z,re),B=Math.max(B,re),J=Math.min(J,se),ne=Math.max(ne,se)}}else{var ge=c.getFromId(M,w.xref),xe=c.getRefType(w.xref),Se=c.getFromId(M,w.yref),ce=c.getRefType(w.yref),pe=v.getDataToPixel(M,ge,!1,xe),ye=v.getDataToPixel(M,Se,!0,ce);Z=pe(w.x0),B=pe(w.x1),J=ye(w.y0),ne=ye(w.y1)}var U=w.label.textangle;U==="auto"&&(w.type==="line"?U=y(Z,J,B,ne):U=0),k.call(function(z){return z.call(l.font,N).attr({}),a.convertToTspans(z,M),z});var W=l.bBox(k.node()),j=_(Z,J,B,ne,w,U,W),F=j.textx,P=j.texty,q=j.xanchor;k.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[q],y:P,x:F,transform:"rotate("+U+","+F+","+P+")"}).call(a.positionText,F,P)}};function y(E,M,b,w){var A,R;return R=Math.abs(b-E),b>=E?A=M-w:A=w-M,-180/Math.PI*Math.atan2(A,R)}function _(E,M,b,w,A,R,T){var C=A.label.textposition,m=A.label.textangle,L=A.label.padding,D=A.type,O=Math.PI/180*R,N=Math.sin(O),V=Math.cos(O),X=A.label.xanchor,k=A.label.yanchor,Z,B,J,ne;if(D==="line"){C==="start"?(Z=E,B=M):C==="end"?(Z=b,B=w):(Z=(E+b)/2,B=(M+w)/2),X==="auto"&&(C==="start"?m==="auto"?b>E?X="left":b<E?X="right":X="center":b>E?X="right":b<E?X="left":X="center":C==="end"?m==="auto"?b>E?X="right":b<E?X="left":X="center":b>E?X="left":b<E?X="right":X="center":X="center");var oe={left:1,center:0,right:-1},Y={bottom:-1,middle:0,top:1};if(m==="auto"){var G=Y[k];J=-L*N*G,ne=L*V*G}else{var K=oe[X],ee=Y[k];J=L*K,ne=L*ee}Z=Z+J,B=B+ne}else J=L+3,C.indexOf("right")!==-1?(Z=Math.max(E,b)-J,X==="auto"&&(X="right")):C.indexOf("left")!==-1?(Z=Math.min(E,b)+J,X==="auto"&&(X="left")):(Z=(E+b)/2,X==="auto"&&(X="center")),C.indexOf("top")!==-1?B=Math.min(M,w):C.indexOf("bottom")!==-1?B=Math.max(M,w):B=(M+w)/2,ne=L,k==="bottom"?B=B-ne:k==="top"&&(B=B+ne);var ie=o[k],re=A.label.font.size,se=T.height,ge=(se*ie-re)*N,xe=-(se*ie-re)*V;return{textx:Z+ge,texty:B+xe,xanchor:X}}},5496:function(f,u,r){var i=r(3400),c=i.strTranslate,a=r(6476),l=r(2760),s=l.drawMode,v=l.selectMode,d=r(4040),p=r(6308),o=r(7e3),y=o.i000,_=o.i090,E=o.i180,M=o.i270,b=r(1936),w=b.clearOutlineControllers,A=r(9856),R=A.pointsOnRectangle,T=A.pointsOnEllipse,C=A.writePaths,m=r(3940).newShapes,L=r(3940).createShapeObj,D=r(5968),O=r(728);f.exports=function k(Z,B,J,ne){ne||(ne=0);var oe=J.gd;function Y(){k(Z,B,J,ne++),(T(Z[0])||J.hasText)&&G({redrawing:!0})}function G(Xe){var Ze={};J.isActiveShape!==void 0&&(J.isActiveShape=!1,Ze=m(B,J)),J.isActiveSelection!==void 0&&(J.isActiveSelection=!1,Ze=D(B,J),oe._fullLayout._reselect=!0),Object.keys(Ze).length&&d.call((Xe||{}).redrawing?"relayout":"_guiRelayout",oe,Ze)}var K=oe._fullLayout,ee=K._zoomlayer,ie=J.dragmode,re=s(ie),se=v(ie);(re||se)&&(oe._fullLayout._outlining=!0),w(oe),B.attr("d",C(Z));var ge,xe,Se,ce,pe;if(!ne&&(J.isActiveShape||J.isActiveSelection)){pe=N([],Z);var ye=ee.append("g").attr("class","outline-controllers");te(ye),Ve()}if(re&&J.hasText){var U=ee.select(".label-temp"),W=L(B,J,J.dragmode);O(oe,"label-temp",W,U)}function j(Xe){Se=+Xe.srcElement.getAttribute("data-i"),ce=+Xe.srcElement.getAttribute("data-j"),ge[Se][ce].moveFn=F}function F(Xe,Ze){if(Z.length){var Te=pe[Se][ce][1],we=pe[Se][ce][2],be=Z[Se],ke=be.length;if(R(be)){var He=Xe,Ke=Ze;if(J.isActiveSelection){var st=V(be,ce);st[1]===be[ce][1]?Ke=0:He=0}for(var vt=0;vt<ke;vt++)if(vt!==ce){var pt=be[vt];pt[1]===be[ce][1]&&(pt[1]=Te+He),pt[2]===be[ce][2]&&(pt[2]=we+Ke)}if(be[ce][1]=Te+He,be[ce][2]=we+Ke,!R(be))for(var ft=0;ft<ke;ft++)for(var lt=0;lt<be[ft].length;lt++)be[ft][lt]=pe[Se][ft][lt]}else be[ce][1]=Te+Xe,be[ce][2]=we+Ze;Y()}}function P(){G()}function q(){if(Z.length&&Z[Se]&&Z[Se].length){for(var Xe=[],Ze=0;Ze<Z[Se].length;Ze++)Ze!==ce&&Xe.push(Z[Se][Ze]);Xe.length>1&&!(Xe.length===2&&Xe[1][0]==="Z")&&(ce===0&&(Xe[0][0]="M"),Z[Se]=Xe,Y(),G())}}function z(Xe,Ze){if(Xe===2){Se=+Ze.srcElement.getAttribute("data-i"),ce=+Ze.srcElement.getAttribute("data-j");var Te=Z[Se];!R(Te)&&!T(Te)&&q()}}function te(Xe){ge=[];for(var Ze=0;Ze<Z.length;Ze++){var Te=Z[Ze],we=R(Te),be=!we&&T(Te);ge[Ze]=[];for(var ke=Te.length,He=0;He<ke;He++)if(Te[He][0]!=="Z"&&!(be&&He!==y&&He!==_&&He!==E&&He!==M)){var Ke=we&&J.isActiveSelection,st;Ke&&(st=V(Te,He));var vt=Te[He][1],pt=Te[He][2],ft=Xe.append(Ke?"rect":"circle").attr("data-i",Ze).attr("data-j",He).style({fill:p.background,stroke:p.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Ke){var lt=st[1]-vt,Mt=st[2]-pt,ot=Mt?5:Math.max(Math.min(25,Math.abs(lt)-5),5),Ct=lt?5:Math.max(Math.min(25,Math.abs(Mt)-5),5);ft.classed(Mt?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",ot).attr("height",Ct).attr("x",vt-ot/2).attr("y",pt-Ct/2).attr("transform",c(lt/2,Mt/2))}else ft.classed("cursor-grab",!0).attr("r",5).attr("cx",vt).attr("cy",pt);ge[Ze][He]={element:ft.node(),gd:oe,prepFn:j,doneFn:P,clickFn:z},a.init(ge[Ze][He])}}}function ue(Xe,Ze){if(Z.length)for(var Te=0;Te<Z.length;Te++)for(var we=0;we<Z[Te].length;we++)for(var be=0;be+2<Z[Te][we].length;be+=2)Z[Te][we][be+1]=pe[Te][we][be+1]+Xe,Z[Te][we][be+2]=pe[Te][we][be+2]+Ze}function ve(Xe,Ze){ue(Xe,Ze),Y()}function _e(Xe){Se=+Xe.srcElement.getAttribute("data-i"),Se||(Se=0),xe[Se].moveFn=ve}function Re(){G()}function Le(Xe){Xe===2&&X(oe)}function Ve(){if(xe=[],!!Z.length){var Xe=0;xe[Xe]={element:B[0][0],gd:oe,prepFn:_e,doneFn:Re,clickFn:Le},a.init(xe[Xe])}}};function N(k,Z){for(var B=0;B<Z.length;B++){var J=Z[B];k[B]=[];for(var ne=0;ne<J.length;ne++){k[B][ne]=[];for(var oe=0;oe<J[ne].length;oe++)k[B][ne][oe]=J[ne][oe]}}return k}function V(k,Z){var B=k[Z][1],J=k[Z][2],ne=k.length,oe,Y,G;return oe=(Z+1)%ne,Y=k[oe][1],G=k[oe][2],Y===B&&G===J&&(oe=(Z+2)%ne,Y=k[oe][1],G=k[oe][2]),[oe,Y,G]}function X(k){if(v(k._fullLayout.dragmode)){w(k);var Z=k._fullLayout._activeSelectionIndex,B=(k.layout||{}).selections||[];if(Z<B.length){for(var J=[],ne=0;ne<B.length;ne++)ne!==Z&&J.push(B[ne]);delete k._fullLayout._activeSelectionIndex;var oe=k._fullLayout.selections[Z];k._fullLayout._deselect={xref:oe.xref,yref:oe.yref},d.call("_guiRelayout",k,{selections:J})}}}},4016:function(f,u,r){var i=r(3428),c=r(4040),a=r(3400),l=r(4460),s=r(9856).readPaths,v=r(5496),d=r(728),p=r(1936).clearOutlineControllers,o=r(6308),y=r(3616),_=r(1780).arrayEditor,E=r(6476),M=r(3972),b=r(3068),w=r(5152),A=w.getPathString;f.exports={draw:R,drawOne:m,eraseActiveShape:X,drawLabel:d};function R(k){var Z=k._fullLayout;Z._shapeUpperLayer.selectAll("path").remove(),Z._shapeLowerLayer.selectAll("path").remove(),Z._shapeUpperLayer.selectAll("text").remove(),Z._shapeLowerLayer.selectAll("text").remove();for(var B in Z._plots){var J=Z._plots[B].shapelayer;J&&(J.selectAll("path").remove(),J.selectAll("text").remove())}for(var ne=0;ne<Z.shapes.length;ne++)Z.shapes[ne].visible===!0&&m(k,ne)}function T(k){return!!k._fullLayout._outlining}function C(k){return!k._context.edits.shapePosition}function m(k,Z){k._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+Z+'"]').remove();var B=w.makeShapesOptionsAndPlotinfo(k,Z),J=B.options,ne=B.plotinfo;if(!J._input||J.visible!==!0)return;if(J.layer==="above")Y(k._fullLayout._shapeUpperLayer);else if(J.xref==="paper"||J.yref==="paper")Y(k._fullLayout._shapeLowerLayer);else if(J.layer==="between")Y(ne.shapelayerBetween);else if(ne._hadPlotinfo){var oe=ne.mainplotinfo||ne;Y(oe.shapelayer)}else Y(k._fullLayout._shapeLowerLayer);function Y(G){var K=A(k,J),ee={"data-index":Z,"fill-rule":J.fillrule,d:K},ie=J.opacity,re=J.fillcolor,se=J.line.width?J.line.color:"rgba(0,0,0,0)",ge=J.line.width,xe=J.line.dash;!ge&&J.editable===!0&&(ge=5,xe="solid");var Se=K[K.length-1]!=="Z",ce=C(k)&&J.editable&&k._fullLayout._activeShapeIndex===Z;ce&&(re=Se?"rgba(0,0,0,0)":k._fullLayout.activeshape.fillcolor,ie=k._fullLayout.activeshape.opacity);var pe=G.append("g").classed("shape-group",!0).attr({"data-index":Z}),ye=pe.append("path").attr(ee).style("opacity",ie).call(o.stroke,se).call(o.fill,re).call(y.dashLine,xe,ge);L(pe,k,J),d(k,Z,J,pe);var U;if((ce||k._context.edits.shapePosition)&&(U=_(k.layout,"shapes",J)),ce){ye.style({cursor:"move"});var W={element:ye.node(),plotinfo:ne,gd:k,editHelpers:U,hasText:J.label.text||J.label.texttemplate,isActiveShape:!0},j=s(K,k);v(j,ye,W)}else k._context.edits.shapePosition?D(k,ye,J,Z,G,U):J.editable===!0&&ye.style("pointer-events",Se||o.opacity(re)*ie<=.5?"stroke":"all");ye.node().addEventListener("click",function(){return N(k,ye)})}}function L(k,Z,B){var J=(B.xref+B.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");y.setClipUrl(k,J?"clip"+Z._fullLayout._uid+J:null,Z)}function D(k,Z,B,J,ne,oe){var Y=10,G=10,K=B.xsizemode==="pixel",ee=B.ysizemode==="pixel",ie=B.type==="line",re=B.type==="path",se=oe.modifyItem,ge,xe,Se,ce,pe,ye,U,W,j,F,P,q,z,te,ue,ve=i.select(Z.node().parentNode),_e=l.getFromId(k,B.xref),Re=l.getRefType(B.xref),Le=l.getFromId(k,B.yref),Ve=l.getRefType(B.yref),Xe=w.getDataToPixel(k,_e,!1,Re),Ze=w.getDataToPixel(k,Le,!0,Ve),Te=w.getPixelToData(k,_e,!1,Re),we=w.getPixelToData(k,Le,!0,Ve),be=Ke(),ke={element:be.node(),gd:k,prepFn:pt,doneFn:ft,clickFn:lt},He;E.init(ke),be.node().onmousemove=vt;function Ke(){return ie?st():Z}function st(){var Et=10,Ue=Math.max(B.line.width,Et),De=ne.append("g").attr("data-index",J).attr("drag-helper",!0);De.append("path").attr("d",Z.attr("d")).style({cursor:"move","stroke-width":Ue,"stroke-opacity":"0"});var Ie={"fill-opacity":"0"},Fe=Math.max(Ue/2,Et);return De.append("circle").attr({"data-line-point":"start-point",cx:K?Xe(B.xanchor)+B.x0:Xe(B.x0),cy:ee?Ze(B.yanchor)-B.y0:Ze(B.y0),r:Fe}).style(Ie).classed("cursor-grab",!0),De.append("circle").attr({"data-line-point":"end-point",cx:K?Xe(B.xanchor)+B.x1:Xe(B.x1),cy:ee?Ze(B.yanchor)-B.y1:Ze(B.y1),r:Fe}).style(Ie).classed("cursor-grab",!0),De}function vt(Et){if(T(k)){He=null;return}if(ie)Et.target.tagName==="path"?He="move":He=Et.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Ue=ke.element.getBoundingClientRect(),De=Ue.right-Ue.left,Ie=Ue.bottom-Ue.top,Fe=Et.clientX-Ue.left,We=Et.clientY-Ue.top,de=!re&&De>Y&&Ie>G&&!Et.shiftKey?E.getCursor(Fe/De,1-We/Ie):"move";M(Z,de),He=de.split("-")[0]}}function pt(Et){T(k)||(K&&(pe=Xe(B.xanchor)),ee&&(ye=Ze(B.yanchor)),B.type==="path"?ue=B.path:(ge=K?B.x0:Xe(B.x0),xe=ee?B.y0:Ze(B.y0),Se=K?B.x1:Xe(B.x1),ce=ee?B.y1:Ze(B.y1)),ge<Se?(j=ge,z="x0",F=Se,te="x1"):(j=Se,z="x1",F=ge,te="x0"),!ee&&xe<ce||ee&&xe>ce?(U=xe,P="y0",W=ce,q="y1"):(U=ce,P="y1",W=xe,q="y0"),vt(Et),Ct(ne,B),St(Z,B,k),ke.moveFn=He==="move"?Mt:ot,ke.altKey=Et.altKey)}function ft(){T(k)||(M(Z),kt(ne),L(Z,k,B),c.call("_guiRelayout",k,oe.getUpdateObj()))}function lt(){T(k)||kt(ne)}function Mt(Et,Ue){if(B.type==="path"){var De=function(We){return We},Ie=De,Fe=De;K?se("xanchor",B.xanchor=Te(pe+Et)):(Ie=function(de){return Te(Xe(de)+Et)},_e&&_e.type==="date"&&(Ie=w.encodeDate(Ie))),ee?se("yanchor",B.yanchor=we(ye+Ue)):(Fe=function(de){return we(Ze(de)+Ue)},Le&&Le.type==="date"&&(Fe=w.encodeDate(Fe))),se("path",B.path=O(ue,Ie,Fe))}else K?se("xanchor",B.xanchor=Te(pe+Et)):(se("x0",B.x0=Te(ge+Et)),se("x1",B.x1=Te(Se+Et))),ee?se("yanchor",B.yanchor=we(ye+Ue)):(se("y0",B.y0=we(xe+Ue)),se("y1",B.y1=we(ce+Ue)));Z.attr("d",A(k,B)),Ct(ne,B),d(k,J,B,ve)}function ot(Et,Ue){if(re){var De=function(Nt){return Nt},Ie=De,Fe=De;K?se("xanchor",B.xanchor=Te(pe+Et)):(Ie=function(Wt){return Te(Xe(Wt)+Et)},_e&&_e.type==="date"&&(Ie=w.encodeDate(Ie))),ee?se("yanchor",B.yanchor=we(ye+Ue)):(Fe=function(Wt){return we(Ze(Wt)+Ue)},Le&&Le.type==="date"&&(Fe=w.encodeDate(Fe))),se("path",B.path=O(ue,Ie,Fe))}else if(ie){if(He==="resize-over-start-point"){var We=ge+Et,de=ee?xe-Ue:xe+Ue;se("x0",B.x0=K?We:Te(We)),se("y0",B.y0=ee?de:we(de))}else if(He==="resize-over-end-point"){var Me=Se+Et,he=ee?ce-Ue:ce+Ue;se("x1",B.x1=K?Me:Te(Me)),se("y1",B.y1=ee?he:we(he))}}else{var Ee=function(Nt){return He.indexOf(Nt)!==-1},Pe=Ee("n"),Ne=Ee("s"),ht=Ee("w"),nt=Ee("e"),Ye=Pe?U+Ue:U,Be=Ne?W+Ue:W,ut=ht?j+Et:j,Dt=nt?F+Et:F;ee&&(Pe&&(Ye=U-Ue),Ne&&(Be=W-Ue)),(!ee&&Be-Ye>G||ee&&Ye-Be>G)&&(se(P,B[P]=ee?Ye:we(Ye)),se(q,B[q]=ee?Be:we(Be))),Dt-ut>Y&&(se(z,B[z]=K?ut:Te(ut)),se(te,B[te]=K?Dt:Te(Dt)))}Z.attr("d",A(k,B)),Ct(ne,B),d(k,J,B,ve)}function Ct(Et,Ue){(K||ee)&&De();function De(){var Ie=Ue.type!=="path",Fe=Et.selectAll(".visual-cue").data([0]),We=1;Fe.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":We}).classed("visual-cue",!0);var de=Xe(K?Ue.xanchor:a.midRange(Ie?[Ue.x0,Ue.x1]:w.extractPathCoords(Ue.path,b.paramIsX))),Me=Ze(ee?Ue.yanchor:a.midRange(Ie?[Ue.y0,Ue.y1]:w.extractPathCoords(Ue.path,b.paramIsY)));if(de=w.roundPositionForSharpStrokeRendering(de,We),Me=w.roundPositionForSharpStrokeRendering(Me,We),K&&ee){var he="M"+(de-1-We)+","+(Me-1-We)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Fe.attr("d",he)}else if(K){var Ee="M"+(de-1-We)+","+(Me-9-We)+"v18 h2 v-18 Z";Fe.attr("d",Ee)}else{var Pe="M"+(de-9-We)+","+(Me-1-We)+"h18 v2 h-18 Z";Fe.attr("d",Pe)}}}function kt(Et){Et.selectAll(".visual-cue").remove()}function St(Et,Ue,De){var Ie=Ue.xref,Fe=Ue.yref,We=l.getFromId(De,Ie),de=l.getFromId(De,Fe),Me="";Ie!=="paper"&&!We.autorange&&(Me+=Ie),Fe!=="paper"&&!de.autorange&&(Me+=Fe),y.setClipUrl(Et,Me?"clip"+De._fullLayout._uid+Me:null,De)}}function O(k,Z,B){return k.replace(b.segmentRE,function(J){var ne=0,oe=J.charAt(0),Y=b.paramIsX[oe],G=b.paramIsY[oe],K=b.numParams[oe],ee=J.substr(1).replace(b.paramRE,function(ie){return ne>=K||(Y[ne]?ie=Z(ie):G[ne]&&(ie=B(ie)),ne++),ie});return oe+ee})}function N(k,Z){if(C(k)){var B=Z.node(),J=+B.getAttribute("data-index");if(J>=0){if(J===k._fullLayout._activeShapeIndex){V(k);return}k._fullLayout._activeShapeIndex=J,k._fullLayout._deactivateShape=V,R(k)}}}function V(k){if(C(k)){var Z=k._fullLayout._activeShapeIndex;Z>=0&&(p(k),delete k._fullLayout._activeShapeIndex,R(k))}}function X(k){if(C(k)){p(k);var Z=k._fullLayout._activeShapeIndex,B=(k.layout||{}).shapes||[];if(Z<B.length){for(var J=[],ne=0;ne<B.length;ne++)ne!==Z&&J.push(B[ne]);return delete k._fullLayout._activeShapeIndex,c.call("_guiRelayout",k,{shapes:J})}}}},2872:function(f,u,r){var i=r(7824).overrideAll,c=r(5464),a=r(5376),l=r(8192).u,s=r(2880).extendFlat,v=r(1776).ye,d=r(7728);f.exports=i({newshape:{visible:s({},c.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:s({},c.legend,{}),legendgroup:s({},c.legendgroup,{}),legendgrouptitle:{text:s({},c.legendgrouptitle.text,{}),font:a({})},legendrank:s({},c.legendrank,{}),legendwidth:s({},c.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:s({},l,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:s({},c.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:v({newshape:!0},{keys:Object.keys(d)}),font:a({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(f){var u=32;f.exports={CIRCLE_SIDES:u,i000:0,i090:u/4,i180:u/2,i270:u/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},5144:function(f,u,r){var i=r(6308),c=r(3400);function a(l,s){return l?"bottom":s.indexOf("top")!==-1?"top":s.indexOf("bottom")!==-1?"bottom":"middle"}f.exports=function(s,v,d){d("newshape.visible"),d("newshape.name"),d("newshape.showlegend"),d("newshape.legend"),d("newshape.legendwidth"),d("newshape.legendgroup"),d("newshape.legendgrouptitle.text"),c.coerceFont(d,"newshape.legendgrouptitle.font"),d("newshape.legendrank"),d("newshape.drawdirection"),d("newshape.layer"),d("newshape.fillcolor"),d("newshape.fillrule"),d("newshape.opacity");var p=d("newshape.line.width");if(p){var o=(s||{}).plot_bgcolor||"#FFF";d("newshape.line.color",i.contrast(o)),d("newshape.line.dash")}var y=s.dragmode==="drawline",_=d("newshape.label.text"),E=d("newshape.label.texttemplate");if(_||E){d("newshape.label.textangle");var M=d("newshape.label.textposition",y?"middle":"middle center");d("newshape.label.xanchor"),d("newshape.label.yanchor",a(y,M)),d("newshape.label.padding"),c.coerceFont(d,"newshape.label.font",v.font)}d("activeshape.fillcolor"),d("activeshape.opacity")}},9856:function(f,u,r){var i=r(9604),c=r(7e3),a=c.CIRCLE_SIDES,l=c.SQRT2,s=r(5840),v=s.p2r,d=s.r2p,p=[0,3,4,5,6,1,2],o=[0,3,4,1,2];u.writePaths=function(E){var M=E.length;if(!M)return"M0,0Z";for(var b="",w=0;w<M;w++)for(var A=E[w].length,R=0;R<A;R++){var T=E[w][R][0];if(T==="Z")b+="Z";else for(var C=E[w][R].length,m=0;m<C;m++){var L=m;T==="Q"||T==="S"?L=o[m]:T==="C"&&(L=p[m]),b+=E[w][R][L],m>0&&m<C-1&&(b+=",")}}return b},u.readPaths=function(E,M,b,w){var A=i(E),R=[],T=-1,C=function(){T++,R[T]=[]},m,L=0,D=0,O,N,V=function(){O=L,N=D};V();for(var X=0;X<A.length;X++){var k=[],Z,B,J,ne,oe=A[X][0],Y=oe;switch(oe){case"M":C(),L=+A[X][1],D=+A[X][2],k.push([Y,L,D]),V();break;case"Q":case"S":Z=+A[X][1],J=+A[X][2],L=+A[X][3],D=+A[X][4],k.push([Y,L,D,Z,J]);break;case"C":Z=+A[X][1],J=+A[X][2],B=+A[X][3],ne=+A[X][4],L=+A[X][5],D=+A[X][6],k.push([Y,L,D,Z,J,B,ne]);break;case"T":case"L":L=+A[X][1],D=+A[X][2],k.push([Y,L,D]);break;case"H":Y="L",L=+A[X][1],k.push([Y,L,D]);break;case"V":Y="L",D=+A[X][1],k.push([Y,L,D]);break;case"A":Y="L";var G=+A[X][1],K=+A[X][2];+A[X][4]||(G=-G,K=-K);var ee=L-G,ie=D;for(m=1;m<=a/2;m++){var re=2*Math.PI*m/a;k.push([Y,ee+G*Math.cos(re),ie+K*Math.sin(re)])}break;case"Z":(L!==O||D!==N)&&(L=O,D=N,k.push([Y,L,D]));break}for(var se=(b||{}).domain,ge=M._fullLayout._size,xe=b&&b.xsizemode==="pixel",Se=b&&b.ysizemode==="pixel",ce=w===!1,pe=0;pe<k.length;pe++){for(m=0;m+2<7;m+=2){var ye=k[pe][m+1],U=k[pe][m+2];ye===void 0||U===void 0||(L=ye,D=U,b&&(b.xaxis&&b.xaxis.p2r?(ce&&(ye-=b.xaxis._offset),xe?ye=d(b.xaxis,b.xanchor)+ye:ye=v(b.xaxis,ye)):(ce&&(ye-=ge.l),se?ye=se.x[0]+ye/ge.w:ye=ye/ge.w),b.yaxis&&b.yaxis.p2r?(ce&&(U-=b.yaxis._offset),Se?U=d(b.yaxis,b.yanchor)-U:U=v(b.yaxis,U)):(ce&&(U-=ge.t),se?U=se.y[1]-U/ge.h:U=1-U/ge.h)),k[pe][m+1]=ye,k[pe][m+2]=U)}R[T].push(k[pe].slice())}}return R};function y(E,M){return Math.abs(E-M)<=1e-6}function _(E,M){var b=M[1]-E[1],w=M[2]-E[2];return Math.sqrt(b*b+w*w)}u.pointsOnRectangle=function(E){var M=E.length;if(M!==5)return!1;for(var b=1;b<3;b++){var w=E[0][b]-E[1][b],A=E[3][b]-E[2][b];if(!y(w,A))return!1;var R=E[0][b]-E[3][b],T=E[1][b]-E[2][b];if(!y(R,T))return!1}return!y(E[0][1],E[1][1])&&!y(E[0][1],E[3][1])?!1:!!(_(E[0],E[1])*_(E[0],E[3]))},u.pointsOnEllipse=function(E){var M=E.length;if(M!==a+1)return!1;M=a;for(var b=0;b<M;b++){var w=(M*2-b)%M,A=(M/2+w)%M,R=(M/2+b)%M;if(!y(_(E[b],E[R]),_(E[w],E[A])))return!1}return!0},u.handleEllipse=function(E,M,b){if(!E)return[M,b];var w=u.ellipseOver({x0:M[0],y0:M[1],x1:b[0],y1:b[1]}),A=(w.x1+w.x0)/2,R=(w.y1+w.y0)/2,T=(w.x1-w.x0)/2,C=(w.y1-w.y0)/2;T||(T=C=C/l),C||(C=T=T/l);for(var m=[],L=0;L<a;L++){var D=L*2*Math.PI/a;m.push([A+T*Math.cos(D),R+C*Math.sin(D)])}return m},u.ellipseOver=function(E){var M=E.x0,b=E.y0,w=E.x1,A=E.y1,R=w-M,T=A-b;M-=R,b-=T;var C=(M+w)/2,m=(b+A)/2,L=l;return R*=L,T*=L,{x0:C-R,y0:m-T,x1:C+R,y1:m+T}},u.fixDatesForPaths=function(E,M,b){var w=M.type==="date",A=b.type==="date";if(!w&&!A)return E;for(var R=0;R<E.length;R++)for(var T=0;T<E[R].length;T++)for(var C=0;C+2<E[R][T].length;C+=2)w&&(E[R][T][C+1]=E[R][T][C+1].replace(" ","_")),A&&(E[R][T][C+2]=E[R][T][C+2].replace(" ","_"));return E}},3940:function(f,u,r){var i=r(2760),c=i.drawMode,a=i.openMode,l=r(7e3),s=l.i000,v=l.i090,d=l.i180,p=l.i270,o=l.cos45,y=l.sin45,_=r(5840),E=_.p2r,M=_.r2p,b=r(1936),w=b.clearOutline,A=r(9856),R=A.readPaths,T=A.writePaths,C=A.ellipseOver,m=A.fixDatesForPaths;function L(O,N){if(O.length){var V=O[0][0];if(V){var X=N.gd,k=N.isActiveShape,Z=N.dragmode,B=(X.layout||{}).shapes||[];if(!c(Z)&&k!==void 0){var J=X._fullLayout._activeShapeIndex;if(J<B.length)switch(X._fullLayout.shapes[J].type){case"rect":Z="drawrect";break;case"circle":Z="drawcircle";break;case"line":Z="drawline";break;case"path":var ne=B[J].path||"";ne[ne.length-1]==="Z"?Z="drawclosedpath":Z="drawopenpath";break}}var oe=D(O,N,Z);w(X);for(var Y=N.editHelpers,G=(Y||{}).modifyItem,K=[],ee=0;ee<B.length;ee++){var ie=X._fullLayout.shapes[ee];if(K[ee]=ie._input,k!==void 0&&ee===X._fullLayout._activeShapeIndex){var re=oe;switch(ie.type){case"line":case"rect":case"circle":G("x0",re.x0),G("x1",re.x1),G("y0",re.y0),G("y1",re.y1);break;case"path":G("path",re.path);break}}}return k===void 0?(K.push(oe),K):Y?Y.getUpdateObj():{}}}}function D(O,N,V){var X=O[0][0],k=N.gd,Z=X.getAttribute("d"),B=k._fullLayout.newshape,J=N.plotinfo,ne=N.isActiveShape,oe=J.xaxis,Y=J.yaxis,G=!!J.domain||!J.xaxis,K=!!J.domain||!J.yaxis,ee=a(V),ie=R(Z,k,J,ne),re={editable:!0,visible:B.visible,name:B.name,showlegend:B.showlegend,legend:B.legend,legendwidth:B.legendwidth,legendgroup:B.legendgroup,legendgrouptitle:{text:B.legendgrouptitle.text,font:B.legendgrouptitle.font},legendrank:B.legendrank,label:B.label,xref:G?"paper":oe._id,yref:K?"paper":Y._id,layer:B.layer,opacity:B.opacity,line:{color:B.line.color,width:B.line.width,dash:B.line.dash}};ee||(re.fillcolor=B.fillcolor,re.fillrule=B.fillrule);var se;if(ie.length===1&&(se=ie[0]),se&&se.length===5&&V==="drawrect")re.type="rect",re.x0=se[0][1],re.y0=se[0][2],re.x1=se[2][1],re.y1=se[2][2];else if(se&&V==="drawline")re.type="line",re.x0=se[0][1],re.y0=se[0][2],re.x1=se[1][1],re.y1=se[1][2];else if(se&&V==="drawcircle"){re.type="circle";var ge=se[s][1],xe=se[v][1],Se=se[d][1],ce=se[p][1],pe=se[s][2],ye=se[v][2],U=se[d][2],W=se[p][2],j=J.xaxis&&(J.xaxis.type==="date"||J.xaxis.type==="log"),F=J.yaxis&&(J.yaxis.type==="date"||J.yaxis.type==="log");j&&(ge=M(J.xaxis,ge),xe=M(J.xaxis,xe),Se=M(J.xaxis,Se),ce=M(J.xaxis,ce)),F&&(pe=M(J.yaxis,pe),ye=M(J.yaxis,ye),U=M(J.yaxis,U),W=M(J.yaxis,W));var P=(xe+ce)/2,q=(pe+U)/2,z=(ce-xe+Se-ge)/2,te=(W-ye+U-pe)/2,ue=C({x0:P,y0:q,x1:P+z*o,y1:q+te*y});j&&(ue.x0=E(J.xaxis,ue.x0),ue.x1=E(J.xaxis,ue.x1)),F&&(ue.y0=E(J.yaxis,ue.y0),ue.y1=E(J.yaxis,ue.y1)),re.x0=ue.x0,re.y0=ue.y0,re.x1=ue.x1,re.y1=ue.y1}else re.type="path",oe&&Y&&m(ie,oe,Y),re.path=T(ie),se=null;return re}f.exports={newShapes:L,createShapeObj:D}},1936:function(f){function u(i){var c=i._fullLayout._zoomlayer;c&&c.selectAll(".outline-controllers").remove()}function r(i){var c=i._fullLayout._zoomlayer;c&&c.selectAll(".select-outline").remove(),i._fullLayout._outlining=!1}f.exports={clearOutlineControllers:u,clearOutline:r}},5152:function(f,u,r){var i=r(3068),c=r(3400),a=r(4460);u.rangeToShapePosition=function(s){return s.type==="log"?s.r2d:function(v){return v}},u.shapePositionToRange=function(s){return s.type==="log"?s.d2r:function(v){return v}},u.decodeDate=function(s){return function(v){return v.replace&&(v=v.replace("_"," ")),s(v)}},u.encodeDate=function(s){return function(v){return s(v).replace(" ","_")}},u.extractPathCoords=function(s,v,d){var p=[],o=s.match(i.segmentRE);return o.forEach(function(y){var _=v[y.charAt(0)].drawn;if(_!==void 0){var E=y.substr(1).match(i.paramRE);if(!(!E||E.length<_)){var M=E[_],b=d?M:c.cleanNumber(M);p.push(b)}}}),p},u.getDataToPixel=function(s,v,d,p){var o=s._fullLayout._size,y;if(v)if(p==="domain")y=function(E){return v._length*(d?1-E:E)+v._offset};else{var _=u.shapePositionToRange(v);y=function(E){return v._offset+v.r2p(_(E,!0))},v.type==="date"&&(y=u.decodeDate(y))}else d?y=function(E){return o.t+o.h*(1-E)}:y=function(E){return o.l+o.w*E};return y},u.getPixelToData=function(s,v,d,p){var o=s._fullLayout._size,y;if(v)if(p==="domain")y=function(E){var M=(E-v._offset)/v._length;return d?1-M:M};else{var _=u.rangeToShapePosition(v);y=function(E){return _(v.p2r(E-v._offset))}}else d?y=function(E){return 1-(E-o.t)/o.h}:y=function(E){return(E-o.l)/o.w};return y},u.roundPositionForSharpStrokeRendering=function(s,v){var d=Math.round(v%2)===1,p=Math.round(s);return d?p+.5:p},u.makeShapesOptionsAndPlotinfo=function(s,v){var d=s._fullLayout.shapes[v]||{},p=s._fullLayout._plots[d.xref+d.yref],o=!!p;return o?p._hadPlotinfo=!0:(p={},d.xref&&d.xref!=="paper"&&(p.xaxis=s._fullLayout[d.xref+"axis"]),d.yref&&d.yref!=="paper"&&(p.yaxis=s._fullLayout[d.yref+"axis"])),p.xsizemode=d.xsizemode,p.ysizemode=d.ysizemode,p.xanchor=d.xanchor,p.yanchor=d.yanchor,{options:d,plotinfo:p}},u.makeSelectionsOptionsAndPlotinfo=function(s,v){var d=s._fullLayout.selections[v]||{},p=s._fullLayout._plots[d.xref+d.yref],o=!!p;return o?p._hadPlotinfo=!0:(p={},d.xref&&(p.xaxis=s._fullLayout[d.xref+"axis"]),d.yref&&(p.yaxis=s._fullLayout[d.yref+"axis"])),{options:d,plotinfo:p}},u.getPathString=function(s,v){var d=v.type,p=a.getRefType(v.xref),o=a.getRefType(v.yref),y=a.getFromId(s,v.xref),_=a.getFromId(s,v.yref),E=s._fullLayout._size,M,b,w,A,R,T,C,m;if(y?p==="domain"?b=function(J){return y._offset+y._length*J}:(M=u.shapePositionToRange(y),b=function(J){return y._offset+y.r2p(M(J,!0))}):b=function(J){return E.l+E.w*J},_?o==="domain"?A=function(J){return _._offset+_._length*(1-J)}:(w=u.shapePositionToRange(_),A=function(J){return _._offset+_.r2p(w(J,!0))}):A=function(J){return E.t+E.h*(1-J)},d==="path")return y&&y.type==="date"&&(b=u.decodeDate(b)),_&&_.type==="date"&&(A=u.decodeDate(A)),l(v,b,A);if(v.xsizemode==="pixel"){var L=b(v.xanchor);R=L+v.x0,T=L+v.x1}else R=b(v.x0),T=b(v.x1);if(v.ysizemode==="pixel"){var D=A(v.yanchor);C=D-v.y0,m=D-v.y1}else C=A(v.y0),m=A(v.y1);if(d==="line")return"M"+R+","+C+"L"+T+","+m;if(d==="rect")return"M"+R+","+C+"H"+T+"V"+m+"H"+R+"Z";var O=(R+T)/2,N=(C+m)/2,V=Math.abs(O-R),X=Math.abs(N-C),k="A"+V+","+X,Z=O+V+","+N,B=O+","+(N-X);return"M"+Z+k+" 0 1,1 "+B+k+" 0 0,1 "+Z+"Z"};function l(s,v,d){var p=s.path,o=s.xsizemode,y=s.ysizemode,_=s.xanchor,E=s.yanchor;return p.replace(i.segmentRE,function(M){var b=0,w=M.charAt(0),A=i.paramIsX[w],R=i.paramIsY[w],T=i.numParams[w],C=M.substr(1).replace(i.paramRE,function(m){return A[b]?o==="pixel"?m=v(_)+Number(m):m=v(m):R[b]&&(y==="pixel"?m=d(E)-Number(m):m=d(m)),b++,b>T&&(m="X"),m});return b>T&&(C=C.replace(/[\s,]*X.*/,""),c.log("Ignoring extra params in segment "+M)),w+C})}},1592:function(f,u,r){var i=r(4016);f.exports={moduleType:"component",name:"shapes",layoutAttributes:r(6056),supplyLayoutDefaults:r(3712),supplyDrawNewShapeDefaults:r(5144),includeBasePlot:r(6632)("shapes"),calcAutorange:r(6084),draw:i.draw,drawOne:i.drawOne}},7728:function(f){function u(M,b){return b?b.d2l(M):M}function r(M,b){return b?b.l2d(M):M}function i(M){return M.x0}function c(M){return M.x1}function a(M){return M.y0}function l(M){return M.y1}function s(M,b){return u(M.x1,b)-u(M.x0,b)}function v(M,b,w){return u(M.y1,w)-u(M.y0,w)}function d(M,b){return Math.abs(s(M,b))}function p(M,b,w){return Math.abs(v(M,b,w))}function o(M,b,w){return M.type!=="line"?void 0:Math.sqrt(Math.pow(s(M,b),2)+Math.pow(v(M,b,w),2))}function y(M,b){return r((u(M.x1,b)+u(M.x0,b))/2,b)}function _(M,b,w){return r((u(M.y1,w)+u(M.y0,w))/2,w)}function E(M,b,w){return M.type!=="line"?void 0:v(M,b,w)/s(M,b)}f.exports={x0:i,x1:c,y0:a,y1:l,slope:E,dx:s,dy:v,width:d,height:p,length:o,xcenter:y,ycenter:_}},9861:function(f,u,r){var i=r(5376),c=r(6741),a=r(2880).extendDeepAll,l=r(7824).overrideAll,s=r(5656),v=r(1780).templatedArray,d=r(876),p=v("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});f.exports=l(v("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:p,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:a(c({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:i({})},font:i({}),activebgcolor:{valType:"color",dflt:d.gripBgActiveColor},bgcolor:{valType:"color",dflt:d.railBgColor},bordercolor:{valType:"color",dflt:d.railBorderColor},borderwidth:{valType:"number",min:0,dflt:d.railBorderWidth},ticklen:{valType:"number",min:0,dflt:d.tickLength},tickcolor:{valType:"color",dflt:d.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:d.minorTickLength}}),"arraydraw","from-root")},876:function(f){f.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(f,u,r){var i=r(3400),c=r(1272),a=r(9861),l=r(876),s=l.name,v=a.steps;f.exports=function(y,_){c(y,_,{name:s,handleItemDefaults:d})};function d(o,y,_){function E(m,L){return i.coerce(o,y,a,m,L)}for(var M=c(o,y,{name:"steps",handleItemDefaults:p}),b=0,w=0;w<M.length;w++)M[w].visible&&b++;var A;if(b<2?A=y.visible=!1:A=E("visible"),!!A){y._stepCount=b;var R=y._visibleSteps=i.filterVisible(M),T=E("active");(M[T]||{}).visible||(y.active=R[0]._index),E("x"),E("y"),i.noneOrAll(o,y,["x","y"]),E("xanchor"),E("yanchor"),E("len"),E("lenmode"),E("pad.t"),E("pad.r"),E("pad.b"),E("pad.l"),i.coerceFont(E,"font",_.font);var C=E("currentvalue.visible");C&&(E("currentvalue.xanchor"),E("currentvalue.prefix"),E("currentvalue.suffix"),E("currentvalue.offset"),i.coerceFont(E,"currentvalue.font",y.font)),E("transition.duration"),E("transition.easing"),E("bgcolor"),E("activebgcolor"),E("bordercolor"),E("borderwidth"),E("ticklen"),E("tickwidth"),E("tickcolor"),E("minorticklen")}}function p(o,y){function _(b,w){return i.coerce(o,y,v,b,w)}var E;if(o.method!=="skip"&&!Array.isArray(o.args)?E=y.visible=!1:E=_("visible"),E){_("method"),_("args");var M=_("label","step-"+y._index);_("value",M),_("execute")}}},9664:function(f,u,r){var i=r(3428),c=r(7316),a=r(6308),l=r(3616),s=r(3400),v=s.strTranslate,d=r(2736),p=r(1780).arrayEditor,o=r(876),y=r(4284),_=y.LINE_SPACING,E=y.FROM_TL,M=y.FROM_BR;f.exports=function(G){var K=G._context.staticPlot,ee=G._fullLayout,ie=w(ee,G),re=ee._infolayer.selectAll("g."+o.containerClassName).data(ie.length>0?[0]:[]);re.enter().append("g").classed(o.containerClassName,!0).style("cursor",K?null:"ew-resize");function se(ce){ce._commandObserver&&(ce._commandObserver.remove(),delete ce._commandObserver),c.autoMargin(G,b(ce))}if(re.exit().each(function(){i.select(this).selectAll("g."+o.groupClassName).each(se)}).remove(),ie.length!==0){var ge=re.selectAll("g."+o.groupClassName).data(ie,A);ge.enter().append("g").classed(o.groupClassName,!0),ge.exit().each(se).remove();for(var xe=0;xe<ie.length;xe++){var Se=ie[xe];R(G,Se)}ge.each(function(ce){var pe=i.select(this);k(ce),c.manageCommandObserver(G,ce,ce._visibleSteps,function(ye){var U=pe.data()[0];U.active!==ye.index&&(U._dragging||N(G,pe,U,ye.index,!1,!0))}),T(G,i.select(this),ce)})}};function b(Y){return o.autoMarginIdRoot+Y._index}function w(Y,G){for(var K=Y[o.name],ee=[],ie=0;ie<K.length;ie++){var re=K[ie];re.visible&&(re._gd=G,ee.push(re))}return ee}function A(Y){return Y._index}function R(Y,G){var K=l.tester.selectAll("g."+o.labelGroupClass).data(G._visibleSteps);K.enter().append("g").classed(o.labelGroupClass,!0);var ee=0,ie=0;K.each(function(W){var j=i.select(this),F=L(j,{step:W},G),P=F.node();if(P){var q=l.bBox(P);ie=Math.max(ie,q.height),ee=Math.max(ee,q.width)}}),K.remove();var re=G._dims={};re.inputAreaWidth=Math.max(o.railWidth,o.gripHeight);var se=Y._fullLayout._size;re.lx=se.l+se.w*G.x,re.ly=se.t+se.h*(1-G.y),G.lenmode==="fraction"?re.outerLength=Math.round(se.w*G.len):re.outerLength=G.len,re.inputAreaStart=0,re.inputAreaLength=Math.round(re.outerLength-G.pad.l-G.pad.r);var ge=re.inputAreaLength-2*o.stepInset,xe=ge/(G._stepCount-1),Se=ee+o.labelPadding;if(re.labelStride=Math.max(1,Math.ceil(Se/xe)),re.labelHeight=ie,re.currentValueMaxWidth=0,re.currentValueHeight=0,re.currentValueTotalHeight=0,re.currentValueMaxLines=1,G.currentvalue.visible){var ce=l.tester.append("g");K.each(function(W){var j=C(ce,G,W.label),F=j.node()&&l.bBox(j.node())||{width:0,height:0},P=d.lineCount(j);re.currentValueMaxWidth=Math.max(re.currentValueMaxWidth,Math.ceil(F.width)),re.currentValueHeight=Math.max(re.currentValueHeight,Math.ceil(F.height)),re.currentValueMaxLines=Math.max(re.currentValueMaxLines,P)}),re.currentValueTotalHeight=re.currentValueHeight+G.currentvalue.offset,ce.remove()}re.height=re.currentValueTotalHeight+o.tickOffset+G.ticklen+o.labelOffset+re.labelHeight+G.pad.t+G.pad.b;var pe="left";s.isRightAnchor(G)&&(re.lx-=re.outerLength,pe="right"),s.isCenterAnchor(G)&&(re.lx-=re.outerLength/2,pe="center");var ye="top";s.isBottomAnchor(G)&&(re.ly-=re.height,ye="bottom"),s.isMiddleAnchor(G)&&(re.ly-=re.height/2,ye="middle"),re.outerLength=Math.ceil(re.outerLength),re.height=Math.ceil(re.height),re.lx=Math.round(re.lx),re.ly=Math.round(re.ly);var U={y:G.y,b:re.height*M[ye],t:re.height*E[ye]};G.lenmode==="fraction"?(U.l=0,U.xl=G.x-G.len*E[pe],U.r=0,U.xr=G.x+G.len*M[pe]):(U.x=G.x,U.l=re.outerLength*E[pe],U.r=re.outerLength*M[pe]),c.autoMargin(Y,b(G),U)}function T(Y,G,K){(K.steps[K.active]||{}).visible||(K.active=K._visibleSteps[0]._index),G.call(C,K).call(oe,K).call(D,K).call(X,K).call(ne,Y,K).call(m,Y,K);var ee=K._dims;l.setTranslate(G,ee.lx+K.pad.l,ee.ly+K.pad.t),G.call(Z,K,!1),G.call(C,K)}function C(Y,G,K){if(G.currentvalue.visible){var ee=G._dims,ie,re;switch(G.currentvalue.xanchor){case"right":ie=ee.inputAreaLength-o.currentValueInset-ee.currentValueMaxWidth,re="left";break;case"center":ie=ee.inputAreaLength*.5,re="middle";break;default:ie=o.currentValueInset,re="left"}var se=s.ensureSingle(Y,"text",o.labelClass,function(ye){ye.attr({"text-anchor":re,"data-notex":1})}),ge=G.currentvalue.prefix?G.currentvalue.prefix:"";if(typeof K=="string")ge+=K;else{var xe=G.steps[G.active].label,Se=G._gd._fullLayout._meta;Se&&(xe=s.templateString(xe,Se)),ge+=xe}G.currentvalue.suffix&&(ge+=G.currentvalue.suffix),se.call(l.font,G.currentvalue.font).text(ge).call(d.convertToTspans,G._gd);var ce=d.lineCount(se),pe=(ee.currentValueMaxLines+1-ce)*G.currentvalue.font.size*_;return d.positionText(se,ie,pe),se}}function m(Y,G,K){var ee=s.ensureSingle(Y,"rect",o.gripRectClass,function(ie){ie.call(V,G,Y,K).style("pointer-events","all")});ee.attr({width:o.gripWidth,height:o.gripHeight,rx:o.gripRadius,ry:o.gripRadius}).call(a.stroke,K.bordercolor).call(a.fill,K.bgcolor).style("stroke-width",K.borderwidth+"px")}function L(Y,G,K){var ee=s.ensureSingle(Y,"text",o.labelClass,function(se){se.attr({"text-anchor":"middle","data-notex":1})}),ie=G.step.label,re=K._gd._fullLayout._meta;return re&&(ie=s.templateString(ie,re)),ee.call(l.font,K.font).text(ie).call(d.convertToTspans,K._gd),ee}function D(Y,G){var K=s.ensureSingle(Y,"g",o.labelsClass),ee=G._dims,ie=K.selectAll("g."+o.labelGroupClass).data(ee.labelSteps);ie.enter().append("g").classed(o.labelGroupClass,!0),ie.exit().remove(),ie.each(function(re){var se=i.select(this);se.call(L,re,G),l.setTranslate(se,B(G,re.fraction),o.tickOffset+G.ticklen+G.font.size*_+o.labelOffset+ee.currentValueTotalHeight)})}function O(Y,G,K,ee,ie){var re=Math.round(ee*(K._stepCount-1)),se=K._visibleSteps[re]._index;se!==K.active&&N(Y,G,K,se,!0,ie)}function N(Y,G,K,ee,ie,re){var se=K.active;K.active=ee,p(Y.layout,o.name,K).applyUpdate("active",ee);var ge=K.steps[K.active];G.call(Z,K,re),G.call(C,K),Y.emit("plotly_sliderchange",{slider:K,step:K.steps[K.active],interaction:ie,previousActive:se}),ge&&ge.method&&ie&&(G._nextMethod?(G._nextMethod.step=ge,G._nextMethod.doCallback=ie,G._nextMethod.doTransition=re):(G._nextMethod={step:ge,doCallback:ie,doTransition:re},G._nextMethodRaf=window.requestAnimationFrame(function(){var xe=G._nextMethod.step;xe.method&&(xe.execute&&c.executeAPICommand(Y,xe.method,xe.args),G._nextMethod=null,G._nextMethodRaf=null)})))}function V(Y,G,K){if(G._context.staticPlot)return;var ee=K.node(),ie=i.select(G);function re(){return K.data()[0]}function se(){var ge=re();G.emit("plotly_sliderstart",{slider:ge});var xe=K.select("."+o.gripRectClass);i.event.stopPropagation(),i.event.preventDefault(),xe.call(a.fill,ge.activebgcolor);var Se=J(ge,i.mouse(ee)[0]);O(G,K,ge,Se,!0),ge._dragging=!0;function ce(){var ye=re(),U=J(ye,i.mouse(ee)[0]);O(G,K,ye,U,!1)}ie.on("mousemove",ce),ie.on("touchmove",ce);function pe(){var ye=re();ye._dragging=!1,xe.call(a.fill,ye.bgcolor),ie.on("mouseup",null),ie.on("mousemove",null),ie.on("touchend",null),ie.on("touchmove",null),G.emit("plotly_sliderend",{slider:ye,step:ye.steps[ye.active]})}ie.on("mouseup",pe),ie.on("touchend",pe)}Y.on("mousedown",se),Y.on("touchstart",se)}function X(Y,G){var K=Y.selectAll("rect."+o.tickRectClass).data(G._visibleSteps),ee=G._dims;K.enter().append("rect").classed(o.tickRectClass,!0),K.exit().remove(),K.attr({width:G.tickwidth+"px","shape-rendering":"crispEdges"}),K.each(function(ie,re){var se=re%ee.labelStride===0,ge=i.select(this);ge.attr({height:se?G.ticklen:G.minorticklen}).call(a.fill,G.tickcolor),l.setTranslate(ge,B(G,re/(G._stepCount-1))-.5*G.tickwidth,(se?o.tickOffset:o.minorTickOffset)+ee.currentValueTotalHeight)})}function k(Y){var G=Y._dims;G.labelSteps=[];for(var K=Y._stepCount,ee=0;ee<K;ee+=G.labelStride)G.labelSteps.push({fraction:ee/(K-1),step:Y._visibleSteps[ee]})}function Z(Y,G,K){for(var ee=Y.select("rect."+o.gripRectClass),ie=0,re=0;re<G._stepCount;re++)if(G._visibleSteps[re]._index===G.active){ie=re;break}var se=B(G,ie/(G._stepCount-1));if(!G._invokingCommand){var ge=ee;K&&G.transition.duration>0&&(ge=ge.transition().duration(G.transition.duration).ease(G.transition.easing)),ge.attr("transform",v(se-o.gripWidth*.5,G._dims.currentValueTotalHeight))}}function B(Y,G){var K=Y._dims;return K.inputAreaStart+o.stepInset+(K.inputAreaLength-2*o.stepInset)*Math.min(1,Math.max(0,G))}function J(Y,G){var K=Y._dims;return Math.min(1,Math.max(0,(G-o.stepInset-K.inputAreaStart)/(K.inputAreaLength-2*o.stepInset-2*K.inputAreaStart)))}function ne(Y,G,K){var ee=K._dims,ie=s.ensureSingle(Y,"rect",o.railTouchRectClass,function(re){re.call(V,G,Y,K).style("pointer-events","all")});ie.attr({width:ee.inputAreaLength,height:Math.max(ee.inputAreaWidth,o.tickOffset+K.ticklen+ee.labelHeight)}).call(a.fill,K.bgcolor).attr("opacity",0),l.setTranslate(ie,0,ee.currentValueTotalHeight)}function oe(Y,G){var K=G._dims,ee=K.inputAreaLength-o.railInset*2,ie=s.ensureSingle(Y,"rect",o.railRectClass);ie.attr({width:ee,height:o.railWidth,rx:o.railRadius,ry:o.railRadius,"shape-rendering":"crispEdges"}).call(a.stroke,G.bordercolor).call(a.fill,G.bgcolor).style("stroke-width",G.borderwidth+"px"),l.setTranslate(ie,o.railInset,(K.inputAreaWidth-o.railWidth)*.5+K.currentValueTotalHeight)}},7544:function(f,u,r){var i=r(876);f.exports={moduleType:"component",name:i.name,layoutAttributes:r(9861),supplyLayoutDefaults:r(8132),draw:r(9664)}},1668:function(f,u,r){var i=r(3428),c=r(8248),a=r(7316),l=r(4040),s=r(3400),v=s.strTranslate,d=r(3616),p=r(6308),o=r(2736),y=r(3448),_=r(4284).OPPOSITE_SIDE,E=/ [XY][0-9]* /;function M(b,w,A){var R=A.propContainer,T=A.propName,C=A.placeholder,m=A.traceIndex,L=A.avoid||{},D=A.attributes,O=A.transform,N=A.containerGroup,V=b._fullLayout,X=1,k=!1,Z=R.title,B=(Z&&Z.text?Z.text:"").trim(),J=Z&&Z.font?Z.font:{},ne=J.family,oe=J.size,Y=J.color,G=J.weight,K=J.style,ee=J.variant,ie=J.textcase,re=J.lineposition,se=J.shadow,ge;T==="title.text"?ge="titleText":T.indexOf("axis")!==-1?ge="axisTitleText":T.indexOf("colorbar"!==-1)&&(ge="colorbarTitleText");var xe=b._context.edits[ge];B===""?X=0:B.replace(E," % ")===C.replace(E," % ")&&(X=.2,k=!0,xe||(B="")),A._meta?B=s.templateString(B,A._meta):V._meta&&(B=s.templateString(B,V._meta));var Se=B||xe,ce;N||(N=s.ensureSingle(V._infolayer,"g","g-"+w),ce=V._hColorbarMoveTitle);var pe=N.selectAll("text").data(Se?[0]:[]);if(pe.enter().append("text"),pe.text(B).attr("class",w),pe.exit().remove(),!Se)return N;function ye(F){s.syncOrAsync([U,W],F)}function U(F){var P;return!O&&ce&&(O={}),O?(P="",O.rotate&&(P+="rotate("+[O.rotate,D.x,D.y]+")"),(O.offset||ce)&&(P+=v(0,(O.offset||0)-(ce||0)))):P=null,F.attr("transform",P),F.style("opacity",X*p.opacity(Y)).call(d.font,{color:p.rgb(Y),size:i.round(oe,2),family:ne,weight:G,style:K,variant:ee,textcase:ie,shadow:se,lineposition:re}).attr(D).call(o.convertToTspans,b),a.previousPromises(b)}function W(F){var P=i.select(F.node().parentNode);if(L&&L.selection&&L.side&&B){P.attr("transform",null);var q=_[L.side],z=L.side==="left"||L.side==="top"?-1:1,te=c(L.pad)?L.pad:2,ue=d.bBox(P.node()),ve={t:0,b:0,l:0,r:0},_e=b._fullLayout._reservedMargin;for(var Re in _e)for(var Le in _e[Re]){var Ve=_e[Re][Le];ve[Le]=Math.max(ve[Le],Ve)}var Xe={left:ve.l,top:ve.t,right:V.width-ve.r,bottom:V.height-ve.b},Ze=L.maxShift||z*(Xe[L.side]-ue[L.side]),Te=0;if(Ze<0)Te=Ze;else{var we=L.offsetLeft||0,be=L.offsetTop||0;ue.left-=we,ue.right-=we,ue.top-=be,ue.bottom-=be,L.selection.each(function(){var He=d.bBox(this);s.bBoxIntersect(ue,He,te)&&(Te=Math.max(Te,z*(He[L.side]-ue[q])+te))}),Te=Math.min(Ze,Te),R._titleScoot=Math.abs(Te)}if(Te>0||Ze<0){var ke={left:[-Te,0],right:[Te,0],top:[0,-Te],bottom:[0,Te]}[L.side];P.attr("transform",v(ke[0],ke[1]))}}}pe.call(ye);function j(){X=0,k=!0,pe.text(C).on("mouseover.opacity",function(){i.select(this).transition().duration(y.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){i.select(this).transition().duration(y.HIDE_PLACEHOLDER).style("opacity",0)})}return xe&&(B?pe.on(".opacity",null):j(),pe.call(o.makeEditable,{gd:b}).on("edit",function(F){m!==void 0?l.call("_guiRestyle",b,T,F,m):l.call("_guiRelayout",b,T,F)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(ye)}).on("input",function(F){this.text(F||" ").call(o.positionText,D.x,D.y)})),pe.classed("js-placeholder",k),N}f.exports={draw:M}},8444:function(f,u,r){var i=r(5376),c=r(2548),a=r(2880).extendFlat,l=r(7824).overrideAll,s=r(6741),v=r(1780).templatedArray,d=v("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});f.exports=l(v("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:d,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:a(s({editType:"arraydraw"}),{}),font:i({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:c.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},1331:function(f){f.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},1384:function(f,u,r){var i=r(3400),c=r(1272),a=r(8444),l=r(1331),s=l.name,v=a.buttons;f.exports=function(y,_){var E={name:s,handleItemDefaults:d};c(y,_,E)};function d(o,y,_){function E(w,A){return i.coerce(o,y,a,w,A)}var M=c(o,y,{name:"buttons",handleItemDefaults:p}),b=E("visible",M.length>0);b&&(E("active"),E("direction"),E("type"),E("showactive"),E("x"),E("y"),i.noneOrAll(o,y,["x","y"]),E("xanchor"),E("yanchor"),E("pad.t"),E("pad.r"),E("pad.b"),E("pad.l"),i.coerceFont(E,"font",_.font),E("bgcolor",_.paper_bgcolor),E("bordercolor"),E("borderwidth"))}function p(o,y){function _(M,b){return i.coerce(o,y,v,M,b)}var E=_("visible",o.method==="skip"||Array.isArray(o.args));E&&(_("method"),_("args"),_("args2"),_("label"),_("execute"))}},4420:function(f,u,r){var i=r(3428),c=r(7316),a=r(6308),l=r(3616),s=r(3400),v=r(2736),d=r(1780).arrayEditor,p=r(4284).LINE_SPACING,o=r(1331),y=r(7400);f.exports=function(J){var ne=J._fullLayout,oe=s.filterVisible(ne[o.name]);function Y(xe){c.autoMargin(J,X(xe))}var G=ne._menulayer.selectAll("g."+o.containerClassName).data(oe.length>0?[0]:[]);if(G.enter().append("g").classed(o.containerClassName,!0).style("cursor","pointer"),G.exit().each(function(){i.select(this).selectAll("g."+o.headerGroupClassName).each(Y)}).remove(),oe.length!==0){var K=G.selectAll("g."+o.headerGroupClassName).data(oe,_);K.enter().append("g").classed(o.headerGroupClassName,!0);for(var ee=s.ensureSingle(G,"g",o.dropdownButtonGroupClassName,function(xe){xe.style("pointer-events","all")}),ie=0;ie<oe.length;ie++){var re=oe[ie];V(J,re)}var se="updatemenus"+ne._uid,ge=new y(J,ee,se);K.enter().size()&&(ee.node().parentNode.appendChild(ee.node()),ee.call(Z)),K.exit().each(function(xe){ee.call(Z),Y(xe)}).remove(),K.each(function(xe){var Se=i.select(this),ce=xe.type==="dropdown"?ee:null;c.manageCommandObserver(J,xe,xe.buttons,function(pe){b(J,xe,xe.buttons[pe.index],Se,ce,ge,pe.index,!0)}),xe.type==="dropdown"?(w(J,Se,ee,ge,xe),M(ee,xe)&&A(J,Se,ee,ge,xe)):A(J,Se,null,null,xe)})}};function _(B){return B._index}function E(B){return+B.attr(o.menuIndexAttrName)==-1}function M(B,J){return+B.attr(o.menuIndexAttrName)===J._index}function b(B,J,ne,oe,Y,G,K,ee){J.active=K,d(B.layout,o.name,J).applyUpdate("active",K),J.type==="buttons"?A(B,oe,null,null,J):J.type==="dropdown"&&(Y.attr(o.menuIndexAttrName,"-1"),w(B,oe,Y,G,J),ee||A(B,oe,Y,G,J))}function w(B,J,ne,oe,Y){var G=s.ensureSingle(J,"g",o.headerClassName,function(xe){xe.style("pointer-events","all")}),K=Y._dims,ee=Y.active,ie=Y.buttons[ee]||o.blankHeaderOpts,re={y:Y.pad.t,yPad:0,x:Y.pad.l,xPad:0,index:0},se={width:K.headerWidth,height:K.headerHeight};G.call(C,Y,ie,B).call(k,Y,re,se);var ge=s.ensureSingle(J,"text",o.headerArrowClassName,function(xe){xe.attr("text-anchor","end").call(l.font,Y.font).text(o.arrowSymbol[Y.direction])});ge.attr({x:K.headerWidth-o.arrowOffsetX+Y.pad.l,y:K.headerHeight/2+o.textOffsetY+Y.pad.t}),G.on("click",function(){ne.call(Z,String(M(ne,Y)?-1:Y._index)),A(B,J,ne,oe,Y)}),G.on("mouseover",function(){G.call(O)}),G.on("mouseout",function(){G.call(N,Y)}),l.setTranslate(J,K.lx,K.ly)}function A(B,J,ne,oe,Y){ne||(ne=J,ne.attr("pointer-events","all"));var G=!E(ne)||Y.type==="buttons"?Y.buttons:[],K=Y.type==="dropdown"?o.dropdownButtonClassName:o.buttonClassName,ee=ne.selectAll("g."+K).data(s.filterVisible(G)),ie=ee.enter().append("g").classed(K,!0),re=ee.exit();Y.type==="dropdown"?(ie.attr("opacity","0").transition().attr("opacity","1"),re.transition().attr("opacity","0").remove()):re.remove();var se=0,ge=0,xe=Y._dims,Se=["up","down"].indexOf(Y.direction)!==-1;Y.type==="dropdown"&&(Se?ge=xe.headerHeight+o.gapButtonHeader:se=xe.headerWidth+o.gapButtonHeader),Y.type==="dropdown"&&Y.direction==="up"&&(ge=-o.gapButtonHeader+o.gapButton-xe.openHeight),Y.type==="dropdown"&&Y.direction==="left"&&(se=-o.gapButtonHeader+o.gapButton-xe.openWidth);var ce={x:xe.lx+se+Y.pad.l,y:xe.ly+ge+Y.pad.t,yPad:o.gapButton,xPad:o.gapButton,index:0},pe={l:ce.x+Y.borderwidth,t:ce.y+Y.borderwidth};ee.each(function(ye,U){var W=i.select(this);W.call(C,Y,ye,B).call(k,Y,ce),W.on("click",function(){i.event.defaultPrevented||(ye.execute&&(ye.args2&&Y.active===U?(b(B,Y,ye,J,ne,oe,-1),c.executeAPICommand(B,ye.method,ye.args2)):(b(B,Y,ye,J,ne,oe,U),c.executeAPICommand(B,ye.method,ye.args))),B.emit("plotly_buttonclicked",{menu:Y,button:ye,active:Y.active}))}),W.on("mouseover",function(){W.call(O)}),W.on("mouseout",function(){W.call(N,Y),ee.call(D,Y)})}),ee.call(D,Y),Se?(pe.w=Math.max(xe.openWidth,xe.headerWidth),pe.h=ce.y-pe.t):(pe.w=ce.x-pe.l,pe.h=Math.max(xe.openHeight,xe.headerHeight)),pe.direction=Y.direction,oe&&(ee.size()?R(B,J,ne,oe,Y,pe):T(oe))}function R(B,J,ne,oe,Y,G){var K=Y.direction,ee=K==="up"||K==="down",ie=Y._dims,re=Y.active,se,ge,xe;if(ee)for(ge=0,xe=0;xe<re;xe++)ge+=ie.heights[xe]+o.gapButton;else for(se=0,xe=0;xe<re;xe++)se+=ie.widths[xe]+o.gapButton;oe.enable(G,se,ge),oe.hbar&&oe.hbar.attr("opacity","0").transition().attr("opacity","1"),oe.vbar&&oe.vbar.attr("opacity","0").transition().attr("opacity","1")}function T(B){var J=!!B.hbar,ne=!!B.vbar;J&&B.hbar.transition().attr("opacity","0").each("end",function(){J=!1,ne||B.disable()}),ne&&B.vbar.transition().attr("opacity","0").each("end",function(){ne=!1,J||B.disable()})}function C(B,J,ne,oe){B.call(m,J).call(L,J,ne,oe)}function m(B,J){var ne=s.ensureSingle(B,"rect",o.itemRectClassName,function(oe){oe.attr({rx:o.rx,ry:o.ry,"shape-rendering":"crispEdges"})});ne.call(a.stroke,J.bordercolor).call(a.fill,J.bgcolor).style("stroke-width",J.borderwidth+"px")}function L(B,J,ne,oe){var Y=s.ensureSingle(B,"text",o.itemTextClassName,function(ee){ee.attr({"text-anchor":"start","data-notex":1})}),G=ne.label,K=oe._fullLayout._meta;K&&(G=s.templateString(G,K)),Y.call(l.font,J.font).text(G).call(v.convertToTspans,oe)}function D(B,J){var ne=J.active;B.each(function(oe,Y){var G=i.select(this);Y===ne&&J.showactive&&G.select("rect."+o.itemRectClassName).call(a.fill,o.activeColor)})}function O(B){B.select("rect."+o.itemRectClassName).call(a.fill,o.hoverColor)}function N(B,J){B.select("rect."+o.itemRectClassName).call(a.fill,J.bgcolor)}function V(B,J){var ne=J._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},oe=l.tester.selectAll("g."+o.dropdownButtonClassName).data(s.filterVisible(J.buttons));oe.enter().append("g").classed(o.dropdownButtonClassName,!0);var Y=["up","down"].indexOf(J.direction)!==-1;oe.each(function(se,ge){var xe=i.select(this);xe.call(C,J,se,B);var Se=xe.select("."+o.itemTextClassName),ce=Se.node()&&l.bBox(Se.node()).width,pe=Math.max(ce+o.textPadX,o.minWidth),ye=J.font.size*p,U=v.lineCount(Se),W=Math.max(ye*U,o.minHeight)+o.textOffsetY;W=Math.ceil(W),pe=Math.ceil(pe),ne.widths[ge]=pe,ne.heights[ge]=W,ne.height1=Math.max(ne.height1,W),ne.width1=Math.max(ne.width1,pe),Y?(ne.totalWidth=Math.max(ne.totalWidth,pe),ne.openWidth=ne.totalWidth,ne.totalHeight+=W+o.gapButton,ne.openHeight+=W+o.gapButton):(ne.totalWidth+=pe+o.gapButton,ne.openWidth+=pe+o.gapButton,ne.totalHeight=Math.max(ne.totalHeight,W),ne.openHeight=ne.totalHeight)}),Y?ne.totalHeight-=o.gapButton:ne.totalWidth-=o.gapButton,ne.headerWidth=ne.width1+o.arrowPadX,ne.headerHeight=ne.height1,J.type==="dropdown"&&(Y?(ne.width1+=o.arrowPadX,ne.totalHeight=ne.height1):ne.totalWidth=ne.width1,ne.totalWidth+=o.arrowPadX),oe.remove();var G=ne.totalWidth+J.pad.l+J.pad.r,K=ne.totalHeight+J.pad.t+J.pad.b,ee=B._fullLayout._size;ne.lx=ee.l+ee.w*J.x,ne.ly=ee.t+ee.h*(1-J.y);var ie="left";s.isRightAnchor(J)&&(ne.lx-=G,ie="right"),s.isCenterAnchor(J)&&(ne.lx-=G/2,ie="center");var re="top";s.isBottomAnchor(J)&&(ne.ly-=K,re="bottom"),s.isMiddleAnchor(J)&&(ne.ly-=K/2,re="middle"),ne.totalWidth=Math.ceil(ne.totalWidth),ne.totalHeight=Math.ceil(ne.totalHeight),ne.lx=Math.round(ne.lx),ne.ly=Math.round(ne.ly),c.autoMargin(B,X(J),{x:J.x,y:J.y,l:G*({right:1,center:.5}[ie]||0),r:G*({left:1,center:.5}[ie]||0),b:K*({top:1,middle:.5}[re]||0),t:K*({bottom:1,middle:.5}[re]||0)})}function X(B){return o.autoMarginIdRoot+B._index}function k(B,J,ne,oe){oe=oe||{};var Y=B.select("."+o.itemRectClassName),G=B.select("."+o.itemTextClassName),K=J.borderwidth,ee=ne.index,ie=J._dims;l.setTranslate(B,K+ne.x,K+ne.y);var re=["up","down"].indexOf(J.direction)!==-1,se=oe.height||(re?ie.heights[ee]:ie.height1);Y.attr({x:0,y:0,width:oe.width||(re?ie.width1:ie.widths[ee]),height:se});var ge=J.font.size*p,xe=v.lineCount(G),Se=(xe-1)*ge/2;v.positionText(G,o.textOffsetX,se/2-Se+o.textOffsetY),re?ne.y+=ie.heights[ee]+ne.yPad:ne.x+=ie.widths[ee]+ne.xPad,ne.index++}function Z(B,J){B.attr(o.menuIndexAttrName,J||"-1").selectAll("g."+o.dropdownButtonClassName).remove()}},6908:function(f,u,r){var i=r(1331);f.exports={moduleType:"component",name:i.name,layoutAttributes:r(8444),supplyLayoutDefaults:r(1384),draw:r(4420)}},7400:function(f,u,r){f.exports=s;var i=r(3428),c=r(6308),a=r(3616),l=r(3400);function s(v,d,p){this.gd=v,this.container=d,this.id=p,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}s.barWidth=2,s.barLength=20,s.barRadius=2,s.barPad=1,s.barColor="#808BA4",s.prototype.enable=function(d,p,o){var y=this.gd._fullLayout,_=y.width,E=y.height;this.position=d;var M=this.position.l,b=this.position.w,w=this.position.t,A=this.position.h,R=this.position.direction,T=R==="down",C=R==="left",m=R==="right",L=R==="up",D=b,O=A,N,V,X,k;!T&&!C&&!m&&!L&&(this.position.direction="down",T=!0);var Z=T||L;Z?(N=M,V=N+D,T?(X=w,k=Math.min(X+O,E),O=k-X):(k=w+O,X=Math.max(k-O,0),O=k-X)):(X=w,k=X+O,C?(V=M+D,N=Math.max(V-D,0),D=V-N):(N=M,V=Math.min(N+D,_),D=V-N)),this._box={l:N,t:X,w:D,h:O};var B=b>D,J=s.barLength+2*s.barPad,ne=s.barWidth+2*s.barPad,oe=M,Y=w+A;Y+ne>E&&(Y=E-ne);var G=this.container.selectAll("rect.scrollbar-horizontal").data(B?[0]:[]);G.exit().on(".drag",null).remove(),G.enter().append("rect").classed("scrollbar-horizontal",!0).call(c.fill,s.barColor),B?(this.hbar=G.attr({rx:s.barRadius,ry:s.barRadius,x:oe,y:Y,width:J,height:ne}),this._hbarXMin=oe+J/2,this._hbarTranslateMax=D-J):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var K=A>O,ee=s.barWidth+2*s.barPad,ie=s.barLength+2*s.barPad,re=M+b,se=w;re+ee>_&&(re=_-ee);var ge=this.container.selectAll("rect.scrollbar-vertical").data(K?[0]:[]);ge.exit().on(".drag",null).remove(),ge.enter().append("rect").classed("scrollbar-vertical",!0).call(c.fill,s.barColor),K?(this.vbar=ge.attr({rx:s.barRadius,ry:s.barRadius,x:re,y:se,width:ee,height:ie}),this._vbarYMin=se+ie/2,this._vbarTranslateMax=O-ie):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var xe=this.id,Se=N-.5,ce=K?V+ee+.5:V+.5,pe=X-.5,ye=B?k+ne+.5:k+.5,U=y._topdefs.selectAll("#"+xe).data(B||K?[0]:[]);if(U.exit().remove(),U.enter().append("clipPath").attr("id",xe).append("rect"),B||K?(this._clipRect=U.select("rect").attr({x:Math.floor(Se),y:Math.floor(pe),width:Math.ceil(ce)-Math.floor(Se),height:Math.ceil(ye)-Math.floor(pe)}),this.container.call(a.setClipUrl,xe,this.gd),this.bg.attr({x:M,y:w,width:b,height:A})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),B||K){var W=i.behavior.drag().on("dragstart",function(){i.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(W);var j=i.behavior.drag().on("dragstart",function(){i.event.sourceEvent.preventDefault(),i.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));B&&this.hbar.on(".drag",null).call(j),K&&this.vbar.on(".drag",null).call(j)}this.setTranslate(p,o)},s.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(a.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},s.prototype._onBoxDrag=function(){var d=this.translateX,p=this.translateY;this.hbar&&(d-=i.event.dx),this.vbar&&(p-=i.event.dy),this.setTranslate(d,p)},s.prototype._onBoxWheel=function(){var d=this.translateX,p=this.translateY;this.hbar&&(d+=i.event.deltaY),this.vbar&&(p+=i.event.deltaY),this.setTranslate(d,p)},s.prototype._onBarDrag=function(){var d=this.translateX,p=this.translateY;if(this.hbar){var o=d+this._hbarXMin,y=o+this._hbarTranslateMax,_=l.constrain(i.event.x,o,y),E=(_-o)/(y-o),M=this.position.w-this._box.w;d=E*M}if(this.vbar){var b=p+this._vbarYMin,w=b+this._vbarTranslateMax,A=l.constrain(i.event.y,b,w),R=(A-b)/(w-b),T=this.position.h-this._box.h;p=R*T}this.setTranslate(d,p)},s.prototype.setTranslate=function(d,p){var o=this.position.w-this._box.w,y=this.position.h-this._box.h;if(d=l.constrain(d||0,0,o),p=l.constrain(p||0,0,y),this.translateX=d,this.translateY=p,this.container.call(a.setTranslate,this._box.l-this.position.l-d,this._box.t-this.position.t-p),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+d-.5),y:Math.floor(this.position.t+p-.5)}),this.hbar){var _=d/o;this.hbar.call(a.setTranslate,d+_*this._hbarTranslateMax,p)}if(this.vbar){var E=p/y;this.vbar.call(a.setTranslate,d,p+E*this._vbarTranslateMax)}}},4284:function(f){f.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},6208:function(f){f.exports={axisRefDescription:function(u,r,i){return["If set to a",u,"axis id (e.g. *"+u+"* or","*"+u+"2*), the `"+u+"` position refers to a",u,"coordinate. If set to *paper*, the `"+u+"`","position refers to the distance from the",r,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",r,"("+i+"). If set to a",u,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",r,"of the domain of that axis: e.g.,","*"+u+"2 domain* refers to the domain of the second",u," axis and a",u,"position of 0.5 refers to the","point between the",r,"and the",i,"of the domain of the","second",u,"axis."].join(" ")}}},6880:function(f){f.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},9104:function(f){f.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},3448:function(f){f.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},9032:function(f){f.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},9616:function(f,u){u.xmlns="http://www.w3.org/2000/xmlns/",u.svg="http://www.w3.org/2000/svg",u.xlink="http://www.w3.org/1999/xlink",u.svgAttrs={xmlns:u.svg,"xmlns:xlink":u.xlink}},4884:function(f,u,r){u.version=r(5788).version,r(8324),r(9288);for(var i=r(4040),c=u.register=i.register,a=r(2448),l=Object.keys(a),s=0;s<l.length;s++){var v=l[s];v.charAt(0)!=="_"&&(u[v]=a[v]),c({moduleType:"apiMethod",name:v,fn:a[v]})}c(r(5875)),c([r(9180),r(6864),r(2676),r(1592),r(7402),r(6908),r(7544),r(9692),r(1152),r(2704),r(4968),r(8932),r(5080),r(2780),r(3024),r(3080)]),c([r(6580),r(1680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(c(window.PlotlyLocales),delete window.PlotlyLocales),u.Icons=r(9224);var d=r(3024),p=r(7316);u.Plots={resize:p.resize,graphJson:p.graphJson,sendDataToCloud:p.sendDataToCloud},u.Fx={hover:d.hover,unhover:d.unhover,loneHover:d.loneHover,loneUnhover:d.loneUnhover},u.Snapshot=r(8904),u.PlotSchema=r(3060)},9224:function(f){f.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},8308:function(f,u){u.isLeftAnchor=function(i){return i.xanchor==="left"||i.xanchor==="auto"&&i.x<=.3333333333333333},u.isCenterAnchor=function(i){return i.xanchor==="center"||i.xanchor==="auto"&&i.x>.3333333333333333&&i.x<.6666666666666666},u.isRightAnchor=function(i){return i.xanchor==="right"||i.xanchor==="auto"&&i.x>=.6666666666666666},u.isTopAnchor=function(i){return i.yanchor==="top"||i.yanchor==="auto"&&i.y>=.6666666666666666},u.isMiddleAnchor=function(i){return i.yanchor==="middle"||i.yanchor==="auto"&&i.y>.3333333333333333&&i.y<.6666666666666666},u.isBottomAnchor=function(i){return i.yanchor==="bottom"||i.yanchor==="auto"&&i.y<=.3333333333333333}},1864:function(f,u,r){var i=r(435),c=i.mod,a=i.modHalf,l=Math.PI,s=2*l;function v(R){return R/180*l}function d(R){return R/l*180}function p(R){return Math.abs(R[1]-R[0])>s-1e-14}function o(R,T){return a(T-R,s)}function y(R,T){return Math.abs(o(R,T))}function _(R,T){if(p(T))return!0;var C,m;T[0]<T[1]?(C=T[0],m=T[1]):(C=T[1],m=T[0]),C=c(C,s),m=c(m,s),C>m&&(m+=s);var L=c(R,s),D=L+s;return L>=C&&L<=m||D>=C&&D<=m}function E(R,T,C,m){if(!_(T,m))return!1;var L,D;return C[0]<C[1]?(L=C[0],D=C[1]):(L=C[1],D=C[0]),R>=L&&R<=D}function M(R,T,C,m,L,D,O){L=L||0,D=D||0;var N=p([C,m]),V,X,k,Z,B;N?(V=0,X=l,k=s):C<m?(V=C,k=m):(V=m,k=C),R<T?(Z=R,B=T):(Z=T,B=R);function J(G,K){return[G*Math.cos(K)+L,D-G*Math.sin(K)]}var ne=Math.abs(k-V)<=l?0:1;function oe(G,K,ee){return"A"+[G,G]+" "+[0,ne,ee]+" "+J(G,K)}var Y;return N?Z===null?Y="M"+J(B,V)+oe(B,X,0)+oe(B,k,0)+"Z":Y="M"+J(Z,V)+oe(Z,X,0)+oe(Z,k,0)+"ZM"+J(B,V)+oe(B,X,1)+oe(B,k,1)+"Z":Z===null?(Y="M"+J(B,V)+oe(B,k,0),O&&(Y+="L0,0Z")):Y="M"+J(Z,V)+"L"+J(B,V)+oe(B,k,0)+"L"+J(Z,k)+oe(Z,V,1)+"Z",Y}function b(R,T,C,m,L){return M(null,R,T,C,m,L,0)}function w(R,T,C,m,L){return M(null,R,T,C,m,L,1)}function A(R,T,C,m,L,D){return M(R,T,C,m,L,D,1)}f.exports={deg2rad:v,rad2deg:d,angleDelta:o,angleDist:y,isFullCircle:p,isAngleInsideSector:_,isPtInsideSector:E,pathArc:b,pathSector:w,pathAnnulus:A}},8116:function(f,u,r){var i=r(3160).decode,c=r(3620),a=Array.isArray,l=ArrayBuffer,s=DataView;function v(M){return l.isView(M)&&!(M instanceof s)}u.isTypedArray=v;function d(M){return a(M)||v(M)}u.isArrayOrTypedArray=d;function p(M){return!d(M[0])}u.isArray1D=p,u.ensureArray=function(M,b){return a(M)||(M=[]),M.length=b,M};var o={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};o.uint8c=o.u1c,o.uint8=o.u1,o.int8=o.i1,o.uint16=o.u2,o.int16=o.i2,o.uint32=o.u4,o.int32=o.i4,o.float32=o.f4,o.float64=o.f8;function y(M){return M.constructor===ArrayBuffer}u.isArrayBuffer=y,u.decodeTypedArraySpec=function(M){var b=[],w=_(M),A=w.dtype,R=o[A];if(!R)throw new Error('Error in dtype: "'+A+'"');var T=R.BYTES_PER_ELEMENT,C=w.bdata;y(C)||(C=i(C));var m=w.shape===void 0?[C.byteLength/T]:(""+w.shape).split(",");m.reverse();var L=m.length,D,O,N=+m[0],V=T*N,X=0;if(L===1)b=new R(C);else if(L===2)for(D=+m[1],O=0;O<D;O++)b[O]=new R(C,X,N),X+=V;else if(L===3){D=+m[1];for(var k=+m[2],Z=0;Z<k;Z++)for(b[Z]=[],O=0;O<D;O++)b[Z][O]=new R(C,X,N),X+=V}else throw new Error("ndim: "+L+'is not supported with the shape:"'+w.shape+'"');return b.bdata=w.bdata,b.dtype=w.dtype,b.shape=m.reverse().join(","),M._inputArray=b,b},u.isTypedArraySpec=function(M){return c(M)&&M.hasOwnProperty("dtype")&&typeof M.dtype=="string"&&M.hasOwnProperty("bdata")&&(typeof M.bdata=="string"||y(M.bdata))&&(M.shape===void 0||M.hasOwnProperty("shape")&&(typeof M.shape=="string"||typeof M.shape=="number"))};function _(M){return{bdata:M.bdata,dtype:M.dtype,shape:M.shape}}u.concat=function(){var M=[],b=!0,w=0,A,R,T,C,m,L,D,O;for(T=0;T<arguments.length;T++)C=arguments[T],L=C.length,L&&(R?M.push(C):(R=C,m=L),a(C)?A=!1:(b=!1,w?A!==C.constructor&&(A=!1):A=C.constructor),w+=L);if(!w)return[];if(!M.length)return R;if(b)return R.concat.apply(R,M);if(A){for(D=new A(w),D.set(R),T=0;T<M.length;T++)C=M[T],D.set(C,m),m+=C.length;return D}for(D=new Array(w),O=0;O<R.length;O++)D[O]=R[O];for(T=0;T<M.length;T++){for(C=M[T],O=0;O<C.length;O++)D[m+O]=C[O];m+=O}return D},u.maxRowLength=function(M){return E(M,Math.max,0)},u.minRowLength=function(M){return E(M,Math.min,1/0)};function E(M,b,w){if(d(M))if(d(M[0])){for(var A=w,R=0;R<M.length;R++)A=b(A,M[R].length);return A}else return M.length;return 0}},4037:function(f,u,r){var i=r(8248),c=r(9032).BADNUM,a=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;f.exports=function(s){return typeof s=="string"&&(s=s.replace(a,"")),i(s)?Number(s):c}},3696:function(f){f.exports=function(r){var i=r._fullLayout;i._glcanvas&&i._glcanvas.size()&&i._glcanvas.each(function(c){c.regl&&c.regl.clear({color:!0,depth:!0})})}},5352:function(f){f.exports=function(r){r._responsiveChartHandler&&(window.removeEventListener("resize",r._responsiveChartHandler),delete r._responsiveChartHandler)}},3064:function(f,u,r){var i=r(8248),c=r(9760),a=r(2880).extendFlat,l=r(5464),s=r(8304),v=r(6308),d=r(3448).DESELECTDIM,p=r(2296),o=r(3756).counter,y=r(435).modHalf,_=r(8116).isArrayOrTypedArray,E=r(8116).isTypedArraySpec,M=r(8116).decodeTypedArraySpec;u.valObjectMeta={data_array:{coerceFunction:function(w,A,R){A.set(_(w)?w:E(w)?M(w):R)}},enumerated:{coerceFunction:function(w,A,R,T){T.coerceNumber&&(w=+w),T.values.indexOf(w)===-1?A.set(R):A.set(w)},validateFunction:function(w,A){A.coerceNumber&&(w=+w);for(var R=A.values,T=0;T<R.length;T++){var C=String(R[T]);if(C.charAt(0)==="/"&&C.charAt(C.length-1)==="/"){var m=new RegExp(C.substr(1,C.length-2));if(m.test(w))return!0}else if(w===R[T])return!0}return!1}},boolean:{coerceFunction:function(w,A,R){w===!0||w===!1?A.set(w):A.set(R)}},number:{coerceFunction:function(w,A,R,T){E(w)&&(w=M(w)),!i(w)||T.min!==void 0&&w<T.min||T.max!==void 0&&w>T.max?A.set(R):A.set(+w)}},integer:{coerceFunction:function(w,A,R,T){if((T.extras||[]).indexOf(w)!==-1){A.set(w);return}E(w)&&(w=M(w)),w%1||!i(w)||T.min!==void 0&&w<T.min||T.max!==void 0&&w>T.max?A.set(R):A.set(+w)}},string:{coerceFunction:function(w,A,R,T){if(typeof w!="string"){var C=typeof w=="number";T.strict===!0||!C?A.set(R):A.set(String(w))}else T.noBlank&&!w?A.set(R):A.set(w)}},color:{coerceFunction:function(w,A,R){E(w)&&(w=M(w)),c(w).isValid()?A.set(w):A.set(R)}},colorlist:{coerceFunction:function(w,A,R){function T(C){return c(C).isValid()}!Array.isArray(w)||!w.length?A.set(R):w.every(T)?A.set(w):A.set(R)}},colorscale:{coerceFunction:function(w,A,R){A.set(s.get(w,R))}},angle:{coerceFunction:function(w,A,R){E(w)&&(w=M(w)),w==="auto"?A.set("auto"):i(w)?A.set(y(+w,360)):A.set(R)}},subplotid:{coerceFunction:function(w,A,R,T){var C=T.regex||o(R);if(typeof w=="string"&&C.test(w)){A.set(w);return}A.set(R)},validateFunction:function(w,A){var R=A.dflt;return w===R?!0:typeof w!="string"?!1:!!o(R).test(w)}},flaglist:{coerceFunction:function(w,A,R,T){if((T.extras||[]).indexOf(w)!==-1){A.set(w);return}if(typeof w!="string"){A.set(R);return}for(var C=w.split("+"),m=0;m<C.length;){var L=C[m];T.flags.indexOf(L)===-1||C.indexOf(L)<m?C.splice(m,1):m++}C.length?A.set(C.join("+")):A.set(R)}},any:{coerceFunction:function(w,A,R){w===void 0?A.set(R):A.set(E(w)?M(w):w)}},info_array:{coerceFunction:function(w,A,R,T){function C(Y,G,K){var ee,ie={set:function(re){ee=re}};return K===void 0&&(K=G.dflt),u.valObjectMeta[G.valType].coerceFunction(Y,ie,K,G),ee}if(E(w)&&(w=M(w)),!_(w)){A.set(R);return}var m=T.dimensions===2||T.dimensions==="1-2"&&Array.isArray(w)&&_(w[0]),L=T.items,D=[],O=Array.isArray(L),N=O&&m&&_(L[0]),V=m&&O&&!N,X=O&&!V?L.length:w.length,k,Z,B,J,ne,oe;if(R=Array.isArray(R)?R:[],m)for(k=0;k<X;k++)for(D[k]=[],B=_(w[k])?w[k]:[],V?ne=L.length:O?ne=L[k].length:ne=B.length,Z=0;Z<ne;Z++)V?J=L[Z]:O?J=L[k][Z]:J=L,oe=C(B[Z],J,(R[k]||[])[Z]),oe!==void 0&&(D[k][Z]=oe);else for(k=0;k<X;k++)oe=C(w[k],O?L[k]:L,R[k]),oe!==void 0&&(D[k]=oe);A.set(D)},validateFunction:function(w,A){if(!_(w))return!1;var R=A.items,T=Array.isArray(R),C=A.dimensions===2;if(!A.freeLength&&w.length!==R.length)return!1;for(var m=0;m<w.length;m++)if(C){if(!_(w[m])||!A.freeLength&&w[m].length!==R[m].length)return!1;for(var L=0;L<w[m].length;L++)if(!b(w[m][L],T?R[m][L]:R))return!1}else if(!b(w[m],T?R[m]:R))return!1;return!0}}},u.coerce=function(w,A,R,T,C){var m=p(R,T).get(),L=p(w,T),D=p(A,T),O=L.get(),N=A._template;if(O===void 0&&N&&(O=p(N,T).get(),N=0),C===void 0&&(C=m.dflt),m.arrayOk){if(_(O))return D.set(O),O;if(E(O))return O=M(O),D.set(O),O}var V=u.valObjectMeta[m.valType].coerceFunction;V(O,D,C,m);var X=D.get();return N&&X===C&&!b(O,m)&&(O=p(N,T).get(),V(O,D,C,m),X=D.get()),X},u.coerce2=function(w,A,R,T,C){var m=p(w,T),L=u.coerce(w,A,R,T,C),D=m.get();return D!=null?L:!1},u.coerceFont=function(w,A,R,T){T||(T={}),R=a({},R),R=a(R,T.overrideDflt||{});var C={family:w(A+".family",R.family),size:w(A+".size",R.size),color:w(A+".color",R.color),weight:w(A+".weight",R.weight),style:w(A+".style",R.style)};if(T.noFontVariant||(C.variant=w(A+".variant",R.variant)),T.noFontLineposition||(C.lineposition=w(A+".lineposition",R.lineposition)),T.noFontTextcase||(C.textcase=w(A+".textcase",R.textcase)),!T.noFontShadow){var m=R.shadow;m==="none"&&T.autoShadowDflt&&(m="auto"),C.shadow=w(A+".shadow",m)}return C},u.coercePattern=function(w,A,R,T){var C=w(A+".shape");if(C){w(A+".solidity"),w(A+".size");var m=w(A+".fillmode"),L=m==="overlay";if(!T){var D=w(A+".bgcolor",L?R:void 0);w(A+".fgcolor",L?v.contrast(D):R)}w(A+".fgopacity",L?.5:1)}},u.coerceHoverinfo=function(w,A,R){var T=A._module.attributes,C=T.hoverinfo?T:l,m=C.hoverinfo,L;if(R._dataLength===1){var D=m.dflt==="all"?m.flags.slice():m.dflt.split("+");D.splice(D.indexOf("name"),1),L=D.join("+")}return u.coerce(w,A,C,"hoverinfo",L)},u.coerceSelectionMarkerOpacity=function(w,A){if(w.marker){var R=w.marker.opacity;if(R!==void 0){var T,C;!_(R)&&!w.selected&&!w.unselected&&(T=R,C=d*R),A("selected.marker.opacity",T),A("unselected.marker.opacity",C)}}};function b(w,A){var R=u.valObjectMeta[A.valType];if(A.arrayOk&&_(w))return!0;if(R.validateFunction)return R.validateFunction(w,A);var T={},C=T,m={set:function(L){C=L}};return R.coerceFunction(w,m,T,A),C!==T}u.validate=b},7555:function(f,u,r){var i=r(4336).Yn,c=r(8248),a=r(4248),l=r(435).mod,s=r(9032),v=s.BADNUM,d=s.ONEDAY,p=s.ONEHOUR,o=s.ONEMIN,y=s.ONESEC,_=s.EPOCHJD,E=r(4040),M=r(4336).E9,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,w=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,A=new Date().getFullYear()-70;function R(Y){return Y&&E.componentsRegistry.calendars&&typeof Y=="string"&&Y!=="gregorian"}u.dateTick0=function(Y,G){var K=T(Y,!!G);if(G<2)return K;var ee=u.dateTime2ms(K,Y);return ee+=d*(G-1),u.ms2DateTime(ee,0,Y)};function T(Y,G){return R(Y)?G?E.getComponentMethod("calendars","CANONICAL_SUNDAY")[Y]:E.getComponentMethod("calendars","CANONICAL_TICK")[Y]:G?"2000-01-02":"2000-01-01"}u.dfltRange=function(Y){return R(Y)?E.getComponentMethod("calendars","DFLTRANGE")[Y]:["2000-01-01","2001-01-01"]},u.isJSDate=function(Y){return typeof Y=="object"&&Y!==null&&typeof Y.getTime=="function"};var C,m;u.dateTime2ms=function(Y,G){if(u.isJSDate(Y)){var K=Y.getTimezoneOffset()*o,ee=(Y.getUTCMinutes()-Y.getMinutes())*o+(Y.getUTCSeconds()-Y.getSeconds())*y+(Y.getUTCMilliseconds()-Y.getMilliseconds());if(ee){var ie=3*o;K=K-ie/2+l(ee-K+ie/2,ie)}return Y=Number(Y)-K,Y>=C&&Y<=m?Y:v}if(typeof Y!="string"&&typeof Y!="number")return v;Y=String(Y);var re=R(G),se=Y.charAt(0);re&&(se==="G"||se==="g")&&(Y=Y.substr(1),G="");var ge=re&&G.substr(0,7)==="chinese",xe=Y.match(ge?w:b);if(!xe)return v;var Se=xe[1],ce=xe[3]||"1",pe=Number(xe[5]||1),ye=Number(xe[7]||0),U=Number(xe[9]||0),W=Number(xe[11]||0);if(re){if(Se.length===2)return v;Se=Number(Se);var j;try{var F=E.getComponentMethod("calendars","getCal")(G);if(ge){var P=ce.charAt(ce.length-1)==="i";ce=parseInt(ce,10),j=F.newDate(Se,F.toMonthIndex(Se,ce,P),pe)}else j=F.newDate(Se,Number(ce),pe)}catch{return v}return j?(j.toJD()-_)*d+ye*p+U*o+W*y:v}Se.length===2?Se=(Number(Se)+2e3-A)%100+A:Se=Number(Se),ce-=1;var q=new Date(Date.UTC(2e3,ce,pe,ye,U));return q.setUTCFullYear(Se),q.getUTCMonth()!==ce||q.getUTCDate()!==pe?v:q.getTime()+W*y},C=u.MIN_MS=u.dateTime2ms("-9999"),m=u.MAX_MS=u.dateTime2ms("9999-12-31 23:59:59.9999"),u.isDateTime=function(Y,G){return u.dateTime2ms(Y,G)!==v};function L(Y,G){return String(Y+Math.pow(10,G)).substr(1)}var D=90*d,O=3*p,N=5*o;u.ms2DateTime=function(Y,G,K){if(typeof Y!="number"||!(Y>=C&&Y<=m))return v;G||(G=0);var ee=Math.floor(l(Y+.05,1)*10),ie=Math.round(Y-ee/10),re,se,ge,xe,Se,ce;if(R(K)){var pe=Math.floor(ie/d)+_,ye=Math.floor(l(Y,d));try{re=E.getComponentMethod("calendars","getCal")(K).fromJD(pe).formatDate("yyyy-mm-dd")}catch{re=M("G%Y-%m-%d")(new Date(ie))}if(re.charAt(0)==="-")for(;re.length<11;)re="-0"+re.substr(1);else for(;re.length<10;)re="0"+re;se=G<D?Math.floor(ye/p):0,ge=G<D?Math.floor(ye%p/o):0,xe=G<O?Math.floor(ye%o/y):0,Se=G<N?ye%y*10+ee:0}else ce=new Date(ie),re=M("%Y-%m-%d")(ce),se=G<D?ce.getUTCHours():0,ge=G<D?ce.getUTCMinutes():0,xe=G<O?ce.getUTCSeconds():0,Se=G<N?ce.getUTCMilliseconds()*10+ee:0;return V(re,se,ge,xe,Se)},u.ms2DateTimeLocal=function(Y){if(!(Y>=C+d&&Y<=m-d))return v;var G=Math.floor(l(Y+.05,1)*10),K=new Date(Math.round(Y-G/10)),ee=i("%Y-%m-%d")(K),ie=K.getHours(),re=K.getMinutes(),se=K.getSeconds(),ge=K.getUTCMilliseconds()*10+G;return V(ee,ie,re,se,ge)};function V(Y,G,K,ee,ie){if((G||K||ee||ie)&&(Y+=" "+L(G,2)+":"+L(K,2),(ee||ie)&&(Y+=":"+L(ee,2),ie))){for(var re=4;ie%10===0;)re-=1,ie/=10;Y+="."+L(ie,re)}return Y}u.cleanDate=function(Y,G,K){if(Y===v)return G;if(u.isJSDate(Y)||typeof Y=="number"&&isFinite(Y)){if(R(K))return a.error("JS Dates and milliseconds are incompatible with world calendars",Y),G;if(Y=u.ms2DateTimeLocal(+Y),!Y&&G!==void 0)return G}else if(!u.isDateTime(Y,K))return a.error("unrecognized date",Y),G;return Y};var X=/%\d?f/g,k=/%h/g,Z={1:"1",2:"1",3:"2",4:"2"};function B(Y,G,K,ee){Y=Y.replace(X,function(re){var se=Math.min(+re.charAt(1)||6,6),ge=(G/1e3%1+2).toFixed(se).substr(2).replace(/0+$/,"")||"0";return ge});var ie=new Date(Math.floor(G+.05));if(Y=Y.replace(k,function(){return Z[K("%q")(ie)]}),R(ee))try{Y=E.getComponentMethod("calendars","worldCalFmt")(Y,G,ee)}catch{return"Invalid"}return K(Y)(ie)}var J=[59,59.9,59.99,59.999,59.9999];function ne(Y,G){var K=l(Y+.05,d),ee=L(Math.floor(K/p),2)+":"+L(l(Math.floor(K/o),60),2);if(G!=="M"){c(G)||(G=0);var ie=Math.min(l(Y/y,60),J[G]),re=(100+ie).toFixed(G).substr(1);G>0&&(re=re.replace(/0+$/,"").replace(/[\.]$/,"")),ee+=":"+re}return ee}u.formatDate=function(Y,G,K,ee,ie,re){if(ie=R(ie)&&ie,!G)if(K==="y")G=re.year;else if(K==="m")G=re.month;else if(K==="d")G=re.dayMonth+`
`+re.year;else return ne(Y,K)+`
`+B(re.dayMonthYear,Y,ee,ie);return B(G,Y,ee,ie)};var oe=3*d;u.incrementMonth=function(Y,G,K){K=R(K)&&K;var ee=l(Y,d);if(Y=Math.round(Y-ee),K)try{var ie=Math.round(Y/d)+_,re=E.getComponentMethod("calendars","getCal")(K),se=re.fromJD(ie);return G%12?re.add(se,G,"m"):re.add(se,G/12,"y"),(se.toJD()-_)*d+ee}catch{a.error("invalid ms "+Y+" in calendar "+K)}var ge=new Date(Y+oe);return ge.setUTCMonth(ge.getUTCMonth()+G)+ee-oe},u.findExactDates=function(Y,G){for(var K=0,ee=0,ie=0,re=0,se,ge,xe=R(G)&&E.getComponentMethod("calendars","getCal")(G),Se=0;Se<Y.length;Se++){if(ge=Y[Se],!c(ge)){re++;continue}if(!(ge%d))if(xe)try{se=xe.fromJD(ge/d+_),se.day()===1?se.month()===1?K++:ee++:ie++}catch{}else se=new Date(ge),se.getUTCDate()===1?se.getUTCMonth()===0?K++:ee++:ie++}ee+=K,ie+=ee;var ce=Y.length-re;return{exactYears:K/ce,exactMonths:ee/ce,exactDays:ie/ce}}},2200:function(f,u,r){var i=r(3428),c=r(4248),a=r(2248),l=r(6524);function s(A){var R;if(typeof A=="string"){if(R=document.getElementById(A),R===null)throw new Error("No DOM element with id '"+A+"' exists on the page.");return R}else if(A==null)throw new Error("DOM element provided is null or undefined");return A}function v(A){var R=i.select(A);return R.node()instanceof HTMLElement&&R.size()&&R.classed("js-plotly-plot")}function d(A){var R=A&&A.parentNode;R&&R.removeChild(A)}function p(A,R){o("global",A,R)}function o(A,R,T){var C="plotly.js-style-"+A,m=document.getElementById(C);m||(m=document.createElement("style"),m.setAttribute("id",C),m.appendChild(document.createTextNode("")),document.head.appendChild(m));var L=m.sheet;L.insertRule?L.insertRule(R+"{"+T+"}",0):L.addRule?L.addRule(R,T,0):c.warn("addStyleRule failed")}function y(A){var R="plotly.js-style-"+A,T=document.getElementById(R);T&&d(T)}function _(A){var R=M(A),T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return R.forEach(function(C){var m=E(C);if(m){var L=a.convertCssMatrix(m);T=l.multiply(T,T,L)}}),T}function E(A){var R=window.getComputedStyle(A,null),T=R.getPropertyValue("-webkit-transform")||R.getPropertyValue("-moz-transform")||R.getPropertyValue("-ms-transform")||R.getPropertyValue("-o-transform")||R.getPropertyValue("transform");return T==="none"?null:T.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(C){return+C})}function M(A){for(var R=[];b(A);)R.push(A),A=A.parentNode,typeof ShadowRoot=="function"&&A instanceof ShadowRoot&&(A=A.host);return R}function b(A){return A&&(A instanceof Element||A instanceof HTMLElement)}function w(A,R){return A&&R&&A.top===R.top&&A.left===R.left&&A.right===R.right&&A.bottom===R.bottom}f.exports={getGraphDiv:s,isPlotDiv:v,removeElement:d,addStyleRule:p,addRelatedStyleRule:o,deleteRelatedStyleRule:y,getFullTransformMatrix:_,getElementTransformMatrix:E,getElementAndAncestors:M,equalDomRects:w}},5924:function(f,u,r){var i=r(1252).EventEmitter,c={init:function(a){if(a._ev instanceof i)return a;var l=new i,s=new i;return a._ev=l,a._internalEv=s,a.on=l.on.bind(l),a.once=l.once.bind(l),a.removeListener=l.removeListener.bind(l),a.removeAllListeners=l.removeAllListeners.bind(l),a._internalOn=s.on.bind(s),a._internalOnce=s.once.bind(s),a._removeInternalListener=s.removeListener.bind(s),a._removeAllInternalListeners=s.removeAllListeners.bind(s),a.emit=function(v,d){typeof jQuery<"u"&&jQuery(a).trigger(v,d),l.emit(v,d),s.emit(v,d)},a},triggerHandler:function(a,l,s){var v,d;typeof jQuery<"u"&&(v=jQuery(a).triggerHandler(l,s));var p=a._ev;if(!p)return v;var o=p._events[l];if(!o)return v;function y(E){if(E.listener){if(p.removeListener(l,E.listener),!E.fired)return E.fired=!0,E.listener.apply(p,[s])}else return E.apply(p,[s])}o=Array.isArray(o)?o:[o];var _;for(_=0;_<o.length-1;_++)y(o[_]);return d=y(o[_]),v!==void 0?v:d},purge:function(a){return delete a._ev,delete a.on,delete a.once,delete a.removeListener,delete a.removeAllListeners,delete a.emit,delete a._ev,delete a._internalEv,delete a._internalOn,delete a._internalOnce,delete a._removeInternalListener,delete a._removeAllInternalListeners,a}};f.exports=c},2880:function(f,u,r){var i=r(3620),c=Array.isArray;function a(s,v){var d,p;for(d=0;d<s.length;d++){if(p=s[d],p!==null&&typeof p=="object")return!1;p!==void 0&&(v[d]=p)}return!0}u.extendFlat=function(){return l(arguments,!1,!1,!1)},u.extendDeep=function(){return l(arguments,!0,!1,!1)},u.extendDeepAll=function(){return l(arguments,!0,!0,!1)},u.extendDeepNoArrays=function(){return l(arguments,!0,!1,!0)};function l(s,v,d,p){var o=s[0],y=s.length,_,E,M,b,w,A,R;if(y===2&&c(o)&&c(s[1])&&o.length===0){if(R=a(s[1],o),R)return o;o.splice(0,o.length)}for(var T=1;T<y;T++){_=s[T];for(E in _)M=o[E],b=_[E],p&&c(b)?o[E]=b:v&&b&&(i(b)||(w=c(b)))?(w?(w=!1,A=M&&c(M)?M:[]):A=M&&i(M)?M:{},o[E]=l([A,b],v,d,p)):(typeof b<"u"||d)&&(o[E]=b)}return o}},8944:function(f){f.exports=function(r){for(var i={},c=[],a=0,l=0;l<r.length;l++){var s=r[l];i[s]!==1&&(i[s]=1,c[a++]=s)}return c}},3880:function(f){f.exports=function(a){for(var l=i(a)?r:u,s=[],v=0;v<a.length;v++){var d=a[v];l(d)&&s.push(d)}return s};function u(c){return c.visible===!0}function r(c){var a=c[0].trace;return a.visible===!0&&a._length!==0}function i(c){return Array.isArray(c)&&Array.isArray(c[0])&&c[0][0]&&c[0][0].trace}},2348:function(f,u,r){var i=r(435).mod;u.segmentsIntersect=c;function c(d,p,o,y,_,E,M,b){var w=o-d,A=_-d,R=M-_,T=y-p,C=E-p,m=b-E,L=w*m-R*T;if(L===0)return null;var D=(A*m-R*C)/L,O=(A*T-w*C)/L;return O<0||O>1||D<0||D>1?null:{x:d+w*D,y:p+T*D}}u.segmentDistance=function(p,o,y,_,E,M,b,w){if(c(p,o,y,_,E,M,b,w))return 0;var A=y-p,R=_-o,T=b-E,C=w-M,m=A*A+R*R,L=T*T+C*C,D=Math.min(a(A,R,m,E-p,M-o),a(A,R,m,b-p,w-o),a(T,C,L,p-E,o-M),a(T,C,L,y-E,_-M));return Math.sqrt(D)};function a(d,p,o,y,_){var E=y*d+_*p;if(E<0)return y*y+_*_;if(E>o){var M=y-d,b=_-p;return M*M+b*b}else{var w=y*p-_*d;return w*w/o}}var l,s,v;u.getTextLocation=function(p,o,y,_){if((p!==s||_!==v)&&(l={},s=p,v=_),l[y])return l[y];var E=p.getPointAtLength(i(y-_/2,o)),M=p.getPointAtLength(i(y+_/2,o)),b=Math.atan((M.y-E.y)/(M.x-E.x)),w=p.getPointAtLength(i(y,o)),A=(w.x*4+E.x+M.x)/6,R=(w.y*4+E.y+M.y)/6,T={x:A,y:R,theta:b};return l[y]=T,T},u.clearLocationCache=function(){s=null},u.getVisibleSegment=function(p,o,y){var _=o.left,E=o.right,M=o.top,b=o.bottom,w=0,A=p.getTotalLength(),R=A,T,C;function m(D){var O=p.getPointAtLength(D);D===0?T=O:D===A&&(C=O);var N=O.x<_?_-O.x:O.x>E?O.x-E:0,V=O.y<M?M-O.y:O.y>b?O.y-b:0;return Math.sqrt(N*N+V*V)}for(var L=m(w);L;){if(w+=L+y,w>R)return;L=m(w)}for(L=m(R);L;){if(R-=L+y,w>R)return;L=m(R)}return{min:w,max:R,len:R-w,total:A,isClosed:w===0&&R===A&&Math.abs(T.x-C.x)<.1&&Math.abs(T.y-C.y)<.1}},u.findPointOnPath=function(p,o,y,_){_=_||{};for(var E=_.pathLength||p.getTotalLength(),M=_.tolerance||.001,b=_.iterationLimit||30,w=p.getPointAtLength(0)[y]>p.getPointAtLength(E)[y]?-1:1,A=0,R=0,T=E,C,m,L;A<b;){if(C=(R+T)/2,m=p.getPointAtLength(C),L=m[y]-o,Math.abs(L)<M)return m;w*L>0?T=C:R=C,A++}return m}},5536:function(f){f.exports=function(r){return r}},1396:function(f){f.exports=function(r,i){if(!i)return r;var c=1/Math.abs(i),a=c>1?(c*r+c*i)/c:r+i,l=String(a).length;if(l>16){var s=String(i).length,v=String(r).length;if(l>=v+s){var d=parseFloat(a).toPrecision(12);d.indexOf("e+")===-1&&(a=+d)}}return a}},3400:function(f,u,r){var i=r(3428),c=r(4336).E9,a=r(7624).E9,l=r(8248),s=r(9032),v=s.FP_SAFE,d=-v,p=s.BADNUM,o=f.exports={};o.adjustFormat=function(j){return!j||/^\d[.]\df/.test(j)||/[.]\d%/.test(j)?j:j==="0.f"?"~f":/^\d%/.test(j)?"~%":/^\ds/.test(j)?"~s":!/^[~,.0$]/.test(j)&&/[&fps]/.test(j)?"~"+j:j};var y={};o.warnBadFormat=function(W){var j=String(W);y[j]||(y[j]=1,o.warn('encountered bad format: "'+j+'"'))},o.noFormat=function(W){return String(W)},o.numberFormat=function(W){var j;try{j=a(o.adjustFormat(W))}catch{return o.warnBadFormat(W),o.noFormat}return j},o.nestedProperty=r(2296),o.keyedContainer=r(7804),o.relativeAttr=r(3193),o.isPlainObject=r(3620),o.toLogRange=r(6896),o.relinkPrivateKeys=r(1528);var _=r(8116);o.isArrayBuffer=_.isArrayBuffer,o.isTypedArray=_.isTypedArray,o.isArrayOrTypedArray=_.isArrayOrTypedArray,o.isArray1D=_.isArray1D,o.ensureArray=_.ensureArray,o.concat=_.concat,o.maxRowLength=_.maxRowLength,o.minRowLength=_.minRowLength;var E=r(435);o.mod=E.mod,o.modHalf=E.modHalf;var M=r(3064);o.valObjectMeta=M.valObjectMeta,o.coerce=M.coerce,o.coerce2=M.coerce2,o.coerceFont=M.coerceFont,o.coercePattern=M.coercePattern,o.coerceHoverinfo=M.coerceHoverinfo,o.coerceSelectionMarkerOpacity=M.coerceSelectionMarkerOpacity,o.validate=M.validate;var b=r(7555);o.dateTime2ms=b.dateTime2ms,o.isDateTime=b.isDateTime,o.ms2DateTime=b.ms2DateTime,o.ms2DateTimeLocal=b.ms2DateTimeLocal,o.cleanDate=b.cleanDate,o.isJSDate=b.isJSDate,o.formatDate=b.formatDate,o.incrementMonth=b.incrementMonth,o.dateTick0=b.dateTick0,o.dfltRange=b.dfltRange,o.findExactDates=b.findExactDates,o.MIN_MS=b.MIN_MS,o.MAX_MS=b.MAX_MS;var w=r(4952);o.findBin=w.findBin,o.sorterAsc=w.sorterAsc,o.sorterDes=w.sorterDes,o.distinctVals=w.distinctVals,o.roundUp=w.roundUp,o.sort=w.sort,o.findIndexOfMin=w.findIndexOfMin,o.sortObjectKeys=r(2996);var A=r(3084);o.aggNums=A.aggNums,o.len=A.len,o.mean=A.mean,o.median=A.median,o.midRange=A.midRange,o.variance=A.variance,o.stdev=A.stdev,o.interp=A.interp;var R=r(2248);o.init2dArray=R.init2dArray,o.transposeRagged=R.transposeRagged,o.dot=R.dot,o.translationMatrix=R.translationMatrix,o.rotationMatrix=R.rotationMatrix,o.rotationXYMatrix=R.rotationXYMatrix,o.apply3DTransform=R.apply3DTransform,o.apply2DTransform=R.apply2DTransform,o.apply2DTransform2=R.apply2DTransform2,o.convertCssMatrix=R.convertCssMatrix,o.inverseTransformMatrix=R.inverseTransformMatrix;var T=r(1864);o.deg2rad=T.deg2rad,o.rad2deg=T.rad2deg,o.angleDelta=T.angleDelta,o.angleDist=T.angleDist,o.isFullCircle=T.isFullCircle,o.isAngleInsideSector=T.isAngleInsideSector,o.isPtInsideSector=T.isPtInsideSector,o.pathArc=T.pathArc,o.pathSector=T.pathSector,o.pathAnnulus=T.pathAnnulus;var C=r(8308);o.isLeftAnchor=C.isLeftAnchor,o.isCenterAnchor=C.isCenterAnchor,o.isRightAnchor=C.isRightAnchor,o.isTopAnchor=C.isTopAnchor,o.isMiddleAnchor=C.isMiddleAnchor,o.isBottomAnchor=C.isBottomAnchor;var m=r(2348);o.segmentsIntersect=m.segmentsIntersect,o.segmentDistance=m.segmentDistance,o.getTextLocation=m.getTextLocation,o.clearLocationCache=m.clearLocationCache,o.getVisibleSegment=m.getVisibleSegment,o.findPointOnPath=m.findPointOnPath;var L=r(2880);o.extendFlat=L.extendFlat,o.extendDeep=L.extendDeep,o.extendDeepAll=L.extendDeepAll,o.extendDeepNoArrays=L.extendDeepNoArrays;var D=r(4248);o.log=D.log,o.warn=D.warn,o.error=D.error;var O=r(3756);o.counterRegex=O.counter;var N=r(1200);o.throttle=N.throttle,o.throttleDone=N.done,o.clearThrottle=N.clear;var V=r(2200);o.getGraphDiv=V.getGraphDiv,o.isPlotDiv=V.isPlotDiv,o.removeElement=V.removeElement,o.addStyleRule=V.addStyleRule,o.addRelatedStyleRule=V.addRelatedStyleRule,o.deleteRelatedStyleRule=V.deleteRelatedStyleRule,o.getFullTransformMatrix=V.getFullTransformMatrix,o.getElementTransformMatrix=V.getElementTransformMatrix,o.getElementAndAncestors=V.getElementAndAncestors,o.equalDomRects=V.equalDomRects,o.clearResponsive=r(5352),o.preserveDrawingBuffer=r(4296),o.makeTraceGroups=r(988),o._=r(8356),o.notifier=r(1792),o.filterUnique=r(8944),o.filterVisible=r(3880),o.pushUnique=r(2416),o.increment=r(1396),o.cleanNumber=r(4037),o.ensureNumber=function(j){return l(j)?(j=Number(j),j>v||j<d?p:j):p},o.isIndex=function(W,j){return j!==void 0&&W>=j?!1:l(W)&&W>=0&&W%1===0},o.noop=r(6628),o.identity=r(5536),o.repeat=function(W,j){for(var F=new Array(j),P=0;P<j;P++)F[P]=W;return F},o.swapAttrs=function(W,j,F,P){F||(F="x"),P||(P="y");for(var q=0;q<j.length;q++){var z=j[q],te=o.nestedProperty(W,z.replace("?",F)),ue=o.nestedProperty(W,z.replace("?",P)),ve=te.get();te.set(ue.get()),ue.set(ve)}},o.raiseToTop=function(j){j.parentNode.appendChild(j)},o.cancelTransition=function(W){return W.transition().duration(0)},o.constrain=function(W,j,F){return j>F?Math.max(F,Math.min(j,W)):Math.max(j,Math.min(F,W))},o.bBoxIntersect=function(W,j,F){return F=F||0,W.left<=j.right+F&&j.left<=W.right+F&&W.top<=j.bottom+F&&j.top<=W.bottom+F},o.simpleMap=function(W,j,F,P,q){for(var z=W.length,te=new Array(z),ue=0;ue<z;ue++)te[ue]=j(W[ue],F,P,q);return te},o.randstr=function W(j,F,P,q){if(P||(P=16),F===void 0&&(F=24),F<=0)return"0";var z=Math.log(Math.pow(2,F))/Math.log(P),te="",ue,ve,_e;for(ue=2;z===1/0;ue*=2)z=Math.log(Math.pow(2,F/ue))/Math.log(P)*ue;var Re=z-Math.floor(z);for(ue=0;ue<Math.floor(z);ue++)_e=Math.floor(Math.random()*P).toString(P),te=_e+te;Re&&(ve=Math.pow(P,Re),_e=Math.floor(Math.random()*ve).toString(P),te=_e+te);var Le=parseInt(te,P);return j&&j[te]||Le!==1/0&&Le>=Math.pow(2,F)?q>10?(o.warn("randstr failed uniqueness"),te):W(j,F,P,(q||0)+1):te},o.OptionControl=function(W,j){W||(W={}),j||(j="opt");var F={};return F.optionList=[],F._newoption=function(P){P[j]=W,F[P.name]=P,F.optionList.push(P)},F["_"+j]=W,F},o.smooth=function(W,j){if(j=Math.round(j)||0,j<2)return W;var F=W.length,P=2*F,q=2*j-1,z=new Array(q),te=new Array(F),ue,ve,_e,Re;for(ue=0;ue<q;ue++)z[ue]=(1-Math.cos(Math.PI*(ue+1)/j))/(2*j);for(ue=0;ue<F;ue++){for(Re=0,ve=0;ve<q;ve++)_e=ue+ve+1-j,_e<-F?_e-=P*Math.round(_e/P):_e>=P&&(_e-=P*Math.floor(_e/P)),_e<0?_e=-1-_e:_e>=F&&(_e=P-1-_e),Re+=W[_e]*z[ve];te[ue]=Re}return te},o.syncOrAsync=function(W,j,F){var P,q;function z(){return o.syncOrAsync(W,j,F)}for(;W.length;)if(q=W.splice(0,1)[0],P=q(j),P&&P.then)return P.then(z);return F&&F(j)},o.stripTrailingSlash=function(W){return W.substr(-1)==="/"?W.substr(0,W.length-1):W},o.noneOrAll=function(W,j,F){if(W){var P=!1,q=!0,z,te;for(z=0;z<F.length;z++)te=W[F[z]],te!=null?P=!0:q=!1;if(P&&!q)for(z=0;z<F.length;z++)W[F[z]]=j[F[z]]}},o.mergeArray=function(W,j,F,P){var q=typeof P=="function";if(o.isArrayOrTypedArray(W))for(var z=Math.min(W.length,j.length),te=0;te<z;te++){var ue=W[te];j[te][F]=q?P(ue):ue}},o.mergeArrayCastPositive=function(W,j,F){return o.mergeArray(W,j,F,function(P){var q=+P;return isFinite(q)&&q>0?q:0})},o.fillArray=function(W,j,F,P){if(P=P||o.identity,o.isArrayOrTypedArray(W))for(var q=0;q<j.length;q++)j[q][F]=P(W[q])},o.castOption=function(W,j,F,P){P=P||o.identity;var q=o.nestedProperty(W,F).get();return o.isArrayOrTypedArray(q)?Array.isArray(j)&&o.isArrayOrTypedArray(q[j[0]])?P(q[j[0]][j[1]]):P(q[j]):q},o.extractOption=function(W,j,F,P){if(F in W)return W[F];var q=o.nestedProperty(j,P).get();if(!Array.isArray(q))return q};function X(W){var j={};for(var F in W)for(var P=W[F],q=0;q<P.length;q++)j[P[q]]=+F;return j}o.tagSelected=function(W,j,F){var P=j.selectedpoints,q=j._indexToPoints,z;q&&(z=X(q));function te(Le){return Le!==void 0&&Le<W.length}for(var ue=0;ue<P.length;ue++){var ve=P[ue];if(o.isIndex(ve)||o.isArrayOrTypedArray(ve)&&o.isIndex(ve[0])&&o.isIndex(ve[1])){var _e=z?z[ve]:ve,Re=F?F[_e]:_e;te(Re)&&(W[Re].selected=1)}}},o.selIndices2selPoints=function(W){var j=W.selectedpoints,F=W._indexToPoints;if(F){for(var P=X(F),q=[],z=0;z<j.length;z++){var te=j[z];if(o.isIndex(te)){var ue=P[te];o.isIndex(ue)&&q.push(ue)}}return q}else return j},o.getTargetArray=function(W,j){var F=j.target;if(typeof F=="string"&&F){var P=o.nestedProperty(W,F).get();return o.isArrayOrTypedArray(P)?P:!1}else if(o.isArrayOrTypedArray(F))return F;return!1};function k(W,j,F){var P={};typeof j!="object"&&(j={});var q=F==="pieLike"?-1:3,z=Object.keys(W),te,ue,ve;for(te=0;te<z.length;te++)ue=z[te],ve=W[ue],!(ue.charAt(0)==="_"||typeof ve=="function")&&(ue==="module"?P[ue]=ve:Array.isArray(ve)?ue==="colorscale"||q===-1?P[ue]=ve.slice():P[ue]=ve.slice(0,q):o.isTypedArray(ve)?q===-1?P[ue]=ve.subarray():P[ue]=ve.subarray(0,q):ve&&typeof ve=="object"?P[ue]=k(W[ue],j[ue],F):P[ue]=ve);for(z=Object.keys(j),te=0;te<z.length;te++)ue=z[te],ve=j[ue],(typeof ve!="object"||!(ue in P)||typeof P[ue]!="object")&&(P[ue]=ve);return P}o.minExtend=k,o.titleCase=function(W){return W.charAt(0).toUpperCase()+W.substr(1)},o.containsAny=function(W,j){for(var F=0;F<j.length;F++)if(W.indexOf(j[F])!==-1)return!0;return!1},o.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var Z=/Version\/[\d\.]+.*Safari/;o.isSafari=function(){return Z.test(window.navigator.userAgent)};var B=/iPad|iPhone|iPod/;o.isIOS=function(){return B.test(window.navigator.userAgent)};var J=/Firefox\/(\d+)\.\d+/;o.getFirefoxVersion=function(){var W=J.exec(window.navigator.userAgent);if(W&&W.length===2){var j=parseInt(W[1]);if(!isNaN(j))return j}return null},o.isD3Selection=function(W){return W instanceof i.selection},o.ensureSingle=function(W,j,F,P){var q=W.select(j+(F?"."+F:""));if(q.size())return q;var z=W.append(j);return F&&z.classed(F,!0),P&&z.call(P),z},o.ensureSingleById=function(W,j,F,P){var q=W.select(j+"#"+F);if(q.size())return q;var z=W.append(j).attr("id",F);return P&&z.call(P),z},o.objectFromPath=function(W,j){for(var F=W.split("."),P,q=P={},z=0;z<F.length;z++){var te=F[z],ue=null,ve=F[z].match(/(.*)\[([0-9]+)\]/);ve?(te=ve[1],ue=ve[2],P=P[te]=[],z===F.length-1?P[ue]=j:P[ue]={},P=P[ue]):(z===F.length-1?P[te]=j:P[te]={},P=P[te])}return q};var ne=/^([^\[\.]+)\.(.+)?/,oe=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function Y(W){return W.slice(0,2)==="__"}o.expandObjectPaths=function(W){var j,F,P,q,z,te,ue;if(typeof W=="object"&&!Array.isArray(W)){for(F in W)if(W.hasOwnProperty(F))if(j=F.match(ne)){if(q=W[F],P=j[1],Y(P))continue;delete W[F],W[P]=o.extendDeepNoArrays(W[P]||{},o.objectFromPath(F,o.expandObjectPaths(q))[P])}else if(j=F.match(oe)){if(q=W[F],P=j[1],Y(P))continue;if(z=parseInt(j[2]),delete W[F],W[P]=W[P]||[],j[3]===".")ue=j[4],te=W[P][z]=W[P][z]||{},o.extendDeepNoArrays(te,o.objectFromPath(ue,o.expandObjectPaths(q)));else{if(Y(P))continue;W[P][z]=o.expandObjectPaths(q)}}else{if(Y(F))continue;W[F]=o.expandObjectPaths(W[F])}}return W},o.numSeparate=function(W,j,F){if(F||(F=!1),typeof j!="string"||j.length===0)throw new Error("Separator string required for formatting!");typeof W=="number"&&(W=String(W));var P=/(\d+)(\d{3})/,q=j.charAt(0),z=j.charAt(1),te=W.split("."),ue=te[0],ve=te.length>1?q+te[1]:"";if(z&&(te.length>1||ue.length>4||F))for(;P.test(ue);)ue=ue.replace(P,"$1"+z+"$2");return ue+ve},o.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var G=/^\w*$/;o.templateString=function(W,j){var F={};return W.replace(o.TEMPLATE_STRING_REGEX,function(P,q){var z;return G.test(q)?z=j[q]:(F[q]=F[q]||o.nestedProperty(j,q).get,z=F[q]()),o.isValidTextValue(z)?z:""})};var K={max:10,count:0,name:"hovertemplate"};o.hovertemplateString=function(){return xe.apply(K,arguments)};var ee={max:10,count:0,name:"texttemplate"};o.texttemplateString=function(){return xe.apply(ee,arguments)};var ie=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function re(W){var j=W.match(ie);return j?{key:j[1],op:j[2],number:Number(j[3])}:{key:W,op:null,number:null}}var se={max:10,count:0,name:"texttemplate",parseMultDiv:!0};o.texttemplateStringForShapes=function(){return xe.apply(se,arguments)};var ge=/^[:|\|]/;function xe(W,j,F){var P=this,q=arguments;j||(j={});var z={};return W.replace(o.TEMPLATE_STRING_REGEX,function(te,ue,ve){var _e=ue==="xother"||ue==="yother",Re=ue==="_xother"||ue==="_yother",Le=ue==="_xother_"||ue==="_yother_",Ve=ue==="xother_"||ue==="yother_",Xe=_e||Re||Ve||Le,Ze=ue;(Re||Le)&&(Ze=Ze.substring(1)),(Ve||Le)&&(Ze=Ze.substring(0,Ze.length-1));var Te=null,we=null;if(P.parseMultDiv){var be=re(Ze);Ze=be.key,Te=be.op,we=be.number}var ke;if(Xe){if(ke=j[Ze],ke===void 0)return""}else{var He,Ke;for(Ke=3;Ke<q.length;Ke++)if(He=q[Ke],!!He){if(He.hasOwnProperty(Ze)){ke=He[Ze];break}if(G.test(Ze)||(ke=o.nestedProperty(He,Ze).get(),ke=z[Ze]||o.nestedProperty(He,Ze).get(),ke&&(z[Ze]=ke)),ke!==void 0)break}}if(ke!==void 0&&(Te==="*"&&(ke*=we),Te==="/"&&(ke/=we)),ke===void 0&&P)return P.count<P.max&&(o.warn("Variable '"+Ze+"' in "+P.name+" could not be found!"),ke=te),P.count===P.max&&o.warn("Too many "+P.name+" warnings - additional warnings will be suppressed"),P.count++,te;if(ve){var st;if(ve[0]===":"&&(st=F?F.numberFormat:o.numberFormat,ke!==""&&(ke=st(ve.replace(ge,""))(ke))),ve[0]==="|"){st=F?F.timeFormat:c;var vt=o.dateTime2ms(ke);ke=o.formatDate(vt,ve.replace(ge,""),!1,st)}}else{var pt=Ze+"Label";j.hasOwnProperty(pt)&&(ke=j[pt])}return Xe&&(ke="("+ke+")",(Re||Le)&&(ke=" "+ke),(Ve||Le)&&(ke=ke+" ")),ke})}var Se=48,ce=57;o.subplotSort=function(W,j){for(var F=Math.min(W.length,j.length)+1,P=0,q=0,z=0;z<F;z++){var te=W.charCodeAt(z)||0,ue=j.charCodeAt(z)||0,ve=te>=Se&&te<=ce,_e=ue>=Se&&ue<=ce;if(ve&&(P=10*P+te-Se),_e&&(q=10*q+ue-Se),!ve||!_e){if(P!==q)return P-q;if(te!==ue)return te-ue}}return q-P};var pe=2e9;o.seedPseudoRandom=function(){pe=2e9},o.pseudoRandom=function(){var W=pe;return pe=(69069*pe+1)%4294967296,Math.abs(pe-W)<429496729?o.pseudoRandom():pe/4294967296},o.fillText=function(W,j,F){var P=Array.isArray(F)?function(te){F.push(te)}:function(te){F.text=te},q=o.extractOption(W,j,"htx","hovertext");if(o.isValidTextValue(q))return P(q);var z=o.extractOption(W,j,"tx","text");if(o.isValidTextValue(z))return P(z)},o.isValidTextValue=function(W){return W||W===0},o.formatPercent=function(W,j){j=j||0;for(var F=(Math.round(100*W*Math.pow(10,j))*Math.pow(.1,j)).toFixed(j)+"%",P=0;P<j;P++)F.indexOf(".")!==-1&&(F=F.replace("0%","%"),F=F.replace(".%","%"));return F},o.isHidden=function(W){var j=window.getComputedStyle(W).display;return!j||j==="none"},o.strTranslate=function(W,j){return W||j?"translate("+W+","+j+")":""},o.strRotate=function(W){return W?"rotate("+W+")":""},o.strScale=function(W){return W!==1?"scale("+W+")":""},o.getTextTransform=function(W){var j=W.noCenter,F=W.textX,P=W.textY,q=W.targetX,z=W.targetY,te=W.anchorX||0,ue=W.anchorY||0,ve=W.rotate,_e=W.scale;return _e?_e>1&&(_e=1):_e=0,o.strTranslate(q-_e*(F+te),z-_e*(P+ue))+o.strScale(_e)+(ve?"rotate("+ve+(j?"":" "+F+" "+P)+")":"")},o.setTransormAndDisplay=function(W,j){W.attr("transform",o.getTextTransform(j)),W.style("display",j.scale?null:"none")},o.ensureUniformFontSize=function(W,j){var F=o.extendFlat({},j);return F.size=Math.max(j.size,W._fullLayout.uniformtext.minsize||0),F},o.join2=function(W,j,F){var P=W.length;return P>1?W.slice(0,-1).join(j)+F+W[P-1]:W.join(j)},o.bigFont=function(W){return Math.round(1.2*W)};var ye=o.getFirefoxVersion(),U=ye!==null&&ye<86;o.getPositionFromD3Event=function(){return U?[i.event.layerX,i.event.layerY]:[i.event.offsetX,i.event.offsetY]}},3620:function(f){f.exports=function(r){return window&&window.process&&window.process.versions?Object.prototype.toString.call(r)==="[object Object]":Object.prototype.toString.call(r)==="[object Object]"&&Object.getPrototypeOf(r).hasOwnProperty("hasOwnProperty")}},7804:function(f,u,r){var i=r(2296),c=/^\w*$/,a=0,l=1,s=2,v=3,d=4;f.exports=function(o,y,_,E){_=_||"name",E=E||"value";var M,b,w,A={};y&&y.length?(w=i(o,y),b=w.get()):b=o,y=y||"";var R={};if(b)for(M=0;M<b.length;M++)R[b[M][_]]=M;var T=c.test(E),C={set:function(m,L){var D=L===null?d:a;if(!b){if(!w||D===d)return;b=[],w.set(b)}var O=R[m];if(O===void 0){if(D===d)return;D=D|v,O=b.length,R[m]=O}else L!==(T?b[O][E]:i(b[O],E).get())&&(D=D|s);var N=b[O]=b[O]||{};return N[_]=m,T?N[E]=L:i(N,E).set(L),L!==null&&(D=D&~d),A[O]=A[O]|D,C},get:function(m){if(b){var L=R[m];if(L!==void 0)return T?b[L][E]:i(b[L],E).get()}},rename:function(m,L){var D=R[m];return D===void 0||(A[D]=A[D]|l,R[L]=D,delete R[m],b[D][_]=L),C},remove:function(m){var L=R[m];if(L===void 0)return C;var D=b[L];if(Object.keys(D).length>2)return A[L]=A[L]|s,C.set(m,null);if(T){for(M=L;M<b.length;M++)A[M]=A[M]|v;for(M=L;M<b.length;M++)R[b[M][_]]--;b.splice(L,1),delete R[m]}else i(D,E).set(null),A[L]=A[L]|s|d;return C},constructUpdate:function(){for(var m,L,D={},O=Object.keys(A),N=0;N<O.length;N++)L=O[N],m=y+"["+L+"]",b[L]?(A[L]&l&&(D[m+"."+_]=b[L][_]),A[L]&s&&(T?D[m+"."+E]=A[L]&d?null:b[L][E]:D[m+"."+E]=A[L]&d?null:i(b[L],E).get())):D[m]=null;return D}};return C}},8356:function(f,u,r){var i=r(4040);f.exports=function(a,l){for(var s=a._context.locale,v=0;v<2;v++){for(var d=a._context.locales,p=0;p<2;p++){var o=(d[s]||{}).dictionary;if(o){var y=o[l];if(y)return y}d=i.localeRegistry}var _=s.split("-")[0];if(_===s)break;s=_}return l}},4248:function(f,u,r){var i=r(556).dfltConfig,c=r(1792),a=f.exports={};a.log=function(){var l;if(i.logging>1){var s=["LOG:"];for(l=0;l<arguments.length;l++)s.push(arguments[l]);console.trace.apply(console,s)}if(i.notifyOnLogging>1){var v=[];for(l=0;l<arguments.length;l++)v.push(arguments[l]);c(v.join("<br>"),"long")}},a.warn=function(){var l;if(i.logging>0){var s=["WARN:"];for(l=0;l<arguments.length;l++)s.push(arguments[l]);console.trace.apply(console,s)}if(i.notifyOnLogging>0){var v=[];for(l=0;l<arguments.length;l++)v.push(arguments[l]);c(v.join("<br>"),"stick")}},a.error=function(){var l;if(i.logging>0){var s=["ERROR:"];for(l=0;l<arguments.length;l++)s.push(arguments[l]);console.error.apply(console,s)}if(i.notifyOnLogging>0){var v=[];for(l=0;l<arguments.length;l++)v.push(arguments[l]);c(v.join("<br>"),"stick")}}},988:function(f,u,r){var i=r(3428);f.exports=function(a,l,s){var v=a.selectAll("g."+s.replace(/\s/g,".")).data(l,function(p){return p[0].trace.uid});v.exit().remove(),v.enter().append("g").attr("class",s),v.order();var d=a.classed("rangeplot")?"nodeRangePlot3":"node3";return v.each(function(p){p[0][d]=i.select(this)}),v}},2248:function(f,u,r){var i=r(6524);u.init2dArray=function(c,a){for(var l=new Array(c),s=0;s<c;s++)l[s]=new Array(a);return l},u.transposeRagged=function(c){var a=0,l=c.length,s,v;for(s=0;s<l;s++)a=Math.max(a,c[s].length);var d=new Array(a);for(s=0;s<a;s++)for(d[s]=new Array(l),v=0;v<l;v++)d[s][v]=c[v][s];return d},u.dot=function(c,a){if(!(c.length&&a.length)||c.length!==a.length)return null;var l=c.length,s,v;if(c[0].length)for(s=new Array(l),v=0;v<l;v++)s[v]=u.dot(c[v],a);else if(a[0].length){var d=u.transposeRagged(a);for(s=new Array(d.length),v=0;v<d.length;v++)s[v]=u.dot(c,d[v])}else for(s=0,v=0;v<l;v++)s+=c[v]*a[v];return s},u.translationMatrix=function(c,a){return[[1,0,c],[0,1,a],[0,0,1]]},u.rotationMatrix=function(c){var a=c*Math.PI/180;return[[Math.cos(a),-Math.sin(a),0],[Math.sin(a),Math.cos(a),0],[0,0,1]]},u.rotationXYMatrix=function(c,a,l){return u.dot(u.dot(u.translationMatrix(a,l),u.rotationMatrix(c)),u.translationMatrix(-a,-l))},u.apply3DTransform=function(c){return function(){var a=arguments,l=arguments.length===1?a[0]:[a[0],a[1],a[2]||0];return u.dot(c,[l[0],l[1],l[2],1]).slice(0,3)}},u.apply2DTransform=function(c){return function(){var a=arguments;a.length===3&&(a=a[0]);var l=arguments.length===1?a[0]:[a[0],a[1]];return u.dot(c,[l[0],l[1],1]).slice(0,2)}},u.apply2DTransform2=function(c){var a=u.apply2DTransform(c);return function(l){return a(l.slice(0,2)).concat(a(l.slice(2,4)))}},u.convertCssMatrix=function(c){if(c){var a=c.length;if(a===16)return c;if(a===6)return[c[0],c[1],0,0,c[2],c[3],0,0,0,0,1,0,c[4],c[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},u.inverseTransformMatrix=function(c){var a=[];return i.invert(a,c),[[a[0],a[1],a[2],a[3]],[a[4],a[5],a[6],a[7]],[a[8],a[9],a[10],a[11]],[a[12],a[13],a[14],a[15]]]}},435:function(f){function u(i,c){var a=i%c;return a<0?a+c:a}function r(i,c){return Math.abs(i)>c/2?i-Math.round(i/c)*c:i}f.exports={mod:u,modHalf:r}},2296:function(f,u,r){var i=r(8248),c=r(8116).isArrayOrTypedArray;f.exports=function(E,M){if(i(M))M=String(M);else if(typeof M!="string"||M.substr(M.length-4)==="[-1]")throw"bad property string";var b=M.split("."),w,A,R,T;for(T=0;T<b.length;T++)if(String(b[T]).slice(0,2)==="__")throw"bad property string";for(T=0;T<b.length;){if(w=String(b[T]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),w){if(w[1])b[T]=w[1];else if(T===0)b.splice(0,1);else throw"bad property string";for(A=w[2].substr(1,w[2].length-2).split("]["),R=0;R<A.length;R++)T++,b.splice(T,0,Number(A[R]))}T++}return typeof E!="object"?y(E,M,b):{set:v(E,b,M),get:a(E,b),astr:M,parts:b,obj:E}};function a(_,E){return function(){var M=_,b,w,A,R,T;for(R=0;R<E.length-1;R++){if(b=E[R],b===-1){for(w=!0,A=[],T=0;T<M.length;T++)A[T]=a(M[T],E.slice(R+1))(),A[T]!==A[0]&&(w=!1);return w?A[0]:A}if(typeof b=="number"&&!c(M)||(M=M[b],typeof M!="object"||M===null))return}if(!(typeof M!="object"||M===null)&&(A=M[E[R]],A!==null))return A}}var l=/(^|\.)args\[/;function s(_,E){return _===void 0||_===null&&!E.match(l)}function v(_,E,M){return function(b){var w=_,A="",R=s(b,M),T,C;for(C=0;C<E.length-1;C++){if(T=E[C],typeof T=="number"&&!c(w))throw"array index but container is not an array";if(T===-1){if(R=!p(w,E.slice(C+1),b,M),R)break;return}if(!o(w,T,E[C+1],R))break;if(w=w[T],typeof w!="object"||w===null)throw"container is not an object";A=d(A,T)}if(R){if(C===E.length-1&&(delete w[E[C]],Array.isArray(w)&&+E[C]===w.length-1))for(;w.length&&w[w.length-1]===void 0;)w.pop()}else w[E[C]]=b}}function d(_,E){var M=E;return i(E)?M="["+E+"]":_&&(M="."+E),_+M}function p(_,E,M,b){var w=c(M),A=!0,R=M,T=b.replace("-1",0),C=w?!1:s(M,T),m=E[0],L;for(L=0;L<_.length;L++)T=b.replace("-1",L),w&&(R=M[L%M.length],C=s(R,T)),C&&(A=!1),o(_,L,m,C)&&v(_[L],E,b.replace("-1",L))(R);return A}function o(_,E,M,b){if(_[E]===void 0){if(b)return!1;typeof M=="number"?_[E]=[]:_[E]={}}return!0}function y(_,E,M){return{set:function(){throw"bad container"},get:function(){},astr:E,parts:M,obj:_}}},6628:function(f){f.exports=function(){}},1792:function(f,u,r){var i=r(3428),c=r(8248),a=[];f.exports=function(l,s){if(a.indexOf(l)!==-1)return;a.push(l);var v=1e3;c(s)?v=s:s==="long"&&(v=3e3);var d=i.select("body").selectAll(".plotly-notifier").data([0]);d.enter().append("div").classed("plotly-notifier",!0);var p=d.selectAll(".notifier-note").data(a);function o(y){y.duration(700).style("opacity",0).each("end",function(_){var E=a.indexOf(_);E!==-1&&a.splice(E,1),i.select(this).remove()})}p.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(y){var _=i.select(this);_.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){_.transition().call(o)});for(var E=_.append("p"),M=y.split(/<br\s*\/?>/g),b=0;b<M.length;b++)b&&E.append("br"),E.append("span").text(M[b]);s==="stick"?_.transition().duration(350).style("opacity",1):_.transition().duration(700).style("opacity",1).transition().delay(v).call(o)})}},2213:function(f,u,r){var i=r(3972),c="data-savedcursor",a="!!";f.exports=function(s,v){var d=s.attr(c);if(v){if(!d){for(var p=(s.attr("class")||"").split(" "),o=0;o<p.length;o++){var y=p[o];y.indexOf("cursor-")===0&&s.attr(c,y.substr(7)).classed(y,!1)}s.attr(c)||s.attr(c,a)}i(s,v)}else d&&(s.attr(c,null),d===a?i(s):i(s,d))}},2065:function(f,u,r){var i=r(2248).dot,c=r(9032).BADNUM,a=f.exports={};a.tester=function(s){var v=s.slice(),d=v[0][0],p=d,o=v[0][1],y=o,_;for((v[v.length-1][0]!==v[0][0]||v[v.length-1][1]!==v[0][1])&&v.push(v[0]),_=1;_<v.length;_++)d=Math.min(d,v[_][0]),p=Math.max(p,v[_][0]),o=Math.min(o,v[_][1]),y=Math.max(y,v[_][1]);var E=!1,M;v.length===5&&(v[0][0]===v[1][0]?v[2][0]===v[3][0]&&v[0][1]===v[3][1]&&v[1][1]===v[2][1]&&(E=!0,M=function(T){return T[0]===v[0][0]}):v[0][1]===v[1][1]&&v[2][1]===v[3][1]&&v[0][0]===v[3][0]&&v[1][0]===v[2][0]&&(E=!0,M=function(T){return T[1]===v[0][1]}));function b(T,C){var m=T[0],L=T[1];return!(m===c||m<d||m>p||L===c||L<o||L>y||C&&M(T))}function w(T,C){var m=T[0],L=T[1];if(m===c||m<d||m>p||L===c||L<o||L>y)return!1;var D=v.length,O=v[0][0],N=v[0][1],V=0,X,k,Z,B,J;for(X=1;X<D;X++)if(k=O,Z=N,O=v[X][0],N=v[X][1],B=Math.min(k,O),!(m<B||m>Math.max(k,O)||L>Math.max(Z,N)))if(L<Math.min(Z,N))m!==B&&V++;else{if(O===k?J=L:J=Z+(m-k)*(N-Z)/(O-k),L===J)return!(X===1&&C);L<=J&&m!==B&&V++}return V%2===1}var A=!0,R=v[0];for(_=1;_<v.length;_++)if(R[0]!==v[_][0]||R[1]!==v[_][1]){A=!1;break}return{xmin:d,xmax:p,ymin:o,ymax:y,pts:v,contains:E?b:w,isRect:E,degenerate:A}},a.isSegmentBent=function(s,v,d,p){var o=s[v],y=[s[d][0]-o[0],s[d][1]-o[1]],_=i(y,y),E=Math.sqrt(_),M=[-y[1]/E,y[0]/E],b,w,A;for(b=v+1;b<d;b++)if(w=[s[b][0]-o[0],s[b][1]-o[1]],A=i(w,y),A<0||A>_||Math.abs(i(w,M))>p)return!0;return!1},a.filter=function(s,v){var d=[s[0]],p=0,o=0;function y(E){s.push(E);var M=d.length,b=p;d.splice(o+1);for(var w=b+1;w<s.length;w++)(w===s.length-1||a.isSegmentBent(s,b,w+1,v))&&(d.push(s[w]),d.length<M-2&&(p=w,o=d.length-1),b=w)}if(s.length>1){var _=s.pop();y(_)}return{addPt:y,raw:s,filtered:d}}},4296:function(f,u,r){var i=r(8248),c=r(5928);f.exports=function(s){var v;if(s&&s.hasOwnProperty("userAgent")?v=s.userAgent:v=a(),typeof v!="string")return!0;var d=c({ua:{headers:{"user-agent":v}},tablet:!0,featureDetect:!1});if(!d)for(var p=v.split(" "),o=1;o<p.length;o++){var y=p[o];if(y.indexOf("Safari")!==-1)for(var _=o-1;_>-1;_--){var E=p[_];if(E.substr(0,8)==="Version/"){var M=E.substr(8).split(".")[0];if(i(M)&&(M=+M),M>=13)return!0}}}return d};function a(){var l;return typeof navigator<"u"&&(l=navigator.userAgent),l&&l.headers&&typeof l.headers["user-agent"]=="string"&&(l=l.headers["user-agent"]),l}},2416:function(f){f.exports=function(r,i){if(i instanceof RegExp){for(var c=i.toString(),a=0;a<r.length;a++)if(r[a]instanceof RegExp&&r[a].toString()===c)return r;r.push(i)}else(i||i===0)&&r.indexOf(i)===-1&&r.push(i);return r}},4552:function(f,u,r){var i=r(3400),c=r(556).dfltConfig;function a(s,v){for(var d=[],p,o=0;o<v.length;o++)p=v[o],p===s?d[o]=p:typeof p=="object"?d[o]=Array.isArray(p)?i.extendDeep([],p):i.extendDeepAll({},p):d[o]=p;return d}var l={};l.add=function(s,v,d,p,o){var y,_;if(s.undoQueue=s.undoQueue||{index:0,queue:[],sequence:!1},_=s.undoQueue.index,s.autoplay){s.undoQueue.inSequence||(s.autoplay=!1);return}!s.undoQueue.sequence||s.undoQueue.beginSequence?(y={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},s.undoQueue.queue.splice(_,s.undoQueue.queue.length-_,y),s.undoQueue.index+=1):y=s.undoQueue.queue[_-1],s.undoQueue.beginSequence=!1,y&&(y.undo.calls.unshift(v),y.undo.args.unshift(d),y.redo.calls.push(p),y.redo.args.push(o)),s.undoQueue.queue.length>c.queueLength&&(s.undoQueue.queue.shift(),s.undoQueue.index--)},l.startSequence=function(s){s.undoQueue=s.undoQueue||{index:0,queue:[],sequence:!1},s.undoQueue.sequence=!0,s.undoQueue.beginSequence=!0},l.stopSequence=function(s){s.undoQueue=s.undoQueue||{index:0,queue:[],sequence:!1},s.undoQueue.sequence=!1,s.undoQueue.beginSequence=!1},l.undo=function(v){var d,p;if(!(v.undoQueue===void 0||isNaN(v.undoQueue.index)||v.undoQueue.index<=0)){for(v.undoQueue.index--,d=v.undoQueue.queue[v.undoQueue.index],v.undoQueue.inSequence=!0,p=0;p<d.undo.calls.length;p++)l.plotDo(v,d.undo.calls[p],d.undo.args[p]);v.undoQueue.inSequence=!1,v.autoplay=!1}},l.redo=function(v){var d,p;if(!(v.undoQueue===void 0||isNaN(v.undoQueue.index)||v.undoQueue.index>=v.undoQueue.queue.length)){for(d=v.undoQueue.queue[v.undoQueue.index],v.undoQueue.inSequence=!0,p=0;p<d.redo.calls.length;p++)l.plotDo(v,d.redo.calls[p],d.redo.args[p]);v.undoQueue.inSequence=!1,v.autoplay=!1,v.undoQueue.index++}},l.plotDo=function(s,v,d){s.autoplay=!0,d=a(s,d),v.apply(null,d)},f.exports=l},3756:function(f,u){u.counter=function(r,i,c,a){var l=(i||"")+(c?"":"$"),s=a===!1?"":"^";return r==="xy"?new RegExp(s+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+l):new RegExp(s+r+"([2-9]|[1-9][0-9]+)?"+l)}},3193:function(f){var u=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,r=/^[^\.\[\]]+$/;f.exports=function(i,c){for(;c;){var a=i.match(u);if(a)i=a[1];else if(i.match(r))i="";else throw new Error("bad relativeAttr call:"+[i,c]);if(c.charAt(0)==="^")c=c.slice(1);else break}return i&&c.charAt(0)!=="["?i+"."+c:i+c}},1528:function(f,u,r){var i=r(8116).isArrayOrTypedArray,c=r(3620);f.exports=function a(l,s){for(var v in s){var d=s[v],p=l[v];if(p!==d)if(v.charAt(0)==="_"||typeof d=="function"){if(v in l)continue;l[v]=d}else if(i(d)&&i(p)&&c(d[0])){if(v==="customdata"||v==="ids")continue;for(var o=Math.min(d.length,p.length),y=0;y<o;y++)p[y]!==d[y]&&c(d[y])&&c(p[y])&&a(p[y],d[y])}else c(d)&&c(p)&&(a(p,d),Object.keys(p).length||delete l[v])}}},4952:function(f,u,r){var i=r(8248),c=r(4248),a=r(5536),l=r(9032).BADNUM,s=1e-9;u.findBin=function(y,_,E){if(i(_.start))return E?Math.ceil((y-_.start)/_.size-s)-1:Math.floor((y-_.start)/_.size+s);var M=0,b=_.length,w=0,A=b>1?(_[b-1]-_[0])/(b-1):1,R,T;for(A>=0?T=E?v:d:T=E?o:p,y+=A*s*(E?-1:1)*(A>=0?1:-1);M<b&&w++<100;)R=Math.floor((M+b)/2),T(_[R],y)?M=R+1:b=R;return w>90&&c.log("Long binary search..."),M-1};function v(y,_){return y<_}function d(y,_){return y<=_}function p(y,_){return y>_}function o(y,_){return y>=_}u.sorterAsc=function(y,_){return y-_},u.sorterDes=function(y,_){return _-y},u.distinctVals=function(y){var _=y.slice();_.sort(u.sorterAsc);var E;for(E=_.length-1;E>-1&&_[E]===l;E--);for(var M=_[E]-_[0]||1,b=M/(E||1)/1e4,w=[],A,R=0;R<=E;R++){var T=_[R],C=T-A;A===void 0?(w.push(T),A=T):C>b&&(M=Math.min(M,C),w.push(T),A=T)}return{vals:w,minDiff:M}},u.roundUp=function(y,_,E){for(var M=0,b=_.length-1,w,A=0,R=E?0:1,T=E?1:0,C=E?Math.ceil:Math.floor;M<b&&A++<100;)w=C((M+b)/2),_[w]<=y?M=w+R:b=w-T;return _[M]},u.sort=function(y,_){for(var E=0,M=0,b=1;b<y.length;b++){var w=_(y[b],y[b-1]);if(w<0?E=1:w>0&&(M=1),E&&M)return y.sort(_)}return M?y:y.reverse()},u.findIndexOfMin=function(y,_){_=_||a;for(var E=1/0,M,b=0;b<y.length;b++){var w=_(y[b]);w<E&&(E=w,M=b)}return M}},3972:function(f){f.exports=function(r,i){(r.attr("class")||"").split(" ").forEach(function(c){c.indexOf("cursor-")===0&&r.classed(c,!1)}),i&&r.classed("cursor-"+i,!0)}},2996:function(f){f.exports=function(r){return Object.keys(r).sort()}},3084:function(f,u,r){var i=r(8248),c=r(8116).isArrayOrTypedArray;u.aggNums=function(a,l,s,v){var d,p;if((!v||v>s.length)&&(v=s.length),i(l)||(l=!1),c(s[0])){for(p=new Array(v),d=0;d<v;d++)p[d]=u.aggNums(a,l,s[d]);s=p}for(d=0;d<v;d++)i(l)?i(s[d])&&(l=a(+l,+s[d])):l=s[d];return l},u.len=function(a){return u.aggNums(function(l){return l+1},0,a)},u.mean=function(a,l){return l||(l=u.len(a)),u.aggNums(function(s,v){return s+v},0,a)/l},u.midRange=function(a){if(!(a===void 0||a.length===0))return(u.aggNums(Math.max,null,a)+u.aggNums(Math.min,null,a))/2},u.variance=function(a,l,s){return l||(l=u.len(a)),i(s)||(s=u.mean(a,l)),u.aggNums(function(v,d){return v+Math.pow(d-s,2)},0,a)/l},u.stdev=function(a,l,s){return Math.sqrt(u.variance(a,l,s))},u.median=function(a){var l=a.slice().sort();return u.interp(l,.5)},u.interp=function(a,l){if(!i(l))throw"n should be a finite number";if(l=l*a.length-.5,l<0)return a[0];if(l>a.length-1)return a[a.length-1];var s=l%1;return s*a[Math.ceil(l)]+(1-s)*a[Math.floor(l)]}},2736:function(f,u,r){var i=r(3428),c=r(3400),a=c.strTranslate,l=r(9616),s=r(4284).LINE_SPACING,v=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;u.convertToTspans=function(K,ee,ie){var re=K.text(),se=!K.attr("data-notex")&&ee&&ee._context.typesetMath&&typeof MathJax<"u"&&re.match(v),ge=i.select(K.node().parentNode);if(ge.empty())return;var xe=K.attr("class")?K.attr("class").split(" ")[0]:"text";xe+="-math",ge.selectAll("svg."+xe).remove(),ge.selectAll("g."+xe+"-group").remove(),K.style("display",null).attr({"data-unformatted":re,"data-math":"N"});function Se(){ge.empty()||(xe=K.attr("class")+"-math",ge.select("svg."+xe).remove()),K.text("").style("white-space","pre");var ce=ne(K.node(),re);ce&&K.style("pointer-events","all"),u.positionText(K),ie&&ie.call(K)}return se?(ee&&ee._promises||[]).push(new Promise(function(ce){K.style("display","none");var pe=parseInt(K.node().style.fontSize,10),ye={fontSize:pe};_(se[2],ye,function(U,W,j){ge.selectAll("svg."+xe).remove(),ge.selectAll("g."+xe+"-group").remove();var F=U&&U.select("svg");if(!F||!F.node()){Se(),ce();return}var P=ge.append("g").classed(xe+"-group",!0).attr({"pointer-events":"none","data-unformatted":re,"data-math":"Y"});P.node().appendChild(F.node()),W&&W.node()&&F.node().insertBefore(W.node().cloneNode(!0),F.node().firstChild);var q=j.width,z=j.height;F.attr({class:xe,height:z,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var te=K.node().style.fill||"black",ue=F.select("g");ue.attr({fill:te,stroke:te});var ve=ue.node().getBoundingClientRect(),_e=ve.width,Re=ve.height;(_e>q||Re>z)&&(F.style("overflow","hidden"),ve=F.node().getBoundingClientRect(),_e=ve.width,Re=ve.height);var Le=+K.attr("x"),Ve=+K.attr("y"),Xe=pe||K.node().getBoundingClientRect().height,Ze=-Xe/4;if(xe[0]==="y")P.attr({transform:"rotate("+[-90,Le,Ve]+")"+a(-_e/2,Ze-Re/2)});else if(xe[0]==="l")Ve=Ze-Re/2;else if(xe[0]==="a"&&xe.indexOf("atitle")!==0)Le=0,Ve=Ze;else{var Te=K.attr("text-anchor");Le=Le-_e*(Te==="middle"?.5:Te==="end"?1:0),Ve=Ve+Ze-Re/2}F.attr({x:Le,y:Ve}),ie&&ie.call(K,P),ce(P)})})):Se(),K};var d=/(<|&lt;|&#60;)/g,p=/(>|&gt;|&#62;)/g;function o(K){return K.replace(d,"\\lt ").replace(p,"\\gt ")}var y=[["$","$"],["\\(","\\)"]];function _(K,ee,ie){var re=parseInt((MathJax.version||"").split(".")[0]);if(re!==2&&re!==3){c.warn("No MathJax version:",MathJax.version);return}var se,ge,xe,Se,ce=function(){return ge=c.extendDeepAll({},MathJax.Hub.config),xe=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:y},displayAlign:"left"})},pe=function(){ge=c.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=y},ye=function(){if(se=MathJax.Hub.config.menuSettings.renderer,se!=="SVG")return MathJax.Hub.setRenderer("SVG")},U=function(){se=MathJax.config.startup.output,se!=="svg"&&(MathJax.config.startup.output="svg")},W=function(){var te="math-output-"+c.randstr({},64);Se=i.select("body").append("div").attr({id:te}).style({visibility:"hidden",position:"absolute","font-size":ee.fontSize+"px"}).text(o(K));var ue=Se.node();return re===2?MathJax.Hub.Typeset(ue):MathJax.typeset([ue])},j=function(){var te=Se.select(re===2?".MathJax_SVG":".MathJax"),ue=!te.empty()&&Se.select("svg").node();if(!ue)c.log("There was an error in the tex syntax.",K),ie();else{var ve=ue.getBoundingClientRect(),_e;re===2?_e=i.select("body").select("#MathJax_SVG_glyphs"):_e=te.select("defs"),ie(te,_e,ve)}Se.remove()},F=function(){if(se!=="SVG")return MathJax.Hub.setRenderer(se)},P=function(){se!=="svg"&&(MathJax.config.startup.output=se)},q=function(){return xe!==void 0&&(MathJax.Hub.processSectionDelay=xe),MathJax.Hub.Config(ge)},z=function(){MathJax.config=ge};re===2?MathJax.Hub.Queue(ce,ye,W,j,F,q):re===3&&(pe(),U(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){W(),j(),P(),z()}))}var E={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},M={sub:"0.3em",sup:"-0.6em"},b={sub:"-0.21em",sup:"0.42em"},w="",A=["http:","https:","mailto:","",void 0,":"],R=u.NEWLINES=/(\r\n?|\n)/g,T=/(<[^<>]*>)/,C=/<(\/?)([^ >]*)(\s+(.*))?>/i,m=/<br(\s+.*)?>/i;u.BR_TAG_ALL=/<br(\s+.*)?>/gi;var L=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,D=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,O=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,N=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function V(K,ee){if(!K)return null;var ie=K.match(ee),re=ie&&(ie[3]||ie[4]);return re&&B(re)}var X=/(^|;)\s*color:/;u.plainText=function(K,ee){ee=ee||{};for(var ie=ee.len!==void 0&&ee.len!==-1?ee.len:1/0,re=ee.allowedTags!==void 0?ee.allowedTags:["br"],se="...",ge=se.length,xe=K.split(T),Se=[],ce="",pe=0,ye=0;ye<xe.length;ye++){var U=xe[ye],W=U.match(C),j=W&&W[2].toLowerCase();if(j)re.indexOf(j)!==-1&&(Se.push(U),ce=j);else{var F=U.length;if(pe+F<ie)Se.push(U),pe+=F;else if(pe<ie){var P=ie-pe;ce&&(ce!=="br"||P<=ge||F<=ge)&&Se.pop(),ie>ge?Se.push(U.substr(0,P-ge)+se):Se.push(U.substr(0,P));break}ce=""}}return Se.join("")};var k={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},Z=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function B(K){return K.replace(Z,function(ee,ie){var re;return ie.charAt(0)==="#"?re=J(ie.charAt(1)==="x"?parseInt(ie.substr(2),16):parseInt(ie.substr(1),10)):re=k[ie],re||ee})}u.convertEntities=B;function J(K){if(!(K>1114111)){var ee=String.fromCodePoint;if(ee)return ee(K);var ie=String.fromCharCode;return K<=65535?ie(K):ie((K>>10)+55232,K%1024+56320)}}function ne(K,ee){ee=ee.replace(R," ");var ie=!1,re=[],se,ge=-1;function xe(){ge++;var Re=document.createElementNS(l.svg,"tspan");i.select(Re).attr({class:"line",dy:ge*s+"em"}),K.appendChild(Re),se=Re;var Le=re;if(re=[{node:Re}],Le.length>1)for(var Ve=1;Ve<Le.length;Ve++)Se(Le[Ve])}function Se(Re){var Le=Re.type,Ve={},Xe;if(Le==="a"){Xe="a";var Ze=Re.target,Te=Re.href,we=Re.popup;Te&&(Ve={"xlink:xlink:show":Ze==="_blank"||Ze.charAt(0)!=="_"?"new":"replace",target:Ze,"xlink:xlink:href":Te},we&&(Ve.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+we+'");return false;'))}else Xe="tspan";Re.style&&(Ve.style=Re.style);var be=document.createElementNS(l.svg,Xe);if(Le==="sup"||Le==="sub"){ce(se,w),se.appendChild(be);var ke=document.createElementNS(l.svg,"tspan");ce(ke,w),i.select(ke).attr("dy",b[Le]),Ve.dy=M[Le],se.appendChild(be),se.appendChild(ke)}else se.appendChild(be);i.select(be).attr(Ve),se=Re.node=be,re.push(Re)}function ce(Re,Le){Re.appendChild(document.createTextNode(Le))}function pe(Re){if(re.length===1){c.log("Ignoring unexpected end tag </"+Re+">.",ee);return}var Le=re.pop();Re!==Le.type&&c.log("Start tag <"+Le.type+"> doesnt match end tag <"+Re+">. Pretending it did match.",ee),se=re[re.length-1].node}var ye=m.test(ee);ye?xe():(se=K,re=[{node:K}]);for(var U=ee.split(T),W=0;W<U.length;W++){var j=U[W],F=j.match(C),P=F&&F[2].toLowerCase(),q=E[P];if(P==="br")xe();else if(q===void 0)ce(se,B(j));else if(F[1])pe(P);else{var z=F[4],te={type:P},ue=V(z,L);if(ue?(ue=ue.replace(X,"$1 fill:"),q&&(ue+=";"+q)):q&&(ue=q),ue&&(te.style=ue),P==="a"){ie=!0;var ve=V(z,D);if(ve){var _e=oe(ve);_e&&(te.href=_e,te.target=V(z,O)||"_blank",te.popup=V(z,N))}}Se(te)}}return ie}function oe(K){var ee=encodeURI(decodeURI(K)),ie=document.createElement("a"),re=document.createElement("a");ie.href=K,re.href=ee;var se=ie.protocol,ge=re.protocol;return A.indexOf(se)!==-1&&A.indexOf(ge)!==-1?ee:""}u.sanitizeHTML=function(ee){ee=ee.replace(R," ");for(var ie=document.createElement("p"),re=ie,se=[],ge=ee.split(T),xe=0;xe<ge.length;xe++){var Se=ge[xe],ce=Se.match(C),pe=ce&&ce[2].toLowerCase();if(pe in E)if(ce[1])se.length&&(re=se.pop());else{var ye=ce[4],U=V(ye,L),W=U?{style:U}:{};if(pe==="a"){var j=V(ye,D);if(j){var F=oe(j);if(F){W.href=F;var P=V(ye,O);P&&(W.target=P)}}}var q=document.createElement(pe);re.appendChild(q),i.select(q).attr(W),re=q,se.push(q)}else re.appendChild(document.createTextNode(B(Se)))}var z="innerHTML";return ie[z]},u.lineCount=function(ee){return ee.selectAll("tspan.line").size()||1},u.positionText=function(ee,ie,re){return ee.each(function(){var se=i.select(this);function ge(ce,pe){return pe===void 0?(pe=se.attr(ce),pe===null&&(se.attr(ce,0),pe=0)):se.attr(ce,pe),pe}var xe=ge("x",ie),Se=ge("y",re);this.nodeName==="text"&&se.selectAll("tspan.line").attr({x:xe,y:Se})})};function Y(K,ee,ie){var re=ie.horizontalAlign,se=ie.verticalAlign||"top",ge=K.node().getBoundingClientRect(),xe=ee.node().getBoundingClientRect(),Se,ce,pe;return se==="bottom"?ce=function(){return ge.bottom-Se.height}:se==="middle"?ce=function(){return ge.top+(ge.height-Se.height)/2}:ce=function(){return ge.top},re==="right"?pe=function(){return ge.right-Se.width}:re==="center"?pe=function(){return ge.left+(ge.width-Se.width)/2}:pe=function(){return ge.left},function(){Se=this.node().getBoundingClientRect();var ye=pe()-xe.left,U=ce()-xe.top,W=ie.gd||{};if(ie.gd){W._fullLayout._calcInverseTransform(W);var j=c.apply3DTransform(W._fullLayout._invTransform)(ye,U);ye=j[0],U=j[1]}return this.style({top:U+"px",left:ye+"px","z-index":1e3}),this}}var G="1px ";u.makeTextShadow=function(K){var ee=G,ie=G,re=G;return ee+ie+re+K+", -"+ee+"-"+ie+re+K+", "+ee+"-"+ie+re+K+", -"+ee+ie+re+K},u.makeEditable=function(K,ee){var ie=ee.gd,re=ee.delegate,se=i.dispatch("edit","input","cancel"),ge=re||K;if(K.style({"pointer-events":re?"none":"all"}),K.size()!==1)throw new Error("boo");function xe(){ce(),K.style({opacity:0});var pe=ge.attr("class"),ye;pe?ye="."+pe.split(" ")[0]+"-math-group":ye="[class*=-math-group]",ye&&i.select(K.node().parentNode).select(ye).style({opacity:0})}function Se(pe){var ye=pe.node(),U=document.createRange();U.selectNodeContents(ye);var W=window.getSelection();W.removeAllRanges(),W.addRange(U),ye.focus()}function ce(){var pe=i.select(ie),ye=pe.select(".svg-container"),U=ye.append("div"),W=K.node().style,j=parseFloat(W.fontSize||12),F=ee.text;F===void 0&&(F=K.attr("data-unformatted")),U.classed("plugin-editable editable",!0).style({position:"absolute","font-family":W.fontFamily||"Arial","font-size":j,color:ee.fill||W.fill||"black",opacity:1,"background-color":ee.background||"transparent",outline:"#ffffff33 1px solid",margin:[-j/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(F).call(Y(K,ye,ee)).on("blur",function(){ie._editing=!1,K.text(this.textContent).style({opacity:1});var P=i.select(this).attr("class"),q;P?q="."+P.split(" ")[0]+"-math-group":q="[class*=-math-group]",q&&i.select(K.node().parentNode).select(q).style({opacity:0});var z=this.textContent;i.select(this).transition().duration(0).remove(),i.select(document).on("mouseup",null),se.edit.call(K,z)}).on("focus",function(){var P=this;ie._editing=!0,i.select(document).on("mouseup",function(){if(i.event.target===P)return!1;document.activeElement===U.node()&&U.node().blur()})}).on("keyup",function(){i.event.which===27?(ie._editing=!1,K.style({opacity:1}),i.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),se.cancel.call(K,this.textContent)):(se.input.call(K,this.textContent),i.select(this).call(Y(K,ye,ee)))}).on("keydown",function(){i.event.which===13&&this.blur()}).call(Se)}return ee.immediate?xe():ge.on("click",xe),i.rebind(K,se,"on")}},1200:function(f,u){var r={};u.throttle=function(a,l,s){var v=r[a],d=Date.now();if(!v){for(var p in r)r[p].ts<d-6e4&&delete r[p];v=r[a]={ts:0,timer:null}}i(v);function o(){s(),v.ts=Date.now(),v.onDone&&(v.onDone(),v.onDone=null)}if(d>v.ts+l){o();return}v.timer=setTimeout(function(){o(),v.timer=null},l)},u.done=function(c){var a=r[c];return!a||!a.timer?Promise.resolve():new Promise(function(l){var s=a.onDone;a.onDone=function(){s&&s(),l(),a.onDone=null}})},u.clear=function(c){if(c)i(r[c]),delete r[c];else for(var a in r)u.clear(a)};function i(c){c&&c.timer!==null&&(clearTimeout(c.timer),c.timer=null)}},6896:function(f,u,r){var i=r(8248);f.exports=function(a,l){if(a>0)return Math.log(a)/Math.LN10;var s=Math.log(Math.min(l[0],l[1]))/Math.LN10;return i(s)||(s=Math.log(Math.max(l[0],l[1]))/Math.LN10-6),s}},1680:function(f){f.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(f){f.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},9820:function(f,u,r){var i=r(4040);f.exports=function(a){for(var l=i.layoutArrayContainers,s=i.layoutArrayRegexes,v=a.split("[")[0],d,p,o=0;o<s.length;o++)if(p=a.match(s[o]),p&&p.index===0){d=p[0];break}if(d||(d=l[l.indexOf(v)]),!d)return!1;var y=a.substr(d.length);return y?(p=y.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),p?{array:d,index:Number(p[1]),property:p[3]||""}:!1):{array:d,index:"",property:""}}},7824:function(f,u,r){var i=r(2880).extendFlat,c=r(3620),a={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},l={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},s=a.flags.slice().concat(["fullReplot"]),v=l.flags.slice().concat("layoutReplot");f.exports={traces:a,layout:l,traceFlags:function(){return d(s)},layoutFlags:function(){return d(v)},update:function(y,_){var E=_.editType;if(E&&E!=="none")for(var M=E.split("+"),b=0;b<M.length;b++)y[M[b]]=!0},overrideAll:p};function d(y){for(var _={},E=0;E<y.length;E++)_[y[E]]=!1;return _}function p(y,_,E){var M=i({},y);for(var b in M){var w=M[b];c(w)&&(M[b]=o(w,_,E,b))}return E==="from-root"&&(M.editType=_),M}function o(y,_,E,M){if(y.valType){var b=i({},y);if(b.editType=_,Array.isArray(y.items)){b.items=new Array(y.items.length);for(var w=0;w<y.items.length;w++)b.items[w]=o(y.items[w],_)}return b}else return p(y,_,M.charAt(0)==="_"?"nested":"from-root")}},3404:function(f,u,r){var i=r(8248),c=r(1784),a=r(4040),l=r(3400),s=r(7316),v=r(9811),d=r(6308),p=v.cleanId,o=v.getFromTrace,y=a.traceIs;u.clearPromiseQueue=function(m){Array.isArray(m._promises)&&m._promises.length>0&&l.log("Clearing previous rejected promises from queue."),m._promises=[]},u.cleanLayout=function(m){var L,D;m||(m={}),m.xaxis1&&(m.xaxis||(m.xaxis=m.xaxis1),delete m.xaxis1),m.yaxis1&&(m.yaxis||(m.yaxis=m.yaxis1),delete m.yaxis1),m.scene1&&(m.scene||(m.scene=m.scene1),delete m.scene1);var O=(s.subplotsRegistry.cartesian||{}).attrRegex,N=(s.subplotsRegistry.polar||{}).attrRegex,V=(s.subplotsRegistry.ternary||{}).attrRegex,X=(s.subplotsRegistry.gl3d||{}).attrRegex,k=Object.keys(m);for(L=0;L<k.length;L++){var Z=k[L];if(O&&O.test(Z)){var B=m[Z];B.anchor&&B.anchor!=="free"&&(B.anchor=p(B.anchor)),B.overlaying&&(B.overlaying=p(B.overlaying)),B.type||(B.isdate?B.type="date":B.islog?B.type="log":B.isdate===!1&&B.islog===!1&&(B.type="linear")),(B.autorange==="withzero"||B.autorange==="tozero")&&(B.autorange=!0,B.rangemode="tozero"),B.insiderange&&delete B.range,delete B.islog,delete B.isdate,delete B.categories,A(B,"domain")&&delete B.domain,B.autotick!==void 0&&(B.tickmode===void 0&&(B.tickmode=B.autotick?"auto":"linear"),delete B.autotick),E(B)}else if(N&&N.test(Z)){var J=m[Z];E(J.radialaxis)}else if(V&&V.test(Z)){var ne=m[Z];E(ne.aaxis),E(ne.baxis),E(ne.caxis)}else if(X&&X.test(Z)){var oe=m[Z],Y=oe.cameraposition;if(Array.isArray(Y)&&Y[0].length===4){var G=Y[0],K=Y[1],ee=Y[2],ie=c([],G),re=[];for(D=0;D<3;++D)re[D]=K[D]+ee*ie[2+4*D];oe.camera={eye:{x:re[0],y:re[1],z:re[2]},center:{x:K[0],y:K[1],z:K[2]},up:{x:0,y:0,z:1}},delete oe.cameraposition}E(oe.xaxis),E(oe.yaxis),E(oe.zaxis)}}var se=Array.isArray(m.annotations)?m.annotations.length:0;for(L=0;L<se;L++){var ge=m.annotations[L];l.isPlainObject(ge)&&(ge.ref&&(ge.ref==="paper"?(ge.xref="paper",ge.yref="paper"):ge.ref==="data"&&(ge.xref="x",ge.yref="y"),delete ge.ref),_(ge,"xref"),_(ge,"yref"))}var xe=Array.isArray(m.shapes)?m.shapes.length:0;for(L=0;L<xe;L++){var Se=m.shapes[L];l.isPlainObject(Se)&&(_(Se,"xref"),_(Se,"yref"))}var ce=Array.isArray(m.images)?m.images.length:0;for(L=0;L<ce;L++){var pe=m.images[L];l.isPlainObject(pe)&&(_(pe,"xref"),_(pe,"yref"))}var ye=m.legend;return ye&&(ye.x>3?(ye.x=1.02,ye.xanchor="left"):ye.x<-2&&(ye.x=-.02,ye.xanchor="right"),ye.y>3?(ye.y=1.02,ye.yanchor="bottom"):ye.y<-2&&(ye.y=-.02,ye.yanchor="top")),E(m),m.dragmode==="rotate"&&(m.dragmode="orbit"),d.clean(m),m.template&&m.template.layout&&u.cleanLayout(m.template.layout),m};function _(m,L){var D=m[L],O=L.charAt(0);D&&D!=="paper"&&(m[L]=p(D,O,!0))}function E(m){m&&((typeof m.title=="string"||typeof m.title=="number")&&(m.title={text:m.title}),L("titlefont","font"),L("titleposition","position"),L("titleside","side"),L("titleoffset","offset"));function L(D,O){var N=m[D],V=m.title&&m.title[O];N&&!V&&(m.title||(m.title={}),m.title[O]=m[D],delete m[D])}}u.cleanData=function(m){for(var L=0;L<m.length;L++){var D=m[L],O;if(D.type==="histogramy"&&"xbins"in D&&!("ybins"in D)&&(D.ybins=D.xbins,delete D.xbins),D.error_y&&"opacity"in D.error_y){var N=d.defaults,V=D.error_y.color||(y(D,"bar")?d.defaultLine:N[L%N.length]);D.error_y.color=d.addOpacity(d.rgb(V),d.opacity(V)*D.error_y.opacity),delete D.error_y.opacity}if("bardir"in D&&(D.bardir==="h"&&(y(D,"bar")||D.type.substr(0,9)==="histogram")&&(D.orientation="h",u.swapXYData(D)),delete D.bardir),D.type==="histogramy"&&u.swapXYData(D),(D.type==="histogramx"||D.type==="histogramy")&&(D.type="histogram"),"scl"in D&&!("colorscale"in D)&&(D.colorscale=D.scl,delete D.scl),"reversescl"in D&&!("reversescale"in D)&&(D.reversescale=D.reversescl,delete D.reversescl),D.xaxis&&(D.xaxis=p(D.xaxis,"x")),D.yaxis&&(D.yaxis=p(D.yaxis,"y")),y(D,"gl3d")&&D.scene&&(D.scene=s.subplotsRegistry.gl3d.cleanId(D.scene)),!y(D,"pie-like")&&!y(D,"bar-like"))if(Array.isArray(D.textposition))for(O=0;O<D.textposition.length;O++)D.textposition[O]=w(D.textposition[O]);else D.textposition&&(D.textposition=w(D.textposition));var X=a.getModule(D);if(X&&X.colorbar){var k=X.colorbar.container,Z=k?D[k]:D;Z&&Z.colorscale&&(Z.colorscale==="YIGnBu"&&(Z.colorscale="YlGnBu"),Z.colorscale==="YIOrRd"&&(Z.colorscale="YlOrRd"))}if(D.type==="surface"&&l.isPlainObject(D.contours)){var B=["x","y","z"];for(O=0;O<B.length;O++){var J=D.contours[B[O]];l.isPlainObject(J)&&(J.highlightColor&&(J.highlightcolor=J.highlightColor,delete J.highlightColor),J.highlightWidth&&(J.highlightwidth=J.highlightWidth,delete J.highlightWidth))}}if(D.type==="candlestick"||D.type==="ohlc"){var ne=(D.increasing||{}).showlegend!==!1,oe=(D.decreasing||{}).showlegend!==!1,Y=M(D.increasing),G=M(D.decreasing);if(Y!==!1&&G!==!1){var K=b(Y,G,ne,oe);K&&(D.name=K)}else(Y||G)&&!D.name&&(D.name=Y||G)}if(Array.isArray(D.transforms)){var ee=D.transforms;for(O=0;O<ee.length;O++){var ie=ee[O];if(l.isPlainObject(ie))switch(ie.type){case"filter":ie.filtersrc&&(ie.target=ie.filtersrc,delete ie.filtersrc),ie.calendar&&(ie.valuecalendar||(ie.valuecalendar=ie.calendar),delete ie.calendar);break;case"groupby":if(ie.styles=ie.styles||ie.style,ie.styles&&!Array.isArray(ie.styles)){var re=ie.styles,se=Object.keys(re);ie.styles=[];for(var ge=0;ge<se.length;ge++)ie.styles.push({target:se[ge],value:re[se[ge]]})}break}}}A(D,"line")&&delete D.line,"marker"in D&&(A(D.marker,"line")&&delete D.marker.line,A(D,"marker")&&delete D.marker),d.clean(D),D.autobinx&&(delete D.autobinx,delete D.xbins),D.autobiny&&(delete D.autobiny,delete D.ybins),E(D),D.colorbar&&E(D.colorbar),D.marker&&D.marker.colorbar&&E(D.marker.colorbar),D.line&&D.line.colorbar&&E(D.line.colorbar),D.aaxis&&E(D.aaxis),D.baxis&&E(D.baxis)}};function M(m){if(!l.isPlainObject(m))return!1;var L=m.name;return delete m.name,delete m.showlegend,(typeof L=="string"||typeof L=="number")&&String(L)}function b(m,L,D,O){if(D&&!O)return m;if(O&&!D||!m.trim())return L;if(!L.trim())return m;var N=Math.min(m.length,L.length),V;for(V=0;V<N&&m.charAt(V)===L.charAt(V);V++);var X=m.substr(0,V);return X.trim()}function w(m){var L="middle",D="center";return typeof m=="string"&&(m.indexOf("top")!==-1?L="top":m.indexOf("bottom")!==-1&&(L="bottom"),m.indexOf("left")!==-1?D="left":m.indexOf("right")!==-1&&(D="right")),L+" "+D}function A(m,L){return L in m&&typeof m[L]=="object"&&Object.keys(m[L]).length===0}u.swapXYData=function(m){var L;if(l.swapAttrs(m,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(m.z)&&Array.isArray(m.z[0])&&(m.transpose?delete m.transpose:m.transpose=!0),m.error_x&&m.error_y){var D=m.error_y,O="copy_ystyle"in D?D.copy_ystyle:!(D.color||D.thickness||D.width);l.swapAttrs(m,["error_?.copy_ystyle"]),O&&l.swapAttrs(m,["error_?.color","error_?.thickness","error_?.width"])}if(typeof m.hoverinfo=="string"){var N=m.hoverinfo.split("+");for(L=0;L<N.length;L++)N[L]==="x"?N[L]="y":N[L]==="y"&&(N[L]="x");m.hoverinfo=N.join("+")}},u.coerceTraceIndices=function(m,L){if(i(L))return[L];if(!Array.isArray(L)||!L.length)return m.data.map(function(N,V){return V});if(Array.isArray(L)){for(var D=[],O=0;O<L.length;O++)l.isIndex(L[O],m.data.length)?D.push(L[O]):l.warn("trace index (",L[O],") is not a number or is out of bounds");return D}return L},u.manageArrayContainers=function(m,L,D){var O=m.obj,N=m.parts,V=N.length,X=N[V-1],k=i(X);if(k&&L===null){var Z=N.slice(0,V-1).join("."),B=l.nestedProperty(O,Z).get();B.splice(X,1)}else k&&m.get()===void 0&&m.get()===void 0&&(D[m.astr]=null),m.set(L)};var R=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function T(m){var L=m.search(R);if(L>0)return m.substr(0,L)}u.hasParent=function(m,L){for(var D=T(L);D;){if(D in m)return!0;D=T(D)}return!1};var C=["x","y","z"];u.clearAxisTypes=function(m,L,D){for(var O=0;O<L.length;O++)for(var N=m._fullData[O],V=0;V<3;V++){var X=o(m,N,C[V]);if(X&&X.type!=="log"){var k=X._name,Z=X._id.substr(1);if(Z.substr(0,5)==="scene"){if(D[Z]!==void 0)continue;k=Z+"."+k}var B=k+".type";D[k]===void 0&&D[B]===void 0&&l.nestedProperty(m.layout,B).set(null)}}}},2448:function(f,u,r){var i=r(6424);u._doPlot=i._doPlot,u.newPlot=i.newPlot,u.restyle=i.restyle,u.relayout=i.relayout,u.redraw=i.redraw,u.update=i.update,u._guiRestyle=i._guiRestyle,u._guiRelayout=i._guiRelayout,u._guiUpdate=i._guiUpdate,u._storeDirectGUIEdit=i._storeDirectGUIEdit,u.react=i.react,u.extendTraces=i.extendTraces,u.prependTraces=i.prependTraces,u.addTraces=i.addTraces,u.deleteTraces=i.deleteTraces,u.moveTraces=i.moveTraces,u.purge=i.purge,u.addFrames=i.addFrames,u.deleteFrames=i.deleteFrames,u.animate=i.animate,u.setPlotConfig=i.setPlotConfig;var c=r(2200).getGraphDiv,a=r(4016).eraseActiveShape;u.deleteActiveShape=function(s){return a(c(s))},u.toImage=r(7024),u.validate=r(1480),u.downloadImage=r(7412);var l=r(4828);u.makeTemplate=l.makeTemplate,u.validateTemplate=l.validateTemplate},7680:function(f,u,r){var i=r(3620),c=r(6628),a=r(4248),l=r(4952).sorterAsc,s=r(4040);u.containerArrayMatch=r(9820);var v=u.isAddVal=function(o){return o==="add"||i(o)},d=u.isRemoveVal=function(o){return o===null||o==="remove"};u.applyContainerArrayChanges=function(o,y,_,E,M){var b=y.astr,w=s.getComponentMethod(b,"supplyLayoutDefaults"),A=s.getComponentMethod(b,"draw"),R=s.getComponentMethod(b,"drawOne"),T=E.replot||E.recalc||w===c||A===c,C=o.layout,m=o._fullLayout;if(_[""]){Object.keys(_).length>1&&a.warn("Full array edits are incompatible with other edits",b);var L=_[""][""];if(d(L))y.set(null);else if(Array.isArray(L))y.set(L);else return a.warn("Unrecognized full array edit value",b,L),!0;return T?!1:(w(C,m),A(o),!0)}var D=Object.keys(_).map(Number).sort(l),O=y.get(),N=O||[],V=M(m,b).get(),X=[],k=-1,Z=N.length,B,J,ne,oe,Y,G,K,ee;for(B=0;B<D.length;B++){if(ne=D[B],oe=_[ne],Y=Object.keys(oe),G=oe[""],K=v(G),ne<0||ne>N.length-(K?0:1)){a.warn("index out of range",b,ne);continue}if(G!==void 0)Y.length>1&&a.warn("Insertion & removal are incompatible with edits to the same index.",b,ne),d(G)?X.push(ne):K?(G==="add"&&(G={}),N.splice(ne,0,G),V&&V.splice(ne,0,{})):a.warn("Unrecognized full object edit value",b,ne,G),k===-1&&(k=ne);else for(J=0;J<Y.length;J++)ee=b+"["+ne+"].",M(N[ne],Y[J],ee).set(oe[Y[J]])}for(B=X.length-1;B>=0;B--)N.splice(X[B],1),V&&V.splice(X[B],1);if(N.length?O||y.set(N):y.set(null),T)return!1;if(w(C,m),R!==c){var ie;if(k===-1)ie=D;else{for(Z=Math.max(N.length,Z),ie=[],B=0;B<D.length&&(ne=D[B],!(ne>=k));B++)ie.push(ne);for(B=k;B<Z;B++)ie.push(B)}for(B=0;B<ie.length;B++)R(o,ie[B])}else A(o);return!0}},6424:function(f,u,r){var i=r(3428),c=r(8248),a=r(2264),l=r(3400),s=l.nestedProperty,v=r(5924),d=r(4552),p=r(4040),o=r(3060),y=r(7316),_=r(4460),E=r(6312),M=r(4724),b=r(3616),w=r(6308),A=r(2464).initInteractions,R=r(9616),T=r(2676).clearOutline,C=r(556).dfltConfig,m=r(7680),L=r(3404),D=r(9172),O=r(7824),N=r(3816).AX_NAME_PATTERN,V=0,X=5;function k(de,Me,he,Ee){var Pe;if(de=l.getGraphDiv(de),v.init(de),l.isPlainObject(Me)){var Ne=Me;Me=Ne.data,he=Ne.layout,Ee=Ne.config,Pe=Ne.frames}var ht=v.triggerHandler(de,"plotly_beforeplot",[Me,he,Ee]);if(ht===!1)return Promise.reject();!Me&&!he&&!l.isPlotDiv(de)&&l.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",de);function nt(){if(Pe)return u.addFrames(de,Pe)}oe(de,Ee),he||(he={}),i.select(de).classed("js-plotly-plot",!0),b.makeTester(),Array.isArray(de._promises)||(de._promises=[]);var Ye=(de.data||[]).length===0&&Array.isArray(Me);Array.isArray(Me)&&(L.cleanData(Me),Ye?de.data=Me:de.data.push.apply(de.data,Me),de.empty=!1),(!de.layout||Ye)&&(de.layout=L.cleanLayout(he)),y.supplyDefaults(de);var Be=de._fullLayout,ut=Be._has("cartesian");Be._replotting=!0,(Ye||Be._shouldCreateBgLayer)&&(We(de),Be._shouldCreateBgLayer&&delete Be._shouldCreateBgLayer),b.initGradients(de),b.initPatterns(de),Ye&&_.saveShowSpikeInitial(de);var Dt=!de.calcdata||de.calcdata.length!==(de._fullData||[]).length;Dt&&y.doCalcdata(de);for(var Nt=0;Nt<de.calcdata.length;Nt++)de.calcdata[Nt][0].trace=de._fullData[Nt];de._context.responsive?de._responsiveChartHandler||(de._responsiveChartHandler=function(){l.isHidden(de)||y.resize(de)},window.addEventListener("resize",de._responsiveChartHandler)):l.clearResponsive(de);var Wt=l.extendFlat({},Be._size),$t=0;function Vt(){for(var tr=Be._basePlotModules,Ht=0;Ht<tr.length;Ht++)tr[Ht].drawFramework&&tr[Ht].drawFramework(de);!Be._glcanvas&&Be._has("gl")&&(Be._glcanvas=Be._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(er){return er.key}),Be._glcanvas.enter().append("canvas").attr("class",function(er){return"gl-canvas gl-canvas-"+er.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var lr=de._context.plotGlPixelRatio;if(Be._glcanvas){Be._glcanvas.attr("width",Be.width*lr).attr("height",Be.height*lr).style("width",Be.width+"px").style("height",Be.height+"px");var yr=Be._glcanvas.data()[0].regl;if(yr&&(Math.floor(Be.width*lr)!==yr._gl.drawingBufferWidth||Math.floor(Be.height*lr)!==yr._gl.drawingBufferHeight)){var xr="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if($t)l.error(xr);else return l.log(xr+" Clearing graph and plotting again."),y.cleanPlot([],{},de._fullData,Be),y.supplyDefaults(de),Be=de._fullLayout,y.doCalcdata(de),$t++,Vt()}}return Be.modebar.orientation==="h"?Be._modebardiv.style("height",null).style("width","100%"):Be._modebardiv.style("width",null).style("height",Be.height+"px"),y.previousPromises(de)}function Ft(){if(y.clearAutoMarginIds(de),D.drawMarginPushers(de),_.allowAutoMargin(de),de._fullLayout.title.text&&de._fullLayout.title.automargin&&y.allowAutoMargin(de,"title.automargin"),Be._has("pie"))for(var tr=de._fullData,Ht=0;Ht<tr.length;Ht++){var lr=tr[Ht];lr.type==="pie"&&lr.automargin&&y.allowAutoMargin(de,"pie."+lr.uid+".automargin")}return y.doAutoMargin(de),y.previousPromises(de)}function qt(){if(y.didMarginChange(Wt,Be._size))return l.syncOrAsync([Ft,D.layoutStyles],de)}function Gt(){if(!Dt){Xt();return}return l.syncOrAsync([p.getComponentMethod("shapes","calcAutorange"),p.getComponentMethod("annotations","calcAutorange"),Xt],de)}function Xt(){de._transitioning||(D.doAutoRangeAndConstraints(de),Ye&&_.saveRangeInitial(de),p.getComponentMethod("rangeslider","calcAutorange")(de))}function sr(){return _.draw(de,Ye?"":"redraw")}var jt=[y.previousPromises,nt,Vt,Ft,qt];ut&&jt.push(Gt),jt.push(D.layoutStyles),ut&&jt.push(sr,function(Ht){var lr=Ht._fullLayout._insideTickLabelsUpdaterange;if(lr)return Ht._fullLayout._insideTickLabelsUpdaterange=void 0,ve(Ht,lr).then(function(){_.saveRangeInitial(Ht,!0)})}),jt.push(D.drawData,D.finalDraw,A,y.addLinks,y.rehover,y.redrag,y.reselect,y.doAutoMargin,y.previousPromises);var Ut=l.syncOrAsync(jt,de);return(!Ut||!Ut.then)&&(Ut=Promise.resolve()),Ut.then(function(){return Z(de),de})}function Z(de){var Me=de._fullLayout;Me._redrawFromAutoMarginCount?Me._redrawFromAutoMarginCount--:de.emit("plotly_afterplot")}function B(de){return l.extendFlat(C,de)}function J(de,Me){try{de._fullLayout._paper.style("background",Me)}catch(he){l.error(he)}}function ne(de,Me){var he=w.combine(Me,"white");J(de,he)}function oe(de,Me){if(!de._context){de._context=l.extendDeep({},C);var he=i.select("base");de._context._baseUrl=he.size()&&he.attr("href")?window.location.href.split("#")[0]:""}var Ee=de._context,Pe,Ne,ht;if(Me){for(Ne=Object.keys(Me),Pe=0;Pe<Ne.length;Pe++)ht=Ne[Pe],!(ht==="editable"||ht==="edits")&&ht in Ee&&(ht==="setBackground"&&Me[ht]==="opaque"?Ee[ht]=ne:Ee[ht]=Me[ht]);Me.plot3dPixelRatio&&!Ee.plotGlPixelRatio&&(Ee.plotGlPixelRatio=Ee.plot3dPixelRatio);var nt=Me.editable;if(nt!==void 0)for(Ee.editable=nt,Ne=Object.keys(Ee.edits),Pe=0;Pe<Ne.length;Pe++)Ee.edits[Ne[Pe]]=nt;if(Me.edits)for(Ne=Object.keys(Me.edits),Pe=0;Pe<Ne.length;Pe++)ht=Ne[Pe],ht in Ee.edits&&(Ee.edits[ht]=Me.edits[ht]);Ee._exportedPlot=Me._exportedPlot}Ee.staticPlot&&(Ee.editable=!1,Ee.edits={},Ee.autosizable=!1,Ee.scrollZoom=!1,Ee.doubleClick=!1,Ee.showTips=!1,Ee.showLink=!1,Ee.displayModeBar=!1),Ee.displayModeBar==="hover"&&!a&&(Ee.displayModeBar=!0),(Ee.setBackground==="transparent"||typeof Ee.setBackground!="function")&&(Ee.setBackground=J),Ee._hasZeroHeight=Ee._hasZeroHeight||de.clientHeight===0,Ee._hasZeroWidth=Ee._hasZeroWidth||de.clientWidth===0;var Ye=Ee.scrollZoom,Be=Ee._scrollZoom={};if(Ye===!0)Be.cartesian=1,Be.gl3d=1,Be.geo=1,Be.mapbox=1;else if(typeof Ye=="string"){var ut=Ye.split("+");for(Pe=0;Pe<ut.length;Pe++)Be[ut[Pe]]=1}else Ye!==!1&&(Be.gl3d=1,Be.geo=1,Be.mapbox=1)}function Y(de){if(de=l.getGraphDiv(de),!l.isPlotDiv(de))throw new Error("This element is not a Plotly plot: "+de);return L.cleanData(de.data),L.cleanLayout(de.layout),de.calcdata=void 0,u._doPlot(de).then(function(){return de.emit("plotly_redraw"),de})}function G(de,Me,he,Ee){return de=l.getGraphDiv(de),y.cleanPlot([],{},de._fullData||[],de._fullLayout||{}),y.purge(de),u._doPlot(de,Me,he,Ee)}function K(de,Me){var he=Me+1,Ee=[],Pe,Ne;for(Pe=0;Pe<de.length;Pe++)Ne=de[Pe],Ne<0?Ee.push(he+Ne):Ee.push(Ne);return Ee}function ee(de,Me,he){var Ee,Pe;for(Ee=0;Ee<Me.length;Ee++){if(Pe=Me[Ee],Pe!==parseInt(Pe,10))throw new Error("all values in "+he+" must be integers");if(Pe>=de.data.length||Pe<-de.data.length)throw new Error(he+" must be valid indices for gd.data.");if(Me.indexOf(Pe,Ee+1)>-1||Pe>=0&&Me.indexOf(-de.data.length+Pe)>-1||Pe<0&&Me.indexOf(de.data.length+Pe)>-1)throw new Error("each index in "+he+" must be unique.")}}function ie(de,Me,he){if(!Array.isArray(de.data))throw new Error("gd.data must be an array.");if(typeof Me>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(Me)||(Me=[Me]),ee(de,Me,"currentIndices"),typeof he<"u"&&!Array.isArray(he)&&(he=[he]),typeof he<"u"&&ee(de,he,"newIndices"),typeof he<"u"&&Me.length!==he.length)throw new Error("current and new indices must be of equal length.")}function re(de,Me,he){var Ee,Pe;if(!Array.isArray(de.data))throw new Error("gd.data must be an array.");if(typeof Me>"u")throw new Error("traces must be defined.");for(Array.isArray(Me)||(Me=[Me]),Ee=0;Ee<Me.length;Ee++)if(Pe=Me[Ee],typeof Pe!="object"||Array.isArray(Pe)||Pe===null)throw new Error("all values in traces array must be non-array objects");if(typeof he<"u"&&!Array.isArray(he)&&(he=[he]),typeof he<"u"&&he.length!==Me.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function se(de,Me,he,Ee){var Pe=l.isPlainObject(Ee);if(!Array.isArray(de.data))throw new Error("gd.data must be an array");if(!l.isPlainObject(Me))throw new Error("update must be a key:value object");if(typeof he>"u")throw new Error("indices must be an integer or array of integers");ee(de,he,"indices");for(var Ne in Me){if(!Array.isArray(Me[Ne])||Me[Ne].length!==he.length)throw new Error("attribute "+Ne+" must be an array of length equal to indices array length");if(Pe&&(!(Ne in Ee)||!Array.isArray(Ee[Ne])||Ee[Ne].length!==Me[Ne].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function ge(de,Me,he,Ee){var Pe=l.isPlainObject(Ee),Ne=[],ht,nt,Ye,Be,ut;Array.isArray(he)||(he=[he]),he=K(he,de.data.length-1);for(var Dt in Me)for(var Nt=0;Nt<he.length;Nt++){if(ht=de.data[he[Nt]],Ye=s(ht,Dt),nt=Ye.get(),Be=Me[Dt][Nt],!l.isArrayOrTypedArray(Be))throw new Error("attribute: "+Dt+" index: "+Nt+" must be an array");if(!l.isArrayOrTypedArray(nt))throw new Error("cannot extend missing or non-array attribute: "+Dt);if(nt.constructor!==Be.constructor)throw new Error("cannot extend array with an array of a different type: "+Dt);ut=Pe?Ee[Dt][Nt]:Ee,c(ut)||(ut=-1),Ne.push({prop:Ye,target:nt,insert:Be,maxp:Math.floor(ut)})}return Ne}function xe(de,Me,he,Ee,Pe){se(de,Me,he,Ee);for(var Ne=ge(de,Me,he,Ee),ht={},nt={},Ye=0;Ye<Ne.length;Ye++){var Be=Ne[Ye].prop,ut=Ne[Ye].maxp,Dt=Pe(Ne[Ye].target,Ne[Ye].insert,ut);Be.set(Dt[0]),Array.isArray(ht[Be.astr])||(ht[Be.astr]=[]),ht[Be.astr].push(Dt[1]),Array.isArray(nt[Be.astr])||(nt[Be.astr]=[]),nt[Be.astr].push(Ne[Ye].target.length)}return{update:ht,maxPoints:nt}}function Se(de,Me){var he=new de.constructor(de.length+Me.length);return he.set(de),he.set(Me,de.length),he}function ce(de,Me,he,Ee){de=l.getGraphDiv(de);function Pe(Ye,Be,ut){var Dt,Nt;if(l.isTypedArray(Ye))if(ut<0){var Wt=new Ye.constructor(0),$t=Se(Ye,Be);ut<0?(Dt=$t,Nt=Wt):(Dt=Wt,Nt=$t)}else if(Dt=new Ye.constructor(ut),Nt=new Ye.constructor(Ye.length+Be.length-ut),ut===Be.length)Dt.set(Be),Nt.set(Ye);else if(ut<Be.length){var Vt=Be.length-ut;Dt.set(Be.subarray(Vt)),Nt.set(Ye),Nt.set(Be.subarray(0,Vt),Ye.length)}else{var Ft=ut-Be.length,qt=Ye.length-Ft;Dt.set(Ye.subarray(qt)),Dt.set(Be,Ft),Nt.set(Ye.subarray(0,qt))}else Dt=Ye.concat(Be),Nt=ut>=0&&ut<Dt.length?Dt.splice(0,Dt.length-ut):[];return[Dt,Nt]}var Ne=xe(de,Me,he,Ee,Pe),ht=u.redraw(de),nt=[de,Ne.update,he,Ne.maxPoints];return d.add(de,u.prependTraces,nt,ce,arguments),ht}function pe(de,Me,he,Ee){de=l.getGraphDiv(de);function Pe(Ye,Be,ut){var Dt,Nt;if(l.isTypedArray(Ye))if(ut<=0){var Wt=new Ye.constructor(0),$t=Se(Be,Ye);ut<0?(Dt=$t,Nt=Wt):(Dt=Wt,Nt=$t)}else if(Dt=new Ye.constructor(ut),Nt=new Ye.constructor(Ye.length+Be.length-ut),ut===Be.length)Dt.set(Be),Nt.set(Ye);else if(ut<Be.length){var Vt=Be.length-ut;Dt.set(Be.subarray(0,Vt)),Nt.set(Be.subarray(Vt)),Nt.set(Ye,Vt)}else{var Ft=ut-Be.length;Dt.set(Be),Dt.set(Ye.subarray(0,Ft),Be.length),Nt.set(Ye.subarray(Ft))}else Dt=Be.concat(Ye),Nt=ut>=0&&ut<Dt.length?Dt.splice(ut,Dt.length):[];return[Dt,Nt]}var Ne=xe(de,Me,he,Ee,Pe),ht=u.redraw(de),nt=[de,Ne.update,he,Ne.maxPoints];return d.add(de,u.extendTraces,nt,pe,arguments),ht}function ye(de,Me,he){de=l.getGraphDiv(de);var Ee=[],Pe=u.deleteTraces,Ne=ye,ht=[de,Ee],nt=[de,Me],Ye,Be;for(re(de,Me,he),Array.isArray(Me)||(Me=[Me]),Me=Me.map(function(ut){return l.extendFlat({},ut)}),L.cleanData(Me),Ye=0;Ye<Me.length;Ye++)de.data.push(Me[Ye]);for(Ye=0;Ye<Me.length;Ye++)Ee.push(-Me.length+Ye);if(typeof he>"u")return Be=u.redraw(de),d.add(de,Pe,ht,Ne,nt),Be;Array.isArray(he)||(he=[he]);try{ie(de,Ee,he)}catch(ut){throw de.data.splice(de.data.length-Me.length,Me.length),ut}return d.startSequence(de),d.add(de,Pe,ht,Ne,nt),Be=u.moveTraces(de,Ee,he),d.stopSequence(de),Be}function U(de,Me){de=l.getGraphDiv(de);var he=[],Ee=u.addTraces,Pe=U,Ne=[de,he,Me],ht=[de,Me],nt,Ye;if(typeof Me>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Me)||(Me=[Me]),ee(de,Me,"indices"),Me=K(Me,de.data.length-1),Me.sort(l.sorterDes),nt=0;nt<Me.length;nt+=1)Ye=de.data.splice(Me[nt],1)[0],he.push(Ye);var Be=u.redraw(de);return d.add(de,Ee,Ne,Pe,ht),Be}function W(de,Me,he){de=l.getGraphDiv(de);var Ee=[],Pe=[],Ne=W,ht=W,nt=[de,he,Me],Ye=[de,Me,he],Be;if(ie(de,Me,he),Me=Array.isArray(Me)?Me:[Me],typeof he>"u")for(he=[],Be=0;Be<Me.length;Be++)he.push(-Me.length+Be);for(he=Array.isArray(he)?he:[he],Me=K(Me,de.data.length-1),he=K(he,de.data.length-1),Be=0;Be<de.data.length;Be++)Me.indexOf(Be)===-1&&Ee.push(de.data[Be]);for(Be=0;Be<Me.length;Be++)Pe.push({newIndex:he[Be],trace:de.data[Me[Be]]});for(Pe.sort(function(Dt,Nt){return Dt.newIndex-Nt.newIndex}),Be=0;Be<Pe.length;Be+=1)Ee.splice(Pe[Be].newIndex,0,Pe[Be].trace);de.data=Ee;var ut=u.redraw(de);return d.add(de,Ne,nt,ht,Ye),ut}function j(de,Me,he,Ee){de=l.getGraphDiv(de),L.clearPromiseQueue(de);var Pe={};if(typeof Me=="string")Pe[Me]=he;else if(l.isPlainObject(Me))Pe=l.extendFlat({},Me),Ee===void 0&&(Ee=he);else return l.warn("Restyle fail.",Me,he,Ee),Promise.reject();Object.keys(Pe).length&&(de.changed=!0);var Ne=L.coerceTraceIndices(de,Ee),ht=te(de,Pe,Ne),nt=ht.flags;nt.calc&&(de.calcdata=void 0),nt.clearAxisTypes&&L.clearAxisTypes(de,Ne,{});var Ye=[];nt.fullReplot?Ye.push(u._doPlot):(Ye.push(y.previousPromises),y.supplyDefaults(de),nt.markerSize&&(y.doCalcdata(de),Re(Ye)),nt.style&&Ye.push(D.doTraceStyle),nt.colorbars&&Ye.push(D.doColorBars),Ye.push(Z)),Ye.push(y.rehover,y.redrag,y.reselect),d.add(de,j,[de,ht.undoit,ht.traces],j,[de,ht.redoit,ht.traces]);var Be=l.syncOrAsync(Ye,de);return(!Be||!Be.then)&&(Be=Promise.resolve()),Be.then(function(){return de.emit("plotly_restyle",ht.eventData),de})}function F(de){return de===void 0?null:de}function P(de,Me){return Me?function(he,Ee,Pe){var Ne=s(he,Ee),ht=Ne.set;return Ne.set=function(nt){var Ye=(Pe||"")+Ee;q(Ye,Ne.get(),nt,de),ht(nt)},Ne}:s}function q(de,Me,he,Ee){if(Array.isArray(Me)||Array.isArray(he))for(var Pe=Array.isArray(Me)?Me:[],Ne=Array.isArray(he)?he:[],ht=Math.max(Pe.length,Ne.length),nt=0;nt<ht;nt++)q(de+"["+nt+"]",Pe[nt],Ne[nt],Ee);else if(l.isPlainObject(Me)||l.isPlainObject(he)){var Ye=l.isPlainObject(Me)?Me:{},Be=l.isPlainObject(he)?he:{},ut=l.extendFlat({},Ye,Be);for(var Dt in ut)q(de+"."+Dt,Ye[Dt],Be[Dt],Ee)}else Ee[de]===void 0&&(Ee[de]=F(Me))}function z(de,Me,he){for(var Ee in he){var Pe=s(de,Ee);q(Ee,Pe.get(),he[Ee],Me)}}function te(de,Me,he){var Ee=de._fullLayout,Pe=de._fullData,Ne=de.data,ht=Ee._guiEditing,nt=P(Ee._preGUI,ht),Ye=l.extendDeepAll({},Me),Be;ue(Me);var ut=O.traceFlags(),Dt={},Nt={},Wt;function $t(){return he.map(function(){})}function Vt(Kt){var cr=_.id2name(Kt);Wt.indexOf(cr)===-1&&Wt.push(cr)}function Ft(Kt){return"LAYOUT"+Kt+".autorange"}function qt(Kt){return"LAYOUT"+Kt+".range"}function Gt(Kt){for(var cr=Kt;cr<Pe.length;cr++)if(Pe[cr]._input===Ne[Kt])return Pe[cr]}function Xt(Kt,cr,or){if(Array.isArray(Kt)){Kt.forEach(function(Ar){Xt(Ar,cr,or)});return}if(!(Kt in Me||L.hasParent(Me,Kt))){var nr;if(Kt.substr(0,6)==="LAYOUT")nr=nt(de.layout,Kt.replace("LAYOUT",""));else{var mr=he[or],pr=Ee._tracePreGUI[Gt(mr)._fullInput.uid];nr=P(pr,ht)(Ne[mr],Kt)}Kt in Nt||(Nt[Kt]=$t()),Nt[Kt][or]===void 0&&(Nt[Kt][or]=F(nr.get())),cr!==void 0&&nr.set(cr)}}function sr(Kt){return function(cr){return Pe[cr][Kt]}}function jt(Kt){return function(cr,or){return cr===!1?Pe[he[or]][Kt]:null}}for(var Ut in Me){if(L.hasParent(Me,Ut))throw new Error("cannot set "+Ut+" and a parent attribute simultaneously");var tr=Me[Ut],Ht,lr,yr,xr,er,fe;if((Ut==="autobinx"||Ut==="autobiny")&&(Ut=Ut.charAt(Ut.length-1)+"bins",Array.isArray(tr)?tr=tr.map(jt(Ut)):tr===!1?tr=he.map(sr(Ut)):tr=null),Dt[Ut]=tr,Ut.substr(0,6)==="LAYOUT"){yr=nt(de.layout,Ut.replace("LAYOUT","")),Nt[Ut]=[F(yr.get())],yr.set(Array.isArray(tr)?tr[0]:tr),ut.calc=!0;continue}for(Nt[Ut]=$t(),Be=0;Be<he.length;Be++){Ht=Ne[he[Be]],lr=Gt(he[Be]);var Q=Ee._tracePreGUI[lr._fullInput.uid];if(yr=P(Q,ht)(Ht,Ut),xr=yr.get(),er=Array.isArray(tr)?tr[Be%tr.length]:tr,er!==void 0){var Je=yr.parts[yr.parts.length-1],Ge=Ut.substr(0,Ut.length-Je.length-1),Qe=Ge?Ge+".":"",it=Ge?s(lr,Ge).get():lr;if(fe=o.getTraceValObject(lr,yr.parts),fe&&fe.impliedEdits&&er!==null)for(var rt in fe.impliedEdits)Xt(l.relativeAttr(Ut,rt),fe.impliedEdits[rt],Be);else if((Je==="thicknessmode"||Je==="lenmode")&&xr!==er&&(er==="fraction"||er==="pixels")&&it){var $e=Ee._size,je=it.orient,ct=je==="top"||je==="bottom";if(Je==="thicknessmode"){var dt=ct?$e.h:$e.w;Xt(Qe+"thickness",it.thickness*(er==="fraction"?1/dt:dt),Be)}else{var xt=ct?$e.w:$e.h;Xt(Qe+"len",it.len*(er==="fraction"?1/xt:xt),Be)}}else if(Ut==="type"&&(er==="pie"!=(xr==="pie")||er==="funnelarea"!=(xr==="funnelarea"))){var yt="x",Lt="y";(er==="bar"||xr==="bar")&&Ht.orientation==="h"&&(yt="y",Lt="x"),l.swapAttrs(Ht,["?","?src"],"labels",yt),l.swapAttrs(Ht,["d?","?0"],"label",yt),l.swapAttrs(Ht,["?","?src"],"values",Lt),xr==="pie"||xr==="funnelarea"?(s(Ht,"marker.color").set(s(Ht,"marker.colors").get()),Ee._pielayer.selectAll("g.trace").remove()):p.traceIs(Ht,"cartesian")&&s(Ht,"marker.colors").set(s(Ht,"marker.color").get())}Nt[Ut][Be]=F(xr);var wt=["swapxy","swapxyaxes","orientation","orientationaxes"];if(wt.indexOf(Ut)!==-1){if(Ut==="orientation"){yr.set(er);var At=Ht.x&&!Ht.y?"h":"v";if((yr.get()||At)===lr.orientation)continue}else Ut==="orientationaxes"&&(Ht.orientation={v:"h",h:"v"}[lr.orientation]);L.swapXYData(Ht),ut.calc=ut.clearAxisTypes=!0}else y.dataArrayContainers.indexOf(yr.parts[0])!==-1?(L.manageArrayContainers(yr,er,Nt),ut.calc=!0):(fe?fe.arrayOk&&!p.traceIs(lr,"regl")&&(l.isArrayOrTypedArray(er)||l.isArrayOrTypedArray(xr))?ut.calc=!0:O.update(ut,fe):ut.calc=!0,yr.set(er))}}if(["swapxyaxes","orientationaxes"].indexOf(Ut)!==-1&&_.swap(de,he),Ut==="orientationaxes"){var Ot=s(de.layout,"hovermode"),zt=Ot.get();zt==="x"?Ot.set("y"):zt==="y"?Ot.set("x"):zt==="x unified"?Ot.set("y unified"):zt==="y unified"&&Ot.set("x unified")}if(["orientation","type"].indexOf(Ut)!==-1){for(Wt=[],Be=0;Be<he.length;Be++){var Zt=Ne[he[Be]];p.traceIs(Zt,"cartesian")&&(Vt(Zt.xaxis||"x"),Vt(Zt.yaxis||"y"))}Xt(Wt.map(Ft),!0,0),Xt(Wt.map(qt),[0,1],0)}}return(ut.calc||ut.plot)&&(ut.fullReplot=!0),{flags:ut,undoit:Nt,redoit:Dt,traces:he,eventData:l.extendDeepNoArrays([],[Ye,he])}}function ue(de){var Me=l.counterRegex("axis",".title",!1,!1),he=/colorbar\.title$/,Ee=Object.keys(de),Pe,Ne,ht;for(Pe=0;Pe<Ee.length;Pe++)Ne=Ee[Pe],ht=de[Ne],(Ne==="title"||Me.test(Ne)||he.test(Ne))&&(typeof ht=="string"||typeof ht=="number")?nt(Ne,Ne.replace("title","title.text")):Ne.indexOf("titlefont")>-1&&Ne.indexOf("grouptitlefont")===-1?nt(Ne,Ne.replace("titlefont","title.font")):Ne.indexOf("titleposition")>-1?nt(Ne,Ne.replace("titleposition","title.position")):Ne.indexOf("titleside")>-1?nt(Ne,Ne.replace("titleside","title.side")):Ne.indexOf("titleoffset")>-1&&nt(Ne,Ne.replace("titleoffset","title.offset"));function nt(Ye,Be){de[Be]=de[Ye],delete de[Ye]}}function ve(de,Me,he){de=l.getGraphDiv(de),L.clearPromiseQueue(de);var Ee={};if(typeof Me=="string")Ee[Me]=he;else if(l.isPlainObject(Me))Ee=l.extendFlat({},Me);else return l.warn("Relayout fail.",Me,he),Promise.reject();Object.keys(Ee).length&&(de.changed=!0);var Pe=Ze(de,Ee),Ne=Pe.flags;Ne.calc&&(de.calcdata=void 0);var ht=[y.previousPromises];Ne.layoutReplot?ht.push(D.layoutReplot):Object.keys(Ee).length&&(_e(de,Ne,Pe)||y.supplyDefaults(de),Ne.legend&&ht.push(D.doLegend),Ne.layoutstyle&&ht.push(D.layoutStyles),Ne.axrange&&Re(ht,Pe.rangesAltered),Ne.ticks&&ht.push(D.doTicksRelayout),Ne.modebar&&ht.push(D.doModeBar),Ne.camera&&ht.push(D.doCamera),Ne.colorbars&&ht.push(D.doColorBars),ht.push(Z)),ht.push(y.rehover,y.redrag,y.reselect),d.add(de,ve,[de,Pe.undoit],ve,[de,Pe.redoit]);var nt=l.syncOrAsync(ht,de);return(!nt||!nt.then)&&(nt=Promise.resolve(de)),nt.then(function(){return de.emit("plotly_relayout",Pe.eventData),de})}function _e(de,Me,he){var Ee=de._fullLayout;if(!Me.axrange)return!1;for(var Pe in Me)if(Pe!=="axrange"&&Me[Pe])return!1;var Ne,ht,nt=function(Wt,$t){return l.coerce(Ne,ht,M,Wt,$t)},Ye={};for(var Be in he.rangesAltered){var ut=_.id2name(Be);if(Ne=de.layout[ut],ht=Ee[ut],E(Ne,ht,nt,Ye),ht._matchGroup){for(var Dt in ht._matchGroup)if(Dt!==Be){var Nt=Ee[_.id2name(Dt)];Nt.autorange=ht.autorange,Nt.range=ht.range.slice(),Nt._input.range=ht.range.slice()}}}return!0}function Re(de,Me){var he=Me?function(Ee){var Pe=[],Ne=!0;for(var ht in Me){var nt=_.getFromId(Ee,ht);if(Pe.push(ht),(nt.ticklabelposition||"").indexOf("inside")!==-1&&nt._anchorAxis&&Pe.push(nt._anchorAxis._id),nt._matchGroup)for(var Ye in nt._matchGroup)Me[Ye]||Pe.push(Ye)}return _.draw(Ee,Pe,{skipTitle:Ne})}:function(Ee){return _.draw(Ee,"redraw")};de.push(T,D.doAutoRangeAndConstraints,he,D.drawData,D.finalDraw)}var Le=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Ve=/^[xyz]axis[0-9]*\.autorange$/,Xe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Ze(de,Me){var he=de.layout,Ee=de._fullLayout,Pe=Ee._guiEditing,Ne=P(Ee._preGUI,Pe),ht=Object.keys(Me),nt=_.list(de),Ye=l.extendDeepAll({},Me),Be={},ut,Dt,Nt;for(ue(Me),ht=Object.keys(Me),Dt=0;Dt<ht.length;Dt++)if(ht[Dt].indexOf("allaxes")===0){for(Nt=0;Nt<nt.length;Nt++){var Wt=nt[Nt]._id.substr(1),$t=Wt.indexOf("scene")!==-1?Wt+".":"",Vt=ht[Dt].replace("allaxes",$t+nt[Nt]._name);Me[Vt]||(Me[Vt]=Me[ht[Dt]])}delete Me[ht[Dt]]}var Ft=O.layoutFlags(),qt={},Gt={};function Xt(pr,Ar){if(Array.isArray(pr)){pr.forEach(function(Lr){Xt(Lr,Ar)});return}if(!(pr in Me||L.hasParent(Me,pr))){var en=Ne(he,pr);pr in Gt||(Gt[pr]=F(en.get())),Ar!==void 0&&en.set(Ar)}}var sr={},jt;function Ut(pr){var Ar=_.name2id(pr.split(".")[0]);return sr[Ar]=1,Ar}for(var tr in Me){if(L.hasParent(Me,tr))throw new Error("cannot set "+tr+" and a parent attribute simultaneously");for(var Ht=Ne(he,tr),lr=Me[tr],yr=Ht.parts.length,xr=yr-1;xr>0&&typeof Ht.parts[xr]!="string";)xr--;var er=Ht.parts[xr],fe=Ht.parts[xr-1]+"."+er,Q=Ht.parts.slice(0,xr).join("."),Je=s(de.layout,Q).get(),Ge=s(Ee,Q).get(),Qe=Ht.get();if(lr!==void 0){qt[tr]=lr,Gt[tr]=er==="reverse"?lr:F(Qe);var it=o.getLayoutValObject(Ee,Ht.parts);if(it&&it.impliedEdits&&lr!==null)for(var rt in it.impliedEdits)Xt(l.relativeAttr(tr,rt),it.impliedEdits[rt]);if(["width","height"].indexOf(tr)!==-1)if(lr){Xt("autosize",null);var $e=tr==="height"?"width":"height";Xt($e,Ee[$e])}else Ee[tr]=de._initialAutoSize[tr];else if(tr==="autosize")Xt("width",lr?null:Ee.width),Xt("height",lr?null:Ee.height);else if(fe.match(Le))Ut(fe),s(Ee,Q+"._inputRange").set(null);else if(fe.match(Ve)){Ut(fe),s(Ee,Q+"._inputRange").set(null);var je=s(Ee,Q).get();je._inputDomain&&(je._input.domain=je._inputDomain.slice())}else fe.match(Xe)&&s(Ee,Q+"._inputDomain").set(null);if(er==="type"){jt=Je;var ct=Ge.type==="linear"&&lr==="log",dt=Ge.type==="log"&&lr==="linear";if(ct||dt){if(!jt||!jt.range)Xt(Q+".autorange",!0);else if(Ge.autorange)ct&&(jt.range=jt.range[1]>jt.range[0]?[1,2]:[2,1]);else{var xt=jt.range[0],yt=jt.range[1];ct?(xt<=0&&yt<=0&&Xt(Q+".autorange",!0),xt<=0?xt=yt/1e6:yt<=0&&(yt=xt/1e6),Xt(Q+".range[0]",Math.log(xt)/Math.LN10),Xt(Q+".range[1]",Math.log(yt)/Math.LN10)):(Xt(Q+".range[0]",Math.pow(10,xt)),Xt(Q+".range[1]",Math.pow(10,yt)))}Array.isArray(Ee._subplots.polar)&&Ee._subplots.polar.length&&Ee[Ht.parts[0]]&&Ht.parts[1]==="radialaxis"&&delete Ee[Ht.parts[0]]._subplot.viewInitial["radialaxis.range"],p.getComponentMethod("annotations","convertCoords")(de,Ge,lr,Xt),p.getComponentMethod("images","convertCoords")(de,Ge,lr,Xt)}else Xt(Q+".autorange",!0),Xt(Q+".range",null);s(Ee,Q+"._inputRange").set(null)}else if(er.match(N)){var Lt=s(Ee,tr).get(),wt=(lr||{}).type;(!wt||wt==="-")&&(wt="linear"),p.getComponentMethod("annotations","convertCoords")(de,Lt,wt,Xt),p.getComponentMethod("images","convertCoords")(de,Lt,wt,Xt)}var At=m.containerArrayMatch(tr);if(At){ut=At.array,Dt=At.index;var Ot=At.property,zt=it||{editType:"calc"};Dt!==""&&Ot===""&&(m.isAddVal(lr)?Gt[tr]=null:m.isRemoveVal(lr)?Gt[tr]=(s(he,ut).get()||[])[Dt]:l.warn("unrecognized full object value",Me)),O.update(Ft,zt),Be[ut]||(Be[ut]={});var Zt=Be[ut][Dt];Zt||(Zt=Be[ut][Dt]={}),Zt[Ot]=lr,delete Me[tr]}else er==="reverse"?(Je.range?Je.range.reverse():(Xt(Q+".autorange",!0),Je.range=[1,0]),Ge.autorange?Ft.calc=!0:Ft.plot=!0):(tr==="dragmode"&&(lr===!1&&Qe!==!1||lr!==!1&&Qe===!1)||Ee._has("scatter-like")&&Ee._has("regl")&&tr==="dragmode"&&(lr==="lasso"||lr==="select")&&!(Qe==="lasso"||Qe==="select")||Ee._has("gl2d")?Ft.plot=!0:it?O.update(Ft,it):Ft.calc=!0,Ht.set(lr))}}for(ut in Be){var Kt=m.applyContainerArrayChanges(de,Ne(he,ut),Be[ut],Ft,Ne);Kt||(Ft.plot=!0)}for(var cr in sr){jt=_.getFromId(de,cr);var or=jt&&jt._constraintGroup;if(or){Ft.calc=!0;for(var nr in or)sr[nr]||(_.getFromId(de,nr)._constraintShrinkable=!0)}}(Te(de)||Me.height||Me.width)&&(Ft.plot=!0);var mr=Ee.shapes;for(Dt=0;Dt<mr.length;Dt++)if(mr[Dt].showlegend){Ft.calc=!0;break}return(Ft.plot||Ft.calc)&&(Ft.layoutReplot=!0),{flags:Ft,rangesAltered:sr,undoit:Gt,redoit:qt,eventData:Ye}}function Te(de){var Me=de._fullLayout,he=Me.width,Ee=Me.height;return de.layout.autosize&&y.plotAutoSize(de,de.layout,Me),Me.width!==he||Me.height!==Ee}function we(de,Me,he,Ee){de=l.getGraphDiv(de),L.clearPromiseQueue(de),l.isPlainObject(Me)||(Me={}),l.isPlainObject(he)||(he={}),Object.keys(Me).length&&(de.changed=!0),Object.keys(he).length&&(de.changed=!0);var Pe=L.coerceTraceIndices(de,Ee),Ne=te(de,l.extendFlat({},Me),Pe),ht=Ne.flags,nt=Ze(de,l.extendFlat({},he)),Ye=nt.flags;(ht.calc||Ye.calc)&&(de.calcdata=void 0),ht.clearAxisTypes&&L.clearAxisTypes(de,Pe,he);var Be=[];Ye.layoutReplot?Be.push(D.layoutReplot):ht.fullReplot?Be.push(u._doPlot):(Be.push(y.previousPromises),_e(de,Ye,nt)||y.supplyDefaults(de),ht.style&&Be.push(D.doTraceStyle),(ht.colorbars||Ye.colorbars)&&Be.push(D.doColorBars),Ye.legend&&Be.push(D.doLegend),Ye.layoutstyle&&Be.push(D.layoutStyles),Ye.axrange&&Re(Be,nt.rangesAltered),Ye.ticks&&Be.push(D.doTicksRelayout),Ye.modebar&&Be.push(D.doModeBar),Ye.camera&&Be.push(D.doCamera),Be.push(Z)),Be.push(y.rehover,y.redrag,y.reselect),d.add(de,we,[de,Ne.undoit,nt.undoit,Ne.traces],we,[de,Ne.redoit,nt.redoit,Ne.traces]);var ut=l.syncOrAsync(Be,de);return(!ut||!ut.then)&&(ut=Promise.resolve(de)),ut.then(function(){return de.emit("plotly_update",{data:Ne.eventData,layout:nt.eventData}),de})}function be(de){return function(he){he._fullLayout._guiEditing=!0;var Ee=de.apply(null,arguments);return he._fullLayout._guiEditing=!1,Ee}}var ke=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],He=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Ke(de,Me){for(var he=0;he<Me.length;he++){var Ee=Me[he],Pe=de.match(Ee.pattern);if(Pe){var Ne=Pe[1]||"";return{head:Ne,tail:de.substr(Ne.length+1),attr:Ee.attr}}}}function st(de,Me){var he=s(Me,de).get();if(he!==void 0)return he;var Ee=de.split(".");for(Ee.pop();Ee.length>1;)if(Ee.pop(),he=s(Me,Ee.join(".")+".uirevision").get(),he!==void 0)return he;return Me.uirevision}function vt(de,Me){for(var he=0;he<Me.length;he++)if(Me[he]._fullInput.uid===de)return he;return-1}function pt(de,Me,he){for(var Ee=0;Ee<Me.length;Ee++)if(Me[Ee].uid===de)return Ee;return!Me[he]||Me[he].uid?-1:he}function ft(de,Me){var he=l.isPlainObject(de),Ee=Array.isArray(de);return he||Ee?(he&&l.isPlainObject(Me)||Ee&&Array.isArray(Me))&&JSON.stringify(de)===JSON.stringify(Me):de===Me}function lt(de,Me,he,Ee){var Pe=Ee._preGUI,Ne,ht,nt,Ye,Be,ut,Dt,Nt,Wt,$t,Vt=[],Ft={},qt={};for(Ne in Pe){if(Be=Ke(Ne,ke),Be){if(Wt=Be.head,$t=Be.tail,ht=Be.attr||Wt+".uirevision",nt=s(Ee,ht).get(),Ye=nt&&st(ht,Me),Ye&&Ye===nt){if(ut=Pe[Ne],ut===null&&(ut=void 0),Dt=s(Me,Ne),Nt=Dt.get(),ft(Nt,ut)){Nt===void 0&&$t==="autorange"&&Vt.push(Wt),Dt.set(F(s(Ee,Ne).get()));continue}else if($t==="autorange"||$t.substr(0,6)==="range["){var Gt=Pe[Wt+".range[0]"],Xt=Pe[Wt+".range[1]"],sr=Pe[Wt+".autorange"];if(sr||sr===null&&Gt===null&&Xt===null){if(!(Wt in Ft)){var jt=s(Me,Wt).get();Ft[Wt]=jt&&(jt.autorange||jt.autorange!==!1&&(!jt.range||jt.range.length!==2))}if(Ft[Wt]){Dt.set(F(s(Ee,Ne).get()));continue}}}}}else l.warn("unrecognized GUI edit: "+Ne);delete Pe[Ne],Be&&Be.tail.substr(0,6)==="range["&&(qt[Be.head]=1)}for(var Ut=0;Ut<Vt.length;Ut++){var tr=Vt[Ut];if(qt[tr]){var Ht=s(Me,tr).get();Ht&&delete Ht.autorange}}var lr=Ee._tracePreGUI;for(var yr in lr){var xr=lr[yr],er=null,fe;for(Ne in xr){if(!er){var Q=vt(yr,he);if(Q<0){delete lr[yr];break}var Je=he[Q];fe=Je._fullInput;var Ge=pt(yr,de,fe.index);if(Ge<0){delete lr[yr];break}er=de[Ge]}if(Be=Ke(Ne,He),Be){if(Be.attr?(nt=s(Ee,Be.attr).get(),Ye=nt&&st(Be.attr,Me)):(nt=fe.uirevision,Ye=er.uirevision,Ye===void 0&&(Ye=Me.uirevision)),Ye&&Ye===nt&&(ut=xr[Ne],ut===null&&(ut=void 0),Dt=s(er,Ne),Nt=Dt.get(),ft(Nt,ut))){Dt.set(F(s(fe,Ne).get()));continue}}else l.warn("unrecognized GUI edit: "+Ne+" in trace uid "+yr);delete xr[Ne]}}}function Mt(de,Me,he,Ee){var Pe,Ne;function ht(){return u.addFrames(de,Pe)}de=l.getGraphDiv(de),L.clearPromiseQueue(de);var nt=de._fullData,Ye=de._fullLayout;if(!l.isPlotDiv(de)||!nt||!Ye)Ne=u.newPlot(de,Me,he,Ee);else{if(l.isPlainObject(Me)){var Be=Me;Me=Be.data,he=Be.layout,Ee=Be.config,Pe=Be.frames}var ut=!1;if(Ee){var Dt=l.extendDeep({},de._context);de._context=void 0,oe(de,Ee),ut=St(Dt,de._context)}de.data=Me||[],L.cleanData(de.data),de.layout=he||{},L.cleanLayout(de.layout),lt(de.data,de.layout,nt,Ye),y.supplyDefaults(de,{skipUpdateCalc:!0});var Nt=de._fullData,Wt=de._fullLayout,$t=Wt.datarevision===void 0,Vt=Wt.transition,Ft=Ct(de,Ye,Wt,$t,Vt),qt=Ft.newDataRevision,Gt=ot(de,nt,Nt,$t,Vt,qt);if(Te(de)&&(Ft.layoutReplot=!0),Gt.calc||Ft.calc){de.calcdata=void 0;for(var Xt=Object.getOwnPropertyNames(Wt),sr=0;sr<Xt.length;sr++){var jt=Xt[sr],Ut=jt.substring(0,5);if(Ut==="xaxis"||Ut==="yaxis"){var tr=Wt[jt]._emptyCategories;tr&&tr()}}}else y.supplyDefaultsUpdateCalc(de.calcdata,Nt);var Ht=[];if(Pe&&(de._transitionData={},y.createTransitionData(de),Ht.push(ht)),Wt.transition&&!ut&&(Gt.anim||Ft.anim))Ft.ticks&&Ht.push(D.doTicksRelayout),y.doCalcdata(de),D.doAutoRangeAndConstraints(de),Ht.push(function(){return y.transitionFromReact(de,Gt,Ft,Ye)});else if(Gt.fullReplot||Ft.layoutReplot||ut)de._fullLayout._skipDefaults=!0,Ht.push(u._doPlot);else{for(var lr in Ft.arrays){var yr=Ft.arrays[lr];if(yr.length){var xr=p.getComponentMethod(lr,"drawOne");if(xr!==l.noop)for(var er=0;er<yr.length;er++)xr(de,yr[er]);else{var fe=p.getComponentMethod(lr,"draw");if(fe===l.noop)throw new Error("cannot draw components: "+lr);fe(de)}}}Ht.push(y.previousPromises),Gt.style&&Ht.push(D.doTraceStyle),(Gt.colorbars||Ft.colorbars)&&Ht.push(D.doColorBars),Ft.legend&&Ht.push(D.doLegend),Ft.layoutstyle&&Ht.push(D.layoutStyles),Ft.axrange&&Re(Ht),Ft.ticks&&Ht.push(D.doTicksRelayout),Ft.modebar&&Ht.push(D.doModeBar),Ft.camera&&Ht.push(D.doCamera),Ht.push(Z)}Ht.push(y.rehover,y.redrag,y.reselect),Ne=l.syncOrAsync(Ht,de),(!Ne||!Ne.then)&&(Ne=Promise.resolve(de))}return Ne.then(function(){return de.emit("plotly_react",{data:Me,layout:he}),de})}function ot(de,Me,he,Ee,Pe,Ne){var ht=Me.length===he.length;if(!Pe&&!ht)return{fullReplot:!0,calc:!0};var nt=O.traceFlags();nt.arrays={},nt.nChanges=0,nt.nChangesAnim=0;var Ye,Be;function ut(Wt){var $t=o.getTraceValObject(Be,Wt);return!Be._module.animatable&&$t.anim&&($t.anim=!1),$t}var Dt={getValObject:ut,flags:nt,immutable:Ee,transition:Pe,newDataRevision:Ne,gd:de},Nt={};for(Ye=0;Ye<Me.length;Ye++)if(he[Ye]){if(Be=he[Ye]._fullInput,y.hasMakesDataTransform(Be)&&(Be=he[Ye]),Nt[Be.uid])continue;Nt[Be.uid]=1,kt(Me[Ye]._fullInput,Be,[],Dt)}return(nt.calc||nt.plot)&&(nt.fullReplot=!0),Pe&&nt.nChanges&&nt.nChangesAnim&&(nt.anim=nt.nChanges===nt.nChangesAnim&&ht?"all":"some"),nt}function Ct(de,Me,he,Ee,Pe){var Ne=O.layoutFlags();Ne.arrays={},Ne.rangesAltered={},Ne.nChanges=0,Ne.nChangesAnim=0;function ht(Ye){return o.getLayoutValObject(he,Ye)}var nt={getValObject:ht,flags:Ne,immutable:Ee,transition:Pe,gd:de};return kt(Me,he,[],nt),(Ne.plot||Ne.calc)&&(Ne.layoutReplot=!0),Pe&&Ne.nChanges&&Ne.nChangesAnim&&(Ne.anim=Ne.nChanges===Ne.nChangesAnim?"all":"some"),Ne}function kt(de,Me,he,Ee){var Pe,Ne,ht,nt=Ee.getValObject,Ye=Ee.flags,Be=Ee.immutable,ut=Ee.inArray,Dt=Ee.arrayIndex;function Nt(){var Q=Pe.editType;if(ut&&Q.indexOf("arraydraw")!==-1){l.pushUnique(Ye.arrays[ut],Dt);return}O.update(Ye,Pe),Q!=="none"&&Ye.nChanges++,Ee.transition&&Pe.anim&&Ye.nChangesAnim++,(Le.test(ht)||Ve.test(ht))&&(Ye.rangesAltered[he[0]]=1),Xe.test(ht)&&s(Me,"_inputDomain").set(null),Ne==="datarevision"&&(Ye.newDataRevision=1)}function Wt(Q){return Q.valType==="data_array"||Q.arrayOk}for(Ne in de){if(Ye.calc&&!Ee.transition)return;var $t=de[Ne],Vt=Me[Ne],Ft=he.concat(Ne);if(ht=Ft.join("."),!(Ne.charAt(0)==="_"||typeof $t=="function"||$t===Vt)){if((Ne==="tick0"||Ne==="dtick")&&he[0]!=="geo"){var qt=Me.tickmode;if(qt==="auto"||qt==="array"||!qt)continue}if(!(Ne==="range"&&Me.autorange)&&!((Ne==="zmin"||Ne==="zmax")&&Me.type==="contourcarpet")&&(Pe=nt(Ft),!!Pe&&!(Pe._compareAsJSON&&JSON.stringify($t)===JSON.stringify(Vt)))){var Gt=Pe.valType,Xt,sr=Wt(Pe),jt=Array.isArray($t),Ut=Array.isArray(Vt);if(jt&&Ut){var tr="_input_"+Ne,Ht=de[tr],lr=Me[tr];if(Array.isArray(Ht)&&Ht===lr)continue}if(Vt===void 0)sr&&jt?Ye.calc=!0:Nt();else if(Pe._isLinkedToArray){var yr=[],xr=!1;ut||(Ye.arrays[Ne]=yr);var er=Math.min($t.length,Vt.length),fe=Math.max($t.length,Vt.length);if(er!==fe)if(Pe.editType==="arraydraw")xr=!0;else{Nt();continue}for(Xt=0;Xt<er;Xt++)kt($t[Xt],Vt[Xt],Ft.concat(Xt),l.extendFlat({inArray:Ne,arrayIndex:Xt},Ee));if(xr)for(Xt=er;Xt<fe;Xt++)yr.push(Xt)}else!Gt&&l.isPlainObject($t)?kt($t,Vt,Ft,Ee):sr?jt&&Ut?(Be&&(Ye.calc=!0),(Be||Ee.newDataRevision)&&Nt()):jt!==Ut?Ye.calc=!0:Nt():jt&&Ut?($t.length!==Vt.length||String($t)!==String(Vt))&&Nt():Nt()}}}for(Ne in Me)if(!(Ne in de||Ne.charAt(0)==="_"||typeof Me[Ne]=="function"))if(Pe=nt(he.concat(Ne)),Wt(Pe)&&Array.isArray(Me[Ne])){Ye.calc=!0;return}else Nt()}function St(de,Me){var he;for(he in de)if(he.charAt(0)!=="_"){var Ee=de[he],Pe=Me[he];if(Ee!==Pe)if(l.isPlainObject(Ee)&&l.isPlainObject(Pe)){if(St(Ee,Pe))return!0}else if(Array.isArray(Ee)&&Array.isArray(Pe)){if(Ee.length!==Pe.length)return!0;for(var Ne=0;Ne<Ee.length;Ne++)if(Ee[Ne]!==Pe[Ne])if(l.isPlainObject(Ee[Ne])&&l.isPlainObject(Pe[Ne])){if(St(Ee[Ne],Pe[Ne]))return!0}else return!0}else return!0}}function Et(de,Me,he){if(de=l.getGraphDiv(de),!l.isPlotDiv(de))throw new Error("This element is not a Plotly plot: "+de+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ee=de._transitionData;Ee._frameQueue||(Ee._frameQueue=[]),he=y.supplyAnimationDefaults(he);var Pe=he.transition,Ne=he.frame;Ee._frameWaitingCnt===void 0&&(Ee._frameWaitingCnt=0);function ht(Be){return Array.isArray(Pe)?Be>=Pe.length?Pe[0]:Pe[Be]:Pe}function nt(Be){return Array.isArray(Ne)?Be>=Ne.length?Ne[0]:Ne[Be]:Ne}function Ye(Be,ut){var Dt=0;return function(){if(Be&&++Dt===ut)return Be()}}return new Promise(function(Be,ut){function Dt(){if(Ee._frameQueue.length!==0){for(;Ee._frameQueue.length;){var er=Ee._frameQueue.pop();er.onInterrupt&&er.onInterrupt()}de.emit("plotly_animationinterrupted",[])}}function Nt(er){if(er.length!==0){for(var fe=0;fe<er.length;fe++){var Q;er[fe].type==="byname"?Q=y.computeFrame(de,er[fe].name):Q=er[fe].data;var Je=nt(fe),Ge=ht(fe);Ge.duration=Math.min(Ge.duration,Je.duration);var Qe={frame:Q,name:er[fe].name,frameOpts:Je,transitionOpts:Ge};fe===er.length-1&&(Qe.onComplete=Ye(Be,2),Qe.onInterrupt=ut),Ee._frameQueue.push(Qe)}he.mode==="immediate"&&(Ee._lastFrameAt=-1/0),Ee._animationRaf||Vt()}}function Wt(){de.emit("plotly_animated"),window.cancelAnimationFrame(Ee._animationRaf),Ee._animationRaf=null}function $t(){Ee._currentFrame&&Ee._currentFrame.onComplete&&Ee._currentFrame.onComplete();var er=Ee._currentFrame=Ee._frameQueue.shift();if(er){var fe=er.name?er.name.toString():null;de._fullLayout._currentFrame=fe,Ee._lastFrameAt=Date.now(),Ee._timeToNext=er.frameOpts.duration,y.transition(de,er.frame.data,er.frame.layout,L.coerceTraceIndices(de,er.frame.traces),er.frameOpts,er.transitionOpts).then(function(){er.onComplete&&er.onComplete()}),de.emit("plotly_animatingframe",{name:fe,frame:er.frame,animation:{frame:er.frameOpts,transition:er.transitionOpts}})}else Wt()}function Vt(){de.emit("plotly_animating"),Ee._lastFrameAt=-1/0,Ee._timeToNext=0,Ee._runningTransitions=0,Ee._currentFrame=null;var er=function(){Ee._animationRaf=window.requestAnimationFrame(er),Date.now()-Ee._lastFrameAt>Ee._timeToNext&&$t()};er()}var Ft=0;function qt(er){return Array.isArray(Pe)?Ft>=Pe.length?er.transitionOpts=Pe[Ft]:er.transitionOpts=Pe[0]:er.transitionOpts=Pe,Ft++,er}var Gt,Xt,sr=[],jt=Me==null,Ut=Array.isArray(Me),tr=!jt&&!Ut&&l.isPlainObject(Me);if(tr)sr.push({type:"object",data:qt(l.extendFlat({},Me))});else if(jt||["string","number"].indexOf(typeof Me)!==-1)for(Gt=0;Gt<Ee._frames.length;Gt++)Xt=Ee._frames[Gt],Xt&&(jt||String(Xt.group)===String(Me))&&sr.push({type:"byname",name:String(Xt.name),data:qt({name:Xt.name})});else if(Ut)for(Gt=0;Gt<Me.length;Gt++){var Ht=Me[Gt];["number","string"].indexOf(typeof Ht)!==-1?(Ht=String(Ht),sr.push({type:"byname",name:Ht,data:qt({name:Ht})})):l.isPlainObject(Ht)&&sr.push({type:"object",data:qt(l.extendFlat({},Ht))})}for(Gt=0;Gt<sr.length;Gt++)if(Xt=sr[Gt],Xt.type==="byname"&&!Ee._frameHash[Xt.data.name]){l.warn('animate failure: frame not found: "'+Xt.data.name+'"'),ut();return}["next","immediate"].indexOf(he.mode)!==-1&&Dt(),he.direction==="reverse"&&sr.reverse();var lr=de._fullLayout._currentFrame;if(lr&&he.fromcurrent){var yr=-1;for(Gt=0;Gt<sr.length;Gt++)if(Xt=sr[Gt],Xt.type==="byname"&&Xt.name===lr){yr=Gt;break}if(yr>0&&yr<sr.length-1){var xr=[];for(Gt=0;Gt<sr.length;Gt++)Xt=sr[Gt],(sr[Gt].type!=="byname"||Gt>yr)&&xr.push(Xt);sr=xr}}sr.length>0?Nt(sr):(de.emit("plotly_animated"),Be())})}function Ue(de,Me,he){if(de=l.getGraphDiv(de),Me==null)return Promise.resolve();if(!l.isPlotDiv(de))throw new Error("This element is not a Plotly plot: "+de+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Ee,Pe,Ne,ht,nt=de._transitionData._frames,Ye=de._transitionData._frameHash;if(!Array.isArray(Me))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Me);var Be=nt.length+Me.length*2,ut=[],Dt={};for(Ee=Me.length-1;Ee>=0;Ee--)if(l.isPlainObject(Me[Ee])){var Nt=Me[Ee].name,Wt=(Ye[Nt]||Dt[Nt]||{}).name,$t=Me[Ee].name,Vt=Ye[Wt]||Dt[Wt];Wt&&$t&&typeof $t=="number"&&Vt&&V<X&&(V++,l.warn('addFrames: overwriting frame "'+(Ye[Wt]||Dt[Wt]).name+'" with a frame whose name of type "number" also equates to "'+Wt+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),V===X&&l.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Dt[Nt]={name:Nt},ut.push({frame:y.supplyFrameDefaults(Me[Ee]),index:he&&he[Ee]!==void 0&&he[Ee]!==null?he[Ee]:Be+Ee})}ut.sort(function(tr,Ht){return tr.index>Ht.index?-1:tr.index<Ht.index?1:0});var Ft=[],qt=[],Gt=nt.length;for(Ee=ut.length-1;Ee>=0;Ee--){if(Pe=ut[Ee].frame,typeof Pe.name=="number"&&l.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Pe.name)for(;Ye[Pe.name="frame "+de._transitionData._counter++];);if(Ye[Pe.name]){for(Ne=0;Ne<nt.length&&(nt[Ne]||{}).name!==Pe.name;Ne++);Ft.push({type:"replace",index:Ne,value:Pe}),qt.unshift({type:"replace",index:Ne,value:nt[Ne]})}else ht=Math.max(0,Math.min(ut[Ee].index,Gt)),Ft.push({type:"insert",index:ht,value:Pe}),qt.unshift({type:"delete",index:ht}),Gt++}var Xt=y.modifyFrames,sr=y.modifyFrames,jt=[de,qt],Ut=[de,Ft];return d&&d.add(de,Xt,jt,sr,Ut),y.modifyFrames(de,Ft)}function De(de,Me){if(de=l.getGraphDiv(de),!l.isPlotDiv(de))throw new Error("This element is not a Plotly plot: "+de);var he,Ee,Pe=de._transitionData._frames,Ne=[],ht=[];if(!Me)for(Me=[],he=0;he<Pe.length;he++)Me.push(he);for(Me=Me.slice(),Me.sort(),he=Me.length-1;he>=0;he--)Ee=Me[he],Ne.push({type:"delete",index:Ee}),ht.unshift({type:"insert",index:Ee,value:Pe[Ee]});var nt=y.modifyFrames,Ye=y.modifyFrames,Be=[de,ht],ut=[de,Ne];return d&&d.add(de,nt,Be,Ye,ut),y.modifyFrames(de,Ne)}function Ie(de){de=l.getGraphDiv(de);var Me=de._fullLayout||{},he=de._fullData||[];return y.cleanPlot([],{},he,Me),y.purge(de),v.purge(de),Me._container&&Me._container.remove(),delete de._context,de}function Fe(de){var Me=de._fullLayout,he=de.getBoundingClientRect();if(!l.equalDomRects(he,Me._lastBBox)){var Ee=Me._invTransform=l.inverseTransformMatrix(l.getFullTransformMatrix(de));Me._invScaleX=Math.sqrt(Ee[0][0]*Ee[0][0]+Ee[0][1]*Ee[0][1]+Ee[0][2]*Ee[0][2]),Me._invScaleY=Math.sqrt(Ee[1][0]*Ee[1][0]+Ee[1][1]*Ee[1][1]+Ee[1][2]*Ee[1][2]),Me._lastBBox=he}}function We(de){var Me=i.select(de),he=de._fullLayout;if(he._calcInverseTransform=Fe,he._calcInverseTransform(de),he._container=Me.selectAll(".plot-container").data([0]),he._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),he._paperdiv=he._container.selectAll(".svg-container").data([0]),he._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),he._glcontainer=he._paperdiv.selectAll(".gl-container").data([{}]),he._glcontainer.enter().append("div").classed("gl-container",!0),he._paperdiv.selectAll(".main-svg").remove(),he._paperdiv.select(".modebar-container").remove(),he._paper=he._paperdiv.insert("svg",":first-child").classed("main-svg",!0),he._toppaper=he._paperdiv.append("svg").classed("main-svg",!0),he._modebardiv=he._paperdiv.append("div"),delete he._modeBar,he._hoverpaper=he._paperdiv.append("svg").classed("main-svg",!0),!he._uid){var Ee={};i.selectAll("defs").each(function(){this.id&&(Ee[this.id.split("-")[1]]=1)}),he._uid=l.randstr(Ee)}he._paperdiv.selectAll(".main-svg").attr(R.svgAttrs),he._defs=he._paper.append("defs").attr("id","defs-"+he._uid),he._clips=he._defs.append("g").classed("clips",!0),he._topdefs=he._toppaper.append("defs").attr("id","topdefs-"+he._uid),he._topclips=he._topdefs.append("g").classed("clips",!0),he._bgLayer=he._paper.append("g").classed("bglayer",!0),he._draggers=he._paper.append("g").classed("draglayer",!0);var Pe=he._paper.append("g").classed("layer-below",!0);he._imageLowerLayer=Pe.append("g").classed("imagelayer",!0),he._shapeLowerLayer=Pe.append("g").classed("shapelayer",!0),he._cartesianlayer=he._paper.append("g").classed("cartesianlayer",!0),he._polarlayer=he._paper.append("g").classed("polarlayer",!0),he._smithlayer=he._paper.append("g").classed("smithlayer",!0),he._ternarylayer=he._paper.append("g").classed("ternarylayer",!0),he._geolayer=he._paper.append("g").classed("geolayer",!0),he._funnelarealayer=he._paper.append("g").classed("funnelarealayer",!0),he._pielayer=he._paper.append("g").classed("pielayer",!0),he._iciclelayer=he._paper.append("g").classed("iciclelayer",!0),he._treemaplayer=he._paper.append("g").classed("treemaplayer",!0),he._sunburstlayer=he._paper.append("g").classed("sunburstlayer",!0),he._indicatorlayer=he._toppaper.append("g").classed("indicatorlayer",!0),he._glimages=he._paper.append("g").classed("glimages",!0);var Ne=he._toppaper.append("g").classed("layer-above",!0);he._imageUpperLayer=Ne.append("g").classed("imagelayer",!0),he._shapeUpperLayer=Ne.append("g").classed("shapelayer",!0),he._selectionLayer=he._toppaper.append("g").classed("selectionlayer",!0),he._infolayer=he._toppaper.append("g").classed("infolayer",!0),he._menulayer=he._toppaper.append("g").classed("menulayer",!0),he._zoomlayer=he._toppaper.append("g").classed("zoomlayer",!0),he._hoverlayer=he._hoverpaper.append("g").classed("hoverlayer",!0),he._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),de.emit("plotly_framework")}u.animate=Et,u.addFrames=Ue,u.deleteFrames=De,u.addTraces=ye,u.deleteTraces=U,u.extendTraces=ce,u.moveTraces=W,u.prependTraces=pe,u.newPlot=G,u._doPlot=k,u.purge=Ie,u.react=Mt,u.redraw=Y,u.relayout=ve,u.restyle=j,u.setPlotConfig=B,u.update=we,u._guiRelayout=be(ve),u._guiRestyle=be(j),u._guiUpdate=be(we),u._storeDirectGUIEdit=z},556:function(f){var u={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},r={};function i(c,a){for(var l in c){var s=c[l];s.valType?a[l]=s.dflt:(a[l]||(a[l]={}),i(s,a[l]))}}i(u,r),f.exports={configAttributes:u,dfltConfig:r}},3060:function(f,u,r){var i=r(4040),c=r(3400),a=r(5464),l=r(4859),s=r(6672),v=r(5656),d=r(556).configAttributes,p=r(7824),o=c.extendDeepAll,y=c.isPlainObject,_=c.isArrayOrTypedArray,E=c.nestedProperty,M=c.valObjectMeta,b="_isSubplotObj",w="_isLinkedToArray",A="_arrayAttrRegexps",R="_deprecated",T=[b,w,A,R];u.IS_SUBPLOT_OBJ=b,u.IS_LINKED_TO_ARRAY=w,u.DEPRECATED=R,u.UNDERSCORE_ATTRS=T,u.get=function(){var oe={};i.allTypes.forEach(function(G){oe[G]=D(G)});var Y={};return Object.keys(i.transformsRegistry).forEach(function(G){Y[G]=N(G)}),{defs:{valObjects:M,metaKeys:T.concat(["description","role","editType","impliedEdits"]),editType:{traces:p.traces,layout:p.layout},impliedEdits:{}},traces:oe,layout:O(),transforms:Y,frames:V(),animation:X(v),config:X(d)}},u.crawl=function(oe,Y,G,K){var ee=G||0;K=K||"",Object.keys(oe).forEach(function(ie){var re=oe[ie];if(T.indexOf(ie)===-1){var se=(K?K+".":"")+ie;Y(re,ie,oe,ee,se),!u.isValObject(re)&&y(re)&&ie!=="impliedEdits"&&u.crawl(re,Y,ee+1,se)}})},u.isValObject=function(oe){return oe&&oe.valType!==void 0},u.findArrayAttributes=function(oe){var Y=[],G=[],K=[],ee,ie;function re(pe,ye,U,W){G=G.slice(0,W).concat([ye]),K=K.slice(0,W).concat([pe&&pe._isLinkedToArray]);var j=pe&&(pe.valType==="data_array"||pe.arrayOk===!0)&&!(G[W-1]==="colorbar"&&(ye==="ticktext"||ye==="tickvals"));j&&se(ee,0,"")}function se(pe,ye,U){var W=pe[G[ye]],j=U+G[ye];if(ye===G.length-1)_(W)&&Y.push(ie+j);else if(K[ye]){if(Array.isArray(W))for(var F=0;F<W.length;F++)y(W[F])&&se(W[F],ye+1,j+"["+F+"].")}else y(W)&&se(W,ye+1,j+".")}ee=oe,ie="",u.crawl(a,re),oe._module&&oe._module.attributes&&u.crawl(oe._module.attributes,re);var ge=oe.transforms;if(ge)for(var xe=0;xe<ge.length;xe++){var Se=ge[xe],ce=Se._module;ce&&(ie="transforms["+xe+"].",ee=Se,u.crawl(ce.attributes,re))}return Y},u.getTraceValObject=function(oe,Y){var G=Y[0],K=1,ee,ie;if(G==="transforms"){if(Y.length===1)return a.transforms;var re=oe.transforms;if(!Array.isArray(re)||!re.length)return!1;var se=Y[1];if(!L(se)||se>=re.length)return!1;ee=(i.transformsRegistry[re[se].type]||{}).attributes,ie=ee&&ee[Y[2]],K=3}else{var ge=oe._module;if(ge||(ge=(i.modules[oe.type||a.type.dflt]||{})._module),!ge)return!1;if(ee=ge.attributes,ie=ee&&ee[G],!ie){var xe=ge.basePlotModule;xe&&xe.attributes&&(ie=xe.attributes[G])}ie||(ie=a[G])}return m(ie,Y,K)},u.getLayoutValObject=function(oe,Y){var G=C(oe,Y[0]);return m(G,Y,1)};function C(oe,Y){var G,K,ee,ie,re=oe._basePlotModules;if(re){var se;for(G=0;G<re.length;G++){if(ee=re[G],ee.attrRegex&&ee.attrRegex.test(Y)){if(ee.layoutAttrOverrides)return ee.layoutAttrOverrides;!se&&ee.layoutAttributes&&(se=ee.layoutAttributes)}var ge=ee.baseLayoutAttrOverrides;if(ge&&Y in ge)return ge[Y]}if(se)return se}var xe=oe._modules;if(xe){for(G=0;G<xe.length;G++)if(ie=xe[G].layoutAttributes,ie&&Y in ie)return ie[Y]}for(K in i.componentsRegistry){if(ee=i.componentsRegistry[K],ee.name==="colorscale"&&Y.indexOf("coloraxis")===0)return ee.layoutAttributes[Y];if(!ee.schema&&Y===ee.name)return ee.layoutAttributes}return Y in l?l[Y]:!1}function m(oe,Y,G){if(!oe)return!1;if(oe._isLinkedToArray){if(L(Y[G]))G++;else if(G<Y.length)return!1}for(;G<Y.length;G++){var K=oe[Y[G]];if(y(K))oe=K;else break;if(G===Y.length-1)break;if(oe._isLinkedToArray){if(G++,!L(Y[G]))return!1}else if(oe.valType==="info_array"){G++;var ee=Y[G];if(!L(ee))return!1;var ie=oe.items;if(Array.isArray(ie)){if(ee>=ie.length)return!1;if(oe.dimensions===2){if(G++,Y.length===G)return oe;var re=Y[G];if(!L(re))return!1;oe=ie[ee][re]}else oe=ie[ee]}else oe=ie}}return oe}function L(oe){return oe===Math.round(oe)&&oe>=0}function D(oe){var Y,G;Y=i.modules[oe]._module,G=Y.basePlotModule;var K={};K.type=null;var ee=o({},a),ie=o({},Y.attributes);u.crawl(ie,function(ge,xe,Se,ce,pe){E(ee,pe).set(void 0),ge===void 0&&E(ie,pe).set(void 0)}),o(K,ee),i.traceIs(oe,"noOpacity")&&delete K.opacity,i.traceIs(oe,"showLegend")||(delete K.showlegend,delete K.legendgroup),i.traceIs(oe,"noHover")&&(delete K.hoverinfo,delete K.hoverlabel),Y.selectPoints||delete K.selectedpoints,o(K,ie),G.attributes&&o(K,G.attributes),K.type=oe;var re={meta:Y.meta||{},categories:Y.categories||{},animatable:!!Y.animatable,type:oe,attributes:X(K)};if(Y.layoutAttributes){var se={};o(se,Y.layoutAttributes),re.layoutAttributes=X(se)}return Y.animatable||u.crawl(re,function(ge){u.isValObject(ge)&&"anim"in ge&&delete ge.anim}),re}function O(){var oe={},Y,G;o(oe,l);for(Y in i.subplotsRegistry)if(G=i.subplotsRegistry[Y],!!G.layoutAttributes)if(Array.isArray(G.attr))for(var K=0;K<G.attr.length;K++)J(oe,G,G.attr[K]);else{var ee=G.attr==="subplot"?G.name:G.attr;J(oe,G,ee)}for(Y in i.componentsRegistry){G=i.componentsRegistry[Y];var ie=G.schema;if(ie&&(ie.subplots||ie.layout)){var re=ie.subplots;if(re&&re.xaxis&&!re.yaxis)for(var se in re.xaxis)delete oe.yaxis[se];delete oe.xaxis.shift,delete oe.xaxis.autoshift}else G.name==="colorscale"?o(oe,G.layoutAttributes):G.layoutAttributes&&ne(oe,G.layoutAttributes,G.name)}return{layoutAttributes:X(oe)}}function N(oe){var Y=i.transformsRegistry[oe],G=o({},Y.attributes);return Object.keys(i.componentsRegistry).forEach(function(K){var ee=i.componentsRegistry[K];ee.schema&&ee.schema.transforms&&ee.schema.transforms[oe]&&Object.keys(ee.schema.transforms[oe]).forEach(function(ie){ne(G,ee.schema.transforms[oe][ie],ie)})}),{attributes:X(G)}}function V(){var oe={frames:o({},s)};return X(oe),oe.frames}function X(oe){return k(oe),Z(oe),B(oe),oe}function k(oe){function Y(K){return{valType:"string",editType:"none"}}function G(K,ee,ie){u.isValObject(K)?(K.arrayOk===!0||K.valType==="data_array")&&(ie[ee+"src"]=Y()):y(K)&&(K.role="object")}u.crawl(oe,G)}function Z(oe){function Y(G,K,ee){if(G){var ie=G[w];ie&&(delete G[w],ee[K]={items:{}},ee[K].items[ie]=G,ee[K].role="object")}}u.crawl(oe,Y)}function B(oe){function Y(G){for(var K in G)if(y(G[K]))Y(G[K]);else if(Array.isArray(G[K]))for(var ee=0;ee<G[K].length;ee++)Y(G[K][ee]);else G[K]instanceof RegExp&&(G[K]=G[K].toString())}Y(oe)}function J(oe,Y,G){var K=E(oe,G),ee=o({},Y.layoutAttributes);ee[b]=!0,K.set(ee)}function ne(oe,Y,G){var K=E(oe,G);K.set(o(K.get()||{},Y))}},1780:function(f,u,r){var i=r(3400),c=r(5464),a="templateitemname",l={name:{valType:"string",editType:"none"}};l[a]={valType:"string",editType:"calc"},u.templatedArray=function(d,p){return p._isLinkedToArray=d,p.name=l.name,p[a]=l[a],p},u.traceTemplater=function(d){var p={},o,y;for(o in d)y=d[o],Array.isArray(y)&&y.length&&(p[o]=0);function _(E){o=i.coerce(E,{},c,"type");var M={type:o,_template:null};if(o in p){y=d[o];var b=p[o]%y.length;p[o]++,M._template=y[b]}return M}return{newTrace:_}},u.newContainer=function(d,p,o){var y=d._template,_=y&&(y[p]||o&&y[o]);i.isPlainObject(_)||(_=null);var E=d[p]={_template:_};return E},u.arrayTemplater=function(d,p,o){var y=d._template,_=y&&y[v(p)],E=y&&y[p];(!Array.isArray(E)||!E.length)&&(E=[]);var M={};function b(A){var R={name:A.name,_input:A},T=R[a]=A[a];if(!s(T))return R._template=_,R;for(var C=0;C<E.length;C++){var m=E[C];if(m.name===T)return M[T]=1,R._template=m,R}return R[o]=A[o]||!1,R._template=!1,R}function w(){for(var A=[],R=0;R<E.length;R++){var T=E[R],C=T.name;if(s(C)&&!M[C]){var m={_template:T,name:C,_input:{_templateitemname:C}};m[a]=T[a],A.push(m),M[C]=1}}return A}return{newItem:b,defaultItems:w}};function s(d){return d&&typeof d=="string"}function v(d){var p=d.length-1;return d.charAt(p)!=="s"&&i.warn("bad argument to arrayDefaultKey: "+d),d.substr(0,d.length-1)+"defaults"}u.arrayDefaultKey=v,u.arrayEditor=function(d,p,o){var y=(i.nestedProperty(d,p).get()||[]).length,_=o._index,E=_>=y&&(o._input||{})._templateitemname;E&&(_=y);var M=p+"["+_+"]",b;function w(){b={},E&&(b[M]={},b[M][a]=E)}w();function A(m,L){b[m]=L}function R(m,L){E?i.nestedProperty(b[M],m).set(L):b[M+"."+m]=L}function T(){var m=b;return w(),m}function C(m,L){m&&R(m,L);var D=T();for(var O in D)i.nestedProperty(d,O).set(D[O])}return{modifyBase:A,modifyItem:R,getUpdateObj:T,applyUpdate:C}}},9172:function(f,u,r){var i=r(3428),c=r(4040),a=r(7316),l=r(3400),s=r(2736),v=r(3696),d=r(6308),p=r(3616),o=r(1668),y=r(3080),_=r(4460),E=r(4284),M=r(1888),b=M.enforce,w=M.clean,A=r(9280).doAutoRange,R="start",T="middle",C="end";u.layoutStyles=function(G){return l.syncOrAsync([a.doAutoMargin,L],G)};function m(G,K,ee){for(var ie=0;ie<ee.length;ie++){var re=ee[ie][0],se=ee[ie][1];if(!(re[0]>=G[1]||re[1]<=G[0])&&se[0]<K[1]&&se[1]>K[0])return!0}return!1}function L(G){var K=G._fullLayout,ee=K._size,ie=ee.p,re=_.list(G,"",!0),se,ge,xe,Se,ce,pe;if(K._paperdiv.style({width:G._context.responsive&&K.autosize&&!G._context._hasZeroWidth&&!G.layout.width?"100%":K.width+"px",height:G._context.responsive&&K.autosize&&!G._context._hasZeroHeight&&!G.layout.height?"100%":K.height+"px"}).selectAll(".main-svg").call(p.setSize,K.width,K.height),G._context.setBackground(G,K.paper_bgcolor),u.drawMainTitle(G),y.manage(G),!K._has("cartesian"))return a.previousPromises(G);function ye(Ie,Fe,We){var de=Ie._lw/2;if(Ie._id.charAt(0)==="x"){if(Fe){if(We==="top")return Fe._offset-ie-de}else return ee.t+ee.h*(1-(Ie.position||0))+de%1;return Fe._offset+Fe._length+ie+de}if(Fe){if(We==="right")return Fe._offset+Fe._length+ie+de}else return ee.l+ee.w*(Ie.position||0)+de%1;return Fe._offset-ie-de}for(se=0;se<re.length;se++){Se=re[se];var U=Se._anchorAxis;Se._linepositions={},Se._lw=p.crispRound(G,Se.linewidth,1),Se._mainLinePosition=ye(Se,U,Se.side),Se._mainMirrorPosition=Se.mirror&&U?ye(Se,U,E.OPPOSITE_SIDE[Se.side]):null}var W=[],j=[],F=[],P=d.opacity(K.paper_bgcolor)===1&&d.opacity(K.plot_bgcolor)===1&&K.paper_bgcolor===K.plot_bgcolor;for(ge in K._plots)if(xe=K._plots[ge],xe.mainplot)xe.bg&&xe.bg.remove(),xe.bg=void 0;else{var q=xe.xaxis.domain,z=xe.yaxis.domain,te=xe.plotgroup;if(m(q,z,F)){var ue=te.node(),ve=xe.bg=l.ensureSingle(te,"rect","bg");ue.insertBefore(ve.node(),ue.childNodes[0]),j.push(ge)}else te.select("rect.bg").remove(),F.push([q,z]),P||(W.push(ge),j.push(ge))}var _e=K._bgLayer.selectAll(".bg").data(W);for(_e.enter().append("rect").classed("bg",!0),_e.exit().remove(),_e.each(function(Ie){K._plots[Ie].bg=i.select(this)}),se=0;se<j.length;se++)xe=K._plots[j[se]],ce=xe.xaxis,pe=xe.yaxis,xe.bg&&ce._offset!==void 0&&pe._offset!==void 0&&xe.bg.call(p.setRect,ce._offset-ie,pe._offset-ie,ce._length+2*ie,pe._length+2*ie).call(d.fill,K.plot_bgcolor).style("stroke-width",0);if(!K._hasOnlyLargeSploms)for(ge in K._plots){xe=K._plots[ge],ce=xe.xaxis,pe=xe.yaxis;var Re=xe.clipId="clip"+K._uid+ge+"plot",Le=l.ensureSingleById(K._clips,"clipPath",Re,function(Ie){Ie.classed("plotclip",!0).append("rect")});xe.clipRect=Le.select("rect").attr({width:ce._length,height:pe._length}),p.setTranslate(xe.plot,ce._offset,pe._offset);var Ve,Xe;xe._hasClipOnAxisFalse?(Ve=null,Xe=Re):(Ve=Re,Xe=null),p.setClipUrl(xe.plot,Ve,G),xe.layerClipId=Xe}var Ze,Te,we,be,ke,He,Ke,st,vt,pt,ft,lt,Mt;function ot(Ie){return"M"+Ze+","+Ie+"H"+Te}function Ct(Ie){return"M"+ce._offset+","+Ie+"h"+ce._length}function kt(Ie){return"M"+Ie+","+st+"V"+Ke}function St(Ie){return pe._shift!==void 0&&(Ie+=pe._shift),"M"+Ie+","+pe._offset+"v"+pe._length}function Et(Ie,Fe,We){if(!Ie.showline||ge!==Ie._mainSubplot)return"";if(!Ie._anchorAxis)return We(Ie._mainLinePosition);var de=Fe(Ie._mainLinePosition);return Ie.mirror&&(de+=Fe(Ie._mainMirrorPosition)),de}for(ge in K._plots){xe=K._plots[ge],ce=xe.xaxis,pe=xe.yaxis;var Ue="M0,0";D(ce,ge)&&(ke=N(ce,"left",pe,re),Ze=ce._offset-(ke?ie+ke:0),He=N(ce,"right",pe,re),Te=ce._offset+ce._length+(He?ie+He:0),we=ye(ce,pe,"bottom"),be=ye(ce,pe,"top"),Mt=!ce._anchorAxis||ge!==ce._mainSubplot,Mt&&(ce.mirror==="allticks"||ce.mirror==="all")&&(ce._linepositions[ge]=[we,be]),Ue=Et(ce,ot,Ct),Mt&&ce.showline&&(ce.mirror==="all"||ce.mirror==="allticks")&&(Ue+=ot(we)+ot(be)),xe.xlines.style("stroke-width",ce._lw+"px").call(d.stroke,ce.showline?ce.linecolor:"rgba(0,0,0,0)")),xe.xlines.attr("d",Ue);var De="M0,0";D(pe,ge)&&(ft=N(pe,"bottom",ce,re),Ke=pe._offset+pe._length+(ft?ie:0),lt=N(pe,"top",ce,re),st=pe._offset-(lt?ie:0),vt=ye(pe,ce,"left"),pt=ye(pe,ce,"right"),Mt=!pe._anchorAxis||ge!==pe._mainSubplot,Mt&&(pe.mirror==="allticks"||pe.mirror==="all")&&(pe._linepositions[ge]=[vt,pt]),De=Et(pe,kt,St),Mt&&pe.showline&&(pe.mirror==="all"||pe.mirror==="allticks")&&(De+=kt(vt)+kt(pt)),xe.ylines.style("stroke-width",pe._lw+"px").call(d.stroke,pe.showline?pe.linecolor:"rgba(0,0,0,0)")),xe.ylines.attr("d",De)}return _.makeClipPaths(G),a.previousPromises(G)}function D(G,K){return(G.ticks||G.showline)&&(K===G._mainSubplot||G.mirror==="all"||G.mirror==="allticks")}function O(G,K,ee){if(!ee.showline||!ee._lw)return!1;if(ee.mirror==="all"||ee.mirror==="allticks")return!0;var ie=ee._anchorAxis;if(!ie)return!1;var re=E.FROM_BL[K];return ee.side===K?ie.domain[re]===G.domain[re]:ee.mirror&&ie.domain[1-re]===G.domain[1-re]}function N(G,K,ee,ie){if(O(G,K,ee))return ee._lw;for(var re=0;re<ie.length;re++){var se=ie[re];if(se._mainAxis===ee._mainAxis&&O(G,K,se))return se._lw}return 0}u.drawMainTitle=function(G){var K=G._fullLayout.title,ee=G._fullLayout,ie=oe(ee),re=Y(ee),se=J(ee,re),ge=B(ee,ie);if(o.draw(G,"gtitle",{propContainer:ee,propName:"title.text",placeholder:ee._dfltTitle.plot,attributes:{x:ge,y:se,"text-anchor":ie,dy:re}}),K.text&&K.automargin){var xe=i.selectAll(".gtitle"),Se=p.bBox(xe.node()).height,ce=k(G,K,Se);if(ce>0){Z(G,se,ce,Se),xe.attr({x:ge,y:se,"text-anchor":ie,dy:ne(K.yanchor)}).call(s.positionText,ge,se);var pe=(K.text.match(s.BR_TAG_ALL)||[]).length;if(pe){var ye=E.LINE_SPACING*pe+E.MID_SHIFT;K.y===0&&(ye=-ye),xe.selectAll(".line").each(function(){var U=+this.getAttribute("dy").slice(0,-2)-ye+"em";this.setAttribute("dy",U)})}}}};function V(G,K,ee,ie,re){var se=K.yref==="paper"?G._fullLayout._size.h:G._fullLayout.height,ge=l.isTopAnchor(K)?ie:ie-re,xe=ee==="b"?se-ge:ge;return l.isTopAnchor(K)&&ee==="t"||l.isBottomAnchor(K)&&ee==="b"?!1:xe<re}function X(G,K,ee,ie,re){var se=0;return ee==="middle"&&(se+=re/2),G==="t"?(ee==="top"&&(se+=re),se+=ie-K*ie):(ee==="bottom"&&(se+=re),se+=K*ie),se}function k(G,K,ee){var ie=K.y,re=K.yanchor,se=ie>.5?"t":"b",ge=G._fullLayout.margin[se],xe=0;return K.yref==="paper"?xe=ee+K.pad.t+K.pad.b:K.yref==="container"&&(xe=X(se,ie,re,G._fullLayout.height,ee)+K.pad.t+K.pad.b),xe>ge?xe:0}function Z(G,K,ee,ie){var re="title.automargin",se=G._fullLayout.title,ge=se.y>.5?"t":"b",xe={x:se.x,y:se.y,t:0,b:0},Se={};se.yref==="paper"&&V(G,se,ge,K,ie)?xe[ge]=ee:se.yref==="container"&&(Se[ge]=ee,G._fullLayout._reservedMargin[re]=Se),a.allowAutoMargin(G,re),a.autoMargin(G,re,xe)}function B(G,K){var ee=G.title,ie=G._size,re=0;switch(K===R?re=ee.pad.l:K===C&&(re=-ee.pad.r),ee.xref){case"paper":return ie.l+ie.w*ee.x+re;case"container":default:return G.width*ee.x+re}}function J(G,K){var ee=G.title,ie=G._size,re=0;if(K==="0em"||!K?re=-ee.pad.b:K===E.CAP_SHIFT+"em"&&(re=ee.pad.t),ee.y==="auto")return ie.t/2;switch(ee.yref){case"paper":return ie.t+ie.h-ie.h*ee.y+re;case"container":default:return G.height-G.height*ee.y+re}}function ne(G){return G==="top"?E.CAP_SHIFT+.3+"em":G==="bottom"?"-0.3em":E.MID_SHIFT+"em"}function oe(G){var K=G.title,ee=T;return l.isRightAnchor(K)?ee=C:l.isLeftAnchor(K)&&(ee=R),ee}function Y(G){var K=G.title,ee="0em";return l.isTopAnchor(K)?ee=E.CAP_SHIFT+"em":l.isMiddleAnchor(K)&&(ee=E.MID_SHIFT+"em"),ee}u.doTraceStyle=function(G){var K=G.calcdata,ee=[],ie;for(ie=0;ie<K.length;ie++){var re=K[ie],se=re[0]||{},ge=se.trace||{},xe=ge._module||{},Se=xe.arraysToCalcdata;Se&&Se(re,ge);var ce=xe.editStyle;ce&&ee.push({fn:ce,cd0:se})}if(ee.length){for(ie=0;ie<ee.length;ie++){var pe=ee[ie];pe.fn(G,pe.cd0)}v(G),u.redrawReglTraces(G)}return a.style(G),c.getComponentMethod("legend","draw")(G),a.previousPromises(G)},u.doColorBars=function(G){return c.getComponentMethod("colorbar","draw")(G),a.previousPromises(G)},u.layoutReplot=function(G){var K=G.layout;return G.layout=void 0,c.call("_doPlot",G,"",K)},u.doLegend=function(G){return c.getComponentMethod("legend","draw")(G),a.previousPromises(G)},u.doTicksRelayout=function(G){return _.draw(G,"redraw"),G._fullLayout._hasOnlyLargeSploms&&(c.subplotsRegistry.splom.updateGrid(G),v(G),u.redrawReglTraces(G)),u.drawMainTitle(G),a.previousPromises(G)},u.doModeBar=function(G){var K=G._fullLayout;y.manage(G);for(var ee=0;ee<K._basePlotModules.length;ee++){var ie=K._basePlotModules[ee].updateFx;ie&&ie(G)}return a.previousPromises(G)},u.doCamera=function(G){for(var K=G._fullLayout,ee=K._subplots.gl3d,ie=0;ie<ee.length;ie++){var re=K[ee[ie]],se=re._scene;se.setViewport(re)}},u.drawData=function(G){var K=G._fullLayout;v(G);for(var ee=K._basePlotModules,ie=0;ie<ee.length;ie++)ee[ie].plot(G);return u.redrawReglTraces(G),a.style(G),c.getComponentMethod("selections","draw")(G),c.getComponentMethod("shapes","draw")(G),c.getComponentMethod("annotations","draw")(G),c.getComponentMethod("images","draw")(G),K._replotting=!1,a.previousPromises(G)},u.redrawReglTraces=function(G){var K=G._fullLayout;if(K._has("regl")){var ee=G._fullData,ie=[],re=[],se,ge;for(K._hasOnlyLargeSploms&&K._splomGrid.draw(),se=0;se<ee.length;se++){var xe=ee[se];xe.visible===!0&&xe._length!==0&&(xe.type==="splom"?K._splomScenes[xe.uid].draw():xe.type==="scattergl"?l.pushUnique(ie,xe.xaxis+xe.yaxis):xe.type==="scatterpolargl"&&l.pushUnique(re,xe.subplot))}for(se=0;se<ie.length;se++)ge=K._plots[ie[se]],ge._scene&&ge._scene.draw();for(se=0;se<re.length;se++)ge=K[re[se]]._subplot,ge._scene&&ge._scene.draw()}},u.doAutoRangeAndConstraints=function(G){for(var K=_.list(G,"",!0),ee,ie={},re=0;re<K.length;re++)if(ee=K[re],!ie[ee._id]){ie[ee._id]=1,w(G,ee),A(G,ee);var se=ee._matchGroup;if(se)for(var ge in se){var xe=_.getFromId(G,ge);A(G,xe,ee.range),ie[ge]=1}}b(G)},u.finalDraw=function(G){c.getComponentMethod("rangeslider","draw")(G),c.getComponentMethod("rangeselector","draw")(G)},u.drawMarginPushers=function(G){c.getComponentMethod("legend","draw")(G),c.getComponentMethod("rangeselector","draw")(G),c.getComponentMethod("sliders","draw")(G),c.getComponentMethod("updatemenus","draw")(G),c.getComponentMethod("colorbar","draw")(G)}},4828:function(f,u,r){var i=r(3400),c=i.isPlainObject,a=r(3060),l=r(7316),s=r(5464),v=r(1780),d=r(556).dfltConfig;u.makeTemplate=function(A){A=i.isPlainObject(A)?A:i.getGraphDiv(A),A=i.extendDeep({_context:d},{data:A.data,layout:A.layout}),l.supplyDefaults(A);var R=A.data||[],T=A.layout||{};T._basePlotModules=A._fullLayout._basePlotModules,T._modules=A._fullLayout._modules;var C={data:{},layout:{}};R.forEach(function(B){var J={};y(B,J,E.bind(null,B));var ne=i.coerce(B,{},s,"type"),oe=C.data[ne];oe||(oe=C.data[ne]=[]),oe.push(J)}),y(T,C.layout,_.bind(null,T)),delete C.layout.template;var m=T.template;if(c(m)){var L=m.layout,D,O,N,V,X,k;c(L)&&p(L,C.layout);var Z=m.data;if(c(Z)){for(O in C.data)if(N=Z[O],Array.isArray(N)){for(X=C.data[O],k=X.length,V=N.length,D=0;D<k;D++)p(N[D%V],X[D]);for(D=k;D<V;D++)X.push(i.extendDeep({},N[D]))}for(O in Z)O in C.data||(C.data[O]=i.extendDeep([],Z[O]))}}return C};function p(A,R){A=i.extendDeep({},A);var T=Object.keys(A).sort(),C,m;function L(X,k,Z){if(c(k)&&c(X))p(X,k);else if(Array.isArray(k)&&Array.isArray(X)){var B=v.arrayTemplater({_template:A},Z);for(m=0;m<k.length;m++){var J=k[m],ne=B.newItem(J)._template;ne&&p(ne,J)}var oe=B.defaultItems();for(m=0;m<oe.length;m++)k.push(oe[m]._template);for(m=0;m<k.length;m++)delete k[m].templateitemname}}for(C=0;C<T.length;C++){var D=T[C],O=A[D];if(D in R?L(O,R[D],D):R[D]=O,o(D)===D)for(var N in R){var V=o(N);N!==V&&V===D&&!(N in A)&&L(O,R[N],D)}}}function o(A){return A.replace(/[0-9]+$/,"")}function y(A,R,T,C,m){var L=m&&T(m);for(var D in A){var O=A[D],N=M(A,D,C),V=M(A,D,m),X=T(V);if(!X){var k=o(D);k!==D&&(V=M(A,k,m),X=T(V))}if(!(L&&L===X)&&!(!X||X._noTemplating||X.valType==="data_array"||X.arrayOk&&Array.isArray(O)))if(!X.valType&&c(O))y(O,R,T,N,V);else if(X._isLinkedToArray&&Array.isArray(O))for(var Z=!1,B=0,J={},ne=0;ne<O.length;ne++){var oe=O[ne];if(c(oe)){var Y=oe.name;if(Y)J[Y]||(y(oe,R,T,M(O,B,N),M(O,B,V)),B++,J[Y]=1);else if(!Z){var G=v.arrayDefaultKey(D),K=M(A,G,C),ee=M(O,B,N);y(oe,R,T,ee,M(O,B,V));var ie=i.nestedProperty(R,ee),re=i.nestedProperty(R,K);re.set(ie.get()),ie.set(null),Z=!0}}}else{var se=i.nestedProperty(R,N);se.set(O)}}}function _(A,R){return a.getLayoutValObject(A,i.nestedProperty({},R).parts)}function E(A,R){return a.getTraceValObject(A,i.nestedProperty({},R).parts)}function M(A,R,T){var C;return T?Array.isArray(A)?C=T+"["+R+"]":C=T+"."+R:C=R,C}u.validateTemplate=function(A,R){var T=i.extendDeep({},{_context:d,data:A.data,layout:A.layout}),C=T.layout||{};c(R)||(R=C.template||{});var m=R.layout,L=R.data,D=[];T.layout=C,T.layout.template=R,l.supplyDefaults(T);var O=T._fullLayout,N=T._fullData,V={};function X(K,ee){for(var ie in K)if(ie.charAt(0)!=="_"&&c(K[ie])){var re=o(ie),se=[],ge;for(ge=0;ge<ee.length;ge++)se.push(M(K,ie,ee[ge])),re!==ie&&se.push(M(K,re,ee[ge]));for(ge=0;ge<se.length;ge++)V[se[ge]]=1;X(K[ie],se)}}function k(K,ee){for(var ie in K)if(ie.indexOf("defaults")===-1&&c(K[ie])){var re=M(K,ie,ee);V[re]?k(K[ie],re):D.push({code:"unused",path:re})}}if(c(m)?(X(O,["layout"]),k(m,"layout")):D.push({code:"layout"}),!c(L))D.push({code:"data"});else{for(var Z={},B,J=0;J<N.length;J++){var ne=N[J];B=ne.type,Z[B]=(Z[B]||0)+1,ne._fullInput._template||D.push({code:"missing",index:ne._fullInput.index,traceType:B})}for(B in L){var oe=L[B].length,Y=Z[B]||0;oe>Y?D.push({code:"unused",traceType:B,templateCount:oe,dataCount:Y}):Y>oe&&D.push({code:"reused",traceType:B,templateCount:oe,dataCount:Y})}}function G(K,ee){for(var ie in K)if(ie.charAt(0)!=="_"){var re=K[ie],se=M(K,ie,ee);c(re)?(Array.isArray(K)&&re._template===!1&&re.templateitemname&&D.push({code:"missing",path:se,templateitemname:re.templateitemname}),G(re,se)):Array.isArray(re)&&b(re)&&G(re,se)}}if(G({data:N,layout:O},""),D.length)return D.map(w)};function b(A){for(var R=0;R<A.length;R++)if(c(A[R]))return!0}function w(A){var R;switch(A.code){case"data":R="The template has no key data.";break;case"layout":R="The template has no key layout.";break;case"missing":A.path?R="There are no templates for item "+A.path+" with name "+A.templateitemname:R="There are no templates for trace "+A.index+", of type "+A.traceType+".";break;case"unused":A.path?R="The template item at "+A.path+" was not used in constructing the plot.":A.dataCount?R="Some of the templates of type "+A.traceType+" were not used. The template has "+A.templateCount+" traces, the data only has "+A.dataCount+" of this type.":R="The template has "+A.templateCount+" traces of type "+A.traceType+" but there are none in the data.";break;case"reused":R="Some of the templates of type "+A.traceType+" were used more than once. The template has "+A.templateCount+" traces, the data has "+A.dataCount+" of this type.";break}return A.msg=R,A}},7024:function(f,u,r){var i=r(8248),c=r(6424),a=r(7316),l=r(3400),s=r(7030),v=r(7164),d=r(3268),p=r(5788).version,o={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function y(_,E){E=E||{};var M,b,w,A;l.isPlainObject(_)?(M=_.data||[],b=_.layout||{},w=_.config||{},A={}):(_=l.getGraphDiv(_),M=l.extendDeep([],_.data),b=l.extendDeep({},_.layout),w=_._context,A=_._fullLayout||{});function R(Y){return!(Y in E)||l.validate(E[Y],o[Y])}if(!R("width")&&E.width!==null||!R("height")&&E.height!==null)throw new Error("Height and width should be pixel values.");if(!R("format"))throw new Error("Export format is not "+l.join2(o.format.values,", "," or ")+".");var T={};function C(Y,G){return l.coerce(E,T,o,Y,G)}var m=C("format"),L=C("width"),D=C("height"),O=C("scale"),N=C("setBackground"),V=C("imageDataOnly"),X=document.createElement("div");X.style.position="absolute",X.style.left="-5000px",document.body.appendChild(X);var k=l.extendFlat({},b);L?k.width=L:E.width===null&&i(A.width)&&(k.width=A.width),D?k.height=D:E.height===null&&i(A.height)&&(k.height=A.height);var Z=l.extendFlat({},w,{_exportedPlot:!0,staticPlot:!0,setBackground:N}),B=s.getRedrawFunc(X);function J(){return new Promise(function(Y){setTimeout(Y,s.getDelay(X._fullLayout))})}function ne(){return new Promise(function(Y,G){var K=v(X,m,O),ee=X._fullLayout.width,ie=X._fullLayout.height;function re(){c.purge(X),document.body.removeChild(X)}if(m==="full-json"){var se=a.graphJson(X,!1,"keepdata","object",!0,!0);return se.version=p,se=JSON.stringify(se),re(),Y(V?se:s.encodeJSON(se))}if(re(),m==="svg")return Y(V?K:s.encodeSVG(K));var ge=document.createElement("canvas");ge.id=l.randstr(),d({format:m,width:ee,height:ie,scale:O,canvas:ge,svg:K,promise:!0}).then(Y).catch(G)})}function oe(Y){return V?Y.replace(s.IMAGE_URL_PREFIX,""):Y}return new Promise(function(Y,G){c.newPlot(X,M,k,Z).then(B).then(J).then(ne).then(function(K){Y(oe(K))}).catch(function(K){G(K)})})}f.exports=y},1480:function(f,u,r){var i=r(3400),c=r(7316),a=r(3060),l=r(556).dfltConfig,s=i.isPlainObject,v=Array.isArray,d=i.isArrayOrTypedArray;f.exports=function(C,m){C===void 0&&(C=[]),m===void 0&&(m={});var L=a.get(),D=[],O={_context:i.extendFlat({},l)},N,V;v(C)?(O.data=i.extendDeep([],C),N=C):(O.data=[],N=[],D.push(E("array","data"))),s(m)?(O.layout=i.extendDeep({},m),V=m):(O.layout={},V={},arguments.length>1&&D.push(E("object","layout"))),c.supplyDefaults(O);for(var X=O._fullData,k=N.length,Z=0;Z<k;Z++){var B=N[Z],J=["data",Z];if(!s(B)){D.push(E("object",J));continue}var ne=X[Z],oe=ne.type,Y=L.traces[oe].attributes;Y.type={valType:"enumerated",values:[oe]},ne.visible===!1&&B.visible!==!1&&D.push(E("invisible",J)),p(B,ne,Y,D,J);var G=B.transforms,K=ne.transforms;if(G){v(G)||D.push(E("array",J,["transforms"])),J.push("transforms");for(var ee=0;ee<G.length;ee++){var ie=["transforms",ee],re=G[ee].type;if(!s(G[ee])){D.push(E("object",J,ie));continue}var se=L.transforms[re]?L.transforms[re].attributes:{};se.type={valType:"enumerated",values:Object.keys(L.transforms)},p(G[ee],K[ee],se,D,J,ie)}}}var ge=O._fullLayout,xe=o(L,X);return p(V,ge,xe,D,"layout"),D.length===0?void 0:D};function p(T,C,m,L,D,O){O=O||[];for(var N=Object.keys(T),V=0;V<N.length;V++){var X=N[V];if(X!=="transforms"){var k=O.slice();k.push(X);var Z=T[X],B=C[X],J=b(m,X),ne=(J||{}).valType,oe=ne==="info_array",Y=ne==="colorscale",G=(J||{}).items;if(!M(m,X))L.push(E("schema",D,k));else if(s(Z)&&s(B)&&ne!=="any")p(Z,B,J,L,D,k);else if(oe&&v(Z)){Z.length>B.length&&L.push(E("unused",D,k.concat(B.length)));var K=B.length,ee=Array.isArray(G);ee&&(K=Math.min(K,G.length));var ie,re,se,ge,xe;if(J.dimensions===2)for(re=0;re<K;re++)if(v(Z[re])){Z[re].length>B[re].length&&L.push(E("unused",D,k.concat(re,B[re].length)));var Se=B[re].length;for(ie=0;ie<(ee?Math.min(Se,G[re].length):Se);ie++)se=ee?G[re][ie]:G,ge=Z[re][ie],xe=B[re][ie],i.validate(ge,se)?xe!==ge&&xe!==+ge&&L.push(E("dynamic",D,k.concat(re,ie),ge,xe)):L.push(E("value",D,k.concat(re,ie),ge))}else L.push(E("array",D,k.concat(re),Z[re]));else for(re=0;re<K;re++)se=ee?G[re]:G,ge=Z[re],xe=B[re],i.validate(ge,se)?xe!==ge&&xe!==+ge&&L.push(E("dynamic",D,k.concat(re),ge,xe)):L.push(E("value",D,k.concat(re),ge))}else if(J.items&&!oe&&v(Z)){var ce=G[Object.keys(G)[0]],pe=[],ye,U;for(ye=0;ye<B.length;ye++){var W=B[ye]._index||ye;if(U=k.slice(),U.push(W),s(Z[W])&&s(B[ye])){pe.push(W);var j=Z[W],F=B[ye];s(j)&&j.visible!==!1&&F.visible===!1?L.push(E("invisible",D,U)):p(j,F,ce,L,D,U)}}for(ye=0;ye<Z.length;ye++)U=k.slice(),U.push(ye),s(Z[ye])?pe.indexOf(ye)===-1&&L.push(E("unused",D,U)):L.push(E("object",D,U,Z[ye]))}else!s(Z)&&s(B)?L.push(E("object",D,k,Z)):!d(Z)&&d(B)&&!oe&&!Y?L.push(E("array",D,k,Z)):X in C?i.validate(Z,J)?J.valType==="enumerated"&&(J.coerceNumber&&Z!==+B||Z!==B)&&L.push(E("dynamic",D,k,Z,B)):L.push(E("value",D,k,Z)):L.push(E("unused",D,k,Z))}}return L}function o(T,C){for(var m=T.layout.layoutAttributes,L=0;L<C.length;L++){var D=C[L],O=T.traces[D.type],N=O.layoutAttributes;N&&(D.subplot?i.extendFlat(m[O.attributes.subplot.dflt],N):i.extendFlat(m,N))}return m}var y={object:function(T,C){var m;return T==="layout"&&C===""?m="The layout argument":T[0]==="data"&&C===""?m="Trace "+T[1]+" in the data argument":m=_(T)+"key "+C,m+" must be linked to an object container"},array:function(T,C){var m;return T==="data"?m="The data argument":m=_(T)+"key "+C,m+" must be linked to an array container"},schema:function(T,C){return _(T)+"key "+C+" is not part of the schema"},unused:function(T,C,m){var L=s(m)?"container":"key";return _(T)+L+" "+C+" did not get coerced"},dynamic:function(T,C,m,L){return[_(T)+"key",C,"(set to '"+m+"')","got reset to","'"+L+"'","during defaults."].join(" ")},invisible:function(T,C){return(C?_(T)+"item "+C:"Trace "+T[1])+" got defaulted to be not visible"},value:function(T,C,m){return[_(T)+"key "+C,"is set to an invalid value ("+m+")"].join(" ")}};function _(T){return v(T)?"In data trace "+T[1]+", ":"In "+T+", "}function E(T,C,m,L,D){m=m||"";var O,N;v(C)?(O=C[0],N=C[1]):(O=C,N=null);var V=R(m),X=y[T](C,V,L,D);return i.log(X),{code:T,container:O,trace:N,path:m,astr:V,msg:X}}function M(T,C){var m=A(C),L=m.keyMinusId,D=m.id;return L in T&&T[L]._isSubplotObj&&D?!0:C in T}function b(T,C){if(C in T)return T[C];var m=A(C);return T[m.keyMinusId]}var w=i.counterRegex("([a-z]+)");function A(T){var C=T.match(w);return{keyMinusId:C&&C[1],id:C&&C[2]}}function R(T){if(!v(T))return String(T);for(var C="",m=0;m<T.length;m++){var L=T[m];typeof L=="number"?C=C.substr(0,C.length-1)+"["+L+"]":C+=L,m<T.length-1&&(C+=".")}return C}},5656:function(f){f.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},1272:function(f,u,r){var i=r(3400),c=r(1780);f.exports=function(l,s,v){var d=v.name,p=v.inclusionAttr||"visible",o=s[d],y=i.isArrayOrTypedArray(l[d])?l[d]:[],_=s[d]=[],E=c.arrayTemplater(s,d,p),M,b;for(M=0;M<y.length;M++){var w=y[M];i.isPlainObject(w)?b=E.newItem(w):(b=E.newItem({}),b[p]=!1),b._index=M,b[p]!==!1&&v.handleItemDefaults(w,b,s,v),_.push(b)}var A=E.defaultItems();for(M=0;M<A.length;M++)b=A[M],b._index=_.length,v.handleItemDefaults({},b,s,v,{}),_.push(b);if(i.isArrayOrTypedArray(o)){var R=Math.min(o.length,_.length);for(M=0;M<R;M++)i.relinkPrivateKeys(_[M],o[M])}return _}},5464:function(f,u,r){var i=r(5376),c=r(5756);f.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:i({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:c.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(f,u,r){var i=r(8248),c=r(3400),a=c.dateTime2ms,l=c.incrementMonth,s=r(9032),v=s.ONEAVGMONTH;f.exports=function(p,o,y,_){if(o.type!=="date")return{vals:_};var E=p[y+"periodalignment"];if(!E)return{vals:_};var M=p[y+"period"],b;if(i(M)){if(M=+M,M<=0)return{vals:_}}else if(typeof M=="string"&&M.charAt(0)==="M"){var w=+M.substring(1);if(w>0&&Math.round(w)===w)b=w;else return{vals:_}}for(var A=o.calendar,R=E==="start",T=E==="end",C=p[y+"period0"],m=a(C,A)||0,L=[],D=[],O=[],N=_.length,V=0;V<N;V++){var X=_[V],k,Z,B;if(b){for(k=Math.round((X-m)/(b*v)),B=l(m,b*k,A);B>X;)B=l(B,-b,A);for(;B<=X;)B=l(B,b,A);Z=l(B,-b,A)}else{for(k=Math.round((X-m)/M),B=m+k*M;B>X;)B-=M;for(;B<=X;)B+=M;Z=B-M}L[V]=R?Z:T?B:(Z+B)/2,D[V]=Z,O[V]=B}return{vals:L,starts:D,ends:O}}},6720:function(f){f.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},9280:function(f,u,r){var i=r(3428),c=r(8248),a=r(3400),l=r(9032).FP_SAFE,s=r(4040),v=r(3616),d=r(9811),p=d.getFromId,o=d.isLinked;f.exports={applyAutorangeOptions:k,getAutoRange:y,makePadFn:E,doAutoRange:A,findExtremes:R,concatExtremes:w};function y(Z,B){var J,ne,oe=[],Y=Z._fullLayout,G=E(Y,B,0),K=E(Y,B,1),ee=w(Z,B),ie=ee.min,re=ee.max;if(ie.length===0||re.length===0)return a.simpleMap(B.range,B.r2l);var se=ie[0].val,ge=re[0].val;for(J=1;J<ie.length&&se===ge;J++)se=Math.min(se,ie[J].val);for(J=1;J<re.length&&se===ge;J++)ge=Math.max(ge,re[J].val);var xe=B.autorange,Se=xe==="reversed"||xe==="min reversed"||xe==="max reversed";if(!Se&&B.range){var ce=a.simpleMap(B.range,B.r2l);Se=ce[1]<ce[0]}B.autorange==="reversed"&&(B.autorange=!0);var pe=B.rangemode,ye=pe==="tozero",U=pe==="nonnegative",W=B._length,j=W/10,F=0,P,q,z,te,ue,ve;for(J=0;J<ie.length;J++)for(P=ie[J],ne=0;ne<re.length;ne++)q=re[ne],ve=q.val-P.val-_(B,P.val,q.val),ve>0&&(ue=W-G(P)-K(q),ue>j?ve/ue>F&&(z=P,te=q,F=ve/ue):ve/W>F&&(z={val:P.val,nopad:1},te={val:q.val,nopad:1},F=ve/W));function _e(Ze,Te){return Math.max(Ze,K(Te))}if(se===ge){var Re=se-1,Le=se+1;if(ye)if(se===0)oe=[0,1];else{var Ve=(se>0?re:ie).reduce(_e,0),Xe=se/(1-Math.min(.5,Ve/W));oe=se>0?[0,Xe]:[Xe,0]}else U?oe=[Math.max(0,Re),Math.max(1,Le)]:oe=[Re,Le]}else ye?(z.val>=0&&(z={val:0,nopad:1}),te.val<=0&&(te={val:0,nopad:1})):U&&(z.val-F*G(z)<0&&(z={val:0,nopad:1}),te.val<=0&&(te={val:1,nopad:1})),F=(te.val-z.val-_(B,P.val,q.val))/(W-G(z)-K(te)),oe=[z.val-F*G(z),te.val+F*K(te)];return oe=k(oe,B),B.limitRange&&B.limitRange(),Se&&oe.reverse(),a.simpleMap(oe,B.l2r||Number)}function _(Z,B,J){var ne=0;if(Z.rangebreaks)for(var oe=Z.locateBreaks(B,J),Y=0;Y<oe.length;Y++){var G=oe[Y];ne+=G.max-G.min}return ne}function E(Z,B,J){var ne=.05*B._length,oe=B._anchorAxis||{};if((B.ticklabelposition||"").indexOf("inside")!==-1||(oe.ticklabelposition||"").indexOf("inside")!==-1){var Y=B.isReversed();if(!Y){var G=a.simpleMap(B.range,B.r2l);Y=G[1]<G[0]}Y&&(J=!J)}var K=0;return o(Z,B._id)||(K=b(Z,B,J)),ne=Math.max(K,ne),B.constrain==="domain"&&B._inputDomain&&(ne*=(B._inputDomain[1]-B._inputDomain[0])/(B.domain[1]-B.domain[0])),function(ie){return ie.nopad?0:ie.pad+(ie.extrapad?ne:K)}}var M=3;function b(Z,B,J){var ne=0,oe=B._id.charAt(0)==="x";for(var Y in Z._plots){var G=Z._plots[Y];if(!(B._id!==G.xaxis._id&&B._id!==G.yaxis._id)){var K=(oe?G.yaxis:G.xaxis)||{};if((K.ticklabelposition||"").indexOf("inside")!==-1&&(!J&&(K.side==="left"||K.side==="bottom")||J&&(K.side==="top"||K.side==="right"))){if(K._vals){var ee=a.deg2rad(K._tickAngles[K._id+"tick"]||0),ie=Math.abs(Math.cos(ee)),re=Math.abs(Math.sin(ee));if(!K._vals[0].bb){var se=K._id+"tick",ge=K._selections[se];ge.each(function(U){var W=i.select(this),j=W.select(".text-math-group");j.empty()&&(U.bb=v.bBox(W.node()))})}for(var xe=0;xe<K._vals.length;xe++){var Se=K._vals[xe],ce=Se.bb;if(ce){var pe=2*M+ce.width,ye=2*M+ce.height;ne=Math.max(ne,oe?Math.max(pe*ie,ye*re):Math.max(ye*ie,pe*re))}}}K.ticks==="inside"&&K.ticklabelposition==="inside"&&(ne+=K.ticklen||0)}}}return ne}function w(Z,B,J){var ne=B._id,oe=Z._fullData,Y=Z._fullLayout,G=[],K=[],ee,ie,re;function se(pe,ye){for(ee=0;ee<ye.length;ee++){var U=pe[ye[ee]],W=(U._extremes||{})[ne];if(U.visible===!0&&W){for(ie=0;ie<W.min.length;ie++)re=W.min[ie],T(G,re.val,re.pad,{extrapad:re.extrapad});for(ie=0;ie<W.max.length;ie++)re=W.max[ie],C(K,re.val,re.pad,{extrapad:re.extrapad})}}}if(se(oe,B._traceIndices),se(Y.annotations||[],B._annIndices||[]),se(Y.shapes||[],B._shapeIndices||[]),B._matchGroup&&!J){for(var ge in B._matchGroup)if(ge!==B._id){var xe=p(Z,ge),Se=w(Z,xe,!0),ce=B._length/xe._length;for(ie=0;ie<Se.min.length;ie++)re=Se.min[ie],T(G,re.val,re.pad*ce,{extrapad:re.extrapad});for(ie=0;ie<Se.max.length;ie++)re=Se.max[ie],C(K,re.val,re.pad*ce,{extrapad:re.extrapad})}}return{min:G,max:K}}function A(Z,B,J){if(B.setScale(),B.autorange){B.range=J?J.slice():y(Z,B),B._r=B.range.slice(),B._rl=a.simpleMap(B._r,B.r2l);var ne=B._input,oe={};oe[B._attr+".range"]=B.range,oe[B._attr+".autorange"]=B.autorange,s.call("_storeDirectGUIEdit",Z.layout,Z._fullLayout._preGUI,oe),ne.range=B.range.slice(),ne.autorange=B.autorange}var Y=B._anchorAxis;if(Y&&Y.rangeslider){var G=Y.rangeslider[B._name];G&&G.rangemode==="auto"&&(G.range=y(Z,B)),Y._input.rangeslider[B._name]=a.extendFlat({},G)}}function R(Z,B,J){J||(J={}),Z._m||Z.setScale();var ne=[],oe=[],Y=B.length,G=J.padded||!1,K=J.tozero&&(Z.type==="linear"||Z.type==="-"),ee=Z.type==="log",ie=!1,re=J.vpadLinearized||!1,se,ge,xe,Se,ce,pe,ye,U,W;function j(_e){if(Array.isArray(_e))return ie=!0,function(Le){return Math.max(Number(_e[Le]||0),0)};var Re=Math.max(Number(_e||0),0);return function(){return Re}}var F=j((Z._m>0?J.ppadplus:J.ppadminus)||J.ppad||0),P=j((Z._m>0?J.ppadminus:J.ppadplus)||J.ppad||0),q=j(J.vpadplus||J.vpad),z=j(J.vpadminus||J.vpad);if(!ie){if(U=1/0,W=-1/0,ee)for(se=0;se<Y;se++)ge=B[se],ge<U&&ge>0&&(U=ge),ge>W&&ge<l&&(W=ge);else for(se=0;se<Y;se++)ge=B[se],ge<U&&ge>-l&&(U=ge),ge>W&&ge<l&&(W=ge);B=[U,W],Y=2}var te={tozero:K,extrapad:G};function ue(_e){xe=B[_e],c(xe)&&(pe=F(_e),ye=P(_e),re?(Se=Z.c2l(xe)-z(_e),ce=Z.c2l(xe)+q(_e)):(U=xe-z(_e),W=xe+q(_e),ee&&U<W/10&&(U=W/10),Se=Z.c2l(U),ce=Z.c2l(W)),K&&(Se=Math.min(0,Se),ce=Math.max(0,ce)),L(Se)&&T(ne,Se,ye,te),L(ce)&&C(oe,ce,pe,te))}var ve=Math.min(6,Y);for(se=0;se<ve;se++)ue(se);for(se=Y-1;se>=ve;se--)ue(se);return{min:ne,max:oe,opts:J}}function T(Z,B,J,ne){m(Z,B,J,ne,D)}function C(Z,B,J,ne){m(Z,B,J,ne,O)}function m(Z,B,J,ne,oe){for(var Y=ne.tozero,G=ne.extrapad,K=!0,ee=0;ee<Z.length&&K;ee++){var ie=Z[ee];if(oe(ie.val,B)&&ie.pad>=J&&(ie.extrapad||!G)){K=!1;break}else oe(B,ie.val)&&ie.pad<=J&&(G||!ie.extrapad)&&(Z.splice(ee,1),ee--)}if(K){var re=Y&&B===0;Z.push({val:B,pad:re?0:J,extrapad:re?!1:G})}}function L(Z){return c(Z)&&Math.abs(Z)<l}function D(Z,B){return Z<=B}function O(Z,B){return Z>=B}function N(Z,B){var J=B.autorangeoptions;return J&&J.minallowed!==void 0&&X(B,J.minallowed,J.maxallowed)?J.minallowed:J&&J.clipmin!==void 0&&X(B,J.clipmin,J.clipmax)?Math.max(Z,B.d2l(J.clipmin)):Z}function V(Z,B){var J=B.autorangeoptions;return J&&J.maxallowed!==void 0&&X(B,J.minallowed,J.maxallowed)?J.maxallowed:J&&J.clipmax!==void 0&&X(B,J.clipmin,J.clipmax)?Math.min(Z,B.d2l(J.clipmax)):Z}function X(Z,B,J){return B!==void 0&&J!==void 0?(B=Z.d2l(B),J=Z.d2l(J),B<J):!0}function k(Z,B){if(!B||!B.autorangeoptions)return Z;var J=Z[0],ne=Z[1],oe=B.autorangeoptions.include;if(oe!==void 0){var Y=B.d2l(J),G=B.d2l(ne);a.isArrayOrTypedArray(oe)||(oe=[oe]);for(var K=0;K<oe.length;K++){var ee=B.d2l(oe[K]);Y>=ee&&(Y=ee,J=ee),G<=ee&&(G=ee,ne=ee)}}return J=N(J,B),ne=V(ne,B),[J,ne]}},6808:function(f){f.exports=function(r,i,c){var a,l;if(c){var s=i==="reversed"||i==="min reversed"||i==="max reversed";a=c[s?1:0],l=c[s?0:1]}var v=r("autorangeoptions.minallowed",l===null?a:void 0),d=r("autorangeoptions.maxallowed",a===null?l:void 0);v===void 0&&r("autorangeoptions.clipmin"),d===void 0&&r("autorangeoptions.clipmax"),r("autorangeoptions.include")}},4460:function(f,u,r){var i=r(3428),c=r(8248),a=r(7316),l=r(4040),s=r(3400),v=s.strTranslate,d=r(2736),p=r(1668),o=r(6308),y=r(3616),_=r(4724),E=r(8728),M=r(9032),b=M.ONEMAXYEAR,w=M.ONEAVGYEAR,A=M.ONEMINYEAR,R=M.ONEMAXQUARTER,T=M.ONEAVGQUARTER,C=M.ONEMINQUARTER,m=M.ONEMAXMONTH,L=M.ONEAVGMONTH,D=M.ONEMINMONTH,O=M.ONEWEEK,N=M.ONEDAY,V=N/2,X=M.ONEHOUR,k=M.ONEMIN,Z=M.ONESEC,B=M.MINUS_SIGN,J=M.BADNUM,ne={K:"zeroline"},oe={K:"gridline",L:"path"},Y={K:"minor-gridline",L:"path"},G={K:"tick",L:"path"},K={K:"tick",L:"text"},ee={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},ie=r(4284),re=ie.MID_SHIFT,se=ie.CAP_SHIFT,ge=ie.LINE_SPACING,xe=ie.OPPOSITE_SIDE,Se=3,ce=f.exports={};ce.setConvert=r(8344);var pe=r(2976),ye=r(9811),U=ye.idSort,W=ye.isLinked;ce.id2name=ye.id2name,ce.name2id=ye.name2id,ce.cleanId=ye.cleanId,ce.list=ye.list,ce.listIds=ye.listIds,ce.getFromId=ye.getFromId,ce.getFromTrace=ye.getFromTrace;var j=r(9280);ce.getAutoRange=j.getAutoRange,ce.findExtremes=j.findExtremes;var F=1e-4;function P(fe){var Q=(fe[1]-fe[0])*F;return[fe[0]-Q,fe[1]+Q]}ce.coerceRef=function(fe,Q,Je,Ge,Qe,it){var rt=Ge.charAt(Ge.length-1),$e=Je._fullLayout._subplots[rt+"axis"],je=Ge+"ref",ct={};return Qe||(Qe=$e[0]||(typeof it=="string"?it:it[0])),it||(it=Qe),$e=$e.concat($e.map(function(dt){return dt+" domain"})),ct[je]={valType:"enumerated",values:$e.concat(it?typeof it=="string"?[it]:it:[]),dflt:Qe},s.coerce(fe,Q,ct,je)},ce.getRefType=function(fe){return fe===void 0?fe:fe==="paper"?"paper":fe==="pixel"?"pixel":/( domain)$/.test(fe)?"domain":"range"},ce.coercePosition=function(fe,Q,Je,Ge,Qe,it){var rt,$e,je=ce.getRefType(Ge);if(je!=="range")rt=s.ensureNumber,$e=Je(Qe,it);else{var ct=ce.getFromId(Q,Ge);it=ct.fraction2r(it),$e=Je(Qe,it),rt=ct.cleanPos}fe[Qe]=rt($e)},ce.cleanPosition=function(fe,Q,Je){var Ge=Je==="paper"||Je==="pixel"?s.ensureNumber:ce.getFromId(Q,Je).cleanPos;return Ge(fe)},ce.redrawComponents=function(fe,Q){Q=Q||ce.listIds(fe);var Je=fe._fullLayout;function Ge(Qe,it,rt,$e){for(var je=l.getComponentMethod(Qe,it),ct={},dt=0;dt<Q.length;dt++)for(var xt=Je[ce.id2name(Q[dt])],yt=xt[rt],Lt=0;Lt<yt.length;Lt++){var wt=yt[Lt];if(!ct[wt]&&(je(fe,wt),ct[wt]=1,$e))return}}Ge("annotations","drawOne","_annIndices"),Ge("shapes","drawOne","_shapeIndices"),Ge("images","draw","_imgIndices",!0),Ge("selections","drawOne","_selectionIndices")};var q=ce.getDataConversions=function(fe,Q,Je,Ge){var Qe,it=Je==="x"||Je==="y"||Je==="z"?Je:Ge;if(s.isArrayOrTypedArray(it)){if(Qe={type:pe(Ge,void 0,{autotypenumbers:fe._fullLayout.autotypenumbers}),_categories:[]},ce.setConvert(Qe),Qe.type==="category")for(var rt=0;rt<Ge.length;rt++)Qe.d2c(Ge[rt])}else Qe=ce.getFromTrace(fe,Q,it);return Qe?{d2c:Qe.d2c,c2d:Qe.c2d}:it==="ids"?{d2c:te,c2d:te}:{d2c:z,c2d:z}};function z(fe){return+fe}function te(fe){return String(fe)}ce.getDataToCoordFunc=function(fe,Q,Je,Ge){return q(fe,Q,Je,Ge).d2c},ce.counterLetter=function(fe){var Q=fe.charAt(0);if(Q==="x")return"y";if(Q==="y")return"x"},ce.minDtick=function(fe,Q,Je,Ge){["log","category","multicategory"].indexOf(fe.type)!==-1||!Ge?fe._minDtick=0:fe._minDtick===void 0?(fe._minDtick=Q,fe._forceTick0=Je):fe._minDtick&&((fe._minDtick/Q+1e-6)%1<2e-6&&((Je-fe._forceTick0)/Q%1+1.000001)%1<2e-6?(fe._minDtick=Q,fe._forceTick0=Je):((Q/fe._minDtick+1e-6)%1>2e-6||((Je-fe._forceTick0)/fe._minDtick%1+1.000001)%1>2e-6)&&(fe._minDtick=0))},ce.saveRangeInitial=function(fe,Q){for(var Je=ce.list(fe,"",!0),Ge=!1,Qe=0;Qe<Je.length;Qe++){var it=Je[Qe],rt=it._rangeInitial0===void 0&&it._rangeInitial1===void 0,$e=rt||it.range[0]!==it._rangeInitial0||it.range[1]!==it._rangeInitial1,je=it.autorange;(rt&&je!==!0||Q&&$e)&&(it._rangeInitial0=je==="min"||je==="max reversed"?void 0:it.range[0],it._rangeInitial1=je==="max"||je==="min reversed"?void 0:it.range[1],it._autorangeInitial=je,Ge=!0)}return Ge},ce.saveShowSpikeInitial=function(fe,Q){for(var Je=ce.list(fe,"",!0),Ge=!1,Qe="on",it=0;it<Je.length;it++){var rt=Je[it],$e=rt._showSpikeInitial===void 0,je=$e||rt.showspikes!==rt._showspikes;($e||Q&&je)&&(rt._showSpikeInitial=rt.showspikes,Ge=!0),Qe==="on"&&!rt.showspikes&&(Qe="off")}return fe._fullLayout._cartesianSpikesEnabled=Qe,Ge},ce.autoBin=function(fe,Q,Je,Ge,Qe,it){var rt=s.aggNums(Math.min,null,fe),$e=s.aggNums(Math.max,null,fe);if(Q.type==="category"||Q.type==="multicategory")return{start:rt-.5,end:$e+.5,size:Math.max(1,Math.round(it)||1),_dataSpan:$e-rt};Qe||(Qe=Q.calendar);var je;if(Q.type==="log"?je={type:"linear",range:[rt,$e]}:je={type:Q.type,range:s.simpleMap([rt,$e],Q.c2r,0,Qe),calendar:Qe},ce.setConvert(je),it=it&&E.dtick(it,je.type),it)je.dtick=it,je.tick0=E.tick0(void 0,je.type,Qe);else{var ct;if(Je)ct=($e-rt)/Je;else{var dt=s.distinctVals(fe),xt=Math.pow(10,Math.floor(Math.log(dt.minDiff)/Math.LN10)),yt=xt*s.roundUp(dt.minDiff/xt,[.9,1.9,4.9,9.9],!0);ct=Math.max(yt,2*s.stdev(fe)/Math.pow(fe.length,Ge?.25:.4)),c(ct)||(ct=1)}ce.autoTicks(je,ct)}var Lt=je.dtick,wt=ce.tickIncrement(ce.tickFirst(je),Lt,"reverse",Qe),At,Ot;if(typeof Lt=="number")wt=ue(wt,fe,je,rt,$e),Ot=1+Math.floor(($e-wt)/Lt),At=wt+Ot*Lt;else for(je.dtick.charAt(0)==="M"&&(wt=ve(wt,fe,Lt,rt,Qe)),At=wt,Ot=0;At<=$e;)At=ce.tickIncrement(At,Lt,!1,Qe),Ot++;return{start:Q.c2r(wt,0,Qe),end:Q.c2r(At,0,Qe),size:Lt,_dataSpan:$e-rt}};function ue(fe,Q,Je,Ge,Qe){var it=0,rt=0,$e=0,je=0;function ct(Lt){return(1+(Lt-fe)*100/Je.dtick)%100<2}for(var dt=0;dt<Q.length;dt++)Q[dt]%1===0?$e++:c(Q[dt])||je++,ct(Q[dt])&&it++,ct(Q[dt]+Je.dtick/2)&&rt++;var xt=Q.length-je;if($e===xt&&Je.type!=="date")Je.dtick<1?fe=Ge-.5*Je.dtick:(fe-=.5,fe+Je.dtick<Ge&&(fe+=Je.dtick));else if(rt<xt*.1&&(it>xt*.3||ct(Ge)||ct(Qe))){var yt=Je.dtick/2;fe+=fe+yt<Ge?yt:-yt}return fe}function ve(fe,Q,Je,Ge,Qe){var it=s.findExactDates(Q,Qe),rt=.8;if(it.exactDays>rt){var $e=Number(Je.substr(1));it.exactYears>rt&&$e%12===0?fe=ce.tickIncrement(fe,"M6","reverse")+N*1.5:it.exactMonths>rt?fe=ce.tickIncrement(fe,"M1","reverse")+N*15.5:fe-=V;var je=ce.tickIncrement(fe,Je);if(je<=Ge)return je}return fe}ce.prepMinorTicks=function(fe,Q,Je){if(!Q.minor.dtick){delete fe.dtick;var Ge=Q.dtick&&c(Q._tmin),Qe;if(Ge){var it=ce.tickIncrement(Q._tmin,Q.dtick,!0);Qe=[Q._tmin,it*.99+Q._tmin*.01]}else{var rt=s.simpleMap(Q.range,Q.r2l);Qe=[rt[0],.8*rt[0]+.2*rt[1]]}if(fe.range=s.simpleMap(Qe,Q.l2r),fe._isMinor=!0,ce.prepTicks(fe,Je),Ge){var $e=c(Q.dtick),je=c(fe.dtick),ct=$e?Q.dtick:+Q.dtick.substring(1),dt=je?fe.dtick:+fe.dtick.substring(1);$e&&je?_e(ct,dt)?ct===2*O&&dt===2*N&&(fe.dtick=O):ct===2*O&&dt===3*N?fe.dtick=O:ct===O&&!(Q._input.minor||{}).nticks?fe.dtick=N:Re(ct/dt,2.5)?fe.dtick=ct/2:fe.dtick=ct:String(Q.dtick).charAt(0)==="M"?je?fe.dtick="M1":_e(ct,dt)?ct>=12&&dt===2&&(fe.dtick="M3"):fe.dtick=Q.dtick:String(fe.dtick).charAt(0)==="L"?String(Q.dtick).charAt(0)==="L"?_e(ct,dt)||(fe.dtick=Re(ct/dt,2.5)?Q.dtick/2:Q.dtick):fe.dtick="D1":fe.dtick==="D2"&&+Q.dtick>1&&(fe.dtick=1)}fe.range=Q.range}Q.minor._tick0Init===void 0&&(fe.tick0=Q.tick0)};function _e(fe,Q){return Math.abs((fe/Q+.5)%1-.5)<.001}function Re(fe,Q){return Math.abs(fe/Q-1)<.001}ce.prepTicks=function(fe,Q){var Je=s.simpleMap(fe.range,fe.r2l,void 0,void 0,Q);if(fe.tickmode==="auto"||!fe.dtick){var Ge=fe.nticks,Qe;Ge||(fe.type==="category"||fe.type==="multicategory"?(Qe=fe.tickfont?s.bigFont(fe.tickfont.size||12):15,Ge=fe._length/Qe):(Qe=fe._id.charAt(0)==="y"?40:80,Ge=s.constrain(fe._length/Qe,4,9)+1),fe._name==="radialaxis"&&(Ge*=2)),fe.minor&&fe.minor.tickmode!=="array"||fe.tickmode==="array"&&(Ge*=100),fe._roughDTick=Math.abs(Je[1]-Je[0])/Ge,ce.autoTicks(fe,fe._roughDTick),fe._minDtick>0&&fe.dtick<fe._minDtick*2&&(fe.dtick=fe._minDtick,fe.tick0=fe.l2r(fe._forceTick0))}fe.ticklabelmode==="period"&&Ve(fe),fe.tick0||(fe.tick0=fe.type==="date"?"2000-01-01":0),fe.type==="date"&&fe.dtick<.1&&(fe.dtick=.1),lt(fe)};function Le(fe){return+fe.substring(1)}function Ve(fe){var Q;function Je(){return!(c(fe.dtick)||fe.dtick.charAt(0)!=="M")}var Ge=Je(),Qe=ce.getTickFormat(fe);if(Qe){var it=fe._dtickInit!==fe.dtick;/%[fLQsSMX]/.test(Qe)||(/%[HI]/.test(Qe)?(Q=X,it&&!Ge&&fe.dtick<X&&(fe.dtick=X)):/%p/.test(Qe)?(Q=V,it&&!Ge&&fe.dtick<V&&(fe.dtick=V)):/%[Aadejuwx]/.test(Qe)?(Q=N,it&&!Ge&&fe.dtick<N&&(fe.dtick=N)):/%[UVW]/.test(Qe)?(Q=O,it&&!Ge&&fe.dtick<O&&(fe.dtick=O)):/%[Bbm]/.test(Qe)?(Q=L,it&&(Ge?Le(fe.dtick)<1:fe.dtick<D)&&(fe.dtick="M1")):/%[q]/.test(Qe)?(Q=T,it&&(Ge?Le(fe.dtick)<3:fe.dtick<C)&&(fe.dtick="M3")):/%[Yy]/.test(Qe)&&(Q=w,it&&(Ge?Le(fe.dtick)<12:fe.dtick<A)&&(fe.dtick="M12")))}Ge=Je(),Ge&&fe.tick0===fe._dowTick0&&(fe.tick0=fe._rawTick0),fe._definedDelta=Q}function Xe(fe,Q,Je){for(var Ge=0;Ge<fe.length;Ge++){var Qe=fe[Ge].value,it=Ge,rt=Ge+1;Ge<fe.length-1?(it=Ge,rt=Ge+1):Ge>0?(it=Ge-1,rt=Ge):(it=Ge,rt=Ge);var $e=fe[it].value,je=fe[rt].value,ct=Math.abs(je-$e),dt=Je||ct,xt=0;dt>=A?ct>=A&&ct<=b?xt=ct:xt=w:Je===T&&dt>=C?ct>=C&&ct<=R?xt=ct:xt=T:dt>=D?ct>=D&&ct<=m?xt=ct:xt=L:Je===O&&dt>=O?xt=O:dt>=N?xt=N:Je===V&&dt>=V?xt=V:Je===X&&dt>=X&&(xt=X);var yt;xt>=ct&&(xt=ct,yt=!0);var Lt=Qe+xt;if(Q.rangebreaks&&xt>0){for(var wt=84,At=0,Ot=0;Ot<wt;Ot++){var zt=(Ot+.5)/wt;Q.maskBreaks(Qe*(1-zt)+zt*Lt)!==J&&At++}xt*=At/wt,xt||(fe[Ge].drop=!0),yt&&ct>O&&(xt=ct)}(xt>0||Ge===0)&&(fe[Ge].periodX=Qe+xt/2)}}ce.calcTicks=function(Q,Je){for(var Ge=Q.type,Qe=Q.calendar,it=Q.ticklabelstep,rt=Q.ticklabelmode==="period",$e=s.simpleMap(Q.range,Q.r2l,void 0,void 0,Je),je=$e[1]<$e[0],ct=Math.min($e[0],$e[1]),dt=Math.max($e[0],$e[1]),xt=Math.max(1e3,Q._length||0),yt=[],Lt=[],wt=[],At=[],Ot=Q.minor&&(Q.minor.ticks||Q.minor.showgrid),zt=1;zt>=(Ot?0:1);zt--){var Zt=!zt;zt?(Q._dtickInit=Q.dtick,Q._tick0Init=Q.tick0):(Q.minor._dtickInit=Q.minor.dtick,Q.minor._tick0Init=Q.minor.tick0);var Kt=zt?Q:s.extendFlat({},Q,Q.minor);if(Zt?ce.prepMinorTicks(Kt,Q,Je):ce.prepTicks(Kt,Je),Kt.tickmode==="array"){zt?(wt=[],yt=we(Q,!Zt)):(At=[],Lt=we(Q,!Zt));continue}if(Kt.tickmode==="sync"){wt=[],yt=Te(Q);continue}var cr=P($e),or=cr[0],nr=cr[1],mr=c(Kt.dtick),pr=Ge==="log"&&!(mr||Kt.dtick.charAt(0)==="L"),Ar=ce.tickFirst(Kt,Je);if(zt){if(Q._tmin=Ar,Ar<or!==je)break;(Ge==="category"||Ge==="multicategory")&&(nr=je?Math.max(-.5,nr):Math.min(Q._categories.length-.5,nr))}var en=null,Lr=Ar,Pr;if(zt){var nn;mr?nn=Q.dtick:Ge==="date"?typeof Q.dtick=="string"&&Q.dtick.charAt(0)==="M"&&(nn=L*Q.dtick.substring(1)):nn=Q._roughDTick,Pr=Math.round((Q.r2l(Lr)-Q.r2l(Q.tick0))/nn)-1}var Dn=Kt.dtick;for(Kt.rangebreaks&&Kt._tick0Init!==Kt.tick0&&(Lr=Ht(Lr,Q),je||(Lr=ce.tickIncrement(Lr,Dn,!je,Qe))),zt&&rt&&(Lr=ce.tickIncrement(Lr,Dn,!je,Qe),Pr--);je?Lr>=nr:Lr<=nr;Lr=ce.tickIncrement(Lr,Dn,je,Qe)){if(zt&&Pr++,Kt.rangebreaks&&!je){if(Lr<or)continue;if(Kt.maskBreaks(Lr)===J&&Ht(Lr,Kt)>=dt)break}if(wt.length>xt||Lr===en)break;en=Lr;var Pn={value:Lr};zt?(pr&&Lr!==(Lr|0)&&(Pn.simpleLabel=!0),it>1&&Pr%it&&(Pn.skipLabel=!0),wt.push(Pn)):(Pn.minor=!0,At.push(Pn))}}if(Ot){var _r=Q.minor.ticks==="inside"&&Q.ticks==="outside"||Q.minor.ticks==="outside"&&Q.ticks==="inside";if(!_r){for(var mn=wt.map(function(_i){return _i.value}),Mr=[],Br=0;Br<At.length;Br++){var zr=At[Br],Wr=zr.value;if(mn.indexOf(Wr)===-1){for(var Gr=!1,Qr=0;!Gr&&Qr<wt.length;Qr++)1e7+wt[Qr].value===1e7+Wr&&(Gr=!0);Gr||Mr.push(zr)}}At=Mr}}rt&&Xe(wt,Q,Q._definedDelta);var Ur;if(Q.rangebreaks){var an=Q._id.charAt(0)==="y",Un=1;Q.tickmode==="auto"&&(Un=Q.tickfont?Q.tickfont.size:12);var xn=NaN;for(Ur=wt.length-1;Ur>-1;Ur--){if(wt[Ur].drop){wt.splice(Ur,1);continue}wt[Ur].value=Ht(wt[Ur].value,Q);var Jr=Q.c2p(wt[Ur].value);(an?xn>Jr-Un:xn<Jr+Un)?wt.splice(je?Ur+1:Ur,1):xn=Jr}}tr(Q)&&Math.abs($e[1]-$e[0])===360&&wt.pop(),Q._tmax=(wt[wt.length-1]||{}).value,Q._prevDateHead="",Q._inCalcTicks=!0;var di,ni=function(_i){_i.text="",Q._prevDateHead=di};wt=wt.concat(At);var Bn,jn;for(Ur=0;Ur<wt.length;Ur++){var aa=wt[Ur].minor,oa=wt[Ur].value;aa?Lt.push({x:oa,minor:!0}):(di=Q._prevDateHead,Bn=ce.tickText(Q,oa,!1,wt[Ur].simpleLabel),jn=wt[Ur].periodX,jn!==void 0&&(Bn.periodX=jn,(jn>dt||jn<ct)&&(jn>dt&&(Bn.periodX=dt),jn<ct&&(Bn.periodX=ct),ni(Bn))),wt[Ur].skipLabel&&ni(Bn),yt.push(Bn))}return yt=yt.concat(Lt),Q._inCalcTicks=!1,rt&&yt.length&&(yt[0].noTick=!0),yt};function Ze(fe,Q){return fe.rangebreaks&&(Q=Q.filter(function(Je){return fe.maskBreaks(Je.x)!==J})),Q}function Te(fe){var Q=fe._mainAxis,Je=[];if(Q._vals){for(var Ge=0;Ge<Q._vals.length;Ge++)if(!Q._vals[Ge].noTick){var Qe=Q.l2p(Q._vals[Ge].x),it=fe.p2l(Qe),rt=ce.tickText(fe,it);Q._vals[Ge].minor&&(rt.minor=!0,rt.text=""),Je.push(rt)}}return Je=Ze(fe,Je),Je}function we(fe,Q){var Je=s.simpleMap(fe.range,fe.r2l),Ge=P(Je),Qe=Math.min(Ge[0],Ge[1]),it=Math.max(Ge[0],Ge[1]),rt=fe.type==="category"?fe.d2l_noadd:fe.d2l;fe.type==="log"&&String(fe.dtick).charAt(0)!=="L"&&(fe.dtick="L"+Math.pow(10,Math.floor(Math.min(fe.range[0],fe.range[1]))-1));for(var $e=[],je=0;je<=1;je++)if(!(Q!==void 0&&(Q&&je||Q===!1&&!je))&&!(je&&!fe.minor)){var ct=je?fe.minor.tickvals:fe.tickvals,dt=je?[]:fe.ticktext;if(ct){s.isArrayOrTypedArray(dt)||(dt=[]);for(var xt=0;xt<ct.length;xt++){var yt=rt(ct[xt]);if(yt>Qe&&yt<it){var Lt=ce.tickText(fe,yt,!1,String(dt[xt]));je&&(Lt.minor=!0,Lt.text=""),$e.push(Lt)}}}}return $e=Ze(fe,$e),$e}var be=[2,5,10],ke=[1,2,3,6,12],He=[1,2,5,10,15,30],Ke=[1,2,3,7,14],st=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],vt=[-.301,0,.301,.699,1],pt=[15,30,45,90,180];function ft(fe,Q,Je){return Q*s.roundUp(fe/Q,Je)}ce.autoTicks=function(fe,Q,Je){var Ge;function Qe(xt){return Math.pow(xt,Math.floor(Math.log(Q)/Math.LN10))}if(fe.type==="date"){fe.tick0=s.dateTick0(fe.calendar,0);var it=2*Q;if(it>w)Q/=w,Ge=Qe(10),fe.dtick="M"+12*ft(Q,Ge,be);else if(it>L)Q/=L,fe.dtick="M"+ft(Q,1,ke);else if(it>N){if(fe.dtick=ft(Q,N,fe._hasDayOfWeekBreaks?[1,2,7,14]:Ke),!Je){var rt=ce.getTickFormat(fe),$e=fe.ticklabelmode==="period";$e&&(fe._rawTick0=fe.tick0),/%[uVW]/.test(rt)?fe.tick0=s.dateTick0(fe.calendar,2):fe.tick0=s.dateTick0(fe.calendar,1),$e&&(fe._dowTick0=fe.tick0)}}else it>X?fe.dtick=ft(Q,X,ke):it>k?fe.dtick=ft(Q,k,He):it>Z?fe.dtick=ft(Q,Z,He):(Ge=Qe(10),fe.dtick=ft(Q,Ge,be))}else if(fe.type==="log"){fe.tick0=0;var je=s.simpleMap(fe.range,fe.r2l);if(fe._isMinor&&(Q*=1.5),Q>.7)fe.dtick=Math.ceil(Q);else if(Math.abs(je[1]-je[0])<1){var ct=1.5*Math.abs((je[1]-je[0])/Q);Q=Math.abs(Math.pow(10,je[1])-Math.pow(10,je[0]))/ct,Ge=Qe(10),fe.dtick="L"+ft(Q,Ge,be)}else fe.dtick=Q>.3?"D2":"D1"}else fe.type==="category"||fe.type==="multicategory"?(fe.tick0=0,fe.dtick=Math.ceil(Math.max(Q,1))):tr(fe)?(fe.tick0=0,Ge=1,fe.dtick=ft(Q,Ge,pt)):(fe.tick0=0,Ge=Qe(10),fe.dtick=ft(Q,Ge,be));if(fe.dtick===0&&(fe.dtick=1),!c(fe.dtick)&&typeof fe.dtick!="string"){var dt=fe.dtick;throw fe.dtick=1,"ax.dtick error: "+String(dt)}};function lt(fe){var Q=fe.dtick;if(fe._tickexponent=0,!c(Q)&&typeof Q!="string"&&(Q=1),(fe.type==="category"||fe.type==="multicategory")&&(fe._tickround=null),fe.type==="date"){var Je=fe.r2l(fe.tick0),Ge=fe.l2r(Je).replace(/(^-|i)/g,""),Qe=Ge.length;if(String(Q).charAt(0)==="M")Qe>10||Ge.substr(5)!=="01-01"?fe._tickround="d":fe._tickround=+Q.substr(1)%12===0?"y":"m";else if(Q>=N&&Qe<=10||Q>=N*15)fe._tickround="d";else if(Q>=k&&Qe<=16||Q>=X)fe._tickround="M";else if(Q>=Z&&Qe<=19||Q>=k)fe._tickround="S";else{var it=fe.l2r(Je+Q).replace(/^-/,"").length;fe._tickround=Math.max(Qe,it)-20,fe._tickround<0&&(fe._tickround=4)}}else if(c(Q)||Q.charAt(0)==="L"){var rt=fe.range.map(fe.r2d||Number);c(Q)||(Q=Number(Q.substr(1))),fe._tickround=2-Math.floor(Math.log(Q)/Math.LN10+.01);var $e=Math.max(Math.abs(rt[0]),Math.abs(rt[1])),je=Math.floor(Math.log($e)/Math.LN10+.01),ct=fe.minexponent===void 0?3:fe.minexponent;Math.abs(je)>ct&&(Fe(fe.exponentformat)&&!We(je)?fe._tickexponent=3*Math.round((je-1)/3):fe._tickexponent=je)}else fe._tickround=null}ce.tickIncrement=function(fe,Q,Je,Ge){var Qe=Je?-1:1;if(c(Q))return s.increment(fe,Qe*Q);var it=Q.charAt(0),rt=Qe*Number(Q.substr(1));if(it==="M")return s.incrementMonth(fe,rt,Ge);if(it==="L")return Math.log(Math.pow(10,fe)+rt)/Math.LN10;if(it==="D"){var $e=Q==="D2"?vt:st,je=fe+Qe*.01,ct=s.roundUp(s.mod(je,1),$e,Je);return Math.floor(je)+Math.log(i.round(Math.pow(10,ct),1))/Math.LN10}throw"unrecognized dtick "+String(Q)},ce.tickFirst=function(fe,Q){var Je=fe.r2l||Number,Ge=s.simpleMap(fe.range,Je,void 0,void 0,Q),Qe=Ge[1]<Ge[0],it=Qe?Math.floor:Math.ceil,rt=P(Ge)[0],$e=fe.dtick,je=Je(fe.tick0);if(c($e)){var ct=it((rt-je)/$e)*$e+je;return(fe.type==="category"||fe.type==="multicategory")&&(ct=s.constrain(ct,0,fe._categories.length-1)),ct}var dt=$e.charAt(0),xt=Number($e.substr(1));if(dt==="M"){for(var yt=0,Lt=je,wt,At,Ot;yt<10;){if(wt=ce.tickIncrement(Lt,$e,Qe,fe.calendar),(wt-rt)*(Lt-rt)<=0)return Qe?Math.min(Lt,wt):Math.max(Lt,wt);At=(rt-(Lt+wt)/2)/(wt-Lt),Ot=dt+(Math.abs(Math.round(At))||1)*xt,Lt=ce.tickIncrement(Lt,Ot,At<0?!Qe:Qe,fe.calendar),yt++}return s.error("tickFirst did not converge",fe),Lt}else{if(dt==="L")return Math.log(it((Math.pow(10,rt)-je)/xt)*xt+je)/Math.LN10;if(dt==="D"){var zt=$e==="D2"?vt:st,Zt=s.roundUp(s.mod(rt,1),zt,Qe);return Math.floor(rt)+Math.log(i.round(Math.pow(10,Zt),1))/Math.LN10}else throw"unrecognized dtick "+String($e)}},ce.tickText=function(fe,Q,Je,Ge){var Qe=Mt(fe,Q),it=fe.tickmode==="array",rt=Je||it,$e=fe.type,je=$e==="category"?fe.d2l_noadd:fe.d2l,ct,dt=function(Ot){var zt=fe.l2p(Ot);return zt>=0&&zt<=fe._length?Ot:null};if(it&&s.isArrayOrTypedArray(fe.ticktext)){var xt=s.simpleMap(fe.range,fe.r2l),yt=(Math.abs(xt[1]-xt[0])-(fe._lBreaks||0))/1e4;for(ct=0;ct<fe.ticktext.length&&!(Math.abs(Q-je(fe.tickvals[ct]))<yt);ct++);if(ct<fe.ticktext.length)return Qe.text=String(fe.ticktext[ct]),Qe.xbnd=[dt(Qe.x-.5),dt(Qe.x+fe.dtick-.5)],Qe}function Lt(Ot){if(Ot===void 0)return!0;if(Je)return Ot==="none";var zt={first:fe._tmin,last:fe._tmax}[Ot];return Ot!=="all"&&Q!==zt}var wt=Je?"never":fe.exponentformat!=="none"&&Lt(fe.showexponent)?"hide":"";if($e==="date"?ot(fe,Qe,Je,rt):$e==="log"?Ct(fe,Qe,Je,rt,wt):$e==="category"?kt(fe,Qe):$e==="multicategory"?St(fe,Qe,Je):tr(fe)?Ue(fe,Qe,Je,rt,wt):Et(fe,Qe,Je,rt,wt),Ge||(fe.tickprefix&&!Lt(fe.showtickprefix)&&(Qe.text=fe.tickprefix+Qe.text),fe.ticksuffix&&!Lt(fe.showticksuffix)&&(Qe.text+=fe.ticksuffix)),fe.labelalias&&fe.labelalias.hasOwnProperty(Qe.text)){var At=fe.labelalias[Qe.text];typeof At=="string"&&(Qe.text=At)}return(fe.tickson==="boundaries"||fe.showdividers)&&(Qe.xbnd=[dt(Qe.x-.5),dt(Qe.x+fe.dtick-.5)]),Qe},ce.hoverLabelText=function(fe,Q,Je){Je&&(fe=s.extendFlat({},fe,{hoverformat:Je}));var Ge=s.isArrayOrTypedArray(Q)?Q[0]:Q,Qe=s.isArrayOrTypedArray(Q)?Q[1]:void 0;if(Qe!==void 0&&Qe!==Ge)return ce.hoverLabelText(fe,Ge,Je)+" - "+ce.hoverLabelText(fe,Qe,Je);var it=fe.type==="log"&&Ge<=0,rt=ce.tickText(fe,fe.c2l(it?-Ge:Ge),"hover").text;return it?Ge===0?"0":B+rt:rt};function Mt(fe,Q,Je){var Ge=fe.tickfont||{};return{x:Q,dx:0,dy:0,text:Je||"",fontSize:Ge.size,font:Ge.family,fontWeight:Ge.weight,fontStyle:Ge.style,fontVariant:Ge.variant,fontTextcase:Ge.textcase,fontLineposition:Ge.lineposition,fontShadow:Ge.shadow,fontColor:Ge.color}}function ot(fe,Q,Je,Ge){var Qe=fe._tickround,it=Je&&fe.hoverformat||ce.getTickFormat(fe);Ge=!it&&Ge,Ge&&(c(Qe)?Qe=4:Qe={y:"m",m:"d",d:"M",M:"S",S:4}[Qe]);var rt=s.formatDate(Q.x,it,Qe,fe._dateFormat,fe.calendar,fe._extraFormat),$e,je=rt.indexOf(`
`);if(je!==-1&&($e=rt.substr(je+1),rt=rt.substr(0,je)),Ge&&($e!==void 0&&(rt==="00:00:00"||rt==="00:00")?(rt=$e,$e=""):rt.length===8&&(rt=rt.replace(/:00$/,""))),$e)if(Je)Qe==="d"?rt+=", "+$e:rt=$e+(rt?", "+rt:"");else if(!fe._inCalcTicks||fe._prevDateHead!==$e)fe._prevDateHead=$e,rt+="<br>"+$e;else{var ct=lr(fe),dt=fe._trueSide||fe.side;(!ct&&dt==="top"||ct&&dt==="bottom")&&(rt+="<br> ")}Q.text=rt}function Ct(fe,Q,Je,Ge,Qe){var it=fe.dtick,rt=Q.x,$e=fe.tickformat,je=typeof it=="string"&&it.charAt(0);if(Qe==="never"&&(Qe=""),Ge&&je!=="L"&&(it="L3",je="L"),$e||je==="L")Q.text=de(Math.pow(10,rt),fe,Qe,Ge);else if(c(it)||je==="D"&&s.mod(rt+.01,1)<.1){var ct=Math.round(rt),dt=Math.abs(ct),xt=fe.exponentformat;xt==="power"||Fe(xt)&&We(ct)?(ct===0?Q.text=1:ct===1?Q.text="10":Q.text="10<sup>"+(ct>1?"":B)+dt+"</sup>",Q.fontSize*=1.25):(xt==="e"||xt==="E")&&dt>2?Q.text="1"+xt+(ct>0?"+":B)+dt:(Q.text=de(Math.pow(10,rt),fe,"","fakehover"),it==="D1"&&fe._id.charAt(0)==="y"&&(Q.dy-=Q.fontSize/6))}else if(je==="D")Q.text=String(Math.round(Math.pow(10,s.mod(rt,1)))),Q.fontSize*=.75;else throw"unrecognized dtick "+String(it);if(fe.dtick==="D1"){var yt=String(Q.text).charAt(0);(yt==="0"||yt==="1")&&(fe._id.charAt(0)==="y"?Q.dx-=Q.fontSize/4:(Q.dy+=Q.fontSize/2,Q.dx+=(fe.range[1]>fe.range[0]?1:-1)*Q.fontSize*(rt<0?.5:.25)))}}function kt(fe,Q){var Je=fe._categories[Math.round(Q.x)];Je===void 0&&(Je=""),Q.text=String(Je)}function St(fe,Q,Je){var Ge=Math.round(Q.x),Qe=fe._categories[Ge]||[],it=Qe[1]===void 0?"":String(Qe[1]),rt=Qe[0]===void 0?"":String(Qe[0]);Je?Q.text=rt+" - "+it:(Q.text=it,Q.text2=rt)}function Et(fe,Q,Je,Ge,Qe){Qe==="never"?Qe="":fe.showexponent==="all"&&Math.abs(Q.x/fe.dtick)<1e-6&&(Qe="hide"),Q.text=de(Q.x,fe,Qe,Ge)}function Ue(fe,Q,Je,Ge,Qe){if(fe.thetaunit==="radians"&&!Je){var it=Q.x/180;if(it===0)Q.text="0";else{var rt=De(it);if(rt[1]>=100)Q.text=de(s.deg2rad(Q.x),fe,Qe,Ge);else{var $e=Q.x<0;rt[1]===1?rt[0]===1?Q.text="":Q.text=rt[0]+"":Q.text=["<sup>",rt[0],"</sup>","","<sub>",rt[1],"</sub>",""].join(""),$e&&(Q.text=B+Q.text)}}}else Q.text=de(Q.x,fe,Qe,Ge)}function De(fe){function Q($e,je){return Math.abs($e-je)<=1e-6}function Je($e,je){return Q(je,0)?$e:Je(je,$e%je)}function Ge($e){for(var je=1;!Q(Math.round($e*je)/je,$e);)je*=10;return je}var Qe=Ge(fe),it=fe*Qe,rt=Math.abs(Je(it,Qe));return[Math.round(it/rt),Math.round(Qe/rt)]}var Ie=["f","p","n","","m","","k","M","G","T"];function Fe(fe){return fe==="SI"||fe==="B"}function We(fe){return fe>14||fe<-15}function de(fe,Q,Je,Ge){var Qe=fe<0,it=Q._tickround,rt=Je||Q.exponentformat||"B",$e=Q._tickexponent,je=ce.getTickFormat(Q),ct=Q.separatethousands;if(Ge){var dt={exponentformat:rt,minexponent:Q.minexponent,dtick:Q.showexponent==="none"?Q.dtick:c(fe)&&Math.abs(fe)||1,range:Q.showexponent==="none"?Q.range.map(Q.r2d):[0,fe||1]};lt(dt),it=(Number(dt._tickround)||0)+4,$e=dt._tickexponent,Q.hoverformat&&(je=Q.hoverformat)}if(je)return Q._numFormat(je)(fe).replace(/-/g,B);var xt=Math.pow(10,-it)/2;if(rt==="none"&&($e=0),fe=Math.abs(fe),fe<xt)fe="0",Qe=!1;else{if(fe+=xt,$e&&(fe*=Math.pow(10,-$e),it+=$e),it===0)fe=String(Math.floor(fe));else if(it<0){fe=String(Math.round(fe)),fe=fe.substr(0,fe.length+it);for(var yt=it;yt<0;yt++)fe+="0"}else{fe=String(fe);var Lt=fe.indexOf(".")+1;Lt&&(fe=fe.substr(0,Lt+it).replace(/\.?0+$/,""))}fe=s.numSeparate(fe,Q._separators,ct)}if($e&&rt!=="hide"){Fe(rt)&&We($e)&&(rt="power");var wt;$e<0?wt=B+-$e:rt!=="power"?wt="+"+$e:wt=String($e),rt==="e"||rt==="E"?fe+=rt+wt:rt==="power"?fe+="10<sup>"+wt+"</sup>":rt==="B"&&$e===9?fe+="B":Fe(rt)&&(fe+=Ie[$e/3+5])}return Qe?B+fe:fe}ce.getTickFormat=function(fe){var Q;function Je(je){return typeof je!="string"?je:Number(je.replace("M",""))*L}function Ge(je,ct){var dt=["L","D"];if(typeof je==typeof ct){if(typeof je=="number")return je-ct;var xt=dt.indexOf(je.charAt(0)),yt=dt.indexOf(ct.charAt(0));return xt===yt?Number(je.replace(/(L|D)/g,""))-Number(ct.replace(/(L|D)/g,"")):xt-yt}else return typeof je=="number"?1:-1}function Qe(je,ct,dt){var xt=dt||function(wt){return wt},yt=ct[0],Lt=ct[1];return(!yt&&typeof yt!="number"||xt(yt)<=xt(je))&&(!Lt&&typeof Lt!="number"||xt(Lt)>=xt(je))}function it(je,ct){var dt=ct[0]===null,xt=ct[1]===null,yt=Ge(je,ct[0])>=0,Lt=Ge(je,ct[1])<=0;return(dt||yt)&&(xt||Lt)}var rt,$e;if(fe.tickformatstops&&fe.tickformatstops.length>0)switch(fe.type){case"date":case"linear":{for(Q=0;Q<fe.tickformatstops.length;Q++)if($e=fe.tickformatstops[Q],$e.enabled&&Qe(fe.dtick,$e.dtickrange,Je)){rt=$e;break}break}case"log":{for(Q=0;Q<fe.tickformatstops.length;Q++)if($e=fe.tickformatstops[Q],$e.enabled&&it(fe.dtick,$e.dtickrange)){rt=$e;break}break}}return rt?rt.value:fe.tickformat},ce.getSubplots=function(fe,Q){var Je=fe._fullLayout._subplots,Ge=Je.cartesian.concat(Je.gl2d||[]),Qe=Q?ce.findSubplotsWithAxis(Ge,Q):Ge;return Qe.sort(function(it,rt){var $e=it.substr(1).split("y"),je=rt.substr(1).split("y");return $e[0]===je[0]?+$e[1]-+je[1]:+$e[0]-+je[0]}),Qe},ce.findSubplotsWithAxis=function(fe,Q){for(var Je=new RegExp(Q._id.charAt(0)==="x"?"^"+Q._id+"y":Q._id+"$"),Ge=[],Qe=0;Qe<fe.length;Qe++){var it=fe[Qe];Je.test(it)&&Ge.push(it)}return Ge},ce.makeClipPaths=function(fe){var Q=fe._fullLayout;if(!Q._hasOnlyLargeSploms){var Je={_offset:0,_length:Q.width,_id:""},Ge={_offset:0,_length:Q.height,_id:""},Qe=ce.list(fe,"x",!0),it=ce.list(fe,"y",!0),rt=[],$e,je;for($e=0;$e<Qe.length;$e++)for(rt.push({x:Qe[$e],y:Ge}),je=0;je<it.length;je++)$e===0&&rt.push({x:Je,y:it[je]}),rt.push({x:Qe[$e],y:it[je]});var ct=Q._clips.selectAll(".axesclip").data(rt,function(dt){return dt.x._id+dt.y._id});ct.enter().append("clipPath").classed("axesclip",!0).attr("id",function(dt){return"clip"+Q._uid+dt.x._id+dt.y._id}).append("rect"),ct.exit().remove(),ct.each(function(dt){i.select(this).select("rect").attr({x:dt.x._offset||0,y:dt.y._offset||0,width:dt.x._length||1,height:dt.y._length||1})})}},ce.draw=function(fe,Q,Je){var Ge=fe._fullLayout;Q==="redraw"&&Ge._paper.selectAll("g.subplot").each(function(je){var ct=je[0],dt=Ge._plots[ct];if(dt){var xt=dt.xaxis,yt=dt.yaxis;dt.xaxislayer.selectAll("."+xt._id+"tick").remove(),dt.yaxislayer.selectAll("."+yt._id+"tick").remove(),dt.xaxislayer.selectAll("."+xt._id+"tick2").remove(),dt.yaxislayer.selectAll("."+yt._id+"tick2").remove(),dt.xaxislayer.selectAll("."+xt._id+"divider").remove(),dt.yaxislayer.selectAll("."+yt._id+"divider").remove(),dt.minorGridlayer&&dt.minorGridlayer.selectAll("path").remove(),dt.gridlayer&&dt.gridlayer.selectAll("path").remove(),dt.zerolinelayer&&dt.zerolinelayer.selectAll("path").remove(),Ge._infolayer.select(".g-"+xt._id+"title").remove(),Ge._infolayer.select(".g-"+yt._id+"title").remove()}});var Qe=!Q||Q==="redraw"?ce.listIds(fe):Q,it=ce.list(fe),rt=it.filter(function(je){return je.autoshift}).map(function(je){return je.overlaying});Qe.map(function(je){var ct=ce.getFromId(fe,je);if(ct.tickmode==="sync"&&ct.overlaying){var dt=Qe.findIndex(function(xt){return xt===ct.overlaying});dt>=0&&Qe.unshift(Qe.splice(dt,1).shift())}});var $e={false:{left:0,right:0}};return s.syncOrAsync(Qe.map(function(je){return function(){if(je){var ct=ce.getFromId(fe,je);Je||(Je={}),Je.axShifts=$e,Je.overlayingShiftedAx=rt;var dt=ce.drawOne(fe,ct,Je);return ct._shiftPusher&&xr(ct,ct._fullDepth||0,$e,!0),ct._r=ct.range.slice(),ct._rl=s.simpleMap(ct._r,ct.r2l),dt}}}))},ce.drawOne=function(fe,Q,Je){Je=Je||{};var Ge=Je.axShifts||{},Qe=Je.overlayingShiftedAx||[],it,rt,$e;Q.setScale();var je=fe._fullLayout,ct=Q._id,dt=ct.charAt(0),xt=ce.counterLetter(ct),yt=je._plots[Q._mainSubplot];if(!yt)return;if(Q._shiftPusher=Q.autoshift||Qe.indexOf(Q._id)!==-1||Qe.indexOf(Q.overlaying)!==-1,Q._shiftPusher&Q.anchor==="free"){var Lt=Q.linewidth/2||0;Q.ticks==="inside"&&(Lt+=Q.ticklen),xr(Q,Lt,Ge,!0),xr(Q,Q.shift||0,Ge,!1)}(Je.skipTitle!==!0||Q._shift===void 0)&&(Q._shift=er(Q,Ge));var wt=yt[dt+"axislayer"],At=Q._mainLinePosition,Ot=At+=Q._shift,zt=Q._mainMirrorPosition,Zt=Q._vals=ce.calcTicks(Q),Kt=[Q.mirror,Ot,zt].join("_");for(it=0;it<Zt.length;it++)Zt[it].axInfo=Kt;Q._selections={},Q._tickAngles&&(Q._prevTickAngles=Q._tickAngles),Q._tickAngles={},Q._depth=null;var cr={};function or(Xn){var va=ct+(Xn||"tick");return cr[va]||(cr[va]=Ne(Q,va,Ot)),cr[va]}if(Q.visible){var nr=ce.makeTransTickFn(Q),mr=ce.makeTransTickLabelFn(Q),pr,Ar,en=Q.ticks==="inside",Lr=Q.ticks==="outside";if(Q.tickson==="boundaries"){var Pr=he(Q,Zt);Ar=ce.clipEnds(Q,Pr),pr=en?Ar:Pr}else Ar=ce.clipEnds(Q,Zt),pr=en&&Q.ticklabelmode!=="period"?Ar:Zt;var nn=Q._gridVals=Ar,Dn=Pe(Q,Zt);if(!je._hasOnlyLargeSploms){var Pn=Q._subplotsWith,_r={};for(it=0;it<Pn.length;it++){rt=Pn[it],$e=je._plots[rt];var mn=$e[xt+"axis"],Mr=mn._mainAxis._id;if(!_r[Mr]){_r[Mr]=1;var Br=dt==="x"?"M0,"+mn._offset+"v"+mn._length:"M"+mn._offset+",0h"+mn._length;ce.drawGrid(fe,Q,{vals:nn,counterAxis:mn,layer:$e.gridlayer.select("."+ct),minorLayer:$e.minorGridlayer.select("."+ct),path:Br,transFn:nr}),ce.drawZeroLine(fe,Q,{counterAxis:mn,layer:$e.zerolinelayer,path:Br,transFn:nr})}}}var zr,Wr=ce.getTickSigns(Q),Gr=ce.getTickSigns(Q,"minor");if(Q.ticks||Q.minor&&Q.minor.ticks){var Qr=ce.makeTickPath(Q,Ot,Wr[2]),Ur=ce.makeTickPath(Q,Ot,Gr[2],{minor:!0}),an,Un,xn,Jr;if(Q._anchorAxis&&Q.mirror&&Q.mirror!==!0?(an=ce.makeTickPath(Q,zt,Wr[3]),Un=ce.makeTickPath(Q,zt,Gr[3],{minor:!0}),xn=Qr+an,Jr=Ur+Un):(an="",Un="",xn=Qr,Jr=Ur),Q.showdividers&&Lr&&Q.tickson==="boundaries"){var di={};for(it=0;it<Dn.length;it++)di[Dn[it].x]=1;zr=function(Xn){return di[Xn.x]?an:xn}}else zr=function(Xn){return Xn.minor?Jr:xn}}if(ce.drawTicks(fe,Q,{vals:pr,layer:wt,path:zr,transFn:nr}),Q.mirror==="allticks"){var ni=Object.keys(Q._linepositions||{});for(it=0;it<ni.length;it++){rt=ni[it],$e=je._plots[rt];var Bn=Q._linepositions[rt]||[],jn=Bn[0],aa=Bn[1],oa=Bn[2],_i=ce.makeTickPath(Q,jn,oa?Wr[0]:Gr[0],{minor:oa})+ce.makeTickPath(Q,aa,oa?Wr[1]:Gr[1],{minor:oa});ce.drawTicks(fe,Q,{vals:pr,layer:$e[dt+"axislayer"],path:_i,transFn:nr})}}var pi=[];if(pi.push(function(){return ce.drawLabels(fe,Q,{vals:Zt,layer:wt,plotinfo:$e,transFn:mr,labelFns:ce.makeLabelFns(Q,Ot)})}),Q.type==="multicategory"){var lo={x:2,y:10}[dt];pi.push(function(){var Xn={x:"height",y:"width"}[dt],va=or()[Xn]+lo+(Q._tickAngles[ct+"tick"]?Q.tickfont.size*ge:0);return ce.drawLabels(fe,Q,{vals:Ee(Q,Zt),layer:wt,cls:ct+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:nr,labelFns:ce.makeLabelFns(Q,Ot+va*Wr[4])})}),pi.push(function(){return Q._depth=Wr[4]*(or("tick2")[Q.side]-Ot),Be(fe,Q,{vals:Dn,layer:wt,path:ce.makeTickPath(Q,Ot,Wr[4],{len:Q._depth}),transFn:nr})})}else Q.title.hasOwnProperty("standoff")&&pi.push(function(){Q._depth=Wr[4]*(or()[Q.side]-Ot)});var No=l.getComponentMethod("rangeslider","isVisible")(Q);return!Je.skipTitle&&!(No&&Q.side==="bottom")&&pi.push(function(){return Dt(fe,Q)}),pi.push(function(){var Xn=Q.side.charAt(0),va=xe[Q.side].charAt(0),Qi=ce.getPxPosition(fe,Q),qi=Lr?Q.ticklen:0,ln,kn,Ta,uo;(Q.automargin||No||Q._shiftPusher)&&(Q.type==="multicategory"?ln=or("tick2"):(ln=or(),dt==="x"&&Xn==="b"&&(Q._depth=Math.max(ln.width>0?ln.bottom-Qi:0,qi))));var To=0,ps=0;if(Q._shiftPusher&&(To=Math.max(qi,ln.height>0?Xn==="l"?Qi-ln.left:ln.right-Qi:0),Q.title.text!==je._dfltTitle[dt]&&(ps=(Q._titleStandoff||0)+(Q._titleScoot||0),Xn==="l"&&(ps+=ut(Q))),Q._fullDepth=Math.max(To,ps)),Q.automargin){kn={x:0,y:0,r:0,l:0,t:0,b:0};var Za=[0,1],Oo=typeof Q._shift=="number"?Q._shift:0;if(dt==="x"){if(Xn==="b"?kn[Xn]=Q._depth:(kn[Xn]=Q._depth=Math.max(ln.width>0?Qi-ln.top:0,qi),Za.reverse()),ln.width>0){var rs=ln.right-(Q._offset+Q._length);rs>0&&(kn.xr=1,kn.r=rs);var zo=Q._offset-ln.left;zo>0&&(kn.xl=0,kn.l=zo)}}else if(Xn==="l"?(Q._depth=Math.max(ln.height>0?Qi-ln.left:0,qi),kn[Xn]=Q._depth-Oo):(Q._depth=Math.max(ln.height>0?ln.right-Qi:0,qi),kn[Xn]=Q._depth+Oo,Za.reverse()),ln.height>0){var bo=ln.bottom-(Q._offset+Q._length);bo>0&&(kn.yb=0,kn.b=bo);var Ao=Q._offset-ln.top;Ao>0&&(kn.yt=1,kn.t=Ao)}kn[xt]=Q.anchor==="free"?Q.position:Q._anchorAxis.domain[Za[0]],Q.title.text!==je._dfltTitle[dt]&&(kn[Xn]+=ut(Q)+(Q.title.standoff||0)),Q.mirror&&Q.anchor!=="free"&&(Ta={x:0,y:0,r:0,l:0,t:0,b:0},Ta[va]=Q.linewidth,Q.mirror&&Q.mirror!==!0&&(Ta[va]+=qi),Q.mirror===!0||Q.mirror==="ticks"?Ta[xt]=Q._anchorAxis.domain[Za[1]]:(Q.mirror==="all"||Q.mirror==="allticks")&&(Ta[xt]=[Q._counterDomainMin,Q._counterDomainMax][Za[1]]))}No&&(uo=l.getComponentMethod("rangeslider","autoMarginOpts")(fe,Q)),typeof Q.automargin=="string"&&(Me(kn,Q.automargin),Me(Ta,Q.automargin)),a.autoMargin(fe,Ft(Q),kn),a.autoMargin(fe,qt(Q),Ta),a.autoMargin(fe,Gt(Q),uo)}),s.syncOrAsync(pi)}};function Me(fe,Q){if(fe){var Je=Object.keys(ee).reduce(function(Ge,Qe){return Q.indexOf(Qe)!==-1&&ee[Qe].forEach(function(it){Ge[it]=1}),Ge},{});Object.keys(fe).forEach(function(Ge){Je[Ge]||(Ge.length===1?fe[Ge]=0:delete fe[Ge])})}}function he(fe,Q){var Je=[],Ge,Qe=function(it,rt){var $e=it.xbnd[rt];$e!==null&&Je.push(s.extendFlat({},it,{x:$e}))};if(Q.length){for(Ge=0;Ge<Q.length;Ge++)Qe(Q[Ge],0);Qe(Q[Ge-1],1)}return Je}function Ee(fe,Q){for(var Je=[],Ge={},Qe=0;Qe<Q.length;Qe++){var it=Q[Qe];Ge[it.text2]?Ge[it.text2].push(it.x):Ge[it.text2]=[it.x]}for(var rt in Ge)Je.push(Mt(fe,s.interp(Ge[rt],.5),rt));return Je}function Pe(fe,Q){var Je=[],Ge,Qe,it=Q.length&&Q[Q.length-1].x<Q[0].x,rt=function(je,ct){var dt=je.xbnd[ct];dt!==null&&Je.push(s.extendFlat({},je,{x:dt}))};if(fe.showdividers&&Q.length){for(Ge=0;Ge<Q.length;Ge++){var $e=Q[Ge];$e.text2!==Qe&&rt($e,it?1:0),Qe=$e.text2}rt(Q[Ge-1],it?0:1)}return Je}function Ne(fe,Q,Je){var Ge,Qe,it,rt;if(fe._selections[Q].size())Ge=1/0,Qe=-1/0,it=1/0,rt=-1/0,fe._selections[Q].each(function(){var je=Vt(this),ct=y.bBox(je.node().parentNode);Ge=Math.min(Ge,ct.top),Qe=Math.max(Qe,ct.bottom),it=Math.min(it,ct.left),rt=Math.max(rt,ct.right)});else{var $e=ce.makeLabelFns(fe,Je);Ge=Qe=$e.yFn({dx:0,dy:0,fontSize:0}),it=rt=$e.xFn({dx:0,dy:0,fontSize:0})}return{top:Ge,bottom:Qe,left:it,right:rt,height:Qe-Ge,width:rt-it}}ce.getTickSigns=function(fe,Q){var Je=fe._id.charAt(0),Ge={x:"top",y:"right"}[Je],Qe=fe.side===Ge?1:-1,it=[-1,1,Qe,-Qe],rt=Q?(fe.minor||{}).ticks:fe.ticks;return rt!=="inside"==(Je==="x")&&(it=it.map(function($e){return-$e})),fe.side&&it.push({l:-1,t:-1,r:1,b:1}[fe.side.charAt(0)]),it},ce.makeTransTickFn=function(fe){return fe._id.charAt(0)==="x"?function(Q){return v(fe._offset+fe.l2p(Q.x),0)}:function(Q){return v(0,fe._offset+fe.l2p(Q.x))}},ce.makeTransTickLabelFn=function(fe){var Q=nt(fe),Je=Q[0],Ge=Q[1];return fe._id.charAt(0)==="x"?function(Qe){return v(Je+fe._offset+fe.l2p(ht(Qe)),Ge)}:function(Qe){return v(Ge,Je+fe._offset+fe.l2p(ht(Qe)))}};function ht(fe){return fe.periodX!==void 0?fe.periodX:fe.x}function nt(fe){var Q=fe.ticklabelposition||"",Je=function(Lt){return Q.indexOf(Lt)!==-1},Ge=Je("top"),Qe=Je("left"),it=Je("right"),rt=Je("bottom"),$e=Je("inside"),je=rt||Qe||Ge||it;if(!je&&!$e)return[0,0];var ct=fe.side,dt=je?(fe.tickwidth||0)/2:0,xt=Se,yt=fe.tickfont?fe.tickfont.size:12;return(rt||Ge)&&(dt+=yt*se,xt+=(fe.linewidth||0)/2),(Qe||it)&&(dt+=(fe.linewidth||0)/2,xt+=Se),$e&&ct==="top"&&(xt-=yt*(1-se)),(Qe||Ge)&&(dt=-dt),(ct==="bottom"||ct==="right")&&(xt=-xt),[je?dt:0,$e?xt:0]}ce.makeTickPath=function(fe,Q,Je,Ge){Ge||(Ge={});var Qe=Ge.minor;if(Qe&&!fe.minor)return"";var it=Ge.len!==void 0?Ge.len:Qe?fe.minor.ticklen:fe.ticklen,rt=fe._id.charAt(0),$e=(fe.linewidth||1)/2;return rt==="x"?"M0,"+(Q+$e*Je)+"v"+it*Je:"M"+(Q+$e*Je)+",0h"+it*Je},ce.makeLabelFns=function(fe,Q,Je){var Ge=fe.ticklabelposition||"",Qe=function(Pr){return Ge.indexOf(Pr)!==-1},it=Qe("top"),rt=Qe("left"),$e=Qe("right"),je=Qe("bottom"),ct=je||rt||it||$e,dt=Qe("inside"),xt=Ge==="inside"&&fe.ticks==="inside"||!dt&&fe.ticks==="outside"&&fe.tickson!=="boundaries",yt=0,Lt=0,wt=xt?fe.ticklen:0;if(dt?wt*=-1:ct&&(wt=0),xt&&(yt+=wt,Je)){var At=s.deg2rad(Je);yt=wt*Math.cos(At)+1,Lt=wt*Math.sin(At)}fe.showticklabels&&(xt||fe.showline)&&(yt+=.2*fe.tickfont.size),yt+=(fe.linewidth||1)/2*(dt?-1:1);var Ot={labelStandoff:yt,labelShift:Lt},zt,Zt,Kt,cr,or=0,nr=fe.side,mr=fe._id.charAt(0),pr=fe.tickangle,Ar;if(mr==="x")Ar=!dt&&nr==="bottom"||dt&&nr==="top",cr=Ar?1:-1,dt&&(cr*=-1),zt=Lt*cr,Zt=Q+yt*cr,Kt=Ar?1:-.2,Math.abs(pr)===90&&(dt?Kt+=re:pr===-90&&nr==="bottom"?Kt=se:pr===90&&nr==="top"?Kt=re:Kt=.5,or=re/2*(pr/90)),Ot.xFn=function(Pr){return Pr.dx+zt+or*Pr.fontSize},Ot.yFn=function(Pr){return Pr.dy+Zt+Pr.fontSize*Kt},Ot.anchorFn=function(Pr,nn){if(ct){if(rt)return"end";if($e)return"start"}return!c(nn)||nn===0||nn===180?"middle":nn*cr<0!==dt?"end":"start"},Ot.heightFn=function(Pr,nn,Dn){return nn<-60||nn>60?-.5*Dn:fe.side==="top"!==dt?-Dn:0};else if(mr==="y"){if(Ar=!dt&&nr==="left"||dt&&nr==="right",cr=Ar?1:-1,dt&&(cr*=-1),zt=yt,Zt=Lt*cr,Kt=0,!dt&&Math.abs(pr)===90&&(pr===-90&&nr==="left"||pr===90&&nr==="right"?Kt=se:Kt=.5),dt){var en=c(pr)?+pr:0;if(en!==0){var Lr=s.deg2rad(en);or=Math.abs(Math.sin(Lr))*se*cr,Kt=0}}Ot.xFn=function(Pr){return Pr.dx+Q-(zt+Pr.fontSize*Kt)*cr+or*Pr.fontSize},Ot.yFn=function(Pr){return Pr.dy+Zt+Pr.fontSize*re},Ot.anchorFn=function(Pr,nn){return c(nn)&&Math.abs(nn)===90?"middle":Ar?"end":"start"},Ot.heightFn=function(Pr,nn,Dn){return fe.side==="right"&&(nn*=-1),nn<-30?-Dn:nn<30?-.5*Dn:0}}return Ot};function Ye(fe){return[fe.text,fe.x,fe.axInfo,fe.font,fe.fontSize,fe.fontColor].join("_")}ce.drawTicks=function(fe,Q,Je){Je=Je||{};var Ge=Q._id+"tick",Qe=[].concat(Q.minor&&Q.minor.ticks?Je.vals.filter(function(rt){return rt.minor&&!rt.noTick}):[]).concat(Q.ticks?Je.vals.filter(function(rt){return!rt.minor&&!rt.noTick}):[]),it=Je.layer.selectAll("path."+Ge).data(Qe,Ye);it.exit().remove(),it.enter().append("path").classed(Ge,1).classed("ticks",1).classed("crisp",Je.crisp!==!1).each(function(rt){return o.stroke(i.select(this),rt.minor?Q.minor.tickcolor:Q.tickcolor)}).style("stroke-width",function(rt){return y.crispRound(fe,rt.minor?Q.minor.tickwidth:Q.tickwidth,1)+"px"}).attr("d",Je.path).style("display",null),yr(Q,[G]),it.attr("transform",Je.transFn)},ce.drawGrid=function(fe,Q,Je){if(Je=Je||{},Q.tickmode!=="sync"){var Ge=Q._id+"grid",Qe=Q.minor&&Q.minor.showgrid,it=Qe?Je.vals.filter(function(zt){return zt.minor}):[],rt=Q.showgrid?Je.vals.filter(function(zt){return!zt.minor}):[],$e=Je.counterAxis;if($e&&ce.shouldShowZeroLine(fe,Q,$e))for(var je=Q.tickmode==="array",ct=0;ct<rt.length;ct++){var dt=rt[ct].x;if(je?!dt:Math.abs(dt)<Q.dtick/100)if(rt=rt.slice(0,ct).concat(rt.slice(ct+1)),je)ct--;else break}Q._gw=y.crispRound(fe,Q.gridwidth,1);for(var xt=Qe?y.crispRound(fe,Q.minor.gridwidth,1):0,yt=Je.layer,Lt=Je.minorLayer,wt=1;wt>=0;wt--){var At=wt?yt:Lt;if(At){var Ot=At.selectAll("path."+Ge).data(wt?rt:it,Ye);Ot.exit().remove(),Ot.enter().append("path").classed(Ge,1).classed("crisp",Je.crisp!==!1),Ot.attr("transform",Je.transFn).attr("d",Je.path).each(function(zt){return o.stroke(i.select(this),zt.minor?Q.minor.gridcolor:Q.gridcolor||"#ddd")}).style("stroke-dasharray",function(zt){return y.dashStyle(zt.minor?Q.minor.griddash:Q.griddash,zt.minor?Q.minor.gridwidth:Q.gridwidth)}).style("stroke-width",function(zt){return(zt.minor?xt:Q._gw)+"px"}).style("display",null),typeof Je.path=="function"&&Ot.attr("d",Je.path)}}yr(Q,[oe,Y])}},ce.drawZeroLine=function(fe,Q,Je){Je=Je||Je;var Ge=Q._id+"zl",Qe=ce.shouldShowZeroLine(fe,Q,Je.counterAxis),it=Je.layer.selectAll("path."+Ge).data(Qe?[{x:0,id:Q._id}]:[]);it.exit().remove(),it.enter().append("path").classed(Ge,1).classed("zl",1).classed("crisp",Je.crisp!==!1).each(function(){Je.layer.selectAll("path").sort(function(rt,$e){return U(rt.id,$e.id)})}),it.attr("transform",Je.transFn).attr("d",Je.path).call(o.stroke,Q.zerolinecolor||o.defaultLine).style("stroke-width",y.crispRound(fe,Q.zerolinewidth,Q._gw||1)+"px").style("display",null),yr(Q,[ne])},ce.drawLabels=function(fe,Q,Je){Je=Je||{};var Ge=fe._fullLayout,Qe=Q._id,it=Je.cls||Qe+"tick",rt=Je.vals.filter(function(Mr){return Mr.text}),$e=Je.labelFns,je=Je.secondary?0:Q.tickangle,ct=(Q._prevTickAngles||{})[it],dt=Je.layer.selectAll("g."+it).data(Q.showticklabels?rt:[],Ye),xt=[];dt.enter().append("g").classed(it,1).append("text").attr("text-anchor","middle").each(function(Mr){var Br=i.select(this),zr=fe._promises.length;Br.call(d.positionText,$e.xFn(Mr),$e.yFn(Mr)).call(y.font,{family:Mr.font,size:Mr.fontSize,color:Mr.fontColor,weight:Mr.fontWeight,style:Mr.fontStyle,variant:Mr.fontVariant,textcase:Mr.fontTextcase,lineposition:Mr.fontLineposition,shadow:Mr.fontShadow}).text(Mr.text).call(d.convertToTspans,fe),fe._promises[zr]?xt.push(fe._promises.pop().then(function(){yt(Br,je)})):yt(Br,je)}),yr(Q,[K]),dt.exit().remove(),Je.repositionOnUpdate&&dt.each(function(Mr){i.select(this).select("text").call(d.positionText,$e.xFn(Mr),$e.yFn(Mr))});function yt(Mr,Br){Mr.each(function(zr){var Wr=i.select(this),Gr=Wr.select(".text-math-group"),Qr=$e.anchorFn(zr,Br),Ur=Je.transFn.call(Wr.node(),zr)+(c(Br)&&+Br!=0?" rotate("+Br+","+$e.xFn(zr)+","+($e.yFn(zr)-zr.fontSize/2)+")":""),an=d.lineCount(Wr),Un=ge*zr.fontSize,xn=$e.heightFn(zr,c(Br)?+Br:0,(an-1)*Un);if(xn&&(Ur+=v(0,xn)),Gr.empty()){var Jr=Wr.select("text");Jr.attr({transform:Ur,"text-anchor":Qr}),Jr.style("opacity",1),Q._adjustTickLabelsOverflow&&Q._adjustTickLabelsOverflow()}else{var di=y.bBox(Gr.node()).width,ni=di*{end:-.5,start:.5}[Qr];Gr.attr("transform",Ur+v(ni,0))}})}Q._adjustTickLabelsOverflow=function(){var Mr=Q.ticklabeloverflow;if(!(!Mr||Mr==="allow")){var Br=Mr.indexOf("hide")!==-1,zr=Q._id.charAt(0)==="x",Wr=0,Gr=zr?fe._fullLayout.width:fe._fullLayout.height;if(Mr.indexOf("domain")!==-1){var Qr=s.simpleMap(Q.range,Q.r2l);Wr=Q.l2p(Qr[0])+Q._offset,Gr=Q.l2p(Qr[1])+Q._offset}var Ur=Math.min(Wr,Gr),an=Math.max(Wr,Gr),Un=Q.side,xn=1/0,Jr=-1/0;dt.each(function(jn){var aa=i.select(this),oa=aa.select(".text-math-group");if(oa.empty()){var _i=y.bBox(aa.node()),pi=0;zr?(_i.right>an||_i.left<Ur)&&(pi=1):(_i.bottom>an||_i.top+(Q.tickangle?0:jn.fontSize/4)<Ur)&&(pi=1);var lo=aa.select("text");pi?Br&&lo.style("opacity",0):(lo.style("opacity",1),Un==="bottom"||Un==="right"?xn=Math.min(xn,zr?_i.top:_i.left):xn=-1/0,Un==="top"||Un==="left"?Jr=Math.max(Jr,zr?_i.bottom:_i.right):Jr=1/0)}});for(var di in Ge._plots){var ni=Ge._plots[di];if(!(Q._id!==ni.xaxis._id&&Q._id!==ni.yaxis._id)){var Bn=zr?ni.yaxis:ni.xaxis;Bn&&(Bn["_visibleLabelMin_"+Q._id]=xn,Bn["_visibleLabelMax_"+Q._id]=Jr)}}}},Q._hideCounterAxisInsideTickLabels=function(Mr){var Br=Q._id.charAt(0)==="x",zr=[];for(var Wr in Ge._plots){var Gr=Ge._plots[Wr];Q._id!==Gr.xaxis._id&&Q._id!==Gr.yaxis._id||zr.push(Br?Gr.yaxis:Gr.xaxis)}zr.forEach(function(Qr,Ur){Qr&&lr(Qr)&&(Mr||[ne,Y,oe,G,K]).forEach(function(an){var Un=an.K==="tick"&&an.L==="text"&&Q.ticklabelmode==="period",xn=Ge._plots[Q._mainSubplot],Jr;an.K===ne.K?Jr=xn.zerolinelayer.selectAll("."+Q._id+"zl"):an.K===Y.K?Jr=xn.minorGridlayer.selectAll("."+Q._id):an.K===oe.K?Jr=xn.gridlayer.selectAll("."+Q._id):Jr=xn[Q._id.charAt(0)+"axislayer"],Jr.each(function(){var di=i.select(this);an.L&&(di=di.selectAll(an.L)),di.each(function(ni){var Bn=Q.l2p(Un?ht(ni):ni.x)+Q._offset,jn=i.select(this);Bn<Q["_visibleLabelMax_"+Qr._id]&&Bn>Q["_visibleLabelMin_"+Qr._id]?jn.style("display","none"):an.K==="tick"&&!Ur&&jn.style("display",null)})})})})},yt(dt,ct+1?ct:je);function Lt(){return xt.length&&Promise.all(xt)}var wt=null;function At(){if(yt(dt,je),rt.length&&Q.autotickangles&&(Q.type!=="log"||String(Q.dtick).charAt(0)!=="D")){wt=Q.autotickangles[0];var Mr=0,Br=[],zr,Wr=1;dt.each(function(ln){Mr=Math.max(Mr,ln.fontSize);var kn=Q.l2p(ln.x),Ta=Vt(this),uo=y.bBox(Ta.node());Wr=Math.max(Wr,d.lineCount(Ta)),Br.push({top:0,bottom:10,height:10,left:kn-uo.width/2,right:kn+uo.width/2+2,width:uo.width+2})});var Gr=(Q.tickson==="boundaries"||Q.showdividers)&&!Je.secondary,Qr=rt.length,Ur=Math.abs((rt[Qr-1].x-rt[0].x)*Q._m)/(Qr-1),an=Gr?Ur/2:Ur,Un=Gr?Q.ticklen:Mr*1.25*Wr,xn=Math.sqrt(Math.pow(an,2)+Math.pow(Un,2)),Jr=an/xn,di=Q.autotickangles.map(function(ln){return ln*Math.PI/180}),ni=di.find(function(ln){return Math.abs(Math.cos(ln))<=Jr});ni===void 0&&(ni=di.reduce(function(ln,kn){return Math.abs(Math.cos(ln))<Math.abs(Math.cos(kn))?ln:kn},di[0]));var Bn=ni*(180/Math.PI);if(Gr){var jn=2;for(Q.ticks&&(jn+=Q.tickwidth/2),zr=0;zr<Br.length;zr++){var aa=rt[zr].xbnd,oa=Br[zr];if(aa[0]!==null&&oa.left-Q.l2p(aa[0])<jn||aa[1]!==null&&Q.l2p(aa[1])-oa.right<jn){wt=Bn;break}}}else{var _i=Q.ticklabelposition||"",pi=function(ln){return _i.indexOf(ln)!==-1},lo=pi("top"),No=pi("left"),Xn=pi("right"),va=pi("bottom"),Qi=va||No||lo||Xn,qi=Qi?(Q.tickwidth||0)+2*Se:0;for(zr=0;zr<Br.length-1;zr++)if(s.bBoxIntersect(Br[zr],Br[zr+1],qi)){wt=Bn;break}}wt&&yt(dt,wt)}}Q._selections&&(Q._selections[it]=dt);var Ot=[Lt];Q.automargin&&Ge._redrawFromAutoMarginCount&&ct===90?(wt=ct,Ot.push(function(){yt(dt,ct)})):Ot.push(At),Q._tickAngles&&Ot.push(function(){Q._tickAngles[it]=wt===null?c(je)?je:0:wt});var zt=function(){var Mr=0,Br=0;return dt.each(function(zr,Wr){var Gr=Vt(this),Qr=Gr.select(".text-math-group");if(Qr.empty()){var Ur;Q._vals[Wr]&&(Ur=Q._vals[Wr].bb||y.bBox(Gr.node()),Q._vals[Wr].bb=Ur),Mr=Math.max(Mr,Ur.width),Br=Math.max(Br,Ur.height)}}),{labelsMaxW:Mr,labelsMaxH:Br}},Zt=Q._anchorAxis;if(Zt&&(Zt.autorange||Zt.insiderange)&&lr(Q)&&!W(Ge,Q._id)&&(Ge._insideTickLabelsUpdaterange||(Ge._insideTickLabelsUpdaterange={}),Zt.autorange&&(Ge._insideTickLabelsUpdaterange[Zt._name+".autorange"]=Zt.autorange,Ot.push(zt)),Zt.insiderange)){var Kt=zt(),cr=Q._id.charAt(0)==="y"?Kt.labelsMaxW:Kt.labelsMaxH;cr+=2*Se,Q.ticklabelposition==="inside"&&(cr+=Q.ticklen||0);var or=Q.side==="right"||Q.side==="top"?1:-1,nr=or===1?1:0,mr=or===1?0:1,pr=[];pr[mr]=Zt.range[mr];var Ar=Zt.range,en=Zt.r2p(Ar[nr]),Lr=Zt.r2p(Ar[mr]),Pr=Ge._insideTickLabelsUpdaterange[Zt._name+".range"];if(Pr){var nn=Zt.r2p(Pr[nr]),Dn=Zt.r2p(Pr[mr]),Pn=or*(Q._id.charAt(0)==="y"?1:-1);Pn*en<Pn*nn&&(en=nn,pr[nr]=Ar[nr]=Pr[nr]),Pn*Lr>Pn*Dn&&(Lr=Dn,pr[mr]=Ar[mr]=Pr[mr])}var _r=Math.abs(Lr-en);_r-cr>0?(_r-=cr,cr*=1+cr/_r):cr=0,Q._id.charAt(0)!=="y"&&(cr=-cr),pr[nr]=Zt.p2r(Zt.r2p(Ar[nr])+or*cr),Zt.autorange==="min"||Zt.autorange==="max reversed"?(pr[0]=null,Zt._rangeInitial0=void 0,Zt._rangeInitial1=void 0):(Zt.autorange==="max"||Zt.autorange==="min reversed")&&(pr[1]=null,Zt._rangeInitial0=void 0,Zt._rangeInitial1=void 0),Ge._insideTickLabelsUpdaterange[Zt._name+".range"]=pr}var mn=s.syncOrAsync(Ot);return mn&&mn.then&&fe._promises.push(mn),mn};function Be(fe,Q,Je){var Ge=Q._id+"divider",Qe=Je.vals,it=Je.layer.selectAll("path."+Ge).data(Qe,Ye);it.exit().remove(),it.enter().insert("path",":first-child").classed(Ge,1).classed("crisp",1).call(o.stroke,Q.dividercolor).style("stroke-width",y.crispRound(fe,Q.dividerwidth,1)+"px"),it.attr("transform",Je.transFn).attr("d",Je.path)}ce.getPxPosition=function(fe,Q){var Je=fe._fullLayout._size,Ge=Q._id.charAt(0),Qe=Q.side,it;if(Q.anchor!=="free"?it=Q._anchorAxis:Ge==="x"?it={_offset:Je.t+(1-(Q.position||0))*Je.h,_length:0}:Ge==="y"&&(it={_offset:Je.l+(Q.position||0)*Je.w+Q._shift,_length:0}),Qe==="top"||Qe==="left")return it._offset;if(Qe==="bottom"||Qe==="right")return it._offset+it._length};function ut(fe){var Q=fe.title.font.size,Je=(fe.title.text.match(d.BR_TAG_ALL)||[]).length;return fe.title.hasOwnProperty("standoff")?Q*(se+Je*ge):Je?Q*(Je+1)*ge:Q}function Dt(fe,Q){var Je=fe._fullLayout,Ge=Q._id,Qe=Ge.charAt(0),it=Q.title.font.size,rt,$e=(Q.title.text.match(d.BR_TAG_ALL)||[]).length;if(Q.title.hasOwnProperty("standoff"))Q.side==="bottom"||Q.side==="right"?rt=Q._depth+Q.title.standoff+it*se:(Q.side==="top"||Q.side==="left")&&(rt=Q._depth+Q.title.standoff+it*(re+$e*ge));else{var je=lr(Q);if(Q.type==="multicategory")rt=Q._depth;else{var ct=1.5*it;je&&(ct=.5*it,Q.ticks==="outside"&&(ct+=Q.ticklen)),rt=10+ct+(Q.linewidth?Q.linewidth-1:0)}je||(Qe==="x"?rt+=Q.side==="top"?it*(Q.showticklabels?1:0):it*(Q.showticklabels?1.5:.5):rt+=Q.side==="right"?it*(Q.showticklabels?1:.5):it*(Q.showticklabels?.5:0))}var dt=ce.getPxPosition(fe,Q),xt,yt,Lt;Qe==="x"?(yt=Q._offset+Q._length/2,Lt=Q.side==="top"?dt-rt:dt+rt):(Lt=Q._offset+Q._length/2,yt=Q.side==="right"?dt+rt:dt-rt,xt={rotate:"-90",offset:0});var wt;if(Q.type!=="multicategory"){var At=Q._selections[Q._id+"tick"];if(wt={selection:At,side:Q.side},At&&At.node()&&At.node().parentNode){var Ot=y.getTranslate(At.node().parentNode);wt.offsetLeft=Ot.x,wt.offsetTop=Ot.y}Q.title.hasOwnProperty("standoff")&&(wt.pad=0)}return Q._titleStandoff=rt,p.draw(fe,Ge+"title",{propContainer:Q,propName:Q._name+".title.text",placeholder:Je._dfltTitle[Qe],avoid:wt,transform:xt,attributes:{x:yt,y:Lt,"text-anchor":"middle"}})}ce.shouldShowZeroLine=function(fe,Q,Je){var Ge=s.simpleMap(Q.range,Q.r2l);return Ge[0]*Ge[1]<=0&&Q.zeroline&&(Q.type==="linear"||Q.type==="-")&&!(Q.rangebreaks&&Q.maskBreaks(0)===J)&&(Nt(Q,0)||!Wt(fe,Q,Je,Ge)||$t(fe,Q))},ce.clipEnds=function(fe,Q){return Q.filter(function(Je){return Nt(fe,Je.x)})};function Nt(fe,Q){var Je=fe.l2p(Q);return Je>1&&Je<fe._length-1}function Wt(fe,Q,Je,Ge){var Qe=Je._mainAxis;if(!Qe)return;var it=fe._fullLayout,rt=Q._id.charAt(0),$e=ce.counterLetter(Q._id),je=Q._offset+(Math.abs(Ge[0])<Math.abs(Ge[1])==(rt==="x")?0:Q._length);function ct(wt){if(!wt.showline||!wt.linewidth)return!1;var At=Math.max((wt.linewidth+Q.zerolinewidth)/2,1);function Ot(Kt){return typeof Kt=="number"&&Math.abs(Kt-je)<At}if(Ot(wt._mainLinePosition)||Ot(wt._mainMirrorPosition))return!0;var zt=wt._linepositions||{};for(var Zt in zt)if(Ot(zt[Zt][0])||Ot(zt[Zt][1]))return!0}var dt=it._plots[Je._mainSubplot];if(!(dt.mainplotinfo||dt).overlays.length)return ct(Je);for(var xt=ce.list(fe,$e),yt=0;yt<xt.length;yt++){var Lt=xt[yt];if(Lt._mainAxis===Qe&&ct(Lt))return!0}}function $t(fe,Q){for(var Je=fe._fullData,Ge=Q._mainSubplot,Qe=Q._id.charAt(0),it=0;it<Je.length;it++){var rt=Je[it];if(rt.visible===!0&&rt.xaxis+rt.yaxis===Ge&&(l.traceIs(rt,"bar-like")&&rt.orientation==={x:"h",y:"v"}[Qe]||rt.fill&&rt.fill.charAt(rt.fill.length-1)===Qe))return!0}return!1}function Vt(fe){var Q=i.select(fe),Je=Q.select(".text-math-group");return Je.empty()?Q.select("text"):Je}ce.allowAutoMargin=function(fe){for(var Q=ce.list(fe,"",!0),Je=0;Je<Q.length;Je++){var Ge=Q[Je];Ge.automargin&&(a.allowAutoMargin(fe,Ft(Ge)),Ge.mirror&&a.allowAutoMargin(fe,qt(Ge))),l.getComponentMethod("rangeslider","isVisible")(Ge)&&a.allowAutoMargin(fe,Gt(Ge))}};function Ft(fe){return fe._id+".automargin"}function qt(fe){return Ft(fe)+".mirror"}function Gt(fe){return fe._id+".rangeslider"}ce.swap=function(fe,Q){for(var Je=Xt(fe,Q),Ge=0;Ge<Je.length;Ge++)jt(fe,Je[Ge].x,Je[Ge].y)};function Xt(fe,Q){var Je=[],Ge,Qe;for(Ge=0;Ge<Q.length;Ge++){var it=[],rt=fe._fullData[Q[Ge]].xaxis,$e=fe._fullData[Q[Ge]].yaxis;if(!(!rt||!$e)){for(Qe=0;Qe<Je.length;Qe++)(Je[Qe].x.indexOf(rt)!==-1||Je[Qe].y.indexOf($e)!==-1)&&it.push(Qe);if(!it.length){Je.push({x:[rt],y:[$e]});continue}var je=Je[it[0]],ct;if(it.length>1)for(Qe=1;Qe<it.length;Qe++)ct=Je[it[Qe]],sr(je.x,ct.x),sr(je.y,ct.y);sr(je.x,[rt]),sr(je.y,[$e])}}return Je}function sr(fe,Q){for(var Je=0;Je<Q.length;Je++)fe.indexOf(Q[Je])===-1&&fe.push(Q[Je])}function jt(fe,Q,Je){var Ge=[],Qe=[],it=fe.layout,rt,$e;for(rt=0;rt<Q.length;rt++)Ge.push(ce.getFromId(fe,Q[rt]));for(rt=0;rt<Je.length;rt++)Qe.push(ce.getFromId(fe,Je[rt]));var je=Object.keys(_),ct=["anchor","domain","overlaying","position","side","tickangle","editType"],dt=["linear","log"];for(rt=0;rt<je.length;rt++){var xt=je[rt],yt=Ge[0][xt],Lt=Qe[0][xt],wt=!0,At=!1,Ot=!1;if(!(xt.charAt(0)==="_"||typeof yt=="function"||ct.indexOf(xt)!==-1)){for($e=1;$e<Ge.length&&wt;$e++){var zt=Ge[$e][xt];xt==="type"&&dt.indexOf(yt)!==-1&&dt.indexOf(zt)!==-1&&yt!==zt?At=!0:zt!==yt&&(wt=!1)}for($e=1;$e<Qe.length&&wt;$e++){var Zt=Qe[$e][xt];xt==="type"&&dt.indexOf(Lt)!==-1&&dt.indexOf(Zt)!==-1&&Lt!==Zt?Ot=!0:Qe[$e][xt]!==Lt&&(wt=!1)}wt&&(At&&(it[Ge[0]._name].type="linear"),Ot&&(it[Qe[0]._name].type="linear"),Ut(it,xt,Ge,Qe,fe._fullLayout._dfltTitle))}}for(rt=0;rt<fe._fullLayout.annotations.length;rt++){var Kt=fe._fullLayout.annotations[rt];Q.indexOf(Kt.xref)!==-1&&Je.indexOf(Kt.yref)!==-1&&s.swapAttrs(it.annotations[rt],["?"])}}function Ut(fe,Q,Je,Ge,Qe){var it=s.nestedProperty,rt=it(fe[Je[0]._name],Q).get(),$e=it(fe[Ge[0]._name],Q).get(),je;for(Q==="title"&&(rt&&rt.text===Qe.x&&(rt.text=Qe.y),$e&&$e.text===Qe.y&&($e.text=Qe.x)),je=0;je<Je.length;je++)it(fe,Je[je]._name+"."+Q).set($e);for(je=0;je<Ge.length;je++)it(fe,Ge[je]._name+"."+Q).set(rt)}function tr(fe){return fe._id==="angularaxis"}function Ht(fe,Q){for(var Je=Q._rangebreaks.length,Ge=0;Ge<Je;Ge++){var Qe=Q._rangebreaks[Ge];if(fe>=Qe.min&&fe<Qe.max)return Qe.max}return fe}function lr(fe){return(fe.ticklabelposition||"").indexOf("inside")!==-1}function yr(fe,Q){lr(fe._anchorAxis||{})&&fe._hideCounterAxisInsideTickLabels&&fe._hideCounterAxisInsideTickLabels(Q)}function xr(fe,Q,Je,Ge){var Qe=fe.anchor!=="free"&&(fe.overlaying===void 0||fe.overlaying===!1)?fe._id:fe.overlaying,it;Ge?it=fe.side==="right"?Q:-Q:it=Q,Qe in Je||(Je[Qe]={}),fe.side in Je[Qe]||(Je[Qe][fe.side]=0),Je[Qe][fe.side]+=it}function er(fe,Q){return fe.autoshift?Q[fe.overlaying][fe.side]:fe.shift||0}},2976:function(f,u,r){var i=r(8248),c=r(3400),a=r(9032).BADNUM,l=c.isArrayOrTypedArray,s=c.isDateTime,v=c.cleanNumber,d=Math.round;f.exports=function(w,A,R){var T=w,C=R.noMultiCategory;if(l(T)&&!T.length)return"-";if(!C&&M(T))return"multicategory";if(C&&Array.isArray(T[0])){for(var m=[],L=0;L<T.length;L++)if(l(T[L]))for(var D=0;D<T[L].length;D++)m.push(T[L][D]);T=m}if(y(T,A))return"date";var O=R.autotypenumbers!=="strict";return E(T,O)?"category":o(T,O)?"linear":"-"};function p(b,w){return w?i(b):typeof b=="number"}function o(b,w){for(var A=b.length,R=0;R<A;R++)if(p(b[R],w))return!0;return!1}function y(b,w){for(var A=b.length,R=_(A),T=0,C=0,m={},L=0;L<A;L+=R){var D=d(L),O=b[D],N=String(O);m[N]||(m[N]=1,s(O,w)&&T++,i(O)&&C++)}return T>C*2}function _(b){return Math.max(1,(b-1)/1e3)}function E(b,w){for(var A=b.length,R=_(A),T=0,C=0,m={},L=0;L<A;L+=R){var D=d(L),O=b[D],N=String(O);if(!m[N]){m[N]=1;var V=typeof O;V==="boolean"?C++:(w?v(O)!==a:V==="number")?T++:V==="string"&&C++}}return C>T*2}function M(b){return l(b[0])&&l(b[1])}},5955:function(f,u,r){var i=r(8248),c=r(4040),a=r(3400),l=r(1780),s=r(1272),v=r(4724),d=r(6332),p=r(5404),o=r(5936),y=r(2568),_=r(4796),E=r(2136),M=r(6312),b=r(8344),w=r(3816).WEEKDAY_PATTERN,A=r(3816).HOUR_PATTERN;f.exports=function(L,D,O,N,V){var X=N.letter,k=N.font||{},Z=N.splomStash||{},B=O("visible",!N.visibleDflt),J=D._template||{},ne=D.type||J.type||"-",oe;if(ne==="date"){var Y=c.getComponentMethod("calendars","handleDefaults");Y(L,D,"calendar",N.calendar),N.noTicklabelmode||(oe=O("ticklabelmode"))}var G="";(!N.noTicklabelposition||ne==="multicategory")&&(G=a.coerce(L,D,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:oe==="period"?["outside","inside"]:X==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),N.noTicklabeloverflow||O("ticklabeloverflow",G.indexOf("inside")!==-1?"hide past domain":ne==="category"||ne==="multicategory"?"allow":"hide past div"),b(D,V),M(L,D,O,N),_(L,D,O,N),ne!=="category"&&!N.noHover&&O("hoverformat");var K=O("color"),ee=K!==v.color.dflt?K:k.color,ie=Z.label||V._dfltTitle[X];if(y(L,D,O,ne,N),!B)return D;O("title.text",ie),a.coerceFont(O,"title.font",k,{overrideDflt:{size:a.bigFont(k.size),color:ee}}),d(L,D,O,ne);var re=N.hasMinor;if(re&&(l.newContainer(D,"minor"),d(L,D,O,ne,{isMinor:!0})),o(L,D,O,ne,N),p(L,D,O,N),re){var se=N.isMinor;N.isMinor=!0,p(L,D,O,N),N.isMinor=se}E(L,D,O,{dfltColor:K,bgColor:N.bgColor,showGrid:N.showGrid,hasMinor:re,attributes:v}),re&&!D.minor.ticks&&!D.minor.showgrid&&delete D.minor,(D.showline||D.ticks)&&O("mirror");var ge=ne==="multicategory";if(!N.noTickson&&(ne==="category"||ge)&&(D.ticks||D.showgrid)){var xe;ge&&(xe="boundaries");var Se=O("tickson",xe);Se==="boundaries"&&delete D.ticklabelposition}if(ge){var ce=O("showdividers");ce&&(O("dividercolor"),O("dividerwidth"))}if(ne==="date")if(s(L,D,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:R}),!D.rangebreaks.length)delete D.rangebreaks;else{for(var pe=0;pe<D.rangebreaks.length;pe++)if(D.rangebreaks[pe].pattern===w){D._hasDayOfWeekBreaks=!0;break}if(b(D,V),V._has("scattergl")||V._has("splom"))for(var ye=0;ye<N.data.length;ye++){var U=N.data[ye];(U.type==="scattergl"||U.type==="splom")&&(U.visible=!1,a.warn(U.type+" traces do not work on axes with rangebreaks. Setting trace "+U.index+" to `visible: false`."))}}return D};function R(m,L,D){function O(oe,Y){return a.coerce(m,L,v.rangebreaks,oe,Y)}var N=O("enabled");if(N){var V=O("bounds");if(V&&V.length>=2){var X="",k,Z;if(V.length===2){for(k=0;k<2;k++)if(Z=C(V[k]),Z){X=w;break}}var B=O("pattern",X);if(B===w)for(k=0;k<2;k++)Z=C(V[k]),Z&&(L.bounds[k]=V[k]=Z-1);if(B)for(k=0;k<2;k++)switch(Z=V[k],B){case w:if(!i(Z)){L.enabled=!1;return}if(Z=+Z,Z!==Math.floor(Z)||Z<0||Z>=7){L.enabled=!1;return}L.bounds[k]=V[k]=Z;break;case A:if(!i(Z)){L.enabled=!1;return}if(Z=+Z,Z<0||Z>24){L.enabled=!1;return}L.bounds[k]=V[k]=Z;break}if(D.autorange===!1){var J=D.range;if(J[0]<J[1]){if(V[0]<J[0]&&V[1]>J[1]){L.enabled=!1;return}}else if(V[0]>J[0]&&V[1]<J[1]){L.enabled=!1;return}}}else{var ne=O("values");if(ne&&ne.length)O("dvalue");else{L.enabled=!1;return}}}}var T={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function C(m){if(typeof m=="string")return T[m.substr(0,3).toLowerCase()]}},9736:function(f,u,r){var i=r(6880),c=i.FORMAT_LINK,a=i.DATE_FORMAT_LINK;function l(d,p){return{valType:"string",dflt:"",editType:"none",description:(p?s:v)("hover text",d)+["By default the values are formatted using "+(p?"generic number format":"`"+d+"axis.hoverformat`")+"."].join(" ")}}function s(d,p){return["Sets the "+d+" formatting rule"+(p?"for `"+p+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+c+"."].join(" ")}function v(d,p){return s(d,p)+[" And for dates see: "+a+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}f.exports={axisHoverFormat:l,descriptionOnlyNumbers:s,descriptionWithDates:v}},9811:function(f,u,r){var i=r(4040),c=r(3816);u.id2name=function(s){if(!(typeof s!="string"||!s.match(c.AX_ID_PATTERN))){var v=s.split(" ")[0].substr(1);return v==="1"&&(v=""),s.charAt(0)+"axis"+v}},u.name2id=function(s){if(s.match(c.AX_NAME_PATTERN)){var v=s.substr(5);return v==="1"&&(v=""),s.charAt(0)+v}},u.cleanId=function(s,v,d){var p=/( domain)$/.test(s);if(!(typeof s!="string"||!s.match(c.AX_ID_PATTERN))&&!(v&&s.charAt(0)!==v)&&!(p&&!d)){var o=s.split(" ")[0].substr(1).replace(/^0+/,"");return o==="1"&&(o=""),s.charAt(0)+o+(p&&d?" domain":"")}},u.list=function(l,s,v){var d=l._fullLayout;if(!d)return[];var p=u.listIds(l,s),o=new Array(p.length),y;for(y=0;y<p.length;y++){var _=p[y];o[y]=d[_.charAt(0)+"axis"+_.substr(1)]}if(!v){var E=d._subplots.gl3d||[];for(y=0;y<E.length;y++){var M=d[E[y]];s?o.push(M[s+"axis"]):o.push(M.xaxis,M.yaxis,M.zaxis)}}return o},u.listIds=function(l,s){var v=l._fullLayout;if(!v)return[];var d=v._subplots;return s?d[s+"axis"]:d.xaxis.concat(d.yaxis)},u.getFromId=function(l,s,v){var d=l._fullLayout;return s=s===void 0||typeof s!="string"?s:s.replace(" domain",""),v==="x"?s=s.replace(/y[0-9]*/,""):v==="y"&&(s=s.replace(/x[0-9]*/,"")),d[u.id2name(s)]},u.getFromTrace=function(l,s,v){var d=l._fullLayout,p=null;if(i.traceIs(s,"gl3d")){var o=s.scene;o.substr(0,5)==="scene"&&(p=d[o][v+"axis"])}else p=u.getFromId(l,s[v+"axis"]||v);return p},u.idSort=function(l,s){var v=l.charAt(0),d=s.charAt(0);return v!==d?v>d?1:-1:+(l.substr(1)||1)-+(s.substr(1)||1)},u.ref2id=function(l){return/^[xyz]/.test(l)?l.split(" ")[0]:!1};function a(l,s){if(s&&s.length){for(var v=0;v<s.length;v++)if(s[v][l])return!0}return!1}u.isLinked=function(l,s){return a(s,l._axisMatchGroups)||a(s,l._axisConstraintGroups)}},4796:function(f,u,r){var i=r(8116).isTypedArraySpec;function c(a,l){var s=l.dataAttr||a._id.charAt(0),v={},d,p,o;if(l.axData)d=l.axData;else for(d=[],p=0;p<l.data.length;p++){var y=l.data[p];y[s+"axis"]===a._id&&d.push(y)}for(p=0;p<d.length;p++){var _=d[p][s];for(o=0;o<_.length;o++){var E=_[o];E!=null&&(v[E]=1)}}return Object.keys(v)}f.exports=function(l,s,v,d){if(s.type==="category"){var p=l.categoryarray,o=Array.isArray(p)&&p.length>0||i(p),y;o&&(y="array");var _=v("categoryorder",y),E;_==="array"&&(E=v("categoryarray")),!o&&_==="array"&&(_=s.categoryorder="trace"),_==="trace"?s._initialCategories=[]:_==="array"?s._initialCategories=E.slice():(E=c(s,d).sort(),_==="category ascending"?s._initialCategories=E:_==="category descending"&&(s._initialCategories=E.reverse()))}}},8728:function(f,u,r){var i=r(8248),c=r(3400),a=r(9032),l=a.ONEDAY,s=a.ONEWEEK;u.dtick=function(v,d){var p=d==="log",o=d==="date",y=d==="category",_=o?l:1;if(!v)return _;if(i(v))return v=Number(v),v<=0?_:y?Math.max(1,Math.round(v)):o?Math.max(.1,v):v;if(typeof v!="string"||!(o||p))return _;var E=v.charAt(0),M=v.substr(1);return M=i(M)?Number(M):0,M<=0||!(o&&E==="M"&&M===Math.round(M)||p&&E==="L"||p&&E==="D"&&(M===1||M===2))?_:v},u.tick0=function(v,d,p,o){if(d==="date")return c.cleanDate(v,c.dateTick0(p,o%s===0?1:0));if(!(o==="D1"||o==="D2"))return i(v)?Number(v):0}},3816:function(f,u,r){var i=r(3756).counter;f.exports={idRegex:{x:i("x","( domain)?"),y:i("y","( domain)?")},attrRegex:i("[xy]axis"),xAxisMatch:i("xaxis"),yAxisMatch:i("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},1888:function(f,u,r){var i=r(3400),c=r(9280),a=r(9811).id2name,l=r(4724),s=r(1160),v=r(8344),d=r(9032).ALMOST_EQUAL,p=r(4284).FROM_BL;u.handleDefaults=function(A,R,T){var C=T.axIds,m=T.axHasImage,L=R._axisConstraintGroups=[],D=R._axisMatchGroups=[],O,N,V,X,k,Z,B,J;for(O=0;O<C.length;O++)X=a(C[O]),k=A[X],Z=R[X],o(k,Z,{axIds:C,layoutOut:R,hasImage:m[X]});function ne(ge,xe){for(O=0;O<ge.length;O++){N=ge[O];for(V in N)R[a(V)][xe]=N}}for(ne(D,"_matchGroup"),O=0;O<L.length;O++){N=L[O];for(V in N)if(Z=R[a(V)],Z.fixedrange){for(var oe in N){var Y=a(oe);(A[Y]||{}).fixedrange===!1&&i.warn("fixedrange was specified as false for axis "+Y+" but was overridden because another axis in its constraint group has fixedrange true"),R[Y].fixedrange=!0}break}}for(O=0;O<L.length;){N=L[O];for(V in N){Z=R[a(V)],Z._matchGroup&&Object.keys(Z._matchGroup).length===Object.keys(N).length&&(L.splice(O,1),O--);break}O++}ne(L,"_constraintGroup");var G=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],K=!1,ee=!1;function ie(){J=Z[B],B==="rangebreaks"&&(ee=Z._hasDayOfWeekBreaks)}for(O=0;O<D.length;O++){N=D[O];for(var re=0;re<G.length;re++){B=G[re],J=null;var se;for(V in N)if(X=a(V),k=A[X],Z=R[X],B in Z){if(!Z.matches&&(se=Z,B in k)){ie();break}J===null&&B in k&&ie()}if(B==="range"&&J&&k.range&&k.range.length===2&&k.range[0]!==null&&k.range[1]!==null&&(K=!0),B==="autorange"&&J===null&&K&&(J=!1),J===null&&B in se&&(J=se[B]),J!==null)for(V in N)Z=R[a(V)],Z[B]=B==="range"?J.slice():J,B==="rangebreaks"&&(Z._hasDayOfWeekBreaks=ee,v(Z,R))}}};function o(A,R,T){var C=T.axIds,m=T.layoutOut,L=T.hasImage,D=m._axisConstraintGroups,O=m._axisMatchGroups,N=R._id,V=N.charAt(0),X=((m._splomAxes||{})[V]||{})[N]||{},k=R._id,Z=k.charAt(0)==="x";R._matchGroup=null,R._constraintGroup=null;function B(pe,ye){return i.coerce(A,R,l,pe,ye)}B("constrain",L?"domain":"range"),i.coerce(A,R,{constraintoward:{valType:"enumerated",values:Z?["left","center","right"]:["bottom","middle","top"],dflt:Z?"center":"middle"}},"constraintoward");var J=R.type,ne,oe,Y=[];for(ne=0;ne<C.length;ne++)if(oe=C[ne],oe!==k){var G=m[a(oe)];G.type===J&&Y.push(oe)}var K=_(D,k);if(K){var ee=[];for(ne=0;ne<Y.length;ne++)oe=Y[ne],K[oe]||ee.push(oe);Y=ee}var ie=Y.length,re,se;ie&&(A.matches||X.matches)&&(re=i.coerce(A,R,{matches:{valType:"enumerated",values:Y,dflt:Y.indexOf(X.matches)!==-1?X.matches:void 0}},"matches"));var ge=L&&!Z?R.anchor:void 0;if(ie&&!re&&(A.scaleanchor||ge)&&(se=i.coerce(A,R,{scaleanchor:{valType:"enumerated",values:Y.concat([!1])}},"scaleanchor",ge)),re){R._matchGroup=E(O,k,re,1);var xe=m[a(re)],Se=y(m,R)/y(m,xe);Z!==(re.charAt(0)==="x")&&(Se=(Z?"x":"y")+Se),E(D,k,re,Se)}else A.matches&&C.indexOf(A.matches)!==-1&&i.warn("ignored "+R._name+'.matches: "'+A.matches+'" to avoid an infinite loop');if(se){var ce=B("scaleratio");ce||(ce=R.scaleratio=1),E(D,k,se,ce)}else A.scaleanchor&&C.indexOf(A.scaleanchor)!==-1&&i.warn("ignored "+R._name+'.scaleanchor: "'+A.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function y(A,R){var T=R.domain;return T||(T=A[a(R.overlaying)].domain),T[1]-T[0]}function _(A,R){for(var T=0;T<A.length;T++)if(A[T][R])return A[T];return null}function E(A,R,T,C){var m,L,D,O,N,V=_(A,R);V===null?(V={},V[R]=1,N=A.length,A.push(V)):N=A.indexOf(V);var X=Object.keys(V);for(m=0;m<A.length;m++)if(D=A[m],m!==N&&D[T]){var k=D[T];for(L=0;L<X.length;L++)O=X[L],D[O]=M(k,M(C,V[O]));A.splice(N,1);return}if(C!==1)for(L=0;L<X.length;L++){var Z=X[L];V[Z]=M(C,V[Z])}V[T]=1}function M(A,R){var T="",C="",m,L;typeof A=="string"&&(T=A.match(/^[xy]*/)[0],m=T.length,A=+A.substr(m)),typeof R=="string"&&(C=R.match(/^[xy]*/)[0],L=C.length,R=+R.substr(L));var D=A*R;return!m&&!L?D:!m||!L||T.charAt(0)===C.charAt(0)?T+C+A*R:m===L?D:(m>L?T.substr(L):C.substr(m))+D}function b(A,R){for(var T=R._size,C=T.h/T.w,m={},L=Object.keys(A),D=0;D<L.length;D++){var O=L[D],N=A[O];if(typeof N=="string"){var V=N.match(/^[xy]*/)[0],X=V.length;N=+N.substr(X);for(var k=V.charAt(0)==="y"?C:1/C,Z=0;Z<X;Z++)N*=k}m[O]=N}return m}u.enforce=function(R){var T=R._fullLayout,C=T._axisConstraintGroups||[],m,L,D,O,N,V,X,k;for(m=0;m<C.length;m++){D=b(C[m],T);var Z=Object.keys(D),B=1/0,J=0,ne=1/0,oe={},Y={},G=!1;for(L=0;L<Z.length;L++)O=Z[L],Y[O]=N=T[a(O)],N._inputDomain?N.domain=N._inputDomain.slice():N._inputDomain=N.domain.slice(),N._inputRange||(N._inputRange=N.range.slice()),N.setScale(),oe[O]=V=Math.abs(N._m)/D[O],B=Math.min(B,V),(N.constrain==="domain"||!N._constraintShrinkable)&&(ne=Math.min(ne,V)),delete N._constraintShrinkable,J=Math.max(J,V),N.constrain==="domain"&&(G=!0);if(!(B>d*J&&!G)){for(L=0;L<Z.length;L++)if(O=Z[L],V=oe[O],N=Y[O],X=N.constrain,V!==ne||X==="domain")if(k=V/ne,X==="range")s(N,k);else{var K=N._inputDomain,ee=(N.domain[1]-N.domain[0])/(K[1]-K[0]),ie=(N.r2l(N.range[1])-N.r2l(N.range[0]))/(N.r2l(N._inputRange[1])-N.r2l(N._inputRange[0]));if(k/=ee,k*ie<1){N.domain=N._input.domain=K.slice(),s(N,k);continue}if(ie<1&&(N.range=N._input.range=N._inputRange.slice(),k*=ie),N.autorange){var re=N.r2l(N.range[0]),se=N.r2l(N.range[1]),ge=(re+se)/2,xe=ge,Se=ge,ce=Math.abs(se-ge),pe=ge-ce*k*1.0001,ye=ge+ce*k*1.0001,U=c.makePadFn(T,N,0),W=c.makePadFn(T,N,1);w(N,k);var j=Math.abs(N._m),F=c.concatExtremes(R,N),P=F.min,q=F.max,z,te;for(te=0;te<P.length;te++)z=P[te].val-U(P[te])/j,z>pe&&z<xe&&(xe=z);for(te=0;te<q.length;te++)z=q[te].val+W(q[te])/j,z<ye&&z>Se&&(Se=z);var ue=(Se-xe)/(2*ce);k/=ue,xe=N.l2r(xe),Se=N.l2r(Se),N.range=N._input.range=re<se?[xe,Se]:[Se,xe]}w(N,k)}}}},u.getAxisGroup=function(R,T){for(var C=R._axisMatchGroups,m=0;m<C.length;m++){var L=C[m];if(L[T])return"g"+m}return T},u.clean=function(R,T){if(T._inputDomain){for(var C=!1,m=T._id,L=R._fullLayout._axisConstraintGroups,D=0;D<L.length;D++)if(L[D][m]){C=!0;break}(!C||T.constrain!=="domain")&&(T._input.domain=T.domain=T._inputDomain,delete T._inputDomain)}};function w(A,R){var T=A._inputDomain,C=p[A.constraintoward],m=T[0]+(T[1]-T[0])*C;A.domain=A._input.domain=[m+(T[0]-m)/R,m+(T[1]-m)/R],A.setScale()}},1184:function(f,u,r){var i=r(3428),c=r(3400),a=c.numberFormat,l=r(9760),s=r(9184),v=r(4040),d=c.strTranslate,p=r(2736),o=r(6308),y=r(3616),_=r(3024),E=r(4460),M=r(3972),b=r(6476),w=r(2760),A=w.selectingOrDrawing,R=w.freeMode,T=r(4284).FROM_TL,C=r(3696),m=r(9172).redrawReglTraces,L=r(7316),D=r(9811).getFromId,O=r(2676).prepSelect,N=r(2676).clearOutline,V=r(2676).selectOnClick,X=r(1160),k=r(3816),Z=k.MINDRAG,B=k.MINZOOM,J=!0;function ne(z,te,ue,ve,_e,Re,Le,Ve){var Xe=z._fullLayout._zoomlayer,Ze=Le+Ve==="nsew",Te=(Le+Ve).length===1,we,be,ke,He,Ke,st,vt,pt,ft,lt,Mt,ot,Ct,kt,St,Et,Ue,De,Ie,Fe,We,de,Me;ue+=te.yaxis._shift;function he(){if(we=te.xaxis,be=te.yaxis,ft=we._length,lt=be._length,vt=we._offset,pt=be._offset,ke={},ke[we._id]=we,He={},He[be._id]=be,Le&&Ve)for(var $e=te.overlays,je=0;je<$e.length;je++){var ct=$e[je].xaxis;ke[ct._id]=ct;var dt=$e[je].yaxis;He[dt._id]=dt}Ke=q(ke),st=q(He),Ct=G(Ke,Ve),kt=G(st,Le),St=!kt&&!Ct,ot=F(z,z._fullLayout._axisMatchGroups,ke,He),Mt=F(z,z._fullLayout._axisConstraintGroups,ke,He,ot);var xt=Mt.isSubplotConstrained||ot.isSubplotConstrained;Et=Ve||xt,Ue=Le||xt;var yt=z._fullLayout;De=yt._has("scattergl"),Ie=yt._has("splom"),Fe=yt._has("svg")}he();var Ee=se(kt+Ct,z._fullLayout.dragmode,Ze),Pe=Y(te,Le+Ve+"drag",Ee,ue,ve,_e,Re);if(St&&!Ze)return Pe.onmousedown=null,Pe.style.pointerEvents="none",Pe;var Ne={element:Pe,gd:z,plotinfo:te};Ne.prepFn=function($e,je,ct){var dt=Ne.dragmode,xt=z._fullLayout.dragmode;xt!==dt&&(Ne.dragmode=xt),he(),de=z._fullLayout._invScaleX,Me=z._fullLayout._invScaleY,St||(Ze?$e.shiftKey?xt==="pan"?xt="zoom":A(xt)||(xt="pan"):$e.ctrlKey&&(xt="pan"):xt="pan"),R(xt)?Ne.minDrag=1:Ne.minDrag=void 0,A(xt)?(Ne.xaxes=Ke,Ne.yaxes=st,O($e,je,ct,Ne,xt)):(Ne.clickFn=nt,A(dt)&&ht(),St||(xt==="zoom"?(Ne.moveFn=Xt,Ne.doneFn=jt,Ne.minDrag=1,Gt($e,je,ct)):xt==="pan"&&(Ne.moveFn=xr,Ne.doneFn=Je))),z._fullLayout._redrag=function(){var yt=z._dragdata;if(yt&&yt.element===Pe){var Lt=z._fullLayout.dragmode;A(Lt)||(he(),Ge([0,0,ft,lt]),Ne.moveFn(yt.dx,yt.dy))}}};function ht(){Ne.plotinfo.selection=!1,N(z)}function nt($e,je){var ct=Ne.gd;if(ct._fullLayout._activeShapeIndex>=0){ct._fullLayout._deactivateShape(ct);return}var dt=ct._fullLayout.clickmode;if(pe(ct),$e===2&&!Te&&Q(),Ze)dt.indexOf("select")>-1&&V(je,ct,Ke,st,te.id,Ne),dt.indexOf("event")>-1&&_.click(ct,je,te.id);else if($e===1&&Te){var xt=Le?be:we,yt=Le==="s"||Ve==="w"?0:1,Lt=xt._name+".range["+yt+"]",wt=K(xt,yt),At="left",Ot="middle";if(xt.fixedrange)return;Le?(Ot=Le==="n"?"top":"bottom",xt.side==="right"&&(At="right")):Ve==="e"&&(At="right"),ct._context.showAxisRangeEntryBoxes&&i.select(Pe).call(p.makeEditable,{gd:ct,immediate:!0,background:ct._fullLayout.paper_bgcolor,text:String(wt),fill:xt.tickfont?xt.tickfont.color:"#444",horizontalAlign:At,verticalAlign:Ot}).on("edit",function(zt){var Zt=xt.d2r(zt);Zt!==void 0&&v.call("_guiRelayout",ct,Lt,Zt)})}}b.init(Ne);var Ye,Be,ut,Dt,Nt,Wt,$t,Vt,Ft,qt;function Gt($e,je,ct){var dt=Pe.getBoundingClientRect();Ye=je-dt.left,Be=ct-dt.top,z._fullLayout._calcInverseTransform(z);var xt=c.apply3DTransform(z._fullLayout._invTransform)(Ye,Be);Ye=xt[0],Be=xt[1],ut={l:Ye,r:Ye,w:0,t:Be,b:Be,h:0},Dt=z._hmpixcount?z._hmlumcount/z._hmpixcount:l(z._fullLayout.plot_bgcolor).getLuminance(),Nt="M0,0H"+ft+"V"+lt+"H0V0",Wt=!1,$t="xy",qt=!1,Vt=ge(Xe,Dt,vt,pt,Nt),Ft=xe(Xe,vt,pt)}function Xt($e,je){if(z._transitioningWithDuration)return!1;var ct=Math.max(0,Math.min(ft,de*$e+Ye)),dt=Math.max(0,Math.min(lt,Me*je+Be)),xt=Math.abs(ct-Ye),yt=Math.abs(dt-Be);ut.l=Math.min(Ye,ct),ut.r=Math.max(Ye,ct),ut.t=Math.min(Be,dt),ut.b=Math.max(Be,dt);function Lt(){$t="",ut.r=ut.l,ut.t=ut.b,Ft.attr("d","M0,0Z")}if(Mt.isSubplotConstrained)xt>B||yt>B?($t="xy",xt/ft>yt/lt?(yt=xt*lt/ft,Be>dt?ut.t=Be-yt:ut.b=Be+yt):(xt=yt*ft/lt,Ye>ct?ut.l=Ye-xt:ut.r=Ye+xt),Ft.attr("d",j(ut))):Lt();else if(ot.isSubplotConstrained)if(xt>B||yt>B){$t="xy";var wt=Math.min(ut.l/ft,(lt-ut.b)/lt),At=Math.max(ut.r/ft,(lt-ut.t)/lt);ut.l=wt*ft,ut.r=At*ft,ut.b=(1-wt)*lt,ut.t=(1-At)*lt,Ft.attr("d",j(ut))}else Lt();else!kt||yt<Math.min(Math.max(xt*.6,Z),B)?xt<Z||!Ct?Lt():(ut.t=0,ut.b=lt,$t="x",Ft.attr("d",U(ut,Be))):!Ct||xt<Math.min(yt*.6,B)?(ut.l=0,ut.r=ft,$t="y",Ft.attr("d",W(ut,Ye))):($t="xy",Ft.attr("d",j(ut)));ut.w=ut.r-ut.l,ut.h=ut.b-ut.t,$t&&(qt=!0),z._dragged=qt,Se(Vt,Ft,ut,Nt,Wt,Dt),sr(),z.emit("plotly_relayouting",We),Wt=!0}function sr(){We={},($t==="xy"||$t==="x")&&(ee(Ke,ut.l/ft,ut.r/ft,We,Mt.xaxes),er("x",We)),($t==="xy"||$t==="y")&&(ee(st,(lt-ut.b)/lt,(lt-ut.t)/lt,We,Mt.yaxes),er("y",We))}function jt(){sr(),pe(z),Je(),ye(z)}var Ut=[0,0,ft,lt],tr=null,Ht=k.REDRAWDELAY,lr=te.mainplot?z._fullLayout._plots[te.mainplot]:te;function yr($e){if(!z._context._scrollZoom.cartesian&&!z._fullLayout._enablescrollzoom)return;if(ht(),z._transitioningWithDuration){$e.preventDefault(),$e.stopPropagation();return}he(),clearTimeout(tr);var je=-$e.deltaY;if(isFinite(je)||(je=$e.wheelDelta/10),!isFinite(je)){c.log("Did not find wheel motion attributes: ",$e);return}var ct=Math.exp(-Math.min(Math.max(je,-20),20)/200),dt=lr.draglayer.select(".nsewdrag").node().getBoundingClientRect(),xt=($e.clientX-dt.left)/dt.width,yt=(dt.bottom-$e.clientY)/dt.height,Lt;function wt(At,Ot,zt){if(At.fixedrange)return;var Zt=c.simpleMap(At.range,At.r2l),Kt=Zt[0]+(Zt[1]-Zt[0])*Ot;function cr(or){return At.l2r(Kt+(or-Kt)*zt)}At.range=Zt.map(cr)}if(Et){for(Ve||(xt=.5),Lt=0;Lt<Ke.length;Lt++)wt(Ke[Lt],xt,ct);er("x"),Ut[2]*=ct,Ut[0]+=Ut[2]*xt*(1/ct-1)}if(Ue){for(Le||(yt=.5),Lt=0;Lt<st.length;Lt++)wt(st[Lt],yt,ct);er("y"),Ut[3]*=ct,Ut[1]+=Ut[3]*(1-yt)*(1/ct-1)}Ge(Ut),fe(),z.emit("plotly_relayouting",We),tr=setTimeout(function(){z._fullLayout&&(Ut=[0,0,ft,lt],Je())},Ht),$e.preventDefault()}Le.length*Ve.length!==1&&P(Pe,yr);function xr($e,je){if($e=$e*de,je=je*Me,z._transitioningWithDuration)return;if(z._fullLayout._replotting=!0,Ct==="ew"||kt==="ns"){var ct=Ct?-$e:0,dt=kt?-je:0;if(ot.isSubplotConstrained){if(Ct&&kt){var xt=($e/ft-je/lt)/2;$e=xt*ft,je=-xt*lt,ct=-$e,dt=-je}kt?ct=-dt*ft/lt:dt=-ct*lt/ft}Ct&&(ie(Ke,$e),er("x")),kt&&(ie(st,je),er("y")),Ge([ct,dt,ft,lt]),fe(),z.emit("plotly_relayouting",We);return}function yt(cr,or,nr){for(var mr=1-or,pr,Ar,en=0;en<cr.length;en++){var Lr=cr[en];if(!Lr.fixedrange){pr=Lr,Ar=Lr._rl[mr]+(Lr._rl[or]-Lr._rl[mr])/re(nr/Lr._length);var Pr=Lr.l2r(Ar);Pr!==!1&&Pr!==void 0&&(Lr.range[or]=Pr)}}return pr._length*(pr._rl[or]-Ar)/(pr._rl[or]-pr._rl[mr])}var Lt=Ct==="w"==(kt==="n")?1:-1;if(Ct&&kt&&(Mt.isSubplotConstrained||ot.isSubplotConstrained)){var wt=($e/ft+Lt*je/lt)/2;$e=wt*ft,je=Lt*wt*lt}var At,Ot;if(Ct==="w"?$e=yt(Ke,0,$e):Ct==="e"?$e=yt(Ke,1,-$e):Ct||($e=0),kt==="n"?je=yt(st,1,je):kt==="s"?je=yt(st,0,-je):kt||(je=0),At=Ct==="w"?$e:0,Ot=kt==="n"?je:0,Mt.isSubplotConstrained&&!ot.isSubplotConstrained||ot.isSubplotConstrained&&Ct&&kt&&Lt>0){var zt;if(ot.isSubplotConstrained||!Ct&&kt.length===1){for(zt=0;zt<Ke.length;zt++)Ke[zt].range=Ke[zt]._r.slice(),X(Ke[zt],1-je/lt);$e=je*ft/lt,At=$e/2}if(ot.isSubplotConstrained||!kt&&Ct.length===1){for(zt=0;zt<st.length;zt++)st[zt].range=st[zt]._r.slice(),X(st[zt],1-$e/ft);je=$e*lt/ft,Ot=je/2}}(!ot.isSubplotConstrained||!kt)&&er("x"),(!ot.isSubplotConstrained||!Ct)&&er("y");var Zt=ft-$e,Kt=lt-je;ot.isSubplotConstrained&&!(Ct&&kt)&&(Ct?(Ot=At?0:$e*lt/ft,Kt=Zt*lt/ft):(At=Ot?0:je*ft/lt,Zt=Kt*ft/lt)),Ge([At,Ot,Zt,Kt]),fe(),z.emit("plotly_relayouting",We)}function er($e,je){for(var ct=ot.isSubplotConstrained?{x:st,y:Ke}[$e]:ot[$e+"axes"],dt=ot.isSubplotConstrained?{x:Ke,y:st}[$e]:[],xt=0;xt<ct.length;xt++){var yt=ct[xt],Lt=yt._id,wt=ot.xLinks[Lt]||ot.yLinks[Lt],At=dt[0]||ke[wt]||He[wt];At&&(je?(je[yt._name+".range[0]"]=je[At._name+".range[0]"],je[yt._name+".range[1]"]=je[At._name+".range[1]"]):yt.range=At.range.slice())}}function fe(){var $e=[],je;function ct(Lt){for(je=0;je<Lt.length;je++)Lt[je].fixedrange||$e.push(Lt[je]._id)}function dt(Lt,wt){for(je=0;je<Lt.length;je++){var At=Lt[je],Ot=At[wt];!At.fixedrange&&Ot.tickmode==="sync"&&$e.push(Ot._id)}}for(Et&&(ct(Ke),ct(Mt.xaxes),ct(ot.xaxes),dt(te.overlays,"xaxis")),Ue&&(ct(st),ct(Mt.yaxes),ct(ot.yaxes),dt(te.overlays,"yaxis")),We={},je=0;je<$e.length;je++){var xt=$e[je],yt=D(z,xt);E.drawOne(z,yt,{skipTitle:!0}),We[yt._name+".range[0]"]=yt.range[0],We[yt._name+".range[1]"]=yt.range[1]}E.redrawComponents(z,$e)}function Q(){if(!z._transitioningWithDuration){var $e=z._context.doubleClick,je=[];Ct&&(je=je.concat(Ke)),kt&&(je=je.concat(st)),ot.xaxes&&(je=je.concat(ot.xaxes)),ot.yaxes&&(je=je.concat(ot.yaxes));var ct={},dt,xt;if($e==="reset+autosize")for($e="autosize",xt=0;xt<je.length;xt++){dt=je[xt];var yt=dt._rangeInitial0,Lt=dt._rangeInitial1,wt=yt!==void 0||Lt!==void 0;if(wt&&(yt!==void 0&&yt!==dt.range[0]||Lt!==void 0&&Lt!==dt.range[1])||!wt&&dt.autorange!==!0){$e="reset";break}}if($e==="autosize")for(xt=0;xt<je.length;xt++)dt=je[xt],dt.fixedrange||(ct[dt._name+".autorange"]=!0);else if($e==="reset"){for((Ct||Mt.isSubplotConstrained)&&(je=je.concat(Mt.xaxes)),kt&&!Mt.isSubplotConstrained&&(je=je.concat(Mt.yaxes)),Mt.isSubplotConstrained&&(Ct?kt||(je=je.concat(st)):je=je.concat(Ke)),xt=0;xt<je.length;xt++)if(dt=je[xt],!dt.fixedrange){var At=dt._name,Ot=dt._autorangeInitial;dt._rangeInitial0===void 0&&dt._rangeInitial1===void 0?ct[At+".autorange"]=!0:dt._rangeInitial0===void 0?(ct[At+".autorange"]=Ot,ct[At+".range"]=[null,dt._rangeInitial1]):dt._rangeInitial1===void 0?(ct[At+".range"]=[dt._rangeInitial0,null],ct[At+".autorange"]=Ot):ct[At+".range"]=[dt._rangeInitial0,dt._rangeInitial1]}}z.emit("plotly_doubleclick",null),v.call("_guiRelayout",z,ct)}}function Je(){Ge([0,0,ft,lt]),c.syncOrAsync([L.previousPromises,function(){z._fullLayout._replotting=!1,v.call("_guiRelayout",z,We)}],z)}function Ge($e){var je=z._fullLayout,ct=je._plots,dt=je._subplots.cartesian,xt,yt,Lt,wt;if(Ie&&v.subplotsRegistry.splom.drag(z),De){for(xt=0;xt<dt.length;xt++)if(yt=ct[dt[xt]],Lt=yt.xaxis,wt=yt.yaxis,yt._scene){var At=c.simpleMap(Lt.range,Lt.r2l),Ot=c.simpleMap(wt.range,wt.r2l);Lt.limitRange&&Lt.limitRange(),wt.limitRange&&wt.limitRange(),At=Lt.range,Ot=wt.range,yt._scene.update({range:[At[0],Ot[0],At[1],Ot[1]]})}}if((Ie||De)&&(C(z),m(z)),Fe){var zt=$e[2]/we._length,Zt=$e[3]/be._length;for(xt=0;xt<dt.length;xt++){yt=ct[dt[xt]],Lt=yt.xaxis,wt=yt.yaxis;var Kt=(Et||ot.isSubplotConstrained)&&!Lt.fixedrange&&ke[Lt._id],cr=(Ue||ot.isSubplotConstrained)&&!wt.fixedrange&&He[wt._id],or,nr,mr,pr;if(Kt?(or=zt,mr=Ve||ot.isSubplotConstrained?$e[0]:rt(Lt,or)):ot.xaHash[Lt._id]?(or=zt,mr=$e[0]*Lt._length/we._length):ot.yaHash[Lt._id]?(or=Zt,mr=kt==="ns"?-$e[1]*Lt._length/be._length:rt(Lt,or,{n:"top",s:"bottom"}[kt])):(or=Qe(Lt,zt,Zt),mr=it(Lt,or)),or>1&&(Lt.maxallowed!==void 0&&Et===(Lt.range[0]<Lt.range[1]?"e":"w")||Lt.minallowed!==void 0&&Et===(Lt.range[0]<Lt.range[1]?"w":"e"))&&(or=1,mr=0),cr?(nr=Zt,pr=Le||ot.isSubplotConstrained?$e[1]:rt(wt,nr)):ot.yaHash[wt._id]?(nr=Zt,pr=$e[1]*wt._length/be._length):ot.xaHash[wt._id]?(nr=zt,pr=Ct==="ew"?-$e[0]*wt._length/we._length:rt(wt,nr,{e:"right",w:"left"}[Ct])):(nr=Qe(wt,zt,Zt),pr=it(wt,nr)),nr>1&&(wt.maxallowed!==void 0&&Ue===(wt.range[0]<wt.range[1]?"n":"s")||wt.minallowed!==void 0&&Ue===(wt.range[0]<wt.range[1]?"s":"n"))&&(nr=1,pr=0),!(!or&&!nr)){or||(or=1),nr||(nr=1);var Ar=Lt._offset-mr/or,en=wt._offset-pr/nr;yt.clipRect.call(y.setTranslate,mr,pr).call(y.setScale,or,nr),yt.plot.call(y.setTranslate,Ar,en).call(y.setScale,1/or,1/nr),(or!==yt.xScaleFactor||nr!==yt.yScaleFactor)&&(y.setPointGroupScale(yt.zoomScalePts,or,nr),y.setTextPointsScale(yt.zoomScaleTxt,or,nr)),y.hideOutsideRangePoints(yt.clipOnAxisFalseTraces,yt),yt.xScaleFactor=or,yt.yScaleFactor=nr}}}}function Qe($e,je,ct){return $e.fixedrange?0:Et&&Mt.xaHash[$e._id]?je:Ue&&(Mt.isSubplotConstrained?Mt.xaHash:Mt.yaHash)[$e._id]?ct:0}function it($e,je){return je?($e.range=$e._r.slice(),X($e,je),rt($e,je)):0}function rt($e,je,ct){return $e._length*(1-je)*T[ct||$e.constraintoward||"middle"]}return Pe}function oe(z,te,ue,ve){var _e=c.ensureSingle(z.draglayer,te,ue,function(Re){Re.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",z.id)});return _e.call(M,ve),_e.node()}function Y(z,te,ue,ve,_e,Re,Le){var Ve=oe(z,"rect",te,ue);return i.select(Ve).call(y.setRect,ve,_e,Re,Le),Ve}function G(z,te){for(var ue=0;ue<z.length;ue++)if(!z[ue].fixedrange)return te;return""}function K(z,te){var ue=z.range[te],ve=Math.abs(ue-z.range[1-te]),_e;return z.type==="date"?ue:z.type==="log"?(_e=Math.ceil(Math.max(0,-Math.log(ve)/Math.LN10))+3,a("."+_e+"g")(Math.pow(10,ue))):(_e=Math.floor(Math.log(Math.abs(ue))/Math.LN10)-Math.floor(Math.log(ve)/Math.LN10)+4,a("."+String(_e)+"g")(ue))}function ee(z,te,ue,ve,_e){for(var Re=0;Re<z.length;Re++){var Le=z[Re];if(!Le.fixedrange)if(Le.rangebreaks){var Ve=Le._id.charAt(0)==="y",Xe=Ve?1-te:te,Ze=Ve?1-ue:ue;ve[Le._name+".range[0]"]=Le.l2r(Le.p2l(Xe*Le._length)),ve[Le._name+".range[1]"]=Le.l2r(Le.p2l(Ze*Le._length))}else{var Te=Le._rl[0],we=Le._rl[1]-Te;ve[Le._name+".range[0]"]=Le.l2r(Te+we*te),ve[Le._name+".range[1]"]=Le.l2r(Te+we*ue)}}if(_e&&_e.length){var be=(te+(1-ue))/2;ee(_e,be,1-be,ve,[])}}function ie(z,te){for(var ue=0;ue<z.length;ue++){var ve=z[ue];if(!ve.fixedrange){if(ve.rangebreaks){var _e=0,Re=ve._length,Le=ve.p2l(_e+te)-ve.p2l(_e),Ve=ve.p2l(Re+te)-ve.p2l(Re),Xe=(Le+Ve)/2;ve.range=[ve.l2r(ve._rl[0]-Xe),ve.l2r(ve._rl[1]-Xe)]}else ve.range=[ve.l2r(ve._rl[0]-te/ve._m),ve.l2r(ve._rl[1]-te/ve._m)];ve.limitRange&&ve.limitRange()}}}function re(z){return 1-(z>=0?Math.min(z,.9):1/(1/Math.max(z,-.3)+3.222))}function se(z,te,ue){return z?z==="nsew"?ue?"":te==="pan"?"move":"crosshair":z.toLowerCase()+"-resize":"pointer"}function ge(z,te,ue,ve,_e){return z.append("path").attr("class","zoombox").style({fill:te>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",d(ue,ve)).attr("d",_e+"Z")}function xe(z,te,ue){return z.append("path").attr("class","zoombox-corners").style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("transform",d(te,ue)).attr("d","M0,0Z")}function Se(z,te,ue,ve,_e,Re){z.attr("d",ve+"M"+ue.l+","+ue.t+"v"+ue.h+"h"+ue.w+"v-"+ue.h+"h-"+ue.w+"Z"),ce(z,te,_e,Re)}function ce(z,te,ue,ve){ue||(z.transition().style("fill",ve>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),te.transition().style("opacity",1).duration(200))}function pe(z){i.select(z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function ye(z){J&&z.data&&z._context.showTips&&(c.notifier(c._(z,"Double-click to zoom back out"),"long"),J=!1)}function U(z,te){return"M"+(z.l-.5)+","+(te-B-.5)+"h-3v"+(2*B+1)+"h3ZM"+(z.r+.5)+","+(te-B-.5)+"h3v"+(2*B+1)+"h-3Z"}function W(z,te){return"M"+(te-B-.5)+","+(z.t-.5)+"v-3h"+(2*B+1)+"v3ZM"+(te-B-.5)+","+(z.b+.5)+"v3h"+(2*B+1)+"v-3Z"}function j(z){var te=Math.floor(Math.min(z.b-z.t,z.r-z.l,B)/2);return"M"+(z.l-3.5)+","+(z.t-.5+te)+"h3v"+-te+"h"+te+"v-3h-"+(te+3)+"ZM"+(z.r+3.5)+","+(z.t-.5+te)+"h-3v"+-te+"h"+-te+"v-3h"+(te+3)+"ZM"+(z.r+3.5)+","+(z.b+.5-te)+"h-3v"+te+"h"+-te+"v3h"+(te+3)+"ZM"+(z.l-3.5)+","+(z.b+.5-te)+"h3v"+te+"h"+te+"v3h-"+(te+3)+"Z"}function F(z,te,ue,ve,_e){for(var Re=!1,Le={},Ve={},Xe,Ze,Te,we,be=(_e||{}).xaHash,ke=(_e||{}).yaHash,He=0;He<te.length;He++){var Ke=te[He];for(Xe in ue)if(Ke[Xe]){for(Te in Ke)!(_e&&(be[Te]||ke[Te]))&&!(Te.charAt(0)==="x"?ue:ve)[Te]&&(Le[Te]=Xe);for(Ze in ve)!(_e&&(be[Ze]||ke[Ze]))&&Ke[Ze]&&(Re=!0)}for(Ze in ve)if(Ke[Ze])for(we in Ke)!(_e&&(be[we]||ke[we]))&&!(we.charAt(0)==="x"?ue:ve)[we]&&(Ve[we]=Ze)}Re&&(c.extendFlat(Le,Ve),Ve={});var st={},vt=[];for(Te in Le){var pt=D(z,Te);vt.push(pt),st[pt._id]=pt}var ft={},lt=[];for(we in Ve){var Mt=D(z,we);lt.push(Mt),ft[Mt._id]=Mt}return{xaHash:st,yaHash:ft,xaxes:vt,yaxes:lt,xLinks:Le,yLinks:Ve,isSubplotConstrained:Re}}function P(z,te){if(!s)z.onwheel!==void 0?z.onwheel=te:z.onmousewheel!==void 0?z.onmousewheel=te:z.isAddedWheelEvent||(z.isAddedWheelEvent=!0,z.addEventListener("wheel",te,{passive:!1}));else{var ue=z.onwheel!==void 0?"wheel":"mousewheel";z._onwheel&&z.removeEventListener(ue,z._onwheel),z._onwheel=te,z.addEventListener(ue,te,{passive:!1})}}function q(z){var te=[];for(var ue in z)te.push(z[ue]);return te}f.exports={makeDragBox:ne,makeDragger:oe,makeRectDragger:Y,makeZoombox:ge,makeCorners:xe,updateZoombox:Se,xyCorners:j,transitionZoombox:ce,removeZoombox:pe,showDoubleClickNotifier:ye,attachWheelEventHandler:P}},2464:function(f,u,r){var i=r(3428),c=r(3024),a=r(6476),l=r(3972),s=r(1184).makeDragBox,v=r(3816).DRAGGERSIZE;u.initInteractions=function(p){var o=p._fullLayout;if(p._context.staticPlot){i.select(p).selectAll(".drag").remove();return}if(!(!o._has("cartesian")&&!o._has("splom"))){var y=Object.keys(o._plots||{}).sort(function(E,M){if((o._plots[E].mainplot&&!0)===(o._plots[M].mainplot&&!0)){var b=E.split("y"),w=M.split("y");return b[0]===w[0]?Number(b[1]||1)-Number(w[1]||1):Number(b[0]||1)-Number(w[0]||1)}return o._plots[E].mainplot?1:-1});y.forEach(function(E){var M=o._plots[E],b=M.xaxis,w=M.yaxis;if(!M.mainplot){var A=s(p,M,b._offset,w._offset,b._length,w._length,"ns","ew");A.onmousemove=function(C){p._fullLayout._rehover=function(){p._fullLayout._hoversubplot===E&&p._fullLayout._plots[E]&&c.hover(p,C,E)},c.hover(p,C,E),p._fullLayout._lasthover=A,p._fullLayout._hoversubplot=E},A.onmouseout=function(C){p._dragging||(p._fullLayout._hoversubplot=null,a.unhover(p,C))},p._context.showAxisDragHandles&&(s(p,M,b._offset-v,w._offset-v,v,v,"n","w"),s(p,M,b._offset+b._length,w._offset-v,v,v,"n","e"),s(p,M,b._offset-v,w._offset+w._length,v,v,"s","w"),s(p,M,b._offset+b._length,w._offset+w._length,v,v,"s","e"))}if(p._context.showAxisDragHandles){if(E===b._mainSubplot){var R=b._mainLinePosition;b.side==="top"&&(R-=v),s(p,M,b._offset+b._length*.1,R,b._length*.8,v,"","ew"),s(p,M,b._offset,R,b._length*.1,v,"","w"),s(p,M,b._offset+b._length*.9,R,b._length*.1,v,"","e")}if(E===w._mainSubplot){var T=w._mainLinePosition;w.side!=="right"&&(T-=v),s(p,M,T,w._offset+w._length*.1,v,w._length*.8,"ns",""),s(p,M,T,w._offset+w._length*.9,v,w._length*.1,"s",""),s(p,M,T,w._offset,v,w._length*.1,"n","")}}});var _=o._hoverlayer.node();_.onmousemove=function(E){E.target=p._fullLayout._lasthover,c.hover(p,E,o._hoversubplot)},_.onclick=function(E){E.target=p._fullLayout._lasthover,c.click(p,E)},_.onmousedown=function(E){p._fullLayout._lasthover.onmousedown(E)},u.updateFx(p)}},u.updateFx=function(d){var p=d._fullLayout,o=p.dragmode==="pan"?"move":"crosshair";l(p._draggers,o)}},6632:function(f,u,r){var i=r(4040),c=r(3400),a=r(9811);f.exports=function(s){return function(d,p){var o=d[s];if(Array.isArray(o))for(var y=i.subplotsRegistry.cartesian,_=y.idRegex,E=p._subplots,M=E.xaxis,b=E.yaxis,w=E.cartesian,A=p._has("cartesian")||p._has("gl2d"),R=0;R<o.length;R++){var T=o[R];if(c.isPlainObject(T)){var C=a.cleanId(T.xref,"x",!1),m=a.cleanId(T.yref,"y",!1),L=_.x.test(C),D=_.y.test(m);if(L||D){A||c.pushUnique(p._basePlotModules,y);var O=!1;L&&M.indexOf(C)===-1&&(M.push(C),O=!0),D&&b.indexOf(m)===-1&&(b.push(m),O=!0),O&&L&&D&&w.push(C+m)}}}}}},7952:function(f,u,r){var i=r(3428),c=r(4040),a=r(3400),l=r(7316),s=r(3616),v=r(4888)._M,d=r(9811),p=r(3816),o=r(9616),y=a.ensureSingle;function _(R,T,C){return a.ensureSingle(R,T,C,function(m){m.datum(C)})}u.name="cartesian",u.attr=["xaxis","yaxis"],u.idRoot=["x","y"],u.idRegex=p.idRegex,u.attrRegex=p.attrRegex,u.attributes=r(6720),u.layoutAttributes=r(4724),u.supplyLayoutDefaults=r(7352),u.transitionAxes=r(3736),u.finalizeSubplots=function(R,T){var C=T._subplots,m=C.xaxis,L=C.yaxis,D=C.cartesian,O=D.concat(C.gl2d||[]),N={},V={},X,k,Z;for(X=0;X<O.length;X++){var B=O[X].split("y");N[B[0]]=1,V["y"+B[1]]=1}for(X=0;X<m.length;X++)k=m[X],N[k]||(Z=(R[d.id2name(k)]||{}).anchor,p.idRegex.y.test(Z)||(Z="y"),D.push(k+Z),O.push(k+Z),V[Z]||(V[Z]=1,a.pushUnique(L,Z)));for(X=0;X<L.length;X++)Z=L[X],V[Z]||(k=(R[d.id2name(Z)]||{}).anchor,p.idRegex.x.test(k)||(k="x"),D.push(k+Z),O.push(k+Z),N[k]||(N[k]=1,a.pushUnique(m,k)));if(!O.length){k="",Z="";for(var J in R)if(p.attrRegex.test(J)){var ne=J.charAt(0);ne==="x"?(!k||+J.substr(5)<+k.substr(5))&&(k=J):(!Z||+J.substr(5)<+Z.substr(5))&&(Z=J)}k=k?d.name2id(k):"x",Z=Z?d.name2id(Z):"y",m.push(k),L.push(Z),D.push(k+Z)}},u.plot=function(R,T,C,m){var L=R._fullLayout,D=L._subplots.cartesian,O=R.calcdata,N;if(!Array.isArray(T))for(T=[],N=0;N<O.length;N++)T.push(N);for(N=0;N<D.length;N++){for(var V=D[N],X=L._plots[V],k=[],Z,B=0;B<O.length;B++){var J=O[B],ne=J[0].trace;ne.xaxis+ne.yaxis===V&&((T.indexOf(ne.index)!==-1||ne.carpet)&&(Z&&Z[0].trace.xaxis+Z[0].trace.yaxis===V&&["tonextx","tonexty","tonext"].indexOf(ne.fill)!==-1&&k.indexOf(Z)===-1&&k.push(Z),k.push(J)),Z=J)}E(R,X,k,C,m)}};function E(R,T,C,m,L){for(var D=p.traceLayerClasses,O=R._fullLayout,N=O._modules,V,X,k,Z={},B=0;B<C.length;B++){var J=C[B][0].trace,ne=J.zorder||0;Z[ne]||(Z[ne]=[]),Z[ne].push(C[B])}for(var oe=[],Y=[],G=Object.keys(Z).map(Number).sort(a.sorterAsc),K=0;K<G.length;K++)for(var ee=G[K],ie=0;ie<N.length;ie++){V=N[ie];var re=V.name,se=c.modules[re].categories;if(se.svg){var ge=V.layerName||re+"layer",xe=ge+(K?Number(K)+1:""),Se=V.plot;X=v(C,Se,ee),k=X[0],C=X[1],k.length&&oe.push({i:D.indexOf(ge),zorder:K,className:xe,plotMethod:Se,cdModule:k}),se.zoomScale&&Y.push("."+xe)}}oe.sort(function(ye,U){return(ye.zorder||0)-(U.zorder||0)||ye.i-U.i});var ce=T.plot.selectAll("g.mlayer").data(oe,function(ye){return ye.className});if(ce.enter().append("g").attr("class",function(ye){return ye.className}).classed("mlayer",!0).classed("rangeplot",T.isRangePlot),ce.exit().remove(),ce.order(),ce.each(function(ye){var U=i.select(this),W=ye.className;ye.plotMethod(R,T,ye.cdModule,U,m,L),p.clipOnAxisFalseQuery.indexOf("."+W)===-1&&s.setClipUrl(U,T.layerClipId,R)}),O._has("scattergl")&&(V=c.getModule("scattergl"),k=v(C,V)[0],V.plot(R,T,k)),!R._context.staticPlot&&(T._hasClipOnAxisFalse&&(T.clipOnAxisFalseTraces=T.plot.selectAll(p.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),Y.length)){var pe=T.plot.selectAll(Y.join(",")).selectAll(".trace");T.zoomScalePts=pe.selectAll("path.point"),T.zoomScaleTxt=pe.selectAll(".textpoint")}}u.clean=function(R,T,C,m){var L=m._plots||{},D=T._plots||{},O=m._subplots||{},N,V,X;if(m._hasOnlyLargeSploms&&!T._hasOnlyLargeSploms)for(X in L)N=L[X],N.plotgroup&&N.plotgroup.remove();var k=m._has&&m._has("gl"),Z=T._has&&T._has("gl");if(k&&!Z)for(X in L)N=L[X],N._scene&&N._scene.destroy();if(O.xaxis&&O.yaxis){var B=d.listIds({_fullLayout:m});for(V=0;V<B.length;V++){var J=B[V];T[d.id2name(J)]||m._infolayer.selectAll(".g-"+J+"title").remove()}}var ne=m._has&&m._has("cartesian"),oe=T._has&&T._has("cartesian");if(ne&&!oe)w(m._cartesianlayer.selectAll(".subplot"),m),m._defs.selectAll(".axesclip").remove(),delete m._axisConstraintGroups,delete m._axisMatchGroups;else if(O.cartesian)for(V=0;V<O.cartesian.length;V++){var Y=O.cartesian[V];if(!D[Y]){var G="."+Y+",."+Y+"-x,."+Y+"-y";m._cartesianlayer.selectAll(G).remove(),A(Y,m)}}},u.drawFramework=function(R){var T=R._fullLayout,C=M(R),m=T._cartesianlayer.selectAll(".subplot").data(C,String);m.enter().append("g").attr("class",function(L){return"subplot "+L[0]}),m.order(),m.exit().call(w,T),m.each(function(L){var D=L[0],O=T._plots[D];O.plotgroup=i.select(this),b(R,O),O.draglayer=y(T._draggers,"g",D)})},u.rangePlot=function(R,T,C){b(R,T),E(R,T,C),l.style(R)};function M(R){var T=R._fullLayout,C=T._subplots.cartesian,m=C.length,L,D,O,N,V,X,k=[],Z=[];for(L=0;L<m;L++){O=C[L],N=T._plots[O],V=N.xaxis,X=N.yaxis;var B=V._mainAxis,J=X._mainAxis,ne=B._id+J._id,oe=T._plots[ne];N.overlays=[],ne!==O&&oe?(N.mainplot=ne,N.mainplotinfo=oe,Z.push(O)):(N.mainplot=void 0,N.mainplotinfo=void 0,k.push(O))}for(L=0;L<Z.length;L++)O=Z[L],N=T._plots[O],N.mainplotinfo.overlays.push(N);var Y=k.concat(Z),G=new Array(m);for(L=0;L<m;L++){O=Y[L],N=T._plots[O],V=N.xaxis,X=N.yaxis;var K=[O,V.layer,X.layer,V.overlaying||"",X.overlaying||""];for(D=0;D<N.overlays.length;D++)K.push(N.overlays[D].id);G[L]=K}return G}function b(R,T){var C=T.plotgroup,m=T.id,L=p.layerValue2layerClass[T.xaxis.layer],D=p.layerValue2layerClass[T.yaxis.layer],O=R._fullLayout._hasOnlyLargeSploms;if(T.mainplot){var X=T.mainplotinfo,k=X.plotgroup,Z=m+"-x",B=m+"-y";T.minorGridlayer=X.minorGridlayer,T.gridlayer=X.gridlayer,T.zerolinelayer=X.zerolinelayer,y(X.overlinesBelow,"path",Z),y(X.overlinesBelow,"path",B),y(X.overaxesBelow,"g",Z),y(X.overaxesBelow,"g",B),T.plot=y(X.overplot,"g",m),y(X.overlinesAbove,"path",Z),y(X.overlinesAbove,"path",B),y(X.overaxesAbove,"g",Z),y(X.overaxesAbove,"g",B),T.xlines=k.select(".overlines-"+L).select("."+Z),T.ylines=k.select(".overlines-"+D).select("."+B),T.xaxislayer=k.select(".overaxes-"+L).select("."+Z),T.yaxislayer=k.select(".overaxes-"+D).select("."+B)}else if(O)T.xlines=y(C,"path","xlines-above"),T.ylines=y(C,"path","ylines-above"),T.xaxislayer=y(C,"g","xaxislayer-above"),T.yaxislayer=y(C,"g","yaxislayer-above");else{var N=y(C,"g","layer-subplot");T.shapelayer=y(N,"g","shapelayer"),T.imagelayer=y(N,"g","imagelayer"),T.minorGridlayer=y(C,"g","minor-gridlayer"),T.gridlayer=y(C,"g","gridlayer"),T.zerolinelayer=y(C,"g","zerolinelayer");var V=y(C,"g","layer-between");T.shapelayerBetween=y(V,"g","shapelayer"),T.imagelayerBetween=y(V,"g","imagelayer"),y(C,"path","xlines-below"),y(C,"path","ylines-below"),T.overlinesBelow=y(C,"g","overlines-below"),y(C,"g","xaxislayer-below"),y(C,"g","yaxislayer-below"),T.overaxesBelow=y(C,"g","overaxes-below"),T.plot=y(C,"g","plot"),T.overplot=y(C,"g","overplot"),T.xlines=y(C,"path","xlines-above"),T.ylines=y(C,"path","ylines-above"),T.overlinesAbove=y(C,"g","overlines-above"),y(C,"g","xaxislayer-above"),y(C,"g","yaxislayer-above"),T.overaxesAbove=y(C,"g","overaxes-above"),T.xlines=C.select(".xlines-"+L),T.ylines=C.select(".ylines-"+D),T.xaxislayer=C.select(".xaxislayer-"+L),T.yaxislayer=C.select(".yaxislayer-"+D)}O||(_(T.minorGridlayer,"g",T.xaxis._id),_(T.minorGridlayer,"g",T.yaxis._id),T.minorGridlayer.selectAll("g").map(function(J){return J[0]}).sort(d.idSort),_(T.gridlayer,"g",T.xaxis._id),_(T.gridlayer,"g",T.yaxis._id),T.gridlayer.selectAll("g").map(function(J){return J[0]}).sort(d.idSort)),T.xlines.style("fill","none").classed("crisp",!0),T.ylines.style("fill","none").classed("crisp",!0)}function w(R,T){if(R){var C={};R.each(function(V){var X=V[0],k=i.select(this);k.remove(),A(X,T),C[X]=!0});for(var m in T._plots)for(var L=T._plots[m],D=L.overlays||[],O=0;O<D.length;O++){var N=D[O];C[N.id]&&N.plot.selectAll(".trace").remove()}}}function A(R,T){T._draggers.selectAll("g."+R).remove(),T._defs.select("#clip"+T._uid+R+"plot").remove()}u.toSVG=function(R){var T=R._fullLayout._glimages,C=i.select(R).selectAll(".svg-container"),m=C.filter(function(D,O){return O===C.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function L(){var D=this,O=D.toDataURL("image/png"),N=T.append("svg:image");N.attr({xmlns:o.svg,"xlink:href":O,preserveAspectRatio:"none",x:0,y:0,width:D.style.width,height:D.style.height})}m.each(L)},u.updateFx=r(2464).updateFx},4724:function(f,u,r){var i=r(5376),c=r(2548),a=r(8192).u,l=r(2880).extendFlat,s=r(1780).templatedArray,v=r(9736).descriptionWithDates,d=r(9032).ONEDAY,p=r(3816),o=p.HOUR_PATTERN,y=p.WEEKDAY_PATTERN,_={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},E=l({},_,{values:_.values.slice().concat(["sync"])});function M(V){return{valType:"integer",min:0,dflt:V?5:0,editType:"ticks"}}var b={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},w={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},A={valType:"data_array",editType:"ticks"},R={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function T(V){var X={valType:"number",min:0,editType:"ticks"};return V||(X.dflt=5),X}function C(V){var X={valType:"number",min:0,editType:"ticks"};return V||(X.dflt=1),X}var m={valType:"color",dflt:c.defaultLine,editType:"ticks"},L={valType:"color",dflt:c.lightLine,editType:"ticks"};function D(V){var X={valType:"number",min:0,editType:"ticks"};return V||(X.dflt=1),X}var O=l({},a,{editType:"ticks"}),N={valType:"boolean",editType:"ticks"};f.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:c.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:i({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[p.idRegex.x.toString(),p.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[p.idRegex.x.toString(),p.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[y,o,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:d},editType:"calc"}),tickmode:E,nticks:M(),tick0:b,dtick:w,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:A,ticktext:{valType:"data_array",editType:"ticks"},ticks:R,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:T(),tickwidth:C(),tickcolor:m,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:l({},a,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:i({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:v("tick label")},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:v("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:c.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:N,gridcolor:L,gridwidth:D(),griddash:O,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:c.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:c.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",p.idRegex.x.toString(),p.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",p.idRegex.x.toString(),p.idRegex.y.toString()],editType:"plot"},minor:{tickmode:_,nticks:M("minor"),tick0:b,dtick:w,tickvals:A,ticks:R,ticklen:T("minor"),tickwidth:C("minor"),tickcolor:m,gridcolor:L,gridwidth:D("minor"),griddash:O,showgrid:N,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:i({editType:"ticks"})}}},7352:function(f,u,r){var i=r(3400),c=r(6308),a=r(624).isUnifiedHover,l=r(1008),s=r(1780),v=r(4859),d=r(4724),p=r(4944),o=r(5955),y=r(1888),_=r(7668),E=r(9811),M=E.id2name,b=E.name2id,w=r(3816).AX_ID_PATTERN,A=r(4040),R=A.traceIs,T=A.getComponentMethod;function C(m,L,D){Array.isArray(m[L])?m[L].push(D):m[L]=[D]}f.exports=function(L,D,O){var N=D.autotypenumbers,V={},X={},k={},Z={},B={},J={},ne={},oe={},Y={},G={},K,ee;for(K=0;K<O.length;K++){var ie=O[K];if(!(!R(ie,"cartesian")&&!R(ie,"gl2d"))){var re;if(ie.xaxis)re=M(ie.xaxis),C(V,re,ie);else if(ie.xaxes)for(ee=0;ee<ie.xaxes.length;ee++)C(V,M(ie.xaxes[ee]),ie);var se;if(ie.yaxis)se=M(ie.yaxis),C(V,se,ie);else if(ie.yaxes)for(ee=0;ee<ie.yaxes.length;ee++)C(V,M(ie.yaxes[ee]),ie);if(ie.type==="funnel"?ie.orientation==="h"?(re&&(X[re]=!0),se&&(ne[se]=!0)):se&&(k[se]=!0):ie.type==="image"?(se&&(oe[se]=!0),re&&(oe[re]=!0)):(se&&(B[se]=!0,J[se]=!0),(!R(ie,"carpet")||ie.type==="carpet"&&!ie._cheater)&&re&&(Z[re]=!0)),ie.type==="carpet"&&ie._cheater&&re&&(X[re]=!0),R(ie,"2dMap")&&(Y[re]=!0,Y[se]=!0),R(ie,"oriented")){var ge=ie.orientation==="h"?se:re;G[ge]=!0}}}var xe=D._subplots,Se=xe.xaxis,ce=xe.yaxis,pe=i.simpleMap(Se,M),ye=i.simpleMap(ce,M),U=pe.concat(ye),W=c.background;Se.length&&ce.length&&(W=i.coerce(L,D,v,"plot_bgcolor"));var j=c.combine(W,D.paper_bgcolor),F,P,q,z,te;function ue(){var de=V[F]||[];te._traceIndices=de.map(function(Me){return Me._expandedIndex}),te._annIndices=[],te._shapeIndices=[],te._selectionIndices=[],te._imgIndices=[],te._subplotsWith=[],te._counterAxes=[],te._name=te._attr=F,te._id=P}function ve(de,Me){return i.coerce(z,te,d,de,Me)}function _e(de,Me){return i.coerce2(z,te,d,de,Me)}function Re(de){return de==="x"?ce:Se}function Le(de,Me){for(var he=de==="x"?pe:ye,Ee=[],Pe=0;Pe<he.length;Pe++){var Ne=he[Pe];Ne!==Me&&!(L[Ne]||{}).overlaying&&Ee.push(b(Ne))}return Ee}var Ve={x:Re("x"),y:Re("y")},Xe=Ve.x.concat(Ve.y),Ze={},Te=[];function we(){var de=z.matches;w.test(de)&&Xe.indexOf(de)===-1&&(Ze[de]=z.type,Te=Object.keys(Ze))}var be=l(L,D),ke=a(be);for(K=0;K<U.length;K++){F=U[K],P=b(F),q=F.charAt(0),i.isPlainObject(L[F])||(L[F]={}),z=L[F],te=s.newContainer(D,F,q+"axis"),ue();var He=q==="x"&&!Z[F]&&X[F]||q==="y"&&!B[F]&&k[F],Ke=q==="y"&&(!J[F]&&ne[F]||oe[F]),st={hasMinor:!0,letter:q,font:D.font,outerTicks:Y[F],showGrid:!G[F],data:V[F]||[],bgColor:j,calendar:D.calendar,automargin:!0,visibleDflt:He,reverseDflt:Ke,autotypenumbersDflt:N,splomStash:((D._splomAxes||{})[q]||{})[P],noAutotickangles:q==="y"};ve("uirevision",D.uirevision),p(z,te,ve,st),o(z,te,ve,st,D);var vt=ke&&q===be.charAt(0),pt=_e("spikecolor",ke?te.color:void 0),ft=_e("spikethickness",ke?1.5:void 0),lt=_e("spikedash",ke?"dot":void 0),Mt=_e("spikemode",ke?"across":void 0),ot=_e("spikesnap"),Ct=ve("showspikes",!!vt||!!pt||!!ft||!!lt||!!Mt||!!ot);Ct||(delete te.spikecolor,delete te.spikethickness,delete te.spikedash,delete te.spikemode,delete te.spikesnap);var kt=M(z.overlaying),St=[0,1];if(D[kt]!==void 0){var Et=M(D[kt].anchor);D[Et]!==void 0&&(St=D[Et].domain)}_(z,te,ve,{letter:q,counterAxes:Ve[q],overlayableAxes:Le(q,F),grid:D.grid,overlayingDomain:St}),ve("title.standoff"),we(),te._input=z}for(K=0;K<Te.length;){P=Te[K++],F=M(P),q=F.charAt(0),i.isPlainObject(L[F])||(L[F]={}),z=L[F],te=s.newContainer(D,F,q+"axis"),ue();var Ue={letter:q,font:D.font,outerTicks:Y[F],showGrid:!G[F],data:[],bgColor:j,calendar:D.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:N,splomStash:((D._splomAxes||{})[q]||{})[P]};ve("uirevision",D.uirevision),te.type=Ze[P]||"linear",o(z,te,ve,Ue,D),_(z,te,ve,{letter:q,counterAxes:Ve[q],overlayableAxes:Le(q,F),grid:D.grid}),ve("fixedrange"),we(),te._input=z}var De=T("rangeslider","handleDefaults"),Ie=T("rangeselector","handleDefaults");for(K=0;K<pe.length;K++)F=pe[K],z=L[F],te=D[F],De(L,D,F),te.type==="date"&&Ie(z,te,D,ye,te.calendar),ve("fixedrange");for(K=0;K<ye.length;K++){F=ye[K],z=L[F],te=D[F];var Fe=D[M(te.anchor)],We=T("rangeslider","isVisible")(Fe);ve("fixedrange",We)}y.handleDefaults(L,D,{axIds:Xe.concat(Te).sort(E.idSort),axHasImage:oe})}},2136:function(f,u,r){var i=r(9760).mix,c=r(2548),a=r(3400);f.exports=function(s,v,d,p){p=p||{};var o=p.dfltColor;function y(k,Z){return a.coerce2(s,v,p.attributes,k,Z)}var _=y("linecolor",o),E=y("linewidth"),M=d("showline",p.showLine||!!_||!!E);M||(delete v.linecolor,delete v.linewidth);var b=i(o,p.bgColor,p.blend||c.lightFraction).toRgbString(),w=y("gridcolor",b),A=y("gridwidth"),R=y("griddash"),T=d("showgrid",p.showGrid||!!w||!!A||!!R);if(T||(delete v.gridcolor,delete v.gridwidth,delete v.griddash),p.hasMinor){var C=i(v.gridcolor,p.bgColor,67).toRgbString(),m=y("minor.gridcolor",C),L=y("minor.gridwidth",v.gridwidth||1),D=y("minor.griddash",v.griddash||"solid"),O=d("minor.showgrid",!!m||!!L||!!D);O||(delete v.minor.gridcolor,delete v.minor.gridwidth,delete v.minor.griddash)}if(!p.noZeroLine){var N=y("zerolinecolor",o),V=y("zerolinewidth"),X=d("zeroline",p.showGrid||!!N||!!V);X||(delete v.zerolinecolor,delete v.zerolinewidth)}}},7668:function(f,u,r){var i=r(8248),c=r(3400);f.exports=function(l,s,v,d){var p=d.counterAxes||[],o=d.overlayableAxes||[],y=d.letter,_=d.grid,E=d.overlayingDomain,M,b,w,A,R,T;_&&(b=_._domains[y][_._axisMap[s._id]],M=_._anchors[s._id],b&&(w=_[y+"side"].split(" ")[0],A=_.domain[y][w==="right"||w==="top"?1:0])),b=b||[0,1],M=M||(i(l.position)?"free":p[0]||"free"),w=w||(y==="x"?"bottom":"left"),A=A||0,R=0,T=!1;var C=c.coerce(l,s,{anchor:{valType:"enumerated",values:["free"].concat(p),dflt:M}},"anchor"),m=c.coerce(l,s,{side:{valType:"enumerated",values:y==="x"?["bottom","top"]:["left","right"],dflt:w}},"side");if(C==="free"){if(y==="y"){var L=v("autoshift");L&&(A=m==="left"?E[0]:E[1],T=s.automargin?s.automargin:!0,R=m==="left"?-3:3),v("shift",R)}v("position",A)}v("automargin",T);var D=!1;if(o.length&&(D=c.coerce(l,s,{overlaying:{valType:"enumerated",values:[!1].concat(o),dflt:!1}},"overlaying")),!D){var O=v("domain",b);O[0]>O[1]-.000244140625&&(s.domain=b),c.noneOrAll(l.domain,s.domain,b),s.tickmode==="sync"&&(s.tickmode="auto")}return v("layer"),s}},2568:function(f,u,r){var i=r(5024);f.exports=function(a,l,s,v,d){d||(d={});var p=d.tickSuffixDflt,o=i(a),y=s("tickprefix");y&&s("showtickprefix",o);var _=s("ticksuffix",p);_&&s("showticksuffix",o)}},6312:function(f,u,r){var i=r(6808);f.exports=function(a,l,s,v){var d=l._template||{},p=l.type||d.type||"-";s("minallowed"),s("maxallowed");var o=s("range");if(!o){var y;!v.noInsiderange&&p!=="log"&&(y=s("insiderange"),y&&(y[0]===null||y[1]===null)&&(l.insiderange=!1,y=void 0),y&&(o=s("range",y)))}var _=l.getAutorangeDflt(o,v),E=s("autorange",_),M;o&&(o[0]===null&&o[1]===null||(o[0]===null||o[1]===null)&&(E==="reversed"||E===!0)||o[0]!==null&&(E==="min"||E==="max reversed")||o[1]!==null&&(E==="max"||E==="min reversed"))&&(o=void 0,delete l.range,l.autorange=!0,M=!0),M||(_=l.getAutorangeDflt(o,v),E=s("autorange",_)),E&&(i(s,E,o),(p==="linear"||p==="-")&&s("rangemode")),l.cleanRange()}},1160:function(f,u,r){var i=r(4284).FROM_BL;f.exports=function(a,l,s){s===void 0&&(s=i[a.constraintoward||"center"]);var v=[a.r2l(a.range[0]),a.r2l(a.range[1])],d=v[0]+(v[1]-v[0])*s;a.range=a._input.range=[a.l2r(d+(v[0]-d)*l),a.l2r(d+(v[1]-d)*l)],a.setScale()}},8344:function(f,u,r){var i=r(3428),c=r(4336).E9,a=r(3400),l=a.numberFormat,s=r(8248),v=a.cleanNumber,d=a.ms2DateTime,p=a.dateTime2ms,o=a.ensureNumber,y=a.isArrayOrTypedArray,_=r(9032),E=_.FP_SAFE,M=_.BADNUM,b=_.LOG_CLIP,w=_.ONEWEEK,A=_.ONEDAY,R=_.ONEHOUR,T=_.ONEMIN,C=_.ONESEC,m=r(9811),L=r(3816),D=L.HOUR_PATTERN,O=L.WEEKDAY_PATTERN;function N(X){return Math.pow(10,X)}function V(X){return X!=null}f.exports=function(k,Z){Z=Z||{};var B=k._id||"x",J=B.charAt(0);function ne(U,W){if(U>0)return Math.log(U)/Math.LN10;if(U<=0&&W&&k.range&&k.range.length===2){var j=k.range[0],F=k.range[1];return .5*(j+F-2*b*Math.abs(j-F))}else return M}function oe(U,W,j,F){if((F||{}).msUTC&&s(U))return+U;var P=p(U,j||k.calendar);if(P===M)if(s(U)){U=+U;var q=Math.floor(a.mod(U+.05,1)*10),z=Math.round(U-q/10);P=p(new Date(z))+q/10}else return M;return P}function Y(U,W,j){return d(U,W,j||k.calendar)}function G(U){return k._categories[Math.round(U)]}function K(U){if(V(U)){if(k._categoriesMap===void 0&&(k._categoriesMap={}),k._categoriesMap[U]!==void 0)return k._categoriesMap[U];k._categories.push(typeof U=="number"?String(U):U);var W=k._categories.length-1;return k._categoriesMap[U]=W,W}return M}function ee(U,W){for(var j=new Array(W),F=0;F<W;F++){var P=(U[0]||[])[F],q=(U[1]||[])[F];j[F]=ie([P,q])}return j}function ie(U){if(k._categoriesMap)return k._categoriesMap[U]}function re(U){var W=ie(U);if(W!==void 0)return W;if(s(U))return+U}function se(U){return s(U)?+U:ie(U)}function ge(U,W,j){return i.round(j+W*U,2)}function xe(U,W,j){return(U-j)/W}var Se=function(W){return s(W)?ge(W,k._m,k._b):M},ce=function(U){return xe(U,k._m,k._b)};if(k.rangebreaks){var pe=J==="y";Se=function(U){if(!s(U))return M;var W=k._rangebreaks.length;if(!W)return ge(U,k._m,k._b);var j=pe;k.range[0]>k.range[1]&&(j=!j);for(var F=j?-1:1,P=F*U,q=0,z=0;z<W;z++){var te=F*k._rangebreaks[z].min,ue=F*k._rangebreaks[z].max;if(P<te)break;if(P>ue)q=z+1;else{q=P<(te+ue)/2?z:z+1;break}}var ve=k._B[q]||0;return isFinite(ve)?ge(U,k._m2,ve):0},ce=function(U){var W=k._rangebreaks.length;if(!W)return xe(U,k._m,k._b);for(var j=0,F=0;F<W&&!(U<k._rangebreaks[F].pmin);F++)U>k._rangebreaks[F].pmax&&(j=F+1);return xe(U,k._m2,k._B[j])}}k.c2l=k.type==="log"?ne:o,k.l2c=k.type==="log"?N:o,k.l2p=Se,k.p2l=ce,k.c2p=k.type==="log"?function(U,W){return Se(ne(U,W))}:Se,k.p2c=k.type==="log"?function(U){return N(ce(U))}:ce,["linear","-"].indexOf(k.type)!==-1?(k.d2r=k.r2d=k.d2c=k.r2c=k.d2l=k.r2l=v,k.c2d=k.c2r=k.l2d=k.l2r=o,k.d2p=k.r2p=function(U){return k.l2p(v(U))},k.p2d=k.p2r=ce,k.cleanPos=o):k.type==="log"?(k.d2r=k.d2l=function(U,W){return ne(v(U),W)},k.r2d=k.r2c=function(U){return N(v(U))},k.d2c=k.r2l=v,k.c2d=k.l2r=o,k.c2r=ne,k.l2d=N,k.d2p=function(U,W){return k.l2p(k.d2r(U,W))},k.p2d=function(U){return N(ce(U))},k.r2p=function(U){return k.l2p(v(U))},k.p2r=ce,k.cleanPos=o):k.type==="date"?(k.d2r=k.r2d=a.identity,k.d2c=k.r2c=k.d2l=k.r2l=oe,k.c2d=k.c2r=k.l2d=k.l2r=Y,k.d2p=k.r2p=function(U,W,j){return k.l2p(oe(U,0,j))},k.p2d=k.p2r=function(U,W,j){return Y(ce(U),W,j)},k.cleanPos=function(U){return a.cleanDate(U,M,k.calendar)}):k.type==="category"?(k.d2c=k.d2l=K,k.r2d=k.c2d=k.l2d=G,k.d2r=k.d2l_noadd=re,k.r2c=function(U){var W=se(U);return W!==void 0?W:k.fraction2r(.5)},k.l2r=k.c2r=o,k.r2l=se,k.d2p=function(U){return k.l2p(k.r2c(U))},k.p2d=function(U){return G(ce(U))},k.r2p=k.d2p,k.p2r=ce,k.cleanPos=function(U){return typeof U=="string"&&U!==""?U:o(U)}):k.type==="multicategory"&&(k.r2d=k.c2d=k.l2d=G,k.d2r=k.d2l_noadd=re,k.r2c=function(U){var W=re(U);return W!==void 0?W:k.fraction2r(.5)},k.r2c_just_indices=ie,k.l2r=k.c2r=o,k.r2l=re,k.d2p=function(U){return k.l2p(k.r2c(U))},k.p2d=function(U){return G(ce(U))},k.r2p=k.d2p,k.p2r=ce,k.cleanPos=function(U){return Array.isArray(U)||typeof U=="string"&&U!==""?U:o(U)},k.setupMultiCategory=function(U){var W=k._traceIndices,j,F,P=k._matchGroup;if(P&&k._categories.length===0){for(var q in P)if(q!==B){var z=Z[m.id2name(q)];W=W.concat(z._traceIndices)}}var te=[[0,{}],[0,{}]],ue=[];for(j=0;j<W.length;j++){var ve=U[W[j]];if(J in ve){var _e=ve[J],Re=ve._length||a.minRowLength(_e);if(y(_e[0])&&y(_e[1]))for(F=0;F<Re;F++){var Le=_e[0][F],Ve=_e[1][F];V(Le)&&V(Ve)&&(ue.push([Le,Ve]),Le in te[0][1]||(te[0][1][Le]=te[0][0]++),Ve in te[1][1]||(te[1][1][Ve]=te[1][0]++))}}}for(ue.sort(function(Xe,Ze){var Te=te[0][1],we=Te[Xe[0]]-Te[Ze[0]];if(we)return we;var be=te[1][1];return be[Xe[1]]-be[Ze[1]]}),j=0;j<ue.length;j++)K(ue[j])}),k.fraction2r=function(U){var W=k.r2l(k.range[0]),j=k.r2l(k.range[1]);return k.l2r(W+U*(j-W))},k.r2fraction=function(U){var W=k.r2l(k.range[0]),j=k.r2l(k.range[1]);return(k.r2l(U)-W)/(j-W)},k.limitRange=function(U){var W=k.minallowed,j=k.maxallowed;if(!(W===void 0&&j===void 0)){U||(U="range");var F=a.nestedProperty(k,U).get(),P=a.simpleMap(F,k.r2l),q=P[1]<P[0];q&&P.reverse();var z=a.simpleMap([W,j],k.r2l);if(W!==void 0&&P[0]<z[0]&&(F[q?1:0]=W),j!==void 0&&P[1]>z[1]&&(F[q?0:1]=j),F[0]===F[1]){var te=k.l2r(W),ue=k.l2r(j);if(W!==void 0){var ve=te+1;j!==void 0&&(ve=Math.min(ve,ue)),F[q?1:0]=ve}if(j!==void 0){var _e=ue+1;W!==void 0&&(_e=Math.max(_e,te)),F[q?0:1]=_e}}}},k.cleanRange=function(U,W){k._cleanRange(U,W),k.limitRange(U)},k._cleanRange=function(U,W){W||(W={}),U||(U="range");var j=a.nestedProperty(k,U).get(),F,P;if(k.type==="date"?P=a.dfltRange(k.calendar):J==="y"?P=L.DFLTRANGEY:k._name==="realaxis"?P=[0,1]:P=W.dfltRange||L.DFLTRANGEX,P=P.slice(),(k.rangemode==="tozero"||k.rangemode==="nonnegative")&&(P[0]=0),!j||j.length!==2){a.nestedProperty(k,U).set(P);return}var q=j[0]===null,z=j[1]===null;for(k.type==="date"&&!k.autorange&&(j[0]=a.cleanDate(j[0],M,k.calendar),j[1]=a.cleanDate(j[1],M,k.calendar)),F=0;F<2;F++)if(k.type==="date"){if(!a.isDateTime(j[F],k.calendar)){k[U]=P;break}if(k.r2l(j[0])===k.r2l(j[1])){var te=a.constrain(k.r2l(j[0]),a.MIN_MS+1e3,a.MAX_MS-1e3);j[0]=k.l2r(te-1e3),j[1]=k.l2r(te+1e3);break}}else{if(!s(j[F]))if(!(q||z)&&s(j[1-F]))j[F]=j[1-F]*(F?10:.1);else{k[U]=P;break}if(j[F]<-E?j[F]=-E:j[F]>E&&(j[F]=E),j[0]===j[1]){var ue=Math.max(1,Math.abs(j[0]*1e-6));j[0]-=ue,j[1]+=ue}}},k.setScale=function(U){var W=Z._size;if(k.overlaying){var j=m.getFromId({_fullLayout:Z},k.overlaying);k.domain=j.domain}var F=U&&k._r?"_r":"range",P=k.calendar;k.cleanRange(F);var q=k.r2l(k[F][0],P),z=k.r2l(k[F][1],P),te=J==="y";if(te?(k._offset=W.t+(1-k.domain[1])*W.h,k._length=W.h*(k.domain[1]-k.domain[0]),k._m=k._length/(q-z),k._b=-k._m*z):(k._offset=W.l+k.domain[0]*W.w,k._length=W.w*(k.domain[1]-k.domain[0]),k._m=k._length/(z-q),k._b=-k._m*q),k._rangebreaks=[],k._lBreaks=0,k._m2=0,k._B=[],k.rangebreaks){var ue,ve;if(k._rangebreaks=k.locateBreaks(Math.min(q,z),Math.max(q,z)),k._rangebreaks.length){for(ue=0;ue<k._rangebreaks.length;ue++)ve=k._rangebreaks[ue],k._lBreaks+=Math.abs(ve.max-ve.min);var _e=te;q>z&&(_e=!_e),_e&&k._rangebreaks.reverse();var Re=_e?-1:1;for(k._m2=Re*k._length/(Math.abs(z-q)-k._lBreaks),k._B.push(-k._m2*(te?z:q)),ue=0;ue<k._rangebreaks.length;ue++)ve=k._rangebreaks[ue],k._B.push(k._B[k._B.length-1]-Re*k._m2*(ve.max-ve.min));for(ue=0;ue<k._rangebreaks.length;ue++)ve=k._rangebreaks[ue],ve.pmin=Se(ve.min),ve.pmax=Se(ve.max)}}if(!isFinite(k._m)||!isFinite(k._b)||k._length<0)throw Z._replotting=!1,new Error("Something went wrong with axis scaling")},k.maskBreaks=function(U){var W=k.rangebreaks||[],j,F,P,q,z;W._cachedPatterns||(W._cachedPatterns=W.map(function(Te){return Te.enabled&&Te.bounds?a.simpleMap(Te.bounds,Te.pattern?v:k.d2c):null})),W._cachedValues||(W._cachedValues=W.map(function(Te){return Te.enabled&&Te.values?a.simpleMap(Te.values,k.d2c).sort(a.sorterAsc):null}));for(var te=0;te<W.length;te++){var ue=W[te];if(ue.enabled){if(ue.bounds){var ve=ue.pattern;switch(j=W._cachedPatterns[te],F=j[0],P=j[1],ve){case O:z=new Date(U),q=z.getUTCDay(),F>P&&(P+=7,q<F&&(q+=7));break;case D:z=new Date(U);var _e=z.getUTCHours(),Re=z.getUTCMinutes(),Le=z.getUTCSeconds(),Ve=z.getUTCMilliseconds();q=_e+(Re/60+Le/3600+Ve/36e5),F>P&&(P+=24,q<F&&(q+=24));break;case"":q=U;break}if(q>=F&&q<P)return M}else for(var Xe=W._cachedValues[te],Ze=0;Ze<Xe.length;Ze++)if(F=Xe[Ze],P=F+ue.dvalue,U>=F&&U<P)return M}}return U},k.locateBreaks=function(U,W){var j,F,P,q,z=[];if(!k.rangebreaks)return z;var te=k.rangebreaks.slice().sort(function(be,ke){return be.pattern===O&&ke.pattern===D?-1:ke.pattern===O&&be.pattern===D?1:0}),ue=function(be,ke){if(be=a.constrain(be,U,W),ke=a.constrain(ke,U,W),be!==ke){for(var He=!0,Ke=0;Ke<z.length;Ke++){var st=z[Ke];be<st.max&&ke>=st.min&&(be<st.min&&(st.min=be),ke>st.max&&(st.max=ke),He=!1)}He&&z.push({min:be,max:ke})}};for(j=0;j<te.length;j++){var ve=te[j];if(ve.enabled)if(ve.bounds){var _e=U,Re=W;ve.pattern&&(_e=Math.floor(_e)),F=a.simpleMap(ve.bounds,ve.pattern?v:k.r2l),P=F[0],q=F[1];var Le=new Date(_e),Ve,Xe;switch(ve.pattern){case O:Xe=w,Ve=((q<P?7:0)+(q-P))*A,_e+=P*A-(Le.getUTCDay()*A+Le.getUTCHours()*R+Le.getUTCMinutes()*T+Le.getUTCSeconds()*C+Le.getUTCMilliseconds());break;case D:Xe=A,Ve=((q<P?24:0)+(q-P))*R,_e+=P*R-(Le.getUTCHours()*R+Le.getUTCMinutes()*T+Le.getUTCSeconds()*C+Le.getUTCMilliseconds());break;default:_e=Math.min(F[0],F[1]),Re=Math.max(F[0],F[1]),Xe=Re-_e,Ve=Xe}for(var Ze=_e;Ze<Re;Ze+=Xe)ue(Ze,Ze+Ve)}else for(var Te=a.simpleMap(ve.values,k.d2c),we=0;we<Te.length;we++)P=Te[we],q=P+ve.dvalue,ue(P,q)}return z.sort(function(be,ke){return be.min-ke.min}),z},k.makeCalcdata=function(U,W,j){var F,P,q,z,te=k.type,ue=te==="date"&&U[W+"calendar"];if(W in U){if(F=U[W],z=U._length||a.minRowLength(F),a.isTypedArray(F)&&(te==="linear"||te==="log")){if(z===F.length)return F;if(F.subarray)return F.subarray(0,z)}if(te==="multicategory")return ee(F,z);for(P=new Array(z),q=0;q<z;q++)P[q]=k.d2c(F[q],0,ue,j)}else{var ve=W+"0"in U?k.d2c(U[W+"0"],0,ue):0,_e=U["d"+W]?Number(U["d"+W]):1;for(F=U[{x:"y",y:"x"}[W]],z=U._length||F.length,P=new Array(z),q=0;q<z;q++)P[q]=ve+q*_e}if(k.rangebreaks)for(q=0;q<z;q++)P[q]=k.maskBreaks(P[q]);return P},k.isValidRange=function(U,W){return Array.isArray(U)&&U.length===2&&(W&&U[0]===null||s(k.r2l(U[0])))&&(W&&U[1]===null||s(k.r2l(U[1])))},k.getAutorangeDflt=function(U,W){var j=!k.isValidRange(U,"nullOk");return j&&W&&W.reverseDflt?j="reversed":U&&(U[0]===null&&U[1]===null?j=!0:U[0]===null&&U[1]!==null?j="min":U[0]!==null&&U[1]===null&&(j="max")),j},k.isReversed=function(){var U=k.autorange;return U==="reversed"||U==="min reversed"||U==="max reversed"},k.isPtWithinRange=function(U,W){var j=k.c2l(U[J],null,W),F=k.r2l(k.range[0]),P=k.r2l(k.range[1]);return F<P?F<=j&&j<=P:P<=j&&j<=F},k._emptyCategories=function(){k._categories=[],k._categoriesMap={}},k.clearCalc=function(){var U=k._matchGroup;if(U){var W=null,j=null;for(var F in U){var P=Z[m.id2name(F)];if(P._categories){W=P._categories,j=P._categoriesMap;break}}W&&j?(k._categories=W,k._categoriesMap=j):k._emptyCategories()}else k._emptyCategories();if(k._initialCategories)for(var q=0;q<k._initialCategories.length;q++)K(k._initialCategories[q])},k.sortByInitialCategories=function(){var U=[];if(k._emptyCategories(),k._initialCategories)for(var W=0;W<k._initialCategories.length;W++)K(k._initialCategories[W]);U=U.concat(k._traceIndices);var j=k._matchGroup;for(var F in j)if(B!==F){var P=Z[m.id2name(F)];P._categories=k._categories,P._categoriesMap=k._categoriesMap,U=U.concat(P._traceIndices)}return U};var ye=Z._d3locale;k.type==="date"&&(k._dateFormat=ye?ye.timeFormat:c,k._extraFormat=Z._extraFormat),k._separators=Z.separators,k._numFormat=ye?ye.numberFormat:l,delete k._minDtick,delete k._forceTick0}},5024:function(f){f.exports=function(r){var i=["showexponent","showtickprefix","showticksuffix"],c=i.filter(function(l){return r[l]!==void 0}),a=function(l){return r[l]===r[c[0]]};if(c.every(a)||c.length===1)return r[c[0]]}},5936:function(f,u,r){var i=r(3400),c=r(6308).contrast,a=r(4724),l=r(5024),s=r(1272);f.exports=function(p,o,y,_,E){E||(E={});var M=y("labelalias");i.isPlainObject(M)||delete o.labelalias;var b=l(p),w=y("showticklabels");if(w){var A=E.font||{},R=o.color,T=o.ticklabelposition||"",C=T.indexOf("inside")!==-1?c(E.bgColor):R&&R!==a.color.dflt?R:A.color;if(i.coerceFont(y,"tickfont",A,{overrideDflt:{color:C}}),!E.noTicklabelstep&&_!=="multicategory"&&_!=="log"&&y("ticklabelstep"),!E.noAng){var m=y("tickangle");!E.noAutotickangles&&m==="auto"&&y("autotickangles")}if(_!=="category"){var L=y("tickformat");s(p,o,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:v}),o.tickformatstops.length||delete o.tickformatstops,!E.noExp&&!L&&_!=="date"&&(y("showexponent",b),y("exponentformat"),y("minexponent"),y("separatethousands"))}}};function v(d,p){function o(_,E){return i.coerce(d,p,a.tickformatstops,_,E)}var y=o("enabled");y&&(o("dtickrange"),o("value"))}},5404:function(f,u,r){var i=r(3400),c=r(4724);f.exports=function(l,s,v,d){var p=d.isMinor,o=p?l.minor||{}:l,y=p?s.minor:s,_=p?c.minor:c,E=p?"minor.":"",M=i.coerce2(o,y,_,"ticklen",p?(s.ticklen||5)*.6:void 0),b=i.coerce2(o,y,_,"tickwidth",p?s.tickwidth||1:void 0),w=i.coerce2(o,y,_,"tickcolor",(p?s.tickcolor:void 0)||y.color),A=v(E+"ticks",!p&&d.outerTicks||M||b||w?"outside":"");A||(delete y.ticklen,delete y.tickwidth,delete y.tickcolor)}},6332:function(f,u,r){var i=r(8728),c=r(3400).isArrayOrTypedArray,a=r(8116).isTypedArraySpec,l=r(8116).decodeTypedArraySpec;f.exports=function(v,d,p,o,y){y||(y={});var _=y.isMinor,E=_?v.minor||{}:v,M=_?d.minor:d,b=_?"minor.":"";function w(O){var N=E[O];return a(N)&&(N=l(N)),N!==void 0?N:(M._template||{})[O]}var A=w("tick0"),R=w("dtick"),T=w("tickvals"),C=c(T)?"array":R?"linear":"auto",m=p(b+"tickmode",C);if(m==="auto"||m==="sync")p(b+"nticks");else if(m==="linear"){var L=M.dtick=i.dtick(R,o);M.tick0=i.tick0(A,o,d.calendar,L)}else if(o!=="multicategory"){var D=p(b+"tickvals");D===void 0?M.tickmode="auto":_||p("ticktext")}}},3736:function(f,u,r){var i=r(3428),c=r(4040),a=r(3400),l=r(3616),s=r(4460);f.exports=function(d,p,o,y){var _=d._fullLayout;if(p.length===0){s.redrawComponents(d);return}function E(D){var O=D.xaxis,N=D.yaxis;_._defs.select("#"+D.clipId+"> rect").call(l.setTranslate,0,0).call(l.setScale,1,1),D.plot.call(l.setTranslate,O._offset,N._offset).call(l.setScale,1,1);var V=D.plot.selectAll(".scatterlayer .trace");V.selectAll(".point").call(l.setPointGroupScale,1,1),V.selectAll(".textpoint").call(l.setTextPointsScale,1,1),V.call(l.hideOutsideRangePoints,D)}function M(D,O){var N=D.plotinfo,V=N.xaxis,X=N.yaxis,k=V._length,Z=X._length,B=!!D.xr1,J=!!D.yr1,ne=[];if(B){var oe=a.simpleMap(D.xr0,V.r2l),Y=a.simpleMap(D.xr1,V.r2l),G=oe[1]-oe[0],K=Y[1]-Y[0];ne[0]=(oe[0]*(1-O)+O*Y[0]-oe[0])/(oe[1]-oe[0])*k,ne[2]=k*(1-O+O*K/G),V.range[0]=V.l2r(oe[0]*(1-O)+O*Y[0]),V.range[1]=V.l2r(oe[1]*(1-O)+O*Y[1])}else ne[0]=0,ne[2]=k;if(J){var ee=a.simpleMap(D.yr0,X.r2l),ie=a.simpleMap(D.yr1,X.r2l),re=ee[1]-ee[0],se=ie[1]-ie[0];ne[1]=(ee[1]*(1-O)+O*ie[1]-ee[1])/(ee[0]-ee[1])*Z,ne[3]=Z*(1-O+O*se/re),X.range[0]=V.l2r(ee[0]*(1-O)+O*ie[0]),X.range[1]=X.l2r(ee[1]*(1-O)+O*ie[1])}else ne[1]=0,ne[3]=Z;s.drawOne(d,V,{skipTitle:!0}),s.drawOne(d,X,{skipTitle:!0}),s.redrawComponents(d,[V._id,X._id]);var ge=B?k/ne[2]:1,xe=J?Z/ne[3]:1,Se=B?ne[0]:0,ce=J?ne[1]:0,pe=B?ne[0]/ne[2]*k:0,ye=J?ne[1]/ne[3]*Z:0,U=V._offset-pe,W=X._offset-ye;N.clipRect.call(l.setTranslate,Se,ce).call(l.setScale,1/ge,1/xe),N.plot.call(l.setTranslate,U,W).call(l.setScale,ge,xe),l.setPointGroupScale(N.zoomScalePts,1/ge,1/xe),l.setTextPointsScale(N.zoomScaleTxt,1/ge,1/xe)}var b;y&&(b=y());function w(){for(var D={},O=0;O<p.length;O++){var N=p[O],V=N.plotinfo.xaxis,X=N.plotinfo.yaxis;N.xr1&&(D[V._name+".range"]=N.xr1.slice()),N.yr1&&(D[X._name+".range"]=N.yr1.slice())}return b&&b(),c.call("relayout",d,D).then(function(){for(var k=0;k<p.length;k++)E(p[k].plotinfo)})}function A(){for(var D={},O=0;O<p.length;O++){var N=p[O],V=N.plotinfo.xaxis,X=N.plotinfo.yaxis;N.xr0&&(D[V._name+".range"]=N.xr0.slice()),N.yr0&&(D[X._name+".range"]=N.yr0.slice())}return c.call("relayout",d,D).then(function(){for(var k=0;k<p.length;k++)E(p[k].plotinfo)})}var R,T,C,m=i.ease(o.easing);d._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(C),C=null,A()});function L(){T=Date.now();for(var D=Math.min(1,(T-R)/o.duration),O=m(D),N=0;N<p.length;N++)M(p[N],O);T-R>o.duration?(w(),C=window.cancelAnimationFrame(L)):C=window.requestAnimationFrame(L)}return R=Date.now(),C=window.requestAnimationFrame(L),Promise.resolve()}},4944:function(f,u,r){var i=r(4040).traceIs,c=r(2976);f.exports=function(p,o,y,_){y("autotypenumbers",_.autotypenumbersDflt);var E=y("type",(_.splomStash||{}).type);E==="-"&&(a(o,_.data),o.type==="-"?o.type="linear":p.type=o.type)};function a(d,p){if(d.type==="-"){var o=d._id,y=o.charAt(0),_;o.indexOf("scene")!==-1&&(o=y);var E=l(p,o,y);if(E){if(E.type==="histogram"&&y==={v:"y",h:"x"}[E.orientation||"v"]){d.type="linear";return}var M=y+"calendar",b=E[M],w={noMultiCategory:!i(E,"cartesian")||i(E,"noMultiCategory")};if(E.type==="box"&&E._hasPreCompStats&&y==={h:"x",v:"y"}[E.orientation||"v"]&&(w.noMultiCategory=!0),w.autotypenumbers=d.autotypenumbers,v(E,y)){var A=s(E),R=[];for(_=0;_<p.length;_++){var T=p[_];!i(T,"box-violin")||(T[y+"axis"]||y)!==o||(T[A]!==void 0?R.push(T[A][0]):T.name!==void 0?R.push(T.name):R.push("text"),T[M]!==b&&(b=void 0))}d.type=c(R,b,w)}else if(E.type==="splom"){var C=E.dimensions,m=C[E._axesDim[o]];m.visible&&(d.type=c(m.values,b,w))}else d.type=c(E[y]||[E[y+"0"]],b,w)}}}function l(d,p,o){for(var y=0;y<d.length;y++){var _=d[y];if(_.type==="splom"&&_._length>0&&(_["_"+o+"axes"]||{})[p])return _;if((_[o+"axis"]||o)===p){if(v(_,o))return _;if((_[o]||[]).length||_[o+"0"])return _}}}function s(d){return{v:"x",h:"y"}[d.orientation||"v"]}function v(d,p){var o=s(d),y=i(d,"box-violin"),_=i(d._fullInput||{},"candlestick");return y&&!_&&p===o&&d[o]===void 0&&d[o+"0"]===void 0}},2460:function(f,u,r){var i=r(4040),c=r(3400);u.manageCommandObserver=function(p,o,y,_){var E={},M=!0;o&&o._commandObserver&&(E=o._commandObserver),E.cache||(E.cache={}),E.lookupTable={};var b=u.hasSimpleAPICommandBindings(p,y,E.lookupTable);if(o&&o._commandObserver){if(b)return E;if(o._commandObserver.remove)return o._commandObserver.remove(),o._commandObserver=null,E}if(b){a(p,b,E.cache),E.check=function(){if(M){var T=a(p,b,E.cache);return T.changed&&_&&E.lookupTable[T.value]!==void 0&&(E.disable(),Promise.resolve(_({value:T.value,type:b.type,prop:b.prop,traces:b.traces,index:E.lookupTable[T.value]})).then(E.enable,E.enable)),T.changed}};for(var w=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],A=0;A<w.length;A++)p._internalOn(w[A],E.check);E.remove=function(){for(var R=0;R<w.length;R++)p._removeInternalListener(w[R],E.check)}}else c.log("Unable to automatically bind plot updates to API command"),E.lookupTable={},E.remove=function(){};return E.disable=function(){M=!1},E.enable=function(){M=!0},o&&(o._commandObserver=E),E},u.hasSimpleAPICommandBindings=function(p,o,y){var _,E=o.length,M;for(_=0;_<E;_++){var b,w=o[_],A=w.method,R=w.args;if(Array.isArray(R)||(R=[]),!A)return!1;var T=u.computeAPICommandBindings(p,A,R);if(T.length!==1)return!1;if(!M)M=T[0],Array.isArray(M.traces)&&M.traces.sort();else{if(b=T[0],b.type!==M.type||b.prop!==M.prop)return!1;if(Array.isArray(M.traces))if(Array.isArray(b.traces)){b.traces.sort();for(var C=0;C<M.traces.length;C++)if(M.traces[C]!==b.traces[C])return!1}else return!1;else if(b.prop!==M.prop)return!1}b=T[0];var m=b.value;if(Array.isArray(m))if(m.length===1)m=m[0];else return!1;y&&(y[m]=_)}return M};function a(p,o,y){var _,E,M,b=!1;if(o.type==="data")_=p._fullData[o.traces!==null?o.traces[0]:0];else if(o.type==="layout")_=p._fullLayout;else return!1;return E=c.nestedProperty(_,o.prop).get(),M=y[o.type]=y[o.type]||{},M.hasOwnProperty(o.prop)&&M[o.prop]!==E&&(b=!0),M[o.prop]=E,{changed:b,value:E}}u.executeAPICommand=function(p,o,y){if(o==="skip")return Promise.resolve();var _=i.apiMethodRegistry[o],E=[p];Array.isArray(y)||(y=[]);for(var M=0;M<y.length;M++)E.push(y[M]);return _.apply(null,E).catch(function(b){return c.warn("API call to Plotly."+o+" rejected.",b),Promise.reject(b)})},u.computeAPICommandBindings=function(p,o,y){var _;switch(Array.isArray(y)||(y=[]),o){case"restyle":_=v(p,y);break;case"relayout":_=s(p,y);break;case"update":_=v(p,[y[0],y[2]]).concat(s(p,[y[1]]));break;case"animate":_=l(p,y);break;default:_=[]}return _};function l(p,o){return Array.isArray(o[0])&&o[0].length===1&&["string","number"].indexOf(typeof o[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:o[0][0].toString()}]:[]}function s(p,o){var y=[],_=o[0],E={};if(typeof _=="string")E[_]=o[1];else if(c.isPlainObject(_))E=_;else return y;return d(E,function(M,b,w){y.push({type:"layout",prop:M,value:w})},"",0),y}function v(p,o){var y,_,E,M,b=[];if(_=o[0],E=o[1],y=o[2],M={},typeof _=="string")M[_]=E;else if(c.isPlainObject(_))M=_,y===void 0&&(y=E);else return b;return y===void 0&&(y=null),d(M,function(w,A,R){var T,C;if(Array.isArray(R)){C=R.slice();var m=Math.min(C.length,p.data.length);y&&(m=Math.min(m,y.length)),T=[];for(var L=0;L<m;L++)T[L]=y?y[L]:L}else C=R,T=y?y.slice():null;if(T===null)Array.isArray(C)&&(C=C[0]);else if(Array.isArray(T)){if(!Array.isArray(C)){var D=C;C=[];for(var O=0;O<T.length;O++)C[O]=D}C.length=Math.min(T.length,C.length)}b.push({type:"data",prop:w,traces:T,value:C})},"",0),b}function d(p,o,y,_){Object.keys(p).forEach(function(E){var M=p[E];if(E[0]!=="_"){var b=y+(_>0?".":"")+E;c.isPlainObject(M)?d(M,o,b,_+1):o(b,E,M)}})}},6968:function(f,u,r){var i=r(2880).extendFlat;u.u=function(c,a){c=c||{},a=a||{};var l={valType:"info_array",editType:c.editType,items:[{valType:"number",min:0,max:1,editType:c.editType},{valType:"number",min:0,max:1,editType:c.editType}],dflt:[0,1]};c.name&&c.name+"",c.trace,a.description&&""+a.description;var s={x:i({},l,{}),y:i({},l,{}),editType:c.editType};return c.noGridCell||(s.row={valType:"integer",min:0,dflt:0,editType:c.editType},s.column={valType:"integer",min:0,dflt:0,editType:c.editType}),s},u.Q=function(c,a,l,s){var v=s&&s.x||[0,1],d=s&&s.y||[0,1],p=a.grid;if(p){var o=l("domain.column");o!==void 0&&(o<p.columns?v=p._domains.x[o]:delete c.domain.column);var y=l("domain.row");y!==void 0&&(y<p.rows?d=p._domains.y[y]:delete c.domain.row)}var _=l("domain.x",v),E=l("domain.y",d);_[0]<_[1]||(c.domain.x=v.slice()),E[0]<E[1]||(c.domain.y=d.slice())}},5376:function(f){f.exports=function(u){var r=u.variantValues,i=u.editType,c=u.colorEditType;c===void 0&&(c=i);var a={editType:i,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};u.noNumericWeightValues&&(a.valType="enumerated",a.values=a.extras,a.extras=void 0,a.min=void 0,a.max=void 0);var l={family:{valType:"string",noBlank:!0,strict:!0,editType:i},size:{valType:"number",min:1,editType:i},color:{valType:"color",editType:c},weight:a,style:{editType:i,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:u.noFontVariant?void 0:{editType:i,valType:"enumerated",values:r||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:u.noFontTextcase?void 0:{editType:i,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:u.noFontLineposition?void 0:{editType:i,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:u.noFontShadow?void 0:{editType:i,valType:"string",dflt:u.autoShadowDflt?"auto":"none"},editType:i};return u.autoSize&&(l.size.dflt="auto"),u.autoColor&&(l.color.dflt="auto"),u.arrayOk&&(l.family.arrayOk=!0,l.weight.arrayOk=!0,l.style.arrayOk=!0,u.noFontVariant||(l.variant.arrayOk=!0),u.noFontTextcase||(l.textcase.arrayOk=!0),u.noFontLineposition||(l.lineposition.arrayOk=!0),u.noFontShadow||(l.shadow.arrayOk=!0),l.size.arrayOk=!0,l.color.arrayOk=!0),l}},6672:function(f){f.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},4888:function(f,u,r){var i=r(4040);r(3816).SUBPLOT_PATTERN,u._M=function(c,a,l){var s=[],v=[],d;if(typeof a=="string"?d=i.getModule(a).plot:typeof a=="function"?d=a:d=a.plot,!d)return[s,c];for(var p=l,o=0;o<c.length;o++){var y=c[o],_=y[0].trace,E=_.zorder!==void 0;_.visible!==!0||_._length===0||(_._module&&_._module.plot===d&&(!E||_.zorder===p)?s.push(y):v.push(y))}return[s,v]}},4424:function(f){function u(i,c){var a=[0,0,0,0],l,s;for(l=0;l<4;++l)for(s=0;s<4;++s)a[s]+=i[4*l+s]*c[l];return a}function r(i,c){var a=u(i.projection,u(i.view,u(i.model,[c[0],c[1],c[2],1])));return a}f.exports=r},4859:function(f,u,r){var i=r(5376),c=r(5656),a=r(2548),l=r(2872),s=r(4200),v=r(6741),d=r(2880).extendFlat,p=i({editType:"calc"});p.family.dflt='"Open Sans", verdana, arial, sans-serif',p.size.dflt=12,p.color.dflt=a.defaultLine,f.exports={font:p,title:{text:{valType:"string",editType:"layoutstyle"},font:i({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:d(v({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:a.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:a.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:a.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:l.newshape,activeshape:l.activeshape,newselection:s.newselection,activeselection:s.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:d({},c.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:i({editType:"layoutstyle"})}}},6741:function(f){f.exports=function(u){var r=u.editType;return{t:{valType:"number",dflt:0,editType:r},r:{valType:"number",dflt:0,editType:r},b:{valType:"number",dflt:0,editType:r},l:{valType:"number",dflt:0,editType:r},editType:r}}},7316:function(f,u,r){var i=r(3428),c=r(4336).m_,a=r(7624).SO,l=r(8248),s=r(3160),v=r(4040),d=r(3060),p=r(1780),o=r(3400),y=r(6308),_=r(9032).BADNUM,E=r(9811),M=r(1936).clearOutline,b=r(5308),w=r(5656),A=r(6672),R=r(4888)._M,T=o.relinkPrivateKeys,C=o._,m=f.exports={};o.extendFlat(m,v),m.attributes=r(5464),m.attributes.type.values=m.allTypes,m.fontAttrs=r(5376),m.layoutAttributes=r(4859);var L=m.transformsRegistry,D=r(2460);m.executeAPICommand=D.executeAPICommand,m.computeAPICommandBindings=D.computeAPICommandBindings,m.manageCommandObserver=D.manageCommandObserver,m.hasSimpleAPICommandBindings=D.hasSimpleAPICommandBindings,m.redrawText=function(U){return U=o.getGraphDiv(U),new Promise(function(W){setTimeout(function(){U._fullLayout&&(v.getComponentMethod("annotations","draw")(U),v.getComponentMethod("legend","draw")(U),v.getComponentMethod("colorbar","draw")(U),W(m.previousPromises(U)))},300)})},m.resize=function(U){U=o.getGraphDiv(U);var W,j=new Promise(function(F,P){(!U||o.isHidden(U))&&P(new Error("Resize must be passed a displayed plot div element.")),U._redrawTimer&&clearTimeout(U._redrawTimer),U._resolveResize&&(W=U._resolveResize),U._resolveResize=F,U._redrawTimer=setTimeout(function(){if(!U.layout||U.layout.width&&U.layout.height||o.isHidden(U)){F(U);return}delete U.layout.width,delete U.layout.height;var q=U.changed;U.autoplay=!0,v.call("relayout",U,{autosize:!0}).then(function(){U.changed=q,U._resolveResize===F&&(delete U._resolveResize,F(U))})},100)});return W&&W(j),j},m.previousPromises=function(U){if((U._promises||[]).length)return Promise.all(U._promises).then(function(){U._promises=[]})},m.addLinks=function(U){if(!(!U._context.showLink&&!U._context.showSources)){var W=U._fullLayout,j=o.ensureSingle(W._paper,"text","js-plot-link-container",function(ue){ue.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:y.defaultLine,"pointer-events":"all"}).each(function(){var ve=i.select(this);ve.append("tspan").classed("js-link-to-tool",!0),ve.append("tspan").classed("js-link-spacer",!0),ve.append("tspan").classed("js-sourcelinks",!0)})}),F=j.node(),P={y:W._paper.attr("height")-9};document.body.contains(F)&&F.getComputedTextLength()>=W.width-20?(P["text-anchor"]="start",P.x=5):(P["text-anchor"]="end",P.x=W._paper.attr("width")-7),j.attr(P);var q=j.select(".js-link-to-tool"),z=j.select(".js-link-spacer"),te=j.select(".js-sourcelinks");U._context.showSources&&U._context.showSources(U),U._context.showLink&&O(U,q),z.text(q.text()&&te.text()?" - ":"")}};function O(U,W){W.text("");var j=W.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(U._context.linkText+" ");if(U._context.sendData)j.on("click",function(){m.sendDataToCloud(U)});else{var F=window.location.pathname.split("/"),P=window.location.search;j.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+F[2].split(".")[0]+"/"+F[1]+P})}}m.sendDataToCloud=function(U){var W=(window.PLOTLYENV||{}).BASE_URL||U._context.plotlyServerURL;if(W){U.emit("plotly_beforeexport");var j=i.select(U).append("div").attr("id","hiddenform").style("display","none"),F=j.append("form").attr({action:W+"/external",method:"post",target:"_blank"}),P=F.append("input").attr({type:"text",name:"data"});return P.node().value=m.graphJson(U,!1,"keepdata"),F.node().submit(),j.remove(),U.emit("plotly_afterexport"),!1}};var N=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],V=["year","month","dayMonth","dayMonthYear"];m.supplyDefaults=function(U,W){var j=W&&W.skipUpdateCalc,F=U._fullLayout||{};if(F._skipDefaults){delete F._skipDefaults;return}var P=U._fullLayout={},q=U.layout||{},z=U._fullData||[],te=U._fullData=[],ue=U.data||[],ve=U.calcdata||[],_e=U._context||{},Re;U._transitionData||m.createTransitionData(U),P._dfltTitle={plot:C(U,"Click to enter Plot title"),x:C(U,"Click to enter X axis title"),y:C(U,"Click to enter Y axis title"),colorbar:C(U,"Click to enter Colorscale title"),annotation:C(U,"new text")},P._traceWord=C(U,"trace");var Le=Z(U,N);if(P._mapboxAccessToken=_e.mapboxAccessToken,F._initialAutoSizeIsDone){var Ve=F.width,Xe=F.height;m.supplyLayoutGlobalDefaults(q,P,Le),q.width||(P.width=Ve),q.height||(P.height=Xe),m.sanitizeMargins(P)}else{m.supplyLayoutGlobalDefaults(q,P,Le);var Ze=!q.width||!q.height,Te=P.autosize,we=_e.autosizable,be=Ze&&(Te||we);be?m.plotAutoSize(U,q,P):Ze&&m.sanitizeMargins(P),!Te&&Ze&&(q.width=P.width,q.height=P.height)}P._d3locale=B(Le,P.separators),P._extraFormat=Z(U,V),P._initialAutoSizeIsDone=!0,P._dataLength=ue.length,P._modules=[],P._visibleModules=[],P._basePlotModules=[];var ke=P._subplots=k(),He=P._splomAxes={x:{},y:{}},Ke=P._splomSubplots={};P._splomGridDflt={},P._scatterStackOpts={},P._firstScatter={},P._alignmentOpts={},P._colorAxes={},P._requestRangeslider={},P._traceUids=X(z,ue),P._globalTransforms=(U._context||{}).globalTransforms,m.supplyDataDefaults(ue,te,q,P);var st=Object.keys(He.x),vt=Object.keys(He.y);if(st.length>1&&vt.length>1){for(v.getComponentMethod("grid","sizeDefaults")(q,P),Re=0;Re<st.length;Re++)o.pushUnique(ke.xaxis,st[Re]);for(Re=0;Re<vt.length;Re++)o.pushUnique(ke.yaxis,vt[Re]);for(var pt in Ke)o.pushUnique(ke.cartesian,pt)}if(P._has=m._hasPlotType.bind(P),z.length===te.length)for(Re=0;Re<te.length;Re++)T(te[Re],z[Re]);m.supplyLayoutModuleDefaults(q,P,te,U._transitionData);var ft=P._visibleModules,lt=[];for(Re=0;Re<ft.length;Re++){var Mt=ft[Re].crossTraceDefaults;Mt&&o.pushUnique(lt,Mt)}for(Re=0;Re<lt.length;Re++)lt[Re](te,P);P._hasOnlyLargeSploms=P._basePlotModules.length===1&&P._basePlotModules[0].name==="splom"&&st.length>15&&vt.length>15&&P.shapes.length===0&&P.images.length===0,m.linkSubplots(te,P,z,F),m.cleanPlot(te,P,z,F);var ot=!!(F._has&&F._has("gl2d")),Ct=!!(P._has&&P._has("gl2d")),kt=!!(F._has&&F._has("cartesian")),St=!!(P._has&&P._has("cartesian")),Et=kt||ot,Ue=St||Ct;Et&&!Ue?F._bgLayer.remove():Ue&&!Et&&(P._shouldCreateBgLayer=!0),F._zoomlayer&&!U._dragging&&M({_fullLayout:F}),J(te,P),T(P,F),v.getComponentMethod("colorscale","crossTraceDefaults")(te,P),P._preGUI||(P._preGUI={}),P._tracePreGUI||(P._tracePreGUI={});var De=P._tracePreGUI,Ie={},Fe;for(Fe in De)Ie[Fe]="old";for(Re=0;Re<te.length;Re++)Fe=te[Re]._fullInput.uid,Ie[Fe]||(De[Fe]={}),Ie[Fe]="new";for(Fe in Ie)Ie[Fe]==="old"&&delete De[Fe];K(P),v.getComponentMethod("rangeslider","makeData")(P),!j&&ve.length===te.length&&m.supplyDefaultsUpdateCalc(ve,te)},m.supplyDefaultsUpdateCalc=function(U,W){for(var j=0;j<W.length;j++){var F=W[j],P=(U[j]||[])[0];if(P&&P.trace){var q=P.trace;if(q._hasCalcTransform){var z=q._arrayAttrs,te,ue,ve;for(te=0;te<z.length;te++)ue=z[te],ve=o.nestedProperty(q,ue).get().slice(),o.nestedProperty(F,ue).set(ve)}P.trace=F}}};function X(U,W){var j=W.length,F=[],P,q;for(P=0;P<U.length;P++){var z=U[P]._fullInput;z!==q&&F.push(z),q=z}var te=F.length,ue=new Array(j),ve={};function _e(Ve,Xe){ue[Xe]=Ve,ve[Ve]=1}function Re(Ve,Xe){if(Ve&&typeof Ve=="string"&&!ve[Ve])return _e(Ve,Xe),!0}for(P=0;P<j;P++){var Le=W[P].uid;typeof Le=="number"&&(Le=String(Le)),!Re(Le,P)&&(P<te&&Re(F[P].uid,P)||_e(o.randstr(ve),P))}return ue}function k(){var U=v.collectableSubplotTypes,W={},j,F;if(!U){U=[];var P=v.subplotsRegistry;for(var q in P){var z=P[q],te=z.attr;if(te&&(U.push(q),Array.isArray(te)))for(F=0;F<te.length;F++)o.pushUnique(U,te[F])}}for(j=0;j<U.length;j++)W[U[j]]=[];return W}function Z(U,W){var j=U._context.locale;j||(j="en-US");var F=!1,P={};function q(Re){for(var Le=!0,Ve=0;Ve<W.length;Ve++){var Xe=W[Ve];P[Xe]||(Re[Xe]?P[Xe]=Re[Xe]:Le=!1)}Le&&(F=!0)}for(var z=0;z<2;z++){for(var te=U._context.locales,ue=0;ue<2;ue++){var ve=(te[j]||{}).format;if(ve&&(q(ve),F))break;te=v.localeRegistry}var _e=j.split("-")[0];if(F||_e===j)break;j=_e}return F||q(v.localeRegistry.en.format),P}function B(U,W){return U.decimal=W.charAt(0),U.thousands=W.charAt(1),{numberFormat:function(j){try{j=a(U).format(o.adjustFormat(j))}catch{return o.warnBadFormat(j),o.noFormat}return j},timeFormat:c(U).utcFormat}}function J(U,W){var j,F=[];W.meta&&(j=W._meta={meta:W.meta,layout:{meta:W.meta}});for(var P=0;P<U.length;P++){var q=U[P];q.meta?F[q.index]=q._meta={meta:q.meta}:W.meta&&(q._meta={meta:W.meta}),W.meta&&(q._meta.layout={meta:W.meta})}F.length&&(j||(j=W._meta={}),j.data=F)}m.createTransitionData=function(U){U._transitionData||(U._transitionData={}),U._transitionData._frames||(U._transitionData._frames=[]),U._transitionData._frameHash||(U._transitionData._frameHash={}),U._transitionData._counter||(U._transitionData._counter=0),U._transitionData._interruptCallbacks||(U._transitionData._interruptCallbacks=[])},m._hasPlotType=function(U){var W,j=this._basePlotModules||[];for(W=0;W<j.length;W++)if(j[W].name===U)return!0;var F=this._modules||[];for(W=0;W<F.length;W++){var P=F[W].name;if(P===U)return!0;var q=v.modules[P];if(q&&q.categories[U])return!0}return!1},m.cleanPlot=function(U,W,j,F){var P,q,z=F._basePlotModules||[];for(P=0;P<z.length;P++){var te=z[P];te.clean&&te.clean(U,W,j,F)}var ue=F._has&&F._has("gl"),ve=W._has&&W._has("gl");ue&&!ve&&F._glcontainer!==void 0&&(F._glcontainer.selectAll(".gl-canvas").remove(),F._glcontainer.selectAll(".no-webgl").remove(),F._glcanvas=null);var _e=!!F._infolayer;e:for(P=0;P<j.length;P++){var Re=j[P],Le=Re.uid;for(q=0;q<U.length;q++){var Ve=U[q];if(Le===Ve.uid)continue e}_e&&F._infolayer.select(".cb"+Le).remove()}},m.linkSubplots=function(U,W,j,F){var P,q,z=F._plots||{},te=W._plots={},ue=W._subplots,ve={_fullData:U,_fullLayout:W},_e=ue.cartesian.concat(ue.gl2d||[]);for(P=0;P<_e.length;P++){var Re=_e[P],Le=z[Re],Ve=E.getFromId(ve,Re,"x"),Xe=E.getFromId(ve,Re,"y"),Ze;for(Le?Ze=te[Re]=Le:(Ze=te[Re]={},Ze.id=Re),Ve._counterAxes.push(Xe._id),Xe._counterAxes.push(Ve._id),Ve._subplotsWith.push(Re),Xe._subplotsWith.push(Re),Ze.xaxis=Ve,Ze.yaxis=Xe,Ze._hasClipOnAxisFalse=!1,q=0;q<U.length;q++){var Te=U[q];if(Te.xaxis===Ze.xaxis._id&&Te.yaxis===Ze.yaxis._id&&Te.cliponaxis===!1){Ze._hasClipOnAxisFalse=!0;break}}}var we=E.list(ve,null,!0),be;for(P=0;P<we.length;P++){be=we[P];var ke=null;be.overlaying&&(ke=E.getFromId(ve,be.overlaying),ke&&ke.overlaying&&(be.overlaying=!1,ke=null)),be._mainAxis=ke||be,ke&&(be.domain=ke.domain.slice()),be._anchorAxis=be.anchor==="free"?null:E.getFromId(ve,be.anchor)}for(P=0;P<we.length;P++)if(be=we[P],be._counterAxes.sort(E.idSort),be._subplotsWith.sort(o.subplotSort),be._mainSubplot=ne(be,W),be._counterAxes.length&&(be.spikemode&&be.spikemode.indexOf("across")!==-1||be.automargin&&be.mirror&&be.anchor!=="free"||v.getComponentMethod("rangeslider","isVisible")(be))){var He=1,Ke=0;for(q=0;q<be._counterAxes.length;q++){var st=E.getFromId(ve,be._counterAxes[q]);He=Math.min(He,st.domain[0]),Ke=Math.max(Ke,st.domain[1])}He<Ke&&(be._counterDomainMin=He,be._counterDomainMax=Ke)}};function ne(U,W){var j={_fullLayout:W},F=U._id.charAt(0)==="x",P=U._mainAxis._anchorAxis,q="",z="",te="";if(P&&(te=P._mainAxis._id,q=F?U._id+te:te+U._id),!q||!W._plots[q]){q="";for(var ue=U._counterAxes,ve=0;ve<ue.length;ve++){var _e=ue[ve],Re=F?U._id+_e:_e+U._id;z||(z=Re);var Le=E.getFromId(j,_e);if(te&&Le.overlaying===te){q=Re;break}}}return q||z}m.clearExpandedTraceDefaultColors=function(U){var W,j,F;function P(z,te,ue,ve){j[ve]=te,j.length=ve+1,z.valType==="color"&&z.dflt===void 0&&W.push(j.join("."))}for(j=[],W=U._module._colorAttrs,W||(U._module._colorAttrs=W=[],d.crawl(U._module.attributes,P)),F=0;F<W.length;F++){var q=o.nestedProperty(U,"_input."+W[F]);q.get()||o.nestedProperty(U,W[F]).set(null)}},m.supplyDataDefaults=function(U,W,j,F){var P=F._modules,q=F._visibleModules,z=F._basePlotModules,te=0,ue=0,ve,_e,Re;F._transformModules=[];function Le(vt){W.push(vt);var pt=vt._module;pt&&(o.pushUnique(P,pt),vt.visible===!0&&o.pushUnique(q,pt),o.pushUnique(z,vt._module.basePlotModule),te++,vt._input.visible!==!1&&ue++)}var Ve={},Xe=[],Ze=(j.template||{}).data||{},Te=p.traceTemplater(Ze);for(ve=0;ve<U.length;ve++){if(Re=U[ve],_e=Te.newTrace(Re),_e.uid=F._traceUids[ve],m.supplyTraceDefaults(Re,_e,ue,F,ve),_e.index=ve,_e._input=Re,_e._expandedIndex=te,_e.transforms&&_e.transforms.length)for(var we=Re.visible!==!1&&_e.visible===!1,be=Y(_e,W,j,F),ke=0;ke<be.length;ke++){var He=be[ke],Ke={_template:_e._template,type:_e.type,uid:_e.uid+ke};we&&He.visible===!1&&delete He.visible,m.supplyTraceDefaults(He,Ke,te,F,ve),T(Ke,He),Ke.index=ve,Ke._input=Re,Ke._fullInput=_e,Ke._expandedIndex=te,Ke._expandedInput=He,Le(Ke)}else _e._fullInput=_e,_e._expandedInput=_e,Le(_e);v.traceIs(_e,"carpetAxis")&&(Ve[_e.carpet]=_e),v.traceIs(_e,"carpetDependent")&&Xe.push(ve)}for(ve=0;ve<Xe.length;ve++)if(_e=W[Xe[ve]],!!_e.visible){var st=Ve[_e.carpet];if(_e._carpet=st,!st||!st.visible){_e.visible=!1;continue}_e.xaxis=st.xaxis,_e.yaxis=st.yaxis}},m.supplyAnimationDefaults=function(U){U=U||{};var W,j={};function F(P,q){return o.coerce(U||{},j,w,P,q)}if(F("mode"),F("direction"),F("fromcurrent"),Array.isArray(U.frame))for(j.frame=[],W=0;W<U.frame.length;W++)j.frame[W]=m.supplyAnimationFrameDefaults(U.frame[W]||{});else j.frame=m.supplyAnimationFrameDefaults(U.frame||{});if(Array.isArray(U.transition))for(j.transition=[],W=0;W<U.transition.length;W++)j.transition[W]=m.supplyAnimationTransitionDefaults(U.transition[W]||{});else j.transition=m.supplyAnimationTransitionDefaults(U.transition||{});return j},m.supplyAnimationFrameDefaults=function(U){var W={};function j(F,P){return o.coerce(U||{},W,w.frame,F,P)}return j("duration"),j("redraw"),W},m.supplyAnimationTransitionDefaults=function(U){var W={};function j(F,P){return o.coerce(U||{},W,w.transition,F,P)}return j("duration"),j("easing"),W},m.supplyFrameDefaults=function(U){var W={};function j(F,P){return o.coerce(U,W,A,F,P)}return j("group"),j("name"),j("traces"),j("baseframe"),j("data"),j("layout"),W},m.supplyTraceDefaults=function(U,W,j,F,P){var q=F.colorway||y.defaults,z=q[j%q.length],te;function ue(ke,He){return o.coerce(U,W,m.attributes,ke,He)}var ve=ue("visible");ue("type"),ue("name",F._traceWord+" "+P),ue("uirevision",F.uirevision);var _e=m.getModule(W);if(W._module=_e,_e){var Re=_e.basePlotModule,Le=Re.attr,Ve=Re.attributes;if(Le&&Ve){var Xe=F._subplots,Ze="";if(ve||Re.name!=="gl2d"){if(Array.isArray(Le))for(te=0;te<Le.length;te++){var Te=Le[te],we=o.coerce(U,W,Ve,Te);Xe[Te]&&o.pushUnique(Xe[Te],we),Ze+=we}else Ze=o.coerce(U,W,Ve,Le);Xe[Re.name]&&o.pushUnique(Xe[Re.name],Ze)}}}if(ve){if(ue("customdata"),ue("ids"),ue("meta"),v.traceIs(W,"showLegend")?(o.coerce(U,W,_e.attributes.showlegend?_e.attributes:m.attributes,"showlegend"),ue("legend"),ue("legendwidth"),ue("legendgroup"),ue("legendgrouptitle.text"),ue("legendrank"),W._dfltShowLegend=!0):W._dfltShowLegend=!1,_e&&_e.supplyDefaults(U,W,z,F),v.traceIs(W,"noOpacity")||ue("opacity"),v.traceIs(W,"notLegendIsolatable")&&(W.visible=!!W.visible),v.traceIs(W,"noHover")||(W.hovertemplate||o.coerceHoverinfo(U,W,F),W.type!=="parcats"&&v.getComponentMethod("fx","supplyDefaults")(U,W,z,F)),_e&&_e.selectPoints){var be=ue("selectedpoints");o.isTypedArray(be)&&(W.selectedpoints=Array.from(be))}m.supplyTransformDefaults(U,W,F)}return W};function oe(U){var W=U.transforms;if(Array.isArray(W)&&W.length)for(var j=0;j<W.length;j++){var F=W[j],P=F._module||L[F.type];if(P&&P.makesData)return!0}return!1}m.hasMakesDataTransform=oe,m.supplyTransformDefaults=function(U,W,j){if(W._length||oe(U)){var F=j._globalTransforms||[],P=j._transformModules||[];if(!(!Array.isArray(U.transforms)&&F.length===0))for(var q=U.transforms||[],z=F.concat(q),te=W.transforms=[],ue=0;ue<z.length;ue++){var ve=z[ue],_e=ve.type,Re=L[_e],Le,Ve=!(ve._module&&ve._module===Re),Xe=Re&&typeof Re.transform=="function";Re||o.warn("Unrecognized transform type "+_e+"."),Re&&Re.supplyDefaults&&(Ve||Xe)?(Le=Re.supplyDefaults(ve,W,j,U),Le.type=_e,Le._module=Re,o.pushUnique(P,Re)):Le=o.extendFlat({},ve),te.push(Le)}}};function Y(U,W,j,F){for(var P=U.transforms,q=[U],z=0;z<P.length;z++){var te=P[z],ue=L[te.type];ue&&ue.transform&&(q=ue.transform(q,{transform:te,fullTrace:U,fullData:W,layout:j,fullLayout:F,transformIndex:z}))}return q}m.supplyLayoutGlobalDefaults=function(U,W,j){function F(Re,Le){return o.coerce(U,W,m.layoutAttributes,Re,Le)}var P=U.template;o.isPlainObject(P)&&(W.template=P,W._template=P.layout,W._dataTemplate=P.data),F("autotypenumbers");var q=o.coerceFont(F,"font"),z=q.size;o.coerceFont(F,"title.font",q,{overrideDflt:{size:Math.round(z*1.4)}}),F("title.text",W._dfltTitle.plot),F("title.xref");var te=F("title.yref");F("title.pad.t"),F("title.pad.r"),F("title.pad.b"),F("title.pad.l");var ue=F("title.automargin");F("title.x"),F("title.xanchor"),F("title.y"),F("title.yanchor"),ue&&(te==="paper"&&(W.title.y!==0&&(W.title.y=1),W.title.yanchor==="auto"&&(W.title.yanchor=W.title.y===0?"top":"bottom")),te==="container"&&(W.title.y==="auto"&&(W.title.y=1),W.title.yanchor==="auto"&&(W.title.yanchor=W.title.y<.5?"bottom":"top")));var ve=F("uniformtext.mode");ve&&F("uniformtext.minsize"),F("autosize",!(U.width&&U.height)),F("width"),F("height"),F("minreducedwidth"),F("minreducedheight"),F("margin.l"),F("margin.r"),F("margin.t"),F("margin.b"),F("margin.pad"),F("margin.autoexpand"),U.width&&U.height&&m.sanitizeMargins(W),v.getComponentMethod("grid","sizeDefaults")(U,W),F("paper_bgcolor"),F("separators",j.decimal+j.thousands),F("hidesources"),F("colorway"),F("datarevision");var _e=F("uirevision");F("editrevision",_e),F("selectionrevision",_e),v.getComponentMethod("modebar","supplyLayoutDefaults")(U,W),v.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(U,W,F),v.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(U,W,F),F("meta"),o.isPlainObject(U.transition)&&(F("transition.duration"),F("transition.easing"),F("transition.ordering")),v.getComponentMethod("calendars","handleDefaults")(U,W,"calendar"),v.getComponentMethod("fx","supplyLayoutGlobalDefaults")(U,W,F),o.coerce(U,W,b,"scattermode")};function G(U){return typeof U=="string"&&U.substr(U.length-2)==="px"&&parseFloat(U)}m.plotAutoSize=function(W,j,F){var P=W._context||{},q=P.frameMargins,z,te,ue=o.isPlotDiv(W);if(ue&&W.emit("plotly_autosize"),P.fillFrame)z=window.innerWidth,te=window.innerHeight,document.body.style.overflow="hidden";else{var ve=ue?window.getComputedStyle(W):{};if(z=G(ve.width)||G(ve.maxWidth)||F.width,te=G(ve.height)||G(ve.maxHeight)||F.height,l(q)&&q>0){var _e=1-2*q;z=Math.round(_e*z),te=Math.round(_e*te)}}var Re=m.layoutAttributes.width.min,Le=m.layoutAttributes.height.min;z<Re&&(z=Re),te<Le&&(te=Le);var Ve=!j.width&&Math.abs(F.width-z)>1,Xe=!j.height&&Math.abs(F.height-te)>1;(Xe||Ve)&&(Ve&&(F.width=z),Xe&&(F.height=te)),W._initialAutoSize||(W._initialAutoSize={width:z,height:te}),m.sanitizeMargins(F)},m.supplyLayoutModuleDefaults=function(U,W,j,F){var P=v.componentsRegistry,q=W._basePlotModules,z,te,ue,ve=v.subplotsRegistry.cartesian;for(z in P)ue=P[z],ue.includeBasePlot&&ue.includeBasePlot(U,W);q.length||q.push(ve),W._has("cartesian")&&(v.getComponentMethod("grid","contentDefaults")(U,W),ve.finalizeSubplots(U,W));for(var _e in W._subplots)W._subplots[_e].sort(o.subplotSort);for(te=0;te<q.length;te++)ue=q[te],ue.supplyLayoutDefaults&&ue.supplyLayoutDefaults(U,W,j);var Re=W._modules;for(te=0;te<Re.length;te++)ue=Re[te],ue.supplyLayoutDefaults&&ue.supplyLayoutDefaults(U,W,j);var Le=W._transformModules;for(te=0;te<Le.length;te++)ue=Le[te],ue.supplyLayoutDefaults&&ue.supplyLayoutDefaults(U,W,j,F);for(z in P)ue=P[z],ue.supplyLayoutDefaults&&ue.supplyLayoutDefaults(U,W,j)},m.purge=function(U){var W=U._fullLayout||{};W._glcontainer!==void 0&&(W._glcontainer.selectAll(".gl-canvas").remove(),W._glcontainer.remove(),W._glcanvas=null),W._modeBar&&W._modeBar.destroy(),U._transitionData&&(U._transitionData._interruptCallbacks&&(U._transitionData._interruptCallbacks.length=0),U._transitionData._animationRaf&&window.cancelAnimationFrame(U._transitionData._animationRaf)),o.clearThrottle(),o.clearResponsive(U),delete U.data,delete U.layout,delete U._fullData,delete U._fullLayout,delete U.calcdata,delete U.empty,delete U.fid,delete U.undoqueue,delete U.undonum,delete U.autoplay,delete U.changed,delete U._promises,delete U._redrawTimer,delete U._hmlumcount,delete U._hmpixcount,delete U._transitionData,delete U._transitioning,delete U._initialAutoSize,delete U._transitioningWithDuration,delete U._dragging,delete U._dragged,delete U._dragdata,delete U._hoverdata,delete U._snapshotInProgress,delete U._editing,delete U._mouseDownTime,delete U._legendMouseDownTime,U.removeAllListeners&&U.removeAllListeners()},m.style=function(U){var W=U._fullLayout._visibleModules,j=[],F;for(F=0;F<W.length;F++){var P=W[F];P.style&&o.pushUnique(j,P.style)}for(F=0;F<j.length;F++)j[F](U)},m.sanitizeMargins=function(U){if(!(!U||!U.margin)){var W=U.width,j=U.height,F=U.margin,P=W-(F.l+F.r),q=j-(F.t+F.b),z;P<0&&(z=(W-1)/(F.l+F.r),F.l=Math.floor(z*F.l),F.r=Math.floor(z*F.r)),q<0&&(z=(j-1)/(F.t+F.b),F.t=Math.floor(z*F.t),F.b=Math.floor(z*F.b))}},m.clearAutoMarginIds=function(U){U._fullLayout._pushmarginIds={}},m.allowAutoMargin=function(U,W){U._fullLayout._pushmarginIds[W]=1};function K(U){var W=U.margin;if(!U._size){var j=U._size={l:Math.round(W.l),r:Math.round(W.r),t:Math.round(W.t),b:Math.round(W.b),p:Math.round(W.pad)};j.w=Math.round(U.width)-j.l-j.r,j.h=Math.round(U.height)-j.t-j.b}U._pushmargin||(U._pushmargin={}),U._pushmarginIds||(U._pushmarginIds={}),U._reservedMargin||(U._reservedMargin={})}var ee=2,ie=2;m.autoMargin=function(U,W,j){var F=U._fullLayout,P=F.width,q=F.height,z=F.margin,te=F.minreducedwidth,ue=F.minreducedheight,ve=o.constrain(P-z.l-z.r,ee,te),_e=o.constrain(q-z.t-z.b,ie,ue),Re=Math.max(0,P-ve),Le=Math.max(0,q-_e),Ve=F._pushmargin,Xe=F._pushmarginIds;if(z.autoexpand!==!1){if(!j)delete Ve[W],delete Xe[W];else{var Ze=j.pad;if(Ze===void 0&&(Ze=Math.min(12,z.l,z.r,z.t,z.b)),Re){var Te=(j.l+j.r)/Re;Te>1&&(j.l/=Te,j.r/=Te)}if(Le){var we=(j.t+j.b)/Le;we>1&&(j.t/=we,j.b/=we)}var be=j.xl!==void 0?j.xl:j.x,ke=j.xr!==void 0?j.xr:j.x,He=j.yt!==void 0?j.yt:j.y,Ke=j.yb!==void 0?j.yb:j.y;Ve[W]={l:{val:be,size:j.l+Ze},r:{val:ke,size:j.r+Ze},b:{val:Ke,size:j.b+Ze},t:{val:He,size:j.t+Ze}},Xe[W]=1}if(!F._replotting)return m.doAutoMargin(U)}};function re(U){if("_redrawFromAutoMarginCount"in U._fullLayout)return!1;var W=E.list(U,"",!0);for(var j in W)if(W[j].autoshift||W[j].shift)return!0;return!1}m.doAutoMargin=function(U){var W=U._fullLayout,j=W.width,F=W.height;W._size||(W._size={}),K(W);var P=W._size,q=W.margin,z={t:0,b:0,l:0,r:0},te=o.extendFlat({},P),ue=q.l,ve=q.r,_e=q.t,Re=q.b,Le=W._pushmargin,Ve=W._pushmarginIds,Xe=W.minreducedwidth,Ze=W.minreducedheight;if(q.autoexpand!==!1){for(var Te in Le)Ve[Te]||delete Le[Te];var we=U._fullLayout._reservedMargin;for(var be in we)for(var ke in we[be]){var He=we[be][ke];z[ke]=Math.max(z[ke],He)}Le.base={l:{val:0,size:ue},r:{val:1,size:ve},t:{val:1,size:_e},b:{val:0,size:Re}};for(var Ke in z){var st=0;for(var vt in Le)vt!=="base"&&l(Le[vt][Ke].size)&&(st=Le[vt][Ke].size>st?Le[vt][Ke].size:st);var pt=Math.max(0,q[Ke]-st);z[Ke]=Math.max(0,z[Ke]-pt)}for(var ft in Le){var lt=Le[ft].l||{},Mt=Le[ft].b||{},ot=lt.val,Ct=lt.size,kt=Mt.val,St=Mt.size,Et=j-z.r-z.l,Ue=F-z.t-z.b;for(var De in Le){if(l(Ct)&&Le[De].r){var Ie=Le[De].r.val,Fe=Le[De].r.size;if(Ie>ot){var We=(Ct*Ie+(Fe-Et)*ot)/(Ie-ot),de=(Fe*(1-ot)+(Ct-Et)*(1-Ie))/(Ie-ot);We+de>ue+ve&&(ue=We,ve=de)}}if(l(St)&&Le[De].t){var Me=Le[De].t.val,he=Le[De].t.size;if(Me>kt){var Ee=(St*Me+(he-Ue)*kt)/(Me-kt),Pe=(he*(1-kt)+(St-Ue)*(1-Me))/(Me-kt);Ee+Pe>Re+_e&&(Re=Ee,_e=Pe)}}}}}var Ne=o.constrain(j-q.l-q.r,ee,Xe),ht=o.constrain(F-q.t-q.b,ie,Ze),nt=Math.max(0,j-Ne),Ye=Math.max(0,F-ht);if(nt){var Be=(ue+ve)/nt;Be>1&&(ue/=Be,ve/=Be)}if(Ye){var ut=(Re+_e)/Ye;ut>1&&(Re/=ut,_e/=ut)}if(P.l=Math.round(ue)+z.l,P.r=Math.round(ve)+z.r,P.t=Math.round(_e)+z.t,P.b=Math.round(Re)+z.b,P.p=Math.round(q.pad),P.w=Math.round(j)-P.l-P.r,P.h=Math.round(F)-P.t-P.b,!W._replotting&&(m.didMarginChange(te,P)||re(U))){"_redrawFromAutoMarginCount"in W?W._redrawFromAutoMarginCount++:W._redrawFromAutoMarginCount=1;var Dt=3*(1+Object.keys(Ve).length);if(W._redrawFromAutoMarginCount<Dt)return v.call("_doPlot",U);W._size=te,o.warn("Too many auto-margin redraws.")}se(U)};function se(U){var W=E.list(U,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(j){for(var F=0;F<W.length;F++){var P=W[F][j];P&&P()}})}var ge=["l","r","t","b","p","w","h"];m.didMarginChange=function(U,W){for(var j=0;j<ge.length;j++){var F=ge[j],P=U[F],q=W[F];if(!l(P)||Math.abs(q-P)>1)return!0}return!1},m.graphJson=function(U,W,j,F,P,q){(P&&W&&!U._fullData||P&&!W&&!U._fullLayout)&&m.supplyDefaults(U);var z=P?U._fullData:U.data,te=P?U._fullLayout:U.layout,ue=(U._transitionData||{})._frames;function ve(Le,Ve){if(typeof Le=="function")return Ve?"_function_":null;if(o.isPlainObject(Le)){var Xe={},Ze;return Object.keys(Le).sort().forEach(function(ke){if(["_","["].indexOf(ke.charAt(0))===-1){if(typeof Le[ke]=="function"){Ve&&(Xe[ke]="_function");return}if(j==="keepdata"){if(ke.substr(ke.length-3)==="src")return}else if(j==="keepstream"){if(Ze=Le[ke+"src"],typeof Ze=="string"&&Ze.indexOf(":")>0&&!o.isPlainObject(Le.stream))return}else if(j!=="keepall"&&(Ze=Le[ke+"src"],typeof Ze=="string"&&Ze.indexOf(":")>0))return;Xe[ke]=ve(Le[ke],Ve)}}),Xe}var Te=Array.isArray(Le),we=o.isTypedArray(Le);if((Te||we)&&Le.dtype&&Le.shape){var be=Le.bdata;return ve({dtype:Le.dtype,shape:Le.shape,bdata:o.isArrayBuffer(be)?s.encode(be):be},Ve)}return Te?Le.map(function(ke){return ve(ke,Ve)}):we?o.simpleMap(Le,o.identity):o.isJSDate(Le)?o.ms2DateTimeLocal(+Le):Le}var _e={data:(z||[]).map(function(Le){var Ve=ve(Le);return W&&delete Ve.fit,Ve})};if(!W&&(_e.layout=ve(te),P)){var Re=te._size;_e.layout.computed={margin:{b:Re.b,l:Re.l,r:Re.r,t:Re.t}}}return ue&&(_e.frames=ve(ue)),q&&(_e.config=ve(U._context,!0)),F==="object"?_e:JSON.stringify(_e)},m.modifyFrames=function(U,W){var j,F,P,q=U._transitionData._frames,z=U._transitionData._frameHash;for(j=0;j<W.length;j++)switch(F=W[j],F.type){case"replace":P=F.value;var te=(q[F.index]||{}).name,ue=P.name;q[F.index]=z[ue]=P,ue!==te&&(delete z[te],z[ue]=P);break;case"insert":P=F.value,z[P.name]=P,q.splice(F.index,0,P);break;case"delete":P=q[F.index],delete z[P.name],q.splice(F.index,1);break}return Promise.resolve()},m.computeFrame=function(U,W){var j=U._transitionData._frameHash,F,P,q,z;if(!W)throw new Error("computeFrame must be given a string frame name");var te=j[W.toString()];if(!te)return!1;for(var ue=[te],ve=[te.name];te.baseframe&&(te=j[te.baseframe.toString()])&&ve.indexOf(te.name)===-1;)ue.push(te),ve.push(te.name);for(var _e={};te=ue.pop();)if(te.layout&&(_e.layout=m.extendLayout(_e.layout,te.layout)),te.data){if(_e.data||(_e.data=[]),P=te.traces,!P)for(P=[],F=0;F<te.data.length;F++)P[F]=F;for(_e.traces||(_e.traces=[]),F=0;F<te.data.length;F++)q=P[F],q!=null&&(z=_e.traces.indexOf(q),z===-1&&(z=_e.data.length,_e.traces[z]=q),_e.data[z]=m.extendTrace(_e.data[z],te.data[F]))}return _e},m.recomputeFrameHash=function(U){for(var W=U._transitionData._frameHash={},j=U._transitionData._frames,F=0;F<j.length;F++){var P=j[F];P&&P.name&&(W[P.name]=P)}},m.extendObjectWithContainers=function(U,W,j){var F,P,q,z,te,ue,ve,_e,Re=o.extendDeepNoArrays({},W||{}),Le=o.expandObjectPaths(Re),Ve={};if(j&&j.length)for(q=0;q<j.length;q++)F=o.nestedProperty(Le,j[q]),P=F.get(),P===void 0?o.nestedProperty(Ve,j[q]).set(null):(F.set(null),o.nestedProperty(Ve,j[q]).set(P));if(U=o.extendDeepNoArrays(U||{},Le),j&&j.length){for(q=0;q<j.length;q++)if(te=o.nestedProperty(Ve,j[q]),ve=te.get(),!!ve){for(ue=o.nestedProperty(U,j[q]),_e=ue.get(),Array.isArray(_e)||(_e=[],ue.set(_e)),z=0;z<ve.length;z++){var Xe=ve[z];Xe===null?_e[z]=null:_e[z]=m.extendObjectWithContainers(_e[z],Xe)}ue.set(_e)}}return U},m.dataArrayContainers=["transforms","dimensions"],m.layoutArrayContainers=v.layoutArrayContainers,m.extendTrace=function(U,W){return m.extendObjectWithContainers(U,W,m.dataArrayContainers)},m.extendLayout=function(U,W){return m.extendObjectWithContainers(U,W,m.layoutArrayContainers)},m.transition=function(U,W,j,F,P,q){var z={redraw:P.redraw},te={},ue=[];return z.prepareFn=function(){for(var ve=Array.isArray(W)?W.length:0,_e=F.slice(0,ve),Re=0;Re<_e.length;Re++){var Le=_e[Re],Ve=U._fullData[Le],Xe=Ve._module;if(Xe){if(Xe.animatable){var Ze=Xe.basePlotModule.name;te[Ze]||(te[Ze]=[]),te[Ze].push(Le)}U.data[_e[Re]]=m.extendTrace(U.data[_e[Re]],W[Re])}}var Te=o.expandObjectPaths(o.extendDeepNoArrays({},j)),we=/^[xy]axis[0-9]*$/;for(var be in Te)we.test(be)&&delete Te[be].range;m.extendLayout(U.layout,Te),delete U.calcdata,m.supplyDefaults(U),m.doCalcdata(U);var ke=o.expandObjectPaths(j);if(ke){var He=U._fullLayout._plots;for(var Ke in He){var st=He[Ke],vt=st.xaxis,pt=st.yaxis,ft=vt.range.slice(),lt=pt.range.slice(),Mt=null,ot=null,Ct=null,kt=null;Array.isArray(ke[vt._name+".range"])?Mt=ke[vt._name+".range"].slice():Array.isArray((ke[vt._name]||{}).range)&&(Mt=ke[vt._name].range.slice()),Array.isArray(ke[pt._name+".range"])?ot=ke[pt._name+".range"].slice():Array.isArray((ke[pt._name]||{}).range)&&(ot=ke[pt._name].range.slice()),ft&&Mt&&(vt.r2l(ft[0])!==vt.r2l(Mt[0])||vt.r2l(ft[1])!==vt.r2l(Mt[1]))&&(Ct={xr0:ft,xr1:Mt}),lt&&ot&&(pt.r2l(lt[0])!==pt.r2l(ot[0])||pt.r2l(lt[1])!==pt.r2l(ot[1]))&&(kt={yr0:lt,yr1:ot}),(Ct||kt)&&ue.push(o.extendFlat({plotinfo:st},Ct,kt))}}return Promise.resolve()},z.runFn=function(ve){var _e,Re=U._fullLayout._basePlotModules,Le=ue.length,Ve;if(j)for(Ve=0;Ve<Re.length;Ve++)Re[Ve].transitionAxes&&Re[Ve].transitionAxes(U,ue,q,ve);Le?(_e=o.extendFlat({},q),_e.duration=0,delete te.cartesian):_e=q;for(var Xe in te){var Ze=te[Xe],Te=U._fullData[Ze[0]]._module;Te.basePlotModule.plot(U,Ze,_e,ve)}},xe(U,q,z)},m.transitionFromReact=function(U,W,j,F){var P=U._fullLayout,q=P.transition,z={},te=[];return z.prepareFn=function(){var ue=P._plots;z.redraw=!1,W.anim==="some"&&(z.redraw=!0),j.anim==="some"&&(z.redraw=!0);for(var ve in ue){var _e=ue[ve],Re=_e.xaxis,Le=_e.yaxis,Ve=F[Re._name].range.slice(),Xe=F[Le._name].range.slice(),Ze=Re.range.slice(),Te=Le.range.slice();Re.setScale(),Le.setScale();var we=null,be=null;(Re.r2l(Ve[0])!==Re.r2l(Ze[0])||Re.r2l(Ve[1])!==Re.r2l(Ze[1]))&&(we={xr0:Ve,xr1:Ze}),(Le.r2l(Xe[0])!==Le.r2l(Te[0])||Le.r2l(Xe[1])!==Le.r2l(Te[1]))&&(be={yr0:Xe,yr1:Te}),(we||be)&&te.push(o.extendFlat({plotinfo:_e},we,be))}return Promise.resolve()},z.runFn=function(ue){for(var ve=U._fullData,_e=U._fullLayout,Re=_e._basePlotModules,Le,Ve,Xe,Ze=[],Te=0;Te<ve.length;Te++)Ze.push(Te);function we(){if(U._fullLayout)for(var ke=0;ke<Re.length;ke++)Re[ke].transitionAxes&&Re[ke].transitionAxes(U,te,Le,ue)}function be(){if(U._fullLayout)for(var ke=0;ke<Re.length;ke++)Re[ke].plot(U,Xe,Ve,ue)}te.length&&W.anim?q.ordering==="traces first"?(Le=o.extendFlat({},q,{duration:0}),Xe=Ze,Ve=q,setTimeout(we,q.duration),be()):(Le=q,Xe=null,Ve=o.extendFlat({},q,{duration:0}),setTimeout(be,Le.duration),we()):te.length?(Le=q,we()):W.anim&&(Xe=Ze,Ve=q,be())},xe(U,q,z)};function xe(U,W,j){var F=!1;function P(Re){var Le=Promise.resolve();if(!Re)return Le;for(;Re.length;)Le=Le.then(Re.shift());return Le}function q(Re){if(Re)for(;Re.length;)Re.shift()}function z(){return U.emit("plotly_transitioning",[]),new Promise(function(Re){U._transitioning=!0,W.duration>0&&(U._transitioningWithDuration=!0),U._transitionData._interruptCallbacks.push(function(){F=!0}),j.redraw&&U._transitionData._interruptCallbacks.push(function(){return v.call("redraw",U)}),U._transitionData._interruptCallbacks.push(function(){U.emit("plotly_transitioninterrupted",[])});var Le=0,Ve=0;function Xe(){return Le++,function(){Ve++,!F&&Ve===Le&&te(Re)}}j.runFn(Xe),setTimeout(Xe())})}function te(Re){if(U._transitionData)return q(U._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(j.redraw)return v.call("redraw",U)}).then(function(){U._transitioning=!1,U._transitioningWithDuration=!1,U.emit("plotly_transitioned",[])}).then(Re)}function ue(){if(U._transitionData)return U._transitioning=!1,P(U._transitionData._interruptCallbacks)}var ve=[m.previousPromises,ue,j.prepareFn,m.rehover,m.reselect,z],_e=o.syncOrAsync(ve,U);return(!_e||!_e.then)&&(_e=Promise.resolve()),_e.then(function(){return U})}m.doCalcdata=function(U,W){var j=E.list(U),F=U._fullData,P=U._fullLayout,q,z,te,ue,ve=new Array(F.length),_e=(U.calcdata||[]).slice();for(U.calcdata=ve,P._numBoxes=0,P._numViolins=0,P._violinScaleGroupStats={},U._hmpixcount=0,U._hmlumcount=0,P._piecolormap={},P._sunburstcolormap={},P._treemapcolormap={},P._iciclecolormap={},P._funnelareacolormap={},te=0;te<F.length;te++)if(Array.isArray(W)&&W.indexOf(te)===-1){ve[te]=_e[te];continue}for(te=0;te<F.length;te++)q=F[te],q._arrayAttrs=d.findArrayAttributes(q),q._extremes={};var Re=P._subplots.polar||[];for(te=0;te<Re.length;te++)j.push(P[Re[te]].radialaxis,P[Re[te]].angularaxis);for(var Le in P._colorAxes){var Ve=P[Le];Ve.cauto!==!1&&(delete Ve.cmin,delete Ve.cmax)}var Xe=!1;function Ze(be){if(q=F[be],z=q._module,q.visible===!0&&q.transforms){if(z&&z.calc){var ke=z.calc(U,q);ke[0]&&ke[0].t&&ke[0].t._scene&&delete ke[0].t._scene.dirty}for(ue=0;ue<q.transforms.length;ue++){var He=q.transforms[ue];z=L[He.type],z&&z.calcTransform&&(q._hasCalcTransform=!0,Xe=!0,z.calcTransform(U,q,He))}}}function Te(be,ke){if(q=F[be],z=q._module,!!z.isContainer===ke){var He=[];if(q.visible===!0&&q._length!==0){delete q._indexToPoints;var Ke=q.transforms||[];for(ue=Ke.length-1;ue>=0;ue--)if(Ke[ue].enabled){q._indexToPoints=Ke[ue]._indexToPoints;break}z&&z.calc&&(He=z.calc(U,q))}(!Array.isArray(He)||!He[0])&&(He=[{x:_,y:_}]),He[0].t||(He[0].t={}),He[0].trace=q,ve[be]=He}}for(pe(j,F,P),te=0;te<F.length;te++)Te(te,!0);for(te=0;te<F.length;te++)Ze(te);for(Xe&&pe(j,F,P),te=0;te<F.length;te++)Te(te,!0);for(te=0;te<F.length;te++)Te(te,!1);ye(U);var we=ce(j,U);if(we.length){for(P._numBoxes=0,P._numViolins=0,te=0;te<we.length;te++)Te(we[te],!0);for(te=0;te<we.length;te++)Te(we[te],!1);ye(U)}v.getComponentMethod("fx","calc")(U),v.getComponentMethod("errorbars","calc")(U)};var Se=/(total|sum|min|max|mean|median) (ascending|descending)/;function ce(U,W){var j=[],F,P,q,z,te;function ue(De,Ie,Fe){var We=Ie._id.charAt(0);if(De==="histogram2dcontour"){var de=Ie._counterAxes[0],Me=E.getFromId(W,de),he=We==="x"||de==="x"&&Me.type==="category",Ee=We==="y"||de==="y"&&Me.type==="category";return function(Pe,Ne){return Pe===0||Ne===0||he&&Pe===Fe[Ne].length-1||Ee&&Ne===Fe.length-1?-1:(We==="y"?Ne:Pe)-1}}else return function(Pe,Ne){return We==="y"?Ne:Pe}}var ve={min:function(De){return o.aggNums(Math.min,null,De)},max:function(De){return o.aggNums(Math.max,null,De)},sum:function(De){return o.aggNums(function(Ie,Fe){return Ie+Fe},null,De)},total:function(De){return o.aggNums(function(Ie,Fe){return Ie+Fe},null,De)},mean:function(De){return o.mean(De)},median:function(De){return o.median(De)}};function _e(De,Ie){return De[1]-Ie[1]}function Re(De,Ie){return Ie[1]-De[1]}for(F=0;F<U.length;F++){var Le=U[F];if(Le.type==="category"){var Ve=Le.categoryorder.match(Se);if(Ve){var Xe=Ve[1],Ze=Ve[2],Te=Le._id.charAt(0),we=Te==="x",be=[];for(P=0;P<Le._categories.length;P++)be.push([Le._categories[P],[]]);for(P=0;P<Le._traceIndices.length;P++){var ke=Le._traceIndices[P],He=W._fullData[ke];if(He.visible===!0){var Ke=He.type;v.traceIs(He,"histogram")&&(delete He._xautoBinFinished,delete He._yautoBinFinished);var st=Ke==="splom",vt=Ke==="scattergl",pt=W.calcdata[ke];for(q=0;q<pt.length;q++){var ft=pt[q],lt,Mt;if(st){var ot=He._axesDim[Le._id];if(!we){var Ct=He._diag[ot][0];Ct&&(Le=W._fullLayout[E.id2name(Ct)])}var kt=ft.trace.dimensions[ot].values;for(z=0;z<kt.length;z++)for(lt=Le._categoriesMap[kt[z]],te=0;te<ft.trace.dimensions.length;te++)if(te!==ot){var St=ft.trace.dimensions[te];be[lt][1].push(St.values[z])}}else if(vt){for(z=0;z<ft.t.x.length;z++)we?(lt=ft.t.x[z],Mt=ft.t.y[z]):(lt=ft.t.y[z],Mt=ft.t.x[z]),be[lt][1].push(Mt);ft.t&&ft.t._scene&&delete ft.t._scene.dirty}else if(ft.hasOwnProperty("z")){Mt=ft.z;var Et=ue(He.type,Le,Mt);for(z=0;z<Mt.length;z++)for(te=0;te<Mt[z].length;te++)lt=Et(te,z),lt+1&&be[lt][1].push(Mt[z][te])}else for(lt=ft.p,lt===void 0&&(lt=ft[Te]),Mt=ft.s,Mt===void 0&&(Mt=ft.v),Mt===void 0&&(Mt=we?ft.y:ft.x),Array.isArray(Mt)||(Mt===void 0?Mt=[]:Mt=[Mt]),z=0;z<Mt.length;z++)be[lt][1].push(Mt[z])}}}Le._categoriesValue=be;var Ue=[];for(P=0;P<be.length;P++)Ue.push([be[P][0],ve[Xe](be[P][1])]);Ue.sort(Ze==="descending"?Re:_e),Le._categoriesAggregatedValue=Ue,Le._initialCategories=Ue.map(function(De){return De[0]}),j=j.concat(Le.sortByInitialCategories())}}}return j}function pe(U,W,j){var F={};function P(ue){ue.clearCalc(),ue.type==="multicategory"&&ue.setupMultiCategory(W),F[ue._id]=1}o.simpleMap(U,P);for(var q=j._axisMatchGroups||[],z=0;z<q.length;z++)for(var te in q[z])F[te]||P(j[E.id2name(te)])}function ye(U){var W=U._fullLayout,j=W._visibleModules,F={},P,q,z;for(q=0;q<j.length;q++){var te=j[q],ue=te.crossTraceCalc;if(ue){var ve=te.basePlotModule.name;F[ve]?o.pushUnique(F[ve],ue):F[ve]=[ue]}}for(z in F){var _e=F[z],Re=W._subplots[z];if(Array.isArray(Re))for(P=0;P<Re.length;P++){var Le=Re[P],Ve=z==="cartesian"?W._plots[Le]:W[Le];for(q=0;q<_e.length;q++)_e[q](U,Ve,Le)}else for(q=0;q<_e.length;q++)_e[q](U)}}m.rehover=function(U){U._fullLayout._rehover&&U._fullLayout._rehover()},m.redrag=function(U){U._fullLayout._redrag&&U._fullLayout._redrag()},m.reselect=function(U){var W=U._fullLayout,j=(U.layout||{}).selections,F=W._previousSelections;W._previousSelections=j;var P=W._reselect||JSON.stringify(j)!==JSON.stringify(F);v.getComponentMethod("selections","reselect")(U,P)},m.generalUpdatePerTraceModule=function(U,W,j,F){var P=W.traceHash,q={},z;for(z=0;z<j.length;z++){var te=j[z],ue=te[0].trace;ue.visible&&(q[ue.type]=q[ue.type]||[],q[ue.type].push(te))}for(var ve in P)if(!q[ve]){var _e=P[ve][0],Re=_e[0].trace;Re.visible=!1,q[ve]=[_e]}for(var Le in q){var Ve=q[Le],Xe=Ve[0][0].trace._module;Xe.plot(U,W,o.filterVisible(Ve),F)}W.traceHash=q},m.plotBasePlot=function(U,W,j,F,P){var q=v.getModule(U),z=R(W.calcdata,q)[0];q.plot(W,z,F,P)},m.cleanBasePlot=function(U,W,j,F,P){var q=P._has&&P._has(U),z=j._has&&j._has(U);q&&!z&&P["_"+U+"layer"].selectAll("g.trace").remove()}},1776:function(f,u,r){var i=r(6880);i.FORMAT_LINK,i.DATE_FORMAT_LINK;function c(a){var l=a.description?" "+a.description:"",s=a.keys||[];if(s.length>0){for(var v=[],d=0;d<s.length;d++)v[d]="`"+s[d]+"`";l=l+"Finally, the template string has access to ",s.length===1?l=l+"variable "+v[0]:l=l+"variables "+v.slice(0,-1).join(", ")+" and "+v.slice(-1)+"."}return l}u.Ks=function(a,l){a=a||{},l=l||{},c(l);var s={valType:"string",dflt:"",editType:a.editType||"none"};return a.arrayOk!==!1&&(s.arrayOk=!0),s},u.Gw=function(a,l){a=a||{},l=l||{},c(l);var s={valType:"string",dflt:"",editType:a.editType||"calc"};return a.arrayOk!==!1&&(s.arrayOk=!0),s},u.ye=function(a,l){a=a||{},l=l||{},a.newshape,c(l);var s={valType:"string",dflt:"",editType:a.editType||"arraydraw"};return s}},4040:function(f,u,r){var i=r(4248),c=r(6628),a=r(2416),l=r(3620),s=r(2200).addStyleRule,v=r(2880),d=r(5464),p=r(4859),o=v.extendFlat,y=v.extendDeepAll;u.modules={},u.allCategories={},u.allTypes=[],u.subplotsRegistry={},u.transformsRegistry={},u.componentsRegistry={},u.layoutArrayContainers=[],u.layoutArrayRegexes=[],u.traceLayoutAttributes={},u.localeRegistry={},u.apiMethodRegistry={},u.collectableSubplotTypes=null,u.register=function(D){if(u.collectableSubplotTypes=null,D)D&&!Array.isArray(D)&&(D=[D]);else throw new Error("No argument passed to Plotly.register.");for(var O=0;O<D.length;O++){var N=D[O];if(!N)throw new Error("Invalid module was attempted to be registered!");switch(N.moduleType){case"trace":_(N);break;case"transform":b(N);break;case"component":M(N);break;case"locale":w(N);break;case"apiMethod":var V=N.name;u.apiMethodRegistry[V]=N.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},u.getModule=function(L){var D=u.modules[m(L)];return D?D._module:!1},u.traceIs=function(L,D){if(L=m(L),L==="various")return!1;var O=u.modules[L];return O||(L&&i.log("Unrecognized trace type "+L+"."),O=u.modules[d.type.dflt]),!!O.categories[D]},u.getTransformIndices=function(L,D){for(var O=[],N=L.transforms||[],V=0;V<N.length;V++)N[V].type===D&&O.push(V);return O},u.hasTransform=function(L,D){for(var O=L.transforms||[],N=0;N<O.length;N++)if(O[N].type===D)return!0;return!1},u.getComponentMethod=function(L,D){var O=u.componentsRegistry[L];return O&&O[D]||c},u.call=function(){var L=arguments[0],D=[].slice.call(arguments,1);return u.apiMethodRegistry[L].apply(null,D)};function _(L){var D=L.name,O=L.categories,N=L.meta;if(u.modules[D]){i.log("Type "+D+" already registered");return}u.subplotsRegistry[L.basePlotModule.name]||E(L.basePlotModule);for(var V={},X=0;X<O.length;X++)V[O[X]]=!0,u.allCategories[O[X]]=!0;u.modules[D]={_module:L,categories:V},N&&Object.keys(N).length&&(u.modules[D].meta=N),u.allTypes.push(D);for(var k in u.componentsRegistry)R(k,D);L.layoutAttributes&&o(u.traceLayoutAttributes,L.layoutAttributes);var Z=L.basePlotModule,B=Z.name;if(B==="mapbox"){var J=Z.constants.styleRules;for(var ne in J)s(".js-plotly-plot .plotly .mapboxgl-"+ne,J[ne])}(B==="geo"||B==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function E(L){var D=L.name;if(u.subplotsRegistry[D]){i.log("Plot type "+D+" already registered.");return}A(L),u.subplotsRegistry[D]=L;for(var O in u.componentsRegistry)C(O,L.name)}function M(L){if(typeof L.name!="string")throw new Error("Component module *name* must be a string.");var D=L.name;u.componentsRegistry[D]=L,L.layoutAttributes&&(L.layoutAttributes._isLinkedToArray&&a(u.layoutArrayContainers,D),A(L));for(var O in u.modules)R(D,O);for(var N in u.subplotsRegistry)C(D,N);for(var V in u.transformsRegistry)T(D,V);L.schema&&L.schema.layout&&y(p,L.schema.layout)}function b(L){if(typeof L.name!="string")throw new Error("Transform module *name* must be a string.");var D="Transform module "+L.name,O=typeof L.transform=="function",N=typeof L.calcTransform=="function";if(!O&&!N)throw new Error(D+" is missing a *transform* or *calcTransform* method.");O&&N&&i.log([D+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),l(L.attributes)||i.log(D+" registered without an *attributes* object."),typeof L.supplyDefaults!="function"&&i.log(D+" registered without a *supplyDefaults* method."),u.transformsRegistry[L.name]=L;for(var V in u.componentsRegistry)T(V,L.name)}function w(L){var D=L.name,O=D.split("-")[0],N=L.dictionary,V=L.format,X=N&&Object.keys(N).length,k=V&&Object.keys(V).length,Z=u.localeRegistry,B=Z[D];if(B||(Z[D]=B={}),O!==D){var J=Z[O];J||(Z[O]=J={}),X&&J.dictionary===B.dictionary&&(J.dictionary=N),k&&J.format===B.format&&(J.format=V)}X&&(B.dictionary=N),k&&(B.format=V)}function A(L){if(L.layoutAttributes){var D=L.layoutAttributes._arrayAttrRegexps;if(D)for(var O=0;O<D.length;O++)a(u.layoutArrayRegexes,D[O])}}function R(L,D){var O=u.componentsRegistry[L].schema;if(!(!O||!O.traces)){var N=O.traces[D];N&&y(u.modules[D]._module.attributes,N)}}function T(L,D){var O=u.componentsRegistry[L].schema;if(!(!O||!O.transforms)){var N=O.transforms[D];N&&y(u.transformsRegistry[D].attributes,N)}}function C(L,D){var O=u.componentsRegistry[L].schema;if(!(!O||!O.subplots)){var N=u.subplotsRegistry[D],V=N.layoutAttributes,X=N.attr==="subplot"?N.name:N.attr;Array.isArray(X)&&(X=X[0]);var k=O.subplots[X];V&&k&&y(V,k)}}function m(L){return typeof L=="object"&&(L=L.type),L}},1536:function(f,u,r){var i=r(4040),c=r(3400),a=c.extendFlat,l=c.extendDeep;function s(d){var p;switch(d){case"themes__thumb":p={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":p={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:p={}}return p}function v(d){var p=["xaxis","yaxis","zaxis"];return p.indexOf(d.slice(0,5))>-1}f.exports=function(p,o){var y,_=p.data,E=p.layout,M=l([],_),b=l({},E,s(o.tileClass)),w=p._context||{};if(o.width&&(b.width=o.width),o.height&&(b.height=o.height),o.tileClass==="thumbnail"||o.tileClass==="themes__thumb"){b.annotations=[];var A=Object.keys(b);for(y=0;y<A.length;y++)v(A[y])&&(b[A[y]].title={text:""});for(y=0;y<M.length;y++){var R=M[y];R.showscale=!1,R.marker&&(R.marker.showscale=!1),i.traceIs(R,"pie-like")&&(R.textposition="none")}}if(Array.isArray(o.annotations))for(y=0;y<o.annotations.length;y++)b.annotations.push(o.annotations[y]);var T=Object.keys(b).filter(function(O){return O.match(/^scene\d*$/)});if(T.length){var C={};for(o.tileClass==="thumbnail"&&(C={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),y=0;y<T.length;y++){var m=b[T[y]];m.xaxis||(m.xaxis={}),m.yaxis||(m.yaxis={}),m.zaxis||(m.zaxis={}),a(m.xaxis,C),a(m.yaxis,C),a(m.zaxis,C),m._scene=null}}var L=document.createElement("div");o.tileClass&&(L.className=o.tileClass);var D={gd:L,td:L,layout:b,data:M,config:{staticPlot:o.staticPlot===void 0?!0:o.staticPlot,plotGlPixelRatio:o.plotGlPixelRatio===void 0?2:o.plotGlPixelRatio,displaylogo:o.displaylogo||!1,showLink:o.showLink||!1,showTips:o.showTips||!1,mapboxAccessToken:w.mapboxAccessToken}};return o.setBackground!=="transparent"&&(D.config.setBackground=o.setBackground||"opaque"),D.gd.defaultLayout=s(o.tileClass),D}},7412:function(f,u,r){var i=r(3400),c=r(7024),a=r(8616),l=r(7030);function s(v,d){var p;return i.isPlainObject(v)||(p=i.getGraphDiv(v)),d=d||{},d.format=d.format||"png",d.width=d.width||null,d.height=d.height||null,d.imageDataOnly=!0,new Promise(function(o,y){p&&p._snapshotInProgress&&y(new Error("Snapshotting already in progress.")),i.isIE()&&d.format!=="svg"&&y(new Error(l.MSG_IE_BAD_FORMAT)),p&&(p._snapshotInProgress=!0);var _=c(v,d),E=d.filename||v.fn||"newplot";E+="."+d.format.replace("-","."),_.then(function(M){return p&&(p._snapshotInProgress=!1),a(M,E,d.format)}).then(function(M){o(M)}).catch(function(M){p&&(p._snapshotInProgress=!1),y(M)})})}f.exports=s},8616:function(f,u,r){var i=r(3400),c=r(7030);function a(l,s,v){var d=document.createElement("a"),p="download"in d,o=new Promise(function(y,_){var E,M;if(i.isIE())return E=c.createBlob(l,"svg"),window.navigator.msSaveBlob(E,s),E=null,y(s);if(p)return E=c.createBlob(l,v),M=c.createObjectURL(E),d.href=M,d.download=s,document.body.appendChild(d),d.click(),document.body.removeChild(d),c.revokeObjectURL(M),E=null,y(s);if(i.isSafari()){var b=v==="svg"?",":";base64,";return c.octetStream(b+encodeURIComponent(l)),y(s)}_(new Error("download error"))});return o}f.exports=a},7030:function(f,u,r){var i=r(4040);u.getDelay=function(l){return l._has&&(l._has("gl3d")||l._has("gl2d")||l._has("mapbox"))?500:0},u.getRedrawFunc=function(l){return function(){i.getComponentMethod("colorbar","draw")(l)}},u.encodeSVG=function(l){return"data:image/svg+xml,"+encodeURIComponent(l)},u.encodeJSON=function(l){return"data:application/json,"+encodeURIComponent(l)};var c=window.URL||window.webkitURL;u.createObjectURL=function(l){return c.createObjectURL(l)},u.revokeObjectURL=function(l){return c.revokeObjectURL(l)},u.createBlob=function(l,s){if(s==="svg")return new window.Blob([l],{type:"image/svg+xml;charset=utf-8"});if(s==="full-json")return new window.Blob([l],{type:"application/json;charset=utf-8"});var v=a(window.atob(l));return new window.Blob([v],{type:"image/"+s})},u.octetStream=function(l){document.location.href="data:application/octet-stream"+l};function a(l){for(var s=l.length,v=new ArrayBuffer(s),d=new Uint8Array(v),p=0;p<s;p++)d[p]=l.charCodeAt(p);return v}u.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,u.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},8904:function(f,u,r){var i=r(7030),c={getDelay:i.getDelay,getRedrawFunc:i.getRedrawFunc,clone:r(1536),toSVG:r(7164),svgToImg:r(3268),toImage:r(1808),downloadImage:r(7412)};f.exports=c},3268:function(f,u,r){var i=r(3400),c=r(1252).EventEmitter,a=r(7030);function l(s){var v=s.emitter||new c,d=new Promise(function(p,o){var y=window.Image,_=s.svg,E=s.format||"png";if(i.isIE()&&E!=="svg"){var M=new Error(a.MSG_IE_BAD_FORMAT);return o(M),s.promise?d:v.emit("error",M)}var b=s.canvas,w=s.scale||1,A=s.width||300,R=s.height||150,T=w*A,C=w*R,m=b.getContext("2d",{willReadFrequently:!0}),L=new y,D,O;E==="svg"||i.isSafari()?O=a.encodeSVG(_):(D=a.createBlob(_,"svg"),O=a.createObjectURL(D)),b.width=T,b.height=C,L.onload=function(){var N;switch(D=null,a.revokeObjectURL(O),E!=="svg"&&m.drawImage(L,0,0,T,C),E){case"jpeg":N=b.toDataURL("image/jpeg");break;case"png":N=b.toDataURL("image/png");break;case"webp":N=b.toDataURL("image/webp");break;case"svg":N=O;break;default:var V="Image format is not jpeg, png, svg or webp.";if(o(new Error(V)),!s.promise)return v.emit("error",V)}p(N),s.promise||v.emit("success",N)},L.onerror=function(N){if(D=null,a.revokeObjectURL(O),o(N),!s.promise)return v.emit("error",N)},L.src=O});return s.promise?d:v}f.exports=l},1808:function(f,u,r){var i=r(1252).EventEmitter,c=r(4040),a=r(3400),l=r(7030),s=r(1536),v=r(7164),d=r(3268);function p(o,y){var _=new i,E=s(o,{format:"png"}),M=E.gd;M.style.position="absolute",M.style.left="-5000px",document.body.appendChild(M);function b(){var A=l.getDelay(M._fullLayout);setTimeout(function(){var R=v(M),T=document.createElement("canvas");T.id=a.randstr(),_=d({format:y.format,width:M._fullLayout.width,height:M._fullLayout.height,canvas:T,emitter:_,svg:R}),_.clean=function(){M&&document.body.removeChild(M)}},A)}var w=l.getRedrawFunc(M);return c.call("_doPlot",M,E.data,E.layout,E.config).then(w).then(b).catch(function(A){_.emit("error",A)}),_}f.exports=p},7164:function(f,u,r){var i=r(3428),c=r(3400),a=r(3616),l=r(6308),s=r(9616),v=/"/g,d="TOBESTRIPPED",p=new RegExp('("'+d+")|("+d+'")',"g");function o(_){var E=i.select("body").append("div").style({display:"none"}).html(""),M=_.replace(/(&[^;]*;)/gi,function(b){return b==="&lt;"?"&#60;":b==="&rt;"?"&#62;":b.indexOf("<")!==-1||b.indexOf(">")!==-1?"":E.html(b).text()});return E.remove(),M}function y(_){return _.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}f.exports=function(E,M,b){var w=E._fullLayout,A=w._paper,R=w._toppaper,T=w.width,C=w.height,m;A.insert("rect",":first-child").call(a.setRect,0,0,T,C).call(l.fill,w.paper_bgcolor);var L=w._basePlotModules||[];for(m=0;m<L.length;m++){var D=L[m];D.toSVG&&D.toSVG(E)}if(R){var O=R.node().childNodes,N=Array.prototype.slice.call(O);for(m=0;m<N.length;m++){var V=N[m];V.childNodes.length&&A.node().appendChild(V)}}w._draggers&&w._draggers.remove(),A.node().style.background="",A.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var k=i.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){k.remove();return}else k.style({visibility:null,display:null});var Z=this.style.fontFamily;Z&&Z.indexOf('"')!==-1&&k.style("font-family",Z.replace(v,d));var B=this.style.fontWeight;B&&(B==="normal"||B==="400")&&k.style("font-weight",void 0);var J=this.style.fontStyle;J&&J==="normal"&&k.style("font-style",void 0);var ne=this.style.fontVariant;ne&&ne==="normal"&&k.style("font-variant",void 0)}),A.selectAll(".gradient_filled,.pattern_filled").each(function(){var k=i.select(this),Z=this.style.fill;Z&&Z.indexOf("url(")!==-1&&k.style("fill",Z.replace(v,d));var B=this.style.stroke;B&&B.indexOf("url(")!==-1&&k.style("stroke",B.replace(v,d))}),(M==="pdf"||M==="eps")&&A.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),A.node().setAttributeNS(s.xmlns,"xmlns",s.svg),A.node().setAttributeNS(s.xmlns,"xmlns:xlink",s.xlink),M==="svg"&&b&&(A.attr("width",b*T),A.attr("height",b*C),A.attr("viewBox","0 0 "+T+" "+C));var X=new window.XMLSerializer().serializeToString(A.node());return X=o(X),X=y(X),X=X.replace(p,"'"),c.isIE()&&(X=X.replace(/"/gi,"'"),X=X.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),X=X.replace(/(\\')/gi,'"')),X}},4664:function(f,u,r){var i=r(3400);f.exports=function(a,l){for(var s=0;s<a.length;s++)a[s].i=s;i.mergeArray(l.text,a,"tx"),i.mergeArray(l.hovertext,a,"htx");var v=l.marker;if(v){i.mergeArray(v.opacity,a,"mo",!0),i.mergeArray(v.color,a,"mc");var d=v.line;d&&(i.mergeArray(d.color,a,"mlc"),i.mergeArrayCastPositive(d.width,a,"mlw"))}}},832:function(f,u,r){var i=r(2904),c=r(9736).axisHoverFormat,a=r(1776).Ks,l=r(1776).Gw,s=r(9084),v=r(5376),d=r(8048),p=r(8192).c,o=r(2880).extendFlat,y=v({editType:"calc",arrayOk:!0,colorEditType:"style"}),_=i.marker,E=_.line,M=o({},E.width,{dflt:0}),b=o({width:M,editType:"calc"},s("marker.line")),w=o({line:b,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:p,cornerradius:{valType:"any",editType:"calc"}});f.exports={x:i.x,x0:i.x0,dx:i.dx,y:i.y,y0:i.y0,dy:i.dy,xperiod:i.xperiod,yperiod:i.yperiod,xperiod0:i.xperiod0,yperiod0:i.yperiod0,xperiodalignment:i.xperiodalignment,yperiodalignment:i.yperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),text:i.text,texttemplate:l({editType:"plot"},{keys:d.eventDataKeys}),hovertext:i.hovertext,hovertemplate:a({},{keys:d.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:o({},y,{}),insidetextfont:o({},y,{}),outsidetextfont:o({},y,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:o({},i.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:w,offsetgroup:i.offsetgroup,alignmentgroup:i.alignmentgroup,selected:{marker:{opacity:i.selected.marker.opacity,color:i.selected.marker.color,editType:"style"},textfont:i.selected.textfont,editType:"style"},unselected:{marker:{opacity:i.unselected.marker.opacity,color:i.unselected.marker.color,editType:"style"},textfont:i.unselected.textfont,editType:"style"},zorder:i.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},9439:function(f,u,r){var i=r(4460),c=r(1220),a=r(4288).hasColorscale,l=r(7128),s=r(4664),v=r(4500);f.exports=function(p,o){var y=i.getFromId(p,o.xaxis||"x"),_=i.getFromId(p,o.yaxis||"y"),E,M,b,w,A,R,T={msUTC:!!(o.base||o.base===0)};o.orientation==="h"?(E=y.makeCalcdata(o,"x",T),b=_.makeCalcdata(o,"y"),w=c(o,_,"y",b),A=!!o.yperiodalignment,R="y"):(E=_.makeCalcdata(o,"y",T),b=y.makeCalcdata(o,"x"),w=c(o,y,"x",b),A=!!o.xperiodalignment,R="x"),M=w.vals;for(var C=Math.min(M.length,E.length),m=new Array(C),L=0;L<C;L++)m[L]={p:M[L],s:E[L]},A&&(m[L].orig_p=b[L],m[L][R+"End"]=w.ends[L],m[L][R+"Start"]=w.starts[L]),o.ids&&(m[L].id=String(o.ids[L]));return a(o,"marker")&&l(p,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),a(o,"marker.line")&&l(p,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),s(m,o),v(m,o),m}},8048:function(f){f.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},6376:function(f,u,r){var i=r(8248),c=r(3400).isArrayOrTypedArray,a=r(9032).BADNUM,l=r(4040),s=r(4460),v=r(1888).getAxisGroup,d=r(2592);function p(B,J){for(var ne=J.xaxis,oe=J.yaxis,Y=B._fullLayout,G=B._fullData,K=B.calcdata,ee=[],ie=[],re=0;re<G.length;re++){var se=G[re];if(se.visible===!0&&l.traceIs(se,"bar")&&se.xaxis===ne._id&&se.yaxis===oe._id&&(se.orientation==="h"?ee.push(K[re]):ie.push(K[re]),se._computePh))for(var ge=B.calcdata[re],xe=0;xe<ge.length;xe++)typeof ge[xe].ph0=="function"&&(ge[xe].ph0=ge[xe].ph0()),typeof ge[xe].ph1=="function"&&(ge[xe].ph1=ge[xe].ph1())}var Se={xCat:ne.type==="category"||ne.type==="multicategory",yCat:oe.type==="category"||oe.type==="multicategory",mode:Y.barmode,norm:Y.barnorm,gap:Y.bargap,groupgap:Y.bargroupgap};o(B,ne,oe,ie,Se),o(B,oe,ne,ee,Se)}function o(B,J,ne,oe,Y){if(oe.length){var G,K,ee,ie,re;switch(E(ne,oe),Y.mode){case"overlay":M(J,ne,oe,Y);break;case"group":for(G=[],K=[],ee=0;ee<oe.length;ee++)ie=oe[ee],re=ie[0].trace,re.offset===void 0?K.push(ie):G.push(ie);K.length&&b(B,J,ne,K,Y),G.length&&M(J,ne,G,Y);break;case"stack":case"relative":for(G=[],K=[],ee=0;ee<oe.length;ee++)ie=oe[ee],re=ie[0].trace,re.base===void 0?K.push(ie):G.push(ie);_(K),K.length&&w(B,J,ne,K,Y),G.length&&M(J,ne,G,Y);break}y(oe),k(oe,J)}}function y(B){var J,ne,oe,Y,G,K,ee;for(J=0;J<B.length;J++)ne=B[J],oe=ne[0].trace,Y=ne[0].t,Y.cornerradiusvalue===void 0&&(G=oe.marker?oe.marker.cornerradius:void 0,G!==void 0&&(K=i(G)?+G:+G.slice(0,-1),ee=i(G)?"px":"%",Y.cornerradiusvalue=K,Y.cornerradiusform=ee))}function _(B){if(!(B.length<2)){var J,ne,oe,Y,G,K,ee;for(J=0;J<B.length&&(ne=B[J],oe=ne[0].trace,G=oe.marker?oe.marker.cornerradius:void 0,G===void 0);J++);if(G!==void 0)for(K=i(G)?+G:+G.slice(0,-1),ee=i(G)?"px":"%",J=0;J<B.length;J++)ne=B[J],Y=ne[0].t,Y.cornerradiusvalue=K,Y.cornerradiusform=ee}}function E(B,J){var ne,oe;for(ne=0;ne<J.length;ne++){var Y=J[ne],G=Y[0].trace,K=G.type==="funnel"?G._base:G.base,ee,ie=G.orientation==="h"?G.xcalendar:G.ycalendar,re=B.type==="category"||B.type==="multicategory"?function(){return null}:B.d2c;if(c(K)){for(oe=0;oe<Math.min(K.length,Y.length);oe++)ee=re(K[oe],0,ie),i(ee)?(Y[oe].b=+ee,Y[oe].hasB=1):Y[oe].b=0;for(;oe<Y.length;oe++)Y[oe].b=0}else{ee=re(K,0,ie);var se=i(ee);for(ee=se?ee:0,oe=0;oe<Y.length;oe++)Y[oe].b=ee,se&&(Y[oe].hasB=1)}}}function M(B,J,ne,oe){for(var Y=0;Y<ne.length;Y++){var G=ne[Y],K=new d([G],{posAxis:B,sepNegVal:!1,overlapNoMerge:!oe.norm});A(B,K,oe),oe.norm?(O(K),V(J,K,oe)):L(J,K)}}function b(B,J,ne,oe,Y){var G=new d(oe,{posAxis:J,sepNegVal:!1,overlapNoMerge:!Y.norm});R(B,J,G,Y),N(G,J),Y.norm?(O(G),V(ne,G,Y)):L(ne,G)}function w(B,J,ne,oe,Y){var G=new d(oe,{posAxis:J,sepNegVal:Y.mode==="relative",overlapNoMerge:!(Y.norm||Y.mode==="stack"||Y.mode==="relative")});A(J,G,Y),D(ne,G,Y);for(var K=0;K<oe.length;K++)for(var ee=oe[K],ie=0;ie<ee.length;ie++){var re=ee[ie];if(re.s!==a){var se=re.b+re.s===G.get(re.p,re.s);se&&(re._outmost=!0)}}Y.norm&&V(ne,G,Y)}function A(B,J,ne){for(var oe=J.minDiff,Y=J.traces,G=oe*(1-ne.gap),K=G,ee=K*(1-(ne.groupgap||0)),ie=-ee/2,re=0;re<Y.length;re++){var se=Y[re],ge=se[0].t;ge.barwidth=ee,ge.poffset=ie,ge.bargroupwidth=G,ge.bardelta=oe}J.binWidth=Y[0][0].t.barwidth/100,T(J),C(B,J),m(B,J)}function R(B,J,ne,oe){for(var Y=B._fullLayout,G=ne.positions,K=ne.distinctPositions,ee=ne.minDiff,ie=ne.traces,re=ie.length,se=G.length!==K.length,ge=ee*(1-oe.gap),xe=v(Y,J._id)+ie[0][0].trace.orientation,Se=Y._alignmentOpts[xe]||{},ce=0;ce<re;ce++){var pe=ie[ce],ye=pe[0].trace,U=Se[ye.alignmentgroup]||{},W=Object.keys(U.offsetGroups||{}).length,j;W?j=ge/W:j=se?ge/re:ge;var F=j*(1-(oe.groupgap||0)),P;W?P=((2*ye._offsetIndex+1-W)*j-F)/2:P=se?((2*ce+1-re)*j-F)/2:-F/2;var q=pe[0].t;q.barwidth=F,q.poffset=P,q.bargroupwidth=ge,q.bardelta=ee}ne.binWidth=ie[0][0].t.barwidth/100,T(ne),C(J,ne),m(J,ne,se)}function T(B){var J=B.traces,ne,oe;for(ne=0;ne<J.length;ne++){var Y=J[ne],G=Y[0],K=G.trace,ee=G.t,ie=K._offset||K.offset,re=ee.poffset,se;if(c(ie)){for(se=Array.prototype.slice.call(ie,0,Y.length),oe=0;oe<se.length;oe++)i(se[oe])||(se[oe]=re);for(oe=se.length;oe<Y.length;oe++)se.push(re);ee.poffset=se}else ie!==void 0&&(ee.poffset=ie);var ge=K._width||K.width,xe=ee.barwidth;if(c(ge)){var Se=Array.prototype.slice.call(ge,0,Y.length);for(oe=0;oe<Se.length;oe++)i(Se[oe])||(Se[oe]=xe);for(oe=Se.length;oe<Y.length;oe++)Se.push(xe);if(ee.barwidth=Se,ie===void 0){for(se=[],oe=0;oe<Y.length;oe++)se.push(re+(xe-Se[oe])/2);ee.poffset=se}}else ge!==void 0&&(ee.barwidth=ge,ie===void 0&&(ee.poffset=re+(xe-ge)/2))}}function C(B,J){for(var ne=J.traces,oe=Z(B),Y=0;Y<ne.length;Y++)for(var G=ne[Y],K=G[0].t,ee=K.poffset,ie=c(ee),re=K.barwidth,se=c(re),ge=0;ge<G.length;ge++){var xe=G[ge],Se=xe.w=se?re[ge]:re;xe.p===void 0&&(xe.p=xe[oe],xe["orig_"+oe]=xe[oe]);var ce=(ie?ee[ge]:ee)+Se/2;xe[oe]=xe.p+ce}}function m(B,J,ne){var oe=J.traces,Y=J.minDiff,G=Y/2;s.minDtick(B,J.minDiff,J.distinctPositions[0],ne);for(var K=0;K<oe.length;K++){var ee=oe[K],ie=ee[0],re=ie.trace,se=[],ge,xe,Se,ce;for(ce=0;ce<ee.length;ce++)ge=ee[ce],xe=ge.p-G,Se=ge.p+G,se.push(xe,Se);if(re.width||re.offset){var pe=ie.t,ye=pe.poffset,U=pe.barwidth,W=c(ye),j=c(U);for(ce=0;ce<ee.length;ce++){ge=ee[ce];var F=W?ye[ce]:ye,P=j?U[ce]:U;xe=ge.p+F,Se=xe+P,se.push(xe,Se)}}re._extremes[B._id]=s.findExtremes(B,se,{padded:!1})}}function L(B,J){for(var ne=J.traces,oe=Z(B),Y=0;Y<ne.length;Y++){for(var G=ne[Y],K=G[0].trace,ee=K.type==="scatter",ie=K.orientation==="v",re=[],se=!1,ge=0;ge<G.length;ge++){var xe=G[ge],Se=ee?0:xe.b,ce=ee?ie?xe.y:xe.x:Se+xe.s;xe[oe]=ce,re.push(ce),xe.hasB&&re.push(Se),(!xe.hasB||!xe.b)&&(se=!0)}K._extremes[B._id]=s.findExtremes(B,re,{tozero:se,padded:!0})}}function D(B,J,ne){var oe=Z(B),Y=J.traces,G,K,ee,ie,re,se;for(ie=0;ie<Y.length;ie++)if(G=Y[ie],K=G[0].trace,K.type==="funnel")for(re=0;re<G.length;re++)se=G[re],se.s!==a&&J.put(se.p,-.5*se.s);for(ie=0;ie<Y.length;ie++){G=Y[ie],K=G[0].trace,ee=K.type==="funnel";var ge=[];for(re=0;re<G.length;re++)if(se=G[re],se.s!==a){var xe;ee?xe=se.s:xe=se.s+se.b;var Se=J.put(se.p,xe),ce=Se+xe;se.b=Se,se[oe]=ce,ne.norm||(ge.push(ce),se.hasB&&ge.push(Se))}ne.norm||(K._extremes[B._id]=s.findExtremes(B,ge,{tozero:!0,padded:!0}))}}function O(B){for(var J=B.traces,ne=0;ne<J.length;ne++)for(var oe=J[ne],Y=0;Y<oe.length;Y++){var G=oe[Y];G.s!==a&&B.put(G.p,G.b+G.s)}}function N(B,J){for(var ne=B.traces,oe=0;oe<ne.length;oe++){var Y=ne[oe],G=Y[0].trace;if(G.base===void 0)for(var K=new d([Y],{posAxis:J,sepNegVal:!0,overlapNoMerge:!0}),ee=0;ee<Y.length;ee++){var ie=Y[ee];if(ie.p!==a){var re=K.put(ie.p,ie.b+ie.s);re&&(ie.b=re)}}}}function V(B,J,ne){var oe=J.traces,Y=Z(B),G=ne.norm==="fraction"?1:100,K=G/1e9,ee=B.l2c(B.c2l(0)),ie=ne.mode==="stack"?G:ee;function re(P){return i(B.c2l(P))&&(P<ee-K||P>ie+K||!i(ee))}for(var se=0;se<oe.length;se++){for(var ge=oe[se],xe=ge[0].trace,Se=[],ce=!1,pe=!1,ye=0;ye<ge.length;ye++){var U=ge[ye];if(U.s!==a){var W=Math.abs(G/J.get(U.p,U.s));U.b*=W,U.s*=W;var j=U.b,F=j+U.s;U[Y]=F,Se.push(F),pe=pe||re(F),U.hasB&&(Se.push(j),pe=pe||re(j)),(!U.hasB||!U.b)&&(ce=!0)}}xe._extremes[B._id]=s.findExtremes(B,Se,{tozero:ce,padded:pe})}}function X(B,J,ne,oe){for(var Y=Z(oe),G=0;G<B.length;G++)for(var K=B[G],ee=0;ee<K.length;ee++){var ie=K[ee],re=ie[Y];ie._sMin=J[re],ie._sMax=ne[re]}}function k(B,J){var ne=Z(J),oe={},Y,G,K,ee=1/0,ie=-1/0;for(Y=0;Y<B.length;Y++)for(K=B[Y],G=0;G<K.length;G++){var re=K[G].p;i(re)&&(ee=Math.min(ee,re),ie=Math.max(ie,re))}var se=1e4/(ie-ee),ge=oe.round=function(te){return String(Math.round(se*(te-ee)))},xe={},Se={},ce=B.some(function(te){var ue=te[0].trace;return"marker"in ue&&ue.marker.cornerradius});for(Y=0;Y<B.length;Y++){K=B[Y],K[0].t.extents=oe;var pe=K[0].t.poffset,ye=c(pe);for(G=0;G<K.length;G++){var U=K[G],W=U[ne]-U.w/2;if(i(W)){var j=U[ne]+U.w/2,F=ge(U.p);oe[F]?oe[F]=[Math.min(W,oe[F][0]),Math.max(j,oe[F][1])]:oe[F]=[W,j]}if(U.p0=U.p+(ye?pe[G]:pe),U.p1=U.p0+U.w,U.s0=U.b,U.s1=U.s0+U.s,ce){var P=Math.min(U.s0,U.s1)||0,q=Math.max(U.s0,U.s1)||0,z=U[ne];xe[z]=z in xe?Math.min(xe[z],P):P,Se[z]=z in Se?Math.max(Se[z],q):q}}}ce&&X(B,xe,Se,J)}function Z(B){return B._id.charAt(0)}f.exports={crossTraceCalc:p,setGroupPositions:o}},1508:function(f,u,r){var i=r(8248),c=r(3400),a=r(6308),l=r(4040),s=r(3980),v=r(1147),d=r(5592),p=r(11),o=r(832),y=c.coerceFont;function _(w,A,R,T){function C(N,V){return c.coerce(w,A,o,N,V)}var m=s(w,A,T,C);if(!m){A.visible=!1;return}v(w,A,T,C),C("xhoverformat"),C("yhoverformat"),C("zorder"),C("orientation",A.x&&!A.y?"h":"v"),C("base"),C("offset"),C("width"),C("text"),C("hovertext"),C("hovertemplate");var L=C("textposition");b(w,A,T,C,L,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),d(w,A,C,R,T);var D=(A.marker.line||{}).color,O=l.getComponentMethod("errorbars","supplyDefaults");O(w,A,D||a.defaultLine,{axis:"y"}),O(w,A,D||a.defaultLine,{axis:"x",inherit:"y"}),c.coerceSelectionMarkerOpacity(A,C)}function E(w,A){var R,T;function C(D,O){return c.coerce(T._input,T,o,D,O)}for(var m=0;m<w.length;m++)if(T=w[m],T.type==="bar"){R=T._input;var L=C("marker.cornerradius",A.barcornerradius);T.marker&&(T.marker.cornerradius=M(L)),A.barmode==="group"&&p(R,T,A,C)}}function M(w){if(i(w)){if(w=+w,w>=0)return w}else if(typeof w=="string"&&(w=w.trim(),w.slice(-1)==="%"&&i(w.slice(0,-1))&&(w=+w.slice(0,-1),w>=0)))return w+"%"}function b(w,A,R,T,C,m){m=m||{};var L=m.moduleHasSelected!==!1,D=m.moduleHasUnselected!==!1,O=m.moduleHasConstrain!==!1,N=m.moduleHasCliponaxis!==!1,V=m.moduleHasTextangle!==!1,X=m.moduleHasInsideanchor!==!1,k=!!m.hasPathbar,Z=Array.isArray(C)||C==="auto",B=Z||C==="inside",J=Z||C==="outside";if(B||J){var ne=y(T,"textfont",R.font),oe=c.extendFlat({},ne),Y=w.textfont&&w.textfont.color,G=!Y;if(G&&delete oe.color,y(T,"insidetextfont",oe),k){var K=c.extendFlat({},ne);G&&delete K.color,y(T,"pathbar.textfont",K)}J&&y(T,"outsidetextfont",ne),L&&T("selected.textfont.color"),D&&T("unselected.textfont.color"),O&&T("constraintext"),N&&T("cliponaxis"),V&&T("textangle"),T("texttemplate")}B&&X&&T("insidetextanchor")}f.exports={supplyDefaults:_,crossTraceDefaults:E,handleText:b,validateCornerradius:M}},2160:function(f){f.exports=function(r,i,c){return r.x="xVal"in i?i.xVal:i.x,r.y="yVal"in i?i.yVal:i.y,i.xa&&(r.xaxis=i.xa),i.ya&&(r.yaxis=i.ya),c.orientation==="h"?(r.label=r.y,r.value=r.x):(r.label=r.x,r.value=r.y),r}},444:function(f,u,r){var i=r(8248),c=r(9760),a=r(3400).isArrayOrTypedArray;u.coerceString=function(l,s,v){if(typeof s=="string"){if(s||!l.noBlank)return s}else if((typeof s=="number"||s===!0)&&!l.strict)return String(s);return v!==void 0?v:l.dflt},u.coerceNumber=function(l,s,v){if(i(s)){s=+s;var d=l.min,p=l.max,o=d!==void 0&&s<d||p!==void 0&&s>p;if(!o)return s}return v!==void 0?v:l.dflt},u.coerceColor=function(l,s,v){return c(s).isValid()?s:v!==void 0?v:l.dflt},u.coerceEnumerated=function(l,s,v){return l.coerceNumber&&(s=+s),l.values.indexOf(s)!==-1?s:v!==void 0?v:l.dflt},u.getValue=function(l,s){var v;return a(l)?s<l.length&&(v=l[s]):v=l,v},u.getLineWidth=function(l,s){var v=0<s.mlw?s.mlw:a(l.marker.line.width)?0:l.marker.line.width;return v}},1020:function(f,u,r){var i=r(3024),c=r(4040),a=r(6308),l=r(3400).fillText,s=r(444).getLineWidth,v=r(4460).hoverLabelText,d=r(9032).BADNUM;function p(_,E,M,b,w){var A=o(_,E,M,b,w);if(A){var R=A.cd,T=R[0].trace,C=R[A.index];return A.color=y(T,C),c.getComponentMethod("errorbars","hoverInfo")(C,T,A),[A]}}function o(_,E,M,b,w){var A=_.cd,R=A[0].trace,T=A[0].t,C=b==="closest",m=R.type==="waterfall",L=_.maxHoverDistance,D=_.maxSpikeDistance,O,N,V,X,k,Z,B;R.orientation==="h"?(O=M,N=E,V="y",X="x",k=Se,Z=se):(O=E,N=M,V="x",X="y",Z=Se,k=se);var J=R[V+"period"],ne=C||J;function oe(te){return G(te,-1)}function Y(te){return G(te,1)}function G(te,ue){var ve=te.w;return te[V]+ue*ve/2}function K(te){return te[V+"End"]-te[V+"Start"]}var ee=C?oe:J?function(te){return te.p-K(te)/2}:function(te){return Math.min(oe(te),te.p-T.bardelta/2)},ie=C?Y:J?function(te){return te.p+K(te)/2}:function(te){return Math.max(Y(te),te.p+T.bardelta/2)};function re(te,ue,ve){return w.finiteRange&&(ve=0),i.inbox(te-O,ue-O,ve+Math.min(1,Math.abs(ue-te)/B)-1)}function se(te){return re(ee(te),ie(te),L)}function ge(te){return re(oe(te),Y(te),D)}function xe(te){var ue=te[X];if(m){var ve=Math.abs(te.rawS)||0;N>0?ue+=ve:N<0&&(ue-=ve)}return ue}function Se(te){var ue=N,ve=te.b,_e=xe(te);return i.inbox(ve-ue,_e-ue,L+(_e-ue)/(_e-ve)-1)}function ce(te){var ue=N,ve=te.b,_e=xe(te);return i.inbox(ve-ue,_e-ue,D+(_e-ue)/(_e-ve)-1)}var pe=_[V+"a"],ye=_[X+"a"];B=Math.abs(pe.r2c(pe.range[1])-pe.r2c(pe.range[0]));function U(te){return(k(te)+Z(te))/2}var W=i.getDistanceFunction(b,k,Z,U);if(i.getClosest(A,W,_),_.index!==!1&&A[_.index].p!==d){ne||(ee=function(te){return Math.min(oe(te),te.p-T.bargroupwidth/2)},ie=function(te){return Math.max(Y(te),te.p+T.bargroupwidth/2)});var j=_.index,F=A[j],P=R.base?F.b+F.s:F.s;_[X+"0"]=_[X+"1"]=ye.c2p(F[X],!0),_[X+"LabelVal"]=P;var q=T.extents[T.extents.round(F.p)];_[V+"0"]=pe.c2p(C?ee(F):q[0],!0),_[V+"1"]=pe.c2p(C?ie(F):q[1],!0);var z=F.orig_p!==void 0;return _[V+"LabelVal"]=z?F.orig_p:F.p,_.labelLabel=v(pe,_[V+"LabelVal"],R[V+"hoverformat"]),_.valueLabel=v(ye,_[X+"LabelVal"],R[X+"hoverformat"]),_.baseLabel=v(ye,F.b,R[X+"hoverformat"]),_.spikeDistance=(ce(F)+ge(F))/2,_[V+"Spike"]=pe.c2p(F.p,!0),l(F,R,_),_.hovertemplate=R.hovertemplate,_}}function y(_,E){var M=E.mcc||_.marker.color,b=E.mlcc||_.marker.line.color,w=s(_,E);if(a.opacity(M))return M;if(a.opacity(b)&&w)return b}f.exports={hoverPoints:p,hoverOnBars:o,getTraceColor:y}},1132:function(f,u,r){f.exports={attributes:r(832),layoutAttributes:r(9324),supplyDefaults:r(1508).supplyDefaults,crossTraceDefaults:r(1508).crossTraceDefaults,supplyLayoutDefaults:r(7156),calc:r(9439),crossTraceCalc:r(6376).crossTraceCalc,colorbar:r(5528),arraysToCalcdata:r(4664),plot:r(8184).plot,style:r(100).style,styleOnSelect:r(100).styleOnSelect,hoverPoints:r(1020).hoverPoints,eventData:r(2160),selectPoints:r(5784),moduleType:"trace",name:"bar",basePlotModule:r(7952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},9324:function(f){f.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},7156:function(f,u,r){var i=r(4040),c=r(4460),a=r(3400),l=r(9324),s=r(1508).validateCornerradius;f.exports=function(v,d,p){function o(m,L){return a.coerce(v,d,l,m,L)}for(var y=!1,_=!1,E=!1,M={},b=o("barmode"),w=0;w<p.length;w++){var A=p[w];if(i.traceIs(A,"bar")&&A.visible)y=!0;else continue;if(b==="group"){var R=A.xaxis+A.yaxis;M[R]&&(E=!0),M[R]=!0}if(A.visible&&A.type==="histogram"){var T=c.getFromId({_fullLayout:d},A[A.orientation==="v"?"xaxis":"yaxis"]);T.type!=="category"&&(_=!0)}}if(!y){delete d.barmode;return}b!=="overlay"&&o("barnorm"),o("bargap",_&&!E?0:.2),o("bargroupgap");var C=o("barcornerradius");d.barcornerradius=s(C)}},8184:function(f,u,r){var i=r(3428),c=r(8248),a=r(3400),l=r(2736),s=r(6308),v=r(3616),d=r(4040),p=r(4460).tickText,o=r(2744),y=o.recordMinTextSize,_=o.clearMinTextSize,E=r(100),M=r(444),b=r(8048),w=r(832),A=w.text,R=w.textposition,T=r(624).appendArrayPointValue,C=b.TEXTPAD;function m(se){return se.id}function L(se){if(se.ids)return m}function D(se){return(se>0)-(se<0)}function O(se,ge){return se<ge?1:-1}function N(se,ge,xe,Se){var ce=[],pe=[],ye=Se?ge:xe,U=Se?xe:ge;return ce[0]=ye.c2p(se.s0,!0),pe[0]=U.c2p(se.p0,!0),ce[1]=ye.c2p(se.s1,!0),pe[1]=U.c2p(se.p1,!0),Se?[ce,pe]:[pe,ce]}function V(se,ge,xe,Se){if(!ge.uniformtext.mode&&X(xe)){var ce;return Se&&(ce=Se()),se.transition().duration(xe.duration).ease(xe.easing).each("end",function(){ce&&ce()}).each("interrupt",function(){ce&&ce()})}else return se}function X(se){return se&&se.duration>0}function k(se,ge,xe,Se,ce,pe){var ye=ge.xaxis,U=ge.yaxis,W=se._fullLayout,j=se._context.staticPlot;ce||(ce={mode:W.barmode,norm:W.barmode,gap:W.bargap,groupgap:W.bargroupgap},_("bar",W));var F=a.makeTraceGroups(Se,xe,"trace bars").each(function(P){var q=i.select(this),z=P[0].trace,te=P[0].t,ue=z.type==="waterfall",ve=z.type==="funnel",_e=z.type==="histogram",Re=z.type==="bar",Le=Re||ve,Ve=0;ue&&z.connector.visible&&z.connector.mode==="between"&&(Ve=z.connector.line.width/2);var Xe=z.orientation==="h",Ze=X(ce),Te=a.ensureSingle(q,"g","points"),we=L(z),be=Te.selectAll("g.point").data(a.identity,we);be.enter().append("g").classed("point",!0),be.exit().remove(),be.each(function(He,Ke){var st=i.select(this),vt=N(He,ye,U,Xe),pt=vt[0][0],ft=vt[0][1],lt=vt[1][0],Mt=vt[1][1],ot=(Xe?ft-pt:Mt-lt)===0;ot&&Le&&M.getLineWidth(z,He)&&(ot=!1),ot||(ot=!c(pt)||!c(ft)||!c(lt)||!c(Mt)),He.isBlank=ot,ot&&(Xe?ft=pt:Mt=lt),Ve&&!ot&&(Xe?(pt-=O(pt,ft)*Ve,ft+=O(pt,ft)*Ve):(lt-=O(lt,Mt)*Ve,Mt+=O(lt,Mt)*Ve));var Ct,kt;if(z.type==="waterfall"){if(!ot){var St=z[He.dir].marker;Ct=St.line.width,kt=St.color}}else Ct=M.getLineWidth(z,He),kt=He.mc||z.marker.color;function Et(Gt){var Xt=i.round(Ct/2%1,2);return ce.gap===0&&ce.groupgap===0?i.round(Math.round(Gt)-Xt,2):Gt}function Ue(Gt,Xt,sr){return sr&&Gt===Xt?Gt:Math.abs(Gt-Xt)>=2?Et(Gt):Gt>Xt?Math.ceil(Gt):Math.floor(Gt)}var De=s.opacity(kt),Ie=De<1||Ct>.01?Et:Ue;se._context.staticPlot||(pt=Ie(pt,ft,Xe),ft=Ie(ft,pt,Xe),lt=Ie(lt,Mt,!Xe),Mt=Ie(Mt,lt,!Xe));var Fe=Xe?ye.c2p:U.c2p,We;He.s0>0?We=He._sMax:He.s0<0?We=He._sMin:We=He.s1>0?He._sMax:He._sMin;function de(Gt,Xt){if(!Gt)return 0;var sr=Math.abs(Xe?Mt-lt:ft-pt),jt=Math.abs(Xe?ft-pt:Mt-lt),Ut=Ie(Math.abs(Fe(We,!0)-Fe(0,!0))),tr=He.hasB?Math.min(sr/2,jt/2):Math.min(sr/2,Ut),Ht;if(Xt==="%"){var lr=Math.min(50,Gt);Ht=sr*(lr/100)}else Ht=Gt;return Ie(Math.max(Math.min(Ht,tr),0))}var Me=Re||_e?de(te.cornerradiusvalue,te.cornerradiusform):0,he,Ee,Pe="M"+pt+","+lt+"V"+Mt+"H"+ft+"V"+lt+"Z",Ne=0;if(Me&&He.s){var ht=D(He.s0)===0||D(He.s)===D(He.s0)?He.s1:He.s0;if(Ne=Ie(He.hasB?0:Math.abs(Fe(We,!0)-Fe(ht,!0))),Ne<Me){var nt=O(pt,ft),Ye=O(lt,Mt),Be=nt===-Ye?1:0;if(Xe)if(He.hasB)he="M"+(pt+Me*nt)+","+lt+"A "+Me+","+Me+" 0 0 "+Be+" "+pt+","+(lt+Me*Ye)+"V"+(Mt-Me*Ye)+"A "+Me+","+Me+" 0 0 "+Be+" "+(pt+Me*nt)+","+Mt+"H"+(ft-Me*nt)+"A "+Me+","+Me+" 0 0 "+Be+" "+ft+","+(Mt-Me*Ye)+"V"+(lt+Me*Ye)+"A "+Me+","+Me+" 0 0 "+Be+" "+(ft-Me*nt)+","+lt+"Z";else{Ee=Math.abs(ft-pt)+Ne;var ut=Ee<Me?Me-Math.sqrt(Ee*(2*Me-Ee)):0,Dt=Ne>0?Math.sqrt(Ne*(2*Me-Ne)):0,Nt=nt>0?Math.max:Math.min;he="M"+pt+","+lt+"V"+(Mt-ut*Ye)+"H"+Nt(ft-(Me-Ne)*nt,pt)+"A "+Me+","+Me+" 0 0 "+Be+" "+ft+","+(Mt-Me*Ye-Dt)+"V"+(lt+Me*Ye+Dt)+"A "+Me+","+Me+" 0 0 "+Be+" "+Nt(ft-(Me-Ne)*nt,pt)+","+(lt+ut*Ye)+"Z"}else if(He.hasB)he="M"+(pt+Me*nt)+","+lt+"A "+Me+","+Me+" 0 0 "+Be+" "+pt+","+(lt+Me*Ye)+"V"+(Mt-Me*Ye)+"A "+Me+","+Me+" 0 0 "+Be+" "+(pt+Me*nt)+","+Mt+"H"+(ft-Me*nt)+"A "+Me+","+Me+" 0 0 "+Be+" "+ft+","+(Mt-Me*Ye)+"V"+(lt+Me*Ye)+"A "+Me+","+Me+" 0 0 "+Be+" "+(ft-Me*nt)+","+lt+"Z";else{Ee=Math.abs(Mt-lt)+Ne;var Wt=Ee<Me?Me-Math.sqrt(Ee*(2*Me-Ee)):0,$t=Ne>0?Math.sqrt(Ne*(2*Me-Ne)):0,Vt=Ye>0?Math.max:Math.min;he="M"+(pt+Wt*nt)+","+lt+"V"+Vt(Mt-(Me-Ne)*Ye,lt)+"A "+Me+","+Me+" 0 0 "+Be+" "+(pt+Me*nt-$t)+","+Mt+"H"+(ft-Me*nt+$t)+"A "+Me+","+Me+" 0 0 "+Be+" "+(ft-Wt*nt)+","+Vt(Mt-(Me-Ne)*Ye,lt)+"V"+lt+"Z"}}else he=Pe}else he=Pe;var Ft=V(a.ensureSingle(st,"path"),W,ce,pe);if(Ft.style("vector-effect",j?"none":"non-scaling-stroke").attr("d",isNaN((ft-pt)*(Mt-lt))||ot&&se._context.staticPlot?"M0,0Z":he).call(v.setClipUrl,ge.layerClipId,se),!W.uniformtext.mode&&Ze){var qt=v.makePointStyleFns(z);v.singlePointStyle(He,Ft,z,qt,se)}Z(se,ge,st,P,Ke,pt,ft,lt,Mt,Me,Ne,ce,pe),ge.layerClipId&&v.hideOutsideRangePoint(He,st.select("text"),ye,U,z.xcalendar,z.ycalendar)});var ke=z.cliponaxis===!1;v.setClipUrl(q,ke?null:ge.layerClipId,se)});d.getComponentMethod("errorbars","plot")(se,F,ge,ce)}function Z(se,ge,xe,Se,ce,pe,ye,U,W,j,F,P,q){var z=ge.xaxis,te=ge.yaxis,ue=se._fullLayout,ve;function _e(Ee,Pe,Ne){var ht=a.ensureSingle(Ee,"text").text(Pe).attr({class:"bartext bartext-"+ve,"text-anchor":"middle","data-notex":1}).call(v.font,Ne).call(l.convertToTspans,se);return ht}var Re=Se[0].trace,Le=Re.orientation==="h",Ve=K(ue,Se,ce,z,te);ve=ee(Re,ce);var Xe=P.mode==="stack"||P.mode==="relative",Ze=Se[ce],Te=!Xe||Ze._outmost,we=Ze.hasB,be=j&&j-F>C;if(!Ve||ve==="none"||(Ze.isBlank||pe===ye||U===W)&&(ve==="auto"||ve==="inside")){xe.select("text").remove();return}var ke=ue.font,He=E.getBarColor(Se[ce],Re),Ke=E.getInsideTextFont(Re,ce,ke,He),st=E.getOutsideTextFont(Re,ce,ke),vt=Re.insidetextanchor||"end",pt=xe.datum();Le?z.type==="log"&&pt.s0<=0&&(z.range[0]<z.range[1]?pe=0:pe=z._length):te.type==="log"&&pt.s0<=0&&(te.range[0]<te.range[1]?U=te._length:U=0);var ft=Math.abs(ye-pe),lt=Math.abs(W-U),Mt=ft-2*C,ot=lt-2*C,Ct,kt,St,Et,Ue;if(ve==="outside"&&!Te&&!Ze.hasB&&(ve="inside"),ve==="auto")if(Te){ve="inside",Ue=a.ensureUniformFontSize(se,Ke),Ct=_e(xe,Ve,Ue),kt=v.bBox(Ct.node()),St=kt.width,Et=kt.height;var De=St>0&&Et>0,Ie;be?we?Ie=B(Mt-2*j,ot,St,Et,Le)||B(Mt,ot-2*j,St,Et,Le):Le?Ie=B(Mt-(j-F),ot,St,Et,Le)||B(Mt,ot-2*(j-F),St,Et,Le):Ie=B(Mt,ot-(j-F),St,Et,Le)||B(Mt-2*(j-F),ot,St,Et,Le):Ie=B(Mt,ot,St,Et,Le),De&&Ie?ve="inside":(ve="outside",Ct.remove(),Ct=null)}else ve="inside";if(!Ct){Ue=a.ensureUniformFontSize(se,ve==="outside"?st:Ke),Ct=_e(xe,Ve,Ue);var Fe=Ct.attr("transform");if(Ct.attr("transform",""),kt=v.bBox(Ct.node()),St=kt.width,Et=kt.height,Ct.attr("transform",Fe),St<=0||Et<=0){Ct.remove();return}}var We=Re.textangle,de,Me;ve==="outside"?(Me=Re.constraintext==="both"||Re.constraintext==="outside",de=G(pe,ye,U,W,kt,{isHorizontal:Le,constrained:Me,angle:We})):(Me=Re.constraintext==="both"||Re.constraintext==="inside",de=oe(pe,ye,U,W,kt,{isHorizontal:Le,constrained:Me,angle:We,anchor:vt,hasB:we,r:j,overhead:F})),de.fontSize=Ue.size,y(Re.type==="histogram"?"bar":Re.type,de,ue),Ze.transform=de;var he=V(Ct,ue,P,q);a.setTransormAndDisplay(he,de)}function B(se,ge,xe,Se,ce){if(se<0||ge<0)return!1;var pe=xe<=se&&Se<=ge,ye=xe<=ge&&Se<=se,U=ce?se>=xe*(ge/Se):ge>=Se*(se/xe);return pe||ye||U}function J(se){return se==="auto"?0:se}function ne(se,ge){var xe=Math.PI/180*ge,Se=Math.abs(Math.sin(xe)),ce=Math.abs(Math.cos(xe));return{x:se.width*ce+se.height*Se,y:se.width*Se+se.height*ce}}function oe(se,ge,xe,Se,ce,pe){var ye=!!pe.isHorizontal,U=!!pe.constrained,W=pe.angle||0,j=pe.anchor,F=j==="end",P=j==="start",q=pe.leftToRight||0,z=(q+1)/2,te=1-z,ue=pe.hasB,ve=pe.r,_e=pe.overhead,Re=ce.width,Le=ce.height,Ve=Math.abs(ge-se),Xe=Math.abs(Se-xe),Ze=Ve>2*C&&Xe>2*C?C:0;Ve-=2*Ze,Xe-=2*Ze;var Te=J(W);W==="auto"&&!(Re<=Ve&&Le<=Xe)&&(Re>Ve||Le>Xe)&&(!(Re>Xe||Le>Ve)||Re<Le!=Ve<Xe)&&(Te+=90);var we=ne(ce,Te),be,ke;if(ve&&ve-_e>C){var He=Y(se,ge,xe,Se,we,ve,_e,ye,ue);be=He.scale,ke=He.pad}else be=1,U&&(be=Math.min(1,Ve/we.x,Xe/we.y)),ke=0;var Ke=ce.left*te+ce.right*z,st=(ce.top+ce.bottom)/2,vt=(se+C)*te+(ge-C)*z,pt=(xe+Se)/2,ft=0,lt=0;if(P||F){var Mt=(ye?we.x:we.y)/2;ve&&(F||ue)&&(Ze+=ke);var ot=ye?O(se,ge):O(xe,Se);ye?P?(vt=se+ot*Ze,ft=-ot*Mt):(vt=ge-ot*Ze,ft=ot*Mt):P?(pt=xe+ot*Ze,lt=-ot*Mt):(pt=Se-ot*Ze,lt=ot*Mt)}return{textX:Ke,textY:st,targetX:vt,targetY:pt,anchorX:ft,anchorY:lt,scale:be,rotate:Te}}function Y(se,ge,xe,Se,ce,pe,ye,U,W){var j=Math.max(0,Math.abs(ge-se)-2*C),F=Math.max(0,Math.abs(Se-xe)-2*C),P=pe-C,q=ye?P-Math.sqrt(P*P-(P-ye)*(P-ye)):P,z=W?P*2:U?P-ye:2*q,te=W?P*2:U?2*q:P-ye,ue,ve,_e,Re,Le;return ce.y/ce.x>=F/(j-z)?Re=F/ce.y:ce.y/ce.x<=(F-te)/j?Re=j/ce.x:!W&&U?(ue=ce.x*ce.x+ce.y*ce.y/4,ve=-2*ce.x*(j-P)-ce.y*(F/2-P),_e=(j-P)*(j-P)+(F/2-P)*(F/2-P)-P*P,Re=(-ve+Math.sqrt(ve*ve-4*ue*_e))/(2*ue)):W?(ue=(ce.x*ce.x+ce.y*ce.y)/4,ve=-ce.x*(j/2-P)-ce.y*(F/2-P),_e=(j/2-P)*(j/2-P)+(F/2-P)*(F/2-P)-P*P,Re=(-ve+Math.sqrt(ve*ve-4*ue*_e))/(2*ue)):(ue=ce.x*ce.x/4+ce.y*ce.y,ve=-ce.x*(j/2-P)-2*ce.y*(F-P),_e=(j/2-P)*(j/2-P)+(F-P)*(F-P)-P*P,Re=(-ve+Math.sqrt(ve*ve-4*ue*_e))/(2*ue)),Re=Math.min(1,Re),U?Le=Math.max(0,P-Math.sqrt(Math.max(0,P*P-(P-(F-ce.y*Re)/2)*(P-(F-ce.y*Re)/2)))-ye):Le=Math.max(0,P-Math.sqrt(Math.max(0,P*P-(P-(j-ce.x*Re)/2)*(P-(j-ce.x*Re)/2)))-ye),{scale:Re,pad:Le}}function G(se,ge,xe,Se,ce,pe){var ye=!!pe.isHorizontal,U=!!pe.constrained,W=pe.angle||0,j=ce.width,F=ce.height,P=Math.abs(ge-se),q=Math.abs(Se-xe),z;ye?z=q>2*C?C:0:z=P>2*C?C:0;var te=1;U&&(te=ye?Math.min(1,q/F):Math.min(1,P/j));var ue=J(W),ve=ne(ce,ue),_e=(ye?ve.x:ve.y)/2,Re=(ce.left+ce.right)/2,Le=(ce.top+ce.bottom)/2,Ve=(se+ge)/2,Xe=(xe+Se)/2,Ze=0,Te=0,we=ye?O(ge,se):O(xe,Se);return ye?(Ve=ge-we*z,Ze=we*_e):(Xe=Se+we*z,Te=-we*_e),{textX:Re,textY:Le,targetX:Ve,targetY:Xe,anchorX:Ze,anchorY:Te,scale:te,rotate:ue}}function K(se,ge,xe,Se,ce){var pe=ge[0].trace,ye=pe.texttemplate,U;return ye?U=ie(se,ge,xe,Se,ce):pe.textinfo?U=re(ge,xe,Se,ce):U=M.getValue(pe.text,xe),M.coerceString(A,U)}function ee(se,ge){var xe=M.getValue(se.textposition,ge);return M.coerceEnumerated(R,xe)}function ie(se,ge,xe,Se,ce){var pe=ge[0].trace,ye=a.castOption(pe,xe,"texttemplate");if(!ye)return"";var U=pe.type==="histogram",W=pe.type==="waterfall",j=pe.type==="funnel",F=pe.orientation==="h",P,q,z,te;F?(P="y",q=ce,z="x",te=Se):(P="x",q=Se,z="y",te=ce);function ue(Ze){return p(q,q.c2l(Ze),!0).text}function ve(Ze){return p(te,te.c2l(Ze),!0).text}var _e=ge[xe],Re={};Re.label=_e.p,Re.labelLabel=Re[P+"Label"]=ue(_e.p);var Le=a.castOption(pe,_e.i,"text");(Le===0||Le)&&(Re.text=Le),Re.value=_e.s,Re.valueLabel=Re[z+"Label"]=ve(_e.s);var Ve={};T(Ve,pe,_e.i),(U||Ve.x===void 0)&&(Ve.x=F?Re.value:Re.label),(U||Ve.y===void 0)&&(Ve.y=F?Re.label:Re.value),(U||Ve.xLabel===void 0)&&(Ve.xLabel=F?Re.valueLabel:Re.labelLabel),(U||Ve.yLabel===void 0)&&(Ve.yLabel=F?Re.labelLabel:Re.valueLabel),W&&(Re.delta=+_e.rawS||_e.s,Re.deltaLabel=ve(Re.delta),Re.final=_e.v,Re.finalLabel=ve(Re.final),Re.initial=Re.final-Re.delta,Re.initialLabel=ve(Re.initial)),j&&(Re.value=_e.s,Re.valueLabel=ve(Re.value),Re.percentInitial=_e.begR,Re.percentInitialLabel=a.formatPercent(_e.begR),Re.percentPrevious=_e.difR,Re.percentPreviousLabel=a.formatPercent(_e.difR),Re.percentTotal=_e.sumR,Re.percenTotalLabel=a.formatPercent(_e.sumR));var Xe=a.castOption(pe,_e.i,"customdata");return Xe&&(Re.customdata=Xe),a.texttemplateString(ye,Re,se._d3locale,Ve,Re,pe._meta||{})}function re(se,ge,xe,Se){var ce=se[0].trace,pe=ce.orientation==="h",ye=ce.type==="waterfall",U=ce.type==="funnel";function W(Xe){var Ze=pe?Se:xe;return p(Ze,Xe,!0).text}function j(Xe){var Ze=pe?xe:Se;return p(Ze,+Xe,!0).text}var F=ce.textinfo,P=se[ge],q=F.split("+"),z=[],te,ue=function(Xe){return q.indexOf(Xe)!==-1};if(ue("label")&&z.push(W(se[ge].p)),ue("text")&&(te=a.castOption(ce,P.i,"text"),(te===0||te)&&z.push(te)),ye){var ve=+P.rawS||P.s,_e=P.v,Re=_e-ve;ue("initial")&&z.push(j(Re)),ue("delta")&&z.push(j(ve)),ue("final")&&z.push(j(_e))}if(U){ue("value")&&z.push(j(P.s));var Le=0;ue("percent initial")&&Le++,ue("percent previous")&&Le++,ue("percent total")&&Le++;var Ve=Le>1;ue("percent initial")&&(te=a.formatPercent(P.begR),Ve&&(te+=" of initial"),z.push(te)),ue("percent previous")&&(te=a.formatPercent(P.difR),Ve&&(te+=" of previous"),z.push(te)),ue("percent total")&&(te=a.formatPercent(P.sumR),Ve&&(te+=" of total"),z.push(te))}return z.join("<br>")}f.exports={plot:k,toMoveInsideBar:oe}},5784:function(f){f.exports=function(i,c){var a=i.cd,l=i.xaxis,s=i.yaxis,v=a[0].trace,d=v.type==="funnel",p=v.orientation==="h",o=[],y;if(c===!1)for(y=0;y<a.length;y++)a[y].selected=0;else for(y=0;y<a.length;y++){var _=a[y],E="ct"in _?_.ct:u(_,l,s,p,d);c.contains(E,!1,y,i)?(o.push({pointNumber:y,x:l.c2d(_.x),y:s.c2d(_.y)}),_.selected=1):_.selected=0}return o};function u(r,i,c,a,l){var s=i.c2p(a?r.s0:r.p0,!0),v=i.c2p(a?r.s1:r.p1,!0),d=c.c2p(a?r.p0:r.s0,!0),p=c.c2p(a?r.p1:r.s1,!0);return l?[(s+v)/2,(d+p)/2]:a?[v,(d+p)/2]:[(s+v)/2,p]}},2592:function(f,u,r){f.exports=c;var i=r(3400).distinctVals;function c(a,l){this.traces=a,this.sepNegVal=l.sepNegVal,this.overlapNoMerge=l.overlapNoMerge;for(var s=1/0,v=l.posAxis._id.charAt(0),d=[],p=0;p<a.length;p++){for(var o=a[p],y=0;y<o.length;y++){var _=o[y],E=_.p;E===void 0&&(E=_[v]),E!==void 0&&d.push(E)}o[0]&&o[0].width1&&(s=Math.min(o[0].width1,s))}this.positions=d;var M=i(d);this.distinctPositions=M.vals,M.vals.length===1&&s!==1/0?this.minDiff=s:this.minDiff=Math.min(M.minDiff,s);var b=(l.posAxis||{}).type;(b==="category"||b==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}c.prototype.put=function(l,s){var v=this.getLabel(l,s),d=this.bins[v]||0;return this.bins[v]=d+s,d},c.prototype.get=function(l,s){var v=this.getLabel(l,s);return this.bins[v]||0},c.prototype.getLabel=function(l,s){var v=s<0&&this.sepNegVal?"v":"^",d=this.overlapNoMerge?l:Math.round(l/this.binWidth);return v+d}},100:function(f,u,r){var i=r(3428),c=r(6308),a=r(3616),l=r(3400),s=r(4040),v=r(2744).resizeText,d=r(832),p=d.textfont,o=d.insidetextfont,y=d.outsidetextfont,_=r(444);function E(N){var V=i.select(N).selectAll('g[class^="barlayer"]').selectAll("g.trace");v(N,V,"bar");var X=V.size(),k=N._fullLayout;V.style("opacity",function(Z){return Z[0].trace.opacity}).each(function(Z){(k.barmode==="stack"&&X>1||k.bargap===0&&k.bargroupgap===0&&!Z[0].trace.marker.line.width)&&i.select(this).attr("shape-rendering","crispEdges")}),V.selectAll("g.points").each(function(Z){var B=i.select(this),J=Z[0].trace;M(B,J,N)}),s.getComponentMethod("errorbars","style")(V)}function M(N,V,X){a.pointStyle(N.selectAll("path"),V,X),b(N,V,X)}function b(N,V,X){N.selectAll("text").each(function(k){var Z=i.select(this),B=l.ensureUniformFontSize(X,T(Z,k,V,X));a.font(Z,B)})}function w(N,V,X){var k=V[0].trace;k.selectedpoints?A(X,k,N):(M(X,k,N),s.getComponentMethod("errorbars","style")(X))}function A(N,V,X){a.selectedPointStyle(N.selectAll("path"),V),R(N.selectAll("text"),V,X)}function R(N,V,X){N.each(function(k){var Z=i.select(this),B;if(k.selected){B=l.ensureUniformFontSize(X,T(Z,k,V,X));var J=V.selected.textfont&&V.selected.textfont.color;J&&(B.color=J),a.font(Z,B)}else a.selectedTextStyle(Z,V)})}function T(N,V,X,k){var Z=k._fullLayout.font,B=X.textfont;if(N.classed("bartext-inside")){var J=O(V,X);B=m(X,V.i,Z,J)}else N.classed("bartext-outside")&&(B=L(X,V.i,Z));return B}function C(N,V,X){return D(p,N.textfont,V,X)}function m(N,V,X,k){var Z=C(N,V,X),B=N._input.textfont===void 0||N._input.textfont.color===void 0||Array.isArray(N.textfont.color)&&N.textfont.color[V]===void 0;return B&&(Z={color:c.contrast(k),family:Z.family,size:Z.size,weight:Z.weight,style:Z.style,variant:Z.variant,textcase:Z.textcase,lineposition:Z.lineposition,shadow:Z.shadow}),D(o,N.insidetextfont,V,Z)}function L(N,V,X){var k=C(N,V,X);return D(y,N.outsidetextfont,V,k)}function D(N,V,X,k){V=V||{};var Z=_.getValue(V.family,X),B=_.getValue(V.size,X),J=_.getValue(V.color,X),ne=_.getValue(V.weight,X),oe=_.getValue(V.style,X),Y=_.getValue(V.variant,X),G=_.getValue(V.textcase,X),K=_.getValue(V.lineposition,X),ee=_.getValue(V.shadow,X);return{family:_.coerceString(N.family,Z,k.family),size:_.coerceNumber(N.size,B,k.size),color:_.coerceColor(N.color,J,k.color),weight:_.coerceString(N.weight,ne,k.weight),style:_.coerceString(N.style,oe,k.style),variant:_.coerceString(N.variant,Y,k.variant),textcase:_.coerceString(N.variant,G,k.textcase),lineposition:_.coerceString(N.variant,K,k.lineposition),shadow:_.coerceString(N.variant,ee,k.shadow)}}function O(N,V){return V.type==="waterfall"?V[N.dir].marker.color:N.mcc||N.mc||V.marker.color}f.exports={style:E,styleTextPoints:b,styleOnSelect:w,getInsideTextFont:m,getOutsideTextFont:L,getBarColor:O,resizeText:v}},5592:function(f,u,r){var i=r(6308),c=r(4288).hasColorscale,a=r(7260),l=r(3400).coercePattern;f.exports=function(v,d,p,o,y){var _=p("marker.color",o),E=c(v,"marker");E&&a(v,d,y,p,{prefix:"marker.",cLetter:"c"}),p("marker.line.color",i.defaultLine),c(v,"marker.line")&&a(v,d,y,p,{prefix:"marker.line.",cLetter:"c"}),p("marker.line.width"),p("marker.opacity"),l(p,"marker.pattern",_,E),p("selected.marker.color"),p("unselected.marker.color")}},2744:function(f,u,r){var i=r(3428),c=r(3400);function a(d,p,o){var y=d._fullLayout,_=y["_"+o+"Text_minsize"];if(_){var E=y.uniformtext.mode==="hide",M;switch(o){case"funnelarea":case"pie":case"sunburst":M="g.slice";break;case"treemap":case"icicle":M="g.slice, g.pathbar";break;default:M="g.points > g.point"}p.selectAll(M).each(function(b){var w=b.transform;if(w){w.scale=E&&w.hide?0:_/w.fontSize;var A=i.select(this).select("text");c.setTransormAndDisplay(A,w)}})}}function l(d,p,o){if(o.uniformtext.mode){var y=v(d),_=o.uniformtext.minsize,E=p.scale*p.fontSize;p.hide=E<_,o[y]=o[y]||1/0,p.hide||(o[y]=Math.min(o[y],Math.max(E,_)))}}function s(d,p){var o=v(d);p[o]=void 0}function v(d){return"_"+d+"Text_minsize"}f.exports={recordMinTextSize:l,clearMinTextSize:s,resizeText:a}},4996:function(f,u,r){var i=r(5464),c=r(6968).u,a=r(5376),l=r(2548),s=r(1776).Ks,v=r(1776).Gw,d=r(2880).extendFlat,p=r(8192).c,o=a({editType:"plot",arrayOk:!0,colorEditType:"plot"});f.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:p,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:d({},i.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:v({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:d({},o,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:d({},o,{}),outsidetextfont:d({},o,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:d({},o,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:c({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:d({},o,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},36:function(f,u,r){var i=r(7316);u.name="pie",u.plot=function(c,a,l,s){i.plotBasePlot(u.name,c,a,l,s)},u.clean=function(c,a,l,s){i.cleanBasePlot(u.name,c,a,l,s)}},5768:function(f,u,r){var i=r(8248),c=r(9760),a=r(6308),l={};function s(o,y){var _=[],E=o._fullLayout,M=E.hiddenlabels||[],b=y.labels,w=y.marker.colors||[],A=y.values,R=y._length,T=y._hasValues&&R,C,m;if(y.dlabel)for(b=new Array(R),C=0;C<R;C++)b[C]=String(y.label0+C*y.dlabel);var L={},D=v(E["_"+y.type+"colormap"]),O=0,N=!1;for(C=0;C<R;C++){var V,X,k;if(T){if(V=A[C],!i(V))continue;V=+V}else V=1;X=b[C],(X===void 0||X==="")&&(X=C),X=String(X);var Z=L[X];Z===void 0?(L[X]=_.length,k=M.indexOf(X)!==-1,k||(O+=V),_.push({v:V,label:X,color:D(w[C],X),i:C,pts:[C],hidden:k})):(N=!0,m=_[Z],m.v+=V,m.pts.push(C),m.hidden||(O+=V),m.color===!1&&w[C]&&(m.color=D(w[C],X)))}_=_.filter(function(J){return J.v>=0});var B=y.type==="funnelarea"?N:y.sort;return B&&_.sort(function(J,ne){return ne.v-J.v}),_[0]&&(_[0].vTotal=O),_}function v(o){return function(_,E){return!_||(_=c(_),!_.isValid())?!1:(_=a.addOpacity(_,_.getAlpha()),o[E]||(o[E]=_),_)}}function d(o,y){var _=(y||{}).type;_||(_="pie");var E=o._fullLayout,M=o.calcdata,b=E[_+"colorway"],w=E["_"+_+"colormap"];E["extend"+_+"colors"]&&(b=p(b,l));for(var A=0,R=0;R<M.length;R++){var T=M[R],C=T[0].trace.type;if(C===_)for(var m=0;m<T.length;m++){var L=T[m];L.color===!1&&(w[L.label]?L.color=w[L.label]:(w[L.label]=L.color=b[A%b.length],A++))}}}function p(o,y){var _,E=JSON.stringify(o),M=y[E];if(!M){for(M=o.slice(),_=0;_<o.length;_++)M.push(c(o[_]).lighten(20).toHexString());for(_=0;_<o.length;_++)M.push(c(o[_]).darken(20).toHexString());y[E]=M}return M}f.exports={calc:s,crossTraceCalc:d,makePullColorFn:v,generateExtendedColors:p}},4174:function(f,u,r){var i=r(8248),c=r(3400),a=r(4996),l=r(6968).Q,s=r(1508).handleText,v=r(3400).coercePattern;function d(y,_){var E=c.isArrayOrTypedArray(y),M=c.isArrayOrTypedArray(_),b=Math.min(E?y.length:1/0,M?_.length:1/0);if(isFinite(b)||(b=0),b&&M){for(var w,A=0;A<b;A++){var R=_[A];if(i(R)&&R>0){w=!0;break}}w||(b=0)}return{hasLabels:E,hasValues:M,len:b}}function p(y,_,E,M,b){var w=M("marker.line.width");w&&M("marker.line.color",b?void 0:E.paper_bgcolor);var A=M("marker.colors");v(M,"marker.pattern",A),y.marker&&!_.marker.pattern.fgcolor&&(_.marker.pattern.fgcolor=y.marker.colors),_.marker.pattern.bgcolor||(_.marker.pattern.bgcolor=E.paper_bgcolor)}function o(y,_,E,M){function b(Z,B){return c.coerce(y,_,a,Z,B)}var w=b("labels"),A=b("values"),R=d(w,A),T=R.len;if(_._hasLabels=R.hasLabels,_._hasValues=R.hasValues,!_._hasLabels&&_._hasValues&&(b("label0"),b("dlabel")),!T){_.visible=!1;return}_._length=T,p(y,_,M,b,!0),b("scalegroup");var C=b("text"),m=b("texttemplate"),L;if(m||(L=b("textinfo",c.isArrayOrTypedArray(C)?"text+percent":"percent")),b("hovertext"),b("hovertemplate"),m||L&&L!=="none"){var D=b("textposition");s(y,_,M,b,D,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var O=Array.isArray(D)||D==="auto",N=O||D==="outside";N&&b("automargin"),(D==="inside"||D==="auto"||Array.isArray(D))&&b("insidetextorientation")}else L==="none"&&b("textposition","none");l(_,M,b);var V=b("hole"),X=b("title.text");if(X){var k=b("title.position",V?"middle center":"top center");!V&&k==="middle center"&&(_.title.position="top center"),c.coerceFont(b,"title.font",M.font)}b("sort"),b("direction"),b("rotation"),b("pull")}f.exports={handleLabelsAndValues:d,handleMarkerDefaults:p,supplyDefaults:o}},3644:function(f,u,r){var i=r(624).appendArrayMultiPointValues;f.exports=function(a,l){var s={curveNumber:l.index,pointNumbers:a.pts,data:l._input,fullData:l,label:a.label,color:a.color,value:a.v,percent:a.percent,text:a.text,bbox:a.bbox,v:a.v};return a.pts.length===1&&(s.pointNumber=s.i=a.pts[0]),i(s,l,a.pts),l.type==="funnelarea"&&(delete s.v,delete s.i),s}},1552:function(f,u,r){var i=r(3616),c=r(6308);f.exports=function(l,s,v,d){var p=v.marker.pattern;p&&p.shape?i.pointStyle(l,v,d,s):c.fill(l,s.color)}},9656:function(f,u,r){var i=r(3400);function c(a){return a.indexOf("e")!==-1?a.replace(/[.]?0+e/,"e"):a.indexOf(".")!==-1?a.replace(/[.]?0+$/,""):a}u.formatPiePercent=function(l,s){var v=c((l*100).toPrecision(3));return i.numSeparate(v,s)+"%"},u.formatPieValue=function(l,s){var v=c(l.toPrecision(10));return i.numSeparate(v,s)},u.getFirstFilled=function(l,s){if(i.isArrayOrTypedArray(l))for(var v=0;v<s.length;v++){var d=l[s[v]];if(d||d===0||d==="")return d}},u.castOption=function(l,s){if(i.isArrayOrTypedArray(l))return u.getFirstFilled(l,s);if(l)return l},u.getRotationAngle=function(a){return(a==="auto"?0:a)*Math.PI/180}},5792:function(f,u,r){f.exports={attributes:r(4996),supplyDefaults:r(4174).supplyDefaults,supplyLayoutDefaults:r(248),layoutAttributes:r(5204),calc:r(5768).calc,crossTraceCalc:r(5768).crossTraceCalc,plot:r(7820).plot,style:r(2152),styleOne:r(528),moduleType:"trace",name:"pie",basePlotModule:r(36),categories:["pie-like","pie","showLegend"],meta:{}}},5204:function(f){f.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},248:function(f,u,r){var i=r(3400),c=r(5204);f.exports=function(l,s){function v(d,p){return i.coerce(l,s,c,d,p)}v("hiddenlabels"),v("piecolorway",s.colorway),v("extendpiecolors")}},7820:function(f,u,r){var i=r(3428),c=r(7316),a=r(3024),l=r(6308),s=r(3616),v=r(3400),d=v.strScale,p=v.strTranslate,o=r(2736),y=r(2744),_=y.recordMinTextSize,E=y.clearMinTextSize,M=r(8048).TEXTPAD,b=r(9656),w=r(3644),A=r(3400).isValidTextValue;function R(pe,ye){var U=pe._context.staticPlot,W=pe._fullLayout,j=W._size;E("pie",W),D(ye,pe),re(ye,j);var F=v.makeTraceGroups(W._pielayer,ye,"trace").each(function(P){var q=i.select(this),z=P[0],te=z.trace;ge(P),q.attr("stroke-linejoin","round"),q.each(function(){var ue=i.select(this).selectAll("g.slice").data(P);ue.enter().append("g").classed("slice",!0),ue.exit().remove();var ve=[[[],[]],[[],[]]],_e=!1;ue.each(function(be,ke){if(be.hidden){i.select(this).selectAll("path,g").remove();return}be.pointNumber=be.i,be.curveNumber=te.index,ve[be.pxmid[1]<0?0:1][be.pxmid[0]<0?0:1].push(be);var He=z.cx,Ke=z.cy,st=i.select(this),vt=st.selectAll("path.surface").data([be]);if(vt.enter().append("path").classed("surface",!0).style({"pointer-events":U?"none":"all"}),st.call(C,pe,P),te.pull){var pt=+b.castOption(te.pull,be.pts)||0;pt>0&&(He+=pt*be.pxmid[0],Ke+=pt*be.pxmid[1])}be.cxFinal=He,be.cyFinal=Ke;function ft(Et,Ue,De,Ie){var Fe=Ie*(Ue[0]-Et[0]),We=Ie*(Ue[1]-Et[1]);return"a"+Ie*z.r+","+Ie*z.r+" 0 "+be.largeArc+(De?" 1 ":" 0 ")+Fe+","+We}var lt=te.hole;if(be.v===z.vTotal){var Mt="M"+(He+be.px0[0])+","+(Ke+be.px0[1])+ft(be.px0,be.pxmid,!0,1)+ft(be.pxmid,be.px0,!0,1)+"Z";lt?vt.attr("d","M"+(He+lt*be.px0[0])+","+(Ke+lt*be.px0[1])+ft(be.px0,be.pxmid,!1,lt)+ft(be.pxmid,be.px0,!1,lt)+"Z"+Mt):vt.attr("d",Mt)}else{var ot=ft(be.px0,be.px1,!0,1);if(lt){var Ct=1-lt;vt.attr("d","M"+(He+lt*be.px1[0])+","+(Ke+lt*be.px1[1])+ft(be.px1,be.px0,!1,lt)+"l"+Ct*be.px0[0]+","+Ct*be.px0[1]+ot+"Z")}else vt.attr("d","M"+He+","+Ke+"l"+be.px0[0]+","+be.px0[1]+ot+"Z")}Se(pe,be,z);var kt=b.castOption(te.textposition,be.pts),St=st.selectAll("g.slicetext").data(be.text&&kt!=="none"?[0]:[]);St.enter().append("g").classed("slicetext",!0),St.exit().remove(),St.each(function(){var Et=v.ensureSingle(i.select(this),"text","",function(he){he.attr("data-notex",1)}),Ue=v.ensureUniformFontSize(pe,kt==="outside"?m(te,be,W.font):L(te,be,W.font));Et.text(be.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(s.font,Ue).call(o.convertToTspans,pe);var De=s.bBox(Et.node()),Ie;if(kt==="outside")Ie=ne(De,be);else if(Ie=O(De,be,z),kt==="auto"&&Ie.scale<1){var Fe=v.ensureUniformFontSize(pe,te.outsidetextfont);Et.call(s.font,Fe),De=s.bBox(Et.node()),Ie=ne(De,be)}var We=Ie.textPosAngle,de=We===void 0?be.pxmid:xe(z.r,We);if(Ie.targetX=He+de[0]*Ie.rCenter+(Ie.x||0),Ie.targetY=Ke+de[1]*Ie.rCenter+(Ie.y||0),ce(Ie,De),Ie.outside){var Me=Ie.targetY;be.yLabelMin=Me-De.height/2,be.yLabelMid=Me,be.yLabelMax=Me+De.height/2,be.labelExtraX=0,be.labelExtraY=0,_e=!0}Ie.fontSize=Ue.size,_(te.type,Ie,W),P[ke].transform=Ie,v.setTransormAndDisplay(Et,Ie)})});var Re=i.select(this).selectAll("g.titletext").data(te.title.text?[0]:[]);if(Re.enter().append("g").classed("titletext",!0),Re.exit().remove(),Re.each(function(){var be=v.ensureSingle(i.select(this),"text","",function(Ke){Ke.attr("data-notex",1)}),ke=te.title.text;te._meta&&(ke=v.templateString(ke,te._meta)),be.text(ke).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(s.font,te.title.font).call(o.convertToTspans,pe);var He;te.title.position==="middle center"?He=oe(z):He=Y(z,j),be.attr("transform",p(He.x,He.y)+d(Math.min(1,He.scale))+p(He.tx,He.ty))}),_e&&ie(ve,te),T(ue,te),_e&&te.automargin){var Le=s.bBox(q.node()),Ve=te.domain,Xe=j.w*(Ve.x[1]-Ve.x[0]),Ze=j.h*(Ve.y[1]-Ve.y[0]),Te=(.5*Xe-z.r)/j.w,we=(.5*Ze-z.r)/j.h;c.autoMargin(pe,"pie."+te.uid+".automargin",{xl:Ve.x[0]-Te,xr:Ve.x[1]+Te,yb:Ve.y[0]-we,yt:Ve.y[1]+we,l:Math.max(z.cx-z.r-Le.left,0),r:Math.max(Le.right-(z.cx+z.r),0),b:Math.max(Le.bottom-(z.cy+z.r),0),t:Math.max(z.cy-z.r-Le.top,0),pad:5})}})});setTimeout(function(){F.selectAll("tspan").each(function(){var P=i.select(this);P.attr("dy")&&P.attr("dy",P.attr("dy"))})},0)}function T(pe,ye){pe.each(function(U){var W=i.select(this);if(!U.labelExtraX&&!U.labelExtraY){W.select("path.textline").remove();return}var j=W.select("g.slicetext text");U.transform.targetX+=U.labelExtraX,U.transform.targetY+=U.labelExtraY,v.setTransormAndDisplay(j,U.transform);var F=U.cxFinal+U.pxmid[0],P=U.cyFinal+U.pxmid[1],q="M"+F+","+P,z=(U.yLabelMax-U.yLabelMin)*(U.pxmid[0]<0?-1:1)/4;if(U.labelExtraX){var te=U.labelExtraX*U.pxmid[1]/U.pxmid[0],ue=U.yLabelMid+U.labelExtraY-(U.cyFinal+U.pxmid[1]);Math.abs(te)>Math.abs(ue)?q+="l"+ue*U.pxmid[0]/U.pxmid[1]+","+ue+"H"+(F+U.labelExtraX+z):q+="l"+U.labelExtraX+","+te+"v"+(ue-te)+"h"+z}else q+="V"+(U.yLabelMid+U.labelExtraY)+"h"+z;v.ensureSingle(W,"path","textline").call(l.stroke,ye.outsidetextfont.color).attr({"stroke-width":Math.min(2,ye.outsidetextfont.size/8),d:q,fill:"none"})})}function C(pe,ye,U){var W=U[0],j=W.cx,F=W.cy,P=W.trace,q=P.type==="funnelarea";"_hasHoverLabel"in P||(P._hasHoverLabel=!1),"_hasHoverEvent"in P||(P._hasHoverEvent=!1),pe.on("mouseover",function(z){var te=ye._fullLayout,ue=ye._fullData[P.index];if(!(ye._dragging||te.hovermode===!1)){var ve=ue.hoverinfo;if(Array.isArray(ve)&&(ve=a.castHoverinfo({hoverinfo:[b.castOption(ve,z.pts)],_module:P._module},te,0)),ve==="all"&&(ve="label+text+value+percent+name"),ue.hovertemplate||ve!=="none"&&ve!=="skip"&&ve){var _e=z.rInscribed||0,Re=j+z.pxmid[0]*(1-_e),Le=F+z.pxmid[1]*(1-_e),Ve=te.separators,Xe=[];if(ve&&ve.indexOf("label")!==-1&&Xe.push(z.label),z.text=b.castOption(ue.hovertext||ue.text,z.pts),ve&&ve.indexOf("text")!==-1){var Ze=z.text;v.isValidTextValue(Ze)&&Xe.push(Ze)}z.value=z.v,z.valueLabel=b.formatPieValue(z.v,Ve),ve&&ve.indexOf("value")!==-1&&Xe.push(z.valueLabel),z.percent=z.v/W.vTotal,z.percentLabel=b.formatPiePercent(z.percent,Ve),ve&&ve.indexOf("percent")!==-1&&Xe.push(z.percentLabel);var Te=ue.hoverlabel,we=Te.font,be=[];a.loneHover({trace:P,x0:Re-_e*W.r,x1:Re+_e*W.r,y:Le,_x0:q?j+z.TL[0]:Re-_e*W.r,_x1:q?j+z.TR[0]:Re+_e*W.r,_y0:q?F+z.TL[1]:Le-_e*W.r,_y1:q?F+z.BL[1]:Le+_e*W.r,text:Xe.join("<br>"),name:ue.hovertemplate||ve.indexOf("name")!==-1?ue.name:void 0,idealAlign:z.pxmid[0]<0?"left":"right",color:b.castOption(Te.bgcolor,z.pts)||z.color,borderColor:b.castOption(Te.bordercolor,z.pts),fontFamily:b.castOption(we.family,z.pts),fontSize:b.castOption(we.size,z.pts),fontColor:b.castOption(we.color,z.pts),nameLength:b.castOption(Te.namelength,z.pts),textAlign:b.castOption(Te.align,z.pts),hovertemplate:b.castOption(ue.hovertemplate,z.pts),hovertemplateLabels:z,eventData:[w(z,ue)]},{container:te._hoverlayer.node(),outerContainer:te._paper.node(),gd:ye,inOut_bbox:be}),z.bbox=be[0],P._hasHoverLabel=!0}P._hasHoverEvent=!0,ye.emit("plotly_hover",{points:[w(z,ue)],event:i.event})}}),pe.on("mouseout",function(z){var te=ye._fullLayout,ue=ye._fullData[P.index],ve=i.select(this).datum();P._hasHoverEvent&&(z.originalEvent=i.event,ye.emit("plotly_unhover",{points:[w(ve,ue)],event:i.event}),P._hasHoverEvent=!1),P._hasHoverLabel&&(a.loneUnhover(te._hoverlayer.node()),P._hasHoverLabel=!1)}),pe.on("click",function(z){var te=ye._fullLayout,ue=ye._fullData[P.index];ye._dragging||te.hovermode===!1||(ye._hoverdata=[w(z,ue)],a.click(ye,i.event))})}function m(pe,ye,U){var W=b.castOption(pe.outsidetextfont.color,ye.pts)||b.castOption(pe.textfont.color,ye.pts)||U.color,j=b.castOption(pe.outsidetextfont.family,ye.pts)||b.castOption(pe.textfont.family,ye.pts)||U.family,F=b.castOption(pe.outsidetextfont.size,ye.pts)||b.castOption(pe.textfont.size,ye.pts)||U.size,P=b.castOption(pe.outsidetextfont.weight,ye.pts)||b.castOption(pe.textfont.weight,ye.pts)||U.weight,q=b.castOption(pe.outsidetextfont.style,ye.pts)||b.castOption(pe.textfont.style,ye.pts)||U.style,z=b.castOption(pe.outsidetextfont.variant,ye.pts)||b.castOption(pe.textfont.variant,ye.pts)||U.variant,te=b.castOption(pe.outsidetextfont.textcase,ye.pts)||b.castOption(pe.textfont.textcase,ye.pts)||U.textcase,ue=b.castOption(pe.outsidetextfont.lineposition,ye.pts)||b.castOption(pe.textfont.lineposition,ye.pts)||U.lineposition,ve=b.castOption(pe.outsidetextfont.shadow,ye.pts)||b.castOption(pe.textfont.shadow,ye.pts)||U.shadow;return{color:W,family:j,size:F,weight:P,style:q,variant:z,textcase:te,lineposition:ue,shadow:ve}}function L(pe,ye,U){var W=b.castOption(pe.insidetextfont.color,ye.pts);!W&&pe._input.textfont&&(W=b.castOption(pe._input.textfont.color,ye.pts));var j=b.castOption(pe.insidetextfont.family,ye.pts)||b.castOption(pe.textfont.family,ye.pts)||U.family,F=b.castOption(pe.insidetextfont.size,ye.pts)||b.castOption(pe.textfont.size,ye.pts)||U.size,P=b.castOption(pe.insidetextfont.weight,ye.pts)||b.castOption(pe.textfont.weight,ye.pts)||U.weight,q=b.castOption(pe.insidetextfont.style,ye.pts)||b.castOption(pe.textfont.style,ye.pts)||U.style,z=b.castOption(pe.insidetextfont.variant,ye.pts)||b.castOption(pe.textfont.variant,ye.pts)||U.variant,te=b.castOption(pe.insidetextfont.textcase,ye.pts)||b.castOption(pe.textfont.textcase,ye.pts)||U.textcase,ue=b.castOption(pe.insidetextfont.lineposition,ye.pts)||b.castOption(pe.textfont.lineposition,ye.pts)||U.lineposition,ve=b.castOption(pe.insidetextfont.shadow,ye.pts)||b.castOption(pe.textfont.shadow,ye.pts)||U.shadow;return{color:W||l.contrast(ye.color),family:j,size:F,weight:P,style:q,variant:z,textcase:te,lineposition:ue,shadow:ve}}function D(pe,ye){for(var U,W,j=0;j<pe.length;j++)if(U=pe[j][0],W=U.trace,W.title.text){var F=W.title.text;W._meta&&(F=v.templateString(F,W._meta));var P=s.tester.append("text").attr("data-notex",1).text(F).call(s.font,W.title.font).call(o.convertToTspans,ye),q=s.bBox(P.node(),!0);U.titleBox={width:q.width,height:q.height},P.remove()}}function O(pe,ye,U){var W=U.r||ye.rpx1,j=ye.rInscribed,F=ye.startangle===ye.stopangle;if(F)return{rCenter:1-j,scale:0,rotate:0,textPosAngle:0};var P=ye.ring,q=P===1&&Math.abs(ye.startangle-ye.stopangle)===Math.PI*2,z=ye.halfangle,te=ye.midangle,ue=U.trace.insidetextorientation,ve=ue==="horizontal",_e=ue==="tangential",Re=ue==="radial",Le=ue==="auto",Ve=[],Xe;if(!Le){var Ze=function(st,vt){if(N(ye,st)){var pt=Math.abs(st-ye.startangle),ft=Math.abs(st-ye.stopangle),lt=pt<ft?pt:ft;vt==="tan"?Xe=X(pe,W,P,lt,0):Xe=V(pe,W,P,lt,Math.PI/2),Xe.textPosAngle=st,Ve.push(Xe)}},Te;if(ve||_e){for(Te=4;Te>=-4;Te-=2)Ze(Math.PI*Te,"tan");for(Te=4;Te>=-4;Te-=2)Ze(Math.PI*(Te+1),"tan")}if(ve||Re){for(Te=4;Te>=-4;Te-=2)Ze(Math.PI*(Te+1.5),"rad");for(Te=4;Te>=-4;Te-=2)Ze(Math.PI*(Te+.5),"rad")}}if(q||Le||ve){var we=Math.sqrt(pe.width*pe.width+pe.height*pe.height);if(Xe={scale:j*W*2/we,rCenter:1-j,rotate:0},Xe.textPosAngle=(ye.startangle+ye.stopangle)/2,Xe.scale>=1)return Xe;Ve.push(Xe)}(Le||Re)&&(Xe=V(pe,W,P,z,te),Xe.textPosAngle=(ye.startangle+ye.stopangle)/2,Ve.push(Xe)),(Le||_e)&&(Xe=X(pe,W,P,z,te),Xe.textPosAngle=(ye.startangle+ye.stopangle)/2,Ve.push(Xe));for(var be=0,ke=0,He=0;He<Ve.length;He++){var Ke=Ve[He].scale;if(ke<Ke&&(ke=Ke,be=He),!Le&&ke>=1)break}return Ve[be]}function N(pe,ye){var U=pe.startangle,W=pe.stopangle;return U>ye&&ye>W||U<ye&&ye<W}function V(pe,ye,U,W,j){ye=Math.max(0,ye-2*M);var F=pe.width/pe.height,P=B(F,W,ye,U);return{scale:P*2/pe.height,rCenter:k(F,P/ye),rotate:Z(j)}}function X(pe,ye,U,W,j){ye=Math.max(0,ye-2*M);var F=pe.height/pe.width,P=B(F,W,ye,U);return{scale:P*2/pe.width,rCenter:k(F,P/ye),rotate:Z(j+Math.PI/2)}}function k(pe,ye){return Math.cos(ye)-pe*ye}function Z(pe){return(180/Math.PI*pe+720)%180-90}function B(pe,ye,U,W){var j=pe+1/(2*Math.tan(ye));return U*Math.min(1/(Math.sqrt(j*j+.5)+j),W/(Math.sqrt(pe*pe+W/2)+pe))}function J(pe,ye){return pe.v===ye.vTotal&&!ye.trace.hole?1:Math.min(1/(1+1/Math.sin(pe.halfangle)),pe.ring/2)}function ne(pe,ye){var U=ye.pxmid[0],W=ye.pxmid[1],j=pe.width/2,F=pe.height/2;return U<0&&(j*=-1),W<0&&(F*=-1),{scale:1,rCenter:1,rotate:0,x:j+Math.abs(F)*(j>0?1:-1)/2,y:F/(1+U*U/(W*W)),outside:!0}}function oe(pe){var ye=Math.sqrt(pe.titleBox.width*pe.titleBox.width+pe.titleBox.height*pe.titleBox.height);return{x:pe.cx,y:pe.cy,scale:pe.trace.hole*pe.r*2/ye,tx:0,ty:-pe.titleBox.height/2+pe.trace.title.font.size}}function Y(pe,ye){var U=1,W=1,j,F=pe.trace,P={x:pe.cx,y:pe.cy},q={tx:0,ty:0};q.ty+=F.title.font.size,j=ee(F),F.title.position.indexOf("top")!==-1?(P.y-=(1+j)*pe.r,q.ty-=pe.titleBox.height):F.title.position.indexOf("bottom")!==-1&&(P.y+=(1+j)*pe.r);var z=G(pe.r,pe.trace.aspectratio),te=ye.w*(F.domain.x[1]-F.domain.x[0])/2;return F.title.position.indexOf("left")!==-1?(te=te+z,P.x-=(1+j)*z,q.tx+=pe.titleBox.width/2):F.title.position.indexOf("center")!==-1?te*=2:F.title.position.indexOf("right")!==-1&&(te=te+z,P.x+=(1+j)*z,q.tx-=pe.titleBox.width/2),U=te/pe.titleBox.width,W=K(pe,ye)/pe.titleBox.height,{x:P.x,y:P.y,scale:Math.min(U,W),tx:q.tx,ty:q.ty}}function G(pe,ye){return pe/(ye===void 0?1:ye)}function K(pe,ye){var U=pe.trace,W=ye.h*(U.domain.y[1]-U.domain.y[0]);return Math.min(pe.titleBox.height,W/2)}function ee(pe){var ye=pe.pull;if(!ye)return 0;var U;if(v.isArrayOrTypedArray(ye))for(ye=0,U=0;U<pe.pull.length;U++)pe.pull[U]>ye&&(ye=pe.pull[U]);return ye}function ie(pe,ye){var U,W,j,F,P,q,z,te,ue,ve,_e,Re,Le;function Ve(we,be){return we.pxmid[1]-be.pxmid[1]}function Xe(we,be){return be.pxmid[1]-we.pxmid[1]}function Ze(we,be){be||(be={});var ke=be.labelExtraY+(W?be.yLabelMax:be.yLabelMin),He=W?we.yLabelMin:we.yLabelMax,Ke=W?we.yLabelMax:we.yLabelMin,st=we.cyFinal+P(we.px0[1],we.px1[1]),vt=ke-He,pt,ft,lt,Mt,ot,Ct;if(vt*z>0&&(we.labelExtraY=vt),!!v.isArrayOrTypedArray(ye.pull))for(ft=0;ft<ve.length;ft++)lt=ve[ft],!(lt===we||(b.castOption(ye.pull,we.pts)||0)>=(b.castOption(ye.pull,lt.pts)||0))&&((we.pxmid[1]-lt.pxmid[1])*z>0?(Mt=lt.cyFinal+P(lt.px0[1],lt.px1[1]),vt=Mt-He-we.labelExtraY,vt*z>0&&(we.labelExtraY+=vt)):(Ke+we.labelExtraY-st)*z>0&&(pt=3*q*Math.abs(ft-ve.indexOf(we)),ot=lt.cxFinal+F(lt.px0[0],lt.px1[0]),Ct=ot+pt-(we.cxFinal+we.pxmid[0])-we.labelExtraX,Ct*q>0&&(we.labelExtraX+=Ct)))}for(W=0;W<2;W++)for(j=W?Ve:Xe,P=W?Math.max:Math.min,z=W?1:-1,U=0;U<2;U++){for(F=U?Math.max:Math.min,q=U?1:-1,te=pe[W][U],te.sort(j),ue=pe[1-W][U],ve=ue.concat(te),Re=[],_e=0;_e<te.length;_e++)te[_e].yLabelMid!==void 0&&Re.push(te[_e]);for(Le=!1,_e=0;W&&_e<ue.length;_e++)if(ue[_e].yLabelMid!==void 0){Le=ue[_e];break}for(_e=0;_e<Re.length;_e++){var Te=_e&&Re[_e-1];Le&&!_e&&(Te=Le),Ze(Re[_e],Te)}}}function re(pe,ye){for(var U=[],W=0;W<pe.length;W++){var j=pe[W][0],F=j.trace,P=F.domain,q=ye.w*(P.x[1]-P.x[0]),z=ye.h*(P.y[1]-P.y[0]);F.title.text&&F.title.position!=="middle center"&&(z-=K(j,ye));var te=q/2,ue=z/2;F.type==="funnelarea"&&!F.scalegroup&&(ue/=F.aspectratio),j.r=Math.min(te,ue)/(1+ee(F)),j.cx=ye.l+ye.w*(F.domain.x[1]+F.domain.x[0])/2,j.cy=ye.t+ye.h*(1-F.domain.y[0])-z/2,F.title.text&&F.title.position.indexOf("bottom")!==-1&&(j.cy-=K(j,ye)),F.scalegroup&&U.indexOf(F.scalegroup)===-1&&U.push(F.scalegroup)}se(pe,U)}function se(pe,ye){for(var U,W,j,F=0;F<ye.length;F++){var P=1/0,q=ye[F];for(W=0;W<pe.length;W++)if(U=pe[W][0],j=U.trace,j.scalegroup===q){var z;if(j.type==="pie")z=U.r*U.r;else if(j.type==="funnelarea"){var te,ue;j.aspectratio>1?(te=U.r,ue=te/j.aspectratio):(ue=U.r,te=ue*j.aspectratio),te*=(1+j.baseratio)/2,z=te*ue}P=Math.min(P,z/U.vTotal)}for(W=0;W<pe.length;W++)if(U=pe[W][0],j=U.trace,j.scalegroup===q){var ve=P*U.vTotal;j.type==="funnelarea"&&(ve/=(1+j.baseratio)/2,ve/=j.aspectratio),U.r=Math.sqrt(ve)}}}function ge(pe){var ye=pe[0],U=ye.r,W=ye.trace,j=b.getRotationAngle(W.rotation),F=2*Math.PI/ye.vTotal,P="px0",q="px1",z,te,ue;if(W.direction==="counterclockwise"){for(z=0;z<pe.length&&pe[z].hidden;z++);if(z===pe.length)return;j+=F*pe[z].v,F*=-1,P="px1",q="px0"}for(ue=xe(U,j),z=0;z<pe.length;z++)te=pe[z],!te.hidden&&(te[P]=ue,te.startangle=j,j+=F*te.v/2,te.pxmid=xe(U,j),te.midangle=j,j+=F*te.v/2,ue=xe(U,j),te.stopangle=j,te[q]=ue,te.largeArc=te.v>ye.vTotal/2?1:0,te.halfangle=Math.PI*Math.min(te.v/ye.vTotal,.5),te.ring=1-W.hole,te.rInscribed=J(te,ye))}function xe(pe,ye){return[pe*Math.sin(ye),-pe*Math.cos(ye)]}function Se(pe,ye,U){var W=pe._fullLayout,j=U.trace,F=j.texttemplate,P=j.textinfo;if(!F&&P&&P!=="none"){var q=P.split("+"),z=function(be){return q.indexOf(be)!==-1},te=z("label"),ue=z("text"),ve=z("value"),_e=z("percent"),Re=W.separators,Le;if(Le=te?[ye.label]:[],ue){var Ve=b.getFirstFilled(j.text,ye.pts);A(Ve)&&Le.push(Ve)}ve&&Le.push(b.formatPieValue(ye.v,Re)),_e&&Le.push(b.formatPiePercent(ye.v/U.vTotal,Re)),ye.text=Le.join("<br>")}function Xe(be){return{label:be.label,value:be.v,valueLabel:b.formatPieValue(be.v,W.separators),percent:be.v/U.vTotal,percentLabel:b.formatPiePercent(be.v/U.vTotal,W.separators),color:be.color,text:be.text,customdata:v.castOption(j,be.i,"customdata")}}if(F){var Ze=v.castOption(j,ye.i,"texttemplate");if(!Ze)ye.text="";else{var Te=Xe(ye),we=b.getFirstFilled(j.text,ye.pts);(A(we)||we==="")&&(Te.text=we),ye.text=v.texttemplateString(Ze,Te,pe._fullLayout._d3locale,Te,j._meta||{})}}}function ce(pe,ye){var U=pe.rotate*Math.PI/180,W=Math.cos(U),j=Math.sin(U),F=(ye.left+ye.right)/2,P=(ye.top+ye.bottom)/2;pe.textX=F*W-P*j,pe.textY=F*j+P*W,pe.noCenter=!0}f.exports={plot:R,formatSliceLabel:Se,transformInsideText:O,determineInsideTextFont:L,positionTitleOutside:Y,prerenderTitles:D,layoutAreas:re,attachFxHandlers:C,computeTransform:ce}},2152:function(f,u,r){var i=r(3428),c=r(528),a=r(2744).resizeText;f.exports=function(s){var v=s._fullLayout._pielayer.selectAll(".trace");a(s,v,"pie"),v.each(function(d){var p=d[0],o=p.trace,y=i.select(this);y.style({opacity:o.opacity}),y.selectAll("path.surface").each(function(_){i.select(this).call(c,_,o,s)})})}},528:function(f,u,r){var i=r(6308),c=r(9656).castOption,a=r(1552);f.exports=function(s,v,d,p){var o=d.marker.line,y=c(o.color,v.pts)||i.defaultLine,_=c(o.width,v.pts)||0;s.call(a,v,d,p).style("stroke-width",_).call(i.stroke,y)}},148:function(f,u,r){var i=r(3400);f.exports=function(a,l){for(var s=0;s<a.length;s++)a[s].i=s;i.mergeArray(l.text,a,"tx"),i.mergeArray(l.texttemplate,a,"txt"),i.mergeArray(l.hovertext,a,"htx"),i.mergeArray(l.customdata,a,"data"),i.mergeArray(l.textposition,a,"tp"),l.textfont&&(i.mergeArrayCastPositive(l.textfont.size,a,"ts"),i.mergeArray(l.textfont.color,a,"tc"),i.mergeArray(l.textfont.family,a,"tf"),i.mergeArray(l.textfont.weight,a,"tw"),i.mergeArray(l.textfont.style,a,"ty"),i.mergeArray(l.textfont.variant,a,"tv"),i.mergeArray(l.textfont.textcase,a,"tC"),i.mergeArray(l.textfont.lineposition,a,"tE"),i.mergeArray(l.textfont.shadow,a,"tS"));var v=l.marker;if(v){i.mergeArrayCastPositive(v.size,a,"ms"),i.mergeArrayCastPositive(v.opacity,a,"mo"),i.mergeArray(v.symbol,a,"mx"),i.mergeArray(v.angle,a,"ma"),i.mergeArray(v.standoff,a,"mf"),i.mergeArray(v.color,a,"mc");var d=v.line;v.line&&(i.mergeArray(d.color,a,"mlc"),i.mergeArrayCastPositive(d.width,a,"mlw"));var p=v.gradient;p&&p.type!=="none"&&(i.mergeArray(p.type,a,"mgt"),i.mergeArray(p.color,a,"mgc"))}}},2904:function(f,u,r){var i=r(9736).axisHoverFormat,c=r(1776).Gw,a=r(1776).Ks,l=r(9084),s=r(5376),v=r(8192).u,d=r(8192).c,p=r(3616),o=r(8200),y=r(2880).extendFlat,_=r(3544);function E(w){return{valType:"any",dflt:0,editType:"calc"}}function M(w){return{valType:"any",editType:"calc"}}function b(w){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}f.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:E(),yperiod:E(),xperiod0:M(),yperiod0:M(),xperiodalignment:b(),yperiodalignment:b(),xhoverformat:i("x"),yhoverformat:i("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:c({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:a({},{keys:o.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:y({},v,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:_(!0),fillgradient:y({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:d,marker:y({symbol:{valType:"enumerated",values:p.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:y({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},l("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},l("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:s({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},6356:function(f,u,r){var i=r(8248),c=r(3400),a=r(4460),l=r(1220),s=r(9032).BADNUM,v=r(3028),d=r(136),p=r(148),o=r(4500);function y(A,R){var T=A._fullLayout,C=R._xA=a.getFromId(A,R.xaxis||"x","x"),m=R._yA=a.getFromId(A,R.yaxis||"y","y"),L=C.makeCalcdata(R,"x"),D=m.makeCalcdata(R,"y"),O=l(R,C,"x",L),N=l(R,m,"y",D),V=O.vals,X=N.vals,k=R._length,Z=new Array(k),B=R.ids,J=w(R,T,C,m),ne=!1,oe,Y,G,K,ee,ie;M(T,R);var re="x",se="y",ge;if(J)c.pushUnique(J.traceIndices,R._expandedIndex),oe=J.orientation==="v",oe?(se="s",ge="x"):(re="s",ge="y"),ee=J.stackgaps==="interpolate";else{var xe=E(R,k);_(A,R,C,m,V,X,xe)}var Se=!!R.xperiodalignment,ce=!!R.yperiodalignment;for(Y=0;Y<k;Y++){var pe=Z[Y]={},ye=i(V[Y]),U=i(X[Y]);ye&&U?(pe[re]=V[Y],pe[se]=X[Y],Se&&(pe.orig_x=L[Y],pe.xEnd=O.ends[Y],pe.xStart=O.starts[Y]),ce&&(pe.orig_y=D[Y],pe.yEnd=N.ends[Y],pe.yStart=N.starts[Y])):J&&(oe?ye:U)?(pe[ge]=oe?V[Y]:X[Y],pe.gap=!0,ee?(pe.s=s,ne=!0):pe.s=0):pe[re]=pe[se]=s,B&&(pe.id=String(B[Y]))}if(p(Z,R),d(A,R),o(Z,R),J){for(Y=0;Y<Z.length;)Z[Y][ge]===s?Z.splice(Y,1):Y++;if(c.sort(Z,function(P,q){return P[ge]-q[ge]||P.i-q.i}),ne){for(Y=0;Y<Z.length-1&&Z[Y].gap;)Y++;for(ie=Z[Y].s,ie||(ie=Z[Y].s=0),G=0;G<Y;G++)Z[G].s=ie;for(K=Z.length-1;K>Y&&Z[K].gap;)K--;for(ie=Z[K].s,G=Z.length-1;G>K;G--)Z[G].s=ie;for(;Y<K;)if(Y++,Z[Y].gap){for(G=Y+1;Z[G].gap;)G++;for(var W=Z[Y-1][ge],j=Z[Y-1].s,F=(Z[G].s-j)/(Z[G][ge]-W);Y<G;)Z[Y].s=j+(Z[Y][ge]-W)*F,Y++}}}return Z}function _(A,R,T,C,m,L,D){var O=R._length,N=A._fullLayout,V=T._id,X=C._id,k=N._firstScatter[b(R)]===R.uid,Z=(w(R,N,T,C)||{}).orientation,B=R.fill;T._minDtick=0,C._minDtick=0;var J={padded:!0},ne={padded:!0};D&&(J.ppad=ne.ppad=D);var oe=O<2||m[0]!==m[O-1]||L[0]!==L[O-1];oe&&(B==="tozerox"||B==="tonextx"&&(k||Z==="h"))?J.tozero=!0:!(R.error_y||{}).visible&&(B==="tonexty"||B==="tozeroy"||!v.hasMarkers(R)&&!v.hasText(R))&&(J.padded=!1,J.ppad=0),oe&&(B==="tozeroy"||B==="tonexty"&&(k||Z==="v"))?ne.tozero=!0:(B==="tonextx"||B==="tozerox")&&(ne.padded=!1),V&&(R._extremes[V]=a.findExtremes(T,m,J)),X&&(R._extremes[X]=a.findExtremes(C,L,ne))}function E(A,R){if(v.hasMarkers(A)){var T=A.marker,C=1.6*(A.marker.sizeref||1),m;if(A.marker.sizemode==="area"?m=function(V){return Math.max(Math.sqrt((V||0)/C),3)}:m=function(V){return Math.max((V||0)/C,3)},c.isArrayOrTypedArray(T.size)){var L={type:"linear"};a.setConvert(L);for(var D=L.makeCalcdata(A.marker,"size"),O=new Array(R),N=0;N<R;N++)O[N]=m(D[N]);return O}else return m(T.size)}}function M(A,R){var T=b(R),C=A._firstScatter;C[T]||(C[T]=R.uid)}function b(A){var R=A.stackgroup;return A.xaxis+A.yaxis+A.type+(R?"-"+R:"")}function w(A,R,T,C){var m=A.stackgroup;if(m){var L=R._scatterStackOpts[T._id+C._id][m],D=L.orientation==="v"?C:T;if(D.type==="linear"||D.type==="log")return L}}f.exports={calc:y,calcMarkerSize:E,calcAxisExpansion:_,setFirstScatter:M,getStackOpts:w}},4500:function(f,u,r){var i=r(3400);f.exports=function(a,l){i.isArrayOrTypedArray(l.selectedpoints)&&i.tagSelected(a,l)}},136:function(f,u,r){var i=r(4288).hasColorscale,c=r(7128),a=r(3028);f.exports=function(s,v){a.hasLines(v)&&i(v,"line")&&c(s,v,{vals:v.line.color,containerStr:"line",cLetter:"c"}),a.hasMarkers(v)&&(i(v,"marker")&&c(s,v,{vals:v.marker.color,containerStr:"marker",cLetter:"c"}),i(v,"marker.line")&&c(s,v,{vals:v.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},8200:function(f){f.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},6664:function(f,u,r){var i=r(6356),c=r(6376).setGroupPositions;function a(v,d){for(var p=d.xaxis,o=d.yaxis,y=v._fullLayout,_=v._fullData,E=v.calcdata,M=[],b=[],w=0;w<_.length;w++){var A=_[w];A.visible===!0&&A.type==="scatter"&&A.xaxis===p._id&&A.yaxis===o._id&&(A.orientation==="h"?M.push(E[w]):A.orientation==="v"&&b.push(E[w]))}var R={mode:y.scattermode,gap:y.scattergap};c(v,p,o,b,R),c(v,o,p,M,R)}f.exports=function(d,p){d._fullLayout.scattermode==="group"&&a(d,p);var o=p.xaxis,y=p.yaxis,_=o._id+y._id,E=d._fullLayout._scatterStackOpts[_];if(E){var M=d.calcdata,b,w,A,R,T,C,m,L,D,O,N,V,X,k,Z;for(var B in E){O=E[B];var J=O.traceIndices;if(J.length){for(N=O.stackgaps==="interpolate",V=O.groupnorm,O.orientation==="v"?(X="x",k="y"):(X="y",k="x"),Z=new Array(J.length),b=0;b<Z.length;b++)Z[b]=!1;C=M[J[0]];var ne=new Array(C.length);for(b=0;b<C.length;b++)ne[b]=C[b][X];for(b=1;b<J.length;b++){for(T=M[J[b]],w=A=0;w<T.length;w++){for(m=T[w][X];m>ne[A]&&A<ne.length;A++)l(T,w,ne[A],b,Z,N,X),w++;if(m!==ne[A]){for(R=0;R<b;R++)l(M[J[R]],A,m,R,Z,N,X);ne.splice(A,0,m)}A++}for(;A<ne.length;A++)l(T,w,ne[A],b,Z,N,X),w++}var oe=ne.length;for(w=0;w<C.length;w++){for(L=C[w][k]=C[w].s,b=1;b<J.length;b++)T=M[J[b]],T[0].trace._rawLength=T[0].trace._length,T[0].trace._length=oe,L+=T[w].s,T[w][k]=L;if(V)for(D=(V==="fraction"?L:L/100)||1,b=0;b<J.length;b++){var Y=M[J[b]][w];Y[k]/=D,Y.sNorm=Y.s/D}}for(b=0;b<J.length;b++){T=M[J[b]];var G=T[0].trace,K=i.calcMarkerSize(G,G._rawLength),ee=Array.isArray(K);if(K&&Z[b]||ee){var ie=K;for(K=new Array(oe),w=0;w<oe;w++)K[w]=T[w].gap?0:ee?ie[T[w].i]:ie}var re=new Array(oe),se=new Array(oe);for(w=0;w<oe;w++)re[w]=T[w].x,se[w]=T[w].y;i.calcAxisExpansion(d,G,o,y,re,se,K),T[0].t.orientation=O.orientation}}}}};function l(v,d,p,o,y,_,E){y[o]=!0;var M={i:null,gap:!0,s:0};if(M[E]=p,v.splice(d,0,M),d&&p===v[d-1][E]){var b=v[d-1];M.s=b.s,M.i=b.i,M.gap=b.gap}else _&&(M.s=s(v,d,p,E));d||(v[0].t=v[1].t,v[0].trace=v[1].trace,delete v[1].t,delete v[1].trace)}function s(v,d,p,o){var y=v[d-1],_=v[d+1];return _?y?y.s+(_.s-y.s)*(p-y[o])/(_[o]-y[o]):_.s:y.s}},5036:function(f,u,r){var i=r(3400),c=r(11),a=r(2904);f.exports=function(s,v){var d,p,o;function y(w){return i.coerce(p._input,p,a,w)}if(v.scattermode==="group")for(o=0;o<s.length;o++)p=s[o],p.type==="scatter"&&(d=p._input,c(d,p,v,y));for(o=0;o<s.length;o++){var _=s[o];if(_.type==="scatter"){var E=_.fill;if(!(E==="none"||E==="toself")&&(_.opacity=void 0,E==="tonexty"||E==="tonextx"))for(var M=o-1;M>=0;M--){var b=s[M];if(b.type==="scatter"&&b.xaxis===_.xaxis&&b.yaxis===_.yaxis){b.opacity=void 0;break}}}}}},8800:function(f,u,r){var i=r(3400),c=r(4040),a=r(2904),l=r(8200),s=r(3028),v=r(3980),d=r(1147),p=r(3912),o=r(4428),y=r(6828),_=r(1731),E=r(124),M=r(840),b=r(3400).coercePattern;f.exports=function(A,R,T,C){function m(Z,B){return i.coerce(A,R,a,Z,B)}var L=v(A,R,C,m);if(L||(R.visible=!1),!!R.visible){d(A,R,C,m),m("xhoverformat"),m("yhoverformat"),m("zorder");var D=p(A,R,C,m);C.scattermode==="group"&&R.orientation===void 0&&m("orientation","v");var O=!D&&L<l.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("mode",O),s.hasMarkers(R)&&o(A,R,T,C,m,{gradient:!0}),s.hasLines(R)&&(y(A,R,T,C,m,{backoff:!0}),_(A,R,m),m("connectgaps"),m("line.simplify")),s.hasText(R)&&(m("texttemplate"),E(A,R,C,m));var N=[];(s.hasMarkers(R)||s.hasText(R))&&(m("cliponaxis"),m("marker.maxdisplayed"),N.push("points")),m("fill",D?D.fillDflt:"none"),R.fill!=="none"&&(M(A,R,T,m,{moduleHasFillgradient:!0}),s.hasLines(R)||_(A,R,m),b(m,"fillpattern",R.fillcolor,!1));var V=(R.line||{}).color,X=(R.marker||{}).color;(R.fill==="tonext"||R.fill==="toself")&&N.push("fills"),m("hoveron",N.join("+")||"points"),R.hoveron!=="fills"&&m("hovertemplate");var k=c.getComponentMethod("errorbars","supplyDefaults");k(A,R,V||X||T,{axis:"y"}),k(A,R,V||X||T,{axis:"x",inherit:"y"}),i.coerceSelectionMarkerOpacity(R,m)}}},3544:function(f){f.exports=function(r){return{valType:"color",editType:"style",anim:!0}}},840:function(f,u,r){var i=r(6308),c=r(3400).isArrayOrTypedArray;function a(l){for(var s=i.interpolate(l[0][1],l[1][1],.5),v=2;v<l.length;v++){var d=i.interpolate(l[v-1][1],l[v][1],.5);s=i.interpolate(s,d,l[v-1][0]/l[v][0])}return s}f.exports=function(s,v,d,p,o){o||(o={});var y=!1;if(v.marker){var _=v.marker.color,E=(v.marker.line||{}).color;_&&!c(_)?y=_:E&&!c(E)&&(y=E)}var M;if(o.moduleHasFillgradient){var b=p("fillgradient.type");if(b!=="none"){p("fillgradient.start"),p("fillgradient.stop");var w=p("fillgradient.colorscale");w&&(M=a(w))}}p("fillcolor",i.addOpacity((v.line||{}).color||y||M||d,.5))}},6688:function(f,u,r){var i=r(4460);f.exports=function(a,l,s){var v={},d={_fullLayout:s},p=i.getFromTrace(d,l,"x"),o=i.getFromTrace(d,l,"y"),y=a.orig_x;y===void 0&&(y=a.x);var _=a.orig_y;return _===void 0&&(_=a.y),v.xLabel=i.tickText(p,p.c2l(y),!0).text,v.yLabel=i.tickText(o,o.c2l(_),!0).text,v}},4928:function(f,u,r){var i=r(6308),c=r(3028);f.exports=function(l,s){var v,d;if(l.mode==="lines")return v=l.line.color,v&&i.opacity(v)?v:l.fillcolor;if(l.mode==="none")return l.fill?l.fillcolor:"";var p=s.mcc||(l.marker||{}).color,o=s.mlcc||((l.marker||{}).line||{}).color;return d=p&&i.opacity(p)?p:o&&i.opacity(o)&&(s.mlw||((l.marker||{}).line||{}).width)?o:"",d?i.opacity(d)<.3?i.addOpacity(d,.3):d:(v=(l.line||{}).color,v&&i.opacity(v)&&c.hasLines(l)&&l.line.width?v:l.fillcolor)}},11:function(f,u,r){var i=r(1888).getAxisGroup;f.exports=function(a,l,s,v){var d=l.orientation,p=l[{v:"x",h:"y"}[d]+"axis"],o=i(s,p)+d,y=s._alignmentOpts||{},_=v("alignmentgroup"),E=y[o];E||(E=y[o]={});var M=E[_];M?M.traces.push(l):M=E[_]={traces:[l],alignmentIndex:Object.keys(E).length,offsetGroups:{}};var b=v("offsetgroup"),w=M.offsetGroups,A=w[b];b&&(A||(A=w[b]={offsetIndex:Object.keys(w).length}),l._offsetIndex=A.offsetIndex)}},8723:function(f,u,r){var i=r(3400),c=r(3024),a=r(4040),l=r(4928),s=r(6308),v=i.fillText;f.exports=function(p,o,y,_){var E=p.cd,M=E[0].trace,b=p.xa,w=p.ya,A=b.c2p(o),R=w.c2p(y),T=[A,R],C=M.hoveron||"",m=M.mode.indexOf("markers")!==-1?3:.5,L=!!M.xperiodalignment,D=!!M.yperiodalignment;if(C.indexOf("points")!==-1){var O=function(ge){if(L){var xe=b.c2p(ge.xStart),Se=b.c2p(ge.xEnd);return A>=Math.min(xe,Se)&&A<=Math.max(xe,Se)?0:1/0}var ce=Math.max(3,ge.mrc||0),pe=1-1/ce,ye=Math.abs(b.c2p(ge.x)-A);return ye<ce?pe*ye/ce:ye-ce+pe},N=function(ge){if(D){var xe=w.c2p(ge.yStart),Se=w.c2p(ge.yEnd);return R>=Math.min(xe,Se)&&R<=Math.max(xe,Se)?0:1/0}var ce=Math.max(3,ge.mrc||0),pe=1-1/ce,ye=Math.abs(w.c2p(ge.y)-R);return ye<ce?pe*ye/ce:ye-ce+pe},V=function(ge){var xe=Math.max(m,ge.mrc||0),Se=b.c2p(ge.x)-A,ce=w.c2p(ge.y)-R;return Math.max(Math.sqrt(Se*Se+ce*ce)-xe,1-m/xe)},X=c.getDistanceFunction(_,O,N,V);if(c.getClosest(E,X,p),p.index!==!1){var k=E[p.index],Z=b.c2p(k.x,!0),B=w.c2p(k.y,!0),J=k.mrc||1;p.index=k.i;var ne=E[0].t.orientation,oe=ne&&(k.sNorm||k.s),Y=ne==="h"?oe:k.orig_x!==void 0?k.orig_x:k.x,G=ne==="v"?oe:k.orig_y!==void 0?k.orig_y:k.y;return i.extendFlat(p,{color:l(M,k),x0:Z-J,x1:Z+J,xLabelVal:Y,y0:B-J,y1:B+J,yLabelVal:G,spikeDistance:V(k),hovertemplate:M.hovertemplate}),v(k,M,p),a.getComponentMethod("errorbars","hoverInfo")(k,M,p),[p]}}function K(ge){if(!ge)return!1;var xe=ge.node();try{var Se=new DOMPoint(T[0],T[1]);return xe.isPointInFill(Se)}catch{var ce=xe.ownerSVGElement.createSVGPoint();return ce.x=T[0],ce.y=T[1],xe.isPointInFill(ce)}}function ee(ge){var xe,Se=[],ce=1/0,pe=-1/0,ye=1/0,U=-1/0,W;for(xe=0;xe<ge.length;xe++){var j=ge[xe];j.contains(T)&&(Se.push(j),ye=Math.min(ye,j.ymin),U=Math.max(U,j.ymax))}if(Se.length===0)return null;ye=Math.max(ye,0),U=Math.min(U,w._length),W=(ye+U)/2;var F,P,q,z,te,ue,ve;for(xe=0;xe<Se.length;xe++)for(P=Se[xe].pts,F=1;F<P.length;F++)ue=P[F-1][1],ve=P[F][1],ue>W!=ve>=W&&(z=P[F-1][0],te=P[F][0],ve-ue&&(q=z+(te-z)*(W-ue)/(ve-ue),ce=Math.min(ce,q),pe=Math.max(pe,q)));return ce=Math.max(ce,0),pe=Math.min(pe,b._length),{x0:ce,x1:pe,y0:W,y1:W}}if(C.indexOf("fills")!==-1&&M._fillElement){var ie=K(M._fillElement)&&!K(M._fillExclusionElement);if(ie){var re=ee(M._polygons);re===null&&(re={x0:T[0],x1:T[0],y0:T[1],y1:T[1]});var se=s.defaultLine;return s.opacity(M.fillcolor)?se=M.fillcolor:s.opacity((M.line||{}).color)&&(se=M.line.color),i.extendFlat(p,{distance:p.maxHoverDistance,x0:re.x0,x1:re.x1,y0:re.y0,y1:re.y1,color:se,hovertemplate:!1}),delete p.index,M.text&&!i.isArrayOrTypedArray(M.text)?p.text=String(M.text):p.text=M.name,[p]}}}},5875:function(f,u,r){var i=r(3028);f.exports={hasLines:i.hasLines,hasMarkers:i.hasMarkers,hasText:i.hasText,isBubble:i.isBubble,attributes:r(2904),layoutAttributes:r(5308),supplyDefaults:r(8800),crossTraceDefaults:r(5036),supplyLayoutDefaults:r(9748),calc:r(6356).calc,crossTraceCalc:r(6664),arraysToCalcdata:r(148),plot:r(6504),colorbar:r(5528),formatLabels:r(6688),style:r(6844).style,styleOnSelect:r(6844).styleOnSelect,hoverPoints:r(8723),selectPoints:r(1560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:r(7952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},5308:function(f){f.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},9748:function(f,u,r){var i=r(3400),c=r(5308);f.exports=function(a,l){function s(d,p){return i.coerce(a,l,c,d,p)}var v=l.barmode==="group";l.scattermode==="group"&&s("scattergap",v?l.bargap:.2)}},6828:function(f,u,r){var i=r(3400).isArrayOrTypedArray,c=r(4288).hasColorscale,a=r(7260);f.exports=function(s,v,d,p,o,y){y||(y={});var _=(s.marker||{}).color;if(_&&_._inputArray&&(_=_._inputArray),o("line.color",d),c(s,"line"))a(s,v,p,o,{prefix:"line.",cLetter:"c"});else{var E=(i(_)?!1:_)||d;o("line.color",E)}o("line.width"),y.noDash||o("line.dash"),y.backoff&&o("line.backoff")}},2340:function(f,u,r){var i=r(3616),c=r(9032),a=c.BADNUM,l=c.LOG_CLIP,s=l+.5,v=l-.5,d=r(3400),p=d.segmentsIntersect,o=d.constrain,y=r(8200);f.exports=function(E,M){var b=M.trace||{},w=M.xaxis,A=M.yaxis,R=w.type==="log",T=A.type==="log",C=w._length,m=A._length,L=M.backoff,D=b.marker,O=M.connectGaps,N=M.baseTolerance,V=M.shape,X=V==="linear",k=b.fill&&b.fill!=="none",Z=[],B=y.minTolerance,J=E.length,ne=new Array(J),oe=0,Y,G,K,ee,ie,re,se,ge,xe,Se,ce,pe,ye,U,W,j;function F(Pe){var Ne=E[Pe];if(!Ne)return!1;var ht=M.linearized?w.l2p(Ne.x):w.c2p(Ne.x),nt=M.linearized?A.l2p(Ne.y):A.c2p(Ne.y);if(ht===a){if(R&&(ht=w.c2p(Ne.x,!0)),ht===a)return!1;T&&nt===a&&(ht*=Math.abs(w._m*m*(w._m>0?s:v)/(A._m*C*(A._m>0?s:v)))),ht*=1e3}if(nt===a){if(T&&(nt=A.c2p(Ne.y,!0)),nt===a)return!1;nt*=1e3}return[ht,nt]}function P(Pe,Ne,ht,nt){var Ye=ht-Pe,Be=nt-Ne,ut=.5-Pe,Dt=.5-Ne,Nt=Ye*Ye+Be*Be,Wt=Ye*ut+Be*Dt;if(Wt>0&&Wt<Nt){var $t=ut*Be-Dt*Ye;if($t*$t<Nt)return!0}}var q,z;function te(Pe,Ne){var ht=Pe[0]/C,nt=Pe[1]/m,Ye=Math.max(0,-ht,ht-1,-nt,nt-1);return Ye&&q!==void 0&&P(ht,nt,q,z)&&(Ye=0),Ye&&Ne&&P(ht,nt,Ne[0]/C,Ne[1]/m)&&(Ye=0),(1+y.toleranceGrowth*Ye)*N}function ue(Pe,Ne){var ht=Pe[0]-Ne[0],nt=Pe[1]-Ne[1];return Math.sqrt(ht*ht+nt*nt)}var ve=y.maxScreensAway,_e=-C*ve,Re=C*(1+ve),Le=-m*ve,Ve=m*(1+ve),Xe=[[_e,Le,Re,Le],[Re,Le,Re,Ve],[Re,Ve,_e,Ve],[_e,Ve,_e,Le]],Ze,Te,we,be,ke,He;function Ke(Pe,Ne){for(var ht=[],nt=0,Ye=0;Ye<4;Ye++){var Be=Xe[Ye],ut=p(Pe[0],Pe[1],Ne[0],Ne[1],Be[0],Be[1],Be[2],Be[3]);ut&&(!nt||Math.abs(ut.x-ht[0][0])>1||Math.abs(ut.y-ht[0][1])>1)&&(ut=[ut.x,ut.y],nt&&ue(ut,Pe)<ue(ht[0],Pe)?ht.unshift(ut):ht.push(ut),nt++)}return ht}function st(Pe){if(Pe[0]<_e||Pe[0]>Re||Pe[1]<Le||Pe[1]>Ve)return[o(Pe[0],_e,Re),o(Pe[1],Le,Ve)]}function vt(Pe,Ne){if(Pe[0]===Ne[0]&&(Pe[0]===_e||Pe[0]===Re)||Pe[1]===Ne[1]&&(Pe[1]===Le||Pe[1]===Ve))return!0}function pt(Pe,Ne){var ht=[],nt=st(Pe),Ye=st(Ne);return nt&&Ye&&vt(nt,Ye)||(nt&&ht.push(nt),Ye&&ht.push(Ye)),ht}function ft(Pe,Ne,ht){return function(nt,Ye){var Be=st(nt),ut=st(Ye),Dt=[];if(Be&&ut&&vt(Be,ut))return Dt;Be&&Dt.push(Be),ut&&Dt.push(ut);var Nt=2*d.constrain((nt[Pe]+Ye[Pe])/2,Ne,ht)-((Be||nt)[Pe]+(ut||Ye)[Pe]);if(Nt){var Wt;Be&&ut?Wt=Nt>0==Be[Pe]>ut[Pe]?Be:ut:Wt=Be||ut,Wt[Pe]+=Nt}return Dt}}var lt;V==="linear"||V==="spline"?lt=Ke:V==="hv"||V==="vh"?lt=pt:V==="hvh"?lt=ft(0,_e,Re):V==="vhv"&&(lt=ft(1,Le,Ve));function Mt(Pe,Ne){var ht=Ne[0]-Pe[0],nt=(Ne[1]-Pe[1])/ht,Ye=(Pe[1]*Ne[0]-Ne[1]*Pe[0])/ht;return Ye>0?[nt>0?_e:Re,Ve]:[nt>0?Re:_e,Le]}function ot(Pe){var Ne=Pe[0],ht=Pe[1],nt=Ne===ne[oe-1][0],Ye=ht===ne[oe-1][1];if(!(nt&&Ye))if(oe>1){var Be=Ne===ne[oe-2][0],ut=ht===ne[oe-2][1];nt&&(Ne===_e||Ne===Re)&&Be?ut?oe--:ne[oe-1]=Pe:Ye&&(ht===Le||ht===Ve)&&ut?Be?oe--:ne[oe-1]=Pe:ne[oe++]=Pe}else ne[oe++]=Pe}function Ct(Pe){ne[oe-1][0]!==Pe[0]&&ne[oe-1][1]!==Pe[1]&&ot([we,be]),ot(Pe),ke=null,we=be=0}var kt=d.isArrayOrTypedArray(D);function St(Pe){if(Pe&&L&&(Pe.i=Y,Pe.d=E,Pe.trace=b,Pe.marker=kt?D[Pe.i]:D,Pe.backoff=L),q=Pe[0]/C,z=Pe[1]/m,Ze=Pe[0]<_e?_e:Pe[0]>Re?Re:0,Te=Pe[1]<Le?Le:Pe[1]>Ve?Ve:0,Ze||Te){if(!oe)ne[oe++]=[Ze||Pe[0],Te||Pe[1]];else if(ke){var Ne=lt(ke,Pe);Ne.length>1&&(Ct(Ne[0]),ne[oe++]=Ne[1])}else He=lt(ne[oe-1],Pe)[0],ne[oe++]=He;var ht=ne[oe-1];Ze&&Te&&(ht[0]!==Ze||ht[1]!==Te)?(ke&&(we!==Ze&&be!==Te?ot(we&&be?Mt(ke,Pe):[we||Ze,be||Te]):we&&be&&ot([we,be])),ot([Ze,Te])):we-Ze&&be-Te&&ot([Ze||we,Te||be]),ke=Pe,we=Ze,be=Te}else ke&&Ct(lt(ke,Pe)[0]),ne[oe++]=Pe}for(Y=0;Y<J;Y++)if(G=F(Y),!!G){for(oe=0,ke=null,St(G),Y++;Y<J;Y++){if(ee=F(Y),!ee){if(O)continue;break}if(!X||!M.simplify){St(ee);continue}var Et=F(Y+1);if(Se=ue(ee,G),!(!(k&&(oe===0||oe===J-1))&&Se<te(ee,Et)*B)){for(ge=[(ee[0]-G[0])/Se,(ee[1]-G[1])/Se],ie=G,ce=Se,pe=U=W=0,se=!1,K=ee,Y++;Y<E.length;Y++){if(re=Et,Et=F(Y+1),!re){if(O)continue;break}if(xe=[re[0]-G[0],re[1]-G[1]],j=xe[0]*ge[1]-xe[1]*ge[0],U=Math.min(U,j),W=Math.max(W,j),W-U>te(re,Et))break;K=re,ye=xe[0]*ge[0]+xe[1]*ge[1],ye>ce?(ce=ye,ee=re,se=!1):ye<pe&&(pe=ye,ie=re,se=!0)}if(se?(St(ee),K!==ie&&St(ie)):(ie!==G&&St(ie),K!==ee&&St(ee)),St(K),Y>=E.length||!re)break;St(re),G=re}}ke&&ot([we||ke[0],be||ke[1]]),Z.push(ne.slice(0,oe))}var Ue=V.slice(V.length-1);if(L&&Ue!=="h"&&Ue!=="v"){for(var De=!1,Ie=-1,Fe=[],We=0;We<Z.length;We++)for(var de=0;de<Z[We].length-1;de++){var Me=Z[We][de],he=Z[We][de+1],Ee=i.applyBackoff(he,Me);(Ee[0]!==he[0]||Ee[1]!==he[1])&&(De=!0),Fe[Ie+1]||(Ie++,Fe[Ie]=[Me,[Ee[0],Ee[1]]])}return De?Fe:Z}return Z}},1731:function(f){f.exports=function(r,i,c){var a=c("line.shape");a==="spline"&&c("line.smoothing")}},4328:function(f){var u={tonextx:1,tonexty:1,tonext:1};f.exports=function(i,c,a){var l,s,v,d,p,o={},y=!1,_=-1,E=0,M=-1;for(s=0;s<a.length;s++)l=a[s][0].trace,v=l.stackgroup||"",v?v in o?p=o[v]:(p=o[v]=E,E++):l.fill in u&&M>=0?p=M:(p=M=E,E++),p<_&&(y=!0),l._groupIndex=_=p;var b=a.slice();y&&b.sort(function(A,R){var T=A[0].trace,C=R[0].trace;return T._groupIndex-C._groupIndex||T.index-C.index});var w={};for(s=0;s<b.length;s++)l=b[s][0].trace,v=l.stackgroup||"",l.visible===!0?(l._nexttrace=null,l.fill in u&&(d=w[v],l._prevtrace=d||null,d&&(d._nexttrace=l)),l._ownfill=l.fill&&(l.fill.substr(0,6)==="tozero"||l.fill==="toself"||l.fill.substr(0,2)==="to"&&!l._prevtrace),w[v]=l):l._prevtrace=l._nexttrace=l._ownfill=null;return b}},7152:function(f,u,r){var i=r(8248);f.exports=function(a,l){l||(l=2);var s=a.marker,v=s.sizeref||1,d=s.sizemin||0,p=s.sizemode==="area"?function(o){return Math.sqrt(o/v)}:function(o){return o/v};return function(o){var y=p(o/l);return i(y)&&y>0?Math.max(y,d):0}}},5528:function(f){f.exports={container:"marker",min:"cmin",max:"cmax"}},4428:function(f,u,r){var i=r(6308),c=r(4288).hasColorscale,a=r(7260),l=r(3028);f.exports=function(v,d,p,o,y,_){var E=l.isBubble(v),M=(v.line||{}).color,b;if(_=_||{},M&&(p=M),y("marker.symbol"),y("marker.opacity",E?.7:1),y("marker.size"),_.noAngle||(y("marker.angle"),_.noAngleRef||y("marker.angleref"),_.noStandOff||y("marker.standoff")),y("marker.color",p),c(v,"marker")&&a(v,d,o,y,{prefix:"marker.",cLetter:"c"}),_.noSelect||(y("selected.marker.color"),y("unselected.marker.color"),y("selected.marker.size"),y("unselected.marker.size")),_.noLine||(M&&!Array.isArray(M)&&d.marker.color!==M?b=M:E?b=i.background:b=i.defaultLine,y("marker.line.color",b),c(v,"marker.line")&&a(v,d,o,y,{prefix:"marker.line.",cLetter:"c"}),y("marker.line.width",E?1:0)),E&&(y("marker.sizeref"),y("marker.sizemin"),y("marker.sizemode")),_.gradient){var w=y("marker.gradient.type");w!=="none"&&y("marker.gradient.color")}}},1147:function(f,u,r){var i=r(3400).dateTick0,c=r(9032),a=c.ONEWEEK;function l(s,v){return s%a===0?i(v,1):i(v,0)}f.exports=function(v,d,p,o,y){if(y||(y={x:!0,y:!0}),y.x){var _=o("xperiod");_&&(o("xperiod0",l(_,d.xcalendar)),o("xperiodalignment"))}if(y.y){var E=o("yperiod");E&&(o("yperiod0",l(E,d.ycalendar)),o("yperiodalignment"))}}},6504:function(f,u,r){var i=r(3428),c=r(4040),a=r(3400),l=a.ensureSingle,s=a.identity,v=r(3616),d=r(3028),p=r(2340),o=r(4328),y=r(2065).tester;f.exports=function(w,A,R,T,C,m){var L,D,O=!C,N=!!C&&C.duration>0,V=o(w,A,R);if(L=T.selectAll("g.trace").data(V,function(k){return k[0].trace.uid}),L.enter().append("g").attr("class",function(k){return"trace scatter trace"+k[0].trace.uid}).style("stroke-miterlimit",2),L.order(),_(w,L,A),N){m&&(D=m());var X=i.transition().duration(C.duration).ease(C.easing).each("end",function(){D&&D()}).each("interrupt",function(){D&&D()});X.each(function(){T.selectAll("g.trace").each(function(k,Z){E(w,Z,A,k,V,this,C)})})}else L.each(function(k,Z){E(w,Z,A,k,V,this,C)});O&&L.exit().remove(),T.selectAll("path:not([d])").remove()};function _(b,w,A){w.each(function(R){var T=l(i.select(this),"g","fills");v.setClipUrl(T,A.layerClipId,b);var C=R[0].trace,m=[];C._ownfill&&m.push("_ownFill"),C._nexttrace&&m.push("_nextFill");var L=T.selectAll("g").data(m,s);L.enter().append("g"),L.exit().each(function(D){C[D]=null}).remove(),L.order().each(function(D){C[D]=l(i.select(this),"path","js-fill")})})}function E(b,w,A,R,T,C,m){var L=b._context.staticPlot,D;M(b,w,A,R,T);var O=!!m&&m.duration>0;function N(ot){return O?ot.transition():ot}var V=A.xaxis,X=A.yaxis,k=R[0].trace,Z=k.line,B=i.select(C),J=l(B,"g","errorbars"),ne=l(B,"g","lines"),oe=l(B,"g","points"),Y=l(B,"g","text");if(c.getComponentMethod("errorbars","plot")(b,J,A,m),k.visible!==!0)return;N(B).style("opacity",k.opacity);var G,K,ee=k.fill.charAt(k.fill.length-1);ee!=="x"&&ee!=="y"&&(ee="");var ie,re;ee==="y"?(ie=1,re=X.c2p(0,!0)):ee==="x"&&(ie=0,re=V.c2p(0,!0)),R[0][A.isRangePlot?"nodeRangePlot3":"node3"]=B;var se="",ge=[],xe=k._prevtrace,Se=null,ce=null;xe&&(se=xe._prevRevpath||"",K=xe._nextFill,ge=xe._ownPolygons,Se=xe._fillsegments,ce=xe._fillElement);var pe,ye,U="",W="",j,F,P,q,z,te,ue=[];k._polygons=[];var ve=[],_e=[],Re=a.noop;if(G=k._ownFill,d.hasLines(k)||k.fill!=="none"){K&&K.datum(R),["hv","vh","hvh","vhv"].indexOf(Z.shape)!==-1?(j=v.steps(Z.shape),F=v.steps(Z.shape.split("").reverse().join(""))):Z.shape==="spline"?j=F=function(ot){var Ct=ot[ot.length-1];return ot.length>1&&ot[0][0]===Ct[0]&&ot[0][1]===Ct[1]?v.smoothclosed(ot.slice(1),Z.smoothing):v.smoothopen(ot,Z.smoothing)}:j=F=function(ot){return"M"+ot.join("L")},P=function(ot){return F(ot.reverse())},_e=p(R,{xaxis:V,yaxis:X,trace:k,connectGaps:k.connectgaps,baseTolerance:Math.max(Z.width||1,3)/4,shape:Z.shape,backoff:Z.backoff,simplify:Z.simplify,fill:k.fill}),ve=new Array(_e.length);var Le=0;for(D=0;D<_e.length;D++){var Ve,Xe=_e[D];!Ve||!ee?(Ve=Xe.slice(),ve[Le]=Ve,Le++):Ve.push.apply(Ve,Xe)}k._fillElement=null,k._fillExclusionElement=ce,k._fillsegments=ve.slice(0,Le),ve=k._fillsegments,_e.length&&(q=_e[0][0].slice(),z=_e[_e.length-1],te=z[z.length-1].slice()),Re=function(ot){return function(Ct){if(pe=j(Ct),ye=P(Ct),U?ee?(U+="L"+pe.substr(1),W=ye+("L"+W.substr(1))):(U+="Z"+pe,W=ye+"Z"+W):(U=pe,W=ye),d.hasLines(k)){var kt=i.select(this);if(kt.datum(R),ot)N(kt.style("opacity",0).attr("d",pe).call(v.lineGroupStyle)).style("opacity",1);else{var St=N(kt);St.attr("d",pe),v.singleLineStyle(R,St)}}}}}var Ze=ne.selectAll(".js-line").data(_e);N(Ze.exit()).style("opacity",0).remove(),Ze.each(Re(!1)),Ze.enter().append("path").classed("js-line",!0).style("vector-effect",L?"none":"non-scaling-stroke").call(v.lineGroupStyle).each(Re(!0)),v.setClipUrl(Ze,A.layerClipId,b);function Te(ot){N(ot).attr("d","M0,0Z")}var we=function(){var ot=new Array(ve.length);for(D=0;D<ve.length;D++)ot[D]=y(ve[D]);return ot},be=function(ot){var Ct,kt;if(!ot||ot.length===0)for(Ct=new Array(ve.length),kt=0;kt<ve.length;kt++){var St=ve[kt][0].slice(),Et=ve[kt][ve[kt].length-1].slice();St[ie]=Et[ie]=re;var Ue=[Et,St],De=Ue.concat(ve[kt]);Ct[kt]=y(De)}else{for(Ct=new Array(ot.length-1+ve.length),kt=0;kt<ot.length-1;kt++)Ct[kt]=y(ot[kt]);var Ie=ot[ot.length-1].slice();for(Ie.reverse(),kt=0;kt<ve.length;kt++)Ct[ot.length-1+kt]=y(ve[kt].concat(Ie))}return Ct};_e.length?(G?(G.datum(R),q&&te&&(ee?(q[ie]=te[ie]=re,N(G).attr("d","M"+te+"L"+q+"L"+U.substr(1)).call(v.singleFillStyle,b),ue=be(null)):(N(G).attr("d",U+"Z").call(v.singleFillStyle,b),ue=we())),k._polygons=ue,k._fillElement=G):K&&(k.fill.substr(0,6)==="tonext"&&U&&se?(k.fill==="tonext"?(N(K).attr("d",U+"Z"+se+"Z").call(v.singleFillStyle,b),ue=we(),k._polygons=ue.concat(ge)):(N(K).attr("d",U+"L"+se.substr(1)+"Z").call(v.singleFillStyle,b),ue=be(Se),k._polygons=ue),k._fillElement=K):Te(K)),k._prevRevpath=W):(G?Te(G):K&&Te(K),k._prevRevpath=null),k._ownPolygons=ue;function ke(ot){return ot.filter(function(Ct){return!Ct.gap&&Ct.vis})}function He(ot){return ot.filter(function(Ct){return Ct.vis})}function Ke(ot){return ot.filter(function(Ct){return!Ct.gap})}function st(ot){return ot.id}function vt(ot){if(ot.ids)return st}function pt(){return!1}function ft(ot,Ct,kt){var St,Et,Ue,De=kt[0].trace,Ie=d.hasMarkers(De),Fe=d.hasText(De),We=vt(De),de=pt,Me=pt;if(Ie||Fe){var he=s,Ee=De.stackgroup,Pe=Ee&&b._fullLayout._scatterStackOpts[V._id+X._id][Ee].stackgaps==="infer zero";De.marker.maxdisplayed||De._needsCull?he=Pe?He:ke:Ee&&!Pe&&(he=Ke),Ie&&(de=he),Fe&&(Me=he)}Et=ot.selectAll("path.point"),St=Et.data(de,We);var Ne=St.enter().append("path").classed("point",!0);O&&Ne.call(v.pointStyle,De,b).call(v.translatePoints,V,X).style("opacity",0).transition().style("opacity",1),St.order();var ht;Ie&&(ht=v.makePointStyleFns(De)),St.each(function(nt){var Ye=i.select(this),Be=N(Ye);Ue=v.translatePoint(nt,Be,V,X),Ue?(v.singlePointStyle(nt,Be,De,ht,b),A.layerClipId&&v.hideOutsideRangePoint(nt,Be,V,X,De.xcalendar,De.ycalendar),De.customdata&&Ye.classed("plotly-customdata",nt.data!==null&&nt.data!==void 0)):Be.remove()}),O?St.exit().transition().style("opacity",0).remove():St.exit().remove(),Et=Ct.selectAll("g"),St=Et.data(Me,We),St.enter().append("g").classed("textpoint",!0).append("text"),St.order(),St.each(function(nt){var Ye=i.select(this),Be=N(Ye.select("text"));Ue=v.translatePoint(nt,Be,V,X),Ue?A.layerClipId&&v.hideOutsideRangePoint(nt,Ye,V,X,De.xcalendar,De.ycalendar):Ye.remove()}),St.selectAll("text").call(v.textPointStyle,De,b).each(function(nt){var Ye=V.c2p(nt.x),Be=X.c2p(nt.y);i.select(this).selectAll("tspan.line").each(function(){N(i.select(this)).attr({x:Ye,y:Be})})}),St.exit().remove()}oe.datum(R),Y.datum(R),ft(oe,Y,R);var lt=k.cliponaxis===!1,Mt=lt?null:A.layerClipId;v.setClipUrl(oe,Mt,b),v.setClipUrl(Y,Mt,b)}function M(b,w,A,R,T){var C=A.xaxis,m=A.yaxis,L=i.extent(a.simpleMap(C.range,C.r2c)),D=i.extent(a.simpleMap(m.range,m.r2c)),O=R[0].trace;if(d.hasMarkers(O)){var N=O.marker.maxdisplayed;if(N!==0){var V=R.filter(function(B){return B.x>=L[0]&&B.x<=L[1]&&B.y>=D[0]&&B.y<=D[1]}),X=Math.ceil(V.length/N),k=0;T.forEach(function(B,J){var ne=B[0].trace;d.hasMarkers(ne)&&ne.marker.maxdisplayed>0&&J<w&&k++});var Z=Math.round(k*X/3+Math.floor(k/3)*X/7.1);R.forEach(function(B){delete B.vis}),V.forEach(function(B,J){Math.round((J+Z)%X)===0&&(B.vis=!0)})}}}},1560:function(f,u,r){var i=r(3028);f.exports=function(a,l){var s=a.cd,v=a.xaxis,d=a.yaxis,p=[],o=s[0].trace,y,_,E,M,b=!i.hasMarkers(o)&&!i.hasText(o);if(b)return[];if(l===!1)for(y=0;y<s.length;y++)s[y].selected=0;else for(y=0;y<s.length;y++)_=s[y],E=v.c2p(_.x),M=d.c2p(_.y),_.i!==null&&l.contains([E,M],!1,y,a)?(p.push({pointNumber:_.i,x:v.c2d(_.x),y:d.c2d(_.y)}),_.selected=1):_.selected=0;return p}},3912:function(f){var u=["orientation","groupnorm","stackgaps"];f.exports=function(i,c,a,l){var s=a._scatterStackOpts,v=l("stackgroup");if(v){var d=c.xaxis+c.yaxis,p=s[d];p||(p=s[d]={});var o=p[v],y=!1;o?o.traces.push(c):(o=p[v]={traceIndices:[],traces:[c]},y=!0);for(var _={orientation:c.x&&!c.y?"h":"v"},E=0;E<u.length;E++){var M=u[E],b=M+"Found";if(!o[b]){var w=i[M]!==void 0,A=M==="orientation";if((w||y)&&(o[M]=l(M,_[M]),A&&(o.fillDflt=o[M]==="h"?"tonextx":"tonexty"),w&&(o[b]=!0,!y&&(delete o.traces[0][M],A))))for(var R=0;R<o.traces.length-1;R++){var T=o.traces[R];T._input.fill!==T.fill&&(T.fill=o.fillDflt)}}}return o}}},6844:function(f,u,r){var i=r(3428),c=r(3616),a=r(4040);function l(p){var o=i.select(p).selectAll("g.trace.scatter");o.style("opacity",function(y){return y[0].trace.opacity}),o.selectAll("g.points").each(function(y){var _=i.select(this),E=y.trace||y[0].trace;s(_,E,p)}),o.selectAll("g.text").each(function(y){var _=i.select(this),E=y.trace||y[0].trace;v(_,E,p)}),o.selectAll("g.trace path.js-line").call(c.lineGroupStyle),o.selectAll("g.trace path.js-fill").call(c.fillGroupStyle,p,!1),a.getComponentMethod("errorbars","style")(o)}function s(p,o,y){c.pointStyle(p.selectAll("path.point"),o,y)}function v(p,o,y){c.textPointStyle(p.selectAll("text"),o,y)}function d(p,o,y){var _=o[0].trace;_.selectedpoints?(c.selectedPointStyle(y.selectAll("path.point"),_),c.selectedTextStyle(y.selectAll("text"),_)):(s(y,_,p),v(y,_,p))}f.exports={style:l,stylePoints:s,styleText:v,styleOnSelect:d}},3028:function(f,u,r){var i=r(3400),c=r(8116).isTypedArraySpec;f.exports={hasLines:function(a){return a.visible&&a.mode&&a.mode.indexOf("lines")!==-1},hasMarkers:function(a){return a.visible&&(a.mode&&a.mode.indexOf("markers")!==-1||a.type==="splom")},hasText:function(a){return a.visible&&a.mode&&a.mode.indexOf("text")!==-1},isBubble:function(a){var l=a.marker;return i.isPlainObject(l)&&(i.isArrayOrTypedArray(l.size)||c(l.size))}}},124:function(f,u,r){var i=r(3400);f.exports=function(c,a,l,s,v){v=v||{},s("textposition"),i.coerceFont(s,"textfont",v.font||l.font,v),v.noSelect||(s("selected.textfont.color"),s("unselected.textfont.color"))}},3980:function(f,u,r){var i=r(3400),c=r(4040);f.exports=function(l,s,v,d){var p=d("x"),o=d("y"),y,_=c.getComponentMethod("calendars","handleTraceDefaults");if(_(l,s,["x","y"],v),p){var E=i.minRowLength(p);o?y=Math.min(E,i.minRowLength(o)):(y=E,d("y0"),d("dy"))}else{if(!o)return 0;y=i.minRowLength(o),d("x0"),d("dx")}return s._length=y,y}},1843:function(f,u,r){var i=r(4460),c=r(3400),a=r(3060),l=r(468).W,s=r(9032).BADNUM;u.moduleType="transform",u.name="aggregate";var v=u.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},d=v.aggregations;u.supplyDefaults=function(M,b){var w={},A;function R(B,J){return c.coerce(M,w,v,B,J)}var T=R("enabled");if(!T)return w;var C=a.findArrayAttributes(b),m={};for(A=0;A<C.length;A++)m[C[A]]=1;var L=R("groups");if(!Array.isArray(L)){if(!m[L])return w.enabled=!1,w;m[L]=0}var D=M.aggregations||[],O=w.aggregations=new Array(D.length),N;function V(B,J){return c.coerce(D[A],N,d,B,J)}for(A=0;A<D.length;A++){N={_index:A};var X=V("target"),k=V("func"),Z=V("enabled");Z&&X&&(m[X]||k==="count"&&m[X]===void 0)?(k==="stddev"&&V("funcmode"),m[X]=0,O[A]=N):O[A]={enabled:!1,_index:A}}for(A=0;A<C.length;A++)m[C[A]]&&O.push({target:C[A],func:d.func.dflt,enabled:!0,_index:-1});return w},u.calcTransform=function(M,b,w){if(w.enabled){var A=w.groups,R=c.getTargetArray(b,{target:A});if(R){var T,C,m,L,D={},O={},N=[],V=l(b.transforms,w),X=R.length;for(b._length&&(X=Math.min(X,b._length)),T=0;T<X;T++)C=R[T],m=D[C],m===void 0?(D[C]=N.length,L=[T],N.push(L),O[D[C]]=V(T)):(N[m].push(T),O[D[C]]=(O[D[C]]||[]).concat(V(T)));w._indexToPoints=O;var k=w.aggregations;for(T=0;T<k.length;T++)p(M,b,N,k[T]);typeof A=="string"&&p(M,b,N,{target:A,func:"first",enabled:!0}),b._length=N.length}}};function p(M,b,w,A){if(A.enabled){for(var R=A.target,T=c.nestedProperty(b,R),C=T.get(),m=i.getDataConversions(M,b,R,C),L=o(A,m),D=new Array(w.length),O=0;O<w.length;O++)D[O]=L(C,w[O]);T.set(D),A.func==="count"&&c.pushUnique(b._arrayAttrs,R)}}function o(M,b){var w=M.func,A=b.d2c,R=b.c2d;switch(w){case"count":return y;case"first":return _;case"last":return E;case"sum":return function(T,C){for(var m=0,L=0;L<C.length;L++){var D=A(T[C[L]]);D!==s&&(m+=D)}return R(m)};case"avg":return function(T,C){for(var m=0,L=0,D=0;D<C.length;D++){var O=A(T[C[D]]);O!==s&&(m+=O,L++)}return L?R(m/L):s};case"min":return function(T,C){for(var m=1/0,L=0;L<C.length;L++){var D=A(T[C[L]]);D!==s&&(m=Math.min(m,D))}return m===1/0?s:R(m)};case"max":return function(T,C){for(var m=-1/0,L=0;L<C.length;L++){var D=A(T[C[L]]);D!==s&&(m=Math.max(m,D))}return m===-1/0?s:R(m)};case"range":return function(T,C){for(var m=1/0,L=-1/0,D=0;D<C.length;D++){var O=A(T[C[D]]);O!==s&&(m=Math.min(m,O),L=Math.max(L,O))}return L===-1/0||m===1/0?s:R(L-m)};case"change":return function(T,C){var m=A(T[C[0]]),L=A(T[C[C.length-1]]);return m===s||L===s?s:R(L-m)};case"median":return function(T,C){for(var m=[],L=0;L<C.length;L++){var D=A(T[C[L]]);D!==s&&m.push(D)}if(!m.length)return s;m.sort(c.sorterAsc);var O=(m.length-1)/2;return R((m[Math.floor(O)]+m[Math.ceil(O)])/2)};case"mode":return function(T,C){for(var m={},L=0,D=s,O=0;O<C.length;O++){var N=A(T[C[O]]);if(N!==s){var V=m[N]=(m[N]||0)+1;V>L&&(L=V,D=N)}}return L?R(D):s};case"rms":return function(T,C){for(var m=0,L=0,D=0;D<C.length;D++){var O=A(T[C[D]]);O!==s&&(m+=O*O,L++)}return L?R(Math.sqrt(m/L)):s};case"stddev":return function(T,C){var m=0,L=0,D=1,O=s,N;for(N=0;N<C.length&&O===s;N++)O=A(T[C[N]]);if(O===s)return s;for(;N<C.length;N++){var V=A(T[C[N]]);if(V!==s){var X=V-O;m+=X,L+=X*X,D++}}var k=M.funcmode==="sample"?D-1:D;return k?Math.sqrt((L-m*m/D)/k):0}}}function y(M,b){return b.length}function _(M,b){return M[b[0]]}function E(M,b){return M[b[b.length-1]]}},6744:function(f,u,r){var i=r(3400),c=r(4040),a=r(4460),l=r(468).W,s=r(9104),v=s.COMPARISON_OPS,d=s.INTERVAL_OPS,p=s.SET_OPS;u.moduleType="transform",u.name="filter",u.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(v).concat(d).concat(p),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},u.supplyDefaults=function(y){var _={};function E(A,R){return i.coerce(y,_,u.attributes,A,R)}var M=E("enabled");if(M){var b=E("target");if(i.isArrayOrTypedArray(b)&&b.length===0)return _.enabled=!1,_;E("preservegaps"),E("operation"),E("value");var w=c.getComponentMethod("calendars","handleDefaults");w(y,_,"valuecalendar",null),w(y,_,"targetcalendar",null)}return _},u.calcTransform=function(y,_,E){if(!E.enabled)return;var M=i.getTargetArray(_,E);if(!M)return;var b=E.target,w=M.length;_._length&&(w=Math.min(w,_._length));var A=E.targetcalendar,R=_._arrayAttrs,T=E.preservegaps;if(typeof b=="string"){var C=i.nestedProperty(_,b+"calendar").get();C&&(A=C)}var m=a.getDataToCoordFunc(y,_,b,M),L=o(E,m,A),D={},O={},N=0;function V(ne,oe){for(var Y=0;Y<R.length;Y++){var G=i.nestedProperty(_,R[Y]);ne(G,oe)}}var X,k;T?(X=function(ne){D[ne.astr]=i.extendDeep([],ne.get()),ne.set(new Array(w))},k=function(ne,oe){var Y=D[ne.astr][oe];ne.get()[oe]=Y}):(X=function(ne){D[ne.astr]=i.extendDeep([],ne.get()),ne.set([])},k=function(ne,oe){var Y=D[ne.astr][oe];ne.get().push(Y)}),V(X);for(var Z=l(_.transforms,E),B=0;B<w;B++){var J=L(M[B]);J?(V(k,B),O[N++]=Z(B)):T&&N++}E._indexToPoints=O,_._length=N};function o(y,_,E){var M=y.operation,b=y.value,w=i.isArrayOrTypedArray(b);function A(m){return m.indexOf(M)!==-1}var R=function(m){return _(m,0,y.valuecalendar)},T=function(m){return _(m,0,E)},C;switch(A(v)?C=R(w?b[0]:b):A(d)?C=w?[R(b[0]),R(b[1])]:[R(b),R(b)]:A(p)&&(C=w?b.map(R):[R(b)]),M){case"=":return function(m){return T(m)===C};case"!=":return function(m){return T(m)!==C};case"<":return function(m){return T(m)<C};case"<=":return function(m){return T(m)<=C};case">":return function(m){return T(m)>C};case">=":return function(m){return T(m)>=C};case"[]":return function(m){var L=T(m);return L>=C[0]&&L<=C[1]};case"()":return function(m){var L=T(m);return L>C[0]&&L<C[1]};case"[)":return function(m){var L=T(m);return L>=C[0]&&L<C[1]};case"(]":return function(m){var L=T(m);return L>C[0]&&L<=C[1]};case"][":return function(m){var L=T(m);return L<=C[0]||L>=C[1]};case")(":return function(m){var L=T(m);return L<C[0]||L>C[1]};case"](":return function(m){var L=T(m);return L<=C[0]||L>C[1]};case")[":return function(m){var L=T(m);return L<C[0]||L>=C[1]};case"{}":return function(m){return C.indexOf(T(m))!==-1};case"}{":return function(m){return C.indexOf(T(m))===-1}}}},2028:function(f,u,r){var i=r(3400),c=r(3060),a=r(7316),l=r(468).W;u.moduleType="transform",u.name="groupby",u.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},u.supplyDefaults=function(v,d,p){var o,y={};function _(R,T){return i.coerce(v,y,u.attributes,R,T)}var E=_("enabled");if(!E)return y;_("groups"),_("nameformat",p._dataLength>1?"%{group} (%{trace})":"%{group}");var M=v.styles,b=y.styles=[];if(M)for(o=0;o<M.length;o++){var w=b[o]={};i.coerce(M[o],b[o],u.attributes.styles,"target");var A=i.coerce(M[o],b[o],u.attributes.styles,"value");i.isPlainObject(A)?w.value=i.extendDeep({},A):A&&delete w.value}return y},u.transform=function(v,d){var p,o,y,_=[];for(o=0;o<v.length;o++)for(p=s(v[o],d),y=0;y<p.length;y++)_.push(p[y]);return _};function s(v,d){var p,o,y,_,E,M,b,w,A,R,T=d.transform,C=d.transformIndex,m=v.transforms[C].groups,L=l(v.transforms,T);if(!i.isArrayOrTypedArray(m)||m.length===0)return[v];var D=i.filterUnique(m),O=new Array(D.length),N=m.length,V=c.findArrayAttributes(v),X=T.styles||[],k={};for(p=0;p<X.length;p++)k[X[p].target]=X[p].value;T.styles&&(R=i.keyedContainer(T,"styles","target","value.name"));var Z={},B={};for(p=0;p<D.length;p++){M=D[p],Z[M]=p,B[M]=0,b=O[p]=i.extendDeepNoArrays({},v),b._group=M,b.transforms[C]._indexToPoints={};var J=null;for(R&&(J=R.get(M)),J||J===""?b.name=J:b.name=i.templateString(T.nameformat,{trace:v.name,group:M}),w=b.transforms,b.transforms=[],o=0;o<w.length;o++)b.transforms[o]=i.extendDeepNoArrays({},w[o]);for(o=0;o<V.length;o++)i.nestedProperty(b,V[o]).set([])}for(y=0;y<V.length;y++){for(_=V[y],o=0,A=[];o<D.length;o++)A[o]=i.nestedProperty(O[o],_).get();for(E=i.nestedProperty(v,_).get(),o=0;o<N;o++)A[Z[m[o]]].push(E[o])}for(o=0;o<N;o++){b=O[Z[m[o]]];var ne=b.transforms[C]._indexToPoints;ne[B[m[o]]]=L(o),B[m[o]]++}for(p=0;p<D.length;p++)M=D[p],b=O[p],a.clearExpandedTraceDefaultColors(b),b=i.extendDeepNoArrays(b,k[M]||{});return O}},468:function(f,u){u.W=function(r,i){for(var c,a,l=0;l<r.length&&(c=r[l],c!==i);l++)!c._indexToPoints||c.enabled===!1||(a=c._indexToPoints);var s=a?function(v){return a[v]}:function(v){return[v]};return s}},6272:function(f,u,r){var i=r(3400),c=r(4460),a=r(468).W,l=r(9032).BADNUM;u.moduleType="transform",u.name="sort",u.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},u.supplyDefaults=function(d){var p={};function o(_,E){return i.coerce(d,p,u.attributes,_,E)}var y=o("enabled");return y&&(o("target"),o("order")),p},u.calcTransform=function(d,p,o){if(o.enabled){var y=i.getTargetArray(p,o);if(y){var _=o.target,E=y.length;p._length&&(E=Math.min(E,p._length));var M=p._arrayAttrs,b=c.getDataToCoordFunc(d,p,_,y),w=s(o,y,b,E),A=a(p.transforms,o),R={},T,C;for(T=0;T<M.length;T++){var m=i.nestedProperty(p,M[T]),L=m.get(),D=new Array(E);for(C=0;C<E;C++)D[C]=L[w[C]];m.set(D)}for(C=0;C<E;C++)R[C]=A(w[C]);o._indexToPoints=R,p._length=E}}};function s(d,p,o,y){var _=new Array(y),E=new Array(y),M;for(M=0;M<y;M++)_[M]={v:p[M],i:M};for(_.sort(v(d,o)),M=0;M<y;M++)E[M]=_[M].i;return E}function v(d,p){switch(d.order){case"ascending":return function(o,y){var _=p(o.v),E=p(y.v);return _===l?1:E===l?-1:_-E};case"descending":return function(o,y){var _=p(o.v),E=p(y.v);return _===l?1:E===l?-1:E-_}}}},5788:function(f,u){u.version="2.33.0"},5928:function(f){f.exports=c,f.exports.isMobile=c,f.exports.default=c;var u=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/CrOS/,i=/android|ipad|playbook|silk/i;function c(a){a||(a={});var l=a.ua;if(!l&&typeof navigator<"u"&&(l=navigator.userAgent),l&&l.headers&&typeof l.headers["user-agent"]=="string"&&(l=l.headers["user-agent"]),typeof l!="string")return!1;var s=u.test(l)&&!r.test(l)||!!a.tablet&&i.test(l);return!s&&a.tablet&&a.featureDetect&&navigator&&navigator.maxTouchPoints>1&&l.indexOf("Macintosh")!==-1&&l.indexOf("Safari")!==-1&&(s=!0),s}},3428:function(f,u,r){var i,c;(function(){var a={version:"3.8.2"},l=[].slice,s=function(g){return l.call(g)},v=self.document;function d(g){return g&&(g.ownerDocument||g.document||g).documentElement}function p(g){return g&&(g.ownerDocument&&g.ownerDocument.defaultView||g.document&&g||g.defaultView)}if(v)try{s(v.documentElement.childNodes)[0].nodeType}catch{s=function(I){for(var H=I.length,$=new Array(H);H--;)$[H]=I[H];return $}}if(Date.now||(Date.now=function(){return+new Date}),v)try{v.createElement("DIV").style.setProperty("opacity",0,"")}catch{var o=this.Element.prototype,y=o.setAttribute,_=o.setAttributeNS,E=this.CSSStyleDeclaration.prototype,M=E.setProperty;o.setAttribute=function(I,H){y.call(this,I,H+"")},o.setAttributeNS=function(I,H,$){_.call(this,I,H,$+"")},E.setProperty=function(I,H,$){M.call(this,I,H+"",$)}}a.ascending=b;function b(g,I){return g<I?-1:g>I?1:g>=I?0:NaN}a.descending=function(g,I){return I<g?-1:I>g?1:I>=g?0:NaN},a.min=function(g,I){var H=-1,$=g.length,ae,le;if(arguments.length===1){for(;++H<$;)if((le=g[H])!=null&&le>=le){ae=le;break}for(;++H<$;)(le=g[H])!=null&&ae>le&&(ae=le)}else{for(;++H<$;)if((le=I.call(g,g[H],H))!=null&&le>=le){ae=le;break}for(;++H<$;)(le=I.call(g,g[H],H))!=null&&ae>le&&(ae=le)}return ae},a.max=function(g,I){var H=-1,$=g.length,ae,le;if(arguments.length===1){for(;++H<$;)if((le=g[H])!=null&&le>=le){ae=le;break}for(;++H<$;)(le=g[H])!=null&&le>ae&&(ae=le)}else{for(;++H<$;)if((le=I.call(g,g[H],H))!=null&&le>=le){ae=le;break}for(;++H<$;)(le=I.call(g,g[H],H))!=null&&le>ae&&(ae=le)}return ae},a.extent=function(g,I){var H=-1,$=g.length,ae,le,Ae;if(arguments.length===1){for(;++H<$;)if((le=g[H])!=null&&le>=le){ae=Ae=le;break}for(;++H<$;)(le=g[H])!=null&&(ae>le&&(ae=le),Ae<le&&(Ae=le))}else{for(;++H<$;)if((le=I.call(g,g[H],H))!=null&&le>=le){ae=Ae=le;break}for(;++H<$;)(le=I.call(g,g[H],H))!=null&&(ae>le&&(ae=le),Ae<le&&(Ae=le))}return[ae,Ae]};function w(g){return g===null?NaN:+g}function A(g){return!isNaN(g)}a.sum=function(g,I){var H=0,$=g.length,ae,le=-1;if(arguments.length===1)for(;++le<$;)A(ae=+g[le])&&(H+=ae);else for(;++le<$;)A(ae=+I.call(g,g[le],le))&&(H+=ae);return H},a.mean=function(g,I){var H=0,$=g.length,ae,le=-1,Ae=$;if(arguments.length===1)for(;++le<$;)A(ae=w(g[le]))?H+=ae:--Ae;else for(;++le<$;)A(ae=w(I.call(g,g[le],le)))?H+=ae:--Ae;if(Ae)return H/Ae},a.quantile=function(g,I){var H=(g.length-1)*I+1,$=Math.floor(H),ae=+g[$-1],le=H-$;return le?ae+le*(g[$]-ae):ae},a.median=function(g,I){var H=[],$=g.length,ae,le=-1;if(arguments.length===1)for(;++le<$;)A(ae=w(g[le]))&&H.push(ae);else for(;++le<$;)A(ae=w(I.call(g,g[le],le)))&&H.push(ae);if(H.length)return a.quantile(H.sort(b),.5)},a.variance=function(g,I){var H=g.length,$=0,ae,le,Ae=0,me=-1,Ce=0;if(arguments.length===1)for(;++me<H;)A(ae=w(g[me]))&&(le=ae-$,$+=le/++Ce,Ae+=le*(ae-$));else for(;++me<H;)A(ae=w(I.call(g,g[me],me)))&&(le=ae-$,$+=le/++Ce,Ae+=le*(ae-$));if(Ce>1)return Ae/(Ce-1)},a.deviation=function(){var g=a.variance.apply(this,arguments);return g&&Math.sqrt(g)};function R(g){return{left:function(I,H,$,ae){for(arguments.length<3&&($=0),arguments.length<4&&(ae=I.length);$<ae;){var le=$+ae>>>1;g(I[le],H)<0?$=le+1:ae=le}return $},right:function(I,H,$,ae){for(arguments.length<3&&($=0),arguments.length<4&&(ae=I.length);$<ae;){var le=$+ae>>>1;g(I[le],H)>0?ae=le:$=le+1}return $}}}var T=R(b);a.bisectLeft=T.left,a.bisect=a.bisectRight=T.right,a.bisector=function(g){return R(g.length===1?function(I,H){return b(g(I),H)}:g)},a.shuffle=function(g,I,H){($=arguments.length)<3&&(H=g.length,$<2&&(I=0));for(var $=H-I,ae,le;$;)le=Math.random()*$--|0,ae=g[$+I],g[$+I]=g[le+I],g[le+I]=ae;return g},a.permute=function(g,I){for(var H=I.length,$=new Array(H);H--;)$[H]=g[I[H]];return $},a.pairs=function(g){for(var I=0,H=g.length-1,$=g[0],ae=new Array(H<0?0:H);I<H;)ae[I]=[$,$=g[++I]];return ae},a.transpose=function(g){if(!(le=g.length))return[];for(var I=-1,H=a.min(g,C),$=new Array(H);++I<H;)for(var ae=-1,le,Ae=$[I]=new Array(le);++ae<le;)Ae[ae]=g[ae][I];return $};function C(g){return g.length}a.zip=function(){return a.transpose(arguments)},a.keys=function(g){var I=[];for(var H in g)I.push(H);return I},a.values=function(g){var I=[];for(var H in g)I.push(g[H]);return I},a.entries=function(g){var I=[];for(var H in g)I.push({key:H,value:g[H]});return I},a.merge=function(g){for(var I=g.length,H,$=-1,ae=0,le,Ae;++$<I;)ae+=g[$].length;for(le=new Array(ae);--I>=0;)for(Ae=g[I],H=Ae.length;--H>=0;)le[--ae]=Ae[H];return le};var m=Math.abs;a.range=function(g,I,H){if(arguments.length<3&&(H=1,arguments.length<2&&(I=g,g=0)),(I-g)/H===1/0)throw new Error("infinite range");var $=[],ae=L(m(H)),le=-1,Ae;if(g*=ae,I*=ae,H*=ae,H<0)for(;(Ae=g+H*++le)>I;)$.push(Ae/ae);else for(;(Ae=g+H*++le)<I;)$.push(Ae/ae);return $};function L(g){for(var I=1;g*I%1;)I*=10;return I}function D(g,I){for(var H in I)Object.defineProperty(g.prototype,H,{value:I[H],enumerable:!1})}a.map=function(g,I){var H=new O;if(g instanceof O)g.forEach(function(me,Ce){H.set(me,Ce)});else if(Array.isArray(g)){var $=-1,ae=g.length,le;if(arguments.length===1)for(;++$<ae;)H.set($,g[$]);else for(;++$<ae;)H.set(I.call(g,le=g[$],$),le)}else for(var Ae in g)H.set(Ae,g[Ae]);return H};function O(){this._=Object.create(null)}var N="__proto__",V="\0";D(O,{has:Z,get:function(g){return this._[X(g)]},set:function(g,I){return this._[X(g)]=I},remove:B,keys:J,values:function(){var g=[];for(var I in this._)g.push(this._[I]);return g},entries:function(){var g=[];for(var I in this._)g.push({key:k(I),value:this._[I]});return g},size:ne,empty:oe,forEach:function(g){for(var I in this._)g.call(this,k(I),this._[I])}});function X(g){return(g+="")===N||g[0]===V?V+g:g}function k(g){return(g+="")[0]===V?g.slice(1):g}function Z(g){return X(g)in this._}function B(g){return(g=X(g))in this._&&delete this._[g]}function J(){var g=[];for(var I in this._)g.push(k(I));return g}function ne(){var g=0;for(var I in this._)++g;return g}function oe(){for(var g in this._)return!1;return!0}a.nest=function(){var g={},I=[],H=[],$,ae;function le(me,Ce,Oe){if(Oe>=I.length)return ae?ae.call(g,Ce):$?Ce.sort($):Ce;for(var ze=-1,qe=Ce.length,et=I[Oe++],bt,Rt,at,gt=new O,mt;++ze<qe;)(mt=gt.get(bt=et(Rt=Ce[ze])))?mt.push(Rt):gt.set(bt,[Rt]);return me?(Rt=me(),at=function(It,Pt){Rt.set(It,le(me,Pt,Oe))}):(Rt={},at=function(It,Pt){Rt[It]=le(me,Pt,Oe)}),gt.forEach(at),Rt}function Ae(me,Ce){if(Ce>=I.length)return me;var Oe=[],ze=H[Ce++];return me.forEach(function(qe,et){Oe.push({key:qe,values:Ae(et,Ce)})}),ze?Oe.sort(function(qe,et){return ze(qe.key,et.key)}):Oe}return g.map=function(me,Ce){return le(Ce,me,0)},g.entries=function(me){return Ae(le(a.map,me,0),0)},g.key=function(me){return I.push(me),g},g.sortKeys=function(me){return H[I.length-1]=me,g},g.sortValues=function(me){return $=me,g},g.rollup=function(me){return ae=me,g},g},a.set=function(g){var I=new Y;if(g)for(var H=0,$=g.length;H<$;++H)I.add(g[H]);return I};function Y(){this._=Object.create(null)}D(Y,{has:Z,add:function(g){return this._[X(g+="")]=!0,g},remove:B,values:J,size:ne,empty:oe,forEach:function(g){for(var I in this._)g.call(this,k(I))}}),a.behavior={};function G(g){return g}a.rebind=function(g,I){for(var H=1,$=arguments.length,ae;++H<$;)g[ae=arguments[H]]=K(g,I,I[ae]);return g};function K(g,I,H){return function(){var $=H.apply(I,arguments);return $===I?g:$}}function ee(g,I){if(I in g)return I;I=I.charAt(0).toUpperCase()+I.slice(1);for(var H=0,$=ie.length;H<$;++H){var ae=ie[H]+I;if(ae in g)return ae}}var ie=["webkit","ms","moz","Moz","o","O"];function re(){}a.dispatch=function(){for(var g=new se,I=-1,H=arguments.length;++I<H;)g[arguments[I]]=ge(g);return g};function se(){}se.prototype.on=function(g,I){var H=g.indexOf("."),$="";if(H>=0&&($=g.slice(H+1),g=g.slice(0,H)),g)return arguments.length<2?this[g].on($):this[g].on($,I);if(arguments.length===2){if(I==null)for(g in this)this.hasOwnProperty(g)&&this[g].on($,null);return this}};function ge(g){var I=[],H=new O;function $(){for(var ae=I,le=-1,Ae=ae.length,me;++le<Ae;)(me=ae[le].on)&&me.apply(this,arguments);return g}return $.on=function(ae,le){var Ae=H.get(ae),me;return arguments.length<2?Ae&&Ae.on:(Ae&&(Ae.on=null,I=I.slice(0,me=I.indexOf(Ae)).concat(I.slice(me+1)),H.remove(ae)),le&&I.push(H.set(ae,{on:le})),g)},$}a.event=null;function xe(){a.event.preventDefault()}function Se(){for(var g=a.event,I;I=g.sourceEvent;)g=I;return g}function ce(g){for(var I=new se,H=0,$=arguments.length;++H<$;)I[arguments[H]]=ge(I);return I.of=function(ae,le){return function(Ae){try{var me=Ae.sourceEvent=a.event;Ae.target=g,a.event=Ae,I[Ae.type].apply(ae,le)}finally{a.event=me}}},I}a.requote=function(g){return g.replace(pe,"\\$&")};var pe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ye={}.__proto__?function(g,I){g.__proto__=I}:function(g,I){for(var H in I)g[H]=I[H]};function U(g){return ye(g,P),g}var W=function(g,I){return I.querySelector(g)},j=function(g,I){return I.querySelectorAll(g)},F=function(g,I){var H=g.matches||g[ee(g,"matchesSelector")];return F=function($,ae){return H.call($,ae)},F(g,I)};typeof Sizzle=="function"&&(W=function(g,I){return Sizzle(g,I)[0]||null},j=Sizzle,F=Sizzle.matchesSelector),a.selection=function(){return a.select(v.documentElement)};var P=a.selection.prototype=[];P.select=function(g){var I=[],H,$,ae,le;g=q(g);for(var Ae=-1,me=this.length;++Ae<me;){I.push(H=[]),H.parentNode=(ae=this[Ae]).parentNode;for(var Ce=-1,Oe=ae.length;++Ce<Oe;)(le=ae[Ce])?(H.push($=g.call(le,le.__data__,Ce,Ae)),$&&"__data__"in le&&($.__data__=le.__data__)):H.push(null)}return U(I)};function q(g){return typeof g=="function"?g:function(){return W(g,this)}}P.selectAll=function(g){var I=[],H,$;g=z(g);for(var ae=-1,le=this.length;++ae<le;)for(var Ae=this[ae],me=-1,Ce=Ae.length;++me<Ce;)($=Ae[me])&&(I.push(H=s(g.call($,$.__data__,me,ae))),H.parentNode=$);return U(I)};function z(g){return typeof g=="function"?g:function(){return j(g,this)}}var te="http://www.w3.org/1999/xhtml",ue={svg:"http://www.w3.org/2000/svg",xhtml:te,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};a.ns={prefix:ue,qualify:function(g){var I=g.indexOf(":"),H=g;return I>=0&&(H=g.slice(0,I))!=="xmlns"&&(g=g.slice(I+1)),ue.hasOwnProperty(H)?{space:ue[H],local:g}:g}},P.attr=function(g,I){if(arguments.length<2){if(typeof g=="string"){var H=this.node();return g=a.ns.qualify(g),g.local?H.getAttributeNS(g.space,g.local):H.getAttribute(g)}for(I in g)this.each(ve(I,g[I]));return this}return this.each(ve(g,I))};function ve(g,I){g=a.ns.qualify(g);function H(){this.removeAttribute(g)}function $(){this.removeAttributeNS(g.space,g.local)}function ae(){this.setAttribute(g,I)}function le(){this.setAttributeNS(g.space,g.local,I)}function Ae(){var Ce=I.apply(this,arguments);Ce==null?this.removeAttribute(g):this.setAttribute(g,Ce)}function me(){var Ce=I.apply(this,arguments);Ce==null?this.removeAttributeNS(g.space,g.local):this.setAttributeNS(g.space,g.local,Ce)}return I==null?g.local?$:H:typeof I=="function"?g.local?me:Ae:g.local?le:ae}function _e(g){return g.trim().replace(/\s+/g," ")}P.classed=function(g,I){if(arguments.length<2){if(typeof g=="string"){var H=this.node(),$=(g=Le(g)).length,ae=-1;if(I=H.classList){for(;++ae<$;)if(!I.contains(g[ae]))return!1}else for(I=H.getAttribute("class");++ae<$;)if(!Re(g[ae]).test(I))return!1;return!0}for(I in g)this.each(Ve(I,g[I]));return this}return this.each(Ve(g,I))};function Re(g){return new RegExp("(?:^|\\s+)"+a.requote(g)+"(?:\\s+|$)","g")}function Le(g){return(g+"").trim().split(/^|\s+/)}function Ve(g,I){g=Le(g).map(Xe);var H=g.length;function $(){for(var le=-1;++le<H;)g[le](this,I)}function ae(){for(var le=-1,Ae=I.apply(this,arguments);++le<H;)g[le](this,Ae)}return typeof I=="function"?ae:$}function Xe(g){var I=Re(g);return function(H,$){if(ae=H.classList)return $?ae.add(g):ae.remove(g);var ae=H.getAttribute("class")||"";$?(I.lastIndex=0,I.test(ae)||H.setAttribute("class",_e(ae+" "+g))):H.setAttribute("class",_e(ae.replace(I," ")))}}P.style=function(g,I,H){var $=arguments.length;if($<3){if(typeof g!="string"){$<2&&(I="");for(H in g)this.each(Ze(H,g[H],I));return this}if($<2){var ae=this.node();return p(ae).getComputedStyle(ae,null).getPropertyValue(g)}H=""}return this.each(Ze(g,I,H))};function Ze(g,I,H){function $(){this.style.removeProperty(g)}function ae(){this.style.setProperty(g,I,H)}function le(){var Ae=I.apply(this,arguments);Ae==null?this.style.removeProperty(g):this.style.setProperty(g,Ae,H)}return I==null?$:typeof I=="function"?le:ae}P.property=function(g,I){if(arguments.length<2){if(typeof g=="string")return this.node()[g];for(I in g)this.each(Te(I,g[I]));return this}return this.each(Te(g,I))};function Te(g,I){function H(){delete this[g]}function $(){this[g]=I}function ae(){var le=I.apply(this,arguments);le==null?delete this[g]:this[g]=le}return I==null?H:typeof I=="function"?ae:$}P.text=function(g){return arguments.length?this.each(typeof g=="function"?function(){var I=g.apply(this,arguments);this.textContent=I??""}:g==null?function(){this.textContent=""}:function(){this.textContent=g}):this.node().textContent},P.html=function(g){return arguments.length?this.each(typeof g=="function"?function(){var I=g.apply(this,arguments);this.innerHTML=I??""}:g==null?function(){this.innerHTML=""}:function(){this.innerHTML=g}):this.node().innerHTML},P.append=function(g){return g=we(g),this.select(function(){return this.appendChild(g.apply(this,arguments))})};function we(g){function I(){var $=this.ownerDocument,ae=this.namespaceURI;return ae===te&&$.documentElement.namespaceURI===te?$.createElement(g):$.createElementNS(ae,g)}function H(){return this.ownerDocument.createElementNS(g.space,g.local)}return typeof g=="function"?g:(g=a.ns.qualify(g)).local?H:I}P.insert=function(g,I){return g=we(g),I=q(I),this.select(function(){return this.insertBefore(g.apply(this,arguments),I.apply(this,arguments)||null)})},P.remove=function(){return this.each(be)};function be(){var g=this.parentNode;g&&g.removeChild(this)}P.data=function(g,I){var H=-1,$=this.length,ae,le;if(!arguments.length){for(g=new Array($=(ae=this[0]).length);++H<$;)(le=ae[H])&&(g[H]=le.__data__);return g}function Ae(ze,qe){var et,bt=ze.length,Rt=qe.length,at=Math.min(bt,Rt),gt=new Array(Rt),mt=new Array(Rt),It=new Array(bt),Pt,_t;if(I){var Yt=new O,ar=new Array(bt),fr;for(et=-1;++et<bt;)(Pt=ze[et])&&(Yt.has(fr=I.call(Pt,Pt.__data__,et))?It[et]=Pt:Yt.set(fr,Pt),ar[et]=fr);for(et=-1;++et<Rt;)(Pt=Yt.get(fr=I.call(qe,_t=qe[et],et)))?Pt!==!0&&(gt[et]=Pt,Pt.__data__=_t):mt[et]=ke(_t),Yt.set(fr,!0);for(et=-1;++et<bt;)et in ar&&Yt.get(ar[et])!==!0&&(It[et]=ze[et])}else{for(et=-1;++et<at;)Pt=ze[et],_t=qe[et],Pt?(Pt.__data__=_t,gt[et]=Pt):mt[et]=ke(_t);for(;et<Rt;++et)mt[et]=ke(qe[et]);for(;et<bt;++et)It[et]=ze[et]}mt.update=gt,mt.parentNode=gt.parentNode=It.parentNode=ze.parentNode,me.push(mt),Ce.push(gt),Oe.push(It)}var me=vt([]),Ce=U([]),Oe=U([]);if(typeof g=="function")for(;++H<$;)Ae(ae=this[H],g.call(ae,ae.parentNode.__data__,H));else for(;++H<$;)Ae(ae=this[H],g);return Ce.enter=function(){return me},Ce.exit=function(){return Oe},Ce};function ke(g){return{__data__:g}}P.datum=function(g){return arguments.length?this.property("__data__",g):this.property("__data__")},P.filter=function(g){var I=[],H,$,ae;typeof g!="function"&&(g=He(g));for(var le=0,Ae=this.length;le<Ae;le++){I.push(H=[]),H.parentNode=($=this[le]).parentNode;for(var me=0,Ce=$.length;me<Ce;me++)(ae=$[me])&&g.call(ae,ae.__data__,me,le)&&H.push(ae)}return U(I)};function He(g){return function(){return F(this,g)}}P.order=function(){for(var g=-1,I=this.length;++g<I;)for(var H=this[g],$=H.length-1,ae=H[$],le;--$>=0;)(le=H[$])&&(ae&&ae!==le.nextSibling&&ae.parentNode.insertBefore(le,ae),ae=le);return this},P.sort=function(g){g=Ke.apply(this,arguments);for(var I=-1,H=this.length;++I<H;)this[I].sort(g);return this.order()};function Ke(g){return arguments.length||(g=b),function(I,H){return I&&H?g(I.__data__,H.__data__):!I-!H}}P.each=function(g){return st(this,function(I,H,$){g.call(I,I.__data__,H,$)})};function st(g,I){for(var H=0,$=g.length;H<$;H++)for(var ae=g[H],le=0,Ae=ae.length,me;le<Ae;le++)(me=ae[le])&&I(me,le,H);return g}P.call=function(g){var I=s(arguments);return g.apply(I[0]=this,I),this},P.empty=function(){return!this.node()},P.node=function(){for(var g=0,I=this.length;g<I;g++)for(var H=this[g],$=0,ae=H.length;$<ae;$++){var le=H[$];if(le)return le}return null},P.size=function(){var g=0;return st(this,function(){++g}),g};function vt(g){return ye(g,pt),g}var pt=[];a.selection.enter=vt,a.selection.enter.prototype=pt,pt.append=P.append,pt.empty=P.empty,pt.node=P.node,pt.call=P.call,pt.size=P.size,pt.select=function(g){for(var I=[],H,$,ae,le,Ae,me=-1,Ce=this.length;++me<Ce;){ae=(le=this[me]).update,I.push(H=[]),H.parentNode=le.parentNode;for(var Oe=-1,ze=le.length;++Oe<ze;)(Ae=le[Oe])?(H.push(ae[Oe]=$=g.call(le.parentNode,Ae.__data__,Oe,me)),$.__data__=Ae.__data__):H.push(null)}return U(I)},pt.insert=function(g,I){return arguments.length<2&&(I=ft(this)),P.insert.call(this,g,I)};function ft(g){var I,H;return function($,ae,le){var Ae=g[le].update,me=Ae.length,Ce;for(le!=H&&(H=le,I=0),ae>=I&&(I=ae+1);!(Ce=Ae[I])&&++I<me;);return Ce}}a.select=function(g){var I;return typeof g=="string"?(I=[W(g,v)],I.parentNode=v.documentElement):(I=[g],I.parentNode=d(g)),U([I])},a.selectAll=function(g){var I;return typeof g=="string"?(I=s(j(g,v)),I.parentNode=v.documentElement):(I=s(g),I.parentNode=null),U([I])},P.on=function(g,I,H){var $=arguments.length;if($<3){if(typeof g!="string"){$<2&&(I=!1);for(H in g)this.each(lt(H,g[H],I));return this}if($<2)return($=this.node()["__on"+g])&&$._;H=!1}return this.each(lt(g,I,H))};function lt(g,I,H){var $="__on"+g,ae=g.indexOf("."),le=ot;ae>0&&(g=g.slice(0,ae));var Ae=Mt.get(g);Ae&&(g=Ae,le=Ct);function me(){var ze=this[$];ze&&(this.removeEventListener(g,ze,ze.$),delete this[$])}function Ce(){var ze=le(I,s(arguments));me.call(this),this.addEventListener(g,this[$]=ze,ze.$=H),ze._=I}function Oe(){var ze=new RegExp("^__on([^.]+)"+a.requote(g)+"$"),qe;for(var et in this)if(qe=et.match(ze)){var bt=this[et];this.removeEventListener(qe[1],bt,bt.$),delete this[et]}}return ae?I?Ce:me:I?re:Oe}var Mt=a.map({mouseenter:"mouseover",mouseleave:"mouseout"});v&&Mt.forEach(function(g){"on"+g in v&&Mt.remove(g)});function ot(g,I){return function(H){var $=a.event;a.event=H,I[0]=this.__data__;try{g.apply(this,I)}finally{a.event=$}}}function Ct(g,I){var H=ot(g,I);return function($){var ae=this,le=$.relatedTarget;(!le||le!==ae&&!(le.compareDocumentPosition(ae)&8))&&H.call(ae,$)}}var kt,St=0;function Et(g){var I=".dragsuppress-"+ ++St,H="click"+I,$=a.select(p(g)).on("touchmove"+I,xe).on("dragstart"+I,xe).on("selectstart"+I,xe);if(kt==null&&(kt="onselectstart"in g?!1:ee(g.style,"userSelect")),kt){var ae=d(g).style,le=ae[kt];ae[kt]="none"}return function(Ae){if($.on(I,null),kt&&(ae[kt]=le),Ae){var me=function(){$.on(H,null)};$.on(H,function(){xe(),me()},!0),setTimeout(me,0)}}}a.mouse=function(g){return De(g,Se())};var Ue=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function De(g,I){I.changedTouches&&(I=I.changedTouches[0]);var H=g.ownerSVGElement||g;if(H.createSVGPoint){var $=H.createSVGPoint();if(Ue<0){var ae=p(g);if(ae.scrollX||ae.scrollY){H=a.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var le=H[0][0].getScreenCTM();Ue=!(le.f||le.e),H.remove()}}return Ue?($.x=I.pageX,$.y=I.pageY):($.x=I.clientX,$.y=I.clientY),$=$.matrixTransform(g.getScreenCTM().inverse()),[$.x,$.y]}var Ae=g.getBoundingClientRect();return[I.clientX-Ae.left-g.clientLeft,I.clientY-Ae.top-g.clientTop]}a.touch=function(g,I,H){if(arguments.length<3&&(H=I,I=Se().changedTouches),I){for(var $=0,ae=I.length,le;$<ae;++$)if((le=I[$]).identifier===H)return De(g,le)}},a.behavior.drag=function(){var g=ce(ae,"drag","dragstart","dragend"),I=null,H=le(re,a.mouse,p,"mousemove","mouseup"),$=le(Ie,a.touch,G,"touchmove","touchend");function ae(){this.on("mousedown.drag",H).on("touchstart.drag",$)}function le(Ae,me,Ce,Oe,ze){return function(){var qe=this,et=a.event.target.correspondingElement||a.event.target,bt=qe.parentNode,Rt=g.of(qe,arguments),at=0,gt=Ae(),mt=".drag"+(gt==null?"":"-"+gt),It,Pt=a.select(Ce(et)).on(Oe+mt,ar).on(ze+mt,fr),_t=Et(et),Yt=me(bt,gt);I?(It=I.apply(qe,arguments),It=[It.x-Yt[0],It.y-Yt[1]]):It=[0,0],Rt({type:"dragstart"});function ar(){var ur=me(bt,gt),hr,vr;ur&&(hr=ur[0]-Yt[0],vr=ur[1]-Yt[1],at|=hr|vr,Yt=ur,Rt({type:"drag",x:ur[0]+It[0],y:ur[1]+It[1],dx:hr,dy:vr}))}function fr(){me(bt,gt)&&(Pt.on(Oe+mt,null).on(ze+mt,null),_t(at),Rt({type:"dragend"}))}}}return ae.origin=function(Ae){return arguments.length?(I=Ae,ae):I},a.rebind(ae,g,"on")};function Ie(){return a.event.changedTouches[0].identifier}a.touches=function(g,I){return arguments.length<2&&(I=Se().touches),I?s(I).map(function(H){var $=De(g,H);return $.identifier=H.identifier,$}):[]};var Fe=1e-6,We=Fe*Fe,de=Math.PI,Me=2*de,he=Me-Fe,Ee=de/2,Pe=de/180,Ne=180/de;function ht(g,I,H){return(I[0]-g[0])*(H[1]-g[1])-(I[1]-g[1])*(H[0]-g[0])}function nt(g){return g>1?Ee:g<-1?-Ee:Math.asin(g)}function Ye(g){return((g=Math.exp(g))-1/g)/2}function Be(g){return((g=Math.exp(g))+1/g)/2}function ut(g){return((g=Math.exp(2*g))-1)/(g+1)}var Dt=Math.SQRT2,Nt=2,Wt=4;a.interpolateZoom=function(g,I){var H=g[0],$=g[1],ae=g[2],le=I[0],Ae=I[1],me=I[2],Ce=le-H,Oe=Ae-$,ze=Ce*Ce+Oe*Oe,qe,et;if(ze<We)et=Math.log(me/ae)/Dt,qe=function(It){return[H+It*Ce,$+It*Oe,ae*Math.exp(Dt*It*et)]};else{var bt=Math.sqrt(ze),Rt=(me*me-ae*ae+Wt*ze)/(2*ae*Nt*bt),at=(me*me-ae*ae-Wt*ze)/(2*me*Nt*bt),gt=Math.log(Math.sqrt(Rt*Rt+1)-Rt),mt=Math.log(Math.sqrt(at*at+1)-at);et=(mt-gt)/Dt,qe=function(It){var Pt=It*et,_t=Be(gt),Yt=ae/(Nt*bt)*(_t*ut(Dt*Pt+gt)-Ye(gt));return[H+Yt*Ce,$+Yt*Oe,ae*_t/Be(Dt*Pt+gt)]}}return qe.duration=et*1e3,qe},a.behavior.zoom=function(){var g={x:0,y:0,k:1},I,H,$,ae=[960,500],le=$t,Ae=250,me=0,Ce="mousedown.zoom",Oe="mousemove.zoom",ze="mouseup.zoom",qe,et="touchstart.zoom",bt,Rt=ce(Pt,"zoomstart","zoom","zoomend"),at,gt,mt,It;Ft||(Ft="onwheel"in v?(Vt=function(){return-a.event.deltaY*(a.event.deltaMode?120:1)},"wheel"):"onmousewheel"in v?(Vt=function(){return a.event.wheelDelta},"mousewheel"):(Vt=function(){return-a.event.detail},"MozMousePixelScroll"));function Pt(ir){ir.on(Ce,Cr).on(Ft+".zoom",Zn).on("dblclick.zoom",on).on(et,jr)}Pt.event=function(ir){ir.each(function(){var Ir=Rt.of(this,arguments),Nr=g;Bo?a.select(this).transition().each("start.zoom",function(){g=this.__chart__||{x:0,y:0,k:1},vr(Ir)}).tween("zoom:zoom",function(){var $r=ae[0],Fn=ae[1],ai=H?H[0]:$r/2,Di=H?H[1]:Fn/2,Ki=a.interpolateZoom([(ai-g.x)/g.k,(Di-g.y)/g.k,$r/g.k],[(ai-Nr.x)/Nr.k,(Di-Nr.y)/Nr.k,$r/Nr.k]);return function(ea){var Ji=Ki(ea),sa=$r/Ji[2];this.__chart__=g={x:ai-Ji[0]*sa,y:Di-Ji[1]*sa,k:sa},Dr(Ir)}}).each("interrupt.zoom",function(){gr(Ir)}).each("end.zoom",function(){gr(Ir)}):(this.__chart__=g,vr(Ir),Dr(Ir),gr(Ir))})},Pt.translate=function(ir){return arguments.length?(g={x:+ir[0],y:+ir[1],k:g.k},hr(),Pt):[g.x,g.y]},Pt.scale=function(ir){return arguments.length?(g={x:g.x,y:g.y,k:null},ar(+ir),hr(),Pt):g.k},Pt.scaleExtent=function(ir){return arguments.length?(le=ir==null?$t:[+ir[0],+ir[1]],Pt):le},Pt.center=function(ir){return arguments.length?($=ir&&[+ir[0],+ir[1]],Pt):$},Pt.size=function(ir){return arguments.length?(ae=ir&&[+ir[0],+ir[1]],Pt):ae},Pt.duration=function(ir){return arguments.length?(Ae=+ir,Pt):Ae},Pt.x=function(ir){return arguments.length?(gt=ir,at=ir.copy(),g={x:0,y:0,k:1},Pt):gt},Pt.y=function(ir){return arguments.length?(It=ir,mt=ir.copy(),g={x:0,y:0,k:1},Pt):It};function _t(ir){return[(ir[0]-g.x)/g.k,(ir[1]-g.y)/g.k]}function Yt(ir){return[ir[0]*g.k+g.x,ir[1]*g.k+g.y]}function ar(ir){g.k=Math.max(le[0],Math.min(le[1],ir))}function fr(ir,Ir){Ir=Yt(Ir),g.x+=ir[0]-Ir[0],g.y+=ir[1]-Ir[1]}function ur(ir,Ir,Nr,$r){ir.__chart__={x:g.x,y:g.y,k:g.k},ar(Math.pow(2,$r)),fr(H=Ir,Nr),ir=a.select(ir),Ae>0&&(ir=ir.transition().duration(Ae)),ir.call(Pt.event)}function hr(){gt&&gt.domain(at.range().map(function(ir){return(ir-g.x)/g.k}).map(at.invert)),It&&It.domain(mt.range().map(function(ir){return(ir-g.y)/g.k}).map(mt.invert))}function vr(ir){me++||ir({type:"zoomstart"})}function Dr(ir){hr(),ir({type:"zoom",scale:g.k,translate:[g.x,g.y]})}function gr(ir){--me||(ir({type:"zoomend"}),H=null)}function Cr(){var ir=this,Ir=Rt.of(ir,arguments),Nr=0,$r=a.select(p(ir)).on(Oe,Di).on(ze,Ki),Fn=_t(a.mouse(ir)),ai=Et(ir);el.call(ir),vr(Ir);function Di(){Nr=1,fr(a.mouse(ir),Fn),Dr(Ir)}function Ki(){$r.on(Oe,null).on(ze,null),ai(Nr),gr(Ir)}}function jr(){var ir=this,Ir=Rt.of(ir,arguments),Nr={},$r=0,Fn,ai=".zoom-"+a.event.changedTouches[0].identifier,Di="touchmove"+ai,Ki="touchend"+ai,ea=[],Ji=a.select(ir),sa=Et(ir);la(),vr(Ir),Ji.on(Ce,null).on(et,la);function zi(){var Na=a.touches(ir);return Fn=g.k,Na.forEach(function(Ii){Ii.identifier in Nr&&(Nr[Ii.identifier]=_t(Ii))}),Na}function la(){var Na=a.event.target;a.select(Na).on(Di,Go).on(Ki,Qh),ea.push(Na);for(var Ii=a.event.changedTouches,Aa=0,Ja=Ii.length;Aa<Ja;++Aa)Nr[Ii[Aa].identifier]=null;var Ma=zi(),is=Date.now();if(Ma.length===1){if(is-bt<500){var Ho=Ma[0];ur(ir,Ho,Nr[Ho.identifier],Math.floor(Math.log(g.k)/Math.LN2)+1),xe()}bt=is}else if(Ma.length>1){var Ho=Ma[0],Eo=Ma[1],nl=Ho[0]-Eo[0],lf=Ho[1]-Eo[1];$r=nl*nl+lf*lf}}function Go(){var Na=a.touches(ir),Ii,Aa,Ja,Ma;el.call(ir);for(var is=0,Ho=Na.length;is<Ho;++is,Ma=null)if(Ja=Na[is],Ma=Nr[Ja.identifier]){if(Aa)break;Ii=Ja,Aa=Ma}if(Ma){var Eo=(Eo=Ja[0]-Ii[0])*Eo+(Eo=Ja[1]-Ii[1])*Eo,nl=$r&&Math.sqrt(Eo/$r);Ii=[(Ii[0]+Ja[0])/2,(Ii[1]+Ja[1])/2],Aa=[(Aa[0]+Ma[0])/2,(Aa[1]+Ma[1])/2],ar(nl*Fn)}bt=null,fr(Ii,Aa),Dr(Ir)}function Qh(){if(a.event.touches.length){for(var Na=a.event.changedTouches,Ii=0,Aa=Na.length;Ii<Aa;++Ii)delete Nr[Na[Ii].identifier];for(var Ja in Nr)return void zi()}a.selectAll(ea).on(ai,null),Ji.on(Ce,Cr).on(et,jr),sa(),gr(Ir)}}function Zn(){var ir=Rt.of(this,arguments);qe?clearTimeout(qe):(el.call(this),I=_t(H=$||a.mouse(this)),vr(ir)),qe=setTimeout(function(){qe=null,gr(ir)},50),xe(),ar(Math.pow(2,Vt()*.002)*g.k),fr(H,I),Dr(ir)}function on(){var ir=a.mouse(this),Ir=Math.log(g.k)/Math.LN2;ur(this,ir,_t(ir),a.event.shiftKey?Math.ceil(Ir)-1:Math.floor(Ir)+1)}return a.rebind(Pt,Rt,"on")};var $t=[0,1/0],Vt,Ft;a.color=qt;function qt(){}qt.prototype.toString=function(){return this.rgb()+""},a.hsl=Gt;function Gt(g,I,H){return this instanceof Gt?(this.h=+g,this.s=+I,void(this.l=+H)):arguments.length<2?g instanceof Gt?new Gt(g.h,g.s,g.l):xt(""+g,yt,Gt):new Gt(g,I,H)}var Xt=Gt.prototype=new qt;Xt.brighter=function(g){return g=Math.pow(.7,arguments.length?g:1),new Gt(this.h,this.s,this.l/g)},Xt.darker=function(g){return g=Math.pow(.7,arguments.length?g:1),new Gt(this.h,this.s,g*this.l)},Xt.rgb=function(){return sr(this.h,this.s,this.l)};function sr(g,I,H){var $,ae;g=isNaN(g)?0:(g%=360)<0?g+360:g,I=isNaN(I)||I<0?0:I>1?1:I,H=H<0?0:H>1?1:H,ae=H<=.5?H*(1+I):H+I-H*I,$=2*H-ae;function le(me){return me>360?me-=360:me<0&&(me+=360),me<60?$+(ae-$)*me/60:me<180?ae:me<240?$+(ae-$)*(240-me)/60:$}function Ae(me){return Math.round(le(me)*255)}return new rt(Ae(g+120),Ae(g),Ae(g-120))}a.hcl=jt;function jt(g,I,H){return this instanceof jt?(this.h=+g,this.c=+I,void(this.l=+H)):arguments.length<2?g instanceof jt?new jt(g.h,g.c,g.l):g instanceof Ht?Je(g.l,g.a,g.b):Je((g=Lt((g=a.rgb(g)).r,g.g,g.b)).l,g.a,g.b):new jt(g,I,H)}var Ut=jt.prototype=new qt;Ut.brighter=function(g){return new jt(this.h,this.c,Math.min(100,this.l+lr*(arguments.length?g:1)))},Ut.darker=function(g){return new jt(this.h,this.c,Math.max(0,this.l-lr*(arguments.length?g:1)))},Ut.rgb=function(){return tr(this.h,this.c,this.l).rgb()};function tr(g,I,H){return isNaN(g)&&(g=0),isNaN(I)&&(I=0),new Ht(H,Math.cos(g*=Pe)*I,Math.sin(g)*I)}a.lab=Ht;function Ht(g,I,H){return this instanceof Ht?(this.l=+g,this.a=+I,void(this.b=+H)):arguments.length<2?g instanceof Ht?new Ht(g.l,g.a,g.b):g instanceof jt?tr(g.h,g.c,g.l):Lt((g=rt(g)).r,g.g,g.b):new Ht(g,I,H)}var lr=18,yr=.95047,xr=1,er=1.08883,fe=Ht.prototype=new qt;fe.brighter=function(g){return new Ht(Math.min(100,this.l+lr*(arguments.length?g:1)),this.a,this.b)},fe.darker=function(g){return new Ht(Math.max(0,this.l-lr*(arguments.length?g:1)),this.a,this.b)},fe.rgb=function(){return Q(this.l,this.a,this.b)};function Q(g,I,H){var $=(g+16)/116,ae=$+I/500,le=$-H/200;return ae=Ge(ae)*yr,$=Ge($)*xr,le=Ge(le)*er,new rt(it(3.2404542*ae-1.5371385*$-.4985314*le),it(-.969266*ae+1.8760108*$+.041556*le),it(.0556434*ae-.2040259*$+1.0572252*le))}function Je(g,I,H){return g>0?new jt(Math.atan2(H,I)*Ne,Math.sqrt(I*I+H*H),g):new jt(NaN,NaN,g)}function Ge(g){return g>.206893034?g*g*g:(g-.13793103448275862)/7.787037}function Qe(g){return g>.008856?Math.pow(g,.3333333333333333):7.787037*g+.13793103448275862}function it(g){return Math.round(255*(g<=.00304?12.92*g:1.055*Math.pow(g,.4166666666666667)-.055))}a.rgb=rt;function rt(g,I,H){return this instanceof rt?(this.r=~~g,this.g=~~I,void(this.b=~~H)):arguments.length<2?g instanceof rt?new rt(g.r,g.g,g.b):xt(""+g,rt,sr):new rt(g,I,H)}function $e(g){return new rt(g>>16,g>>8&255,g&255)}function je(g){return $e(g)+""}var ct=rt.prototype=new qt;ct.brighter=function(g){g=Math.pow(.7,arguments.length?g:1);var I=this.r,H=this.g,$=this.b,ae=30;return!I&&!H&&!$?new rt(ae,ae,ae):(I&&I<ae&&(I=ae),H&&H<ae&&(H=ae),$&&$<ae&&($=ae),new rt(Math.min(255,I/g),Math.min(255,H/g),Math.min(255,$/g)))},ct.darker=function(g){return g=Math.pow(.7,arguments.length?g:1),new rt(g*this.r,g*this.g,g*this.b)},ct.hsl=function(){return yt(this.r,this.g,this.b)},ct.toString=function(){return"#"+dt(this.r)+dt(this.g)+dt(this.b)};function dt(g){return g<16?"0"+Math.max(0,g).toString(16):Math.min(255,g).toString(16)}function xt(g,I,H){var $=0,ae=0,le=0,Ae,me,Ce;if(Ae=/([a-z]+)\((.*)\)/.exec(g=g.toLowerCase()),Ae)switch(me=Ae[2].split(","),Ae[1]){case"hsl":return H(parseFloat(me[0]),parseFloat(me[1])/100,parseFloat(me[2])/100);case"rgb":return I(At(me[0]),At(me[1]),At(me[2]))}return(Ce=Ot.get(g))?I(Ce.r,Ce.g,Ce.b):(g!=null&&g.charAt(0)==="#"&&!isNaN(Ce=parseInt(g.slice(1),16))&&(g.length===4?($=(Ce&3840)>>4,$=$>>4|$,ae=Ce&240,ae=ae>>4|ae,le=Ce&15,le=le<<4|le):g.length===7&&($=(Ce&16711680)>>16,ae=(Ce&65280)>>8,le=Ce&255)),I($,ae,le))}function yt(g,I,H){var $=Math.min(g/=255,I/=255,H/=255),ae=Math.max(g,I,H),le=ae-$,Ae,me,Ce=(ae+$)/2;return le?(me=Ce<.5?le/(ae+$):le/(2-ae-$),g==ae?Ae=(I-H)/le+(I<H?6:0):I==ae?Ae=(H-g)/le+2:Ae=(g-I)/le+4,Ae*=60):(Ae=NaN,me=Ce>0&&Ce<1?0:Ae),new Gt(Ae,me,Ce)}function Lt(g,I,H){g=wt(g),I=wt(I),H=wt(H);var $=Qe((.4124564*g+.3575761*I+.1804375*H)/yr),ae=Qe((.2126729*g+.7151522*I+.072175*H)/xr),le=Qe((.0193339*g+.119192*I+.9503041*H)/er);return Ht(116*ae-16,500*($-ae),200*(ae-le))}function wt(g){return(g/=255)<=.04045?g/12.92:Math.pow((g+.055)/1.055,2.4)}function At(g){var I=parseFloat(g);return g.charAt(g.length-1)==="%"?Math.round(I*2.55):I}var Ot=a.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ot.forEach(function(g,I){Ot.set(g,$e(I))});function zt(g){return typeof g=="function"?g:function(){return g}}a.functor=zt,a.xhr=Zt(G);function Zt(g){return function(I,H,$){return arguments.length===2&&typeof H=="function"&&($=H,H=null),Kt(I,H,g,$)}}function Kt(g,I,H,$){var ae={},le=a.dispatch("beforesend","progress","load","error"),Ae={},me=new XMLHttpRequest,Ce=null;self.XDomainRequest&&!("withCredentials"in me)&&/^(http(s)?:)?\/\//.test(g)&&(me=new XDomainRequest),"onload"in me?me.onload=me.onerror=Oe:me.onreadystatechange=function(){me.readyState>3&&Oe()};function Oe(){var ze=me.status,qe;if(!ze&&or(me)||ze>=200&&ze<300||ze===304){try{qe=H.call(ae,me)}catch(et){le.error.call(ae,et);return}le.load.call(ae,qe)}else le.error.call(ae,me)}return me.onprogress=function(ze){var qe=a.event;a.event=ze;try{le.progress.call(ae,me)}finally{a.event=qe}},ae.header=function(ze,qe){return ze=(ze+"").toLowerCase(),arguments.length<2?Ae[ze]:(qe==null?delete Ae[ze]:Ae[ze]=qe+"",ae)},ae.mimeType=function(ze){return arguments.length?(I=ze==null?null:ze+"",ae):I},ae.responseType=function(ze){return arguments.length?(Ce=ze,ae):Ce},ae.response=function(ze){return H=ze,ae},["get","post"].forEach(function(ze){ae[ze]=function(){return ae.send.apply(ae,[ze].concat(s(arguments)))}}),ae.send=function(ze,qe,et){if(arguments.length===2&&typeof qe=="function"&&(et=qe,qe=null),me.open(ze,g,!0),I!=null&&!("accept"in Ae)&&(Ae.accept=I+",*/*"),me.setRequestHeader)for(var bt in Ae)me.setRequestHeader(bt,Ae[bt]);return I!=null&&me.overrideMimeType&&me.overrideMimeType(I),Ce!=null&&(me.responseType=Ce),et!=null&&ae.on("error",et).on("load",function(Rt){et(null,Rt)}),le.beforesend.call(ae,me),me.send(qe??null),ae},ae.abort=function(){return me.abort(),ae},a.rebind(ae,le,"on"),$==null?ae:ae.get(cr($))}function cr(g){return g.length===1?function(I,H){g(I==null?H:null)}:g}function or(g){var I=g.responseType;return I&&I!=="text"?g.response:g.responseText}a.dsv=function(g,I){var H=new RegExp('["'+g+`
]`),$=g.charCodeAt(0);function ae(Oe,ze,qe){arguments.length<3&&(qe=ze,ze=null);var et=Kt(Oe,I,ze==null?le:Ae(ze),qe);return et.row=function(bt){return arguments.length?et.response((ze=bt)==null?le:Ae(bt)):ze},et}function le(Oe){return ae.parse(Oe.responseText)}function Ae(Oe){return function(ze){return ae.parse(ze.responseText,Oe)}}ae.parse=function(Oe,ze){var qe;return ae.parseRows(Oe,function(et,bt){if(qe)return qe(et,bt-1);var Rt=function(at){for(var gt={},mt=et.length,It=0;It<mt;++It)gt[et[It]]=at[It];return gt};qe=ze?function(at,gt){return ze(Rt(at),gt)}:Rt})},ae.parseRows=function(Oe,ze){var qe={},et={},bt=[],Rt=Oe.length,at=0,gt=0,mt,It;function Pt(){if(at>=Rt)return et;if(It)return It=!1,qe;var Yt=at;if(Oe.charCodeAt(Yt)===34){for(var ar=Yt;ar++<Rt;)if(Oe.charCodeAt(ar)===34){if(Oe.charCodeAt(ar+1)!==34)break;++ar}at=ar+2;var fr=Oe.charCodeAt(ar+1);return fr===13?(It=!0,Oe.charCodeAt(ar+2)===10&&++at):fr===10&&(It=!0),Oe.slice(Yt+1,ar).replace(/""/g,'"')}for(;at<Rt;){var fr=Oe.charCodeAt(at++),ur=1;if(fr===10)It=!0;else if(fr===13)It=!0,Oe.charCodeAt(at)===10&&(++at,++ur);else if(fr!==$)continue;return Oe.slice(Yt,at-ur)}return Oe.slice(Yt)}for(;(mt=Pt())!==et;){for(var _t=[];mt!==qe&&mt!==et;)_t.push(mt),mt=Pt();ze&&(_t=ze(_t,gt++))==null||bt.push(_t)}return bt},ae.format=function(Oe){if(Array.isArray(Oe[0]))return ae.formatRows(Oe);var ze=new Y,qe=[];return Oe.forEach(function(et){for(var bt in et)ze.has(bt)||qe.push(ze.add(bt))}),[qe.map(Ce).join(g)].concat(Oe.map(function(et){return qe.map(function(bt){return Ce(et[bt])}).join(g)})).join(`
`)},ae.formatRows=function(Oe){return Oe.map(me).join(`
`)};function me(Oe){return Oe.map(Ce).join(g)}function Ce(Oe){return H.test(Oe)?'"'+Oe.replace(/\"/g,'""')+'"':Oe}return ae},a.csv=a.dsv(",","text/csv"),a.tsv=a.dsv("	","text/tab-separated-values");var nr,mr,pr,Ar,en=this[ee(this,"requestAnimationFrame")]||function(g){setTimeout(g,17)};a.timer=function(){Lr.apply(this,arguments)};function Lr(g,I,H){var $=arguments.length;$<2&&(I=0),$<3&&(H=Date.now());var ae=H+I,le={c:g,t:ae,n:null};return mr?mr.n=le:nr=le,mr=le,pr||(Ar=clearTimeout(Ar),pr=1,en(Pr)),le}function Pr(){var g=nn(),I=Dn()-g;I>24?(isFinite(I)&&(clearTimeout(Ar),Ar=setTimeout(Pr,I)),pr=0):(pr=1,en(Pr))}a.timer.flush=function(){nn(),Dn()};function nn(){for(var g=Date.now(),I=nr;I;)g>=I.t&&I.c(g-I.t)&&(I.c=null),I=I.n;return g}function Dn(){for(var g,I=nr,H=1/0;I;)I.c?(I.t<H&&(H=I.t),I=(g=I).n):I=g?g.n=I.n:nr=I.n;return mr=g,H}a.round=function(g,I){return I?Math.round(g*(I=Math.pow(10,I)))/I:Math.round(g)},a.geom={};function Pn(g){return g[0]}function _r(g){return g[1]}a.geom.hull=function(g){var I=Pn,H=_r;if(arguments.length)return $(g);function $(ae){if(ae.length<3)return[];var le=zt(I),Ae=zt(H),me,Ce=ae.length,Oe=[],ze=[];for(me=0;me<Ce;me++)Oe.push([+le.call(this,ae[me],me),+Ae.call(this,ae[me],me),me]);for(Oe.sort(Mr),me=0;me<Ce;me++)ze.push([Oe[me][0],-Oe[me][1]]);var qe=mn(Oe),et=mn(ze),bt=et[0]===qe[0],Rt=et[et.length-1]===qe[qe.length-1],at=[];for(me=qe.length-1;me>=0;--me)at.push(ae[Oe[qe[me]][2]]);for(me=+bt;me<et.length-Rt;++me)at.push(ae[Oe[et[me]][2]]);return at}return $.x=function(ae){return arguments.length?(I=ae,$):I},$.y=function(ae){return arguments.length?(H=ae,$):H},$};function mn(g){for(var I=g.length,H=[0,1],$=2,ae=2;ae<I;ae++){for(;$>1&&ht(g[H[$-2]],g[H[$-1]],g[ae])<=0;)--$;H[$++]=ae}return H.slice(0,$)}function Mr(g,I){return g[0]-I[0]||g[1]-I[1]}a.geom.polygon=function(g){return ye(g,Br),g};var Br=a.geom.polygon.prototype=[];Br.area=function(){for(var g=-1,I=this.length,H,$=this[I-1],ae=0;++g<I;)H=$,$=this[g],ae+=H[1]*$[0]-H[0]*$[1];return ae*.5},Br.centroid=function(g){var I=-1,H=this.length,$=0,ae=0,le,Ae=this[H-1],me;for(arguments.length||(g=-1/(6*this.area()));++I<H;)le=Ae,Ae=this[I],me=le[0]*Ae[1]-Ae[0]*le[1],$+=(le[0]+Ae[0])*me,ae+=(le[1]+Ae[1])*me;return[$*g,ae*g]},Br.clip=function(g){for(var I,H=Gr(g),$=-1,ae=this.length-Gr(this),le,Ae,me=this[ae-1],Ce,Oe,ze;++$<ae;){for(I=g.slice(),g.length=0,Ce=this[$],Oe=I[(Ae=I.length-H)-1],le=-1;++le<Ae;)ze=I[le],zr(ze,me,Ce)?(zr(Oe,me,Ce)||g.push(Wr(Oe,ze,me,Ce)),g.push(ze)):zr(Oe,me,Ce)&&g.push(Wr(Oe,ze,me,Ce)),Oe=ze;H&&g.push(g[0]),me=Ce}return g};function zr(g,I,H){return(H[0]-I[0])*(g[1]-I[1])<(H[1]-I[1])*(g[0]-I[0])}function Wr(g,I,H,$){var ae=g[0],le=H[0],Ae=I[0]-ae,me=$[0]-le,Ce=g[1],Oe=H[1],ze=I[1]-Ce,qe=$[1]-Oe,et=(me*(Ce-Oe)-qe*(ae-le))/(qe*Ae-me*ze);return[ae+et*Ae,Ce+et*ze]}function Gr(g){var I=g[0],H=g[g.length-1];return!(I[0]-H[0]||I[1]-H[1])}var Qr,Ur,an,Un=[],xn,Jr,di=[];function ni(){zo(this),this.edge=this.site=this.circle=null}function Bn(g){var I=Un.pop()||new ni;return I.site=g,I}function jn(g){qi(g),an.remove(g),Un.push(g),zo(g)}function aa(g){var I=g.circle,H=I.x,$=I.cy,ae={x:H,y:$},le=g.P,Ae=g.N,me=[g];jn(g);for(var Ce=le;Ce.circle&&m(H-Ce.circle.x)<Fe&&m($-Ce.circle.cy)<Fe;)le=Ce.P,me.unshift(Ce),jn(Ce),Ce=le;me.unshift(Ce),qi(Ce);for(var Oe=Ae;Oe.circle&&m(H-Oe.circle.x)<Fe&&m($-Oe.circle.cy)<Fe;)Ae=Oe.N,me.push(Oe),jn(Oe),Oe=Ae;me.push(Oe),qi(Oe);var ze=me.length,qe;for(qe=1;qe<ze;++qe)Oe=me[qe],Ce=me[qe-1],Za(Oe.edge,Ce.site,Oe.site,ae);Ce=me[0],Oe=me[ze-1],Oe.edge=To(Ce.site,Oe.site,null,ae),Qi(Ce),Qi(Oe)}function oa(g){for(var I=g.x,H=g.y,$,ae,le,Ae,me=an._;me;)if(le=_i(me,H)-I,le>Fe)me=me.L;else if(Ae=I-pi(me,H),Ae>Fe){if(!me.R){$=me;break}me=me.R}else{le>-Fe?($=me.P,ae=me):Ae>-Fe?($=me,ae=me.N):$=ae=me;break}var Ce=Bn(g);if(an.insert($,Ce),!(!$&&!ae)){if($===ae){qi($),ae=Bn($.site),an.insert(Ce,ae),Ce.edge=ae.edge=To($.site,Ce.site),Qi($),Qi(ae);return}if(!ae){Ce.edge=To($.site,Ce.site);return}qi($),qi(ae);var Oe=$.site,ze=Oe.x,qe=Oe.y,et=g.x-ze,bt=g.y-qe,Rt=ae.site,at=Rt.x-ze,gt=Rt.y-qe,mt=2*(et*gt-bt*at),It=et*et+bt*bt,Pt=at*at+gt*gt,_t={x:(gt*It-bt*Pt)/mt+ze,y:(et*Pt-at*It)/mt+qe};Za(ae.edge,Oe,Rt,_t),Ce.edge=To(Oe,g,null,_t),ae.edge=To(g,Rt,null,_t),Qi($),Qi(ae)}}function _i(g,I){var H=g.site,$=H.x,ae=H.y,le=ae-I;if(!le)return $;var Ae=g.P;if(!Ae)return-1/0;H=Ae.site;var me=H.x,Ce=H.y,Oe=Ce-I;if(!Oe)return me;var ze=me-$,qe=1/le-1/Oe,et=ze/Oe;return qe?(-et+Math.sqrt(et*et-2*qe*(ze*ze/(-2*Oe)-Ce+Oe/2+ae-le/2)))/qe+$:($+me)/2}function pi(g,I){var H=g.N;if(H)return _i(H,I);var $=g.site;return $.y===I?$.x:1/0}function lo(g){this.site=g,this.edges=[]}lo.prototype.prepare=function(){for(var g=this.edges,I=g.length,H;I--;)H=g[I].edge,(!H.b||!H.a)&&g.splice(I,1);return g.sort(Xn),g.length};function No(g){for(var I=g[0][0],H=g[1][0],$=g[0][1],ae=g[1][1],le,Ae,me,Ce,Oe=Ur,ze=Oe.length,qe,et,bt,Rt,at,gt;ze--;)if(qe=Oe[ze],!(!qe||!qe.prepare()))for(bt=qe.edges,Rt=bt.length,et=0;et<Rt;)gt=bt[et].end(),me=gt.x,Ce=gt.y,at=bt[++et%Rt].start(),le=at.x,Ae=at.y,(m(me-le)>Fe||m(Ce-Ae)>Fe)&&(bt.splice(et,0,new Oo(ps(qe.site,gt,m(me-I)<Fe&&ae-Ce>Fe?{x:I,y:m(le-I)<Fe?Ae:ae}:m(Ce-ae)<Fe&&H-me>Fe?{x:m(Ae-ae)<Fe?le:H,y:ae}:m(me-H)<Fe&&Ce-$>Fe?{x:H,y:m(le-H)<Fe?Ae:$}:m(Ce-$)<Fe&&me-I>Fe?{x:m(Ae-$)<Fe?le:I,y:$}:null),qe.site,null)),++Rt)}function Xn(g,I){return I.angle-g.angle}function va(){zo(this),this.x=this.y=this.arc=this.site=this.cy=null}function Qi(g){var I=g.P,H=g.N;if(!(!I||!H)){var $=I.site,ae=g.site,le=H.site;if($!==le){var Ae=ae.x,me=ae.y,Ce=$.x-Ae,Oe=$.y-me,ze=le.x-Ae,gt=le.y-me,qe=2*(Ce*gt-Oe*ze);if(!(qe>=-We)){var et=Ce*Ce+Oe*Oe,bt=ze*ze+gt*gt,Rt=(gt*et-Oe*bt)/qe,at=(Ce*bt-ze*et)/qe,gt=at+me,mt=di.pop()||new va;mt.arc=g,mt.site=ae,mt.x=Rt+Ae,mt.y=gt+Math.sqrt(Rt*Rt+at*at),mt.cy=gt,g.circle=mt;for(var It=null,Pt=Jr._;Pt;)if(mt.y<Pt.y||mt.y===Pt.y&&mt.x<=Pt.x)if(Pt.L)Pt=Pt.L;else{It=Pt.P;break}else if(Pt.R)Pt=Pt.R;else{It=Pt;break}Jr.insert(It,mt),It||(xn=mt)}}}}function qi(g){var I=g.circle;I&&(I.P||(xn=I.N),Jr.remove(I),di.push(I),zo(I),g.circle=null)}function ln(g,I,H,$){return function(ae){var le=ae.a,Ae=ae.b,me=le.x,Ce=le.y,Oe=Ae.x,ze=Ae.y,qe=0,et=1,bt=Oe-me,Rt=ze-Ce,at;if(at=g-me,!(!bt&&at>0)){if(at/=bt,bt<0){if(at<qe)return;at<et&&(et=at)}else if(bt>0){if(at>et)return;at>qe&&(qe=at)}if(at=H-me,!(!bt&&at<0)){if(at/=bt,bt<0){if(at>et)return;at>qe&&(qe=at)}else if(bt>0){if(at<qe)return;at<et&&(et=at)}if(at=I-Ce,!(!Rt&&at>0)){if(at/=Rt,Rt<0){if(at<qe)return;at<et&&(et=at)}else if(Rt>0){if(at>et)return;at>qe&&(qe=at)}if(at=$-Ce,!(!Rt&&at<0)){if(at/=Rt,Rt<0){if(at>et)return;at>qe&&(qe=at)}else if(Rt>0){if(at<qe)return;at<et&&(et=at)}return qe>0&&(ae.a={x:me+qe*bt,y:Ce+qe*Rt}),et<1&&(ae.b={x:me+et*bt,y:Ce+et*Rt}),ae}}}}}}function kn(g){for(var I=Qr,H=ln(g[0][0],g[0][1],g[1][0],g[1][1]),$=I.length,ae;$--;)ae=I[$],(!Ta(ae,g)||!H(ae)||m(ae.a.x-ae.b.x)<Fe&&m(ae.a.y-ae.b.y)<Fe)&&(ae.a=ae.b=null,I.splice($,1))}function Ta(g,I){var H=g.b;if(H)return!0;var $=g.a,ae=I[0][0],le=I[1][0],Ae=I[0][1],me=I[1][1],Ce=g.l,Oe=g.r,ze=Ce.x,qe=Ce.y,et=Oe.x,bt=Oe.y,Rt=(ze+et)/2,at=(qe+bt)/2,gt,mt;if(bt===qe){if(Rt<ae||Rt>=le)return;if(ze>et){if(!$)$={x:Rt,y:Ae};else if($.y>=me)return;H={x:Rt,y:me}}else{if(!$)$={x:Rt,y:me};else if($.y<Ae)return;H={x:Rt,y:Ae}}}else if(gt=(ze-et)/(bt-qe),mt=at-gt*Rt,gt<-1||gt>1)if(ze>et){if(!$)$={x:(Ae-mt)/gt,y:Ae};else if($.y>=me)return;H={x:(me-mt)/gt,y:me}}else{if(!$)$={x:(me-mt)/gt,y:me};else if($.y<Ae)return;H={x:(Ae-mt)/gt,y:Ae}}else if(qe<bt){if(!$)$={x:ae,y:gt*ae+mt};else if($.x>=le)return;H={x:le,y:gt*le+mt}}else{if(!$)$={x:le,y:gt*le+mt};else if($.x<ae)return;H={x:ae,y:gt*ae+mt}}return g.a=$,g.b=H,!0}function uo(g,I){this.l=g,this.r=I,this.a=this.b=null}function To(g,I,H,$){var ae=new uo(g,I);return Qr.push(ae),H&&Za(ae,g,I,H),$&&Za(ae,I,g,$),Ur[g.i].edges.push(new Oo(ae,g,I)),Ur[I.i].edges.push(new Oo(ae,I,g)),ae}function ps(g,I,H){var $=new uo(g,null);return $.a=I,$.b=H,Qr.push($),$}function Za(g,I,H,$){!g.a&&!g.b?(g.a=$,g.l=I,g.r=H):g.l===H?g.b=$:g.a=$}function Oo(g,I,H){var $=g.a,ae=g.b;this.edge=g,this.site=I,this.angle=H?Math.atan2(H.y-I.y,H.x-I.x):g.l===I?Math.atan2(ae.x-$.x,$.y-ae.y):Math.atan2($.x-ae.x,ae.y-$.y)}Oo.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function rs(){this._=null}function zo(g){g.U=g.C=g.L=g.R=g.P=g.N=null}rs.prototype={insert:function(g,I){var H,$,ae;if(g){if(I.P=g,I.N=g.N,g.N&&(g.N.P=I),g.N=I,g.R){for(g=g.R;g.L;)g=g.L;g.L=I}else g.R=I;H=g}else this._?(g=ou(this._),I.P=null,I.N=g,g.P=g.L=I,H=g):(I.P=I.N=null,this._=I,H=null);for(I.L=I.R=null,I.U=H,I.C=!0,g=I;H&&H.C;)$=H.U,H===$.L?(ae=$.R,ae&&ae.C?(H.C=ae.C=!1,$.C=!0,g=$):(g===H.R&&(bo(this,H),g=H,H=g.U),H.C=!1,$.C=!0,Ao(this,$))):(ae=$.L,ae&&ae.C?(H.C=ae.C=!1,$.C=!0,g=$):(g===H.L&&(Ao(this,H),g=H,H=g.U),H.C=!1,$.C=!0,bo(this,$))),H=g.U;this._.C=!1},remove:function(g){g.N&&(g.N.P=g.P),g.P&&(g.P.N=g.N),g.N=g.P=null;var I=g.U,H,$=g.L,ae=g.R,le,Ae;if($?ae?le=ou(ae):le=$:le=ae,I?I.L===g?I.L=le:I.R=le:this._=le,$&&ae?(Ae=le.C,le.C=g.C,le.L=$,$.U=le,le!==ae?(I=le.U,le.U=g.U,g=le.R,I.L=g,le.R=ae,ae.U=le):(le.U=I,I=le,g=le.R)):(Ae=g.C,g=le),g&&(g.U=I),!Ae){if(g&&g.C){g.C=!1;return}do{if(g===this._)break;if(g===I.L){if(H=I.R,H.C&&(H.C=!1,I.C=!0,bo(this,I),H=I.R),H.L&&H.L.C||H.R&&H.R.C){(!H.R||!H.R.C)&&(H.L.C=!1,H.C=!0,Ao(this,H),H=I.R),H.C=I.C,I.C=H.R.C=!1,bo(this,I),g=this._;break}}else if(H=I.L,H.C&&(H.C=!1,I.C=!0,Ao(this,I),H=I.L),H.L&&H.L.C||H.R&&H.R.C){(!H.L||!H.L.C)&&(H.R.C=!1,H.C=!0,bo(this,H),H=I.L),H.C=I.C,I.C=H.L.C=!1,Ao(this,I),g=this._;break}H.C=!0,g=I,I=I.U}while(!g.C);g&&(g.C=!1)}}};function bo(g,I){var H=I,$=I.R,ae=H.U;ae?ae.L===H?ae.L=$:ae.R=$:g._=$,$.U=ae,H.U=$,H.R=$.L,H.R&&(H.R.U=H),$.L=H}function Ao(g,I){var H=I,$=I.L,ae=H.U;ae?ae.L===H?ae.L=$:ae.R=$:g._=$,$.U=ae,H.U=$,H.L=$.R,H.L&&(H.L.U=H),$.R=H}function ou(g){for(;g.L;)g=g.L;return g}function pl(g,I){var H=g.sort(vc).pop(),$,ae,le;for(Qr=[],Ur=new Array(g.length),an=new rs,Jr=new rs;;)if(le=xn,H&&(!le||H.y<le.y||H.y===le.y&&H.x<le.x))(H.x!==$||H.y!==ae)&&(Ur[H.i]=new lo(H),oa(H),$=H.x,ae=H.y),H=g.pop();else if(le)aa(le.arc);else break;I&&(kn(I),No(I));var Ae={cells:Ur,edges:Qr};return an=Jr=Qr=Ur=null,Ae}function vc(g,I){return I.y-g.y||I.x-g.x}a.geom.voronoi=function(g){var I=Pn,H=_r,$=I,ae=H,le=Ws;if(g)return Ae(g);function Ae(Ce){var Oe=new Array(Ce.length),ze=le[0][0],qe=le[0][1],et=le[1][0],bt=le[1][1];return pl(me(Ce),le).cells.forEach(function(Rt,at){var gt=Rt.edges,mt=Rt.site,It=Oe[at]=gt.length?gt.map(function(Pt){var _t=Pt.start();return[_t.x,_t.y]}):mt.x>=ze&&mt.x<=et&&mt.y>=qe&&mt.y<=bt?[[ze,bt],[et,bt],[et,qe],[ze,qe]]:[];It.point=Ce[at]}),Oe}function me(Ce){return Ce.map(function(Oe,ze){return{x:Math.round($(Oe,ze)/Fe)*Fe,y:Math.round(ae(Oe,ze)/Fe)*Fe,i:ze}})}return Ae.links=function(Ce){return pl(me(Ce)).edges.filter(function(Oe){return Oe.l&&Oe.r}).map(function(Oe){return{source:Ce[Oe.l.i],target:Ce[Oe.r.i]}})},Ae.triangles=function(Ce){var Oe=[];return pl(me(Ce)).cells.forEach(function(ze,qe){for(var et=ze.site,bt=ze.edges.sort(Xn),Rt=-1,at=bt.length,gt,mt=bt[at-1].edge,It=mt.l===et?mt.r:mt.l;++Rt<at;)gt=It,mt=bt[Rt].edge,It=mt.l===et?mt.r:mt.l,qe<gt.i&&qe<It.i&&dc(et,gt,It)<0&&Oe.push([Ce[qe],Ce[gt.i],Ce[It.i]])}),Oe},Ae.x=function(Ce){return arguments.length?($=zt(I=Ce),Ae):I},Ae.y=function(Ce){return arguments.length?(ae=zt(H=Ce),Ae):H},Ae.clipExtent=function(Ce){return arguments.length?(le=Ce??Ws,Ae):le===Ws?null:le},Ae.size=function(Ce){return arguments.length?Ae.clipExtent(Ce&&[[0,0],Ce]):le===Ws?null:le&&le[1]},Ae};var Ws=[[-1e6,-1e6],[1e6,1e6]];function dc(g,I,H){return(g.x-H.x)*(I.y-g.y)-(g.x-I.x)*(H.y-g.y)}a.geom.delaunay=function(g){return a.geom.voronoi().triangles(g)},a.geom.quadtree=function(g,I,H,$,ae){var le=Pn,Ae=_r,me;if(me=arguments.length)return le=pc,Ae=gc,me===3&&(ae=H,$=I,H=I=0),Ce(g);function Ce(Oe){var ze,qe=zt(le),et=zt(Ae),bt,Rt,at,gt,mt,It,Pt,_t;if(I!=null)mt=I,It=H,Pt=$,_t=ae;else if(Pt=_t=-(mt=It=1/0),bt=[],Rt=[],gt=Oe.length,me)for(at=0;at<gt;++at)ze=Oe[at],ze.x<mt&&(mt=ze.x),ze.y<It&&(It=ze.y),ze.x>Pt&&(Pt=ze.x),ze.y>_t&&(_t=ze.y),bt.push(ze.x),Rt.push(ze.y);else for(at=0;at<gt;++at){var Yt=+qe(ze=Oe[at],at),ar=+et(ze,at);Yt<mt&&(mt=Yt),ar<It&&(It=ar),Yt>Pt&&(Pt=Yt),ar>_t&&(_t=ar),bt.push(Yt),Rt.push(ar)}var fr=Pt-mt,ur=_t-It;fr>ur?_t=It+fr:Pt=mt+ur;function hr(gr,Cr,jr,Zn,on,ir,Ir,Nr){if(!(isNaN(jr)||isNaN(Zn)))if(gr.leaf){var $r=gr.x,Fn=gr.y;if($r!=null)if(m($r-jr)+m(Fn-Zn)<.01)vr(gr,Cr,jr,Zn,on,ir,Ir,Nr);else{var ai=gr.point;gr.x=gr.y=gr.point=null,vr(gr,ai,$r,Fn,on,ir,Ir,Nr),vr(gr,Cr,jr,Zn,on,ir,Ir,Nr)}else gr.x=jr,gr.y=Zn,gr.point=Cr}else vr(gr,Cr,jr,Zn,on,ir,Ir,Nr)}function vr(gr,Cr,jr,Zn,on,ir,Ir,Nr){var $r=(on+Ir)*.5,Fn=(ir+Nr)*.5,ai=jr>=$r,Di=Zn>=Fn,Ki=Di<<1|ai;gr.leaf=!1,gr=gr.nodes[Ki]||(gr.nodes[Ki]=su()),ai?on=$r:Ir=$r,Di?ir=Fn:Nr=Fn,hr(gr,Cr,jr,Zn,on,ir,Ir,Nr)}var Dr=su();if(Dr.add=function(gr){hr(Dr,gr,+qe(gr,++at),+et(gr,at),mt,It,Pt,_t)},Dr.visit=function(gr){gs(gr,Dr,mt,It,Pt,_t)},Dr.find=function(gr){return yc(Dr,gr[0],gr[1],mt,It,Pt,_t)},at=-1,I==null){for(;++at<gt;)hr(Dr,Oe[at],bt[at],Rt[at],mt,It,Pt,_t);--at}else Oe.forEach(Dr.add);return bt=Rt=Oe=ze=null,Dr}return Ce.x=function(Oe){return arguments.length?(le=Oe,Ce):le},Ce.y=function(Oe){return arguments.length?(Ae=Oe,Ce):Ae},Ce.extent=function(Oe){return arguments.length?(Oe==null?I=H=$=ae=null:(I=+Oe[0][0],H=+Oe[0][1],$=+Oe[1][0],ae=+Oe[1][1]),Ce):I==null?null:[[I,H],[$,ae]]},Ce.size=function(Oe){return arguments.length?(Oe==null?I=H=$=ae=null:(I=H=0,$=+Oe[0],ae=+Oe[1]),Ce):I==null?null:[$-I,ae-H]},Ce};function pc(g){return g.x}function gc(g){return g.y}function su(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gs(g,I,H,$,ae,le){if(!g(I,H,$,ae,le)){var Ae=(H+ae)*.5,me=($+le)*.5,Ce=I.nodes;Ce[0]&&gs(g,Ce[0],H,$,Ae,me),Ce[1]&&gs(g,Ce[1],Ae,$,ae,me),Ce[2]&&gs(g,Ce[2],H,me,Ae,le),Ce[3]&&gs(g,Ce[3],Ae,me,ae,le)}}function yc(g,I,H,$,ae,le,Ae){var me=1/0,Ce;return function Oe(ze,qe,et,bt,Rt){if(!(qe>le||et>Ae||bt<$||Rt<ae)){if(at=ze.point){var at,gt=I-ze.x,mt=H-ze.y,It=gt*gt+mt*mt;if(It<me){var Pt=Math.sqrt(me=It);$=I-Pt,ae=H-Pt,le=I+Pt,Ae=H+Pt,Ce=at}}for(var _t=ze.nodes,Yt=(qe+bt)*.5,ar=(et+Rt)*.5,fr=I>=Yt,ur=H>=ar,hr=ur<<1|fr,vr=hr+4;hr<vr;++hr)if(ze=_t[hr&3])switch(hr&3){case 0:Oe(ze,qe,et,Yt,ar);break;case 1:Oe(ze,Yt,et,bt,ar);break;case 2:Oe(ze,qe,ar,Yt,Rt);break;case 3:Oe(ze,Yt,ar,bt,Rt);break}}}(g,$,ae,le,Ae),Ce}a.interpolateRgb=gl;function gl(g,I){g=a.rgb(g),I=a.rgb(I);var H=g.r,$=g.g,ae=g.b,le=I.r-H,Ae=I.g-$,me=I.b-ae;return function(Ce){return"#"+dt(Math.round(H+le*Ce))+dt(Math.round($+Ae*Ce))+dt(Math.round(ae+me*Ce))}}a.interpolateObject=lu;function lu(g,I){var H={},$={},ae;for(ae in g)ae in I?H[ae]=Uo(g[ae],I[ae]):$[ae]=g[ae];for(ae in I)ae in g||($[ae]=I[ae]);return function(le){for(ae in H)$[ae]=H[ae](le);return $}}a.interpolateNumber=fo;function fo(g,I){return g=+g,I=+I,function(H){return g*(1-H)+I*H}}a.interpolateString=uu;function uu(g,I){var H=yl.lastIndex=ml.lastIndex=0,$,ae,le,Ae=-1,me=[],Ce=[];for(g=g+"",I=I+"";($=yl.exec(g))&&(ae=ml.exec(I));)(le=ae.index)>H&&(le=I.slice(H,le),me[Ae]?me[Ae]+=le:me[++Ae]=le),($=$[0])===(ae=ae[0])?me[Ae]?me[Ae]+=ae:me[++Ae]=ae:(me[++Ae]=null,Ce.push({i:Ae,x:fo($,ae)})),H=ml.lastIndex;return H<I.length&&(le=I.slice(H),me[Ae]?me[Ae]+=le:me[++Ae]=le),me.length<2?Ce[0]?(I=Ce[0].x,function(Oe){return I(Oe)+""}):function(){return I}:(I=Ce.length,function(Oe){for(var ze=0,qe;ze<I;++ze)me[(qe=Ce[ze]).i]=qe.x(Oe);return me.join("")})}var yl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ml=new RegExp(yl.source,"g");a.interpolate=Uo;function Uo(g,I){for(var H=a.interpolators.length,$;--H>=0&&!($=a.interpolators[H](g,I)););return $}a.interpolators=[function(g,I){var H=typeof I;return(H==="string"?Ot.has(I.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(I)?gl:uu:I instanceof qt?gl:Array.isArray(I)?Vs:H==="object"&&isNaN(I)?lu:fo)(g,I)}],a.interpolateArray=Vs;function Vs(g,I){var H=[],$=[],ae=g.length,le=I.length,Ae=Math.min(g.length,I.length),me;for(me=0;me<Ae;++me)H.push(Uo(g[me],I[me]));for(;me<ae;++me)$[me]=g[me];for(;me<le;++me)$[me]=I[me];return function(Ce){for(me=0;me<Ae;++me)$[me]=H[me](Ce);return $}}var fu=function(){return G},mc=a.map({linear:fu,poly:Mc,quad:function(){return Tc},cubic:function(){return bc},sin:function(){return Ec},exp:function(){return wc},circle:function(){return Cc},elastic:Sc,back:Lc,bounce:function(){return Rc}}),xc=a.map({in:G,out:cu,"in-out":hu,"out-in":function(g){return hu(cu(g))}});a.ease=function(g){var I=g.indexOf("-"),H=I>=0?g.slice(0,I):g,$=I>=0?g.slice(I+1):"in";return H=mc.get(H)||fu,$=xc.get($)||G,_c($(H.apply(null,l.call(arguments,1))))};function _c(g){return function(I){return I<=0?0:I>=1?1:g(I)}}function cu(g){return function(I){return 1-g(1-I)}}function hu(g){return function(I){return .5*(I<.5?g(2*I):2-g(2-2*I))}}function Tc(g){return g*g}function bc(g){return g*g*g}function Ac(g){if(g<=0)return 0;if(g>=1)return 1;var I=g*g,H=I*g;return 4*(g<.5?H:3*(g-I)+H-.75)}function Mc(g){return function(I){return Math.pow(I,g)}}function Ec(g){return 1-Math.cos(g*Ee)}function wc(g){return Math.pow(2,10*(g-1))}function Cc(g){return 1-Math.sqrt(1-g*g)}function Sc(g,I){var H;return arguments.length<2&&(I=.45),arguments.length?H=I/Me*Math.asin(1/g):(g=1,H=I/4),function($){return 1+g*Math.pow(2,-10*$)*Math.sin(($-H)*Me/I)}}function Lc(g){return g||(g=1.70158),function(I){return I*I*((g+1)*I-g)}}function Rc(g){return g<.36363636363636365?7.5625*g*g:g<.7272727272727273?7.5625*(g-=.5454545454545454)*g+.75:g<.9090909090909091?7.5625*(g-=.8181818181818182)*g+.9375:7.5625*(g-=.9545454545454546)*g+.984375}a.interpolateHcl=Dc;function Dc(g,I){g=a.hcl(g),I=a.hcl(I);var H=g.h,$=g.c,ae=g.l,le=I.h-H,Ae=I.c-$,me=I.l-ae;return isNaN(Ae)&&(Ae=0,$=isNaN($)?I.c:$),isNaN(le)?(le=0,H=isNaN(H)?I.h:H):le>180?le-=360:le<-180&&(le+=360),function(Ce){return tr(H+le*Ce,$+Ae*Ce,ae+me*Ce)+""}}a.interpolateHsl=Ic;function Ic(g,I){g=a.hsl(g),I=a.hsl(I);var H=g.h,$=g.s,ae=g.l,le=I.h-H,Ae=I.s-$,me=I.l-ae;return isNaN(Ae)&&(Ae=0,$=isNaN($)?I.s:$),isNaN(le)?(le=0,H=isNaN(H)?I.h:H):le>180?le-=360:le<-180&&(le+=360),function(Ce){return sr(H+le*Ce,$+Ae*Ce,ae+me*Ce)+""}}a.interpolateLab=Pc;function Pc(g,I){g=a.lab(g),I=a.lab(I);var H=g.l,$=g.a,ae=g.b,le=I.l-H,Ae=I.a-$,me=I.b-ae;return function(Ce){return Q(H+le*Ce,$+Ae*Ce,ae+me*Ce)+""}}a.interpolateRound=vu;function vu(g,I){return I-=g,function(H){return Math.round(g+I*H)}}a.transform=function(g){var I=v.createElementNS(a.ns.prefix.svg,"g");return(a.transform=function(H){if(H!=null){I.setAttribute("transform",H);var $=I.transform.baseVal.consolidate()}return new du($?$.matrix:Fc)})(g)};function du(g){var I=[g.a,g.b],H=[g.c,g.d],$=gu(I),ae=pu(I,H),le=gu(kc(H,I,-ae))||0;I[0]*H[1]<H[0]*I[1]&&(I[0]*=-1,I[1]*=-1,$*=-1,ae*=-1),this.rotate=($?Math.atan2(I[1],I[0]):Math.atan2(-H[0],H[1]))*Ne,this.translate=[g.e,g.f],this.scale=[$,le],this.skew=le?Math.atan2(ae,le)*Ne:0}du.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function pu(g,I){return g[0]*I[0]+g[1]*I[1]}function gu(g){var I=Math.sqrt(pu(g,g));return I&&(g[0]/=I,g[1]/=I),I}function kc(g,I,H){return g[0]+=H*I[0],g[1]+=H*I[1],g}var Fc={a:1,b:0,c:0,d:1,e:0,f:0};a.interpolateTransform=yu;function ns(g){return g.length?g.pop()+",":""}function Nc(g,I,H,$){if(g[0]!==I[0]||g[1]!==I[1]){var ae=H.push("translate(",null,",",null,")");$.push({i:ae-4,x:fo(g[0],I[0])},{i:ae-2,x:fo(g[1],I[1])})}else(I[0]||I[1])&&H.push("translate("+I+")")}function Oc(g,I,H,$){g!==I?(g-I>180?I+=360:I-g>180&&(g+=360),$.push({i:H.push(ns(H)+"rotate(",null,")")-2,x:fo(g,I)})):I&&H.push(ns(H)+"rotate("+I+")")}function zc(g,I,H,$){g!==I?$.push({i:H.push(ns(H)+"skewX(",null,")")-2,x:fo(g,I)}):I&&H.push(ns(H)+"skewX("+I+")")}function Uc(g,I,H,$){if(g[0]!==I[0]||g[1]!==I[1]){var ae=H.push(ns(H)+"scale(",null,",",null,")");$.push({i:ae-4,x:fo(g[0],I[0])},{i:ae-2,x:fo(g[1],I[1])})}else(I[0]!==1||I[1]!==1)&&H.push(ns(H)+"scale("+I+")")}function yu(g,I){var H=[],$=[];return g=a.transform(g),I=a.transform(I),Nc(g.translate,I.translate,H,$),Oc(g.rotate,I.rotate,H,$),zc(g.skew,I.skew,H,$),Uc(g.scale,I.scale,H,$),g=I=null,function(ae){for(var le=-1,Ae=$.length,me;++le<Ae;)H[(me=$[le]).i]=me.x(ae);return H.join("")}}function Bc(g,I){return I=(I-=g=+g)||1/I,function(H){return(H-g)/I}}function Gc(g,I){return I=(I-=g=+g)||1/I,function(H){return Math.max(0,Math.min(1,(H-g)/I))}}a.layout={},a.layout.bundle=function(){return function(g){for(var I=[],H=-1,$=g.length;++H<$;)I.push(Hc(g[H]));return I}};function Hc(g){for(var I=g.source,H=g.target,$=Yc(I,H),ae=[I];I!==$;)I=I.parent,ae.push(I);for(var le=ae.length;H!==$;)ae.splice(le,0,H),H=H.parent;return ae}function mu(g){for(var I=[],H=g.parent;H!=null;)I.push(g),g=H,H=H.parent;return I.push(g),I}function Yc(g,I){if(g===I)return g;for(var H=mu(g),$=mu(I),ae=H.pop(),le=$.pop(),Ae=null;ae===le;)Ae=ae,ae=H.pop(),le=$.pop();return Ae}a.layout.chord=function(){var g={},I,H,$,ae,le=0,Ae,me,Ce;function Oe(){var qe={},et=[],bt=a.range(ae),Rt=[],at,gt,mt,It,Pt;for(I=[],H=[],at=0,It=-1;++It<ae;){for(gt=0,Pt=-1;++Pt<ae;)gt+=$[It][Pt];et.push(gt),Rt.push(a.range(ae)),at+=gt}for(Ae&&bt.sort(function(Dr,gr){return Ae(et[Dr],et[gr])}),me&&Rt.forEach(function(Dr,gr){Dr.sort(function(Cr,jr){return me($[gr][Cr],$[gr][jr])})}),at=(Me-le*ae)/at,gt=0,It=-1;++It<ae;){for(mt=gt,Pt=-1;++Pt<ae;){var _t=bt[It],Yt=Rt[_t][Pt],ar=$[_t][Yt],fr=gt,ur=gt+=ar*at;qe[_t+"-"+Yt]={index:_t,subindex:Yt,startAngle:fr,endAngle:ur,value:ar}}H[_t]={index:_t,startAngle:mt,endAngle:gt,value:et[_t]},gt+=le}for(It=-1;++It<ae;)for(Pt=It-1;++Pt<ae;){var hr=qe[It+"-"+Pt],vr=qe[Pt+"-"+It];(hr.value||vr.value)&&I.push(hr.value<vr.value?{source:vr,target:hr}:{source:hr,target:vr})}Ce&&ze()}function ze(){I.sort(function(qe,et){return Ce((qe.source.value+qe.target.value)/2,(et.source.value+et.target.value)/2)})}return g.matrix=function(qe){return arguments.length?(ae=($=qe)&&$.length,I=H=null,g):$},g.padding=function(qe){return arguments.length?(le=qe,I=H=null,g):le},g.sortGroups=function(qe){return arguments.length?(Ae=qe,I=H=null,g):Ae},g.sortSubgroups=function(qe){return arguments.length?(me=qe,I=null,g):me},g.sortChords=function(qe){return arguments.length?(Ce=qe,I&&ze(),g):Ce},g.chords=function(){return I||Oe(),I},g.groups=function(){return H||Oe(),H},g},a.layout.force=function(){var g={},I=a.dispatch("start","tick","end"),H,$=[1,1],ae,le,Ae=.9,me=Kc,Ce=Jc,Oe=-30,ze=jc,qe=.1,et=.64,bt=[],Rt=[],at,gt,mt;function It(_t){return function(Yt,ar,fr,ur){if(Yt.point!==_t){var hr=Yt.cx-_t.x,vr=Yt.cy-_t.y,Dr=ur-ar,gr=hr*hr+vr*vr;if(Dr*Dr/et<gr){if(gr<ze){var Cr=Yt.charge/gr;_t.px-=hr*Cr,_t.py-=vr*Cr}return!0}if(Yt.point&&gr&&gr<ze){var Cr=Yt.pointCharge/gr;_t.px-=hr*Cr,_t.py-=vr*Cr}}return!Yt.charge}}g.tick=function(){if((le*=.99)<.005)return H=null,I.end({type:"end",alpha:le=0}),!0;var _t=bt.length,Yt=Rt.length,ar,fr,ur,hr,vr,Dr,gr,Cr,jr;for(fr=0;fr<Yt;++fr)ur=Rt[fr],hr=ur.source,vr=ur.target,Cr=vr.x-hr.x,jr=vr.y-hr.y,(Dr=Cr*Cr+jr*jr)&&(Dr=le*gt[fr]*((Dr=Math.sqrt(Dr))-at[fr])/Dr,Cr*=Dr,jr*=Dr,vr.x-=Cr*(gr=hr.weight+vr.weight?hr.weight/(hr.weight+vr.weight):.5),vr.y-=jr*gr,hr.x+=Cr*(gr=1-gr),hr.y+=jr*gr);if((gr=le*qe)&&(Cr=$[0]/2,jr=$[1]/2,fr=-1,gr))for(;++fr<_t;)ur=bt[fr],ur.x+=(Cr-ur.x)*gr,ur.y+=(jr-ur.y)*gr;if(Oe)for(xu(ar=a.geom.quadtree(bt),le,mt),fr=-1;++fr<_t;)(ur=bt[fr]).fixed||ar.visit(It(ur));for(fr=-1;++fr<_t;)ur=bt[fr],ur.fixed?(ur.x=ur.px,ur.y=ur.py):(ur.x-=(ur.px-(ur.px=ur.x))*Ae,ur.y-=(ur.py-(ur.py=ur.y))*Ae);I.tick({type:"tick",alpha:le})},g.nodes=function(_t){return arguments.length?(bt=_t,g):bt},g.links=function(_t){return arguments.length?(Rt=_t,g):Rt},g.size=function(_t){return arguments.length?($=_t,g):$},g.linkDistance=function(_t){return arguments.length?(me=typeof _t=="function"?_t:+_t,g):me},g.distance=g.linkDistance,g.linkStrength=function(_t){return arguments.length?(Ce=typeof _t=="function"?_t:+_t,g):Ce},g.friction=function(_t){return arguments.length?(Ae=+_t,g):Ae},g.charge=function(_t){return arguments.length?(Oe=typeof _t=="function"?_t:+_t,g):Oe},g.chargeDistance=function(_t){return arguments.length?(ze=_t*_t,g):Math.sqrt(ze)},g.gravity=function(_t){return arguments.length?(qe=+_t,g):qe},g.theta=function(_t){return arguments.length?(et=_t*_t,g):Math.sqrt(et)},g.alpha=function(_t){return arguments.length?(_t=+_t,le?_t>0?le=_t:(H.c=null,H.t=NaN,H=null,I.end({type:"end",alpha:le=0})):_t>0&&(I.start({type:"start",alpha:le=_t}),H=Lr(g.tick)),g):le},g.start=function(){var _t,Yt=bt.length,ar=Rt.length,fr=$[0],ur=$[1],hr,vr;for(_t=0;_t<Yt;++_t)(vr=bt[_t]).index=_t,vr.weight=0;for(_t=0;_t<ar;++_t)vr=Rt[_t],typeof vr.source=="number"&&(vr.source=bt[vr.source]),typeof vr.target=="number"&&(vr.target=bt[vr.target]),++vr.source.weight,++vr.target.weight;for(_t=0;_t<Yt;++_t)vr=bt[_t],isNaN(vr.x)&&(vr.x=Dr("x",fr)),isNaN(vr.y)&&(vr.y=Dr("y",ur)),isNaN(vr.px)&&(vr.px=vr.x),isNaN(vr.py)&&(vr.py=vr.y);if(at=[],typeof me=="function")for(_t=0;_t<ar;++_t)at[_t]=+me.call(this,Rt[_t],_t);else for(_t=0;_t<ar;++_t)at[_t]=me;if(gt=[],typeof Ce=="function")for(_t=0;_t<ar;++_t)gt[_t]=+Ce.call(this,Rt[_t],_t);else for(_t=0;_t<ar;++_t)gt[_t]=Ce;if(mt=[],typeof Oe=="function")for(_t=0;_t<Yt;++_t)mt[_t]=+Oe.call(this,bt[_t],_t);else for(_t=0;_t<Yt;++_t)mt[_t]=Oe;function Dr(gr,Cr){if(!hr){for(hr=new Array(Yt),on=0;on<Yt;++on)hr[on]=[];for(on=0;on<ar;++on){var jr=Rt[on];hr[jr.source.index].push(jr.target),hr[jr.target.index].push(jr.source)}}for(var Zn=hr[_t],on=-1,ir=Zn.length,Ir;++on<ir;)if(!isNaN(Ir=Zn[on][gr]))return Ir;return Math.random()*Cr}return g.resume()},g.resume=function(){return g.alpha(.1)},g.stop=function(){return g.alpha(0)},g.drag=function(){if(ae||(ae=a.behavior.drag().origin(G).on("dragstart.force",Wc).on("drag.force",Pt).on("dragend.force",Vc)),!arguments.length)return ae;this.on("mouseover.force",Xc).on("mouseout.force",Zc).call(ae)};function Pt(_t){_t.px=a.event.x,_t.py=a.event.y,g.resume()}return a.rebind(g,I,"on")};function Wc(g){g.fixed|=2}function Vc(g){g.fixed&=-7}function Xc(g){g.fixed|=4,g.px=g.x,g.py=g.y}function Zc(g){g.fixed&=-5}function xu(g,I,H){var $=0,ae=0;if(g.charge=0,!g.leaf)for(var le=g.nodes,Ae=le.length,me=-1,Ce;++me<Ae;)Ce=le[me],Ce!=null&&(xu(Ce,I,H),g.charge+=Ce.charge,$+=Ce.charge*Ce.cx,ae+=Ce.charge*Ce.cy);if(g.point){g.leaf||(g.point.x+=Math.random()-.5,g.point.y+=Math.random()-.5);var Oe=I*H[g.point.index];g.charge+=g.pointCharge=Oe,$+=Oe*g.point.x,ae+=Oe*g.point.y}g.cx=$/g.charge,g.cy=ae/g.charge}var Kc=20,Jc=1,jc=1/0;a.layout.hierarchy=function(){var g=qc,I=$c,H=Qc;function $(ae){var le=[ae],Ae=[],me;for(ae.depth=0;(me=le.pop())!=null;)if(Ae.push(me),(Oe=I.call($,me,me.depth))&&(Ce=Oe.length)){for(var Ce,Oe,ze;--Ce>=0;)le.push(ze=Oe[Ce]),ze.parent=me,ze.depth=me.depth+1;H&&(me.value=0),me.children=Oe}else H&&(me.value=+H.call($,me,me.depth)||0),delete me.children;return Ka(ae,function(qe){var et,bt;g&&(et=qe.children)&&et.sort(g),H&&(bt=qe.parent)&&(bt.value+=qe.value)}),Ae}return $.sort=function(ae){return arguments.length?(g=ae,$):g},$.children=function(ae){return arguments.length?(I=ae,$):I},$.value=function(ae){return arguments.length?(H=ae,$):H},$.revalue=function(ae){return H&&(ms(ae,function(le){le.children&&(le.value=0)}),Ka(ae,function(le){var Ae;le.children||(le.value=+H.call($,le,le.depth)||0),(Ae=le.parent)&&(Ae.value+=le.value)})),ae},$};function ys(g,I){return a.rebind(g,I,"sort","children","value"),g.nodes=g,g.links=eh,g}function ms(g,I){for(var H=[g];(g=H.pop())!=null;)if(I(g),(ae=g.children)&&($=ae.length))for(var $,ae;--$>=0;)H.push(ae[$])}function Ka(g,I){for(var H=[g],$=[];(g=H.pop())!=null;)if($.push(g),(Ae=g.children)&&(le=Ae.length))for(var ae=-1,le,Ae;++ae<le;)H.push(Ae[ae]);for(;(g=$.pop())!=null;)I(g)}function $c(g){return g.children}function Qc(g){return g.value}function qc(g,I){return I.value-g.value}function eh(g){return a.merge(g.map(function(I){return(I.children||[]).map(function(H){return{source:I,target:H}})}))}a.layout.partition=function(){var g=a.layout.hierarchy(),I=[1,1];function H(le,Ae,me,Ce){var Oe=le.children;if(le.x=Ae,le.y=le.depth*Ce,le.dx=me,le.dy=Ce,Oe&&(qe=Oe.length)){var ze=-1,qe,et,bt;for(me=le.value?me/le.value:0;++ze<qe;)H(et=Oe[ze],Ae,bt=et.value*me,Ce),Ae+=bt}}function $(le){var Ae=le.children,me=0;if(Ae&&(Oe=Ae.length))for(var Ce=-1,Oe;++Ce<Oe;)me=Math.max(me,$(Ae[Ce]));return 1+me}function ae(le,Ae){var me=g.call(this,le,Ae);return H(me[0],0,I[0],I[1]/$(me[0])),me}return ae.size=function(le){return arguments.length?(I=le,ae):I},ys(ae,g)},a.layout.pie=function(){var g=Number,I=_u,H=0,$=Me,ae=0;function le(Ae){var me=Ae.length,Ce=Ae.map(function(It,Pt){return+g.call(le,It,Pt)}),Oe=+(typeof H=="function"?H.apply(this,arguments):H),ze=(typeof $=="function"?$.apply(this,arguments):$)-Oe,qe=Math.min(Math.abs(ze)/me,+(typeof ae=="function"?ae.apply(this,arguments):ae)),et=qe*(ze<0?-1:1),bt=a.sum(Ce),Rt=bt?(ze-me*et)/bt:0,at=a.range(me),gt=[],mt;return I!=null&&at.sort(I===_u?function(It,Pt){return Ce[Pt]-Ce[It]}:function(It,Pt){return I(Ae[It],Ae[Pt])}),at.forEach(function(It){gt[It]={data:Ae[It],value:mt=Ce[It],startAngle:Oe,endAngle:Oe+=mt*Rt+et,padAngle:qe}}),gt}return le.value=function(Ae){return arguments.length?(g=Ae,le):g},le.sort=function(Ae){return arguments.length?(I=Ae,le):I},le.startAngle=function(Ae){return arguments.length?(H=Ae,le):H},le.endAngle=function(Ae){return arguments.length?($=Ae,le):$},le.padAngle=function(Ae){return arguments.length?(ae=Ae,le):ae},le};var _u={};a.layout.stack=function(){var g=G,I=xl,H=_l,$=nh,ae=th,le=rh;function Ae(me,Ce){if(!(Rt=me.length))return me;var Oe=me.map(function(It,Pt){return g.call(Ae,It,Pt)}),ze=Oe.map(function(It){return It.map(function(Pt,_t){return[ae.call(Ae,Pt,_t),le.call(Ae,Pt,_t)]})}),qe=I.call(Ae,ze,Ce);Oe=a.permute(Oe,qe),ze=a.permute(ze,qe);var et=H.call(Ae,ze,Ce),bt=Oe[0].length,Rt,at,gt,mt;for(gt=0;gt<bt;++gt)for($.call(Ae,Oe[0][gt],mt=et[gt],ze[0][gt][1]),at=1;at<Rt;++at)$.call(Ae,Oe[at][gt],mt+=ze[at-1][gt][1],ze[at][gt][1]);return me}return Ae.values=function(me){return arguments.length?(g=me,Ae):g},Ae.order=function(me){return arguments.length?(I=typeof me=="function"?me:ih.get(me)||xl,Ae):I},Ae.offset=function(me){return arguments.length?(H=typeof me=="function"?me:ah.get(me)||_l,Ae):H},Ae.x=function(me){return arguments.length?(ae=me,Ae):ae},Ae.y=function(me){return arguments.length?(le=me,Ae):le},Ae.out=function(me){return arguments.length?($=me,Ae):$},Ae};function th(g){return g.x}function rh(g){return g.y}function nh(g,I,H){g.y0=I,g.y=H}var ih=a.map({"inside-out":function(g){var I=g.length,H,$,ae=g.map(oh),le=g.map(sh),Ae=a.range(I).sort(function(qe,et){return ae[qe]-ae[et]}),me=0,Ce=0,Oe=[],ze=[];for(H=0;H<I;++H)$=Ae[H],me<Ce?(me+=le[$],Oe.push($)):(Ce+=le[$],ze.push($));return ze.reverse().concat(Oe)},reverse:function(g){return a.range(g.length).reverse()},default:xl}),ah=a.map({silhouette:function(g){var I=g.length,H=g[0].length,$=[],ae=0,le,Ae,me,Ce=[];for(Ae=0;Ae<H;++Ae){for(le=0,me=0;le<I;le++)me+=g[le][Ae][1];me>ae&&(ae=me),$.push(me)}for(Ae=0;Ae<H;++Ae)Ce[Ae]=(ae-$[Ae])/2;return Ce},wiggle:function(g){var I=g.length,H=g[0],$=H.length,ae,le,Ae,me,Ce,Oe,ze,qe,et,bt=[];for(bt[0]=qe=et=0,le=1;le<$;++le){for(ae=0,me=0;ae<I;++ae)me+=g[ae][le][1];for(ae=0,Ce=0,ze=H[le][0]-H[le-1][0];ae<I;++ae){for(Ae=0,Oe=(g[ae][le][1]-g[ae][le-1][1])/(2*ze);Ae<ae;++Ae)Oe+=(g[Ae][le][1]-g[Ae][le-1][1])/ze;Ce+=Oe*g[ae][le][1]}bt[le]=qe-=me?Ce/me*ze:0,qe<et&&(et=qe)}for(le=0;le<$;++le)bt[le]-=et;return bt},expand:function(g){var I=g.length,H=g[0].length,$=1/I,ae,le,Ae,me=[];for(le=0;le<H;++le){for(ae=0,Ae=0;ae<I;ae++)Ae+=g[ae][le][1];if(Ae)for(ae=0;ae<I;ae++)g[ae][le][1]/=Ae;else for(ae=0;ae<I;ae++)g[ae][le][1]=$}for(le=0;le<H;++le)me[le]=0;return me},zero:_l});function xl(g){return a.range(g.length)}function _l(g){for(var I=-1,H=g[0].length,$=[];++I<H;)$[I]=0;return $}function oh(g){for(var I=1,H=0,$=g[0][1],ae,le=g.length;I<le;++I)(ae=g[I][1])>$&&(H=I,$=ae);return H}function sh(g){return g.reduce(lh,0)}function lh(g,I){return g+I[1]}a.layout.histogram=function(){var g=!0,I=Number,H=fh,$=uh;function ae(le,et){for(var me=[],Ce=le.map(I,this),Oe=H.call(this,Ce,et),ze=$.call(this,Oe,Ce,et),qe,et=-1,bt=Ce.length,Rt=ze.length-1,at=g?1:1/bt,gt;++et<Rt;)qe=me[et]=[],qe.dx=ze[et+1]-(qe.x=ze[et]),qe.y=0;if(Rt>0)for(et=-1;++et<bt;)gt=Ce[et],gt>=Oe[0]&&gt<=Oe[1]&&(qe=me[a.bisect(ze,gt,1,Rt)-1],qe.y+=at,qe.push(le[et]));return me}return ae.value=function(le){return arguments.length?(I=le,ae):I},ae.range=function(le){return arguments.length?(H=zt(le),ae):H},ae.bins=function(le){return arguments.length?($=typeof le=="number"?function(Ae){return Tu(Ae,le)}:zt(le),ae):$},ae.frequency=function(le){return arguments.length?(g=!!le,ae):g},ae};function uh(g,I){return Tu(g,Math.ceil(Math.log(I.length)/Math.LN2+1))}function Tu(g,I){for(var H=-1,$=+g[0],ae=(g[1]-$)/I,le=[];++H<=I;)le[H]=ae*H+$;return le}function fh(g){return[a.min(g),a.max(g)]}a.layout.pack=function(){var g=a.layout.hierarchy().sort(ch),I=0,H=[1,1],$;function ae(le,Ae){var me=g.call(this,le,Ae),Ce=me[0],Oe=H[0],ze=H[1],qe=$==null?Math.sqrt:typeof $=="function"?$:function(){return $};if(Ce.x=Ce.y=0,Ka(Ce,function(bt){bt.r=+qe(bt.value)}),Ka(Ce,Mu),I){var et=I*($?1:Math.max(2*Ce.r/Oe,2*Ce.r/ze))/2;Ka(Ce,function(bt){bt.r+=et}),Ka(Ce,Mu),Ka(Ce,function(bt){bt.r-=et})}return Eu(Ce,Oe/2,ze/2,$?1:1/Math.max(2*Ce.r/Oe,2*Ce.r/ze)),me}return ae.size=function(le){return arguments.length?(H=le,ae):H},ae.radius=function(le){return arguments.length?($=le==null||typeof le=="function"?le:+le,ae):$},ae.padding=function(le){return arguments.length?(I=+le,ae):I},ys(ae,g)};function ch(g,I){return g.value-I.value}function Tl(g,I){var H=g._pack_next;g._pack_next=I,I._pack_prev=g,I._pack_next=H,H._pack_prev=I}function bu(g,I){g._pack_next=I,I._pack_prev=g}function Au(g,I){var H=I.x-g.x,$=I.y-g.y,ae=g.r+I.r;return .999*ae*ae>H*H+$*$}function Mu(g){if(!(I=g.children)||!(et=I.length))return;var I,H=1/0,$=-1/0,ae=1/0,le=-1/0,Ae,me,Ce,Oe,ze,qe,et;function bt(_t){H=Math.min(_t.x-_t.r,H),$=Math.max(_t.x+_t.r,$),ae=Math.min(_t.y-_t.r,ae),le=Math.max(_t.y+_t.r,le)}if(I.forEach(hh),Ae=I[0],Ae.x=-Ae.r,Ae.y=0,bt(Ae),et>1&&(me=I[1],me.x=me.r,me.y=0,bt(me),et>2))for(Ce=I[2],wu(Ae,me,Ce),bt(Ce),Tl(Ae,Ce),Ae._pack_prev=Ce,Tl(Ce,me),me=Ae._pack_next,Oe=3;Oe<et;Oe++){wu(Ae,me,Ce=I[Oe]);var Rt=0,at=1,gt=1;for(ze=me._pack_next;ze!==me;ze=ze._pack_next,at++)if(Au(ze,Ce)){Rt=1;break}if(Rt==1)for(qe=Ae._pack_prev;qe!==ze._pack_prev&&!Au(qe,Ce);qe=qe._pack_prev,gt++);Rt?(at<gt||at==gt&&me.r<Ae.r?bu(Ae,me=ze):bu(Ae=qe,me),Oe--):(Tl(Ae,Ce),me=Ce,bt(Ce))}var mt=(H+$)/2,It=(ae+le)/2,Pt=0;for(Oe=0;Oe<et;Oe++)Ce=I[Oe],Ce.x-=mt,Ce.y-=It,Pt=Math.max(Pt,Ce.r+Math.sqrt(Ce.x*Ce.x+Ce.y*Ce.y));g.r=Pt,I.forEach(vh)}function hh(g){g._pack_next=g._pack_prev=g}function vh(g){delete g._pack_next,delete g._pack_prev}function Eu(g,I,H,$){var ae=g.children;if(g.x=I+=$*g.x,g.y=H+=$*g.y,g.r*=$,ae)for(var le=-1,Ae=ae.length;++le<Ae;)Eu(ae[le],I,H,$)}function wu(g,I,H){var $=g.r+H.r,ae=I.x-g.x,le=I.y-g.y;if($&&(ae||le)){var Ae=I.r+H.r,me=ae*ae+le*le;Ae*=Ae,$*=$;var Ce=.5+($-Ae)/(2*me),Oe=Math.sqrt(Math.max(0,2*Ae*($+me)-($-=me)*$-Ae*Ae))/(2*me);H.x=g.x+Ce*ae+Oe*le,H.y=g.y+Ce*le-Oe*ae}else H.x=g.x+$,H.y=g.y}a.layout.tree=function(){var g=a.layout.hierarchy().sort(null).value(null),I=Cu,H=[1,1],$=null;function ae(ze,qe){var et=g.call(this,ze,qe),bt=et[0],Rt=le(bt);if(Ka(Rt,Ae),Rt.parent.m=-Rt.z,ms(Rt,me),$)ms(bt,Oe);else{var at=bt,gt=bt,mt=bt;ms(bt,function(Yt){Yt.x<at.x&&(at=Yt),Yt.x>gt.x&&(gt=Yt),Yt.depth>mt.depth&&(mt=Yt)});var It=I(at,gt)/2-at.x,Pt=H[0]/(gt.x+I(gt,at)/2+It),_t=H[1]/(mt.depth||1);ms(bt,function(Yt){Yt.x=(Yt.x+It)*Pt,Yt.y=Yt.depth*_t})}return et}function le(ze){for(var qe={A:null,children:[ze]},et=[qe],bt;(bt=et.pop())!=null;)for(var Rt=bt.children,at,gt=0,mt=Rt.length;gt<mt;++gt)et.push((Rt[gt]=at={_:Rt[gt],parent:bt,children:(at=Rt[gt].children)&&at.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:gt}).a=at);return qe.children[0]}function Ae(ze){var qe=ze.children,et=ze.parent.children,bt=ze.i?et[ze.i-1]:null;if(qe.length){ph(ze);var Rt=(qe[0].z+qe[qe.length-1].z)/2;bt?(ze.z=bt.z+I(ze._,bt._),ze.m=ze.z-Rt):ze.z=Rt}else bt&&(ze.z=bt.z+I(ze._,bt._));ze.parent.A=Ce(ze,bt,ze.parent.A||et[0])}function me(ze){ze._.x=ze.z+ze.parent.m,ze.m+=ze.parent.m}function Ce(ze,qe,et){if(qe){for(var bt=ze,Rt=ze,at=qe,gt=bt.parent.children[0],mt=bt.m,It=Rt.m,Pt=at.m,_t=gt.m,Yt;at=Al(at),bt=bl(bt),at&&bt;)gt=bl(gt),Rt=Al(Rt),Rt.a=ze,Yt=at.z+Pt-bt.z-mt+I(at._,bt._),Yt>0&&(dh(gh(at,ze,et),ze,Yt),mt+=Yt,It+=Yt),Pt+=at.m,mt+=bt.m,_t+=gt.m,It+=Rt.m;at&&!Al(Rt)&&(Rt.t=at,Rt.m+=Pt-It),bt&&!bl(gt)&&(gt.t=bt,gt.m+=mt-_t,et=ze)}return et}function Oe(ze){ze.x*=H[0],ze.y=ze.depth*H[1]}return ae.separation=function(ze){return arguments.length?(I=ze,ae):I},ae.size=function(ze){return arguments.length?($=(H=ze)==null?Oe:null,ae):$?null:H},ae.nodeSize=function(ze){return arguments.length?($=(H=ze)==null?null:Oe,ae):$?H:null},ys(ae,g)};function Cu(g,I){return g.parent==I.parent?1:2}function bl(g){var I=g.children;return I.length?I[0]:g.t}function Al(g){var I=g.children,H;return(H=I.length)?I[H-1]:g.t}function dh(g,I,H){var $=H/(I.i-g.i);I.c-=$,I.s+=H,g.c+=$,I.z+=H,I.m+=H}function ph(g){for(var I=0,H=0,$=g.children,ae=$.length,le;--ae>=0;)le=$[ae],le.z+=I,le.m+=I,I+=le.s+(H+=le.c)}function gh(g,I,H){return g.a.parent===I.parent?g.a:H}a.layout.cluster=function(){var g=a.layout.hierarchy().sort(null).value(null),I=Cu,H=[1,1],$=!1;function ae(le,Ae){var me=g.call(this,le,Ae),Ce=me[0],Oe,ze=0;Ka(Ce,function(at){var gt=at.children;gt&&gt.length?(at.x=mh(gt),at.y=yh(gt)):(at.x=Oe?ze+=I(at,Oe):0,at.y=0,Oe=at)});var qe=Su(Ce),et=Lu(Ce),bt=qe.x-I(qe,et)/2,Rt=et.x+I(et,qe)/2;return Ka(Ce,$?function(at){at.x=(at.x-Ce.x)*H[0],at.y=(Ce.y-at.y)*H[1]}:function(at){at.x=(at.x-bt)/(Rt-bt)*H[0],at.y=(1-(Ce.y?at.y/Ce.y:1))*H[1]}),me}return ae.separation=function(le){return arguments.length?(I=le,ae):I},ae.size=function(le){return arguments.length?($=(H=le)==null,ae):$?null:H},ae.nodeSize=function(le){return arguments.length?($=(H=le)!=null,ae):$?H:null},ys(ae,g)};function yh(g){return 1+a.max(g,function(I){return I.y})}function mh(g){return g.reduce(function(I,H){return I+H.x},0)/g.length}function Su(g){var I=g.children;return I&&I.length?Su(I[0]):g}function Lu(g){var I=g.children,H;return I&&(H=I.length)?Lu(I[H-1]):g}a.layout.treemap=function(){var g=a.layout.hierarchy(),I=Math.round,H=[1,1],$=null,ae=Ml,le=!1,Ae,me="squarify",Ce=.5*(1+Math.sqrt(5));function Oe(at,gt){for(var mt=-1,It=at.length,Pt,_t;++mt<It;)_t=(Pt=at[mt]).value*(gt<0?0:gt),Pt.area=isNaN(_t)||_t<=0?0:_t}function ze(at){var gt=at.children;if(gt&&gt.length){var mt=ae(at),It=[],Pt=gt.slice(),_t,Yt=1/0,ar,fr=me==="slice"?mt.dx:me==="dice"?mt.dy:me==="slice-dice"?at.depth&1?mt.dy:mt.dx:Math.min(mt.dx,mt.dy),ur;for(Oe(Pt,mt.dx*mt.dy/at.value),It.area=0;(ur=Pt.length)>0;)It.push(_t=Pt[ur-1]),It.area+=_t.area,me!=="squarify"||(ar=et(It,fr))<=Yt?(Pt.pop(),Yt=ar):(It.area-=It.pop().area,bt(It,fr,mt,!1),fr=Math.min(mt.dx,mt.dy),It.length=It.area=0,Yt=1/0);It.length&&(bt(It,fr,mt,!0),It.length=It.area=0),gt.forEach(ze)}}function qe(at){var gt=at.children;if(gt&&gt.length){var mt=ae(at),It=gt.slice(),Pt,_t=[];for(Oe(It,mt.dx*mt.dy/at.value),_t.area=0;Pt=It.pop();)_t.push(Pt),_t.area+=Pt.area,Pt.z!=null&&(bt(_t,Pt.z?mt.dx:mt.dy,mt,!It.length),_t.length=_t.area=0);gt.forEach(qe)}}function et(at,gt){for(var mt=at.area,It,Pt=0,_t=1/0,Yt=-1,ar=at.length;++Yt<ar;)(It=at[Yt].area)&&(It<_t&&(_t=It),It>Pt&&(Pt=It));return mt*=mt,gt*=gt,mt?Math.max(gt*Pt*Ce/mt,mt/(gt*_t*Ce)):1/0}function bt(at,gt,mt,It){var Pt=-1,_t=at.length,Yt=mt.x,ar=mt.y,fr=gt?I(at.area/gt):0,ur;if(gt==mt.dx){for((It||fr>mt.dy)&&(fr=mt.dy);++Pt<_t;)ur=at[Pt],ur.x=Yt,ur.y=ar,ur.dy=fr,Yt+=ur.dx=Math.min(mt.x+mt.dx-Yt,fr?I(ur.area/fr):0);ur.z=!0,ur.dx+=mt.x+mt.dx-Yt,mt.y+=fr,mt.dy-=fr}else{for((It||fr>mt.dx)&&(fr=mt.dx);++Pt<_t;)ur=at[Pt],ur.x=Yt,ur.y=ar,ur.dx=fr,ar+=ur.dy=Math.min(mt.y+mt.dy-ar,fr?I(ur.area/fr):0);ur.z=!1,ur.dy+=mt.y+mt.dy-ar,mt.x+=fr,mt.dx-=fr}}function Rt(at){var gt=Ae||g(at),mt=gt[0];return mt.x=mt.y=0,mt.value?(mt.dx=H[0],mt.dy=H[1]):mt.dx=mt.dy=0,Ae&&g.revalue(mt),Oe([mt],mt.dx*mt.dy/mt.value),(Ae?qe:ze)(mt),le&&(Ae=gt),gt}return Rt.size=function(at){return arguments.length?(H=at,Rt):H},Rt.padding=function(at){if(!arguments.length)return $;function gt(Pt){var _t=at.call(Rt,Pt,Pt.depth);return _t==null?Ml(Pt):Ru(Pt,typeof _t=="number"?[_t,_t,_t,_t]:_t)}function mt(Pt){return Ru(Pt,at)}var It;return ae=($=at)==null?Ml:(It=typeof at)=="function"?gt:(It==="number"&&(at=[at,at,at,at]),mt),Rt},Rt.round=function(at){return arguments.length?(I=at?Math.round:Number,Rt):I!=Number},Rt.sticky=function(at){return arguments.length?(le=at,Ae=null,Rt):le},Rt.ratio=function(at){return arguments.length?(Ce=at,Rt):Ce},Rt.mode=function(at){return arguments.length?(me=at+"",Rt):me},ys(Rt,g)};function Ml(g){return{x:g.x,y:g.y,dx:g.dx,dy:g.dy}}function Ru(g,I){var H=g.x+I[3],$=g.y+I[0],ae=g.dx-I[1]-I[3],le=g.dy-I[0]-I[2];return ae<0&&(H+=ae/2,ae=0),le<0&&($+=le/2,le=0),{x:H,y:$,dx:ae,dy:le}}a.random={normal:function(g,I){var H=arguments.length;return H<2&&(I=1),H<1&&(g=0),function(){var $,ae,le;do $=Math.random()*2-1,ae=Math.random()*2-1,le=$*$+ae*ae;while(!le||le>1);return g+I*$*Math.sqrt(-2*Math.log(le)/le)}},logNormal:function(){var g=a.random.normal.apply(a,arguments);return function(){return Math.exp(g())}},bates:function(g){var I=a.random.irwinHall(g);return function(){return I()/g}},irwinHall:function(g){return function(){for(var I=0,H=0;H<g;H++)I+=Math.random();return I}}},a.scale={};function Xs(g){var I=g[0],H=g[g.length-1];return I<H?[I,H]:[H,I]}function Zs(g){return g.rangeExtent?g.rangeExtent():Xs(g.range())}function xh(g,I,H,$){var ae=H(g[0],g[1]),le=$(I[0],I[1]);return function(Ae){return le(ae(Ae))}}function El(g,I){var H=0,$=g.length-1,ae=g[H],le=g[$],Ae;return le<ae&&(Ae=H,H=$,$=Ae,Ae=ae,ae=le,le=Ae),g[H]=I.floor(ae),g[$]=I.ceil(le),g}function Du(g){return g?{floor:function(I){return Math.floor(I/g)*g},ceil:function(I){return Math.ceil(I/g)*g}}:_h}var _h={floor:G,ceil:G};function Th(g,I,H,$){var ae=[],le=[],Ae=0,me=Math.min(g.length,I.length)-1;for(g[me]<g[0]&&(g=g.slice().reverse(),I=I.slice().reverse());++Ae<=me;)ae.push(H(g[Ae-1],g[Ae])),le.push($(I[Ae-1],I[Ae]));return function(Ce){var Oe=a.bisect(g,Ce,1,me)-1;return le[Oe](ae[Oe](Ce))}}a.scale.linear=function(){return Iu([0,1],[0,1],Uo,!1)};function Iu(g,I,H,$){var ae,le;function Ae(){var Ce=Math.min(g.length,I.length)>2?Th:xh,Oe=$?Gc:Bc;return ae=Ce(g,I,Oe,H),le=Ce(I,g,Oe,Uo),me}function me(Ce){return ae(Ce)}return me.invert=function(Ce){return le(Ce)},me.domain=function(Ce){return arguments.length?(g=Ce.map(Number),Ae()):g},me.range=function(Ce){return arguments.length?(I=Ce,Ae()):I},me.rangeRound=function(Ce){return me.range(Ce).interpolate(vu)},me.clamp=function(Ce){return arguments.length?($=Ce,Ae()):$},me.interpolate=function(Ce){return arguments.length?(H=Ce,Ae()):H},me.ticks=function(Ce){return Cl(g,Ce)},me.tickFormat=function(Ce,Oe){return d3_scale_linearTickFormat(g,Ce,Oe)},me.nice=function(Ce){return ku(g,Ce),Ae()},me.copy=function(){return Iu(g,I,H,$)},Ae()}function Pu(g,I){return a.rebind(g,I,"range","rangeRound","interpolate","clamp")}function ku(g,I){return El(g,Du(wl(g,I)[2])),El(g,Du(wl(g,I)[2])),g}function wl(g,I){I==null&&(I=10);var H=Xs(g),$=H[1]-H[0],ae=Math.pow(10,Math.floor(Math.log($/I)/Math.LN10)),le=I/$*ae;return le<=.15?ae*=10:le<=.35?ae*=5:le<=.75&&(ae*=2),H[0]=Math.ceil(H[0]/ae)*ae,H[1]=Math.floor(H[1]/ae)*ae+ae*.5,H[2]=ae,H}function Cl(g,I){return a.range.apply(a,wl(g,I))}a.scale.log=function(){return Fu(a.scale.linear().domain([0,1]),10,!0,[1,10])};function Fu(g,I,H,$){function ae(me){return(H?Math.log(me<0?0:me):-Math.log(me>0?0:-me))/Math.log(I)}function le(me){return H?Math.pow(I,me):-Math.pow(I,-me)}function Ae(me){return g(ae(me))}return Ae.invert=function(me){return le(g.invert(me))},Ae.domain=function(me){return arguments.length?(H=me[0]>=0,g.domain(($=me.map(Number)).map(ae)),Ae):$},Ae.base=function(me){return arguments.length?(I=+me,g.domain($.map(ae)),Ae):I},Ae.nice=function(){var me=El($.map(ae),H?Math:bh);return g.domain(me),$=me.map(le),Ae},Ae.ticks=function(){var me=Xs($),Ce=[],Oe=me[0],ze=me[1],qe=Math.floor(ae(Oe)),et=Math.ceil(ae(ze)),bt=I%1?2:I;if(isFinite(et-qe)){if(H){for(;qe<et;qe++)for(var Rt=1;Rt<bt;Rt++)Ce.push(le(qe)*Rt);Ce.push(le(qe))}else for(Ce.push(le(qe));qe++<et;)for(var Rt=bt-1;Rt>0;Rt--)Ce.push(le(qe)*Rt);for(qe=0;Ce[qe]<Oe;qe++);for(et=Ce.length;Ce[et-1]>ze;et--);Ce=Ce.slice(qe,et)}return Ce},Ae.copy=function(){return Fu(g.copy(),I,H,$)},Pu(Ae,g)}var bh={floor:function(g){return-Math.ceil(-g)},ceil:function(g){return-Math.floor(-g)}};a.scale.pow=function(){return Nu(a.scale.linear(),1,[0,1])};function Nu(g,I,H){var $=Ks(I),ae=Ks(1/I);function le(Ae){return g($(Ae))}return le.invert=function(Ae){return ae(g.invert(Ae))},le.domain=function(Ae){return arguments.length?(g.domain((H=Ae.map(Number)).map($)),le):H},le.ticks=function(Ae){return Cl(H,Ae)},le.tickFormat=function(Ae,me){return d3_scale_linearTickFormat(H,Ae,me)},le.nice=function(Ae){return le.domain(ku(H,Ae))},le.exponent=function(Ae){return arguments.length?($=Ks(I=Ae),ae=Ks(1/I),g.domain(H.map($)),le):I},le.copy=function(){return Nu(g.copy(),I,H)},Pu(le,g)}function Ks(g){return function(I){return I<0?-Math.pow(-I,g):Math.pow(I,g)}}a.scale.sqrt=function(){return a.scale.pow().exponent(.5)},a.scale.ordinal=function(){return Ou([],{t:"range",a:[[]]})};function Ou(g,I){var H,$,ae;function le(me){return $[((H.get(me)||(I.t==="range"?H.set(me,g.push(me)):NaN))-1)%$.length]}function Ae(me,Ce){return a.range(g.length).map(function(Oe){return me+Ce*Oe})}return le.domain=function(me){if(!arguments.length)return g;g=[],H=new O;for(var Ce=-1,Oe=me.length,ze;++Ce<Oe;)H.has(ze=me[Ce])||H.set(ze,g.push(ze));return le[I.t].apply(le,I.a)},le.range=function(me){return arguments.length?($=me,ae=0,I={t:"range",a:arguments},le):$},le.rangePoints=function(me,Ce){arguments.length<2&&(Ce=0);var Oe=me[0],ze=me[1],qe=g.length<2?(Oe=(Oe+ze)/2,0):(ze-Oe)/(g.length-1+Ce);return $=Ae(Oe+qe*Ce/2,qe),ae=0,I={t:"rangePoints",a:arguments},le},le.rangeRoundPoints=function(me,Ce){arguments.length<2&&(Ce=0);var Oe=me[0],ze=me[1],qe=g.length<2?(Oe=ze=Math.round((Oe+ze)/2),0):(ze-Oe)/(g.length-1+Ce)|0;return $=Ae(Oe+Math.round(qe*Ce/2+(ze-Oe-(g.length-1+Ce)*qe)/2),qe),ae=0,I={t:"rangeRoundPoints",a:arguments},le},le.rangeBands=function(me,Ce,Oe){arguments.length<2&&(Ce=0),arguments.length<3&&(Oe=Ce);var ze=me[1]<me[0],qe=me[ze-0],et=me[1-ze],bt=(et-qe)/(g.length-Ce+2*Oe);return $=Ae(qe+bt*Oe,bt),ze&&$.reverse(),ae=bt*(1-Ce),I={t:"rangeBands",a:arguments},le},le.rangeRoundBands=function(me,Ce,Oe){arguments.length<2&&(Ce=0),arguments.length<3&&(Oe=Ce);var ze=me[1]<me[0],qe=me[ze-0],et=me[1-ze],bt=Math.floor((et-qe)/(g.length-Ce+2*Oe));return $=Ae(qe+Math.round((et-qe-(g.length-Ce)*bt)/2),bt),ze&&$.reverse(),ae=Math.round(bt*(1-Ce)),I={t:"rangeRoundBands",a:arguments},le},le.rangeBand=function(){return ae},le.rangeExtent=function(){return Xs(I.a[0])},le.copy=function(){return Ou(g,I)},le.domain(g)}a.scale.category10=function(){return a.scale.ordinal().range(Ah)},a.scale.category20=function(){return a.scale.ordinal().range(Mh)},a.scale.category20b=function(){return a.scale.ordinal().range(Eh)},a.scale.category20c=function(){return a.scale.ordinal().range(wh)};var Ah=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(je),Mh=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(je),Eh=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(je),wh=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(je);a.scale.quantile=function(){return zu([],[])};function zu(g,I){var H;function $(){var le=0,Ae=I.length;for(H=[];++le<Ae;)H[le-1]=a.quantile(g,le/Ae);return ae}function ae(le){if(!isNaN(le=+le))return I[a.bisect(H,le)]}return ae.domain=function(le){return arguments.length?(g=le.map(w).filter(A).sort(b),$()):g},ae.range=function(le){return arguments.length?(I=le,$()):I},ae.quantiles=function(){return H},ae.invertExtent=function(le){return le=I.indexOf(le),le<0?[NaN,NaN]:[le>0?H[le-1]:g[0],le<H.length?H[le]:g[g.length-1]]},ae.copy=function(){return zu(g,I)},$()}a.scale.quantize=function(){return Uu(0,1,[0,1])};function Uu(g,I,H){var $,ae;function le(me){return H[Math.max(0,Math.min(ae,Math.floor($*(me-g))))]}function Ae(){return $=H.length/(I-g),ae=H.length-1,le}return le.domain=function(me){return arguments.length?(g=+me[0],I=+me[me.length-1],Ae()):[g,I]},le.range=function(me){return arguments.length?(H=me,Ae()):H},le.invertExtent=function(me){return me=H.indexOf(me),me=me<0?NaN:me/$+g,[me,me+1/$]},le.copy=function(){return Uu(g,I,H)},Ae()}a.scale.threshold=function(){return Bu([.5],[0,1])};function Bu(g,I){function H($){if($<=$)return I[a.bisect(g,$)]}return H.domain=function($){return arguments.length?(g=$,H):g},H.range=function($){return arguments.length?(I=$,H):I},H.invertExtent=function($){return $=I.indexOf($),[g[$-1],g[$]]},H.copy=function(){return Bu(g,I)},H}a.scale.identity=function(){return Gu([0,1])};function Gu(g){function I(H){return+H}return I.invert=I,I.domain=I.range=function(H){return arguments.length?(g=H.map(I),I):g},I.ticks=function(H){return Cl(g,H)},I.tickFormat=function(H,$){return d3_scale_linearTickFormat(g,H,$)},I.copy=function(){return Gu(g)},I}a.svg={};function Ch(){return 0}a.svg.arc=function(){var g=Sh,I=Lh,H=Ch,$=Js,ae=Hu,le=Yu,Ae=Rh;function me(){var Oe=Math.max(0,+g.apply(this,arguments)),ze=Math.max(0,+I.apply(this,arguments)),qe=ae.apply(this,arguments)-Ee,et=le.apply(this,arguments)-Ee,bt=Math.abs(et-qe),Rt=qe>et?0:1;if(ze<Oe&&(at=ze,ze=Oe,Oe=at),bt>=he)return Ce(ze,Rt)+(Oe?Ce(Oe,1-Rt):"")+"Z";var at,gt,mt,It,Pt=0,_t=0,Yt,ar,fr,ur,hr,vr,Dr,gr,Cr=[];if((It=(+Ae.apply(this,arguments)||0)/2)&&(mt=$===Js?Math.sqrt(Oe*Oe+ze*ze):+$.apply(this,arguments),Rt||(_t*=-1),ze&&(_t=nt(mt/ze*Math.sin(It))),Oe&&(Pt=nt(mt/Oe*Math.sin(It)))),ze){Yt=ze*Math.cos(qe+_t),ar=ze*Math.sin(qe+_t),fr=ze*Math.cos(et-_t),ur=ze*Math.sin(et-_t);var jr=Math.abs(et-qe-2*_t)<=de?0:1;if(_t&&js(Yt,ar,fr,ur)===Rt^jr){var Zn=(qe+et)/2;Yt=ze*Math.cos(Zn),ar=ze*Math.sin(Zn),fr=ur=null}}else Yt=ar=0;if(Oe){hr=Oe*Math.cos(et-Pt),vr=Oe*Math.sin(et-Pt),Dr=Oe*Math.cos(qe+Pt),gr=Oe*Math.sin(qe+Pt);var on=Math.abs(qe-et+2*Pt)<=de?0:1;if(Pt&&js(hr,vr,Dr,gr)===1-Rt^on){var ir=(qe+et)/2;hr=Oe*Math.cos(ir),vr=Oe*Math.sin(ir),Dr=gr=null}}else hr=vr=0;if(bt>Fe&&(at=Math.min(Math.abs(ze-Oe)/2,+H.apply(this,arguments)))>.001){gt=Oe<ze^Rt?0:1;var Ir=at,Nr=at;if(bt<de){var $r=Dr==null?[hr,vr]:fr==null?[Yt,ar]:Wr([Yt,ar],[Dr,gr],[fr,ur],[hr,vr]),Fn=Yt-$r[0],ai=ar-$r[1],Di=fr-$r[0],Ki=ur-$r[1],ea=1/Math.sin(Math.acos((Fn*Di+ai*Ki)/(Math.sqrt(Fn*Fn+ai*ai)*Math.sqrt(Di*Di+Ki*Ki)))/2),Ji=Math.sqrt($r[0]*$r[0]+$r[1]*$r[1]);Nr=Math.min(at,(Oe-Ji)/(ea-1)),Ir=Math.min(at,(ze-Ji)/(ea+1))}if(fr!=null){var sa=$s(Dr==null?[hr,vr]:[Dr,gr],[Yt,ar],ze,Ir,Rt),zi=$s([fr,ur],[hr,vr],ze,Ir,Rt);at===Ir?Cr.push("M",sa[0],"A",Ir,",",Ir," 0 0,",gt," ",sa[1],"A",ze,",",ze," 0 ",1-Rt^js(sa[1][0],sa[1][1],zi[1][0],zi[1][1]),",",Rt," ",zi[1],"A",Ir,",",Ir," 0 0,",gt," ",zi[0]):Cr.push("M",sa[0],"A",Ir,",",Ir," 0 1,",gt," ",zi[0])}else Cr.push("M",Yt,",",ar);if(Dr!=null){var la=$s([Yt,ar],[Dr,gr],Oe,-Nr,Rt),Go=$s([hr,vr],fr==null?[Yt,ar]:[fr,ur],Oe,-Nr,Rt);at===Nr?Cr.push("L",Go[0],"A",Nr,",",Nr," 0 0,",gt," ",Go[1],"A",Oe,",",Oe," 0 ",Rt^js(Go[1][0],Go[1][1],la[1][0],la[1][1]),",",1-Rt," ",la[1],"A",Nr,",",Nr," 0 0,",gt," ",la[0]):Cr.push("L",Go[0],"A",Nr,",",Nr," 0 0,",gt," ",la[0])}else Cr.push("L",hr,",",vr)}else Cr.push("M",Yt,",",ar),fr!=null&&Cr.push("A",ze,",",ze," 0 ",jr,",",Rt," ",fr,",",ur),Cr.push("L",hr,",",vr),Dr!=null&&Cr.push("A",Oe,",",Oe," 0 ",on,",",1-Rt," ",Dr,",",gr);return Cr.push("Z"),Cr.join("")}function Ce(Oe,ze){return"M0,"+Oe+"A"+Oe+","+Oe+" 0 1,"+ze+" 0,"+-Oe+"A"+Oe+","+Oe+" 0 1,"+ze+" 0,"+Oe}return me.innerRadius=function(Oe){return arguments.length?(g=zt(Oe),me):g},me.outerRadius=function(Oe){return arguments.length?(I=zt(Oe),me):I},me.cornerRadius=function(Oe){return arguments.length?(H=zt(Oe),me):H},me.padRadius=function(Oe){return arguments.length?($=Oe==Js?Js:zt(Oe),me):$},me.startAngle=function(Oe){return arguments.length?(ae=zt(Oe),me):ae},me.endAngle=function(Oe){return arguments.length?(le=zt(Oe),me):le},me.padAngle=function(Oe){return arguments.length?(Ae=zt(Oe),me):Ae},me.centroid=function(){var Oe=(+g.apply(this,arguments)+ +I.apply(this,arguments))/2,ze=(+ae.apply(this,arguments)+ +le.apply(this,arguments))/2-Ee;return[Math.cos(ze)*Oe,Math.sin(ze)*Oe]},me};var Js="auto";function Sh(g){return g.innerRadius}function Lh(g){return g.outerRadius}function Hu(g){return g.startAngle}function Yu(g){return g.endAngle}function Rh(g){return g&&g.padAngle}function js(g,I,H,$){return(g-H)*I-(I-$)*g>0?0:1}function $s(g,I,H,$,ae){var le=g[0]-I[0],Ae=g[1]-I[1],me=(ae?$:-$)/Math.sqrt(le*le+Ae*Ae),Ce=me*Ae,Oe=-me*le,ze=g[0]+Ce,qe=g[1]+Oe,et=I[0]+Ce,bt=I[1]+Oe,Rt=(ze+et)/2,at=(qe+bt)/2,gt=et-ze,mt=bt-qe,It=gt*gt+mt*mt,Pt=H-$,_t=ze*bt-et*qe,Yt=(mt<0?-1:1)*Math.sqrt(Math.max(0,Pt*Pt*It-_t*_t)),ar=(_t*mt-gt*Yt)/It,fr=(-_t*gt-mt*Yt)/It,ur=(_t*mt+gt*Yt)/It,hr=(-_t*gt+mt*Yt)/It,vr=ar-Rt,Dr=fr-at,gr=ur-Rt,Cr=hr-at;return vr*vr+Dr*Dr>gr*gr+Cr*Cr&&(ar=ur,fr=hr),[[ar-Ce,fr-Oe],[ar*H/Pt,fr*H/Pt]]}function Wu(){return!0}function Vu(g){var I=Pn,H=_r,$=Wu,ae=Fa,le=ae.key,Ae=.7;function me(Ce){var Oe=[],ze=[],qe=-1,et=Ce.length,bt,Rt=zt(I),at=zt(H);function gt(){Oe.push("M",ae(g(ze),Ae))}for(;++qe<et;)$.call(this,bt=Ce[qe],qe)?ze.push([+Rt.call(this,bt,qe),+at.call(this,bt,qe)]):ze.length&&(gt(),ze=[]);return ze.length&&gt(),Oe.length?Oe.join(""):null}return me.x=function(Ce){return arguments.length?(I=Ce,me):I},me.y=function(Ce){return arguments.length?(H=Ce,me):H},me.defined=function(Ce){return arguments.length?($=Ce,me):$},me.interpolate=function(Ce){return arguments.length?(typeof Ce=="function"?le=ae=Ce:le=(ae=Sl.get(Ce)||Fa).key,me):le},me.tension=function(Ce){return arguments.length?(Ae=Ce,me):Ae},me}a.svg.line=function(){return Vu(G)};var Sl=a.map({linear:Fa,"linear-closed":Xu,step:Dh,"step-before":Ll,"step-after":Rl,basis:Zu,"basis-open":Fh,"basis-closed":Nh,bundle:Oh,cardinal:kh,"cardinal-open":Ih,"cardinal-closed":Ph,monotone:Bh});Sl.forEach(function(g,I){I.key=g,I.closed=/-closed$/.test(g)});function Fa(g){return g.length>1?g.join("L"):g+"Z"}function Xu(g){return g.join("L")+"Z"}function Dh(g){for(var I=0,H=g.length,$=g[0],ae=[$[0],",",$[1]];++I<H;)ae.push("H",($[0]+($=g[I])[0])/2,"V",$[1]);return H>1&&ae.push("H",$[0]),ae.join("")}function Ll(g){for(var I=0,H=g.length,$=g[0],ae=[$[0],",",$[1]];++I<H;)ae.push("V",($=g[I])[1],"H",$[0]);return ae.join("")}function Rl(g){for(var I=0,H=g.length,$=g[0],ae=[$[0],",",$[1]];++I<H;)ae.push("H",($=g[I])[0],"V",$[1]);return ae.join("")}function Ih(g,I){return g.length<4?Fa(g):g[1]+Qs(g.slice(1,-1),Dl(g,I))}function Ph(g,I){return g.length<3?Xu(g):g[0]+Qs((g.push(g[0]),g),Dl([g[g.length-2]].concat(g,[g[1]]),I))}function kh(g,I){return g.length<3?Fa(g):g[0]+Qs(g,Dl(g,I))}function Qs(g,I){if(I.length<1||g.length!=I.length&&g.length!=I.length+2)return Fa(g);var H=g.length!=I.length,$="",ae=g[0],le=g[1],Ae=I[0],me=Ae,Ce=1;if(H&&($+="Q"+(le[0]-Ae[0]*2/3)+","+(le[1]-Ae[1]*2/3)+","+le[0]+","+le[1],ae=g[1],Ce=2),I.length>1){me=I[1],le=g[Ce],Ce++,$+="C"+(ae[0]+Ae[0])+","+(ae[1]+Ae[1])+","+(le[0]-me[0])+","+(le[1]-me[1])+","+le[0]+","+le[1];for(var Oe=2;Oe<I.length;Oe++,Ce++)le=g[Ce],me=I[Oe],$+="S"+(le[0]-me[0])+","+(le[1]-me[1])+","+le[0]+","+le[1]}if(H){var ze=g[Ce];$+="Q"+(le[0]+me[0]*2/3)+","+(le[1]+me[1]*2/3)+","+ze[0]+","+ze[1]}return $}function Dl(g,I){for(var H=[],$=(1-I)/2,ae,le=g[0],Ae=g[1],me=1,Ce=g.length;++me<Ce;)ae=le,le=Ae,Ae=g[me],H.push([$*(Ae[0]-ae[0]),$*(Ae[1]-ae[1])]);return H}function Zu(g){if(g.length<3)return Fa(g);var I=1,H=g.length,$=g[0],ae=$[0],le=$[1],Ae=[ae,ae,ae,($=g[1])[0]],me=[le,le,le,$[1]],Ce=[ae,",",le,"L",ba(Mo,Ae),",",ba(Mo,me)];for(g.push(g[H-1]);++I<=H;)$=g[I],Ae.shift(),Ae.push($[0]),me.shift(),me.push($[1]),Il(Ce,Ae,me);return g.pop(),Ce.push("L",$),Ce.join("")}function Fh(g){if(g.length<4)return Fa(g);for(var I=[],H=-1,$=g.length,ae,le=[0],Ae=[0];++H<3;)ae=g[H],le.push(ae[0]),Ae.push(ae[1]);for(I.push(ba(Mo,le)+","+ba(Mo,Ae)),--H;++H<$;)ae=g[H],le.shift(),le.push(ae[0]),Ae.shift(),Ae.push(ae[1]),Il(I,le,Ae);return I.join("")}function Nh(g){for(var I,H=-1,$=g.length,ae=$+4,le,Ae=[],me=[];++H<4;)le=g[H%$],Ae.push(le[0]),me.push(le[1]);for(I=[ba(Mo,Ae),",",ba(Mo,me)],--H;++H<ae;)le=g[H%$],Ae.shift(),Ae.push(le[0]),me.shift(),me.push(le[1]),Il(I,Ae,me);return I.join("")}function Oh(g,I){var H=g.length-1;if(H)for(var $=g[0][0],ae=g[0][1],le=g[H][0]-$,Ae=g[H][1]-ae,me=-1,Ce,Oe;++me<=H;)Ce=g[me],Oe=me/H,Ce[0]=I*Ce[0]+(1-I)*($+Oe*le),Ce[1]=I*Ce[1]+(1-I)*(ae+Oe*Ae);return Zu(g)}function ba(g,I){return g[0]*I[0]+g[1]*I[1]+g[2]*I[2]+g[3]*I[3]}var Ku=[0,2/3,1/3,0],Ju=[0,1/3,2/3,0],Mo=[0,1/6,2/3,1/6];function Il(g,I,H){g.push("C",ba(Ku,I),",",ba(Ku,H),",",ba(Ju,I),",",ba(Ju,H),",",ba(Mo,I),",",ba(Mo,H))}function Pl(g,I){return(I[1]-g[1])/(I[0]-g[0])}function zh(g){for(var I=0,H=g.length-1,$=[],ae=g[0],le=g[1],Ae=$[0]=Pl(ae,le);++I<H;)$[I]=(Ae+(Ae=Pl(ae=le,le=g[I+1])))/2;return $[I]=Ae,$}function Uh(g){for(var I=[],H,$,ae,le,Ae=zh(g),me=-1,Ce=g.length-1;++me<Ce;)H=Pl(g[me],g[me+1]),m(H)<Fe?Ae[me]=Ae[me+1]=0:($=Ae[me]/H,ae=Ae[me+1]/H,le=$*$+ae*ae,le>9&&(le=H*3/Math.sqrt(le),Ae[me]=le*$,Ae[me+1]=le*ae));for(me=-1;++me<=Ce;)le=(g[Math.min(Ce,me+1)][0]-g[Math.max(0,me-1)][0])/(6*(1+Ae[me]*Ae[me])),I.push([le||0,Ae[me]*le||0]);return I}function Bh(g){return g.length<3?Fa(g):g[0]+Qs(g,Uh(g))}a.svg.line.radial=function(){var g=Vu(ju);return g.radius=g.x,delete g.x,g.angle=g.y,delete g.y,g};function ju(g){for(var I,H=-1,$=g.length,ae,le;++H<$;)I=g[H],ae=I[0],le=I[1]-Ee,I[0]=ae*Math.cos(le),I[1]=ae*Math.sin(le);return g}function $u(g){var I=Pn,H=Pn,$=0,ae=_r,le=Wu,Ae=Fa,me=Ae.key,Ce=Ae,Oe="L",ze=.7;function qe(et){var bt=[],Rt=[],at=[],gt=-1,mt=et.length,It,Pt=zt(I),_t=zt($),Yt=I===H?function(){return fr}:zt(H),ar=$===ae?function(){return ur}:zt(ae),fr,ur;function hr(){bt.push("M",Ae(g(at),ze),Oe,Ce(g(Rt.reverse()),ze),"Z")}for(;++gt<mt;)le.call(this,It=et[gt],gt)?(Rt.push([fr=+Pt.call(this,It,gt),ur=+_t.call(this,It,gt)]),at.push([+Yt.call(this,It,gt),+ar.call(this,It,gt)])):Rt.length&&(hr(),Rt=[],at=[]);return Rt.length&&hr(),bt.length?bt.join(""):null}return qe.x=function(et){return arguments.length?(I=H=et,qe):H},qe.x0=function(et){return arguments.length?(I=et,qe):I},qe.x1=function(et){return arguments.length?(H=et,qe):H},qe.y=function(et){return arguments.length?($=ae=et,qe):ae},qe.y0=function(et){return arguments.length?($=et,qe):$},qe.y1=function(et){return arguments.length?(ae=et,qe):ae},qe.defined=function(et){return arguments.length?(le=et,qe):le},qe.interpolate=function(et){return arguments.length?(typeof et=="function"?me=Ae=et:me=(Ae=Sl.get(et)||Fa).key,Ce=Ae.reverse||Ae,Oe=Ae.closed?"M":"L",qe):me},qe.tension=function(et){return arguments.length?(ze=et,qe):ze},qe}Ll.reverse=Rl,Rl.reverse=Ll,a.svg.area=function(){return $u(G)},a.svg.area.radial=function(){var g=$u(ju);return g.radius=g.x,delete g.x,g.innerRadius=g.x0,delete g.x0,g.outerRadius=g.x1,delete g.x1,g.angle=g.y,delete g.y,g.startAngle=g.y0,delete g.y0,g.endAngle=g.y1,delete g.y1,g};function Qu(g){return g.source}function qu(g){return g.target}a.svg.chord=function(){var g=Qu,I=qu,H=Gh,$=Hu,ae=Yu;function le(ze,qe){var et=Ae(this,g,ze,qe),bt=Ae(this,I,ze,qe);return"M"+et.p0+Ce(et.r,et.p1,et.a1-et.a0)+(me(et,bt)?Oe(et.r,et.p1,et.r,et.p0):Oe(et.r,et.p1,bt.r,bt.p0)+Ce(bt.r,bt.p1,bt.a1-bt.a0)+Oe(bt.r,bt.p1,et.r,et.p0))+"Z"}function Ae(ze,qe,et,bt){var Rt=qe.call(ze,et,bt),at=H.call(ze,Rt,bt),gt=$.call(ze,Rt,bt)-Ee,mt=ae.call(ze,Rt,bt)-Ee;return{r:at,a0:gt,a1:mt,p0:[at*Math.cos(gt),at*Math.sin(gt)],p1:[at*Math.cos(mt),at*Math.sin(mt)]}}function me(ze,qe){return ze.a0==qe.a0&&ze.a1==qe.a1}function Ce(ze,qe,et){return"A"+ze+","+ze+" 0 "+ +(et>de)+",1 "+qe}function Oe(ze,qe,et,bt){return"Q 0,0 "+bt}return le.radius=function(ze){return arguments.length?(H=zt(ze),le):H},le.source=function(ze){return arguments.length?(g=zt(ze),le):g},le.target=function(ze){return arguments.length?(I=zt(ze),le):I},le.startAngle=function(ze){return arguments.length?($=zt(ze),le):$},le.endAngle=function(ze){return arguments.length?(ae=zt(ze),le):ae},le};function Gh(g){return g.radius}a.svg.diagonal=function(){var g=Qu,I=qu,H=ef;function $(ae,le){var Ae=g.call(this,ae,le),me=I.call(this,ae,le),Ce=(Ae.y+me.y)/2,Oe=[Ae,{x:Ae.x,y:Ce},{x:me.x,y:Ce},me];return Oe=Oe.map(H),"M"+Oe[0]+"C"+Oe[1]+" "+Oe[2]+" "+Oe[3]}return $.source=function(ae){return arguments.length?(g=zt(ae),$):g},$.target=function(ae){return arguments.length?(I=zt(ae),$):I},$.projection=function(ae){return arguments.length?(H=ae,$):H},$};function ef(g){return[g.x,g.y]}a.svg.diagonal.radial=function(){var g=a.svg.diagonal(),I=ef,H=g.projection;return g.projection=function($){return arguments.length?H(Hh(I=$)):I},g};function Hh(g){return function(){var I=g.apply(this,arguments),H=I[0],$=I[1]-Ee;return[H*Math.cos($),H*Math.sin($)]}}a.svg.symbol=function(){var g=Wh,I=Yh;function H($,ae){return(rf.get(g.call(this,$,ae))||tf)(I.call(this,$,ae))}return H.type=function($){return arguments.length?(g=zt($),H):g},H.size=function($){return arguments.length?(I=zt($),H):I},H};function Yh(){return 64}function Wh(){return"circle"}function tf(g){var I=Math.sqrt(g/de);return"M0,"+I+"A"+I+","+I+" 0 1,1 0,"+-I+"A"+I+","+I+" 0 1,1 0,"+I+"Z"}var rf=a.map({circle:tf,cross:function(g){var I=Math.sqrt(g/5)/2;return"M"+-3*I+","+-I+"H"+-I+"V"+-3*I+"H"+I+"V"+-I+"H"+3*I+"V"+I+"H"+I+"V"+3*I+"H"+-I+"V"+I+"H"+-3*I+"Z"},diamond:function(g){var I=Math.sqrt(g/(2*nf)),H=I*nf;return"M0,"+-I+"L"+H+",0 0,"+I+" "+-H+",0Z"},square:function(g){var I=Math.sqrt(g)/2;return"M"+-I+","+-I+"L"+I+","+-I+" "+I+","+I+" "+-I+","+I+"Z"},"triangle-down":function(g){var I=Math.sqrt(g/qs),H=I*qs/2;return"M0,"+H+"L"+I+","+-H+" "+-I+","+-H+"Z"},"triangle-up":function(g){var I=Math.sqrt(g/qs),H=I*qs/2;return"M0,"+-H+"L"+I+","+H+" "+-I+","+H+"Z"}});a.svg.symbolTypes=rf.keys();var qs=Math.sqrt(3),nf=Math.tan(30*Pe);P.transition=function(g){for(var I=Bo||++of,H=Fl(g),$=[],ae,le,Ae=tl||{time:Date.now(),ease:Ac,delay:0,duration:250},me=-1,Ce=this.length;++me<Ce;){$.push(ae=[]);for(var Oe=this[me],ze=-1,qe=Oe.length;++ze<qe;)(le=Oe[ze])&&rl(le,ze,H,I,Ae),ae.push(le)}return xs($,H,I)},P.interrupt=function(g){return this.each(g==null?el:af(Fl(g)))};var el=af(Fl());function af(g){return function(){var I,H,$;(I=this[g])&&($=I[H=I.active])&&($.timer.c=null,$.timer.t=NaN,--I.count?delete I[H]:delete this[g],I.active+=.5,$.event&&$.event.interrupt.call(this,this.__data__,$.index))}}function xs(g,I,H){return ye(g,ii),g.namespace=I,g.id=H,g}var ii=[],of=0,Bo,tl;ii.call=P.call,ii.empty=P.empty,ii.node=P.node,ii.size=P.size,a.transition=function(g,I){return g&&g.transition?Bo?g.transition(I):g:a.selection().transition(g)},a.transition.prototype=ii,ii.select=function(g){var I=this.id,H=this.namespace,$=[],ae,le,Ae;g=q(g);for(var me=-1,Ce=this.length;++me<Ce;){$.push(ae=[]);for(var Oe=this[me],ze=-1,qe=Oe.length;++ze<qe;)(Ae=Oe[ze])&&(le=g.call(Ae,Ae.__data__,ze,me))?("__data__"in Ae&&(le.__data__=Ae.__data__),rl(le,ze,H,I,Ae[H][I]),ae.push(le)):ae.push(null)}return xs($,H,I)},ii.selectAll=function(g){var I=this.id,H=this.namespace,$=[],ae,le,Ae,me,Ce;g=z(g);for(var Oe=-1,ze=this.length;++Oe<ze;)for(var qe=this[Oe],et=-1,bt=qe.length;++et<bt;)if(Ae=qe[et]){Ce=Ae[H][I],le=g.call(Ae,Ae.__data__,et,Oe),$.push(ae=[]);for(var Rt=-1,at=le.length;++Rt<at;)(me=le[Rt])&&rl(me,Rt,H,I,Ce),ae.push(me)}return xs($,H,I)},ii.filter=function(g){var I=[],H,$,ae;typeof g!="function"&&(g=He(g));for(var le=0,Ae=this.length;le<Ae;le++){I.push(H=[]);for(var $=this[le],me=0,Ce=$.length;me<Ce;me++)(ae=$[me])&&g.call(ae,ae.__data__,me,le)&&H.push(ae)}return xs(I,this.namespace,this.id)},ii.tween=function(g,I){var H=this.id,$=this.namespace;return arguments.length<2?this.node()[$][H].tween.get(g):st(this,I==null?function(ae){ae[$][H].tween.remove(g)}:function(ae){ae[$][H].tween.set(g,I)})};function kl(g,I,H,$){var ae=g.id,le=g.namespace;return st(g,typeof H=="function"?function(Ae,me,Ce){Ae[le][ae].tween.set(I,$(H.call(Ae,Ae.__data__,me,Ce)))}:(H=$(H),function(Ae){Ae[le][ae].tween.set(I,H)}))}ii.attr=function(g,I){if(arguments.length<2){for(I in g)this.attr(I,g[I]);return this}var H=g=="transform"?yu:Uo,$=a.ns.qualify(g);function ae(){this.removeAttribute($)}function le(){this.removeAttributeNS($.space,$.local)}function Ae(Ce){return Ce==null?ae:(Ce+="",function(){var Oe=this.getAttribute($),ze;return Oe!==Ce&&(ze=H(Oe,Ce),function(qe){this.setAttribute($,ze(qe))})})}function me(Ce){return Ce==null?le:(Ce+="",function(){var Oe=this.getAttributeNS($.space,$.local),ze;return Oe!==Ce&&(ze=H(Oe,Ce),function(qe){this.setAttributeNS($.space,$.local,ze(qe))})})}return kl(this,"attr."+g,I,$.local?me:Ae)},ii.attrTween=function(g,I){var H=a.ns.qualify(g);function $(le,Ae){var me=I.call(this,le,Ae,this.getAttribute(H));return me&&function(Ce){this.setAttribute(H,me(Ce))}}function ae(le,Ae){var me=I.call(this,le,Ae,this.getAttributeNS(H.space,H.local));return me&&function(Ce){this.setAttributeNS(H.space,H.local,me(Ce))}}return this.tween("attr."+g,H.local?ae:$)},ii.style=function(g,I,H){var $=arguments.length;if($<3){if(typeof g!="string"){$<2&&(I="");for(H in g)this.style(H,g[H],I);return this}H=""}function ae(){this.style.removeProperty(g)}function le(Ae){return Ae==null?ae:(Ae+="",function(){var me=p(this).getComputedStyle(this,null).getPropertyValue(g),Ce;return me!==Ae&&(Ce=Uo(me,Ae),function(Oe){this.style.setProperty(g,Ce(Oe),H)})})}return kl(this,"style."+g,I,le)},ii.styleTween=function(g,I,H){arguments.length<3&&(H="");function $(ae,le){var Ae=I.call(this,ae,le,p(this).getComputedStyle(this,null).getPropertyValue(g));return Ae&&function(me){this.style.setProperty(g,Ae(me),H)}}return this.tween("style."+g,$)},ii.text=function(g){return kl(this,"text",g,Vh)};function Vh(g){return g==null&&(g=""),function(){this.textContent=g}}ii.remove=function(){var g=this.namespace;return this.each("end.transition",function(){var I;this[g].count<2&&(I=this.parentNode)&&I.removeChild(this)})},ii.ease=function(g){var I=this.id,H=this.namespace;return arguments.length<1?this.node()[H][I].ease:(typeof g!="function"&&(g=a.ease.apply(a,arguments)),st(this,function($){$[H][I].ease=g}))},ii.delay=function(g){var I=this.id,H=this.namespace;return arguments.length<1?this.node()[H][I].delay:st(this,typeof g=="function"?function($,ae,le){$[H][I].delay=+g.call($,$.__data__,ae,le)}:(g=+g,function($){$[H][I].delay=g}))},ii.duration=function(g){var I=this.id,H=this.namespace;return arguments.length<1?this.node()[H][I].duration:st(this,typeof g=="function"?function($,ae,le){$[H][I].duration=Math.max(1,g.call($,$.__data__,ae,le))}:(g=Math.max(1,g),function($){$[H][I].duration=g}))},ii.each=function(g,I){var H=this.id,$=this.namespace;if(arguments.length<2){var ae=tl,le=Bo;try{Bo=H,st(this,function(Ae,me,Ce){tl=Ae[$][H],g.call(Ae,Ae.__data__,me,Ce)})}finally{tl=ae,Bo=le}}else st(this,function(Ae){var me=Ae[$][H];(me.event||(me.event=a.dispatch("start","end","interrupt"))).on(g,I)});return this},ii.transition=function(){for(var g=this.id,I=++of,H=this.namespace,$=[],ae,le,Ae,me,Ce=0,Oe=this.length;Ce<Oe;Ce++){$.push(ae=[]);for(var le=this[Ce],ze=0,qe=le.length;ze<qe;ze++)(Ae=le[ze])&&(me=Ae[H][g],rl(Ae,ze,H,I,{time:me.time,ease:me.ease,delay:me.delay+me.duration,duration:me.duration})),ae.push(Ae)}return xs($,H,I)};function Fl(g){return g==null?"__transition__":"__transition_"+g+"__"}function rl(g,I,H,$,ae){var le=g[H]||(g[H]={active:0,count:0}),Ae=le[$],me,Ce,Oe,ze,qe;function et(at){var gt=Ae.delay;if(Ce.t=gt+me,gt<=at)return bt(at-gt);Ce.c=bt}function bt(at){var gt=le.active,mt=le[gt];mt&&(mt.timer.c=null,mt.timer.t=NaN,--le.count,delete le[gt],mt.event&&mt.event.interrupt.call(g,g.__data__,mt.index));for(var It in le)if(+It<$){var Pt=le[It];Pt.timer.c=null,Pt.timer.t=NaN,--le.count,delete le[It]}Ce.c=Rt,Lr(function(){return Ce.c&&Rt(at||1)&&(Ce.c=null,Ce.t=NaN),1},0,me),le.active=$,Ae.event&&Ae.event.start.call(g,g.__data__,I),qe=[],Ae.tween.forEach(function(_t,Yt){(Yt=Yt.call(g,g.__data__,I))&&qe.push(Yt)}),ze=Ae.ease,Oe=Ae.duration}function Rt(at){for(var gt=at/Oe,mt=ze(gt),It=qe.length;It>0;)qe[--It].call(g,mt);if(gt>=1)return Ae.event&&Ae.event.end.call(g,g.__data__,I),--le.count?delete le[$]:delete g[H],1}Ae||(me=ae.time,Ce=Lr(et,0,me),Ae=le[$]={tween:new O,time:me,timer:Ce,delay:ae.delay,duration:ae.duration,ease:ae.ease,index:I},ae=null,++le.count)}a.svg.axis=function(){var g=a.scale.linear(),I=sf,H=6,$=6,ae=3,le=[10],Ae=null,me;function Ce(Oe){Oe.each(function(){var ze=a.select(this),qe=this.__chart__||g,et=this.__chart__=g.copy(),bt=Ae??(et.ticks?et.ticks.apply(et,le):et.domain()),Rt=me??(et.tickFormat?et.tickFormat.apply(et,le):G),at=ze.selectAll(".tick").data(bt,et),gt=at.enter().insert("g",".domain").attr("class","tick").style("opacity",Fe),mt=a.transition(at.exit()).style("opacity",Fe).remove(),It=a.transition(at.order()).style("opacity",1),Pt=Math.max(H,0)+ae,_t,Yt=Zs(et),ar=ze.selectAll(".domain").data([0]),fr=(ar.enter().append("path").attr("class","domain"),a.transition(ar));gt.append("line"),gt.append("text");var ur=gt.select("line"),hr=It.select("line"),vr=at.select("text").text(Rt),Dr=gt.select("text"),gr=It.select("text"),Cr=I==="top"||I==="left"?-1:1,jr,Zn,on,ir;if(I==="bottom"||I==="top"?(_t=Zh,jr="x",on="y",Zn="x2",ir="y2",vr.attr("dy",Cr<0?"0em":".71em").style("text-anchor","middle"),fr.attr("d","M"+Yt[0]+","+Cr*$+"V0H"+Yt[1]+"V"+Cr*$)):(_t=Kh,jr="y",on="x",Zn="y2",ir="x2",vr.attr("dy",".32em").style("text-anchor",Cr<0?"end":"start"),fr.attr("d","M"+Cr*$+","+Yt[0]+"H0V"+Yt[1]+"H"+Cr*$)),ur.attr(ir,Cr*H),Dr.attr(on,Cr*Pt),hr.attr(Zn,0).attr(ir,Cr*H),gr.attr(jr,0).attr(on,Cr*Pt),et.rangeBand){var Ir=et,Nr=Ir.rangeBand()/2;qe=et=function($r){return Ir($r)+Nr}}else qe.rangeBand?qe=et:mt.call(_t,et,qe);gt.call(_t,qe,et),It.call(_t,et,et)})}return Ce.scale=function(Oe){return arguments.length?(g=Oe,Ce):g},Ce.orient=function(Oe){return arguments.length?(I=Oe in Xh?Oe+"":sf,Ce):I},Ce.ticks=function(){return arguments.length?(le=s(arguments),Ce):le},Ce.tickValues=function(Oe){return arguments.length?(Ae=Oe,Ce):Ae},Ce.tickFormat=function(Oe){return arguments.length?(me=Oe,Ce):me},Ce.tickSize=function(Oe){var ze=arguments.length;return ze?(H=+Oe,$=+arguments[ze-1],Ce):H},Ce.innerTickSize=function(Oe){return arguments.length?(H=+Oe,Ce):H},Ce.outerTickSize=function(Oe){return arguments.length?($=+Oe,Ce):$},Ce.tickPadding=function(Oe){return arguments.length?(ae=+Oe,Ce):ae},Ce.tickSubdivide=function(){return arguments.length&&Ce},Ce};var sf="bottom",Xh={top:1,right:1,bottom:1,left:1};function Zh(g,I,H){g.attr("transform",function($){var ae=I($);return"translate("+(isFinite(ae)?ae:H($))+",0)"})}function Kh(g,I,H){g.attr("transform",function($){var ae=I($);return"translate(0,"+(isFinite(ae)?ae:H($))+")"})}a.svg.brush=function(){var g=ce(ze,"brushstart","brush","brushend"),I=null,H=null,$=[0,0],ae=[0,0],le,Ae,me=!0,Ce=!0,Oe=Nl[0];function ze(at){at.each(function(){var gt=a.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Rt).on("touchstart.brush",Rt),mt=gt.selectAll(".background").data([0]);mt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),gt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var It=gt.selectAll(".resize").data(Oe,G);It.exit().remove(),It.enter().append("g").attr("class",function(ar){return"resize "+ar}).style("cursor",function(ar){return Jh[ar]}).append("rect").attr("x",function(ar){return/[ew]$/.test(ar)?-3:null}).attr("y",function(ar){return/^[ns]/.test(ar)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),It.style("display",ze.empty()?"none":null);var Pt=a.transition(gt),_t=a.transition(mt),Yt;I&&(Yt=Zs(I),_t.attr("x",Yt[0]).attr("width",Yt[1]-Yt[0]),et(Pt)),H&&(Yt=Zs(H),_t.attr("y",Yt[0]).attr("height",Yt[1]-Yt[0]),bt(Pt)),qe(Pt)})}ze.event=function(at){at.each(function(){var gt=g.of(this,arguments),mt={x:$,y:ae,i:le,j:Ae},It=this.__chart__||mt;this.__chart__=mt,Bo?a.select(this).transition().each("start.brush",function(){le=It.i,Ae=It.j,$=It.x,ae=It.y,gt({type:"brushstart"})}).tween("brush:brush",function(){var Pt=Vs($,mt.x),_t=Vs(ae,mt.y);return le=Ae=null,function(Yt){$=mt.x=Pt(Yt),ae=mt.y=_t(Yt),gt({type:"brush",mode:"resize"})}}).each("end.brush",function(){le=mt.i,Ae=mt.j,gt({type:"brush",mode:"resize"}),gt({type:"brushend"})}):(gt({type:"brushstart"}),gt({type:"brush",mode:"resize"}),gt({type:"brushend"}))})};function qe(at){at.selectAll(".resize").attr("transform",function(gt){return"translate("+$[+/e$/.test(gt)]+","+ae[+/^s/.test(gt)]+")"})}function et(at){at.select(".extent").attr("x",$[0]),at.selectAll(".extent,.n>rect,.s>rect").attr("width",$[1]-$[0])}function bt(at){at.select(".extent").attr("y",ae[0]),at.selectAll(".extent,.e>rect,.w>rect").attr("height",ae[1]-ae[0])}function Rt(){var at=this,gt=a.select(a.event.target),mt=g.of(at,arguments),It=a.select(at),Pt=gt.datum(),_t=!/^(n|s)$/.test(Pt)&&I,Yt=!/^(e|w)$/.test(Pt)&&H,ar=gt.classed("extent"),fr=Et(at),ur,hr=a.mouse(at),vr,Dr=a.select(p(at)).on("keydown.brush",jr).on("keyup.brush",Zn);if(a.event.changedTouches?Dr.on("touchmove.brush",on).on("touchend.brush",Ir):Dr.on("mousemove.brush",on).on("mouseup.brush",Ir),It.interrupt().selectAll("*").interrupt(),ar)hr[0]=$[0]-hr[0],hr[1]=ae[0]-hr[1];else if(Pt){var gr=+/w$/.test(Pt),Cr=+/^n/.test(Pt);vr=[$[1-gr]-hr[0],ae[1-Cr]-hr[1]],hr[0]=$[gr],hr[1]=ae[Cr]}else a.event.altKey&&(ur=hr.slice());It.style("pointer-events","none").selectAll(".resize").style("display",null),a.select("body").style("cursor",gt.style("cursor")),mt({type:"brushstart"}),on();function jr(){a.event.keyCode==32&&(ar||(ur=null,hr[0]-=$[1],hr[1]-=ae[1],ar=2),xe())}function Zn(){a.event.keyCode==32&&ar==2&&(hr[0]+=$[1],hr[1]+=ae[1],ar=0,xe())}function on(){var Nr=a.mouse(at),$r=!1;vr&&(Nr[0]+=vr[0],Nr[1]+=vr[1]),ar||(a.event.altKey?(ur||(ur=[($[0]+$[1])/2,(ae[0]+ae[1])/2]),hr[0]=$[+(Nr[0]<ur[0])],hr[1]=ae[+(Nr[1]<ur[1])]):ur=null),_t&&ir(Nr,I,0)&&(et(It),$r=!0),Yt&&ir(Nr,H,1)&&(bt(It),$r=!0),$r&&(qe(It),mt({type:"brush",mode:ar?"move":"resize"}))}function ir(Nr,$r,Fn){var ai=Zs($r),Di=ai[0],Ki=ai[1],ea=hr[Fn],Ji=Fn?ae:$,sa=Ji[1]-Ji[0],zi,la;if(ar&&(Di-=ea,Ki-=sa+ea),zi=(Fn?Ce:me)?Math.max(Di,Math.min(Ki,Nr[Fn])):Nr[Fn],ar?la=(zi+=ea)+sa:(ur&&(ea=Math.max(Di,Math.min(Ki,2*ur[Fn]-zi))),ea<zi?(la=zi,zi=ea):la=ea),Ji[0]!=zi||Ji[1]!=la)return Fn?Ae=null:le=null,Ji[0]=zi,Ji[1]=la,!0}function Ir(){on(),It.style("pointer-events","all").selectAll(".resize").style("display",ze.empty()?"none":null),a.select("body").style("cursor",null),Dr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),fr(),mt({type:"brushend"})}}return ze.x=function(at){return arguments.length?(I=at,Oe=Nl[!I<<1|!H],ze):I},ze.y=function(at){return arguments.length?(H=at,Oe=Nl[!I<<1|!H],ze):H},ze.clamp=function(at){return arguments.length?(I&&H?(me=!!at[0],Ce=!!at[1]):I?me=!!at:H&&(Ce=!!at),ze):I&&H?[me,Ce]:I?me:H?Ce:null},ze.extent=function(at){var gt,mt,It,Pt,_t;return arguments.length?(I&&(gt=at[0],mt=at[1],H&&(gt=gt[0],mt=mt[0]),le=[gt,mt],I.invert&&(gt=I(gt),mt=I(mt)),mt<gt&&(_t=gt,gt=mt,mt=_t),(gt!=$[0]||mt!=$[1])&&($=[gt,mt])),H&&(It=at[0],Pt=at[1],I&&(It=It[1],Pt=Pt[1]),Ae=[It,Pt],H.invert&&(It=H(It),Pt=H(Pt)),Pt<It&&(_t=It,It=Pt,Pt=_t),(It!=ae[0]||Pt!=ae[1])&&(ae=[It,Pt])),ze):(I&&(le?(gt=le[0],mt=le[1]):(gt=$[0],mt=$[1],I.invert&&(gt=I.invert(gt),mt=I.invert(mt)),mt<gt&&(_t=gt,gt=mt,mt=_t))),H&&(Ae?(It=Ae[0],Pt=Ae[1]):(It=ae[0],Pt=ae[1],H.invert&&(It=H.invert(It),Pt=H.invert(Pt)),Pt<It&&(_t=It,It=Pt,Pt=_t))),I&&H?[[gt,It],[mt,Pt]]:I?[gt,mt]:H&&[It,Pt])},ze.clear=function(){return ze.empty()||($=[0,0],ae=[0,0],le=Ae=null),ze},ze.empty=function(){return!!I&&$[0]==$[1]||!!H&&ae[0]==ae[1]},a.rebind(ze,g,"on")};var Jh={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Nl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];a.text=Zt(function(g){return g.responseText}),a.json=function(g,I){return Kt(g,"application/json",jh,I)};function jh(g){return JSON.parse(g.responseText)}a.html=function(g,I){return Kt(g,"text/html",$h,I)};function $h(g){var I=v.createRange();return I.selectNode(v.body),I.createContextualFragment(g.responseText)}a.xml=Zt(function(g){return g.responseXML}),i=a,c=typeof i=="function"?i.call(u,r,u,f):i,c!==void 0&&(f.exports=c)}).apply(self)},3160:function(f,u,r){r.r(u),r.d(u,{decode:function(){return s},encode:function(){return l}});for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=typeof Uint8Array>"u"?[]:new Uint8Array(256),a=0;a<i.length;a++)c[i.charCodeAt(a)]=a;var l=function(v){var d=new Uint8Array(v),p,o=d.length,y="";for(p=0;p<o;p+=3)y+=i[d[p]>>2],y+=i[(d[p]&3)<<4|d[p+1]>>4],y+=i[(d[p+1]&15)<<2|d[p+2]>>6],y+=i[d[p+2]&63];return o%3===2?y=y.substring(0,y.length-1)+"=":o%3===1&&(y=y.substring(0,y.length-2)+"=="),y},s=function(v){var d=v.length*.75,p=v.length,o,y=0,_,E,M,b;v[v.length-1]==="="&&(d--,v[v.length-2]==="="&&d--);var w=new ArrayBuffer(d),A=new Uint8Array(w);for(o=0;o<p;o+=4)_=c[v.charCodeAt(o)],E=c[v.charCodeAt(o+1)],M=c[v.charCodeAt(o+2)],b=c[v.charCodeAt(o+3)],A[y++]=_<<2|E>>4,A[y++]=(E&15)<<4|M>>2,A[y++]=(M&3)<<6|b&63;return w}},7624:function(f,u,r){r.d(u,{E9:function(){return C},SO:function(){return R}});function i(L){return Math.abs(L=Math.round(L))>=1e21?L.toLocaleString("en").replace(/,/g,""):L.toString(10)}function c(L,D){if((O=(L=D?L.toExponential(D-1):L.toExponential()).indexOf("e"))<0)return null;var O,N=L.slice(0,O);return[N.length>1?N[0]+N.slice(2):N,+L.slice(O+1)]}function a(L){return L=c(Math.abs(L)),L?L[1]:NaN}function l(L,D){return function(O,N){for(var V=O.length,X=[],k=0,Z=L[0],B=0;V>0&&Z>0&&(B+Z+1>N&&(Z=Math.max(1,N-B)),X.push(O.substring(V-=Z,V+Z)),!((B+=Z+1)>N));)Z=L[k=(k+1)%L.length];return X.reverse().join(D)}}function s(L){return function(D){return D.replace(/[0-9]/g,function(O){return L[+O]})}}var v=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function d(L){if(!(D=v.exec(L)))throw new Error("invalid format: "+L);var D;return new p({fill:D[1],align:D[2],sign:D[3],symbol:D[4],zero:D[5],width:D[6],comma:D[7],precision:D[8]&&D[8].slice(1),trim:D[9],type:D[10]})}d.prototype=p.prototype;function p(L){this.fill=L.fill===void 0?" ":L.fill+"",this.align=L.align===void 0?">":L.align+"",this.sign=L.sign===void 0?"-":L.sign+"",this.symbol=L.symbol===void 0?"":L.symbol+"",this.zero=!!L.zero,this.width=L.width===void 0?void 0:+L.width,this.comma=!!L.comma,this.precision=L.precision===void 0?void 0:+L.precision,this.trim=!!L.trim,this.type=L.type===void 0?"":L.type+""}p.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function o(L){e:for(var D=L.length,O=1,N=-1,V;O<D;++O)switch(L[O]){case".":N=V=O;break;case"0":N===0&&(N=O),V=O;break;default:if(!+L[O])break e;N>0&&(N=0);break}return N>0?L.slice(0,N)+L.slice(V+1):L}var y;function _(L,D){var O=c(L,D);if(!O)return L+"";var N=O[0],V=O[1],X=V-(y=Math.max(-8,Math.min(8,Math.floor(V/3)))*3)+1,k=N.length;return X===k?N:X>k?N+new Array(X-k+1).join("0"):X>0?N.slice(0,X)+"."+N.slice(X):"0."+new Array(1-X).join("0")+c(L,Math.max(0,D+X-1))[0]}function E(L,D){var O=c(L,D);if(!O)return L+"";var N=O[0],V=O[1];return V<0?"0."+new Array(-V).join("0")+N:N.length>V+1?N.slice(0,V+1)+"."+N.slice(V+1):N+new Array(V-N.length+2).join("0")}var M={"%":function(L,D){return(L*100).toFixed(D)},b:function(L){return Math.round(L).toString(2)},c:function(L){return L+""},d:i,e:function(L,D){return L.toExponential(D)},f:function(L,D){return L.toFixed(D)},g:function(L,D){return L.toPrecision(D)},o:function(L){return Math.round(L).toString(8)},p:function(L,D){return E(L*100,D)},r:E,s:_,X:function(L){return Math.round(L).toString(16).toUpperCase()},x:function(L){return Math.round(L).toString(16)}};function b(L){return L}var w=Array.prototype.map,A=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function R(L){var D=L.grouping===void 0||L.thousands===void 0?b:l(w.call(L.grouping,Number),L.thousands+""),O=L.currency===void 0?"":L.currency[0]+"",N=L.currency===void 0?"":L.currency[1]+"",V=L.decimal===void 0?".":L.decimal+"",X=L.numerals===void 0?b:s(w.call(L.numerals,String)),k=L.percent===void 0?"%":L.percent+"",Z=L.minus===void 0?"-":L.minus+"",B=L.nan===void 0?"NaN":L.nan+"";function J(oe){oe=d(oe);var Y=oe.fill,G=oe.align,K=oe.sign,ee=oe.symbol,ie=oe.zero,re=oe.width,se=oe.comma,ge=oe.precision,xe=oe.trim,Se=oe.type;Se==="n"?(se=!0,Se="g"):M[Se]||(ge===void 0&&(ge=12),xe=!0,Se="g"),(ie||Y==="0"&&G==="=")&&(ie=!0,Y="0",G="=");var ce=ee==="$"?O:ee==="#"&&/[boxX]/.test(Se)?"0"+Se.toLowerCase():"",pe=ee==="$"?N:/[%p]/.test(Se)?k:"",ye=M[Se],U=/[defgprs%]/.test(Se);ge=ge===void 0?6:/[gprs]/.test(Se)?Math.max(1,Math.min(21,ge)):Math.max(0,Math.min(20,ge));function W(j){var F=ce,P=pe,q,z,te;if(Se==="c")P=ye(j)+P,j="";else{j=+j;var ue=j<0||1/j<0;if(j=isNaN(j)?B:ye(Math.abs(j),ge),xe&&(j=o(j)),ue&&+j==0&&K!=="+"&&(ue=!1),F=(ue?K==="("?K:Z:K==="-"||K==="("?"":K)+F,P=(Se==="s"?A[8+y/3]:"")+P+(ue&&K==="("?")":""),U){for(q=-1,z=j.length;++q<z;)if(te=j.charCodeAt(q),48>te||te>57){P=(te===46?V+j.slice(q+1):j.slice(q))+P,j=j.slice(0,q);break}}}se&&!ie&&(j=D(j,1/0));var ve=F.length+j.length+P.length,_e=ve<re?new Array(re-ve+1).join(Y):"";switch(se&&ie&&(j=D(_e+j,_e.length?re-P.length:1/0),_e=""),G){case"<":j=F+j+P+_e;break;case"=":j=F+_e+j+P;break;case"^":j=_e.slice(0,ve=_e.length>>1)+F+j+P+_e.slice(ve);break;default:j=_e+F+j+P;break}return X(j)}return W.toString=function(){return oe+""},W}function ne(oe,Y){var G=J((oe=d(oe),oe.type="f",oe)),K=Math.max(-8,Math.min(8,Math.floor(a(Y)/3)))*3,ee=Math.pow(10,-K),ie=A[8+K/3];return function(re){return G(ee*re)+ie}}return{format:J,formatPrefix:ne}}var T,C;m({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function m(L){return T=R(L),C=T.format,T.formatPrefix,T}},4336:function(f,u,r){r.d(u,{Yn:function(){return St},m_:function(){return y},E9:function(){return Et}});var i=r(8208),c=r(8931),a=r(6192),l=r(8936),s=r(2171),v=r(3528);function d(De){if(0<=De.y&&De.y<100){var Ie=new Date(-1,De.m,De.d,De.H,De.M,De.S,De.L);return Ie.setFullYear(De.y),Ie}return new Date(De.y,De.m,De.d,De.H,De.M,De.S,De.L)}function p(De){if(0<=De.y&&De.y<100){var Ie=new Date(Date.UTC(-1,De.m,De.d,De.H,De.M,De.S,De.L));return Ie.setUTCFullYear(De.y),Ie}return new Date(Date.UTC(De.y,De.m,De.d,De.H,De.M,De.S,De.L))}function o(De,Ie,Fe){return{y:De,m:Ie,d:Fe,H:0,M:0,S:0,L:0}}function y(De){var Ie=De.dateTime,Fe=De.date,We=De.time,de=De.periods,Me=De.days,he=De.shortDays,Ee=De.months,Pe=De.shortMonths,Ne=R(de),ht=T(de),nt=R(Me),Ye=T(Me),Be=R(he),ut=T(he),Dt=R(Ee),Nt=T(Ee),Wt=R(Pe),$t=T(Pe),Vt={a:fe,A:Q,b:Je,B:Ge,c:null,d:se,e:se,f:pe,H:ge,I:xe,j:Se,L:ce,m:ye,M:U,p:Qe,q:it,Q:ot,s:Ct,S:W,u:j,U:F,V:P,w:q,W:z,x:null,X:null,y:te,Y:ue,Z:ve,"%":Mt},Ft={a:rt,A:$e,b:je,B:ct,c:null,d:_e,e:_e,f:Ze,H:Re,I:Le,j:Ve,L:Xe,m:Te,M:we,p:dt,q:xt,Q:ot,s:Ct,S:be,u:ke,U:He,V:Ke,w:st,W:vt,x:null,X:null,y:pt,Y:ft,Z:lt,"%":Mt},qt={a:Ut,A:tr,b:Ht,B:lr,c:yr,d:B,e:B,f:K,H:ne,I:ne,j:J,L:G,m:Z,M:oe,p:jt,q:k,Q:ie,s:re,S:Y,u:m,U:L,V:D,w:C,W:O,x:xr,X:er,y:V,Y:N,Z:X,"%":ee};Vt.x=Gt(Fe,Vt),Vt.X=Gt(We,Vt),Vt.c=Gt(Ie,Vt),Ft.x=Gt(Fe,Ft),Ft.X=Gt(We,Ft),Ft.c=Gt(Ie,Ft);function Gt(yt,Lt){return function(wt){var At=[],Ot=-1,zt=0,Zt=yt.length,Kt,cr,or;for(wt instanceof Date||(wt=new Date(+wt));++Ot<Zt;)yt.charCodeAt(Ot)===37&&(At.push(yt.slice(zt,Ot)),(cr=_[Kt=yt.charAt(++Ot)])!=null?Kt=yt.charAt(++Ot):cr=Kt==="e"?" ":"0",(or=Lt[Kt])&&(Kt=or(wt,cr)),At.push(Kt),zt=Ot+1);return At.push(yt.slice(zt,Ot)),At.join("")}}function Xt(yt,Lt){return function(wt){var At=o(1900,void 0,1),Ot=sr(At,yt,wt+="",0),zt,Zt;if(Ot!=wt.length)return null;if("Q"in At)return new Date(At.Q);if("s"in At)return new Date(At.s*1e3+("L"in At?At.L:0));if(Lt&&!("Z"in At)&&(At.Z=0),"p"in At&&(At.H=At.H%12+At.p*12),At.m===void 0&&(At.m="q"in At?At.q:0),"V"in At){if(At.V<1||At.V>53)return null;"w"in At||(At.w=1),"Z"in At?(zt=p(o(At.y,0,1)),Zt=zt.getUTCDay(),zt=Zt>4||Zt===0?i.ot.ceil(zt):(0,i.ot)(zt),zt=c.c.offset(zt,(At.V-1)*7),At.y=zt.getUTCFullYear(),At.m=zt.getUTCMonth(),At.d=zt.getUTCDate()+(At.w+6)%7):(zt=d(o(At.y,0,1)),Zt=zt.getDay(),zt=Zt>4||Zt===0?a.qT.ceil(zt):(0,a.qT)(zt),zt=l.c.offset(zt,(At.V-1)*7),At.y=zt.getFullYear(),At.m=zt.getMonth(),At.d=zt.getDate()+(At.w+6)%7)}else("W"in At||"U"in At)&&("w"in At||(At.w="u"in At?At.u%7:"W"in At?1:0),Zt="Z"in At?p(o(At.y,0,1)).getUTCDay():d(o(At.y,0,1)).getDay(),At.m=0,At.d="W"in At?(At.w+6)%7+At.W*7-(Zt+5)%7:At.w+At.U*7-(Zt+6)%7);return"Z"in At?(At.H+=At.Z/100|0,At.M+=At.Z%100,p(At)):d(At)}}function sr(yt,Lt,wt,At){for(var Ot=0,zt=Lt.length,Zt=wt.length,Kt,cr;Ot<zt;){if(At>=Zt)return-1;if(Kt=Lt.charCodeAt(Ot++),Kt===37){if(Kt=Lt.charAt(Ot++),cr=qt[Kt in _?Lt.charAt(Ot++):Kt],!cr||(At=cr(yt,wt,At))<0)return-1}else if(Kt!=wt.charCodeAt(At++))return-1}return At}function jt(yt,Lt,wt){var At=Ne.exec(Lt.slice(wt));return At?(yt.p=ht[At[0].toLowerCase()],wt+At[0].length):-1}function Ut(yt,Lt,wt){var At=Be.exec(Lt.slice(wt));return At?(yt.w=ut[At[0].toLowerCase()],wt+At[0].length):-1}function tr(yt,Lt,wt){var At=nt.exec(Lt.slice(wt));return At?(yt.w=Ye[At[0].toLowerCase()],wt+At[0].length):-1}function Ht(yt,Lt,wt){var At=Wt.exec(Lt.slice(wt));return At?(yt.m=$t[At[0].toLowerCase()],wt+At[0].length):-1}function lr(yt,Lt,wt){var At=Dt.exec(Lt.slice(wt));return At?(yt.m=Nt[At[0].toLowerCase()],wt+At[0].length):-1}function yr(yt,Lt,wt){return sr(yt,Ie,Lt,wt)}function xr(yt,Lt,wt){return sr(yt,Fe,Lt,wt)}function er(yt,Lt,wt){return sr(yt,We,Lt,wt)}function fe(yt){return he[yt.getDay()]}function Q(yt){return Me[yt.getDay()]}function Je(yt){return Pe[yt.getMonth()]}function Ge(yt){return Ee[yt.getMonth()]}function Qe(yt){return de[+(yt.getHours()>=12)]}function it(yt){return 1+~~(yt.getMonth()/3)}function rt(yt){return he[yt.getUTCDay()]}function $e(yt){return Me[yt.getUTCDay()]}function je(yt){return Pe[yt.getUTCMonth()]}function ct(yt){return Ee[yt.getUTCMonth()]}function dt(yt){return de[+(yt.getUTCHours()>=12)]}function xt(yt){return 1+~~(yt.getUTCMonth()/3)}return{format:function(yt){var Lt=Gt(yt+="",Vt);return Lt.toString=function(){return yt},Lt},parse:function(yt){var Lt=Xt(yt+="",!1);return Lt.toString=function(){return yt},Lt},utcFormat:function(yt){var Lt=Gt(yt+="",Ft);return Lt.toString=function(){return yt},Lt},utcParse:function(yt){var Lt=Xt(yt+="",!0);return Lt.toString=function(){return yt},Lt}}}var _={"-":"",_:" ",0:"0"},E=/^\s*\d+/,M=/^%/,b=/[\\^$*+?|[\]().{}]/g;function w(De,Ie,Fe){var We=De<0?"-":"",de=(We?-De:De)+"",Me=de.length;return We+(Me<Fe?new Array(Fe-Me+1).join(Ie)+de:de)}function A(De){return De.replace(b,"\\$&")}function R(De){return new RegExp("^(?:"+De.map(A).join("|")+")","i")}function T(De){for(var Ie={},Fe=-1,We=De.length;++Fe<We;)Ie[De[Fe].toLowerCase()]=Fe;return Ie}function C(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+1));return We?(De.w=+We[0],Fe+We[0].length):-1}function m(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+1));return We?(De.u=+We[0],Fe+We[0].length):-1}function L(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+2));return We?(De.U=+We[0],Fe+We[0].length):-1}function D(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+2));return We?(De.V=+We[0],Fe+We[0].length):-1}function O(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+2));return We?(De.W=+We[0],Fe+We[0].length):-1}function N(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+4));return We?(De.y=+We[0],Fe+We[0].length):-1}function V(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+2));return We?(De.y=+We[0]+(+We[0]>68?1900:2e3),Fe+We[0].length):-1}function X(De,Ie,Fe){var We=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Ie.slice(Fe,Fe+6));return We?(De.Z=We[1]?0:-(We[2]+(We[3]||"00")),Fe+We[0].length):-1}function k(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+1));return We?(De.q=We[0]*3-3,Fe+We[0].length):-1}function Z(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+2));return We?(De.m=We[0]-1,Fe+We[0].length):-1}function B(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+2));return We?(De.d=+We[0],Fe+We[0].length):-1}function J(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+3));return We?(De.m=0,De.d=+We[0],Fe+We[0].length):-1}function ne(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+2));return We?(De.H=+We[0],Fe+We[0].length):-1}function oe(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+2));return We?(De.M=+We[0],Fe+We[0].length):-1}function Y(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+2));return We?(De.S=+We[0],Fe+We[0].length):-1}function G(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+3));return We?(De.L=+We[0],Fe+We[0].length):-1}function K(De,Ie,Fe){var We=E.exec(Ie.slice(Fe,Fe+6));return We?(De.L=Math.floor(We[0]/1e3),Fe+We[0].length):-1}function ee(De,Ie,Fe){var We=M.exec(Ie.slice(Fe,Fe+1));return We?Fe+We[0].length:-1}function ie(De,Ie,Fe){var We=E.exec(Ie.slice(Fe));return We?(De.Q=+We[0],Fe+We[0].length):-1}function re(De,Ie,Fe){var We=E.exec(Ie.slice(Fe));return We?(De.s=+We[0],Fe+We[0].length):-1}function se(De,Ie){return w(De.getDate(),Ie,2)}function ge(De,Ie){return w(De.getHours(),Ie,2)}function xe(De,Ie){return w(De.getHours()%12||12,Ie,2)}function Se(De,Ie){return w(1+l.c.count((0,s.c)(De),De),Ie,3)}function ce(De,Ie){return w(De.getMilliseconds(),Ie,3)}function pe(De,Ie){return ce(De,Ie)+"000"}function ye(De,Ie){return w(De.getMonth()+1,Ie,2)}function U(De,Ie){return w(De.getMinutes(),Ie,2)}function W(De,Ie){return w(De.getSeconds(),Ie,2)}function j(De){var Ie=De.getDay();return Ie===0?7:Ie}function F(De,Ie){return w(a.uU.count((0,s.c)(De)-1,De),Ie,2)}function P(De,Ie){var Fe=De.getDay();return De=Fe>=4||Fe===0?(0,a.kD)(De):a.kD.ceil(De),w(a.kD.count((0,s.c)(De),De)+((0,s.c)(De).getDay()===4),Ie,2)}function q(De){return De.getDay()}function z(De,Ie){return w(a.qT.count((0,s.c)(De)-1,De),Ie,2)}function te(De,Ie){return w(De.getFullYear()%100,Ie,2)}function ue(De,Ie){return w(De.getFullYear()%1e4,Ie,4)}function ve(De){var Ie=De.getTimezoneOffset();return(Ie>0?"-":(Ie*=-1,"+"))+w(Ie/60|0,"0",2)+w(Ie%60,"0",2)}function _e(De,Ie){return w(De.getUTCDate(),Ie,2)}function Re(De,Ie){return w(De.getUTCHours(),Ie,2)}function Le(De,Ie){return w(De.getUTCHours()%12||12,Ie,2)}function Ve(De,Ie){return w(1+c.c.count((0,v.c)(De),De),Ie,3)}function Xe(De,Ie){return w(De.getUTCMilliseconds(),Ie,3)}function Ze(De,Ie){return Xe(De,Ie)+"000"}function Te(De,Ie){return w(De.getUTCMonth()+1,Ie,2)}function we(De,Ie){return w(De.getUTCMinutes(),Ie,2)}function be(De,Ie){return w(De.getUTCSeconds(),Ie,2)}function ke(De){var Ie=De.getUTCDay();return Ie===0?7:Ie}function He(De,Ie){return w(i.EV.count((0,v.c)(De)-1,De),Ie,2)}function Ke(De,Ie){var Fe=De.getUTCDay();return De=Fe>=4||Fe===0?(0,i.yA)(De):i.yA.ceil(De),w(i.yA.count((0,v.c)(De),De)+((0,v.c)(De).getUTCDay()===4),Ie,2)}function st(De){return De.getUTCDay()}function vt(De,Ie){return w(i.ot.count((0,v.c)(De)-1,De),Ie,2)}function pt(De,Ie){return w(De.getUTCFullYear()%100,Ie,2)}function ft(De,Ie){return w(De.getUTCFullYear()%1e4,Ie,4)}function lt(){return"+0000"}function Mt(){return"%"}function ot(De){return+De}function Ct(De){return Math.floor(+De/1e3)}var kt,St,Et;Ue({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ue(De){return kt=y(De),St=kt.format,kt.parse,Et=kt.utcFormat,kt.utcParse,kt}},8936:function(f,u,r){r.d(u,{m:function(){return l}});var i=r(1628),c=r(9792),a=(0,i.c)(function(s){s.setHours(0,0,0,0)},function(s,v){s.setDate(s.getDate()+v)},function(s,v){return(v-s-(v.getTimezoneOffset()-s.getTimezoneOffset())*c.iy)/c.SK},function(s){return s.getDate()-1});u.c=a;var l=a.range},9792:function(f,u,r){r.d(u,{KK:function(){return s},SK:function(){return l},cg:function(){return a},iy:function(){return c},yc:function(){return i}});var i=1e3,c=6e4,a=36e5,l=864e5,s=6048e5},3220:function(f,u,r){r.r(u),r.d(u,{timeDay:function(){return w.c},timeDays:function(){return w.m},timeFriday:function(){return A.iB},timeFridays:function(){return A.sJ},timeHour:function(){return M},timeHours:function(){return b},timeInterval:function(){return i.c},timeMillisecond:function(){return a},timeMilliseconds:function(){return l},timeMinute:function(){return y},timeMinutes:function(){return _},timeMonday:function(){return A.qT},timeMondays:function(){return A.QP},timeMonth:function(){return T},timeMonths:function(){return C},timeSaturday:function(){return A.Wc},timeSaturdays:function(){return A.aI},timeSecond:function(){return d},timeSeconds:function(){return p},timeSunday:function(){return A.uU},timeSundays:function(){return A.Ab},timeThursday:function(){return A.kD},timeThursdays:function(){return A.eC},timeTuesday:function(){return A.Mf},timeTuesdays:function(){return A.Oc},timeWednesday:function(){return A.eg},timeWednesdays:function(){return A.sn},timeWeek:function(){return A.uU},timeWeeks:function(){return A.Ab},timeYear:function(){return m.c},timeYears:function(){return m.Q},utcDay:function(){return k.c},utcDays:function(){return k.o},utcFriday:function(){return Z.od},utcFridays:function(){return Z.iG},utcHour:function(){return V},utcHours:function(){return X},utcMillisecond:function(){return a},utcMilliseconds:function(){return l},utcMinute:function(){return D},utcMinutes:function(){return O},utcMonday:function(){return Z.ot},utcMondays:function(){return Z.iO},utcMonth:function(){return J},utcMonths:function(){return ne},utcSaturday:function(){return Z.Ad},utcSaturdays:function(){return Z.K8},utcSecond:function(){return d},utcSeconds:function(){return p},utcSunday:function(){return Z.EV},utcSundays:function(){return Z.Wq},utcThursday:function(){return Z.yA},utcThursdays:function(){return Z.ob},utcTuesday:function(){return Z.sG},utcTuesdays:function(){return Z.kl},utcWednesday:function(){return Z._6},utcWednesdays:function(){return Z.W_},utcWeek:function(){return Z.EV},utcWeeks:function(){return Z.Wq},utcYear:function(){return oe.c},utcYears:function(){return oe.i}});var i=r(1628),c=(0,i.c)(function(){},function(Y,G){Y.setTime(+Y+G)},function(Y,G){return G-Y});c.every=function(Y){return Y=Math.floor(Y),!isFinite(Y)||!(Y>0)?null:Y>1?(0,i.c)(function(G){G.setTime(Math.floor(G/Y)*Y)},function(G,K){G.setTime(+G+K*Y)},function(G,K){return(K-G)/Y}):c};var a=c,l=c.range,s=r(9792),v=(0,i.c)(function(Y){Y.setTime(Y-Y.getMilliseconds())},function(Y,G){Y.setTime(+Y+G*s.yc)},function(Y,G){return(G-Y)/s.yc},function(Y){return Y.getUTCSeconds()}),d=v,p=v.range,o=(0,i.c)(function(Y){Y.setTime(Y-Y.getMilliseconds()-Y.getSeconds()*s.yc)},function(Y,G){Y.setTime(+Y+G*s.iy)},function(Y,G){return(G-Y)/s.iy},function(Y){return Y.getMinutes()}),y=o,_=o.range,E=(0,i.c)(function(Y){Y.setTime(Y-Y.getMilliseconds()-Y.getSeconds()*s.yc-Y.getMinutes()*s.iy)},function(Y,G){Y.setTime(+Y+G*s.cg)},function(Y,G){return(G-Y)/s.cg},function(Y){return Y.getHours()}),M=E,b=E.range,w=r(8936),A=r(6192),R=(0,i.c)(function(Y){Y.setDate(1),Y.setHours(0,0,0,0)},function(Y,G){Y.setMonth(Y.getMonth()+G)},function(Y,G){return G.getMonth()-Y.getMonth()+(G.getFullYear()-Y.getFullYear())*12},function(Y){return Y.getMonth()}),T=R,C=R.range,m=r(2171),L=(0,i.c)(function(Y){Y.setUTCSeconds(0,0)},function(Y,G){Y.setTime(+Y+G*s.iy)},function(Y,G){return(G-Y)/s.iy},function(Y){return Y.getUTCMinutes()}),D=L,O=L.range,N=(0,i.c)(function(Y){Y.setUTCMinutes(0,0,0)},function(Y,G){Y.setTime(+Y+G*s.cg)},function(Y,G){return(G-Y)/s.cg},function(Y){return Y.getUTCHours()}),V=N,X=N.range,k=r(8931),Z=r(8208),B=(0,i.c)(function(Y){Y.setUTCDate(1),Y.setUTCHours(0,0,0,0)},function(Y,G){Y.setUTCMonth(Y.getUTCMonth()+G)},function(Y,G){return G.getUTCMonth()-Y.getUTCMonth()+(G.getUTCFullYear()-Y.getUTCFullYear())*12},function(Y){return Y.getUTCMonth()}),J=B,ne=B.range,oe=r(3528)},1628:function(f,u,r){r.d(u,{c:function(){return a}});var i=new Date,c=new Date;function a(l,s,v,d){function p(o){return l(o=arguments.length===0?new Date:new Date(+o)),o}return p.floor=function(o){return l(o=new Date(+o)),o},p.ceil=function(o){return l(o=new Date(o-1)),s(o,1),l(o),o},p.round=function(o){var y=p(o),_=p.ceil(o);return o-y<_-o?y:_},p.offset=function(o,y){return s(o=new Date(+o),y==null?1:Math.floor(y)),o},p.range=function(o,y,_){var E=[],M;if(o=p.ceil(o),_=_==null?1:Math.floor(_),!(o<y)||!(_>0))return E;do E.push(M=new Date(+o)),s(o,_),l(o);while(M<o&&o<y);return E},p.filter=function(o){return a(function(y){if(y>=y)for(;l(y),!o(y);)y.setTime(y-1)},function(y,_){if(y>=y)if(_<0)for(;++_<=0;)for(;s(y,-1),!o(y););else for(;--_>=0;)for(;s(y,1),!o(y););})},v&&(p.count=function(o,y){return i.setTime(+o),c.setTime(+y),l(i),l(c),Math.floor(v(i,c))},p.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?p.filter(d?function(y){return d(y)%o===0}:function(y){return p.count(0,y)%o===0}):p}),p}},8931:function(f,u,r){r.d(u,{o:function(){return l}});var i=r(1628),c=r(9792),a=(0,i.c)(function(s){s.setUTCHours(0,0,0,0)},function(s,v){s.setUTCDate(s.getUTCDate()+v)},function(s,v){return(v-s)/c.SK},function(s){return s.getUTCDate()-1});u.c=a;var l=a.range},8208:function(f,u,r){r.d(u,{Ad:function(){return y},EV:function(){return l},K8:function(){return R},W_:function(){return b},Wq:function(){return _},_6:function(){return d},iG:function(){return A},iO:function(){return E},kl:function(){return M},ob:function(){return w},od:function(){return o},ot:function(){return s},sG:function(){return v},yA:function(){return p}});var i=r(1628),c=r(9792);function a(T){return(0,i.c)(function(C){C.setUTCDate(C.getUTCDate()-(C.getUTCDay()+7-T)%7),C.setUTCHours(0,0,0,0)},function(C,m){C.setUTCDate(C.getUTCDate()+m*7)},function(C,m){return(m-C)/c.KK})}var l=a(0),s=a(1),v=a(2),d=a(3),p=a(4),o=a(5),y=a(6),_=l.range,E=s.range,M=v.range,b=d.range,w=p.range,A=o.range,R=y.range},3528:function(f,u,r){r.d(u,{i:function(){return a}});var i=r(1628),c=(0,i.c)(function(l){l.setUTCMonth(0,1),l.setUTCHours(0,0,0,0)},function(l,s){l.setUTCFullYear(l.getUTCFullYear()+s)},function(l,s){return s.getUTCFullYear()-l.getUTCFullYear()},function(l){return l.getUTCFullYear()});c.every=function(l){return!isFinite(l=Math.floor(l))||!(l>0)?null:(0,i.c)(function(s){s.setUTCFullYear(Math.floor(s.getUTCFullYear()/l)*l),s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},function(s,v){s.setUTCFullYear(s.getUTCFullYear()+v*l)})},u.c=c;var a=c.range},6192:function(f,u,r){r.d(u,{Ab:function(){return _},Mf:function(){return v},Oc:function(){return M},QP:function(){return E},Wc:function(){return y},aI:function(){return R},eC:function(){return w},eg:function(){return d},iB:function(){return o},kD:function(){return p},qT:function(){return s},sJ:function(){return A},sn:function(){return b},uU:function(){return l}});var i=r(1628),c=r(9792);function a(T){return(0,i.c)(function(C){C.setDate(C.getDate()-(C.getDay()+7-T)%7),C.setHours(0,0,0,0)},function(C,m){C.setDate(C.getDate()+m*7)},function(C,m){return(m-C-(m.getTimezoneOffset()-C.getTimezoneOffset())*c.iy)/c.KK})}var l=a(0),s=a(1),v=a(2),d=a(3),p=a(4),o=a(5),y=a(6),_=l.range,E=s.range,M=v.range,b=d.range,w=p.range,A=o.range,R=y.range},2171:function(f,u,r){r.d(u,{Q:function(){return a}});var i=r(1628),c=(0,i.c)(function(l){l.setMonth(0,1),l.setHours(0,0,0,0)},function(l,s){l.setFullYear(l.getFullYear()+s)},function(l,s){return s.getFullYear()-l.getFullYear()},function(l){return l.getFullYear()});c.every=function(l){return!isFinite(l=Math.floor(l))||!(l>0)?null:(0,i.c)(function(s){s.setFullYear(Math.floor(s.getFullYear()/l)*l),s.setMonth(0,1),s.setHours(0,0,0,0)},function(s,v){s.setFullYear(s.getFullYear()+v*l)})},u.c=c;var a=c.range},1252:function(f){var u=typeof Reflect=="object"?Reflect:null,r=u&&typeof u.apply=="function"?u.apply:function(m,L,D){return Function.prototype.apply.call(m,L,D)},i;u&&typeof u.ownKeys=="function"?i=u.ownKeys:Object.getOwnPropertySymbols?i=function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:i=function(m){return Object.getOwnPropertyNames(m)};function c(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(m){return m!==m};function l(){l.init.call(this)}f.exports=l,f.exports.once=A,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var s=10;function v(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");s=C}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||a(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this};function d(C){return C._maxListeners===void 0?l.defaultMaxListeners:C._maxListeners}l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(m){for(var L=[],D=1;D<arguments.length;D++)L.push(arguments[D]);var O=m==="error",N=this._events;if(N!==void 0)O=O&&N.error===void 0;else if(!O)return!1;if(O){var V;if(L.length>0&&(V=L[0]),V instanceof Error)throw V;var X=new Error("Unhandled error."+(V?" ("+V.message+")":""));throw X.context=V,X}var k=N[m];if(k===void 0)return!1;if(typeof k=="function")r(k,this,L);else for(var Z=k.length,B=M(k,Z),D=0;D<Z;++D)r(B[D],this,L);return!0};function p(C,m,L,D){var O,N,V;if(v(L),N=C._events,N===void 0?(N=C._events=Object.create(null),C._eventsCount=0):(N.newListener!==void 0&&(C.emit("newListener",m,L.listener?L.listener:L),N=C._events),V=N[m]),V===void 0)V=N[m]=L,++C._eventsCount;else if(typeof V=="function"?V=N[m]=D?[L,V]:[V,L]:D?V.unshift(L):V.push(L),O=d(C),O>0&&V.length>O&&!V.warned){V.warned=!0;var X=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");X.name="MaxListenersExceededWarning",X.emitter=C,X.type=m,X.count=V.length,c(X)}return C}l.prototype.addListener=function(m,L){return p(this,m,L,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(m,L){return p(this,m,L,!0)};function o(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(C,m,L){var D={fired:!1,wrapFn:void 0,target:C,type:m,listener:L},O=o.bind(D);return O.listener=L,D.wrapFn=O,O}l.prototype.once=function(m,L){return v(L),this.on(m,y(this,m,L)),this},l.prototype.prependOnceListener=function(m,L){return v(L),this.prependListener(m,y(this,m,L)),this},l.prototype.removeListener=function(m,L){var D,O,N,V,X;if(v(L),O=this._events,O===void 0)return this;if(D=O[m],D===void 0)return this;if(D===L||D.listener===L)--this._eventsCount===0?this._events=Object.create(null):(delete O[m],O.removeListener&&this.emit("removeListener",m,D.listener||L));else if(typeof D!="function"){for(N=-1,V=D.length-1;V>=0;V--)if(D[V]===L||D[V].listener===L){X=D[V].listener,N=V;break}if(N<0)return this;N===0?D.shift():b(D,N),D.length===1&&(O[m]=D[0]),O.removeListener!==void 0&&this.emit("removeListener",m,X||L)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(m){var L,D,O;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[m]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete D[m]),this;if(arguments.length===0){var N=Object.keys(D),V;for(O=0;O<N.length;++O)V=N[O],V!=="removeListener"&&this.removeAllListeners(V);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(L=D[m],typeof L=="function")this.removeListener(m,L);else if(L!==void 0)for(O=L.length-1;O>=0;O--)this.removeListener(m,L[O]);return this};function _(C,m,L){var D=C._events;if(D===void 0)return[];var O=D[m];return O===void 0?[]:typeof O=="function"?L?[O.listener||O]:[O]:L?w(O):M(O,O.length)}l.prototype.listeners=function(m){return _(this,m,!0)},l.prototype.rawListeners=function(m){return _(this,m,!1)},l.listenerCount=function(C,m){return typeof C.listenerCount=="function"?C.listenerCount(m):E.call(C,m)},l.prototype.listenerCount=E;function E(C){var m=this._events;if(m!==void 0){var L=m[C];if(typeof L=="function")return 1;if(L!==void 0)return L.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function M(C,m){for(var L=new Array(m),D=0;D<m;++D)L[D]=C[D];return L}function b(C,m){for(;m+1<C.length;m++)C[m]=C[m+1];C.pop()}function w(C){for(var m=new Array(C.length),L=0;L<m.length;++L)m[L]=C[L].listener||C[L];return m}function A(C,m){return new Promise(function(L,D){function O(V){C.removeListener(m,N),D(V)}function N(){typeof C.removeListener=="function"&&C.removeListener("error",O),L([].slice.call(arguments))}T(C,m,N,{once:!0}),m!=="error"&&R(C,O,{once:!0})})}function R(C,m,L){typeof C.on=="function"&&T(C,"error",m,L)}function T(C,m,L,D){if(typeof C.on=="function")D.once?C.once(m,L):C.on(m,L);else if(typeof C.addEventListener=="function")C.addEventListener(m,function O(N){D.once&&C.removeEventListener(m,O),L(N)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}},8248:function(f,u,r){var i=r(4576);f.exports=function(c){var a=typeof c;if(a==="string"){var l=c;if(c=+c,c===0&&i(l))return!1}else if(a!=="number")return!1;return c-c<1}},2408:function(f){f.exports=u;function u(r,i){var c=i[0],a=i[1],l=i[2],s=i[3],v=i[4],d=i[5],p=i[6],o=i[7],y=i[8],_=i[9],E=i[10],M=i[11],b=i[12],w=i[13],A=i[14],R=i[15];return r[0]=d*(E*R-M*A)-_*(p*R-o*A)+w*(p*M-o*E),r[1]=-(a*(E*R-M*A)-_*(l*R-s*A)+w*(l*M-s*E)),r[2]=a*(p*R-o*A)-d*(l*R-s*A)+w*(l*o-s*p),r[3]=-(a*(p*M-o*E)-d*(l*M-s*E)+_*(l*o-s*p)),r[4]=-(v*(E*R-M*A)-y*(p*R-o*A)+b*(p*M-o*E)),r[5]=c*(E*R-M*A)-y*(l*R-s*A)+b*(l*M-s*E),r[6]=-(c*(p*R-o*A)-v*(l*R-s*A)+b*(l*o-s*p)),r[7]=c*(p*M-o*E)-v*(l*M-s*E)+y*(l*o-s*p),r[8]=v*(_*R-M*w)-y*(d*R-o*w)+b*(d*M-o*_),r[9]=-(c*(_*R-M*w)-y*(a*R-s*w)+b*(a*M-s*_)),r[10]=c*(d*R-o*w)-v*(a*R-s*w)+b*(a*o-s*d),r[11]=-(c*(d*M-o*_)-v*(a*M-s*_)+y*(a*o-s*d)),r[12]=-(v*(_*A-E*w)-y*(d*A-p*w)+b*(d*E-p*_)),r[13]=c*(_*A-E*w)-y*(a*A-l*w)+b*(a*E-l*_),r[14]=-(c*(d*A-p*w)-v*(a*A-l*w)+b*(a*p-l*d)),r[15]=c*(d*E-p*_)-v*(a*E-l*_)+y*(a*p-l*d),r}},6860:function(f){f.exports=u;function u(r){var i=new Float32Array(16);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i}},4492:function(f){f.exports=u;function u(r,i){return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r}},4212:function(f){f.exports=u;function u(){var r=new Float32Array(16);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},800:function(f){f.exports=u;function u(r){var i=r[0],c=r[1],a=r[2],l=r[3],s=r[4],v=r[5],d=r[6],p=r[7],o=r[8],y=r[9],_=r[10],E=r[11],M=r[12],b=r[13],w=r[14],A=r[15],R=i*v-c*s,T=i*d-a*s,C=i*p-l*s,m=c*d-a*v,L=c*p-l*v,D=a*p-l*d,O=o*b-y*M,N=o*w-_*M,V=o*A-E*M,X=y*w-_*b,k=y*A-E*b,Z=_*A-E*w;return R*Z-T*k+C*X+m*V-L*N+D*O}},1784:function(f){f.exports=u;function u(r,i){var c=i[0],a=i[1],l=i[2],s=i[3],v=c+c,d=a+a,p=l+l,o=c*v,y=a*v,_=a*d,E=l*v,M=l*d,b=l*p,w=s*v,A=s*d,R=s*p;return r[0]=1-_-b,r[1]=y+R,r[2]=E-A,r[3]=0,r[4]=y-R,r[5]=1-o-b,r[6]=M+w,r[7]=0,r[8]=E+A,r[9]=M-w,r[10]=1-o-_,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},1616:function(f){f.exports=u;function u(r,i,c){var a,l,s,v=c[0],d=c[1],p=c[2],o=Math.sqrt(v*v+d*d+p*p);return Math.abs(o)<1e-6?null:(o=1/o,v*=o,d*=o,p*=o,a=Math.sin(i),l=Math.cos(i),s=1-l,r[0]=v*v*s+l,r[1]=d*v*s+p*a,r[2]=p*v*s-d*a,r[3]=0,r[4]=v*d*s-p*a,r[5]=d*d*s+l,r[6]=p*d*s+v*a,r[7]=0,r[8]=v*p*s+d*a,r[9]=d*p*s-v*a,r[10]=p*p*s+l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}},1944:function(f){f.exports=u;function u(r,i,c){var a=i[0],l=i[1],s=i[2],v=i[3],d=a+a,p=l+l,o=s+s,y=a*d,_=a*p,E=a*o,M=l*p,b=l*o,w=s*o,A=v*d,R=v*p,T=v*o;return r[0]=1-(M+w),r[1]=_+T,r[2]=E-R,r[3]=0,r[4]=_-T,r[5]=1-(y+w),r[6]=b+A,r[7]=0,r[8]=E+R,r[9]=b-A,r[10]=1-(y+M),r[11]=0,r[12]=c[0],r[13]=c[1],r[14]=c[2],r[15]=1,r}},9444:function(f){f.exports=u;function u(r,i){return r[0]=i[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=i[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=i[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},8268:function(f){f.exports=u;function u(r,i){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=i[0],r[13]=i[1],r[14]=i[2],r[15]=1,r}},1856:function(f){f.exports=u;function u(r,i){var c=Math.sin(i),a=Math.cos(i);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=c,r[7]=0,r[8]=0,r[9]=-c,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},9216:function(f){f.exports=u;function u(r,i){var c=Math.sin(i),a=Math.cos(i);return r[0]=a,r[1]=0,r[2]=-c,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=c,r[9]=0,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},7736:function(f){f.exports=u;function u(r,i){var c=Math.sin(i),a=Math.cos(i);return r[0]=a,r[1]=c,r[2]=0,r[3]=0,r[4]=-c,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},8848:function(f){f.exports=u;function u(r,i,c,a,l,s,v){var d=1/(c-i),p=1/(l-a),o=1/(s-v);return r[0]=s*2*d,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s*2*p,r[6]=0,r[7]=0,r[8]=(c+i)*d,r[9]=(l+a)*p,r[10]=(v+s)*o,r[11]=-1,r[12]=0,r[13]=0,r[14]=v*s*2*o,r[15]=0,r}},6635:function(f){f.exports=u;function u(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},6524:function(f,u,r){f.exports={create:r(4212),clone:r(6860),copy:r(4492),identity:r(6635),transpose:r(6520),invert:r(4308),adjoint:r(2408),determinant:r(800),multiply:r(944),translate:r(5176),scale:r(8152),rotate:r(16),rotateX:r(5456),rotateY:r(4840),rotateZ:r(4192),fromRotation:r(1616),fromRotationTranslation:r(1944),fromScaling:r(9444),fromTranslation:r(8268),fromXRotation:r(1856),fromYRotation:r(9216),fromZRotation:r(7736),fromQuat:r(1784),frustum:r(8848),perspective:r(1296),perspectiveFromFieldOfView:r(3688),ortho:r(7688),lookAt:r(6508),str:r(9412)}},4308:function(f){f.exports=u;function u(r,i){var c=i[0],a=i[1],l=i[2],s=i[3],v=i[4],d=i[5],p=i[6],o=i[7],y=i[8],_=i[9],E=i[10],M=i[11],b=i[12],w=i[13],A=i[14],R=i[15],T=c*d-a*v,C=c*p-l*v,m=c*o-s*v,L=a*p-l*d,D=a*o-s*d,O=l*o-s*p,N=y*w-_*b,V=y*A-E*b,X=y*R-M*b,k=_*A-E*w,Z=_*R-M*w,B=E*R-M*A,J=T*B-C*Z+m*k+L*X-D*V+O*N;return J?(J=1/J,r[0]=(d*B-p*Z+o*k)*J,r[1]=(l*Z-a*B-s*k)*J,r[2]=(w*O-A*D+R*L)*J,r[3]=(E*D-_*O-M*L)*J,r[4]=(p*X-v*B-o*V)*J,r[5]=(c*B-l*X+s*V)*J,r[6]=(A*m-b*O-R*C)*J,r[7]=(y*O-E*m+M*C)*J,r[8]=(v*Z-d*X+o*N)*J,r[9]=(a*X-c*Z-s*N)*J,r[10]=(b*D-w*m+R*T)*J,r[11]=(_*m-y*D-M*T)*J,r[12]=(d*V-v*k-p*N)*J,r[13]=(c*k-a*V+l*N)*J,r[14]=(w*C-b*L-A*T)*J,r[15]=(y*L-_*C+E*T)*J,r):null}},6508:function(f,u,r){var i=r(6635);f.exports=c;function c(a,l,s,v){var d,p,o,y,_,E,M,b,w,A,R=l[0],T=l[1],C=l[2],m=v[0],L=v[1],D=v[2],O=s[0],N=s[1],V=s[2];return Math.abs(R-O)<1e-6&&Math.abs(T-N)<1e-6&&Math.abs(C-V)<1e-6?i(a):(M=R-O,b=T-N,w=C-V,A=1/Math.sqrt(M*M+b*b+w*w),M*=A,b*=A,w*=A,d=L*w-D*b,p=D*M-m*w,o=m*b-L*M,A=Math.sqrt(d*d+p*p+o*o),A?(A=1/A,d*=A,p*=A,o*=A):(d=0,p=0,o=0),y=b*o-w*p,_=w*d-M*o,E=M*p-b*d,A=Math.sqrt(y*y+_*_+E*E),A?(A=1/A,y*=A,_*=A,E*=A):(y=0,_=0,E=0),a[0]=d,a[1]=y,a[2]=M,a[3]=0,a[4]=p,a[5]=_,a[6]=b,a[7]=0,a[8]=o,a[9]=E,a[10]=w,a[11]=0,a[12]=-(d*R+p*T+o*C),a[13]=-(y*R+_*T+E*C),a[14]=-(M*R+b*T+w*C),a[15]=1,a)}},944:function(f){f.exports=u;function u(r,i,c){var a=i[0],l=i[1],s=i[2],v=i[3],d=i[4],p=i[5],o=i[6],y=i[7],_=i[8],E=i[9],M=i[10],b=i[11],w=i[12],A=i[13],R=i[14],T=i[15],C=c[0],m=c[1],L=c[2],D=c[3];return r[0]=C*a+m*d+L*_+D*w,r[1]=C*l+m*p+L*E+D*A,r[2]=C*s+m*o+L*M+D*R,r[3]=C*v+m*y+L*b+D*T,C=c[4],m=c[5],L=c[6],D=c[7],r[4]=C*a+m*d+L*_+D*w,r[5]=C*l+m*p+L*E+D*A,r[6]=C*s+m*o+L*M+D*R,r[7]=C*v+m*y+L*b+D*T,C=c[8],m=c[9],L=c[10],D=c[11],r[8]=C*a+m*d+L*_+D*w,r[9]=C*l+m*p+L*E+D*A,r[10]=C*s+m*o+L*M+D*R,r[11]=C*v+m*y+L*b+D*T,C=c[12],m=c[13],L=c[14],D=c[15],r[12]=C*a+m*d+L*_+D*w,r[13]=C*l+m*p+L*E+D*A,r[14]=C*s+m*o+L*M+D*R,r[15]=C*v+m*y+L*b+D*T,r}},7688:function(f){f.exports=u;function u(r,i,c,a,l,s,v){var d=1/(i-c),p=1/(a-l),o=1/(s-v);return r[0]=-2*d,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*p,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*o,r[11]=0,r[12]=(i+c)*d,r[13]=(l+a)*p,r[14]=(v+s)*o,r[15]=1,r}},1296:function(f){f.exports=u;function u(r,i,c,a,l){var s=1/Math.tan(i/2),v=1/(a-l);return r[0]=s/c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(l+a)*v,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*l*a*v,r[15]=0,r}},3688:function(f){f.exports=u;function u(r,i,c,a){var l=Math.tan(i.upDegrees*Math.PI/180),s=Math.tan(i.downDegrees*Math.PI/180),v=Math.tan(i.leftDegrees*Math.PI/180),d=Math.tan(i.rightDegrees*Math.PI/180),p=2/(v+d),o=2/(l+s);return r[0]=p,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=o,r[6]=0,r[7]=0,r[8]=-((v-d)*p*.5),r[9]=(l-s)*o*.5,r[10]=a/(c-a),r[11]=-1,r[12]=0,r[13]=0,r[14]=a*c/(c-a),r[15]=0,r}},16:function(f){f.exports=u;function u(r,i,c,a){var l=a[0],s=a[1],v=a[2],d=Math.sqrt(l*l+s*s+v*v),p,o,y,_,E,M,b,w,A,R,T,C,m,L,D,O,N,V,X,k,Z,B,J,ne;return Math.abs(d)<1e-6?null:(d=1/d,l*=d,s*=d,v*=d,p=Math.sin(c),o=Math.cos(c),y=1-o,_=i[0],E=i[1],M=i[2],b=i[3],w=i[4],A=i[5],R=i[6],T=i[7],C=i[8],m=i[9],L=i[10],D=i[11],O=l*l*y+o,N=s*l*y+v*p,V=v*l*y-s*p,X=l*s*y-v*p,k=s*s*y+o,Z=v*s*y+l*p,B=l*v*y+s*p,J=s*v*y-l*p,ne=v*v*y+o,r[0]=_*O+w*N+C*V,r[1]=E*O+A*N+m*V,r[2]=M*O+R*N+L*V,r[3]=b*O+T*N+D*V,r[4]=_*X+w*k+C*Z,r[5]=E*X+A*k+m*Z,r[6]=M*X+R*k+L*Z,r[7]=b*X+T*k+D*Z,r[8]=_*B+w*J+C*ne,r[9]=E*B+A*J+m*ne,r[10]=M*B+R*J+L*ne,r[11]=b*B+T*J+D*ne,i!==r&&(r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r)}},5456:function(f){f.exports=u;function u(r,i,c){var a=Math.sin(c),l=Math.cos(c),s=i[4],v=i[5],d=i[6],p=i[7],o=i[8],y=i[9],_=i[10],E=i[11];return i!==r&&(r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[4]=s*l+o*a,r[5]=v*l+y*a,r[6]=d*l+_*a,r[7]=p*l+E*a,r[8]=o*l-s*a,r[9]=y*l-v*a,r[10]=_*l-d*a,r[11]=E*l-p*a,r}},4840:function(f){f.exports=u;function u(r,i,c){var a=Math.sin(c),l=Math.cos(c),s=i[0],v=i[1],d=i[2],p=i[3],o=i[8],y=i[9],_=i[10],E=i[11];return i!==r&&(r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[0]=s*l-o*a,r[1]=v*l-y*a,r[2]=d*l-_*a,r[3]=p*l-E*a,r[8]=s*a+o*l,r[9]=v*a+y*l,r[10]=d*a+_*l,r[11]=p*a+E*l,r}},4192:function(f){f.exports=u;function u(r,i,c){var a=Math.sin(c),l=Math.cos(c),s=i[0],v=i[1],d=i[2],p=i[3],o=i[4],y=i[5],_=i[6],E=i[7];return i!==r&&(r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[0]=s*l+o*a,r[1]=v*l+y*a,r[2]=d*l+_*a,r[3]=p*l+E*a,r[4]=o*l-s*a,r[5]=y*l-v*a,r[6]=_*l-d*a,r[7]=E*l-p*a,r}},8152:function(f){f.exports=u;function u(r,i,c){var a=c[0],l=c[1],s=c[2];return r[0]=i[0]*a,r[1]=i[1]*a,r[2]=i[2]*a,r[3]=i[3]*a,r[4]=i[4]*l,r[5]=i[5]*l,r[6]=i[6]*l,r[7]=i[7]*l,r[8]=i[8]*s,r[9]=i[9]*s,r[10]=i[10]*s,r[11]=i[11]*s,r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r}},9412:function(f){f.exports=u;function u(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}},5176:function(f){f.exports=u;function u(r,i,c){var a=c[0],l=c[1],s=c[2],v,d,p,o,y,_,E,M,b,w,A,R;return i===r?(r[12]=i[0]*a+i[4]*l+i[8]*s+i[12],r[13]=i[1]*a+i[5]*l+i[9]*s+i[13],r[14]=i[2]*a+i[6]*l+i[10]*s+i[14],r[15]=i[3]*a+i[7]*l+i[11]*s+i[15]):(v=i[0],d=i[1],p=i[2],o=i[3],y=i[4],_=i[5],E=i[6],M=i[7],b=i[8],w=i[9],A=i[10],R=i[11],r[0]=v,r[1]=d,r[2]=p,r[3]=o,r[4]=y,r[5]=_,r[6]=E,r[7]=M,r[8]=b,r[9]=w,r[10]=A,r[11]=R,r[12]=v*a+y*l+b*s+i[12],r[13]=d*a+_*l+w*s+i[13],r[14]=p*a+E*l+A*s+i[14],r[15]=o*a+M*l+R*s+i[15]),r}},6520:function(f){f.exports=u;function u(r,i){if(r===i){var c=i[1],a=i[2],l=i[3],s=i[6],v=i[7],d=i[11];r[1]=i[4],r[2]=i[8],r[3]=i[12],r[4]=c,r[6]=i[9],r[7]=i[13],r[8]=a,r[9]=s,r[11]=i[14],r[12]=l,r[13]=v,r[14]=d}else r[0]=i[0],r[1]=i[4],r[2]=i[8],r[3]=i[12],r[4]=i[1],r[5]=i[5],r[6]=i[9],r[7]=i[13],r[8]=i[2],r[9]=i[6],r[10]=i[10],r[11]=i[14],r[12]=i[3],r[13]=i[7],r[14]=i[11],r[15]=i[15];return r}},2264:function(f,u,r){var i=r(1820),c;typeof r.g.matchMedia=="function"?c=!r.g.matchMedia("(hover: none)").matches:c=i,f.exports=c},9184:function(f,u,r){var i=r(1820);function c(){var a=!1;try{var l=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{a=!1}return a}f.exports=i&&c()},1820:function(f){f.exports=!0},4576:function(f){f.exports=function(u){for(var r=u.length,i,c=0;c<r;c++)if(i=u.charCodeAt(c),(i<9||i>13)&&i!==32&&i!==133&&i!==160&&i!==5760&&i!==6158&&(i<8192||i>8205)&&i!==8232&&i!==8233&&i!==8239&&i!==8287&&i!==8288&&i!==12288&&i!==65279)return!1;return!0}},9128:function(f){var u={left:0,top:0};f.exports=r;function r(c,a,l){a=a||c.currentTarget||c.srcElement,Array.isArray(l)||(l=[0,0]);var s=c.clientX||0,v=c.clientY||0,d=i(a);return l[0]=s-d.left,l[1]=v-d.top,l}function i(c){return c===window||c===document||c===document.body?u:c.getBoundingClientRect()}},8324:function(f,u,r){var i;/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(a,l,s){l[a]=l[a]||s(),f.exports?f.exports=l[a]:(i=(function(){return l[a]}).call(u,r,u,f),i!==void 0&&(f.exports=i))})("Promise",typeof r.g<"u"?r.g:this,function(){var a,l,s,v=Object.prototype.toString,d=typeof setImmediate<"u"?function(m){return setImmediate(m)}:setTimeout;try{Object.defineProperty({},"x",{}),a=function(m,L,D,O){return Object.defineProperty(m,L,{value:D,writable:!0,configurable:O!==!1})}}catch{a=function(L,D,O){return L[D]=O,L}}s=function(){var m,L,D;function O(N,V){this.fn=N,this.self=V,this.next=void 0}return{add:function(V,X){D=new O(V,X),L?L.next=D:m=D,L=D,D=void 0},drain:function(){var V=m;for(m=L=l=void 0;V;)V.fn.call(V.self),V=V.next}}}();function p(C,m){s.add(C,m),l||(l=d(s.drain))}function o(C){var m,L=typeof C;return C!=null&&(L=="object"||L=="function")&&(m=C.then),typeof m=="function"?m:!1}function y(){for(var C=0;C<this.chain.length;C++)_(this,this.state===1?this.chain[C].success:this.chain[C].failure,this.chain[C]);this.chain.length=0}function _(C,m,L){var D,O;try{m===!1?L.reject(C.msg):(m===!0?D=C.msg:D=m.call(void 0,C.msg),D===L.promise?L.reject(TypeError("Promise-chain cycle")):(O=o(D))?O.call(D,L.resolve,L.reject):L.resolve(D))}catch(N){L.reject(N)}}function E(C){var m,L=this;if(!L.triggered){L.triggered=!0,L.def&&(L=L.def);try{(m=o(C))?p(function(){var D=new w(L);try{m.call(C,function(){E.apply(D,arguments)},function(){M.apply(D,arguments)})}catch(O){M.call(D,O)}}):(L.msg=C,L.state=1,L.chain.length>0&&p(y,L))}catch(D){M.call(new w(L),D)}}}function M(C){var m=this;m.triggered||(m.triggered=!0,m.def&&(m=m.def),m.msg=C,m.state=2,m.chain.length>0&&p(y,m))}function b(C,m,L,D){for(var O=0;O<m.length;O++)(function(V){C.resolve(m[V]).then(function(k){L(V,k)},D)})(O)}function w(C){this.def=C,this.triggered=!1}function A(C){this.promise=C,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function R(C){if(typeof C!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var m=new A(this);this.then=function(D,O){var N={success:typeof D=="function"?D:!0,failure:typeof O=="function"?O:!1};return N.promise=new this.constructor(function(X,k){if(typeof X!="function"||typeof k!="function")throw TypeError("Not a function");N.resolve=X,N.reject=k}),m.chain.push(N),m.state!==0&&p(y,m),N.promise},this.catch=function(D){return this.then(void 0,D)};try{C.call(void 0,function(D){E.call(m,D)},function(D){M.call(m,D)})}catch(L){M.call(m,L)}}var T=a({},"constructor",R,!1);return R.prototype=T,a(T,"__NPO__",0,!1),a(R,"resolve",function(m){var L=this;return m&&typeof m=="object"&&m.__NPO__===1?m:new L(function(O,N){if(typeof O!="function"||typeof N!="function")throw TypeError("Not a function");O(m)})}),a(R,"reject",function(m){return new this(function(D,O){if(typeof D!="function"||typeof O!="function")throw TypeError("Not a function");O(m)})}),a(R,"all",function(m){var L=this;return v.call(m)!="[object Array]"?L.reject(TypeError("Not an array")):m.length===0?L.resolve([]):new L(function(O,N){if(typeof O!="function"||typeof N!="function")throw TypeError("Not a function");var V=m.length,X=Array(V),k=0;b(L,m,function(B,J){X[B]=J,++k===V&&O(X)},N)})}),a(R,"race",function(m){var L=this;return v.call(m)!="[object Array]"?L.reject(TypeError("Not an array")):new L(function(O,N){if(typeof O!="function"||typeof N!="function")throw TypeError("Not a function");b(L,m,function(X,k){O(k)},N)})}),R})},896:function(f){/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var u=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function c(l){if(l==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(l)}function a(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de",Object.getOwnPropertyNames(l)[0]==="5")return!1;for(var s={},v=0;v<10;v++)s["_"+String.fromCharCode(v)]=v;var d=Object.getOwnPropertyNames(s).map(function(o){return s[o]});if(d.join("")!=="0123456789")return!1;var p={};return"abcdefghijklmnopqrst".split("").forEach(function(o){p[o]=o}),Object.keys(Object.assign({},p)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}f.exports=a()?Object.assign:function(l,s){for(var v,d=c(l),p,o=1;o<arguments.length;o++){v=Object(arguments[o]);for(var y in v)r.call(v,y)&&(d[y]=v[y]);if(u){p=u(v);for(var _=0;_<p.length;_++)i.call(v,p[_])&&(d[p[_]]=v[p[_]])}}return d}},9604:function(f){f.exports=i;var u={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function i(l){var s=[];return l.replace(r,function(v,d,p){var o=d.toLowerCase();for(p=a(p),o=="m"&&p.length>2&&(s.push([d].concat(p.splice(0,2))),o="l",d=d=="m"?"l":"L");;){if(p.length==u[o])return p.unshift(d),s.push(p);if(p.length<u[o])throw new Error("malformed path data");s.push([d].concat(p.splice(0,u[o])))}}),s}var c=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function a(l){var s=l.match(c);return s?s.map(Number):[]}},1456:function(f){f.exports=function(r,i,c,a){var l=r[0],s=r[1],v=!1;c===void 0&&(c=0),a===void 0&&(a=i.length);for(var d=a-c,p=0,o=d-1;p<d;o=p++){var y=i[p+c][0],_=i[p+c][1],E=i[o+c][0],M=i[o+c][1],b=_>s!=M>s&&l<(E-y)*(s-_)/(M-_)+y;b&&(v=!v)}return v}},4756:function(f,u,r){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var i=r(2928),c=r(8648),a=r(9819),l=r(1403),s=r(2368),v=r(7792),d=!1,p=c(),o;o={buildLog:function(_){return _===!0?d=i():_===!1&&(d=!1),d===!1?!1:d.list},epsilon:function(_){return p.epsilon(_)},segments:function(_){var E=a(!0,p,d);return _.regions.forEach(E.addRegion),{segments:E.calculate(_.inverted),inverted:_.inverted}},combine:function(_,E){var M=a(!1,p,d);return{combined:M.calculate(_.segments,_.inverted,E.segments,E.inverted),inverted1:_.inverted,inverted2:E.inverted}},selectUnion:function(_){return{segments:s.union(_.combined,d),inverted:_.inverted1||_.inverted2}},selectIntersect:function(_){return{segments:s.intersect(_.combined,d),inverted:_.inverted1&&_.inverted2}},selectDifference:function(_){return{segments:s.difference(_.combined,d),inverted:_.inverted1&&!_.inverted2}},selectDifferenceRev:function(_){return{segments:s.differenceRev(_.combined,d),inverted:!_.inverted1&&_.inverted2}},selectXor:function(_){return{segments:s.xor(_.combined,d),inverted:_.inverted1!==_.inverted2}},polygon:function(_){return{regions:l(_.segments,p,d),inverted:_.inverted}},polygonFromGeoJSON:function(_){return v.toPolygon(o,_)},polygonToGeoJSON:function(_){return v.fromPolygon(o,p,_)},union:function(_,E){return y(_,E,o.selectUnion)},intersect:function(_,E){return y(_,E,o.selectIntersect)},difference:function(_,E){return y(_,E,o.selectDifference)},differenceRev:function(_,E){return y(_,E,o.selectDifferenceRev)},xor:function(_,E){return y(_,E,o.selectXor)}};function y(_,E,M){var b=o.segments(_),w=o.segments(E),A=o.combine(b,w),R=M(A);return o.polygon(R)}typeof window=="object"&&(window.PolyBool=o),f.exports=o},2928:function(f){function u(){var r,i=0,c=!1;function a(l,s){return r.list.push({type:l,data:s?JSON.parse(JSON.stringify(s)):void 0}),r}return r={list:[],segmentId:function(){return i++},checkIntersection:function(l,s){return a("check",{seg1:l,seg2:s})},segmentChop:function(l,s){return a("div_seg",{seg:l,pt:s}),a("chop",{seg:l,pt:s})},statusRemove:function(l){return a("pop_seg",{seg:l})},segmentUpdate:function(l){return a("seg_update",{seg:l})},segmentNew:function(l,s){return a("new_seg",{seg:l,primary:s})},segmentRemove:function(l){return a("rem_seg",{seg:l})},tempStatus:function(l,s,v){return a("temp_status",{seg:l,above:s,below:v})},rewind:function(l){return a("rewind",{seg:l})},status:function(l,s,v){return a("status",{seg:l,above:s,below:v})},vert:function(l){return l===c?r:(c=l,a("vert",{x:l}))},log:function(l){return typeof l!="string"&&(l=JSON.stringify(l,!1,"  ")),a("log",{txt:l})},reset:function(){return a("reset")},selected:function(l){return a("selected",{segs:l})},chainStart:function(l){return a("chain_start",{seg:l})},chainRemoveHead:function(l,s){return a("chain_rem_head",{index:l,pt:s})},chainRemoveTail:function(l,s){return a("chain_rem_tail",{index:l,pt:s})},chainNew:function(l,s){return a("chain_new",{pt1:l,pt2:s})},chainMatch:function(l){return a("chain_match",{index:l})},chainClose:function(l){return a("chain_close",{index:l})},chainAddHead:function(l,s){return a("chain_add_head",{index:l,pt:s})},chainAddTail:function(l,s){return a("chain_add_tail",{index:l,pt:s})},chainConnect:function(l,s){return a("chain_con",{index1:l,index2:s})},chainReverse:function(l){return a("chain_rev",{index:l})},chainJoin:function(l,s){return a("chain_join",{index1:l,index2:s})},done:function(){return a("done")}},r}f.exports=u},8648:function(f){function u(r){typeof r!="number"&&(r=1e-10);var i={epsilon:function(c){return typeof c=="number"&&(r=c),r},pointAboveOrOnLine:function(c,a,l){var s=a[0],v=a[1],d=l[0],p=l[1],o=c[0],y=c[1];return(d-s)*(y-v)-(p-v)*(o-s)>=-r},pointBetween:function(c,a,l){var s=c[1]-a[1],v=l[0]-a[0],d=c[0]-a[0],p=l[1]-a[1],o=d*v+s*p;if(o<r)return!1;var y=v*v+p*p;return!(o-y>-r)},pointsSameX:function(c,a){return Math.abs(c[0]-a[0])<r},pointsSameY:function(c,a){return Math.abs(c[1]-a[1])<r},pointsSame:function(c,a){return i.pointsSameX(c,a)&&i.pointsSameY(c,a)},pointsCompare:function(c,a){return i.pointsSameX(c,a)?i.pointsSameY(c,a)?0:c[1]<a[1]?-1:1:c[0]<a[0]?-1:1},pointsCollinear:function(c,a,l){var s=c[0]-a[0],v=c[1]-a[1],d=a[0]-l[0],p=a[1]-l[1];return Math.abs(s*p-d*v)<r},linesIntersect:function(c,a,l,s){var v=a[0]-c[0],d=a[1]-c[1],p=s[0]-l[0],o=s[1]-l[1],y=v*o-d*p;if(Math.abs(y)<r)return!1;var _=c[0]-l[0],E=c[1]-l[1],M=(p*E-o*_)/y,b=(v*E-d*_)/y,w={alongA:0,alongB:0,pt:[c[0]+M*v,c[1]+M*d]};return M<=-r?w.alongA=-2:M<r?w.alongA=-1:M-1<=-r?w.alongA=0:M-1<r?w.alongA=1:w.alongA=2,b<=-r?w.alongB=-2:b<r?w.alongB=-1:b-1<=-r?w.alongB=0:b-1<r?w.alongB=1:w.alongB=2,w},pointInsideRegion:function(c,a){for(var l=c[0],s=c[1],v=a[a.length-1][0],d=a[a.length-1][1],p=!1,o=0;o<a.length;o++){var y=a[o][0],_=a[o][1];_-s>r!=d-s>r&&(v-y)*(s-_)/(d-_)+y-l>r&&(p=!p),v=y,d=_}return p}};return i}f.exports=u},7792:function(f){var u={toPolygon:function(r,i){function c(s){if(s.length<=0)return r.segments({inverted:!1,regions:[]});function v(o){var y=o.slice(0,o.length-1);return r.segments({inverted:!1,regions:[y]})}for(var d=v(s[0]),p=1;p<s.length;p++)d=r.selectDifference(r.combine(d,v(s[p])));return d}if(i.type==="Polygon")return r.polygon(c(i.coordinates));if(i.type==="MultiPolygon"){for(var a=r.segments({inverted:!1,regions:[]}),l=0;l<i.coordinates.length;l++)a=r.selectUnion(r.combine(a,c(i.coordinates[l])));return r.polygon(a)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(r,i,c){c=r.polygon(r.segments(c));function a(M,b){return i.pointInsideRegion([(M[0][0]+M[1][0])*.5,(M[0][1]+M[1][1])*.5],b)}function l(M){return{region:M,children:[]}}var s=l(null);function v(M,b){for(var w=0;w<M.children.length;w++){var A=M.children[w];if(a(b,A.region)){v(A,b);return}}for(var R=l(b),w=0;w<M.children.length;w++){var A=M.children[w];a(A.region,b)&&(R.children.push(A),M.children.splice(w,1),w--)}M.children.push(R)}for(var d=0;d<c.regions.length;d++){var p=c.regions[d];p.length<3||v(s,p)}function o(M,b){for(var w=0,A=M[M.length-1][0],R=M[M.length-1][1],T=[],C=0;C<M.length;C++){var m=M[C][0],L=M[C][1];T.push([m,L]),w+=L*A-m*R,A=m,R=L}var D=w<0;return D!==b&&T.reverse(),T.push([T[0][0],T[0][1]]),T}var y=[];function _(M){var b=[o(M.region,!1)];y.push(b);for(var w=0;w<M.children.length;w++)b.push(E(M.children[w]))}function E(M){for(var b=0;b<M.children.length;b++)_(M.children[b]);return o(M.region,!0)}for(var d=0;d<s.children.length;d++)_(s.children[d]);return y.length<=0?{type:"Polygon",coordinates:[]}:y.length==1?{type:"Polygon",coordinates:y[0]}:{type:"MultiPolygon",coordinates:y}}};f.exports=u},9819:function(f,u,r){var i=r(8088);function c(a,l,s){function v(R,T){return{id:s?s.segmentId():-1,start:R,end:T,myFill:{above:null,below:null},otherFill:null}}function d(R,T,C){return{id:s?s.segmentId():-1,start:R,end:T,myFill:{above:C.myFill.above,below:C.myFill.below},otherFill:null}}var p=i.create();function o(R,T,C,m,L,D){var O=l.pointsCompare(T,L);return O!==0?O:l.pointsSame(C,D)?0:R!==m?R?1:-1:l.pointAboveOrOnLine(C,m?L:D,m?D:L)?1:-1}function y(R,T){p.insertBefore(R,function(C){var m=o(R.isStart,R.pt,T,C.isStart,C.pt,C.other.pt);return m<0})}function _(R,T){var C=i.node({isStart:!0,pt:R.start,seg:R,primary:T,other:null,status:null});return y(C,R.end),C}function E(R,T,C){var m=i.node({isStart:!1,pt:T.end,seg:T,primary:C,other:R,status:null});R.other=m,y(m,R.pt)}function M(R,T){var C=_(R,T);return E(C,R,T),C}function b(R,T){s&&s.segmentChop(R.seg,T),R.other.remove(),R.seg.end=T,R.other.pt=T,y(R.other,R.pt)}function w(R,T){var C=d(T,R.seg.end,R.seg);return b(R,T),M(C,R.primary)}function A(R,T){var C=i.create();function m(Y,G){var K=Y.seg.start,ee=Y.seg.end,ie=G.seg.start,re=G.seg.end;return l.pointsCollinear(K,ie,re)?l.pointsCollinear(ee,ie,re)||l.pointAboveOrOnLine(ee,ie,re)?1:-1:l.pointAboveOrOnLine(K,ie,re)?1:-1}function L(Y){return C.findTransition(function(G){var K=m(Y,G.ev);return K>0})}function D(Y,G){var K=Y.seg,ee=G.seg,ie=K.start,re=K.end,se=ee.start,ge=ee.end;s&&s.checkIntersection(K,ee);var xe=l.linesIntersect(ie,re,se,ge);if(xe===!1){if(!l.pointsCollinear(ie,re,se)||l.pointsSame(ie,ge)||l.pointsSame(re,se))return!1;var Se=l.pointsSame(ie,se),ce=l.pointsSame(re,ge);if(Se&&ce)return G;var pe=!Se&&l.pointBetween(ie,se,ge),ye=!ce&&l.pointBetween(re,se,ge);if(Se)return ye?w(G,re):w(Y,ge),G;pe&&(ce||(ye?w(G,re):w(Y,ge)),w(G,ie))}else xe.alongA===0&&(xe.alongB===-1?w(Y,se):xe.alongB===0?w(Y,xe.pt):xe.alongB===1&&w(Y,ge)),xe.alongB===0&&(xe.alongA===-1?w(G,ie):xe.alongA===0?w(G,xe.pt):xe.alongA===1&&w(G,re));return!1}for(var O=[];!p.isEmpty();){var N=p.getHead();if(s&&s.vert(N.pt[0]),N.isStart){let Y=function(){if(X){var G=D(N,X);if(G)return G}return k?D(N,k):!1};s&&s.segmentNew(N.seg,N.primary);var V=L(N),X=V.before?V.before.ev:null,k=V.after?V.after.ev:null;s&&s.tempStatus(N.seg,X?X.seg:!1,k?k.seg:!1);var Z=Y();if(Z){if(a){var B;N.seg.myFill.below===null?B=!0:B=N.seg.myFill.above!==N.seg.myFill.below,B&&(Z.seg.myFill.above=!Z.seg.myFill.above)}else Z.seg.otherFill=N.seg.myFill;s&&s.segmentUpdate(Z.seg),N.other.remove(),N.remove()}if(p.getHead()!==N){s&&s.rewind(N.seg);continue}if(a){var B;N.seg.myFill.below===null?B=!0:B=N.seg.myFill.above!==N.seg.myFill.below,k?N.seg.myFill.below=k.seg.myFill.above:N.seg.myFill.below=R,B?N.seg.myFill.above=!N.seg.myFill.below:N.seg.myFill.above=N.seg.myFill.below}else if(N.seg.otherFill===null){var J;k?N.primary===k.primary?J=k.seg.otherFill.above:J=k.seg.myFill.above:J=N.primary?T:R,N.seg.otherFill={above:J,below:J}}s&&s.status(N.seg,X?X.seg:!1,k?k.seg:!1),N.other.status=V.insert(i.node({ev:N}))}else{var ne=N.status;if(ne===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(C.exists(ne.prev)&&C.exists(ne.next)&&D(ne.prev.ev,ne.next.ev),s&&s.statusRemove(ne.ev.seg),ne.remove(),!N.primary){var oe=N.seg.myFill;N.seg.myFill=N.seg.otherFill,N.seg.otherFill=oe}O.push(N.seg)}p.getHead().remove()}return s&&s.done(),O}return a?{addRegion:function(R){for(var T,C=R[R.length-1],m=0;m<R.length;m++){T=C,C=R[m];var L=l.pointsCompare(T,C);L!==0&&M(v(L<0?T:C,L<0?C:T),!0)}},calculate:function(R){return A(R,!1)}}:{calculate:function(R,T,C,m){return R.forEach(function(L){M(d(L.start,L.end,L),!0)}),C.forEach(function(L){M(d(L.start,L.end,L),!1)}),A(T,m)}}}f.exports=c},8088:function(f){var u={create:function(){var r={root:{root:!0,next:null},exists:function(i){return!(i===null||i===r.root)},isEmpty:function(){return r.root.next===null},getHead:function(){return r.root.next},insertBefore:function(i,c){for(var a=r.root,l=r.root.next;l!==null;){if(c(l)){i.prev=l.prev,i.next=l,l.prev.next=i,l.prev=i;return}a=l,l=l.next}a.next=i,i.prev=a,i.next=null},findTransition:function(i){for(var c=r.root,a=r.root.next;a!==null&&!i(a);)c=a,a=a.next;return{before:c===r.root?null:c,after:a,insert:function(l){return l.prev=c,l.next=a,c.next=l,a!==null&&(a.prev=l),l}}}};return r},node:function(r){return r.prev=null,r.next=null,r.remove=function(){r.prev.next=r.next,r.next&&(r.next.prev=r.prev),r.prev=null,r.next=null},r}};f.exports=u},1403:function(f){function u(r,i,c){var a=[],l=[];return r.forEach(function(s){var v=s.start,d=s.end;if(i.pointsSame(v,d)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}c&&c.chainStart(s);var p={index:0,matches_head:!1,matches_pt1:!1},o={index:0,matches_head:!1,matches_pt1:!1},y=p;function _(Z,B,J){return y.index=Z,y.matches_head=B,y.matches_pt1=J,y===p?(y=o,!1):(y=null,!0)}for(var E=0;E<a.length;E++){var M=a[E],b=M[0];M[1];var w=M[M.length-1];if(M[M.length-2],i.pointsSame(b,v)){if(_(E,!0,!0))break}else if(i.pointsSame(b,d)){if(_(E,!0,!1))break}else if(i.pointsSame(w,v)){if(_(E,!1,!0))break}else if(i.pointsSame(w,d)&&_(E,!1,!1))break}if(y===p){a.push([v,d]),c&&c.chainNew(v,d);return}if(y===o){c&&c.chainMatch(p.index);var A=p.index,R=p.matches_pt1?d:v,T=p.matches_head,M=a[A],C=T?M[0]:M[M.length-1],m=T?M[1]:M[M.length-2],L=T?M[M.length-1]:M[0],D=T?M[M.length-2]:M[1];if(i.pointsCollinear(m,C,R)&&(T?(c&&c.chainRemoveHead(p.index,R),M.shift()):(c&&c.chainRemoveTail(p.index,R),M.pop()),C=m),i.pointsSame(L,R)){a.splice(A,1),i.pointsCollinear(D,L,C)&&(T?(c&&c.chainRemoveTail(p.index,C),M.pop()):(c&&c.chainRemoveHead(p.index,C),M.shift())),c&&c.chainClose(p.index),l.push(M);return}T?(c&&c.chainAddHead(p.index,R),M.unshift(R)):(c&&c.chainAddTail(p.index,R),M.push(R));return}function O(Z){c&&c.chainReverse(Z),a[Z].reverse()}function N(Z,B){var J=a[Z],ne=a[B],oe=J[J.length-1],Y=J[J.length-2],G=ne[0],K=ne[1];i.pointsCollinear(Y,oe,G)&&(c&&c.chainRemoveTail(Z,oe),J.pop(),oe=Y),i.pointsCollinear(oe,G,K)&&(c&&c.chainRemoveHead(B,G),ne.shift()),c&&c.chainJoin(Z,B),a[Z]=J.concat(ne),a.splice(B,1)}var V=p.index,X=o.index;c&&c.chainConnect(V,X);var k=a[V].length<a[X].length;p.matches_head?o.matches_head?k?(O(V),N(V,X)):(O(X),N(X,V)):N(X,V):o.matches_head?N(V,X):k?(O(V),N(X,V)):(O(X),N(V,X))}),l}f.exports=u},2368:function(f){function u(i,c,a){var l=[];return i.forEach(function(s){var v=(s.myFill.above?8:0)+(s.myFill.below?4:0)+(s.otherFill&&s.otherFill.above?2:0)+(s.otherFill&&s.otherFill.below?1:0);c[v]!==0&&l.push({id:a?a.segmentId():-1,start:s.start,end:s.end,myFill:{above:c[v]===1,below:c[v]===2},otherFill:null})}),a&&a.selected(l),l}var r={union:function(i,c){return u(i,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],c)},intersect:function(i,c){return u(i,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],c)},difference:function(i,c){return u(i,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],c)},differenceRev:function(i,c){return u(i,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],c)},xor:function(i,c){return u(i,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],c)}};f.exports=r},9760:function(f,u,r){var i;(function(c){var a=/^\s+/,l=/\s+$/,s=0,v=c.round,d=c.min,p=c.max,o=c.random;function y(P,q){if(P=P||"",q=q||{},P instanceof y)return P;if(!(this instanceof y))return new y(P,q);var z=_(P);this._originalInput=P,this._r=z.r,this._g=z.g,this._b=z.b,this._a=z.a,this._roundA=v(100*this._a)/100,this._format=q.format||z.format,this._gradientType=q.gradientType,this._r<1&&(this._r=v(this._r)),this._g<1&&(this._g=v(this._g)),this._b<1&&(this._b=v(this._b)),this._ok=z.ok,this._tc_id=s++}y.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var P=this.toRgb();return(P.r*299+P.g*587+P.b*114)/1e3},getLuminance:function(){var P=this.toRgb(),q,z,te,ue,ve,_e;return q=P.r/255,z=P.g/255,te=P.b/255,q<=.03928?ue=q/12.92:ue=c.pow((q+.055)/1.055,2.4),z<=.03928?ve=z/12.92:ve=c.pow((z+.055)/1.055,2.4),te<=.03928?_e=te/12.92:_e=c.pow((te+.055)/1.055,2.4),.2126*ue+.7152*ve+.0722*_e},setAlpha:function(P){return this._a=ee(P),this._roundA=v(100*this._a)/100,this},toHsv:function(){var P=w(this._r,this._g,this._b);return{h:P.h*360,s:P.s,v:P.v,a:this._a}},toHsvString:function(){var P=w(this._r,this._g,this._b),q=v(P.h*360),z=v(P.s*100),te=v(P.v*100);return this._a==1?"hsv("+q+", "+z+"%, "+te+"%)":"hsva("+q+", "+z+"%, "+te+"%, "+this._roundA+")"},toHsl:function(){var P=M(this._r,this._g,this._b);return{h:P.h*360,s:P.s,l:P.l,a:this._a}},toHslString:function(){var P=M(this._r,this._g,this._b),q=v(P.h*360),z=v(P.s*100),te=v(P.l*100);return this._a==1?"hsl("+q+", "+z+"%, "+te+"%)":"hsla("+q+", "+z+"%, "+te+"%, "+this._roundA+")"},toHex:function(P){return R(this._r,this._g,this._b,P)},toHexString:function(P){return"#"+this.toHex(P)},toHex8:function(P){return T(this._r,this._g,this._b,this._a,P)},toHex8String:function(P){return"#"+this.toHex8(P)},toRgb:function(){return{r:v(this._r),g:v(this._g),b:v(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+v(this._r)+", "+v(this._g)+", "+v(this._b)+")":"rgba("+v(this._r)+", "+v(this._g)+", "+v(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:v(ie(this._r,255)*100)+"%",g:v(ie(this._g,255)*100)+"%",b:v(ie(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+v(ie(this._r,255)*100)+"%, "+v(ie(this._g,255)*100)+"%, "+v(ie(this._b,255)*100)+"%)":"rgba("+v(ie(this._r,255)*100)+"%, "+v(ie(this._g,255)*100)+"%, "+v(ie(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:G[R(this._r,this._g,this._b,!0)]||!1},toFilter:function(P){var q="#"+C(this._r,this._g,this._b,this._a),z=q,te=this._gradientType?"GradientType = 1, ":"";if(P){var ue=y(P);z="#"+C(ue._r,ue._g,ue._b,ue._a)}return"progid:DXImageTransform.Microsoft.gradient("+te+"startColorstr="+q+",endColorstr="+z+")"},toString:function(P){var q=!!P;P=P||this._format;var z=!1,te=this._a<1&&this._a>=0,ue=!q&&te&&(P==="hex"||P==="hex6"||P==="hex3"||P==="hex4"||P==="hex8"||P==="name");return ue?P==="name"&&this._a===0?this.toName():this.toRgbString():(P==="rgb"&&(z=this.toRgbString()),P==="prgb"&&(z=this.toPercentageRgbString()),(P==="hex"||P==="hex6")&&(z=this.toHexString()),P==="hex3"&&(z=this.toHexString(!0)),P==="hex4"&&(z=this.toHex8String(!0)),P==="hex8"&&(z=this.toHex8String()),P==="name"&&(z=this.toName()),P==="hsl"&&(z=this.toHslString()),P==="hsv"&&(z=this.toHsvString()),z||this.toHexString())},clone:function(){return y(this.toString())},_applyModification:function(P,q){var z=P.apply(null,[this].concat([].slice.call(q)));return this._r=z._r,this._g=z._g,this._b=z._b,this.setAlpha(z._a),this},lighten:function(){return this._applyModification(O,arguments)},brighten:function(){return this._applyModification(N,arguments)},darken:function(){return this._applyModification(V,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(L,arguments)},greyscale:function(){return this._applyModification(D,arguments)},spin:function(){return this._applyModification(X,arguments)},_applyCombination:function(P,q){return P.apply(null,[this].concat([].slice.call(q)))},analogous:function(){return this._applyCombination(ne,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(oe,arguments)},splitcomplement:function(){return this._applyCombination(J,arguments)},triad:function(){return this._applyCombination(Z,arguments)},tetrad:function(){return this._applyCombination(B,arguments)}},y.fromRatio=function(P,q){if(typeof P=="object"){var z={};for(var te in P)P.hasOwnProperty(te)&&(te==="a"?z[te]=P[te]:z[te]=ce(P[te]));P=z}return y(P,q)};function _(P){var q={r:0,g:0,b:0},z=1,te=null,ue=null,ve=null,_e=!1,Re=!1;return typeof P=="string"&&(P=j(P)),typeof P=="object"&&(W(P.r)&&W(P.g)&&W(P.b)?(q=E(P.r,P.g,P.b),_e=!0,Re=String(P.r).substr(-1)==="%"?"prgb":"rgb"):W(P.h)&&W(P.s)&&W(P.v)?(te=ce(P.s),ue=ce(P.v),q=A(P.h,te,ue),_e=!0,Re="hsv"):W(P.h)&&W(P.s)&&W(P.l)&&(te=ce(P.s),ve=ce(P.l),q=b(P.h,te,ve),_e=!0,Re="hsl"),P.hasOwnProperty("a")&&(z=P.a)),z=ee(z),{ok:_e,format:P.format||Re,r:d(255,p(q.r,0)),g:d(255,p(q.g,0)),b:d(255,p(q.b,0)),a:z}}function E(P,q,z){return{r:ie(P,255)*255,g:ie(q,255)*255,b:ie(z,255)*255}}function M(P,q,z){P=ie(P,255),q=ie(q,255),z=ie(z,255);var te=p(P,q,z),ue=d(P,q,z),ve,_e,Re=(te+ue)/2;if(te==ue)ve=_e=0;else{var Le=te-ue;switch(_e=Re>.5?Le/(2-te-ue):Le/(te+ue),te){case P:ve=(q-z)/Le+(q<z?6:0);break;case q:ve=(z-P)/Le+2;break;case z:ve=(P-q)/Le+4;break}ve/=6}return{h:ve,s:_e,l:Re}}function b(P,q,z){var te,ue,ve;P=ie(P,360),q=ie(q,100),z=ie(z,100);function _e(Ve,Xe,Ze){return Ze<0&&(Ze+=1),Ze>1&&(Ze-=1),Ze<.16666666666666666?Ve+(Xe-Ve)*6*Ze:Ze<.5?Xe:Ze<.6666666666666666?Ve+(Xe-Ve)*(.6666666666666666-Ze)*6:Ve}if(q===0)te=ue=ve=z;else{var Re=z<.5?z*(1+q):z+q-z*q,Le=2*z-Re;te=_e(Le,Re,P+.3333333333333333),ue=_e(Le,Re,P),ve=_e(Le,Re,P-.3333333333333333)}return{r:te*255,g:ue*255,b:ve*255}}function w(P,q,z){P=ie(P,255),q=ie(q,255),z=ie(z,255);var te=p(P,q,z),ue=d(P,q,z),ve,_e,Re=te,Le=te-ue;if(_e=te===0?0:Le/te,te==ue)ve=0;else{switch(te){case P:ve=(q-z)/Le+(q<z?6:0);break;case q:ve=(z-P)/Le+2;break;case z:ve=(P-q)/Le+4;break}ve/=6}return{h:ve,s:_e,v:Re}}function A(P,q,z){P=ie(P,360)*6,q=ie(q,100),z=ie(z,100);var te=c.floor(P),ue=P-te,ve=z*(1-q),_e=z*(1-ue*q),Re=z*(1-(1-ue)*q),Le=te%6,Ve=[z,_e,ve,ve,Re,z][Le],Xe=[Re,z,z,_e,ve,ve][Le],Ze=[ve,ve,Re,z,z,_e][Le];return{r:Ve*255,g:Xe*255,b:Ze*255}}function R(P,q,z,te){var ue=[Se(v(P).toString(16)),Se(v(q).toString(16)),Se(v(z).toString(16))];return te&&ue[0].charAt(0)==ue[0].charAt(1)&&ue[1].charAt(0)==ue[1].charAt(1)&&ue[2].charAt(0)==ue[2].charAt(1)?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0):ue.join("")}function T(P,q,z,te,ue){var ve=[Se(v(P).toString(16)),Se(v(q).toString(16)),Se(v(z).toString(16)),Se(pe(te))];return ue&&ve[0].charAt(0)==ve[0].charAt(1)&&ve[1].charAt(0)==ve[1].charAt(1)&&ve[2].charAt(0)==ve[2].charAt(1)&&ve[3].charAt(0)==ve[3].charAt(1)?ve[0].charAt(0)+ve[1].charAt(0)+ve[2].charAt(0)+ve[3].charAt(0):ve.join("")}function C(P,q,z,te){var ue=[Se(pe(te)),Se(v(P).toString(16)),Se(v(q).toString(16)),Se(v(z).toString(16))];return ue.join("")}y.equals=function(P,q){return!P||!q?!1:y(P).toRgbString()==y(q).toRgbString()},y.random=function(){return y.fromRatio({r:o(),g:o(),b:o()})};function m(P,q){q=q===0?0:q||10;var z=y(P).toHsl();return z.s-=q/100,z.s=re(z.s),y(z)}function L(P,q){q=q===0?0:q||10;var z=y(P).toHsl();return z.s+=q/100,z.s=re(z.s),y(z)}function D(P){return y(P).desaturate(100)}function O(P,q){q=q===0?0:q||10;var z=y(P).toHsl();return z.l+=q/100,z.l=re(z.l),y(z)}function N(P,q){q=q===0?0:q||10;var z=y(P).toRgb();return z.r=p(0,d(255,z.r-v(255*-(q/100)))),z.g=p(0,d(255,z.g-v(255*-(q/100)))),z.b=p(0,d(255,z.b-v(255*-(q/100)))),y(z)}function V(P,q){q=q===0?0:q||10;var z=y(P).toHsl();return z.l-=q/100,z.l=re(z.l),y(z)}function X(P,q){var z=y(P).toHsl(),te=(z.h+q)%360;return z.h=te<0?360+te:te,y(z)}function k(P){var q=y(P).toHsl();return q.h=(q.h+180)%360,y(q)}function Z(P){var q=y(P).toHsl(),z=q.h;return[y(P),y({h:(z+120)%360,s:q.s,l:q.l}),y({h:(z+240)%360,s:q.s,l:q.l})]}function B(P){var q=y(P).toHsl(),z=q.h;return[y(P),y({h:(z+90)%360,s:q.s,l:q.l}),y({h:(z+180)%360,s:q.s,l:q.l}),y({h:(z+270)%360,s:q.s,l:q.l})]}function J(P){var q=y(P).toHsl(),z=q.h;return[y(P),y({h:(z+72)%360,s:q.s,l:q.l}),y({h:(z+216)%360,s:q.s,l:q.l})]}function ne(P,q,z){q=q||6,z=z||30;var te=y(P).toHsl(),ue=360/z,ve=[y(P)];for(te.h=(te.h-(ue*q>>1)+720)%360;--q;)te.h=(te.h+ue)%360,ve.push(y(te));return ve}function oe(P,q){q=q||6;for(var z=y(P).toHsv(),te=z.h,ue=z.s,ve=z.v,_e=[],Re=1/q;q--;)_e.push(y({h:te,s:ue,v:ve})),ve=(ve+Re)%1;return _e}y.mix=function(P,q,z){z=z===0?0:z||50;var te=y(P).toRgb(),ue=y(q).toRgb(),ve=z/100,_e={r:(ue.r-te.r)*ve+te.r,g:(ue.g-te.g)*ve+te.g,b:(ue.b-te.b)*ve+te.b,a:(ue.a-te.a)*ve+te.a};return y(_e)},y.readability=function(P,q){var z=y(P),te=y(q);return(c.max(z.getLuminance(),te.getLuminance())+.05)/(c.min(z.getLuminance(),te.getLuminance())+.05)},y.isReadable=function(P,q,z){var te=y.readability(P,q),ue,ve;switch(ve=!1,ue=F(z),ue.level+ue.size){case"AAsmall":case"AAAlarge":ve=te>=4.5;break;case"AAlarge":ve=te>=3;break;case"AAAsmall":ve=te>=7;break}return ve},y.mostReadable=function(P,q,z){var te=null,ue=0,ve,_e,Re,Le;z=z||{},_e=z.includeFallbackColors,Re=z.level,Le=z.size;for(var Ve=0;Ve<q.length;Ve++)ve=y.readability(P,q[Ve]),ve>ue&&(ue=ve,te=y(q[Ve]));return y.isReadable(P,te,{level:Re,size:Le})||!_e?te:(z.includeFallbackColors=!1,y.mostReadable(P,["#fff","#000"],z))};var Y=y.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},G=y.hexNames=K(Y);function K(P){var q={};for(var z in P)P.hasOwnProperty(z)&&(q[P[z]]=z);return q}function ee(P){return P=parseFloat(P),(isNaN(P)||P<0||P>1)&&(P=1),P}function ie(P,q){ge(P)&&(P="100%");var z=xe(P);return P=d(q,p(0,parseFloat(P))),z&&(P=parseInt(P*q,10)/100),c.abs(P-q)<1e-6?1:P%q/parseFloat(q)}function re(P){return d(1,p(0,P))}function se(P){return parseInt(P,16)}function ge(P){return typeof P=="string"&&P.indexOf(".")!=-1&&parseFloat(P)===1}function xe(P){return typeof P=="string"&&P.indexOf("%")!=-1}function Se(P){return P.length==1?"0"+P:""+P}function ce(P){return P<=1&&(P=P*100+"%"),P}function pe(P){return c.round(parseFloat(P)*255).toString(16)}function ye(P){return se(P)/255}var U=function(){var P="[-\\+]?\\d+%?",q="[-\\+]?\\d*\\.\\d+%?",z="(?:"+q+")|(?:"+P+")",te="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",ue="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?";return{CSS_UNIT:new RegExp(z),rgb:new RegExp("rgb"+te),rgba:new RegExp("rgba"+ue),hsl:new RegExp("hsl"+te),hsla:new RegExp("hsla"+ue),hsv:new RegExp("hsv"+te),hsva:new RegExp("hsva"+ue),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function W(P){return!!U.CSS_UNIT.exec(P)}function j(P){P=P.replace(a,"").replace(l,"").toLowerCase();var q=!1;if(Y[P])P=Y[P],q=!0;else if(P=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var z;return(z=U.rgb.exec(P))?{r:z[1],g:z[2],b:z[3]}:(z=U.rgba.exec(P))?{r:z[1],g:z[2],b:z[3],a:z[4]}:(z=U.hsl.exec(P))?{h:z[1],s:z[2],l:z[3]}:(z=U.hsla.exec(P))?{h:z[1],s:z[2],l:z[3],a:z[4]}:(z=U.hsv.exec(P))?{h:z[1],s:z[2],v:z[3]}:(z=U.hsva.exec(P))?{h:z[1],s:z[2],v:z[3],a:z[4]}:(z=U.hex8.exec(P))?{r:se(z[1]),g:se(z[2]),b:se(z[3]),a:ye(z[4]),format:q?"name":"hex8"}:(z=U.hex6.exec(P))?{r:se(z[1]),g:se(z[2]),b:se(z[3]),format:q?"name":"hex"}:(z=U.hex4.exec(P))?{r:se(z[1]+""+z[1]),g:se(z[2]+""+z[2]),b:se(z[3]+""+z[3]),a:ye(z[4]+""+z[4]),format:q?"name":"hex8"}:(z=U.hex3.exec(P))?{r:se(z[1]+""+z[1]),g:se(z[2]+""+z[2]),b:se(z[3]+""+z[3]),format:q?"name":"hex"}:!1}function F(P){var q,z;return P=P||{level:"AA",size:"small"},q=(P.level||"AA").toUpperCase(),z=(P.size||"small").toLowerCase(),q!=="AA"&&q!=="AAA"&&(q="AA"),z!=="small"&&z!=="large"&&(z="small"),{level:q,size:z}}f.exports?f.exports=y:(i=(function(){return y}).call(u,r,u,f),i!==void 0&&(f.exports=i))})(Math)},7020:function(f,u,r){var i=r(8700),c=r(896),a=i.instance();function l(M){this.local=this.regionalOptions[M||""]||this.regionalOptions[""]}l.prototype=new i.baseCalendar,c(l.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(M,b){if(typeof M=="string"){var w=M.match(v);return w?w[0]:""}var A=this._validateYear(M),R=M.month(),T=""+this.toChineseMonth(A,R);return b&&T.length<2&&(T="0"+T),this.isIntercalaryMonth(A,R)&&(T+="i"),T},monthNames:function(M){if(typeof M=="string"){var b=M.match(d);return b?b[0]:""}var w=this._validateYear(M),A=M.month(),R=this.toChineseMonth(w,A),T=["","","","","","","","","","","",""][R-1];return this.isIntercalaryMonth(w,A)&&(T=""+T),T},monthNamesShort:function(M){if(typeof M=="string"){var b=M.match(p);return b?b[0]:""}var w=this._validateYear(M),A=M.month(),R=this.toChineseMonth(w,A),T=["","","","","","","","","","","",""][R-1];return this.isIntercalaryMonth(w,A)&&(T=""+T),T},parseMonth:function(M,b){M=this._validateYear(M);var w=parseInt(b),A;if(isNaN(w))b[0]===""&&(A=!0,b=b.substring(1)),b[b.length-1]===""&&(b=b.substring(0,b.length-1)),w=1+["","","","","","","","","","","",""].indexOf(b);else{var R=b[b.length-1];A=R==="i"||R==="I"}var T=this.toMonthIndex(M,w,A);return T},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(M,b){if(M.year&&(M=M.year()),typeof M!="number"||M<1888||M>2111)throw b.replace(/\{0\}/,this.local.name);return M},toMonthIndex:function(M,b,w){var A=this.intercalaryMonth(M),R=w&&b!==A;if(R||b<1||b>12)throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);var T;return A?!w&&b<=A?T=b-1:T=b:T=b-1,T},toChineseMonth:function(M,b){M.year&&(M=M.year(),b=M.month());var w=this.intercalaryMonth(M),A=w?12:11;if(b<0||b>A)throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);var R;return w?b<w?R=b+1:R=b:R=b+1,R},intercalaryMonth:function(M){M=this._validateYear(M);var b=o[M-o[0]],w=b>>13;return w},isIntercalaryMonth:function(M,b){M.year&&(M=M.year(),b=M.month());var w=this.intercalaryMonth(M);return!!w&&w===b},leapYear:function(M){return this.intercalaryMonth(M)!==0},weekOfYear:function(M,b,w){var A=this._validateYear(M,i.local.invalidyear),R=y[A-y[0]],T=R>>9&4095,C=R>>5&15,m=R&31,L;L=a.newDate(T,C,m),L.add(4-(L.dayOfWeek()||7),"d");var D=this.toJD(M,b,w)-L.toJD();return 1+Math.floor(D/7)},monthsInYear:function(M){return this.leapYear(M)?13:12},daysInMonth:function(M,b){M.year&&(b=M.month(),M=M.year()),M=this._validateYear(M);var w=o[M-o[0]],A=w>>13,R=A?12:11;if(b>R)throw i.local.invalidMonth.replace(/\{0\}/,this.local.name);var T=w&1<<12-b?30:29;return T},weekDay:function(M,b,w){return(this.dayOfWeek(M,b,w)||7)<6},toJD:function(M,b,w){var A=this._validate(M,T,w,i.local.invalidDate);M=this._validateYear(A.year()),b=A.month(),w=A.day();var R=this.isIntercalaryMonth(M,b),T=this.toChineseMonth(M,b),C=E(M,T,w,R);return a.toJD(C.year,C.month,C.day)},fromJD:function(M){var b=a.fromJD(M),w=_(b.year(),b.month(),b.day()),A=this.toMonthIndex(w.year,w.month,w.isIntercalary);return this.newDate(w.year,A,w.day)},fromString:function(M){var b=M.match(s),w=this._validateYear(+b[1]),A=+b[2],R=!!b[3],T=this.toMonthIndex(w,A,R),C=+b[4];return this.newDate(w,T,C)},add:function(M,b,w){var A=M.year(),R=M.month(),T=this.isIntercalaryMonth(A,R),C=this.toChineseMonth(A,R),m=Object.getPrototypeOf(l.prototype).add.call(this,M,b,w);if(w==="y"){var L=m.year(),D=m.month(),O=this.isIntercalaryMonth(L,C),N=T&&O?this.toMonthIndex(L,C,!0):this.toMonthIndex(L,C,!1);N!==D&&m.month(N)}return m}});var s=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,v=/^\d?\d[iI]?/m,d=/^??[]?/m,p=/^??[]?/m;i.calendars.chinese=l;var o=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],y=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function _(M,b,w,A){var R,T;if(typeof M=="object")R=M,T=b||{};else{var C=typeof M=="number"&&M>=1888&&M<=2111;if(!C)throw new Error("Solar year outside range 1888-2111");var m=typeof b=="number"&&b>=1&&b<=12;if(!m)throw new Error("Solar month outside range 1 - 12");var L=typeof w=="number"&&w>=1&&w<=31;if(!L)throw new Error("Solar day outside range 1 - 31");R={year:M,month:b,day:w},T={}}var D=y[R.year-y[0]],O=R.year<<9|R.month<<5|R.day;T.year=O>=D?R.year:R.year-1,D=y[T.year-y[0]];var N=D>>9&4095,V=D>>5&15,X=D&31,k,Z=new Date(N,V-1,X),B=new Date(R.year,R.month-1,R.day);k=Math.round((B-Z)/864e5);var J=o[T.year-o[0]],ne;for(ne=0;ne<13;ne++){var oe=J&1<<12-ne?30:29;if(k<oe)break;k-=oe}var Y=J>>13;return!Y||ne<Y?(T.isIntercalary=!1,T.month=1+ne):ne===Y?(T.isIntercalary=!0,T.month=ne):(T.isIntercalary=!1,T.month=ne),T.day=1+k,T}function E(M,b,w,A,R){var T,C;if(typeof M=="object")C=M,T=b||{};else{var m=typeof M=="number"&&M>=1888&&M<=2111;if(!m)throw new Error("Lunar year outside range 1888-2111");var L=typeof b=="number"&&b>=1&&b<=12;if(!L)throw new Error("Lunar month outside range 1 - 12");var D=typeof w=="number"&&w>=1&&w<=30;if(!D)throw new Error("Lunar day outside range 1 - 30");var O;typeof A=="object"?(O=!1,T=A):(O=!!A,T={}),C={year:M,month:b,day:w,isIntercalary:O}}var N;N=C.day-1;var V=o[C.year-o[0]],X=V>>13,k;X&&(C.month>X||C.isIntercalary)?k=C.month:k=C.month-1;for(var Z=0;Z<k;Z++){var B=V&1<<12-Z?30:29;N+=B}var J=y[C.year-y[0]],ne=J>>9&4095,oe=J>>5&15,Y=J&31,G=new Date(ne,oe-1,Y+N);return T.year=G.getFullYear(),T.month=1+G.getMonth(),T.day=G.getDate(),T}},7411:function(f,u,r){var i=r(8700),c=r(896);function a(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}a.prototype=new i.baseCalendar,c(a.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var s=this._validate(v,this.minMonth,this.minDay,i.local.invalidYear),v=s.year()+(s.year()<0?1:0);return v%4===3||v%4===-1},monthsInYear:function(l){return this._validate(l,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),13},weekOfYear:function(l,s,v){var d=this.newDate(l,s,v);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(l,s){var v=this._validate(l,s,this.minDay,i.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===13&&this.leapYear(v.year())?1:0)},weekDay:function(l,s,v){return(this.dayOfWeek(l,s,v)||7)<6},toJD:function(l,s,v){var d=this._validate(l,s,v,i.local.invalidDate);return l=d.year(),l<0&&l++,d.day()+(d.month()-1)*30+(l-1)*365+Math.floor(l/4)+this.jdEpoch-1},fromJD:function(l){var s=Math.floor(l)+.5-this.jdEpoch,v=Math.floor((s-Math.floor((s+366)/1461))/365)+1;v<=0&&v--,s=Math.floor(l)+.5-this.newDate(v,1,1).toJD();var d=Math.floor(s/30)+1,p=s-(d-1)*30+1;return this.newDate(v,d,p)}}),i.calendars.coptic=a},5668:function(f,u,r){var i=r(8700),c=r(896);function a(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}a.prototype=new i.baseCalendar,c(a.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(s){return this._validate(s,this.minMonth,this.minDay,i.local.invalidYear),!1},monthsInYear:function(s){return this._validate(s,this.minMonth,this.minDay,i.local.invalidYear),13},daysInYear:function(s){return this._validate(s,this.minMonth,this.minDay,i.local.invalidYear),400},weekOfYear:function(s,v,d){var p=this.newDate(s,v,d);return p.add(-p.dayOfWeek(),"d"),Math.floor((p.dayOfYear()-1)/8)+1},daysInMonth:function(s,v){var d=this._validate(s,v,this.minDay,i.local.invalidMonth);return this.daysPerMonth[d.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(s,v,d){var p=this._validate(s,v,d,i.local.invalidDate);return(p.day()+1)%8},weekDay:function(s,v,d){var p=this.dayOfWeek(s,v,d);return p>=2&&p<=6},extraInfo:function(s,v,d){var p=this._validate(s,v,d,i.local.invalidDate);return{century:l[Math.floor((p.year()-1)/100)+1]||""}},toJD:function(s,v,d){var p=this._validate(s,v,d,i.local.invalidDate);return s=p.year()+(p.year()<0?1:0),v=p.month(),d=p.day(),d+(v>1?16:0)+(v>2?(v-2)*32:0)+(s-1)*400+this.jdEpoch-1},fromJD:function(s){s=Math.floor(s+.5)-Math.floor(this.jdEpoch)-1;var v=Math.floor(s/400)+1;s-=(v-1)*400,s+=s>15?16:0;var d=Math.floor(s/32)+1,p=s-(d-1)*32+1;return this.newDate(v<=0?v-1:v,d,p)}});var l={20:"Fruitbat",21:"Anchovy"};i.calendars.discworld=a},2787:function(f,u,r){var i=r(8700),c=r(896);function a(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}a.prototype=new i.baseCalendar,c(a.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var s=this._validate(v,this.minMonth,this.minDay,i.local.invalidYear),v=s.year()+(s.year()<0?1:0);return v%4===3||v%4===-1},monthsInYear:function(l){return this._validate(l,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),13},weekOfYear:function(l,s,v){var d=this.newDate(l,s,v);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(l,s){var v=this._validate(l,s,this.minDay,i.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===13&&this.leapYear(v.year())?1:0)},weekDay:function(l,s,v){return(this.dayOfWeek(l,s,v)||7)<6},toJD:function(l,s,v){var d=this._validate(l,s,v,i.local.invalidDate);return l=d.year(),l<0&&l++,d.day()+(d.month()-1)*30+(l-1)*365+Math.floor(l/4)+this.jdEpoch-1},fromJD:function(l){var s=Math.floor(l)+.5-this.jdEpoch,v=Math.floor((s-Math.floor((s+366)/1461))/365)+1;v<=0&&v--,s=Math.floor(l)+.5-this.newDate(v,1,1).toJD();var d=Math.floor(s/30)+1,p=s-(d-1)*30+1;return this.newDate(v,d,p)}}),i.calendars.ethiopian=a},2084:function(f,u,r){var i=r(8700),c=r(896);function a(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}a.prototype=new i.baseCalendar,c(a.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(s){var v=this._validate(s,this.minMonth,this.minDay,i.local.invalidYear);return this._leapYear(v.year())},_leapYear:function(s){return s=s<0?s+1:s,l(s*7+1,19)<7},monthsInYear:function(s){return this._validate(s,this.minMonth,this.minDay,i.local.invalidYear),this._leapYear(s.year?s.year():s)?13:12},weekOfYear:function(s,v,d){var p=this.newDate(s,v,d);return p.add(-p.dayOfWeek(),"d"),Math.floor((p.dayOfYear()-1)/7)+1},daysInYear:function(s){var v=this._validate(s,this.minMonth,this.minDay,i.local.invalidYear);return s=v.year(),this.toJD(s===-1?1:s+1,7,1)-this.toJD(s,7,1)},daysInMonth:function(s,v){return s.year&&(v=s.month(),s=s.year()),this._validate(s,v,this.minDay,i.local.invalidMonth),v===12&&this.leapYear(s)||v===8&&l(this.daysInYear(s),10)===5?30:v===9&&l(this.daysInYear(s),10)===3?29:this.daysPerMonth[v-1]},weekDay:function(s,v,d){return this.dayOfWeek(s,v,d)!==6},extraInfo:function(s,v,d){var p=this._validate(s,v,d,i.local.invalidDate);return{yearType:(this.leapYear(p)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(p)%10-3]}},toJD:function(s,v,d){var p=this._validate(s,v,d,i.local.invalidDate);s=p.year(),v=p.month(),d=p.day();var o=s<=0?s+1:s,y=this.jdEpoch+this._delay1(o)+this._delay2(o)+d+1;if(v<7){for(var _=7;_<=this.monthsInYear(s);_++)y+=this.daysInMonth(s,_);for(var _=1;_<v;_++)y+=this.daysInMonth(s,_)}else for(var _=7;_<v;_++)y+=this.daysInMonth(s,_);return y},_delay1:function(s){var v=Math.floor((235*s-234)/19),d=12084+13753*v,p=v*29+Math.floor(d/25920);return l(3*(p+1),7)<3&&p++,p},_delay2:function(s){var v=this._delay1(s-1),d=this._delay1(s),p=this._delay1(s+1);return p-d===356?2:d-v===382?1:0},fromJD:function(s){s=Math.floor(s)+.5;for(var v=Math.floor((s-this.jdEpoch)*98496/35975351)-1;s>=this.toJD(v===-1?1:v+1,7,1);)v++;for(var d=s<this.toJD(v,1,1)?7:1;s>this.toJD(v,d,this.daysInMonth(v,d));)d++;var p=s-this.toJD(v,d,1)+1;return this.newDate(v,d,p)}});function l(s,v){return s-v*Math.floor(s/v)}i.calendars.hebrew=a},6368:function(f,u,r){var i=r(8700),c=r(896);function a(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}a.prototype=new i.baseCalendar,c(a.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(l){var s=this._validate(l,this.minMonth,this.minDay,i.local.invalidYear);return(s.year()*11+14)%30<11},weekOfYear:function(l,s,v){var d=this.newDate(l,s,v);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(l){return this.leapYear(l)?355:354},daysInMonth:function(l,s){var v=this._validate(l,s,this.minDay,i.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(l,s,v){return this.dayOfWeek(l,s,v)!==5},toJD:function(l,s,v){var d=this._validate(l,s,v,i.local.invalidDate);return l=d.year(),s=d.month(),v=d.day(),l=l<=0?l+1:l,v+Math.ceil(29.5*(s-1))+(l-1)*354+Math.floor((3+11*l)/30)+this.jdEpoch-1},fromJD:function(l){l=Math.floor(l)+.5;var s=Math.floor((30*(l-this.jdEpoch)+10646)/10631);s=s<=0?s-1:s;var v=Math.min(12,Math.ceil((l-29-this.toJD(s,1,1))/29.5)+1),d=l-this.toJD(s,v,1)+1;return this.newDate(s,v,d)}}),i.calendars.islamic=a},4747:function(f,u,r){var i=r(8700),c=r(896);function a(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}a.prototype=new i.baseCalendar,c(a.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var s=this._validate(v,this.minMonth,this.minDay,i.local.invalidYear),v=s.year()<0?s.year()+1:s.year();return v%4===0},weekOfYear:function(l,s,v){var d=this.newDate(l,s,v);return d.add(4-(d.dayOfWeek()||7),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(l,s){var v=this._validate(l,s,this.minDay,i.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(l,s,v){return(this.dayOfWeek(l,s,v)||7)<6},toJD:function(l,s,v){var d=this._validate(l,s,v,i.local.invalidDate);return l=d.year(),s=d.month(),v=d.day(),l<0&&l++,s<=2&&(l--,s+=12),Math.floor(365.25*(l+4716))+Math.floor(30.6001*(s+1))+v-1524.5},fromJD:function(l){var s=Math.floor(l+.5),v=s+1524,d=Math.floor((v-122.1)/365.25),p=Math.floor(365.25*d),o=Math.floor((v-p)/30.6001),y=o-Math.floor(o<14?1:13),_=d-Math.floor(y>2?4716:4715),E=v-p-Math.floor(30.6001*o);return _<=0&&_--,this.newDate(_,y,E)}}),i.calendars.julian=a},5616:function(f,u,r){var i=r(8700),c=r(896);function a(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}a.prototype=new i.baseCalendar,c(a.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(v){return this._validate(v,this.minMonth,this.minDay,i.local.invalidYear),!1},formatYear:function(v){var d=this._validate(v,this.minMonth,this.minDay,i.local.invalidYear);v=d.year();var p=Math.floor(v/400);v=v%400,v+=v<0?400:0;var o=Math.floor(v/20);return p+"."+o+"."+v%20},forYear:function(v){if(v=v.split("."),v.length<3)throw"Invalid Mayan year";for(var d=0,p=0;p<v.length;p++){var o=parseInt(v[p],10);if(Math.abs(o)>19||p>0&&o<0)throw"Invalid Mayan year";d=d*20+o}return d},monthsInYear:function(v){return this._validate(v,this.minMonth,this.minDay,i.local.invalidYear),18},weekOfYear:function(v,d,p){return this._validate(v,d,p,i.local.invalidDate),0},daysInYear:function(v){return this._validate(v,this.minMonth,this.minDay,i.local.invalidYear),360},daysInMonth:function(v,d){return this._validate(v,d,this.minDay,i.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(v,d,p){var o=this._validate(v,d,p,i.local.invalidDate);return o.day()},weekDay:function(v,d,p){return this._validate(v,d,p,i.local.invalidDate),!0},extraInfo:function(v,d,p){var o=this._validate(v,d,p,i.local.invalidDate),y=o.toJD(),_=this._toHaab(y),E=this._toTzolkin(y);return{haabMonthName:this.local.haabMonths[_[0]-1],haabMonth:_[0],haabDay:_[1],tzolkinDayName:this.local.tzolkinMonths[E[0]-1],tzolkinDay:E[0],tzolkinTrecena:E[1]}},_toHaab:function(v){v-=this.jdEpoch;var d=l(v+8+17*20,365);return[Math.floor(d/20)+1,l(d,20)]},_toTzolkin:function(v){return v-=this.jdEpoch,[s(v+20,20),s(v+4,13)]},toJD:function(v,d,p){var o=this._validate(v,d,p,i.local.invalidDate);return o.day()+o.month()*20+o.year()*360+this.jdEpoch},fromJD:function(v){v=Math.floor(v)+.5-this.jdEpoch;var d=Math.floor(v/360);v=v%360,v+=v<0?360:0;var p=Math.floor(v/20),o=v%20;return this.newDate(d,p,o)}});function l(v,d){return v-d*Math.floor(v/d)}function s(v,d){return l(v-1,d)+1}i.calendars.mayan=a},632:function(f,u,r){var i=r(8700),c=r(896);function a(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}a.prototype=new i.baseCalendar;var l=i.instance("gregorian");c(a.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(s){var v=this._validate(s,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return l.leapYear(v.year()+(v.year()<1?1:0)+1469)},weekOfYear:function(s,v,d){var p=this.newDate(s,v,d);return p.add(1-(p.dayOfWeek()||7),"d"),Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(s,v){var d=this._validate(s,v,this.minDay,i.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===12&&this.leapYear(d.year())?1:0)},weekDay:function(s,v,d){return(this.dayOfWeek(s,v,d)||7)<6},toJD:function(o,v,d){var p=this._validate(o,v,d,i.local.invalidMonth),o=p.year();o<0&&o++;for(var y=p.day(),_=1;_<p.month();_++)y+=this.daysPerMonth[_-1];return y+l.toJD(o+1468,3,13)},fromJD:function(s){s=Math.floor(s+.5);for(var v=Math.floor((s-(this.jdEpoch-1))/366);s>=this.toJD(v+1,1,1);)v++;for(var d=s-Math.floor(this.toJD(v,1,1)+.5)+1,p=1;d>this.daysInMonth(v,p);)d-=this.daysInMonth(v,p),p++;return this.newDate(v,p,d)}}),i.calendars.nanakshahi=a},3040:function(f,u,r){var i=r(8700),c=r(896);function a(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}a.prototype=new i.baseCalendar,c(a.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(l){return this.daysInYear(l)!==this.daysPerYear},weekOfYear:function(l,s,v){var d=this.newDate(l,s,v);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(l){var s=this._validate(l,this.minMonth,this.minDay,i.local.invalidYear);if(l=s.year(),typeof this.NEPALI_CALENDAR_DATA[l]>"u")return this.daysPerYear;for(var v=0,d=this.minMonth;d<=12;d++)v+=this.NEPALI_CALENDAR_DATA[l][d];return v},daysInMonth:function(l,s){return l.year&&(s=l.month(),l=l.year()),this._validate(l,s,this.minDay,i.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[l]>"u"?this.daysPerMonth[s-1]:this.NEPALI_CALENDAR_DATA[l][s]},weekDay:function(l,s,v){return this.dayOfWeek(l,s,v)!==6},toJD:function(l,s,v){var d=this._validate(l,s,v,i.local.invalidDate);l=d.year(),s=d.month(),v=d.day();var p=i.instance(),o=0,y=s,_=l;this._createMissingCalendarData(l);var E=l-(y>9||y===9&&v>=this.NEPALI_CALENDAR_DATA[_][0]?56:57);for(s!==9&&(o=v,y--);y!==9;)y<=0&&(y=12,_--),o+=this.NEPALI_CALENDAR_DATA[_][y],y--;return s===9?(o+=v-this.NEPALI_CALENDAR_DATA[_][0],o<0&&(o+=p.daysInYear(E))):o+=this.NEPALI_CALENDAR_DATA[_][9]-this.NEPALI_CALENDAR_DATA[_][0],p.newDate(E,1,1).add(o,"d").toJD()},fromJD:function(l){var s=i.instance(),v=s.fromJD(l),d=v.year(),p=v.dayOfYear(),o=d+56;this._createMissingCalendarData(o);for(var y=9,_=this.NEPALI_CALENDAR_DATA[o][0],E=this.NEPALI_CALENDAR_DATA[o][y]-_+1;p>E;)y++,y>12&&(y=1,o++),E+=this.NEPALI_CALENDAR_DATA[o][y];var M=this.NEPALI_CALENDAR_DATA[o][y]-(E-p);return this.newDate(o,y,M)},_createMissingCalendarData:function(l){var s=this.daysPerMonth.slice(0);s.unshift(17);for(var v=l-1;v<l+2;v++)typeof this.NEPALI_CALENDAR_DATA[v]>"u"&&(this.NEPALI_CALENDAR_DATA[v]=s)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),i.calendars.nepali=a},1104:function(f,u,r){var i=r(8700),c=r(896);function a(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}a.prototype=new i.baseCalendar,c(a.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(s){var v=this._validate(s,this.minMonth,this.minDay,i.local.invalidYear);return((v.year()-(v.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(s,v,d){var p=this.newDate(s,v,d);return p.add(-((p.dayOfWeek()+1)%7),"d"),Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(s,v){var d=this._validate(s,v,this.minDay,i.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===12&&this.leapYear(d.year())?1:0)},weekDay:function(s,v,d){return this.dayOfWeek(s,v,d)!==5},toJD:function(s,v,d){var p=this._validate(s,v,d,i.local.invalidDate);s=p.year(),v=p.month(),d=p.day();var o=s-(s>=0?474:473),y=474+l(o,2820);return d+(v<=7?(v-1)*31:(v-1)*30+6)+Math.floor((y*682-110)/2816)+(y-1)*365+Math.floor(o/2820)*1029983+this.jdEpoch-1},fromJD:function(s){s=Math.floor(s)+.5;var v=s-this.toJD(475,1,1),d=Math.floor(v/1029983),p=l(v,1029983),o=2820;if(p!==1029982){var y=Math.floor(p/366),_=l(p,366);o=Math.floor((2134*y+2816*_+2815)/1028522)+y+1}var E=o+2820*d+474;E=E<=0?E-1:E;var M=s-this.toJD(E,1,1)+1,b=M<=186?Math.ceil(M/31):Math.ceil((M-6)/30),w=s-this.toJD(E,b,1)+1;return this.newDate(E,b,w)}});function l(s,v){return s-v*Math.floor(s/v)}i.calendars.persian=a,i.calendars.jalali=a},9075:function(f,u,r){var i=r(8700),c=r(896),a=i.instance();function l(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}l.prototype=new i.baseCalendar,c(l.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(d){var v=this._validate(d,this.minMonth,this.minDay,i.local.invalidYear),d=this._t2gYear(v.year());return a.leapYear(d)},weekOfYear:function(o,v,d){var p=this._validate(o,this.minMonth,this.minDay,i.local.invalidYear),o=this._t2gYear(p.year());return a.weekOfYear(o,p.month(),p.day())},daysInMonth:function(s,v){var d=this._validate(s,v,this.minDay,i.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===2&&this.leapYear(d.year())?1:0)},weekDay:function(s,v,d){return(this.dayOfWeek(s,v,d)||7)<6},toJD:function(o,v,d){var p=this._validate(o,v,d,i.local.invalidDate),o=this._t2gYear(p.year());return a.toJD(o,p.month(),p.day())},fromJD:function(s){var v=a.fromJD(s),d=this._g2tYear(v.year());return this.newDate(d,v.month(),v.day())},_t2gYear:function(s){return s+this.yearsOffset+(s>=-this.yearsOffset&&s<=-1?1:0)},_g2tYear:function(s){return s-this.yearsOffset-(s>=1&&s<=this.yearsOffset?1:0)}}),i.calendars.taiwan=l},4592:function(f,u,r){var i=r(8700),c=r(896),a=i.instance();function l(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}l.prototype=new i.baseCalendar,c(l.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(d){var v=this._validate(d,this.minMonth,this.minDay,i.local.invalidYear),d=this._t2gYear(v.year());return a.leapYear(d)},weekOfYear:function(o,v,d){var p=this._validate(o,this.minMonth,this.minDay,i.local.invalidYear),o=this._t2gYear(p.year());return a.weekOfYear(o,p.month(),p.day())},daysInMonth:function(s,v){var d=this._validate(s,v,this.minDay,i.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===2&&this.leapYear(d.year())?1:0)},weekDay:function(s,v,d){return(this.dayOfWeek(s,v,d)||7)<6},toJD:function(o,v,d){var p=this._validate(o,v,d,i.local.invalidDate),o=this._t2gYear(p.year());return a.toJD(o,p.month(),p.day())},fromJD:function(s){var v=a.fromJD(s),d=this._g2tYear(v.year());return this.newDate(d,v.month(),v.day())},_t2gYear:function(s){return s-this.yearsOffset-(s>=1&&s<=this.yearsOffset?1:0)},_g2tYear:function(s){return s+this.yearsOffset+(s>=-this.yearsOffset&&s<=-1?1:0)}}),i.calendars.thai=l},5348:function(f,u,r){var i=r(8700),c=r(896);function a(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}a.prototype=new i.baseCalendar,c(a.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(s){var v=this._validate(s,this.minMonth,this.minDay,i.local.invalidYear);return this.daysInYear(v.year())===355},weekOfYear:function(s,v,d){var p=this.newDate(s,v,d);return p.add(-p.dayOfWeek(),"d"),Math.floor((p.dayOfYear()-1)/7)+1},daysInYear:function(s){for(var v=0,d=1;d<=12;d++)v+=this.daysInMonth(s,d);return v},daysInMonth:function(s,v){for(var d=this._validate(s,v,this.minDay,i.local.invalidMonth),p=d.toJD()-24e5+.5,o=0,y=0;y<l.length;y++){if(l[y]>p)return l[o]-l[o-1];o++}return 30},weekDay:function(s,v,d){return this.dayOfWeek(s,v,d)!==5},toJD:function(s,v,d){var p=this._validate(s,v,d,i.local.invalidDate),o=12*(p.year()-1)+p.month()-15292,y=p.day()+l[o-1]-1;return y+24e5-.5},fromJD:function(s){for(var v=s-24e5+.5,d=0,p=0;p<l.length&&!(l[p]>v);p++)d++;var o=d+15292,y=Math.floor((o-1)/12),_=y+1,E=o-12*y,M=v-l[d-1]+1;return this.newDate(_,E,M)},isValid:function(s,v,d){var p=i.baseCalendar.prototype.isValid.apply(this,arguments);return p&&(s=s.year!=null?s.year:s,p=s>=1276&&s<=1500),p},_validate:function(s,v,d,p){var o=i.baseCalendar.prototype._validate.apply(this,arguments);if(o.year<1276||o.year>1500)throw p.replace(/\{0\}/,this.local.name);return o}}),i.calendars.ummalqura=a;var l=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},8700:function(f,u,r){var i=r(896);function c(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}i(c.prototype,{instance:function(p,o){p=(p||"gregorian").toLowerCase(),o=o||"";var y=this._localCals[p+"-"+o];if(!y&&this.calendars[p]&&(y=new this.calendars[p](o),this._localCals[p+"-"+o]=y),!y)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,p);return y},newDate:function(p,o,y,_,E){return _=(p!=null&&p.year?p.calendar():typeof _=="string"?this.instance(_,E):_)||this.instance(),_.newDate(p,o,y)},substituteDigits:function(p){return function(o){return(o+"").replace(/[0-9]/g,function(y){return p[y]})}},substituteChineseDigits:function(p,o){return function(y){for(var _="",E=0;y>0;){var M=y%10;_=(M===0?"":p[M]+o[E])+_,E++,y=Math.floor(y/10)}return _.indexOf(p[1]+o[1])===0&&(_=_.substr(1)),_||p[0]}}});function a(p,o,y,_){if(this._calendar=p,this._year=o,this._month=y,this._day=_,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(d.local.invalidDate||d.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function l(p,o){return p=""+p,"000000".substring(0,o-p.length)+p}i(a.prototype,{newDate:function(p,o,y){return this._calendar.newDate(p??this,o,y)},year:function(p){return arguments.length===0?this._year:this.set(p,"y")},month:function(p){return arguments.length===0?this._month:this.set(p,"m")},day:function(p){return arguments.length===0?this._day:this.set(p,"d")},date:function(p,o,y){if(!this._calendar.isValid(p,o,y))throw(d.local.invalidDate||d.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=p,this._month=o,this._day=y,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(p,o){return this._calendar.add(this,p,o)},set:function(p,o){return this._calendar.set(this,p,o)},compareTo:function(p){if(this._calendar.name!==p._calendar.name)throw(d.local.differentCalendars||d.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,p._calendar.local.name);var o=this._year!==p._year?this._year-p._year:this._month!==p._month?this.monthOfYear()-p.monthOfYear():this._day-p._day;return o===0?0:o<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(p){return this._calendar.fromJD(p)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(p){return this._calendar.fromJSDate(p)},toString:function(){return(this.year()<0?"-":"")+l(Math.abs(this.year()),4)+"-"+l(this.month(),2)+"-"+l(this.day(),2)}});function s(){this.shortYearCutoff="+10"}i(s.prototype,{_validateLevel:0,newDate:function(p,o,y){return p==null?this.today():(p.year&&(this._validate(p,o,y,d.local.invalidDate||d.regionalOptions[""].invalidDate),y=p.day(),o=p.month(),p=p.year()),new a(this,p,o,y))},today:function(){return this.fromJSDate(new Date)},epoch:function(p){var o=this._validate(p,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return o.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(p){var o=this._validate(p,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return(o.year()<0?"-":"")+l(Math.abs(o.year()),4)},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear),12},monthOfYear:function(p,o){var y=this._validate(p,o,this.minDay,d.local.invalidMonth||d.regionalOptions[""].invalidMonth);return(y.month()+this.monthsInYear(y)-this.firstMonth)%this.monthsInYear(y)+this.minMonth},fromMonthOfYear:function(p,o){var y=(o+this.firstMonth-2*this.minMonth)%this.monthsInYear(p)+this.minMonth;return this._validate(p,y,this.minDay,d.local.invalidMonth||d.regionalOptions[""].invalidMonth),y},daysInYear:function(p){var o=this._validate(p,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return this.leapYear(o)?366:365},dayOfYear:function(p,o,y){var _=this._validate(p,o,y,d.local.invalidDate||d.regionalOptions[""].invalidDate);return _.toJD()-this.newDate(_.year(),this.fromMonthOfYear(_.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(p,o,y){var _=this._validate(p,o,y,d.local.invalidDate||d.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(_))+2)%this.daysInWeek()},extraInfo:function(p,o,y){return this._validate(p,o,y,d.local.invalidDate||d.regionalOptions[""].invalidDate),{}},add:function(p,o,y){return this._validate(p,this.minMonth,this.minDay,d.local.invalidDate||d.regionalOptions[""].invalidDate),this._correctAdd(p,this._add(p,o,y),o,y)},_add:function(p,o,y){if(this._validateLevel++,y==="d"||y==="w"){var _=p.toJD()+o*(y==="w"?this.daysInWeek():1),E=p.calendar().fromJD(_);return this._validateLevel--,[E.year(),E.month(),E.day()]}try{var M=p.year()+(y==="y"?o:0),b=p.monthOfYear()+(y==="m"?o:0),E=p.day(),w=function(T){for(;b<T.minMonth;)M--,b+=T.monthsInYear(M);for(var C=T.monthsInYear(M);b>C-1+T.minMonth;)M++,b-=C,C=T.monthsInYear(M)};y==="y"?(p.month()!==this.fromMonthOfYear(M,b)&&(b=this.newDate(M,p.month(),this.minDay).monthOfYear()),b=Math.min(b,this.monthsInYear(M)),E=Math.min(E,this.daysInMonth(M,this.fromMonthOfYear(M,b)))):y==="m"&&(w(this),E=Math.min(E,this.daysInMonth(M,this.fromMonthOfYear(M,b))));var A=[M,this.fromMonthOfYear(M,b),E];return this._validateLevel--,A}catch(R){throw this._validateLevel--,R}},_correctAdd:function(p,o,y,_){if(!this.hasYearZero&&(_==="y"||_==="m")&&(o[0]===0||p.year()>0!=o[0]>0)){var E={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[_],M=y<0?-1:1;o=this._add(p,y*E[0]+M*E[1],E[2])}return p.date(o[0],o[1],o[2])},set:function(p,o,y){this._validate(p,this.minMonth,this.minDay,d.local.invalidDate||d.regionalOptions[""].invalidDate);var _=y==="y"?o:p.year(),E=y==="m"?o:p.month(),M=y==="d"?o:p.day();return(y==="y"||y==="m")&&(M=Math.min(M,this.daysInMonth(_,E))),p.date(_,E,M)},isValid:function(p,o,y){this._validateLevel++;var _=this.hasYearZero||p!==0;if(_){var E=this.newDate(p,o,this.minDay);_=o>=this.minMonth&&o-this.minMonth<this.monthsInYear(E)&&y>=this.minDay&&y-this.minDay<this.daysInMonth(E)}return this._validateLevel--,_},toJSDate:function(p,o,y){var _=this._validate(p,o,y,d.local.invalidDate||d.regionalOptions[""].invalidDate);return d.instance().fromJD(this.toJD(_)).toJSDate()},fromJSDate:function(p){return this.fromJD(d.instance().fromJSDate(p).toJD())},_validate:function(p,o,y,_){if(p.year){if(this._validateLevel===0&&this.name!==p.calendar().name)throw(d.local.differentCalendars||d.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,p.calendar().local.name);return p}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(p,o,y))throw _.replace(/\{0\}/,this.local.name);var E=this.newDate(p,o,y);return this._validateLevel--,E}catch(M){throw this._validateLevel--,M}}});function v(p){this.local=this.regionalOptions[p]||this.regionalOptions[""]}v.prototype=new s,i(v.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var o=this._validate(y,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear),y=o.year()+(o.year()<0?1:0);return y%4===0&&(y%100!==0||y%400===0)},weekOfYear:function(p,o,y){var _=this.newDate(p,o,y);return _.add(4-(_.dayOfWeek()||7),"d"),Math.floor((_.dayOfYear()-1)/7)+1},daysInMonth:function(p,o){var y=this._validate(p,o,this.minDay,d.local.invalidMonth||d.regionalOptions[""].invalidMonth);return this.daysPerMonth[y.month()-1]+(y.month()===2&&this.leapYear(y.year())?1:0)},weekDay:function(p,o,y){return(this.dayOfWeek(p,o,y)||7)<6},toJD:function(p,o,y){var _=this._validate(p,o,y,d.local.invalidDate||d.regionalOptions[""].invalidDate);p=_.year(),o=_.month(),y=_.day(),p<0&&p++,o<3&&(o+=12,p--);var E=Math.floor(p/100),M=2-E+Math.floor(E/4);return Math.floor(365.25*(p+4716))+Math.floor(30.6001*(o+1))+y+M-1524.5},fromJD:function(p){var o=Math.floor(p+.5),y=Math.floor((o-186721625e-2)/36524.25);y=o+1+y-Math.floor(y/4);var _=y+1524,E=Math.floor((_-122.1)/365.25),M=Math.floor(365.25*E),b=Math.floor((_-M)/30.6001),w=_-M-Math.floor(b*30.6001),A=b-(b>13.5?13:1),R=E-(A>2.5?4716:4715);return R<=0&&R--,this.newDate(R,A,w)},toJSDate:function(p,o,y){var _=this._validate(p,o,y,d.local.invalidDate||d.regionalOptions[""].invalidDate),E=new Date(_.year(),_.month()-1,_.day());return E.setHours(0),E.setMinutes(0),E.setSeconds(0),E.setMilliseconds(0),E.setHours(E.getHours()>12?E.getHours()+2:0),E},fromJSDate:function(p){return this.newDate(p.getFullYear(),p.getMonth()+1,p.getDate())}});var d=f.exports=new c;d.cdate=a,d.baseCalendar=s,d.calendars.gregorian=v},5168:function(f,u,r){var i=r(896),c=r(8700);i(c.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),c.local=c.regionalOptions[""],i(c.cdate.prototype,{formatDate:function(a,l){return typeof a!="string"&&(l=a,a=""),this._calendar.formatDate(a||"",this,l)}}),i(c.baseCalendar.prototype,{UNIX_EPOCH:c.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:c.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(a,l,s){if(typeof a!="string"&&(s=l,l=a,a=""),!l)return"";if(l.calendar()!==this)throw c.local.invalidFormat||c.regionalOptions[""].invalidFormat;a=a||this.local.dateFormat,s=s||{};var v=s.dayNamesShort||this.local.dayNamesShort,d=s.dayNames||this.local.dayNames,p=s.monthNumbers||this.local.monthNumbers,o=s.monthNamesShort||this.local.monthNamesShort,y=s.monthNames||this.local.monthNames;s.calculateWeek||this.local.calculateWeek;for(var _=function(D,O){for(var N=1;L+N<a.length&&a.charAt(L+N)===D;)N++;return L+=N-1,Math.floor(N/(O||1))>1},E=function(D,O,N,V){var X=""+O;if(_(D,V))for(;X.length<N;)X="0"+X;return X},M=function(D,O,N,V){return _(D)?V[O]:N[O]},b=this,w=function(D){return typeof p=="function"?p.call(b,D,_("m")):T(E("m",D.month(),2))},A=function(D,O){return O?typeof y=="function"?y.call(b,D):y[D.month()-b.minMonth]:typeof o=="function"?o.call(b,D):o[D.month()-b.minMonth]},R=this.local.digits,T=function(D){return s.localNumbers&&R?R(D):D},C="",m=!1,L=0;L<a.length;L++)if(m)a.charAt(L)==="'"&&!_("'")?m=!1:C+=a.charAt(L);else switch(a.charAt(L)){case"d":C+=T(E("d",l.day(),2));break;case"D":C+=M("D",l.dayOfWeek(),v,d);break;case"o":C+=E("o",l.dayOfYear(),3);break;case"w":C+=E("w",l.weekOfYear(),2);break;case"m":C+=w(l);break;case"M":C+=A(l,_("M"));break;case"y":C+=_("y",2)?l.year():(l.year()%100<10?"0":"")+l.year()%100;break;case"Y":_("Y",2),C+=l.formatYear();break;case"J":C+=l.toJD();break;case"@":C+=(l.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":C+=(l.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":_("'")?C+="'":m=!0;break;default:C+=a.charAt(L)}return C},parseDate:function(a,l,s){if(l==null)throw c.local.invalidArguments||c.regionalOptions[""].invalidArguments;if(l=typeof l=="object"?l.toString():l+"",l==="")return null;a=a||this.local.dateFormat,s=s||{};var v=s.shortYearCutoff||this.shortYearCutoff;v=typeof v!="string"?v:this.today().year()%100+parseInt(v,10);for(var d=s.dayNamesShort||this.local.dayNamesShort,p=s.dayNames||this.local.dayNames,o=s.parseMonth||this.local.parseMonth,y=s.monthNumbers||this.local.monthNumbers,_=s.monthNamesShort||this.local.monthNamesShort,E=s.monthNames||this.local.monthNames,M=-1,b=-1,w=-1,A=-1,R=-1,T=!1,C=!1,m=function(ne,oe){for(var Y=1;Z+Y<a.length&&a.charAt(Z+Y)===ne;)Y++;return Z+=Y-1,Math.floor(Y/(oe||1))>1},L=function(ne,oe){var Y=m(ne,oe),G=[2,3,Y?4:2,Y?4:2,10,11,20]["oyYJ@!".indexOf(ne)+1],K=new RegExp("^-?\\d{1,"+G+"}"),ee=l.substring(k).match(K);if(!ee)throw(c.local.missingNumberAt||c.regionalOptions[""].missingNumberAt).replace(/\{0\}/,k);return k+=ee[0].length,parseInt(ee[0],10)},D=this,O=function(){if(typeof y=="function"){m("m");var ne=y.call(D,l.substring(k));return k+=ne.length,ne}return L("m")},N=function(ne,oe,Y,G){for(var K=m(ne,G)?Y:oe,ee=0;ee<K.length;ee++)if(l.substr(k,K[ee].length).toLowerCase()===K[ee].toLowerCase())return k+=K[ee].length,ee+D.minMonth;throw(c.local.unknownNameAt||c.regionalOptions[""].unknownNameAt).replace(/\{0\}/,k)},V=function(){if(typeof E=="function"){var ne=m("M")?E.call(D,l.substring(k)):_.call(D,l.substring(k));return k+=ne.length,ne}return N("M",_,E)},X=function(){if(l.charAt(k)!==a.charAt(Z))throw(c.local.unexpectedLiteralAt||c.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,k);k++},k=0,Z=0;Z<a.length;Z++)if(C)a.charAt(Z)==="'"&&!m("'")?C=!1:X();else switch(a.charAt(Z)){case"d":A=L("d");break;case"D":N("D",d,p);break;case"o":R=L("o");break;case"w":L("w");break;case"m":w=O();break;case"M":w=V();break;case"y":var B=Z;T=!m("y",2),Z=B,b=L("y",2);break;case"Y":b=L("Y",2);break;case"J":M=L("J")+.5,l.charAt(k)==="."&&(k++,L("J"));break;case"@":M=L("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":M=L("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":k=l.length;break;case"'":m("'")?X():C=!0;break;default:X()}if(k<l.length)throw c.local.unexpectedText||c.regionalOptions[""].unexpectedText;if(b===-1?b=this.today().year():b<100&&T&&(b+=v===-1?1900:this.today().year()-this.today().year()%100-(b<=v?0:100)),typeof w=="string"&&(w=o.call(this,b,w)),R>-1){w=1,A=R;for(var J=this.daysInMonth(b,w);A>J;J=this.daysInMonth(b,w))w++,A-=J}return M>-1?this.fromJD(M):this.newDate(b,w,A)},determineDate:function(a,l,s,v,d){s&&typeof s!="object"&&(d=v,v=s,s=null),typeof v!="string"&&(d=v,v="");var p=this,o=function(y){try{return p.parseDate(v,y,d)}catch{}y=y.toLowerCase();for(var _=(y.match(/^c/)&&s?s.newDate():null)||p.today(),E=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,M=E.exec(y);M;)_.add(parseInt(M[1],10),M[2]||"d"),M=E.exec(y);return _};return l=l?l.newDate():null,a=a==null?l:typeof a=="string"?o(a):typeof a=="number"?isNaN(a)||a===1/0||a===-1/0?l:p.today().add(a,"d"):p.newDate(a),a}})}},h={};function x(f){var u=h[f];if(u!==void 0)return u.exports;var r=h[f]={exports:{}};return n[f].call(r.exports,r,r.exports,x),r.exports}(function(){x.d=function(f,u){for(var r in u)x.o(u,r)&&!x.o(f,r)&&Object.defineProperty(f,r,{enumerable:!0,get:u[r]})}})(),function(){x.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){x.o=function(f,u){return Object.prototype.hasOwnProperty.call(f,u)}}(),function(){x.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})}}();var S=x(3472);return S}()})})(Wl);var Of=Wl.exports;const Vl=il(Of),zf=new _s({headers:{accept:"application/json;version=2"}}),Uf=new sl(zf),Bf=({queryParams:e,...t})=>{const[n,h]=Gn.useState(null),[x,S]=Gn.useState(null),f=Gn.useRef(null);if(Gn.useEffect(()=>{(async()=>{const r=window.performance.now();try{Uf.getCwmsDataTimeseriesRaw(e).then(async i=>{let c=await i.raw.json();return c.url=i.raw.url,c}).then(i=>{i.query_str=i.url,h(i),S(((window.performance.now()-r)/1e3).toFixed(2))}).catch(i=>{console.error(i),h({error:i.message})})}catch(i){console.error("Failed to fetch: ",i),h({error:i.message})}})()},[e,S]),Gn.useEffect(()=>{if(n&&n.values){const u=[{x:n.values.map(i=>new Date(i[0])),y:n.values.map(i=>i[1]),type:"scatter",mode:"lines",marker:{color:"blue"}}],r={title:(e==null?void 0:e.name)||"Timeseries Plot",xaxis:{title:"Date"},yaxis:{title:e==null?void 0:e.name.split(".")[1]}};Vl.newPlot(f.current,u,r)}},[n,e]),n){if(n.error)return un.jsxs("div",{children:["Error: ",n.error]});if(n.values&&n.values.length===0)return un.jsxs("div",{children:["No data found for the query ",n.url]})}else return un.jsx("div",{children:"Loading..."});return un.jsx("div",{ref:f,title:`Loaded in ${x} seconds`,style:{width:"100%",height:"500px"},...t})};var Xl={exports:{}};(function(e,t){(function(n,h){e.exports=h()})(zl,function(){var n=1e3,h=6e4,x=36e5,S="millisecond",f="second",u="minute",r="hour",i="day",c="week",a="month",l="quarter",s="year",v="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,o=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(D){var O=["th","st","nd","rd"],N=D%100;return"["+D+(O[(N-20)%10]||O[N]||O[0])+"]"}},_=function(D,O,N){var V=String(D);return!V||V.length>=O?D:""+Array(O+1-V.length).join(N)+D},E={s:_,z:function(D){var O=-D.utcOffset(),N=Math.abs(O),V=Math.floor(N/60),X=N%60;return(O<=0?"+":"-")+_(V,2,"0")+":"+_(X,2,"0")},m:function D(O,N){if(O.date()<N.date())return-D(N,O);var V=12*(N.year()-O.year())+(N.month()-O.month()),X=O.clone().add(V,a),k=N-X<0,Z=O.clone().add(V+(k?-1:1),a);return+(-(V+(N-X)/(k?X-Z:Z-X))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:a,y:s,w:c,d:i,D:v,h:r,m:u,s:f,ms:S,Q:l}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},M="en",b={};b[M]=y;var w="$isDayjsObject",A=function(D){return D instanceof m||!(!D||!D[w])},R=function D(O,N,V){var X;if(!O)return M;if(typeof O=="string"){var k=O.toLowerCase();b[k]&&(X=k),N&&(b[k]=N,X=k);var Z=O.split("-");if(!X&&Z.length>1)return D(Z[0])}else{var B=O.name;b[B]=O,X=B}return!V&&X&&(M=X),X||!V&&M},T=function(D,O){if(A(D))return D.clone();var N=typeof O=="object"?O:{};return N.date=D,N.args=arguments,new m(N)},C=E;C.l=R,C.i=A,C.w=function(D,O){return T(D,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var m=function(){function D(N){this.$L=R(N.locale,null,!0),this.parse(N),this.$x=this.$x||N.x||{},this[w]=!0}var O=D.prototype;return O.parse=function(N){this.$d=function(V){var X=V.date,k=V.utc;if(X===null)return new Date(NaN);if(C.u(X))return new Date;if(X instanceof Date)return new Date(X);if(typeof X=="string"&&!/Z$/i.test(X)){var Z=X.match(p);if(Z){var B=Z[2]-1||0,J=(Z[7]||"0").substring(0,3);return k?new Date(Date.UTC(Z[1],B,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,J)):new Date(Z[1],B,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,J)}}return new Date(X)}(N),this.init()},O.init=function(){var N=this.$d;this.$y=N.getFullYear(),this.$M=N.getMonth(),this.$D=N.getDate(),this.$W=N.getDay(),this.$H=N.getHours(),this.$m=N.getMinutes(),this.$s=N.getSeconds(),this.$ms=N.getMilliseconds()},O.$utils=function(){return C},O.isValid=function(){return this.$d.toString()!==d},O.isSame=function(N,V){var X=T(N);return this.startOf(V)<=X&&X<=this.endOf(V)},O.isAfter=function(N,V){return T(N)<this.startOf(V)},O.isBefore=function(N,V){return this.endOf(V)<T(N)},O.$g=function(N,V,X){return C.u(N)?this[V]:this.set(X,N)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(N,V){var X=this,k=!!C.u(V)||V,Z=C.p(N),B=function(ie,re){var se=C.w(X.$u?Date.UTC(X.$y,re,ie):new Date(X.$y,re,ie),X);return k?se:se.endOf(i)},J=function(ie,re){return C.w(X.toDate()[ie].apply(X.toDate("s"),(k?[0,0,0,0]:[23,59,59,999]).slice(re)),X)},ne=this.$W,oe=this.$M,Y=this.$D,G="set"+(this.$u?"UTC":"");switch(Z){case s:return k?B(1,0):B(31,11);case a:return k?B(1,oe):B(0,oe+1);case c:var K=this.$locale().weekStart||0,ee=(ne<K?ne+7:ne)-K;return B(k?Y-ee:Y+(6-ee),oe);case i:case v:return J(G+"Hours",0);case r:return J(G+"Minutes",1);case u:return J(G+"Seconds",2);case f:return J(G+"Milliseconds",3);default:return this.clone()}},O.endOf=function(N){return this.startOf(N,!1)},O.$set=function(N,V){var X,k=C.p(N),Z="set"+(this.$u?"UTC":""),B=(X={},X[i]=Z+"Date",X[v]=Z+"Date",X[a]=Z+"Month",X[s]=Z+"FullYear",X[r]=Z+"Hours",X[u]=Z+"Minutes",X[f]=Z+"Seconds",X[S]=Z+"Milliseconds",X)[k],J=k===i?this.$D+(V-this.$W):V;if(k===a||k===s){var ne=this.clone().set(v,1);ne.$d[B](J),ne.init(),this.$d=ne.set(v,Math.min(this.$D,ne.daysInMonth())).$d}else B&&this.$d[B](J);return this.init(),this},O.set=function(N,V){return this.clone().$set(N,V)},O.get=function(N){return this[C.p(N)]()},O.add=function(N,V){var X,k=this;N=Number(N);var Z=C.p(V),B=function(oe){var Y=T(k);return C.w(Y.date(Y.date()+Math.round(oe*N)),k)};if(Z===a)return this.set(a,this.$M+N);if(Z===s)return this.set(s,this.$y+N);if(Z===i)return B(1);if(Z===c)return B(7);var J=(X={},X[u]=h,X[r]=x,X[f]=n,X)[Z]||1,ne=this.$d.getTime()+N*J;return C.w(ne,this)},O.subtract=function(N,V){return this.add(-1*N,V)},O.format=function(N){var V=this,X=this.$locale();if(!this.isValid())return X.invalidDate||d;var k=N||"YYYY-MM-DDTHH:mm:ssZ",Z=C.z(this),B=this.$H,J=this.$m,ne=this.$M,oe=X.weekdays,Y=X.months,G=X.meridiem,K=function(re,se,ge,xe){return re&&(re[se]||re(V,k))||ge[se].slice(0,xe)},ee=function(re){return C.s(B%12||12,re,"0")},ie=G||function(re,se,ge){var xe=re<12?"AM":"PM";return ge?xe.toLowerCase():xe};return k.replace(o,function(re,se){return se||function(ge){switch(ge){case"YY":return String(V.$y).slice(-2);case"YYYY":return C.s(V.$y,4,"0");case"M":return ne+1;case"MM":return C.s(ne+1,2,"0");case"MMM":return K(X.monthsShort,ne,Y,3);case"MMMM":return K(Y,ne);case"D":return V.$D;case"DD":return C.s(V.$D,2,"0");case"d":return String(V.$W);case"dd":return K(X.weekdaysMin,V.$W,oe,2);case"ddd":return K(X.weekdaysShort,V.$W,oe,3);case"dddd":return oe[V.$W];case"H":return String(B);case"HH":return C.s(B,2,"0");case"h":return ee(1);case"hh":return ee(2);case"a":return ie(B,J,!0);case"A":return ie(B,J,!1);case"m":return String(J);case"mm":return C.s(J,2,"0");case"s":return String(V.$s);case"ss":return C.s(V.$s,2,"0");case"SSS":return C.s(V.$ms,3,"0");case"Z":return Z}return null}(re)||Z.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(N,V,X){var k,Z=this,B=C.p(V),J=T(N),ne=(J.utcOffset()-this.utcOffset())*h,oe=this-J,Y=function(){return C.m(Z,J)};switch(B){case s:k=Y()/12;break;case a:k=Y();break;case l:k=Y()/3;break;case c:k=(oe-ne)/6048e5;break;case i:k=(oe-ne)/864e5;break;case r:k=oe/x;break;case u:k=oe/h;break;case f:k=oe/n;break;default:k=oe}return X?k:C.a(k)},O.daysInMonth=function(){return this.endOf(a).$D},O.$locale=function(){return b[this.$L]},O.locale=function(N,V){if(!N)return this.$L;var X=this.clone(),k=R(N,V,!0);return k&&(X.$L=k),X},O.clone=function(){return C.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},D}(),L=m.prototype;return T.prototype=L,[["$ms",S],["$s",f],["$m",u],["$H",r],["$W",i],["$M",a],["$y",s],["$D",v]].forEach(function(D){L[D[1]]=function(O){return this.$g(O,D[0],D[1])}}),T.extend=function(D,O){return D.$i||(D(O,m,T),D.$i=!0),T},T.locale=R,T.isDayjs=A,T.unix=function(D){return T(1e3*D)},T.en=b[M],T.Ls=b,T.p={},T})})(Xl);var Gf=Xl.exports;const Hf=il(Gf);function Yf(e,t){return Number(e).toFixed(t)}function Wf({h1:e,subTitle:t,heading:n,content:h,order:x="desc",precision:S=4,dateFormat:f="MM-DD-YYYY HH:mm",...u}){const r=Gn.useMemo(()=>[...h].sort((i,c)=>i[1]<c[1]?x==="asc"?-1:1:i[1]>c[1]?x==="asc"?1:-1:0),[h,x]);return un.jsxs("div",{className:"gw-px-4 gw-sm:px-6 gw-lg:px-8",children:[un.jsx("div",{className:"gw-sm:flex gw-sm:items-center",children:un.jsxs("div",{className:"gw-sm:flex-auto",children:[e&&un.jsx("h1",{className:"gw-text-base gw-font-semibold gw-leading-6 gw-text-gray-900",children:e}),t&&un.jsx("p",{className:"gw-mt-2 gw-text-sm gw-text-gray-700",children:t})]})}),un.jsx("div",{className:"gw-mt-8 gw-flow-root",children:un.jsx("div",{className:"gw--mx-4 gw--my-2 gw-overflow-x-auto gw-sm:-mx-6 gw-lg:-mx-8",children:un.jsx("div",{className:"gw-inline-block gw-min-w-full gw-py-2 gw-align-middle gw-sm:px-6 gw-lg:px-8",children:un.jsxs("table",{className:"gw-min-w-full gw-divide-y gw-divide-gray-300",children:[un.jsx("thead",{children:un.jsx("tr",{children:n.map(i=>un.jsx("th",{scope:"col",className:"gw-py-3.5 gw-pl-4 gw-pr-3 gw-text-left gw-text-sm gw-font-semibold gw-text-gray-900 gw-sm:pl-3",children:i}))})}),un.jsx("tbody",{className:"gw-bg-white",children:r.map(i=>un.jsxs("tr",{className:"gw-even:bg-gray-50",children:[un.jsx("td",{className:"gw-whitespace-nowrap gw-py-4 gw-pl-4 gw-pr-3 gw-text-sm gw-font-medium gw-text-gray-900 gw-sm:pl-3",children:Hf(i[0]).format(f)}),un.jsx("td",{className:"gw-whitespace-nowrap gw-px-3 gw-py-4 gw-text-sm gw-text-gray-500",children:Yf(i[1],S)}),un.jsx("td",{className:"gw-whitespace-nowrap gw-px-3 gw-py-4 gw-text-sm gw-text-gray-500",children:i[2]})]},i[0]))})]})})})})]})}const Vf=new _s({headers:{accept:"application/json;version=2"}}),Xf=new sl(Vf),Zf=async({queryKey:e})=>{const[,t]=e,n=await Xf.getCwmsDataTimeseriesRaw(t),h=await n.raw.json();return h.url=n.raw.url,h},Kf=({queryParams:e,precision:t,...n})=>{const[h,x]=Gn.useState(null),{data:S,error:f,isLoading:u,isError:r}=Ol.useQuery({queryKey:["timeseriesData",e],queryFn:Zf,onSuccess:()=>{x(((window.performance.now()-startTime)/1e3).toFixed(2))}});return Gn.useEffect(()=>{window.performance.now(),x(null)},[e]),u?un.jsx("div",{children:"Loading..."}):r?un.jsxs("div",{children:["Error: ",f.message]}):(S==null?void 0:S.values.length)===0?un.jsxs("div",{children:["No data found for the query ",S==null?void 0:S.url]}):un.jsx(un.Fragment,{children:un.jsx(Wf,{h1:"Time Series Data",subTitle:`Loaded in ${h} seconds`,heading:["Date-Time","Value","Quality Code"],precision:t,content:S==null?void 0:S.values})})};var tt={};tt.ASSUME_TOUCH=!1,tt.DEFAULT_MAX_ZOOM=42,tt.DEFAULT_MIN_ZOOM=0,tt.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD=.5,tt.DEFAULT_TILE_SIZE=256,tt.DEFAULT_WMS_VERSION="1.3.0",tt.ENABLE_CANVAS=!0,tt.ENABLE_PROJ4JS=!0,tt.ENABLE_RASTER_REPROJECTION=!0,tt.ENABLE_WEBGL=!0,tt.DEBUG_WEBGL=!0,tt.INITIAL_ATLAS_SIZE=256,tt.MAX_ATLAS_SIZE=-1,tt.MOUSEWHEELZOOM_MAXDELTA=1,tt.OVERVIEWMAP_MAX_RATIO=.75,tt.OVERVIEWMAP_MIN_RATIO=.1,tt.RASTER_REPROJECTION_MAX_SOURCE_TILES=100,tt.RASTER_REPROJECTION_MAX_SUBDIVISION=10,tt.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH=.25,tt.SIMPLIFY_TOLERANCE=.5,tt.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK=1024,tt.VERSION="v4.6.5",tt.WEBGL_MAX_TEXTURE_SIZE,tt.WEBGL_EXTENSIONS,tt.inherits=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},tt.nullFunction=function(){},tt.getUid=function(e){return e.ol_uid||(e.ol_uid=++tt.uidCounter_)},tt.uidCounter_=0;var Oa={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"},Zr={};Zr.assign=typeof Object.assign=="function"?Object.assign:function(e,t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),h=1,x=arguments.length;h<x;++h){var S=arguments[h];if(S!=null)for(var f in S)S.hasOwnProperty(f)&&(n[f]=S[f])}return n},Zr.clear=function(e){for(var t in e)delete e[t]},Zr.getValues=function(e){var t=[];for(var n in e)t.push(e[n]);return t},Zr.isEmpty=function(e){var t;for(t in e)return!1;return!t};var Jt={};Jt.bindListener_=function(e){var t=function(n){var h=e.listener,x=e.bindTo||e.target;return e.callOnce&&Jt.unlistenByKey(e),h.call(x,n)};return e.boundListener=t,t},Jt.findListener_=function(e,t,n,h){for(var x,S=0,f=e.length;S<f;++S)if(x=e[S],x.listener===t&&x.bindTo===n)return h&&(x.deleteIndex=S),x},Jt.getListeners=function(e,t){var n=e.ol_lm;return n?n[t]:void 0},Jt.getListenerMap_=function(e){var t=e.ol_lm;return t||(t=e.ol_lm={}),t},Jt.removeListeners_=function(e,t){var n=Jt.getListeners(e,t);if(n){for(var h=0,x=n.length;h<x;++h)e.removeEventListener(t,n[h].boundListener),Zr.clear(n[h]);n.length=0;var S=e.ol_lm;S&&(delete S[t],Object.keys(S).length===0&&delete e.ol_lm)}},Jt.listen=function(e,t,n,h,x){var S=Jt.getListenerMap_(e),f=S[t];f||(f=S[t]=[]);var u=Jt.findListener_(f,n,h,!1);return u?x||(u.callOnce=!1):(u={bindTo:h,callOnce:!!x,listener:n,target:e,type:t},e.addEventListener(t,Jt.bindListener_(u)),f.push(u)),u},Jt.listenOnce=function(e,t,n,h){return Jt.listen(e,t,n,h,!0)},Jt.unlisten=function(e,t,n,h){var x=Jt.getListeners(e,t);if(x){var S=Jt.findListener_(x,n,h,!0);S&&Jt.unlistenByKey(S)}},Jt.unlistenByKey=function(e){if(e&&e.target){e.target.removeEventListener(e.type,e.boundListener);var t=Jt.getListeners(e.target,e.type);if(t){var n="deleteIndex"in e?e.deleteIndex:t.indexOf(e);n!==-1&&t.splice(n,1),t.length===0&&Jt.removeListeners_(e.target,e.type)}Zr.clear(e)}},Jt.unlistenAll=function(e){var t=Jt.getListenerMap_(e);for(var n in t)Jt.removeListeners_(e,n)};var kr={CHANGE:"change",CLEAR:"clear",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"},ss={PROPERTYCHANGE:"propertychange"},ja=function(){};ja.prototype.disposed_=!1,ja.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},ja.prototype.disposeInternal=tt.nullFunction;var oi=function(e){this.propagationStopped,this.type=e,this.target=null};oi.prototype.preventDefault=oi.prototype.stopPropagation=function(){this.propagationStopped=!0},oi.stopPropagation=function(e){e.stopPropagation()},oi.preventDefault=function(e){e.preventDefault()};var $n=function(){ja.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}};tt.inherits($n,ja),$n.prototype.addEventListener=function(e,t){var n=this.listeners_[e];n||(n=this.listeners_[e]=[]),n.indexOf(t)===-1&&n.push(t)},$n.prototype.dispatchEvent=function(e){var t=typeof e=="string"?new oi(e):e,n=t.type;t.target=this;var h=this.listeners_[n],x;if(h){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(var S=0,f=h.length;S<f;++S)if(h[S].call(this,t)===!1||t.propagationStopped){x=!1;break}if(--this.dispatching_[n],this.dispatching_[n]===0){var u=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];u--;)this.removeEventListener(n,tt.nullFunction);delete this.dispatching_[n]}return x}},$n.prototype.disposeInternal=function(){Jt.unlistenAll(this)},$n.prototype.getListeners=function(e){return this.listeners_[e]},$n.prototype.hasListener=function(e){return e?e in this.listeners_:Object.keys(this.listeners_).length>0},$n.prototype.removeEventListener=function(e,t){var n=this.listeners_[e];if(n){var h=n.indexOf(t);e in this.pendingRemovals_?(n[h]=tt.nullFunction,++this.pendingRemovals_[e]):(n.splice(h,1),n.length===0&&delete this.listeners_[e])}};var da=function(){$n.call(this),this.revision_=0};tt.inherits(da,$n),da.unByKey=function(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;++t)Jt.unlistenByKey(e[t]);else Jt.unlistenByKey(e)},da.prototype.changed=function(){++this.revision_,this.dispatchEvent(kr.CHANGE)},da.prototype.dispatchEvent,da.prototype.getRevision=function(){return this.revision_},da.prototype.on=function(e,t,n){if(Array.isArray(e)){for(var h=e.length,x=new Array(h),S=0;S<h;++S)x[S]=Jt.listen(this,e[S],t,n);return x}else return Jt.listen(this,e,t,n)},da.prototype.once=function(e,t,n){if(Array.isArray(e)){for(var h=e.length,x=new Array(h),S=0;S<h;++S)x[S]=Jt.listenOnce(this,e[S],t,n);return x}else return Jt.listenOnce(this,e,t,n)},da.prototype.un=function(e,t,n){if(Array.isArray(e)){for(var h=0,x=e.length;h<x;++h)Jt.unlisten(this,e[h],t,n);return}else Jt.unlisten(this,e,t,n)};var Or=function(e){da.call(this),tt.getUid(this),this.values_={},e!==void 0&&this.setProperties(e)};tt.inherits(Or,da),Or.changeEventTypeCache_={},Or.getChangeEventType=function(e){return Or.changeEventTypeCache_.hasOwnProperty(e)?Or.changeEventTypeCache_[e]:Or.changeEventTypeCache_[e]="change:"+e},Or.prototype.get=function(e){var t;return this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t},Or.prototype.getKeys=function(){return Object.keys(this.values_)},Or.prototype.getProperties=function(){return Zr.assign({},this.values_)},Or.prototype.notify=function(e,t){var n;n=Or.getChangeEventType(e),this.dispatchEvent(new Or.Event(n,e,t)),n=ss.PROPERTYCHANGE,this.dispatchEvent(new Or.Event(n,e,t))},Or.prototype.set=function(e,t,n){if(n)this.values_[e]=t;else{var h=this.values_[e];this.values_[e]=t,h!==t&&this.notify(e,h)}},Or.prototype.setProperties=function(e,t){var n;for(n in e)this.set(n,e[n],t)},Or.prototype.unset=function(e,t){if(e in this.values_){var n=this.values_[e];delete this.values_[e],t||this.notify(e,n)}},Or.Event=function(e,t,n){oi.call(this,e),this.key=t,this.oldValue=n},tt.inherits(Or.Event,oi);var si={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"},ll=function(e){var t=tt.VERSION?tt.VERSION.split("-")[0]:"latest";this.message="Assertion failed. See https://openlayers.org/en/"+t+"/doc/errors/#"+e+" for details.",this.code=e,this.name="AssertionError"};tt.inherits(ll,Error);var _n={};_n.assert=function(e,t){if(!e)throw new ll(t)};var wr={};wr.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},wr.cosh=function(){var e;return"cosh"in Math?e=Math.cosh:e=function(t){var n=Math.exp(t);return(n+1/n)/2},e}(),wr.roundUpToPowerOfTwo=function(e){return _n.assert(0<e,29),Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},wr.squaredSegmentDistance=function(e,t,n,h,x,S){var f=x-n,u=S-h;if(f!==0||u!==0){var r=((e-n)*f+(t-h)*u)/(f*f+u*u);r>1?(n=x,h=S):r>0&&(n+=f*r,h+=u*r)}return wr.squaredDistance(e,t,n,h)},wr.squaredDistance=function(e,t,n,h){var x=n-e,S=h-t;return x*x+S*S},wr.solveLinearSystem=function(e){for(var t=e.length,n=0;n<t;n++){for(var h=n,x=Math.abs(e[n][n]),S=n+1;S<t;S++){var f=Math.abs(e[S][n]);f>x&&(x=f,h=S)}if(x===0)return null;var u=e[h];e[h]=e[n],e[n]=u;for(var r=n+1;r<t;r++)for(var i=-e[r][n]/e[n][n],c=n;c<t+1;c++)n==c?e[r][c]=0:e[r][c]+=i*e[n][c]}for(var a=new Array(t),l=t-1;l>=0;l--){a[l]=e[l][t]/e[l][l];for(var s=l-1;s>=0;s--)e[s][t]-=e[s][l]*a[l]}return a},wr.toDegrees=function(e){return e*180/Math.PI},wr.toRadians=function(e){return e*Math.PI/180},wr.modulo=function(e,t){var n=e%t;return n*t<0?n+t:n},wr.lerp=function(e,t,n){return e+n*(t-e)};var Kn=function(e){Or.call(this);var t=Zr.assign({},e);t[si.OPACITY]=e.opacity!==void 0?e.opacity:1,t[si.VISIBLE]=e.visible!==void 0?e.visible:!0,t[si.Z_INDEX]=e.zIndex!==void 0?e.zIndex:0,t[si.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[si.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,this.setProperties(t),this.state_={layer:this,managed:!0},this.type};tt.inherits(Kn,Or),Kn.prototype.getType=function(){return this.type},Kn.prototype.getLayerState=function(){return this.state_.opacity=wr.clamp(this.getOpacity(),0,1),this.state_.sourceState=this.getSourceState(),this.state_.visible=this.getVisible(),this.state_.extent=this.getExtent(),this.state_.zIndex=this.getZIndex(),this.state_.maxResolution=this.getMaxResolution(),this.state_.minResolution=Math.max(this.getMinResolution(),0),this.state_},Kn.prototype.getLayersArray=function(e){},Kn.prototype.getLayerStatesArray=function(e){},Kn.prototype.getExtent=function(){return this.get(si.EXTENT)},Kn.prototype.getMaxResolution=function(){return this.get(si.MAX_RESOLUTION)},Kn.prototype.getMinResolution=function(){return this.get(si.MIN_RESOLUTION)},Kn.prototype.getOpacity=function(){return this.get(si.OPACITY)},Kn.prototype.getSourceState=function(){},Kn.prototype.getVisible=function(){return this.get(si.VISIBLE)},Kn.prototype.getZIndex=function(){return this.get(si.Z_INDEX)},Kn.prototype.setExtent=function(e){this.set(si.EXTENT,e)},Kn.prototype.setMaxResolution=function(e){this.set(si.MAX_RESOLUTION,e)},Kn.prototype.setMinResolution=function(e){this.set(si.MIN_RESOLUTION,e)},Kn.prototype.setOpacity=function(e){this.set(si.OPACITY,e)},Kn.prototype.setVisible=function(e){this.set(si.VISIBLE,e)},Kn.prototype.setZIndex=function(e){this.set(si.Z_INDEX,e)};var wa={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"},Yo={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},li=function(e){var t=Zr.assign({},e);delete t.source,Kn.call(this,t),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),Jt.listen(this,Or.getChangeEventType(si.SOURCE),this.handleSourcePropertyChange_,this);var n=e.source?e.source:null;this.setSource(n)};tt.inherits(li,Kn),li.visibleAtResolution=function(e,t){return e.visible&&t>=e.minResolution&&t<e.maxResolution},li.prototype.getLayersArray=function(e){var t=e||[];return t.push(this),t},li.prototype.getLayerStatesArray=function(e){var t=e||[];return t.push(this.getLayerState()),t},li.prototype.getSource=function(){var e=this.get(si.SOURCE);return e||null},li.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():Yo.UNDEFINED},li.prototype.handleSourceChange_=function(){this.changed()},li.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Jt.unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=Jt.listen(e,kr.CHANGE,this.handleSourceChange_,this)),this.changed()},li.prototype.setMap=function(e){this.mapPrecomposeKey_&&(Jt.unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Jt.unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Jt.listen(e,wa.PRECOMPOSE,function(t){var n=this.getLayerState();n.managed=!1,n.zIndex=1/0,t.frameState.layerStatesArray.push(n),t.frameState.layerStates[tt.getUid(this)]=n},this),this.mapRenderKey_=Jt.listen(this,kr.CHANGE,e.render,e),this.changed())},li.prototype.setSource=function(e){this.set(si.SOURCE,e)};var bs={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"},Co=function(e){var t=e||{},n=Zr.assign({},t);delete n.preload,delete n.useInterimTilesOnError,li.call(this,n),this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0),this.type=Oa.TILE};tt.inherits(Co,li),Co.prototype.getPreload=function(){return this.get(bs.PRELOAD)},Co.prototype.getSource,Co.prototype.setPreload=function(e){this.set(bs.PRELOAD,e)},Co.prototype.getUseInterimTilesOnError=function(){return this.get(bs.USE_INTERIM_TILES_ON_ERROR)},Co.prototype.setUseInterimTilesOnError=function(e){this.set(bs.USE_INTERIM_TILES_ON_ERROR,e)};var pa={ADD:"add",REMOVE:"remove"},Kr=function(e,t){Or.call(this);var n=t||{};if(this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(var h=0,x=this.array_.length;h<x;++h)this.assertUnique_(this.array_[h],h);this.updateLength_()};tt.inherits(Kr,Or),Kr.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},Kr.prototype.extend=function(e){var t,n;for(t=0,n=e.length;t<n;++t)this.push(e[t]);return this},Kr.prototype.forEach=function(e,t){for(var n=t?e.bind(t):e,h=this.array_,x=0,S=h.length;x<S;++x)n(h[x],x,h)},Kr.prototype.getArray=function(){return this.array_},Kr.prototype.item=function(e){return this.array_[e]},Kr.prototype.getLength=function(){return this.get(Kr.Property_.LENGTH)},Kr.prototype.insertAt=function(e,t){this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Kr.Event(pa.ADD,t))},Kr.prototype.pop=function(){return this.removeAt(this.getLength()-1)},Kr.prototype.push=function(e){this.unique_&&this.assertUnique_(e);var t=this.getLength();return this.insertAt(t,e),this.getLength()},Kr.prototype.remove=function(e){var t=this.array_,n,h;for(n=0,h=t.length;n<h;++n)if(t[n]===e)return this.removeAt(n)},Kr.prototype.removeAt=function(e){var t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Kr.Event(pa.REMOVE,t)),t},Kr.prototype.setAt=function(e,t){var n=this.getLength();if(e<n){this.unique_&&this.assertUnique_(t,e);var h=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Kr.Event(pa.REMOVE,h)),this.dispatchEvent(new Kr.Event(pa.ADD,t))}else{var x;for(x=n;x<e;++x)this.insertAt(x,void 0);this.insertAt(e,t)}},Kr.prototype.updateLength_=function(){this.set(Kr.Property_.LENGTH,this.array_.length)},Kr.prototype.assertUnique_=function(e,t){for(var n=0,h=this.array_.length;n<h;++n)if(this.array_[n]===e&&n!==t)throw new ll(58)},Kr.Property_={LENGTH:"length"},Kr.Event=function(e,t){oi.call(this,e),this.element=t},tt.inherits(Kr.Event,oi);var vo=function(e,t,n){oi.call(this,e),this.map=t,this.frameState=n!==void 0?n:null};tt.inherits(vo,oi);var Wo=function(e,t,n,h,x){vo.call(this,e,t,x),this.originalEvent=n,this.pixel=t.getEventPixel(n),this.coordinate=t.getCoordinateFromPixel(this.pixel),this.dragging=h!==void 0?h:!1};tt.inherits(Wo,vo),Wo.prototype.preventDefault=function(){vo.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},Wo.prototype.stopPropagation=function(){vo.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()};var Bt={};Bt.ONE=1,Bt.SRC_ALPHA=770,Bt.COLOR_ATTACHMENT0=36064,Bt.COLOR_BUFFER_BIT=16384,Bt.TRIANGLES=4,Bt.TRIANGLE_STRIP=5,Bt.ONE_MINUS_SRC_ALPHA=771,Bt.ARRAY_BUFFER=34962,Bt.ELEMENT_ARRAY_BUFFER=34963,Bt.STREAM_DRAW=35040,Bt.STATIC_DRAW=35044,Bt.DYNAMIC_DRAW=35048,Bt.CULL_FACE=2884,Bt.BLEND=3042,Bt.STENCIL_TEST=2960,Bt.DEPTH_TEST=2929,Bt.SCISSOR_TEST=3089,Bt.UNSIGNED_BYTE=5121,Bt.UNSIGNED_SHORT=5123,Bt.UNSIGNED_INT=5125,Bt.FLOAT=5126,Bt.RGBA=6408,Bt.FRAGMENT_SHADER=35632,Bt.VERTEX_SHADER=35633,Bt.LINK_STATUS=35714,Bt.LINEAR=9729,Bt.TEXTURE_MAG_FILTER=10240,Bt.TEXTURE_MIN_FILTER=10241,Bt.TEXTURE_WRAP_S=10242,Bt.TEXTURE_WRAP_T=10243,Bt.TEXTURE_2D=3553,Bt.TEXTURE0=33984,Bt.CLAMP_TO_EDGE=33071,Bt.COMPILE_STATUS=35713,Bt.FRAMEBUFFER=36160,Bt.CONTEXT_IDS_=["experimental-webgl","webgl","webkit-3d","moz-webgl"],Bt.getContext=function(e,t){var n,h,x=Bt.CONTEXT_IDS_.length;for(h=0;h<x;++h)try{if(n=e.getContext(Bt.CONTEXT_IDS_[h],t),n)return n}catch{}return null};var tn={},Vo=typeof navigator<"u"?navigator.userAgent.toLowerCase():"";tn.FIREFOX=Vo.indexOf("firefox")!==-1,tn.SAFARI=Vo.indexOf("safari")!==-1&&Vo.indexOf("chrom")==-1,tn.WEBKIT=Vo.indexOf("webkit")!==-1&&Vo.indexOf("edge")==-1,tn.MAC=Vo.indexOf("macintosh")!==-1,tn.DEVICE_PIXEL_RATIO=window.devicePixelRatio||1,tn.CANVAS_LINE_DASH=!1,tn.CANVAS=tt.ENABLE_CANVAS&&function(){if(!("HTMLCanvasElement"in window))return!1;try{var e=document.createElement("CANVAS").getContext("2d");return e?(e.setLineDash!==void 0&&(tn.CANVAS_LINE_DASH=!0),!0):!1}catch{return!1}}(),tn.DEVICE_ORIENTATION="DeviceOrientationEvent"in window,tn.GEOLOCATION="geolocation"in navigator,tn.TOUCH=tt.ASSUME_TOUCH||"ontouchstart"in window,tn.POINTER="PointerEvent"in window,tn.MSPOINTER=!!navigator.msPointerEnabled,function(){if(tt.ENABLE_WEBGL){var e=!1,t,n=[];if("WebGLRenderingContext"in window)try{var h=document.createElement("CANVAS"),x=Bt.getContext(h,{failIfMajorPerformanceCaveat:!0});x&&(e=!0,t=x.getParameter(x.MAX_TEXTURE_SIZE),n=x.getSupportedExtensions())}catch{}tn.WEBGL=e,tt.WEBGL_EXTENSIONS=n,tt.WEBGL_MAX_TEXTURE_SIZE=t}}();var Mn={SINGLECLICK:"singleclick",CLICK:kr.CLICK,DBLCLICK:kr.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},$a=function(e,t,n,h,x){Wo.call(this,e,t,n.originalEvent,h,x),this.pointerEvent=n};tt.inherits($a,Wo);var za={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ua=function(e,t){this.dispatcher=e,this.mapping_=t};Ua.prototype.getEvents=function(){return Object.keys(this.mapping_)},Ua.prototype.getHandlerForEvent=function(e){return this.mapping_[e]};var dn=function(e){var t={mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout};Ua.call(this,e,t),this.pointerMap=e.pointerMap,this.lastTouches=[]};tt.inherits(dn,Ua),dn.POINTER_ID=1,dn.POINTER_TYPE="mouse",dn.DEDUP_DIST=25,dn.prototype.isEventSimulatedFromTouch_=function(e){for(var t=this.lastTouches,n=e.clientX,h=e.clientY,x=0,S=t.length,f;x<S&&(f=t[x]);x++){var u=Math.abs(n-f[0]),r=Math.abs(h-f[1]);if(u<=dn.DEDUP_DIST&&r<=dn.DEDUP_DIST)return!0}return!1},dn.prepareEvent=function(e,t){var n=t.cloneEvent(e,e),h=n.preventDefault;return n.preventDefault=function(){e.preventDefault(),h()},n.pointerId=dn.POINTER_ID,n.isPrimary=!0,n.pointerType=dn.POINTER_TYPE,n},dn.prototype.mousedown=function(e){if(!this.isEventSimulatedFromTouch_(e)){dn.POINTER_ID.toString()in this.pointerMap&&this.cancel(e);var t=dn.prepareEvent(e,this.dispatcher);this.pointerMap[dn.POINTER_ID.toString()]=e,this.dispatcher.down(t,e)}},dn.prototype.mousemove=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=dn.prepareEvent(e,this.dispatcher);this.dispatcher.move(t,e)}},dn.prototype.mouseup=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=this.pointerMap[dn.POINTER_ID.toString()];if(t&&t.button===e.button){var n=dn.prepareEvent(e,this.dispatcher);this.dispatcher.up(n,e),this.cleanupMouse()}}},dn.prototype.mouseover=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=dn.prepareEvent(e,this.dispatcher);this.dispatcher.enterOver(t,e)}},dn.prototype.mouseout=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=dn.prepareEvent(e,this.dispatcher);this.dispatcher.leaveOut(t,e)}},dn.prototype.cancel=function(e){var t=dn.prepareEvent(e,this.dispatcher);this.dispatcher.cancel(t,e),this.cleanupMouse()},dn.prototype.cleanupMouse=function(){delete this.pointerMap[dn.POINTER_ID.toString()]};var ga=function(e){var t={MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture};Ua.call(this,e,t),this.pointerMap=e.pointerMap,this.POINTER_TYPES=["","unavailable","touch","pen","mouse"]};tt.inherits(ga,Ua),ga.prototype.prepareEvent_=function(e){var t=e;return typeof e.pointerType=="number"&&(t=this.dispatcher.cloneEvent(e,e),t.pointerType=this.POINTER_TYPES[e.pointerType]),t},ga.prototype.cleanup=function(e){delete this.pointerMap[e.toString()]},ga.prototype.msPointerDown=function(e){this.pointerMap[e.pointerId.toString()]=e;var t=this.prepareEvent_(e);this.dispatcher.down(t,e)},ga.prototype.msPointerMove=function(e){var t=this.prepareEvent_(e);this.dispatcher.move(t,e)},ga.prototype.msPointerUp=function(e){var t=this.prepareEvent_(e);this.dispatcher.up(t,e),this.cleanup(e.pointerId)},ga.prototype.msPointerOut=function(e){var t=this.prepareEvent_(e);this.dispatcher.leaveOut(t,e)},ga.prototype.msPointerOver=function(e){var t=this.prepareEvent_(e);this.dispatcher.enterOver(t,e)},ga.prototype.msPointerCancel=function(e){var t=this.prepareEvent_(e);this.dispatcher.cancel(t,e),this.cleanup(e.pointerId)},ga.prototype.msLostPointerCapture=function(e){var t=this.dispatcher.makeEvent("lostpointercapture",e,e);this.dispatcher.dispatchEvent(t)},ga.prototype.msGotPointerCapture=function(e){var t=this.dispatcher.makeEvent("gotpointercapture",e,e);this.dispatcher.dispatchEvent(t)};var Ba=function(e){var t={pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture};Ua.call(this,e,t)};tt.inherits(Ba,Ua),Ba.prototype.pointerDown=function(e){this.dispatcher.fireNativeEvent(e)},Ba.prototype.pointerMove=function(e){this.dispatcher.fireNativeEvent(e)},Ba.prototype.pointerUp=function(e){this.dispatcher.fireNativeEvent(e)},Ba.prototype.pointerOut=function(e){this.dispatcher.fireNativeEvent(e)},Ba.prototype.pointerOver=function(e){this.dispatcher.fireNativeEvent(e)},Ba.prototype.pointerCancel=function(e){this.dispatcher.fireNativeEvent(e)},Ba.prototype.lostPointerCapture=function(e){this.dispatcher.fireNativeEvent(e)},Ba.prototype.gotPointerCapture=function(e){this.dispatcher.fireNativeEvent(e)};var So=function(e,t,n){oi.call(this,e),this.originalEvent=t;var h=n||{};this.buttons=this.getButtons_(h),this.pressure=this.getPressure_(h,this.buttons),this.bubbles="bubbles"in h?h.bubbles:!1,this.cancelable="cancelable"in h?h.cancelable:!1,this.view="view"in h?h.view:null,this.detail="detail"in h?h.detail:null,this.screenX="screenX"in h?h.screenX:0,this.screenY="screenY"in h?h.screenY:0,this.clientX="clientX"in h?h.clientX:0,this.clientY="clientY"in h?h.clientY:0,this.ctrlKey="ctrlKey"in h?h.ctrlKey:!1,this.altKey="altKey"in h?h.altKey:!1,this.shiftKey="shiftKey"in h?h.shiftKey:!1,this.metaKey="metaKey"in h?h.metaKey:!1,this.button="button"in h?h.button:0,this.relatedTarget="relatedTarget"in h?h.relatedTarget:null,this.pointerId="pointerId"in h?h.pointerId:0,this.width="width"in h?h.width:0,this.height="height"in h?h.height:0,this.tiltX="tiltX"in h?h.tiltX:0,this.tiltY="tiltY"in h?h.tiltY:0,this.pointerType="pointerType"in h?h.pointerType:"",this.hwTimestamp="hwTimestamp"in h?h.hwTimestamp:0,this.isPrimary="isPrimary"in h?h.isPrimary:!1,t.preventDefault&&(this.preventDefault=function(){t.preventDefault()})};tt.inherits(So,oi),So.prototype.getButtons_=function(e){var t;if(e.buttons||So.HAS_BUTTONS)t=e.buttons;else switch(e.which){case 1:t=1;break;case 2:t=4;break;case 3:t=2;break;default:t=0}return t},So.prototype.getPressure_=function(e,t){var n=0;return e.pressure?n=e.pressure:n=t?.5:0,n},So.HAS_BUTTONS=!1,function(){try{var e=new MouseEvent("click",{buttons:1});So.HAS_BUTTONS=e.buttons===1}catch{}}();var Vr={};Vr.binarySearch=function(e,t,n){for(var h,x,S=n||Vr.numberSafeCompareFunction,f=0,u=e.length,r=!1;f<u;)h=f+(u-f>>1),x=+S(e[h],t),x<0?f=h+1:(u=h,r=!x);return r?f:~f},Vr.numberSafeCompareFunction=function(e,t){return e>t?1:e<t?-1:0},Vr.includes=function(e,t){return e.indexOf(t)>=0},Vr.linearFindNearest=function(e,t,n){var h=e.length;if(e[0]<=t)return 0;if(t<=e[h-1])return h-1;var x;if(n>0){for(x=1;x<h;++x)if(e[x]<t)return x-1}else if(n<0){for(x=1;x<h;++x)if(e[x]<=t)return x}else for(x=1;x<h;++x){if(e[x]==t)return x;if(e[x]<t)return e[x-1]-t<t-e[x]?x-1:x}return h-1},Vr.reverseSubArray=function(e,t,n){for(;t<n;){var h=e[t];e[t]=e[n],e[n]=h,++t,--n}},Vr.extend=function(e,t){var n,h=Array.isArray(t)?t:[t],x=h.length;for(n=0;n<x;n++)e[e.length]=h[n]},Vr.remove=function(e,t){var n=e.indexOf(t),h=n>-1;return h&&e.splice(n,1),h},Vr.find=function(e,t){for(var n=e.length>>>0,h,x=0;x<n;x++)if(h=e[x],t(h,x,e))return h;return null},Vr.equals=function(e,t){var n=e.length;if(n!==t.length)return!1;for(var h=0;h<n;h++)if(e[h]!==t[h])return!1;return!0},Vr.stableSort=function(e,t){var n=e.length,h=Array(e.length),x;for(x=0;x<n;x++)h[x]={index:x,value:e[x]};for(h.sort(function(S,f){return t(S.value,f.value)||S.index-f.index}),x=0;x<e.length;x++)e[x]=h[x].value},Vr.findIndex=function(e,t){var n,h=!e.every(function(x,S){return n=S,!t(x,S,e)});return h?n:-1},Vr.isSorted=function(e,t,n){var h=t||Vr.numberSafeCompareFunction;return e.every(function(x,S){if(S===0)return!0;var f=h(e[S-1],x);return!(f>0||n&&f===0)})};var En=function(e,t){var n={touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel};Ua.call(this,e,n),this.pointerMap=e.pointerMap,this.mouseSource=t,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_=void 0};tt.inherits(En,Ua),En.DEDUP_TIMEOUT=2500,En.CLICK_COUNT_TIMEOUT=200,En.POINTER_TYPE="touch",En.prototype.isPrimaryTouch_=function(e){return this.firstTouchId_===e.identifier},En.prototype.setPrimaryTouch_=function(e){var t=Object.keys(this.pointerMap).length;(t===0||t===1&&dn.POINTER_ID.toString()in this.pointerMap)&&(this.firstTouchId_=e.identifier,this.cancelResetClickCount_())},En.prototype.removePrimaryPointer_=function(e){e.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},En.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),En.CLICK_COUNT_TIMEOUT)},En.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},En.prototype.cancelResetClickCount_=function(){this.resetId_!==void 0&&clearTimeout(this.resetId_)},En.prototype.touchToPointer_=function(e,t){var n=this.dispatcher.cloneEvent(e,t);return n.pointerId=t.identifier+2,n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount_,n.button=0,n.buttons=1,n.width=t.webkitRadiusX||t.radiusX||0,n.height=t.webkitRadiusY||t.radiusY||0,n.pressure=t.webkitForce||t.force||.5,n.isPrimary=this.isPrimaryTouch_(t),n.pointerType=En.POINTER_TYPE,n.clientX=t.clientX,n.clientY=t.clientY,n.screenX=t.screenX,n.screenY=t.screenY,n},En.prototype.processTouches_=function(e,t){var n=Array.prototype.slice.call(e.changedTouches),h=n.length;function x(){e.preventDefault()}var S,f;for(S=0;S<h;++S)f=this.touchToPointer_(e,n[S]),f.preventDefault=x,t.call(this,e,f)},En.prototype.findTouch_=function(e,t){for(var n=e.length,h,x=0;x<n;x++)if(h=e[x],h.identifier===t)return!0;return!1},En.prototype.vacuumTouches_=function(e){var t=e.touches,n=Object.keys(this.pointerMap),h=n.length;if(h>=t.length){var x=[],S,f,u;for(S=0;S<h;++S)f=n[S],u=this.pointerMap[f],f!=dn.POINTER_ID&&!this.findTouch_(t,f-2)&&x.push(u.out);for(S=0;S<x.length;++S)this.cancelOut_(e,x[S])}},En.prototype.touchstart=function(e){this.vacuumTouches_(e),this.setPrimaryTouch_(e.changedTouches[0]),this.dedupSynthMouse_(e),this.clickCount_++,this.processTouches_(e,this.overDown_)},En.prototype.overDown_=function(e,t){this.pointerMap[t.pointerId]={target:t.target,out:t,outTarget:t.target},this.dispatcher.over(t,e),this.dispatcher.enter(t,e),this.dispatcher.down(t,e)},En.prototype.touchmove=function(e){e.preventDefault(),this.processTouches_(e,this.moveOverOut_)},En.prototype.moveOverOut_=function(e,t){var n=t,h=this.pointerMap[n.pointerId];if(h){var x=h.out,S=h.outTarget;this.dispatcher.move(n,e),x&&S!==n.target&&(x.relatedTarget=n.target,n.relatedTarget=S,x.target=S,n.target?(this.dispatcher.leaveOut(x,e),this.dispatcher.enterOver(n,e)):(n.target=S,n.relatedTarget=null,this.cancelOut_(e,n))),h.out=n,h.outTarget=n.target}},En.prototype.touchend=function(e){this.dedupSynthMouse_(e),this.processTouches_(e,this.upOut_)},En.prototype.upOut_=function(e,t){this.dispatcher.up(t,e),this.dispatcher.out(t,e),this.dispatcher.leave(t,e),this.cleanUpPointer_(t)},En.prototype.touchcancel=function(e){this.processTouches_(e,this.cancelOut_)},En.prototype.cancelOut_=function(e,t){this.dispatcher.cancel(t,e),this.dispatcher.out(t,e),this.dispatcher.leave(t,e),this.cleanUpPointer_(t)},En.prototype.cleanUpPointer_=function(e){delete this.pointerMap[e.pointerId],this.removePrimaryPointer_(e)},En.prototype.dedupSynthMouse_=function(e){var t=this.mouseSource.lastTouches,n=e.changedTouches[0];if(this.isPrimaryTouch_(n)){var h=[n.clientX,n.clientY];t.push(h),setTimeout(function(){Vr.remove(t,h)},En.DEDUP_TIMEOUT)}};var pn=function(e){$n.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()};tt.inherits(pn,$n),pn.prototype.registerSources=function(){if(tn.POINTER)this.registerSource("native",new Ba(this));else if(tn.MSPOINTER)this.registerSource("ms",new ga(this));else{var e=new dn(this);this.registerSource("mouse",e),tn.TOUCH&&this.registerSource("touch",new En(this,e))}this.register_()},pn.prototype.registerSource=function(e,t){var n=t,h=n.getEvents();h&&(h.forEach(function(x){var S=n.getHandlerForEvent(x);S&&(this.eventMap_[x]=S.bind(n))},this),this.eventSourceList_.push(n))},pn.prototype.register_=function(){for(var e=this.eventSourceList_.length,t,n=0;n<e;n++)t=this.eventSourceList_[n],this.addEvents_(t.getEvents())},pn.prototype.unregister_=function(){for(var e=this.eventSourceList_.length,t,n=0;n<e;n++)t=this.eventSourceList_[n],this.removeEvents_(t.getEvents())},pn.prototype.eventHandler_=function(e){var t=e.type,n=this.eventMap_[t];n&&n(e)},pn.prototype.addEvents_=function(e){e.forEach(function(t){Jt.listen(this.element_,t,this.eventHandler_,this)},this)},pn.prototype.removeEvents_=function(e){e.forEach(function(t){Jt.unlisten(this.element_,t,this.eventHandler_,this)},this)},pn.prototype.cloneEvent=function(e,t){for(var n={},h,x=0,S=pn.CLONE_PROPS.length;x<S;x++)h=pn.CLONE_PROPS[x][0],n[h]=e[h]||t[h]||pn.CLONE_PROPS[x][1];return n},pn.prototype.down=function(e,t){this.fireEvent(za.POINTERDOWN,e,t)},pn.prototype.move=function(e,t){this.fireEvent(za.POINTERMOVE,e,t)},pn.prototype.up=function(e,t){this.fireEvent(za.POINTERUP,e,t)},pn.prototype.enter=function(e,t){e.bubbles=!1,this.fireEvent(za.POINTERENTER,e,t)},pn.prototype.leave=function(e,t){e.bubbles=!1,this.fireEvent(za.POINTERLEAVE,e,t)},pn.prototype.over=function(e,t){e.bubbles=!0,this.fireEvent(za.POINTEROVER,e,t)},pn.prototype.out=function(e,t){e.bubbles=!0,this.fireEvent(za.POINTEROUT,e,t)},pn.prototype.cancel=function(e,t){this.fireEvent(za.POINTERCANCEL,e,t)},pn.prototype.leaveOut=function(e,t){this.out(e,t),this.contains_(e.target,e.relatedTarget)||this.leave(e,t)},pn.prototype.enterOver=function(e,t){this.over(e,t),this.contains_(e.target,e.relatedTarget)||this.enter(e,t)},pn.prototype.contains_=function(e,t){return!e||!t?!1:e.contains(t)},pn.prototype.makeEvent=function(e,t,n){return new So(e,n,t)},pn.prototype.fireEvent=function(e,t,n){var h=this.makeEvent(e,t,n);this.dispatchEvent(h)},pn.prototype.fireNativeEvent=function(e){var t=this.makeEvent(e.type,e,e);this.dispatchEvent(t)},pn.prototype.wrapMouseEvent=function(e,t){var n=this.makeEvent(e,dn.prepareEvent(t,this),t);return n},pn.prototype.disposeInternal=function(){this.unregister_(),$n.prototype.disposeInternal.call(this)},pn.CLONE_PROPS=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];var Ca=function(e,t){$n.call(this),this.map_=e,this.clickTimeoutId_=0,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t?t*tn.DEVICE_PIXEL_RATIO:tn.DEVICE_PIXEL_RATIO,this.down_=null;var n=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new pn(n),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=Jt.listen(this.pointerEventHandler_,za.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=Jt.listen(this.pointerEventHandler_,za.POINTERMOVE,this.relayEvent_,this)};tt.inherits(Ca,$n),Ca.prototype.emulateClick_=function(e){var t=new $a(Mn.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,t=new $a(Mn.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout((function(){this.clickTimeoutId_=0;var n=new $a(Mn.SINGLECLICK,this.map_,e);this.dispatchEvent(n)}).bind(this),250)},Ca.prototype.updateActivePointers_=function(e){var t=e;t.type==Mn.POINTERUP||t.type==Mn.POINTERCANCEL?delete this.trackedTouches_[t.pointerId]:t.type==Mn.POINTERDOWN&&(this.trackedTouches_[t.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},Ca.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var t=new $a(Mn.POINTERUP,this.map_,e);this.dispatchEvent(t),!t.propagationStopped&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_===0&&(this.dragListenerKeys_.forEach(Jt.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},Ca.prototype.isMouseActionButton_=function(e){return e.button===0},Ca.prototype.handlePointerDown_=function(e){this.updateActivePointers_(e);var t=new $a(Mn.POINTERDOWN,this.map_,e);this.dispatchEvent(t),this.down_=e,this.dragListenerKeys_.length===0&&(this.documentPointerEventHandler_=new pn(document),this.dragListenerKeys_.push(Jt.listen(this.documentPointerEventHandler_,Mn.POINTERMOVE,this.handlePointerMove_,this),Jt.listen(this.documentPointerEventHandler_,Mn.POINTERUP,this.handlePointerUp_,this),Jt.listen(this.pointerEventHandler_,Mn.POINTERCANCEL,this.handlePointerUp_,this)))},Ca.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.dragging_=!0;var t=new $a(Mn.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(t)}e.preventDefault()},Ca.prototype.relayEvent_=function(e){var t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new $a(e.type,this.map_,e,t))},Ca.prototype.isMoving_=function(e){return Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_},Ca.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Jt.unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(Jt.unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Jt.unlistenByKey),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),$n.prototype.disposeInternal.call(this)};var ls={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"},ji={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Tr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5},Hn=function(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}};Hn.DROP=1/0,Hn.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Zr.clear(this.queuedElements_)},Hn.prototype.dequeue=function(){var e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var h=this.keyFunction_(n);return delete this.queuedElements_[h],n},Hn.prototype.enqueue=function(e){_n.assert(!(this.keyFunction_(e)in this.queuedElements_),31);var t=this.priorityFunction_(e);return t!=Hn.DROP?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},Hn.prototype.getCount=function(){return this.elements_.length},Hn.prototype.getLeftChildIndex_=function(e){return e*2+1},Hn.prototype.getRightChildIndex_=function(e){return e*2+2},Hn.prototype.getParentIndex_=function(e){return e-1>>1},Hn.prototype.heapify_=function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)},Hn.prototype.isEmpty=function(){return this.elements_.length===0},Hn.prototype.isKeyQueued=function(e){return e in this.queuedElements_},Hn.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))},Hn.prototype.siftUp_=function(e){for(var t=this.elements_,n=this.priorities_,h=t.length,x=t[e],S=n[e],f=e;e<h>>1;){var u=this.getLeftChildIndex_(e),r=this.getRightChildIndex_(e),i=r<h&&n[r]<n[u]?r:u;t[e]=t[i],n[e]=n[i],e=i}t[e]=x,n[e]=S,this.siftDown_(f,e)},Hn.prototype.siftDown_=function(e,t){for(var n=this.elements_,h=this.priorities_,x=n[t],S=h[t];t>e;){var f=this.getParentIndex_(t);if(h[f]>S)n[t]=n[f],h[t]=h[f],t=f;else break}n[t]=x,h[t]=S},Hn.prototype.reprioritize=function(){var e=this.priorityFunction_,t=this.elements_,n=this.priorities_,h=0,x=t.length,S,f,u;for(f=0;f<x;++f)S=t[f],u=e(S),u==Hn.DROP?delete this.queuedElements_[this.keyFunction_(S)]:(n[h]=u,t[h++]=S);t.length=h,n.length=h,this.heapify_()};var Xo=function(e,t){Hn.call(this,function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}};tt.inherits(Xo,Hn),Xo.prototype.enqueue=function(e){var t=Hn.prototype.enqueue.call(this,e);if(t){var n=e[0];Jt.listen(n,kr.CHANGE,this.handleTileChange,this)}return t},Xo.prototype.getTilesLoading=function(){return this.tilesLoading_},Xo.prototype.handleTileChange=function(e){var t=e.target,n=t.getState();if(n===Tr.LOADED||n===Tr.ERROR||n===Tr.EMPTY||n===Tr.ABORT){Jt.unlisten(t,kr.CHANGE,this.handleTileChange,this);var h=t.getKey();h in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[h],--this.tilesLoading_),this.tileChangeCallback_()}},Xo.prototype.loadMoreTiles=function(e,t){for(var n=0,h=!1,x,S,f;this.tilesLoading_<e&&n<t&&this.getCount()>0;)S=this.dequeue()[0],f=S.getKey(),x=S.getState(),x===Tr.ABORT?h=!0:x===Tr.IDLE&&!(f in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[f]=!0,++this.tilesLoading_,++n,S.load());n===0&&h&&this.tileChangeCallback_()};var As={};As.createExtent=function(e){return function(t){if(t)return[wr.clamp(t[0],e[0],e[2]),wr.clamp(t[1],e[1],e[3])]}},As.none=function(e){return e};var Ms={};Ms.createSnapToResolutions=function(e){return function(t,n,h){if(t!==void 0){var x=Vr.linearFindNearest(e,t,h);x=wr.clamp(x+n,0,e.length-1);var S=Math.floor(x);if(x!=S&&S<e.length-1){var f=e[S]/e[S+1];return e[S]/Math.pow(f,x-S)}else return e[S]}else return}},Ms.createSnapToPower=function(e,t,n){return function(h,x,S){if(h!==void 0){var f=-S/2+.5,u=Math.floor(Math.log(t/h)/Math.log(e)+f),r=Math.max(u+x,0);return n!==void 0&&(r=Math.min(r,n)),t/Math.pow(e,r)}else return}};var Sa={};Sa.disable=function(e,t){if(e!==void 0)return 0},Sa.none=function(e,t){if(e!==void 0)return e+t},Sa.createSnapToN=function(e){var t=2*Math.PI/e;return function(n,h){if(n!==void 0)return n=Math.floor((n+h)/t+.5)*t,n}},Sa.createSnapToZero=function(e){var t=e||wr.toRadians(5);return function(n,h){if(n!==void 0)return Math.abs(n+h)<=t?0:n+h}};var Tn={ANIMATING:0,INTERACTING:1},Pi={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Es={};Es.padNumber=function(e,t,n){var h=n!==void 0?e.toFixed(n):""+e,x=h.indexOf(".");return x=x===-1?h.length:x,x>t?h:new Array(1+t-x).join("0")+h},Es.compareVersions=function(e,t){for(var n=(""+e).split("."),h=(""+t).split("."),x=0;x<Math.max(n.length,h.length);x++){var S=parseInt(n[x]||"0",10),f=parseInt(h[x]||"0",10);if(S>f)return 1;if(f>S)return-1}return 0};var bn={};bn.add=function(e,t){return e[0]+=t[0],e[1]+=t[1],e},bn.closestOnCircle=function(e,t){var n=t.getRadius(),h=t.getCenter(),x=h[0],S=h[1],f=e[0],u=e[1],r=f-x,i=u-S;r===0&&i===0&&(r=1);var c=Math.sqrt(r*r+i*i),a,l;return a=x+n*r/c,l=S+n*i/c,[a,l]},bn.closestOnSegment=function(e,t){var n=e[0],h=e[1],x=t[0],S=t[1],f=x[0],u=x[1],r=S[0],i=S[1],c=r-f,a=i-u,l=c===0&&a===0?0:(c*(n-f)+a*(h-u))/(c*c+a*a||0),s,v;return l<=0?(s=f,v=u):l>=1?(s=r,v=i):(s=f+l*c,v=u+l*a),[s,v]},bn.createStringXY=function(e){return function(t){return bn.toStringXY(t,e)}},bn.degreesToStringHDMS=function(e,t,n){var h=wr.modulo(t+180,360)-180,x=Math.abs(3600*h),S=n||0,f=Math.pow(10,S),u=Math.floor(x/3600),r=Math.floor((x-u*3600)/60),i=x-u*3600-r*60;return i=Math.ceil(i*f)/f,i>=60&&(i=0,r+=1),r>=60&&(r=0,u+=1),u+" "+Es.padNumber(r,2)+" "+Es.padNumber(i,2,S)+""+(h==0?"":" "+e.charAt(h<0?1:0))},bn.format=function(e,t,n){return e?t.replace("{x}",e[0].toFixed(n)).replace("{y}",e[1].toFixed(n)):""},bn.equals=function(e,t){for(var n=!0,h=e.length-1;h>=0;--h)if(e[h]!=t[h]){n=!1;break}return n},bn.rotate=function(e,t){var n=Math.cos(t),h=Math.sin(t),x=e[0]*n-e[1]*h,S=e[1]*n+e[0]*h;return e[0]=x,e[1]=S,e},bn.scale=function(e,t){return e[0]*=t,e[1]*=t,e},bn.sub=function(e,t){return e[0]-=t[0],e[1]-=t[1],e},bn.squaredDistance=function(e,t){var n=e[0]-t[0],h=e[1]-t[1];return n*n+h*h},bn.distance=function(e,t){return Math.sqrt(bn.squaredDistance(e,t))},bn.squaredDistanceToSegment=function(e,t){return bn.squaredDistance(e,bn.closestOnSegment(e,t))},bn.toStringHDMS=function(e,t){return e?bn.degreesToStringHDMS("NS",e[1],t)+" "+bn.degreesToStringHDMS("EW",e[0],t):""},bn.toStringXY=function(e,t){return bn.format(e,"{x}, {y}",t)};var ui={};ui.easeIn=function(e){return Math.pow(e,3)},ui.easeOut=function(e){return 1-ui.easeIn(1-e)},ui.inAndOut=function(e){return 3*e*e-2*e*e*e},ui.linear=function(e){return e},ui.upAndDown=function(e){return e<.5?ui.inAndOut(2*e):1-ui.inAndOut(2*(e-.5))};var us={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Ti={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16},Tt={};Tt.boundingExtent=function(e){for(var t=Tt.createEmpty(),n=0,h=e.length;n<h;++n)Tt.extendCoordinate(t,e[n]);return t},Tt.boundingExtentXYs_=function(e,t,n){var h=Math.min.apply(null,e),x=Math.min.apply(null,t),S=Math.max.apply(null,e),f=Math.max.apply(null,t);return Tt.createOrUpdate(h,x,S,f,n)},Tt.buffer=function(e,t,n){return n?(n[0]=e[0]-t,n[1]=e[1]-t,n[2]=e[2]+t,n[3]=e[3]+t,n):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]},Tt.clone=function(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()},Tt.closestSquaredDistanceXY=function(e,t,n){var h,x;return t<e[0]?h=e[0]-t:e[2]<t?h=t-e[2]:h=0,n<e[1]?x=e[1]-n:e[3]<n?x=n-e[3]:x=0,h*h+x*x},Tt.containsCoordinate=function(e,t){return Tt.containsXY(e,t[0],t[1])},Tt.containsExtent=function(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]},Tt.containsXY=function(e,t,n){return e[0]<=t&&t<=e[2]&&e[1]<=n&&n<=e[3]},Tt.coordinateRelationship=function(e,t){var n=e[0],h=e[1],x=e[2],S=e[3],f=t[0],u=t[1],r=Ti.UNKNOWN;return f<n?r=r|Ti.LEFT:f>x&&(r=r|Ti.RIGHT),u<h?r=r|Ti.BELOW:u>S&&(r=r|Ti.ABOVE),r===Ti.UNKNOWN&&(r=Ti.INTERSECTING),r},Tt.createEmpty=function(){return[1/0,1/0,-1/0,-1/0]},Tt.createOrUpdate=function(e,t,n,h,x){return x?(x[0]=e,x[1]=t,x[2]=n,x[3]=h,x):[e,t,n,h]},Tt.createOrUpdateEmpty=function(e){return Tt.createOrUpdate(1/0,1/0,-1/0,-1/0,e)},Tt.createOrUpdateFromCoordinate=function(e,t){var n=e[0],h=e[1];return Tt.createOrUpdate(n,h,n,h,t)},Tt.createOrUpdateFromCoordinates=function(e,t){var n=Tt.createOrUpdateEmpty(t);return Tt.extendCoordinates(n,e)},Tt.createOrUpdateFromFlatCoordinates=function(e,t,n,h,x){var S=Tt.createOrUpdateEmpty(x);return Tt.extendFlatCoordinates(S,e,t,n,h)},Tt.createOrUpdateFromRings=function(e,t){var n=Tt.createOrUpdateEmpty(t);return Tt.extendRings(n,e)},Tt.equals=function(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]},Tt.extend=function(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e},Tt.extendCoordinate=function(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])},Tt.extendCoordinates=function(e,t){var n,h;for(n=0,h=t.length;n<h;++n)Tt.extendCoordinate(e,t[n]);return e},Tt.extendFlatCoordinates=function(e,t,n,h,x){for(;n<h;n+=x)Tt.extendXY(e,t[n],t[n+1]);return e},Tt.extendRings=function(e,t){var n,h;for(n=0,h=t.length;n<h;++n)Tt.extendCoordinates(e,t[n]);return e},Tt.extendXY=function(e,t,n){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],n),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],n)},Tt.forEachCorner=function(e,t,n){var h;return h=t.call(n,Tt.getBottomLeft(e)),h||(h=t.call(n,Tt.getBottomRight(e)),h)||(h=t.call(n,Tt.getTopRight(e)),h)||(h=t.call(n,Tt.getTopLeft(e)),h)?h:!1},Tt.getArea=function(e){var t=0;return Tt.isEmpty(e)||(t=Tt.getWidth(e)*Tt.getHeight(e)),t},Tt.getBottomLeft=function(e){return[e[0],e[1]]},Tt.getBottomRight=function(e){return[e[2],e[1]]},Tt.getCenter=function(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]},Tt.getCorner=function(e,t){var n;return t===us.BOTTOM_LEFT?n=Tt.getBottomLeft(e):t===us.BOTTOM_RIGHT?n=Tt.getBottomRight(e):t===us.TOP_LEFT?n=Tt.getTopLeft(e):t===us.TOP_RIGHT?n=Tt.getTopRight(e):_n.assert(!1,13),n},Tt.getEnlargedArea=function(e,t){var n=Math.min(e[0],t[0]),h=Math.min(e[1],t[1]),x=Math.max(e[2],t[2]),S=Math.max(e[3],t[3]);return(x-n)*(S-h)},Tt.getForViewAndSize=function(e,t,n,h,x){var S=t*h[0]/2,f=t*h[1]/2,u=Math.cos(n),r=Math.sin(n),i=S*u,c=S*r,a=f*u,l=f*r,s=e[0],v=e[1],d=s-i+l,p=s-i-l,o=s+i-l,y=s+i+l,_=v-c-a,E=v-c+a,M=v+c+a,b=v+c-a;return Tt.createOrUpdate(Math.min(d,p,o,y),Math.min(_,E,M,b),Math.max(d,p,o,y),Math.max(_,E,M,b),x)},Tt.getHeight=function(e){return e[3]-e[1]},Tt.getIntersectionArea=function(e,t){var n=Tt.getIntersection(e,t);return Tt.getArea(n)},Tt.getIntersection=function(e,t,n){var h=n||Tt.createEmpty();return Tt.intersects(e,t)&&(e[0]>t[0]?h[0]=e[0]:h[0]=t[0],e[1]>t[1]?h[1]=e[1]:h[1]=t[1],e[2]<t[2]?h[2]=e[2]:h[2]=t[2],e[3]<t[3]?h[3]=e[3]:h[3]=t[3]),h},Tt.getMargin=function(e){return Tt.getWidth(e)+Tt.getHeight(e)},Tt.getSize=function(e){return[e[2]-e[0],e[3]-e[1]]},Tt.getTopLeft=function(e){return[e[0],e[3]]},Tt.getTopRight=function(e){return[e[2],e[3]]},Tt.getWidth=function(e){return e[2]-e[0]},Tt.intersects=function(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]},Tt.isEmpty=function(e){return e[2]<e[0]||e[3]<e[1]},Tt.returnOrUpdate=function(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e},Tt.scaleFromCenter=function(e,t){var n=(e[2]-e[0])/2*(t-1),h=(e[3]-e[1])/2*(t-1);e[0]-=n,e[2]+=n,e[1]-=h,e[3]+=h},Tt.intersectsSegment=function(e,t,n){var h=!1,x=Tt.coordinateRelationship(e,t),S=Tt.coordinateRelationship(e,n);if(x===Ti.INTERSECTING||S===Ti.INTERSECTING)h=!0;else{var f=e[0],u=e[1],r=e[2],i=e[3],c=t[0],a=t[1],l=n[0],s=n[1],v=(s-a)/(l-c),d,p;S&Ti.ABOVE&&!(x&Ti.ABOVE)&&(d=l-(s-i)/v,h=d>=f&&d<=r),!h&&S&Ti.RIGHT&&!(x&Ti.RIGHT)&&(p=s-(l-r)*v,h=p>=u&&p<=i),!h&&S&Ti.BELOW&&!(x&Ti.BELOW)&&(d=l-(s-u)/v,h=d>=f&&d<=r),!h&&S&Ti.LEFT&&!(x&Ti.LEFT)&&(p=s-(l-f)*v,h=p>=u&&p<=i)}return h},Tt.applyTransform=function(e,t,n){var h=[e[0],e[1],e[0],e[3],e[2],e[1],e[2],e[3]];t(h,h,2);var x=[h[0],h[2],h[4],h[6]],S=[h[1],h[3],h[5],h[7]];return Tt.boundingExtentXYs_(x,S,n)};var Er={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},ki={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"},Qn={};Qn.TRUE=function(){return!0},Qn.FALSE=function(){return!1};var qn={};qn.transform2D=function(e,t,n,h,x,S){var f=S||[],u=0,r;for(r=t;r<n;r+=h){var i=e[r],c=e[r+1];f[u++]=x[0]*i+x[2]*c+x[4],f[u++]=x[1]*i+x[3]*c+x[5]}return S&&f.length!=u&&(f.length=u),f},qn.rotate=function(e,t,n,h,x,S,f){for(var u=f||[],r=Math.cos(x),i=Math.sin(x),c=S[0],a=S[1],l=0,s=t;s<n;s+=h){var v=e[s]-c,d=e[s+1]-a;u[l++]=c+v*r-d*i,u[l++]=a+v*i+d*r;for(var p=s+2;p<s+h;++p)u[l++]=e[p]}return f&&u.length!=l&&(u.length=l),u},qn.scale=function(e,t,n,h,x,S,f,u){for(var r=u||[],i=f[0],c=f[1],a=0,l=t;l<n;l+=h){var s=e[l]-i,v=e[l+1]-c;r[a++]=i+x*s,r[a++]=c+S*v;for(var d=l+2;d<l+h;++d)r[a++]=e[d]}return u&&r.length!=a&&(r.length=a),r},qn.translate=function(e,t,n,h,x,S,f){var u=f||[],r=0,i,c;for(i=t;i<n;i+=h)for(u[r++]=e[i]+x,u[r++]=e[i+1]+S,c=i+2;c<i+h;++c)u[r++]=e[c];return f&&u.length!=r&&(u.length=r),u};/**
 * @license
 * Latitude/longitude spherical geodesy formulae taken from
 * http://www.movable-type.co.uk/scripts/latlong.html
 * Licensed under CC-BY-3.0.
 */var In=function(e){this.radius=e};In.prototype.geodesicArea=function(e){return In.getArea_(e,this.radius)},In.prototype.haversineDistance=function(e,t){return In.getDistance_(e,t,this.radius)},In.prototype.offset=function(e,t,n){var h=wr.toRadians(e[1]),x=wr.toRadians(e[0]),S=t/this.radius,f=Math.asin(Math.sin(h)*Math.cos(S)+Math.cos(h)*Math.sin(S)*Math.cos(n)),u=x+Math.atan2(Math.sin(n)*Math.sin(S)*Math.cos(h),Math.cos(S)-Math.sin(h)*Math.sin(f));return[wr.toDegrees(u),wr.toDegrees(f)]},In.DEFAULT_RADIUS=63710088e-1,In.getLength=function(e,t){var n=t||{},h=n.radius||In.DEFAULT_RADIUS,x=n.projection||"EPSG:3857";e=e.clone().transform(x,"EPSG:4326");var S=e.getType(),f=0,u,r,i,c,a,l;switch(S){case Er.POINT:case Er.MULTI_POINT:break;case Er.LINE_STRING:case Er.LINEAR_RING:{u=e.getCoordinates(),f=In.getLength_(u,h);break}case Er.MULTI_LINE_STRING:case Er.POLYGON:{for(u=e.getCoordinates(),i=0,c=u.length;i<c;++i)f+=In.getLength_(u[i],h);break}case Er.MULTI_POLYGON:{for(u=e.getCoordinates(),i=0,c=u.length;i<c;++i)for(r=u[i],a=0,l=r.length;a<l;++a)f+=In.getLength_(r[a],h);break}case Er.GEOMETRY_COLLECTION:{var s=e.getGeometries();for(i=0,c=s.length;i<c;++i)f+=In.getLength(s[i],t);break}default:throw new Error("Unsupported geometry type: "+S)}return f},In.getLength_=function(e,t){for(var n=0,h=0,x=e.length;h<x-1;++h)n+=In.getDistance_(e[h],e[h+1],t);return n},In.getDistance_=function(e,t,n){var h=wr.toRadians(e[1]),x=wr.toRadians(t[1]),S=(x-h)/2,f=wr.toRadians(t[0]-e[0])/2,u=Math.sin(S)*Math.sin(S)+Math.sin(f)*Math.sin(f)*Math.cos(h)*Math.cos(x);return 2*n*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))},In.getArea=function(e,t){var n=t||{},h=n.radius||In.DEFAULT_RADIUS,x=n.projection||"EPSG:3857";e=e.clone().transform(x,"EPSG:4326");var S=e.getType(),f=0,u,r,i,c,a,l;switch(S){case Er.POINT:case Er.MULTI_POINT:case Er.LINE_STRING:case Er.MULTI_LINE_STRING:case Er.LINEAR_RING:break;case Er.POLYGON:{for(u=e.getCoordinates(),f=Math.abs(In.getArea_(u[0],h)),i=1,c=u.length;i<c;++i)f-=Math.abs(In.getArea_(u[i],h));break}case Er.MULTI_POLYGON:{for(u=e.getCoordinates(),i=0,c=u.length;i<c;++i)for(r=u[i],f+=Math.abs(In.getArea_(r[0],h)),a=1,l=r.length;a<l;++a)f-=Math.abs(In.getArea_(r[a],h));break}case Er.GEOMETRY_COLLECTION:{var s=e.getGeometries();for(i=0,c=s.length;i<c;++i)f+=In.getArea(s[i],t);break}default:throw new Error("Unsupported geometry type: "+S)}return f},In.getArea_=function(e,t){for(var n=0,h=e.length,x=e[h-1][0],S=e[h-1][1],f=0;f<h;f++){var u=e[f][0],r=e[f][1];n+=wr.toRadians(u-x)*(2+Math.sin(wr.toRadians(S))+Math.sin(wr.toRadians(r))),x=u,S=r}return n*t*t/2};var fi={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"};fi.METERS_PER_UNIT={},fi.METERS_PER_UNIT[fi.DEGREES]=2*Math.PI*6370997/360,fi.METERS_PER_UNIT[fi.FEET]=.3048,fi.METERS_PER_UNIT[fi.METERS]=1,fi.METERS_PER_UNIT[fi.USFEET]=1200/3937;var Qa={};Qa.cache_=null,Qa.set=function(e){Qa.cache_=e},Qa.get=function(){return Qa.cache_||window.proj4};var ei=function(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit;var t=e.code;if(tt.ENABLE_PROJ4JS){var n=Qa.get();if(typeof n=="function"){var h=n.defs(t);h!==void 0&&(h.axis!==void 0&&e.axisOrientation===void 0&&(this.axisOrientation_=h.axis),e.metersPerUnit===void 0&&(this.metersPerUnit_=h.to_meter),e.units===void 0&&(this.units_=h.units))}}};ei.prototype.canWrapX=function(){return this.canWrapX_},ei.prototype.getCode=function(){return this.code_},ei.prototype.getExtent=function(){return this.extent_},ei.prototype.getUnits=function(){return this.units_},ei.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||fi.METERS_PER_UNIT[this.units_]},ei.prototype.getWorldExtent=function(){return this.worldExtent_},ei.prototype.getAxisOrientation=function(){return this.axisOrientation_},ei.prototype.isGlobal=function(){return this.global_},ei.prototype.setGlobal=function(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)},ei.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},ei.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e},ei.prototype.setExtent=function(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)},ei.prototype.setWorldExtent=function(e){this.worldExtent_=e},ei.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e},ei.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var fn={};fn.Projection_=function(e){ei.call(this,{code:e,units:fi.METERS,extent:fn.EXTENT,global:!0,worldExtent:fn.WORLD_EXTENT,getPointResolution:function(t,n){return t/wr.cosh(n[1]/fn.RADIUS)}})},tt.inherits(fn.Projection_,ei),fn.RADIUS=6378137,fn.HALF_SIZE=Math.PI*fn.RADIUS,fn.EXTENT=[-fn.HALF_SIZE,-fn.HALF_SIZE,fn.HALF_SIZE,fn.HALF_SIZE],fn.WORLD_EXTENT=[-180,-85,180,85],fn.PROJECTIONS=[new fn.Projection_("EPSG:3857"),new fn.Projection_("EPSG:102100"),new fn.Projection_("EPSG:102113"),new fn.Projection_("EPSG:900913"),new fn.Projection_("urn:ogc:def:crs:EPSG:6.18:3:3857"),new fn.Projection_("urn:ogc:def:crs:EPSG::3857"),new fn.Projection_("http://www.opengis.net/gml/srs/epsg.xml#3857")],fn.fromEPSG4326=function(e,t,n){var h=e.length,x=n>1?n:2,S=t;S===void 0&&(x>2?S=e.slice():S=new Array(h));for(var f=fn.HALF_SIZE,u=0;u<h;u+=x){S[u]=f*e[u]/180;var r=fn.RADIUS*Math.log(Math.tan(Math.PI*(e[u+1]+90)/360));r>f?r=f:r<-f&&(r=-f),S[u+1]=r}return S},fn.toEPSG4326=function(e,t,n){var h=e.length,x=n>1?n:2,S=t;S===void 0&&(x>2?S=e.slice():S=new Array(h));for(var f=0;f<h;f+=x)S[f]=180*e[f]/fn.HALF_SIZE,S[f+1]=360*Math.atan(Math.exp(e[f+1]/fn.RADIUS))/Math.PI-90;return S};var ci={};ci.Projection_=function(e,t){ei.call(this,{code:e,units:fi.DEGREES,extent:ci.EXTENT,axisOrientation:t,global:!0,metersPerUnit:ci.METERS_PER_UNIT,worldExtent:ci.EXTENT})},tt.inherits(ci.Projection_,ei),ci.RADIUS=6378137,ci.EXTENT=[-180,-90,180,90],ci.METERS_PER_UNIT=Math.PI*ci.RADIUS/180,ci.PROJECTIONS=[new ci.Projection_("CRS:84"),new ci.Projection_("EPSG:4326","neu"),new ci.Projection_("urn:ogc:def:crs:EPSG::4326","neu"),new ci.Projection_("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new ci.Projection_("urn:ogc:def:crs:OGC:1.3:CRS84"),new ci.Projection_("urn:ogc:def:crs:OGC:2:84"),new ci.Projection_("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ci.Projection_("urn:x-ogc:def:crs:EPSG:4326","neu")];var Ga={};Ga.cache_={},Ga.clear=function(){Ga.cache_={}},Ga.get=function(e){var t=Ga.cache_;return t[e]||null},Ga.add=function(e,t){var n=Ga.cache_;n[e]=t};var bi={};bi.cache_={},bi.clear=function(){bi.cache_={}},bi.add=function(e,t,n){var h=e.getCode(),x=t.getCode(),S=bi.cache_;h in S||(S[h]={}),S[h][x]=n},bi.remove=function(e,t){var n=e.getCode(),h=t.getCode(),x=bi.cache_,S=x[n][h];return delete x[n][h],Zr.isEmpty(x[n])&&delete x[n],S},bi.get=function(e,t){var n,h=bi.cache_;return e in h&&t in h[e]&&(n=h[e][t]),n};var dr={};dr.METERS_PER_UNIT=fi.METERS_PER_UNIT,dr.SPHERE_=new In(In.DEFAULT_RADIUS),tt.ENABLE_PROJ4JS&&(dr.setProj4=function(e){Qa.set(e)}),dr.getPointResolution=function(e,t,n,h){e=dr.get(e);var x,S=e.getPointResolutionFunc();if(S)x=S(t,n);else{var f=e.getUnits();if(f==fi.DEGREES&&!h||h==fi.DEGREES)x=t;else{var u=dr.getTransformFromProjections(e,dr.get("EPSG:4326")),r=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];r=u(r,r,2);var i=dr.SPHERE_.haversineDistance(r.slice(0,2),r.slice(2,4)),c=dr.SPHERE_.haversineDistance(r.slice(4,6),r.slice(6,8));x=(i+c)/2;var a=h?fi.METERS_PER_UNIT[h]:e.getMetersPerUnit();a!==void 0&&(x/=a)}}return x},dr.addEquivalentProjections=function(e){dr.addProjections(e),e.forEach(function(t){e.forEach(function(n){t!==n&&bi.add(t,n,dr.cloneTransform)})})},dr.addEquivalentTransforms=function(e,t,n,h){e.forEach(function(x){t.forEach(function(S){bi.add(x,S,n),bi.add(S,x,h)})})},dr.addProjection=function(e){Ga.add(e.getCode(),e),bi.add(e,e,dr.cloneTransform)},dr.addProjections=function(e){e.forEach(dr.addProjection)},dr.clearAllProjections=function(){Ga.clear(),bi.clear()},dr.createProjection=function(e,t){return e?typeof e=="string"?dr.get(e):e:dr.get(t)},dr.addCoordinateTransforms=function(e,t,n,h){var x=dr.get(e),S=dr.get(t);bi.add(x,S,dr.createTransformFromCoordinateTransform(n)),bi.add(S,x,dr.createTransformFromCoordinateTransform(h))},dr.createTransformFromCoordinateTransform=function(e){return function(t,n,h){var x=t.length,S=h!==void 0?h:2,f=n!==void 0?n:new Array(x),u,r,i;for(r=0;r<x;r+=S)for(u=e([t[r],t[r+1]]),f[r]=u[0],f[r+1]=u[1],i=S-1;i>=2;--i)f[r+i]=t[r+i];return f}},dr.fromLonLat=function(e,t){return dr.transform(e,"EPSG:4326",t!==void 0?t:"EPSG:3857")},dr.toLonLat=function(e,t){var n=dr.transform(e,t!==void 0?t:"EPSG:3857","EPSG:4326"),h=n[0];return(h<-180||h>180)&&(n[0]=wr.modulo(h+180,360)-180),n},dr.get=function(e){var t=null;if(e instanceof ei)t=e;else if(typeof e=="string"){var n=e;if(t=Ga.get(n),tt.ENABLE_PROJ4JS&&!t){var h=Qa.get();typeof h=="function"&&h.defs(n)!==void 0&&(t=new ei({code:n}),dr.addProjection(t))}}return t},dr.equivalent=function(e,t){if(e===t)return!0;var n=e.getUnits()===t.getUnits();if(e.getCode()===t.getCode())return n;var h=dr.getTransformFromProjections(e,t);return h===dr.cloneTransform&&n},dr.getTransform=function(e,t){var n=dr.get(e),h=dr.get(t);return dr.getTransformFromProjections(n,h)},dr.getTransformFromProjections=function(e,t){var n=e.getCode(),h=t.getCode(),x=bi.get(n,h);if(tt.ENABLE_PROJ4JS&&!x){var S=Qa.get();if(typeof S=="function"){var f=S.defs(n),u=S.defs(h);if(f!==void 0&&u!==void 0){if(f===u)dr.addEquivalentProjections([t,e]);else{var r=S(h,n);dr.addCoordinateTransforms(t,e,r.forward,r.inverse)}x=bi.get(n,h)}}}return x||(x=dr.identityTransform),x},dr.identityTransform=function(e,t,n){if(t!==void 0&&e!==t){for(var h=0,x=e.length;h<x;++h)t[h]=e[h];e=t}return e},dr.cloneTransform=function(e,t,n){var h;if(t!==void 0){for(var x=0,S=e.length;x<S;++x)t[x]=e[x];h=t}else h=e.slice();return h},dr.transform=function(e,t,n){var h=dr.getTransform(t,n);return h(e,void 0,e.length)},dr.transformExtent=function(e,t,n){var h=dr.getTransform(t,n);return Tt.applyTransform(e,h)},dr.transformWithProjections=function(e,t,n){var h=dr.getTransformFromProjections(t,n);return h(e)},dr.addCommon=function(){dr.addEquivalentProjections(fn.PROJECTIONS),dr.addEquivalentProjections(ci.PROJECTIONS),dr.addEquivalentTransforms(ci.PROJECTIONS,fn.PROJECTIONS,fn.fromEPSG4326,fn.toEPSG4326)},dr.addCommon();var Qt={};Qt.tmp_=new Array(6),Qt.create=function(){return[1,0,0,1,0,0]},Qt.reset=function(e){return Qt.set(e,1,0,0,1,0,0)},Qt.multiply=function(e,t){var n=e[0],h=e[1],x=e[2],S=e[3],f=e[4],u=e[5],r=t[0],i=t[1],c=t[2],a=t[3],l=t[4],s=t[5];return e[0]=n*r+x*i,e[1]=h*r+S*i,e[2]=n*c+x*a,e[3]=h*c+S*a,e[4]=n*l+x*s+f,e[5]=h*l+S*s+u,e},Qt.set=function(e,t,n,h,x,S,f){return e[0]=t,e[1]=n,e[2]=h,e[3]=x,e[4]=S,e[5]=f,e},Qt.setFromArray=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},Qt.apply=function(e,t){var n=t[0],h=t[1];return t[0]=e[0]*n+e[2]*h+e[4],t[1]=e[1]*n+e[3]*h+e[5],t},Qt.rotate=function(e,t){var n=Math.cos(t),h=Math.sin(t);return Qt.multiply(e,Qt.set(Qt.tmp_,n,h,-h,n,0,0))},Qt.scale=function(e,t,n){return Qt.multiply(e,Qt.set(Qt.tmp_,t,0,0,n,0,0))},Qt.translate=function(e,t,n){return Qt.multiply(e,Qt.set(Qt.tmp_,1,0,0,1,t,n))},Qt.compose=function(e,t,n,h,x,S,f,u){var r=Math.sin(S),i=Math.cos(S);return e[0]=h*i,e[1]=x*r,e[2]=-h*r,e[3]=x*i,e[4]=f*h*i-u*h*r+t,e[5]=f*x*r+u*x*i+n,e},Qt.invert=function(e){var t=Qt.determinant(e);_n.assert(t!==0,32);var n=e[0],h=e[1],x=e[2],S=e[3],f=e[4],u=e[5];return e[0]=S/t,e[1]=-h/t,e[2]=-x/t,e[3]=n/t,e[4]=(x*u-S*f)/t,e[5]=-(n*u-h*f)/t,e},Qt.determinant=function(e){return e[0]*e[3]-e[1]*e[2]};var gi=function(){Or.call(this),this.extent_=Tt.createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.tmpTransform_=Qt.create()};tt.inherits(gi,Or),gi.prototype.clone=function(){},gi.prototype.closestPointXY=function(e,t,n,h){},gi.prototype.getClosestPoint=function(e,t){var n=t||[NaN,NaN];return this.closestPointXY(e[0],e[1],n,1/0),n},gi.prototype.intersectsCoordinate=function(e){return this.containsXY(e[0],e[1])},gi.prototype.computeExtent=function(e){},gi.prototype.containsXY=Qn.FALSE,gi.prototype.getExtent=function(e){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),Tt.returnOrUpdate(this.extent_,e)},gi.prototype.rotate=function(e,t){},gi.prototype.scale=function(e,t,n){},gi.prototype.simplify=function(e){return this.getSimplifiedGeometry(e*e)},gi.prototype.getSimplifiedGeometry=function(e){},gi.prototype.getType=function(){},gi.prototype.applyTransform=function(e){},gi.prototype.intersectsExtent=function(e){},gi.prototype.translate=function(e,t){},gi.prototype.transform=function(e,t){var n=this.tmpTransform_;e=dr.get(e);var h=e.getUnits()==fi.TILE_PIXELS?function(x,S,f){var u=e.getExtent(),r=e.getWorldExtent(),i=Tt.getHeight(r)/Tt.getHeight(u);return Qt.compose(n,r[0],r[3],i,-i,0,0,0),qn.transform2D(x,0,x.length,f,n,S),dr.getTransform(e,t)(x,S,f)}:dr.getTransform(e,t);return this.applyTransform(h),this};var cn=function(){gi.call(this),this.layout=ki.XY,this.stride=2,this.flatCoordinates=null};tt.inherits(cn,gi),cn.getLayoutForStride_=function(e){var t;return e==2?t=ki.XY:e==3?t=ki.XYZ:e==4&&(t=ki.XYZM),t},cn.getStrideForLayout=function(e){var t;return e==ki.XY?t=2:e==ki.XYZ||e==ki.XYM?t=3:e==ki.XYZM&&(t=4),t},cn.prototype.containsXY=Qn.FALSE,cn.prototype.computeExtent=function(e){return Tt.createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},cn.prototype.getCoordinates=function(){},cn.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},cn.prototype.getFlatCoordinates=function(){return this.flatCoordinates},cn.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},cn.prototype.getLayout=function(){return this.layout},cn.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Zr.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var t=e.toString();if(this.simplifiedGeometryCache.hasOwnProperty(t))return this.simplifiedGeometryCache[t];var n=this.getSimplifiedGeometryInternal(e),h=n.getFlatCoordinates();return h.length<this.flatCoordinates.length?(this.simplifiedGeometryCache[t]=n,n):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)},cn.prototype.getSimplifiedGeometryInternal=function(e){return this},cn.prototype.getStride=function(){return this.stride},cn.prototype.setFlatCoordinatesInternal=function(e,t){this.stride=cn.getStrideForLayout(e),this.layout=e,this.flatCoordinates=t},cn.prototype.setCoordinates=function(e,t){},cn.prototype.setLayout=function(e,t,n){var h;if(e)h=cn.getStrideForLayout(e);else{var x;for(x=0;x<n;++x)if(t.length===0){this.layout=ki.XY,this.stride=2;return}else t=t[0];h=t.length,e=cn.getLayoutForStride_(h)}this.layout=e,this.stride=h},cn.prototype.applyTransform=function(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},cn.prototype.rotate=function(e,t){var n=this.getFlatCoordinates();if(n){var h=this.getStride();qn.rotate(n,0,n.length,h,e,t,n),this.changed()}},cn.prototype.scale=function(e,t,n){var h=t;h===void 0&&(h=e);var x=n;x||(x=Tt.getCenter(this.getExtent()));var S=this.getFlatCoordinates();if(S){var f=this.getStride();qn.scale(S,0,S.length,f,e,h,x,S),this.changed()}},cn.prototype.translate=function(e,t){var n=this.getFlatCoordinates();if(n){var h=this.getStride();qn.translate(n,0,n.length,h,e,t,n),this.changed()}},cn.transform2D=function(e,t,n){var h=e.getFlatCoordinates();if(h){var x=e.getStride();return qn.transform2D(h,0,h.length,x,t,n)}else return null};var po={};po.linearRing=function(e,t,n,h){for(var x=0,S=e[n-h],f=e[n-h+1];t<n;t+=h){var u=e[t],r=e[t+1];x+=f*u-S*r,S=u,f=r}return x/2},po.linearRings=function(e,t,n,h){var x=0,S,f;for(S=0,f=n.length;S<f;++S){var u=n[S];x+=po.linearRing(e,t,u,h),t=u}return x},po.linearRingss=function(e,t,n,h){var x=0,S,f;for(S=0,f=n.length;S<f;++S){var u=n[S];x+=po.linearRings(e,t,u,h),t=u[u.length-1]}return x};var Fi={};Fi.point=function(e,t,n,h,x,S,f){var u=e[t],r=e[t+1],i=e[n]-u,c=e[n+1]-r,a,l;if(i===0&&c===0)l=t;else{var s=((x-u)*i+(S-r)*c)/(i*i+c*c);if(s>1)l=n;else if(s>0){for(a=0;a<h;++a)f[a]=wr.lerp(e[t+a],e[n+a],s);f.length=h;return}else l=t}for(a=0;a<h;++a)f[a]=e[l+a];f.length=h},Fi.getMaxSquaredDelta=function(e,t,n,h,x){var S=e[t],f=e[t+1];for(t+=h;t<n;t+=h){var u=e[t],r=e[t+1],i=wr.squaredDistance(S,f,u,r);i>x&&(x=i),S=u,f=r}return x},Fi.getsMaxSquaredDelta=function(e,t,n,h,x){var S,f;for(S=0,f=n.length;S<f;++S){var u=n[S];x=Fi.getMaxSquaredDelta(e,t,u,h,x),t=u}return x},Fi.getssMaxSquaredDelta=function(e,t,n,h,x){var S,f;for(S=0,f=n.length;S<f;++S){var u=n[S];x=Fi.getsMaxSquaredDelta(e,t,u,h,x),t=u[u.length-1]}return x},Fi.getClosestPoint=function(e,t,n,h,x,S,f,u,r,i,c){if(t==n)return i;var a,l;if(x===0)if(l=wr.squaredDistance(f,u,e[t],e[t+1]),l<i){for(a=0;a<h;++a)r[a]=e[t+a];return r.length=h,l}else return i;for(var s=c||[NaN,NaN],v=t+h;v<n;)if(Fi.point(e,v-h,v,h,f,u,s),l=wr.squaredDistance(f,u,s[0],s[1]),l<i){for(i=l,a=0;a<h;++a)r[a]=s[a];r.length=h,v+=h}else v+=h*Math.max((Math.sqrt(l)-Math.sqrt(i))/x|0,1);if(S&&(Fi.point(e,n-h,t,h,f,u,s),l=wr.squaredDistance(f,u,s[0],s[1]),l<i)){for(i=l,a=0;a<h;++a)r[a]=s[a];r.length=h}return i},Fi.getsClosestPoint=function(e,t,n,h,x,S,f,u,r,i,c){var a=c||[NaN,NaN],l,s;for(l=0,s=n.length;l<s;++l){var v=n[l];i=Fi.getClosestPoint(e,t,v,h,x,S,f,u,r,i,a),t=v}return i},Fi.getssClosestPoint=function(e,t,n,h,x,S,f,u,r,i,c){var a=c||[NaN,NaN],l,s;for(l=0,s=n.length;l<s;++l){var v=n[l];i=Fi.getsClosestPoint(e,t,v,h,x,S,f,u,r,i,a),t=v[v.length-1]}return i};var qa={};qa.coordinate=function(e,t,n,h){var x,S;for(x=0,S=n.length;x<S;++x)e[t++]=n[x];return t},qa.coordinates=function(e,t,n,h){var x,S;for(x=0,S=n.length;x<S;++x){var f=n[x],u;for(u=0;u<h;++u)e[t++]=f[u]}return t},qa.coordinatess=function(e,t,n,h,x){var S=x||[],f=0,u,r;for(u=0,r=n.length;u<r;++u){var i=qa.coordinates(e,t,n[u],h);S[f++]=i,t=i}return S.length=f,S},qa.coordinatesss=function(e,t,n,h,x){var S=x||[],f=0,u,r;for(u=0,r=n.length;u<r;++u){var i=qa.coordinatess(e,t,n[u],h,S[f]);S[f++]=i,t=i[i.length-1]}return S.length=f,S};var Ha={};Ha.coordinates=function(e,t,n,h,x){var S=x!==void 0?x:[],f=0,u;for(u=t;u<n;u+=h)S[f++]=e.slice(u,u+h);return S.length=f,S},Ha.coordinatess=function(e,t,n,h,x){var S=x!==void 0?x:[],f=0,u,r;for(u=0,r=n.length;u<r;++u){var i=n[u];S[f++]=Ha.coordinates(e,t,i,h,S[f]),t=i}return S.length=f,S},Ha.coordinatesss=function(e,t,n,h,x){var S=x!==void 0?x:[],f=0,u,r;for(u=0,r=n.length;u<r;++u){var i=n[u];S[f++]=Ha.coordinatess(e,t,i,h,S[f]),t=i[i.length-1]}return S.length=f,S};var Nn={};Nn.lineString=function(e,t,n,h,x,S,f){var u=f!==void 0?f:[];return S||(n=Nn.radialDistance(e,t,n,h,x,u,0),e=u,t=0,h=2),u.length=Nn.douglasPeucker(e,t,n,h,x,u,0),u},Nn.douglasPeucker=function(e,t,n,h,x,S,f){var u=(n-t)/h;if(u<3){for(;t<n;t+=h)S[f++]=e[t],S[f++]=e[t+1];return f}var r=new Array(u);r[0]=1,r[u-1]=1;for(var i=[t,n-h],c=0,a;i.length>0;){var l=i.pop(),s=i.pop(),v=0,d=e[s],p=e[s+1],o=e[l],y=e[l+1];for(a=s+h;a<l;a+=h){var _=e[a],E=e[a+1],M=wr.squaredSegmentDistance(_,E,d,p,o,y);M>v&&(c=a,v=M)}v>x&&(r[(c-t)/h]=1,s+h<c&&i.push(s,c),c+h<l&&i.push(c,l))}for(a=0;a<u;++a)r[a]&&(S[f++]=e[t+a*h],S[f++]=e[t+a*h+1]);return f},Nn.douglasPeuckers=function(e,t,n,h,x,S,f,u){var r,i;for(r=0,i=n.length;r<i;++r){var c=n[r];f=Nn.douglasPeucker(e,t,c,h,x,S,f),u.push(f),t=c}return f},Nn.douglasPeuckerss=function(e,t,n,h,x,S,f,u){var r,i;for(r=0,i=n.length;r<i;++r){var c=n[r],a=[];f=Nn.douglasPeuckers(e,t,c,h,x,S,f,a),u.push(a),t=c[c.length-1]}return f},Nn.radialDistance=function(e,t,n,h,x,S,f){if(n<=t+h){for(;t<n;t+=h)S[f++]=e[t],S[f++]=e[t+1];return f}var u=e[t],r=e[t+1];S[f++]=u,S[f++]=r;var i=u,c=r;for(t+=h;t<n;t+=h)i=e[t],c=e[t+1],wr.squaredDistance(u,r,i,c)>x&&(S[f++]=i,S[f++]=c,u=i,r=c);return(i!=u||c!=r)&&(S[f++]=i,S[f++]=c),f},Nn.snap=function(e,t){return t*Math.round(e/t)},Nn.quantize=function(e,t,n,h,x,S,f){if(t==n)return f;var u=Nn.snap(e[t],x),r=Nn.snap(e[t+1],x);t+=h,S[f++]=u,S[f++]=r;var i,c;do if(i=Nn.snap(e[t],x),c=Nn.snap(e[t+1],x),t+=h,t==n)return S[f++]=i,S[f++]=c,f;while(i==u&&c==r);for(;t<n;){var a,l;if(a=Nn.snap(e[t],x),l=Nn.snap(e[t+1],x),t+=h,!(a==i&&l==c)){var s=i-u,v=c-r,d=a-u,p=l-r;if(s*p==v*d&&(s<0&&d<s||s==d||s>0&&d>s)&&(v<0&&p<v||v==p||v>0&&p>v)){i=a,c=l;continue}S[f++]=i,S[f++]=c,u=i,r=c,i=a,c=l}}return S[f++]=i,S[f++]=c,f},Nn.quantizes=function(e,t,n,h,x,S,f,u){var r,i;for(r=0,i=n.length;r<i;++r){var c=n[r];f=Nn.quantize(e,t,c,h,x,S,f),u.push(f),t=c}return f},Nn.quantizess=function(e,t,n,h,x,S,f,u){var r,i;for(r=0,i=n.length;r<i;++r){var c=n[r],a=[];f=Nn.quantizes(e,t,c,h,x,S,f,a),u.push(a),t=c[c.length-1]}return f};var ta=function(e,t){cn.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(e,t)};tt.inherits(ta,cn),ta.prototype.clone=function(){var e=new ta(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),e},ta.prototype.closestPointXY=function(e,t,n,h){return h<Tt.closestSquaredDistanceXY(this.getExtent(),e,t)?h:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Fi.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Fi.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,h))},ta.prototype.getArea=function(){return po.linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},ta.prototype.getCoordinates=function(){return Ha.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},ta.prototype.getSimplifiedGeometryInternal=function(e){var t=[];t.length=Nn.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0);var n=new ta(null);return n.setFlatCoordinates(ki.XY,t),n},ta.prototype.getType=function(){return Er.LINEAR_RING},ta.prototype.intersectsExtent=function(e){},ta.prototype.setCoordinates=function(e,t){e?(this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qa.coordinates(this.flatCoordinates,0,e,this.stride),this.changed()):this.setFlatCoordinates(ki.XY,null)},ta.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t),this.changed()};var La=function(e,t){cn.call(this),this.setCoordinates(e,t)};tt.inherits(La,cn),La.prototype.clone=function(){var e=new La(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),e},La.prototype.closestPointXY=function(e,t,n,h){var x=this.flatCoordinates,S=wr.squaredDistance(e,t,x[0],x[1]);if(S<h){var f=this.stride,u;for(u=0;u<f;++u)n[u]=x[u];return n.length=f,S}else return h},La.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},La.prototype.computeExtent=function(e){return Tt.createOrUpdateFromCoordinate(this.flatCoordinates,e)},La.prototype.getType=function(){return Er.POINT},La.prototype.intersectsExtent=function(e){return Tt.containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])},La.prototype.setCoordinates=function(e,t){e?(this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=qa.coordinate(this.flatCoordinates,0,e,this.stride),this.changed()):this.setFlatCoordinates(ki.XY,null)},La.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t),this.changed()};var Ui={};Ui.linearRingContainsExtent=function(e,t,n,h,x){var S=Tt.forEachCorner(x,function(f){return!Ui.linearRingContainsXY(e,t,n,h,f[0],f[1])});return!S},Ui.linearRingContainsXY=function(e,t,n,h,x,S){for(var f=0,u=e[n-h],r=e[n-h+1];t<n;t+=h){var i=e[t],c=e[t+1];r<=S?c>S&&(i-u)*(S-r)-(x-u)*(c-r)>0&&f++:c<=S&&(i-u)*(S-r)-(x-u)*(c-r)<0&&f--,u=i,r=c}return f!==0},Ui.linearRingsContainsXY=function(e,t,n,h,x,S){if(n.length===0||!Ui.linearRingContainsXY(e,t,n[0],h,x,S))return!1;var f,u;for(f=1,u=n.length;f<u;++f)if(Ui.linearRingContainsXY(e,n[f-1],n[f],h,x,S))return!1;return!0},Ui.linearRingssContainsXY=function(e,t,n,h,x,S){if(n.length===0)return!1;var f,u;for(f=0,u=n.length;f<u;++f){var r=n[f];if(Ui.linearRingsContainsXY(e,t,r,h,x,S))return!0;t=r[r.length-1]}return!1};var ws={};ws.linearRings=function(e,t,n,h,x,S,f){for(var u,r,i,c,a,l,s,v=x[S+1],d=[],p=0,o=n.length;p<o;++p){var y=n[p];for(c=e[y-h],l=e[y-h+1],u=t;u<y;u+=h)a=e[u],s=e[u+1],(v<=l&&s<=v||l<=v&&v<=s)&&(i=(v-l)/(s-l)*(a-c)+c,d.push(i)),c=a,l=s}var _=NaN,E=-1/0;for(d.sort(Vr.numberSafeCompareFunction),c=d[0],u=1,r=d.length;u<r;++u){a=d[u];var M=Math.abs(a-c);M>E&&(i=(c+a)/2,Ui.linearRingsContainsXY(e,t,n,h,i,v)&&(_=i,E=M)),c=a}return isNaN(_)&&(_=x[S]),f?(f.push(_,v,E),f):[_,v,E]},ws.linearRingss=function(e,t,n,h,x){var S=[],f,u;for(f=0,u=n.length;f<u;++f){var r=n[f];S=ws.linearRings(e,t,r,h,x,2*f,S),t=r[r.length-1]}return S};var Zl={};Zl.forEach=function(e,t,n,h,x,S){for(var f=[e[t],e[t+1]],u=[],r;t+h<n;t+=h){if(u[0]=e[t+h],u[1]=e[t+h+1],r=x.call(S,f,u),r)return r;f[0]=u[0],f[1]=u[1]}return!1};var Ya={};Ya.lineString=function(e,t,n,h,x){var S=Tt.extendFlatCoordinates(Tt.createEmpty(),e,t,n,h);return Tt.intersects(x,S)?Tt.containsExtent(x,S)||S[0]>=x[0]&&S[2]<=x[2]||S[1]>=x[1]&&S[3]<=x[3]?!0:Zl.forEach(e,t,n,h,function(f,u){return Tt.intersectsSegment(x,f,u)}):!1},Ya.lineStrings=function(e,t,n,h,x){var S,f;for(S=0,f=n.length;S<f;++S){if(Ya.lineString(e,t,n[S],h,x))return!0;t=n[S]}return!1},Ya.linearRing=function(e,t,n,h,x){return!!(Ya.lineString(e,t,n,h,x)||Ui.linearRingContainsXY(e,t,n,h,x[0],x[1])||Ui.linearRingContainsXY(e,t,n,h,x[0],x[3])||Ui.linearRingContainsXY(e,t,n,h,x[2],x[1])||Ui.linearRingContainsXY(e,t,n,h,x[2],x[3]))},Ya.linearRings=function(e,t,n,h,x){if(!Ya.linearRing(e,t,n[0],h,x))return!1;if(n.length===1)return!0;var S,f;for(S=1,f=n.length;S<f;++S)if(Ui.linearRingContainsExtent(e,n[S-1],n[S],h,x))return!1;return!0},Ya.linearRingss=function(e,t,n,h,x){var S,f;for(S=0,f=n.length;S<f;++S){var u=n[S];if(Ya.linearRings(e,t,u,h,x))return!0;t=u[u.length-1]}return!1};var Kl={};Kl.coordinates=function(e,t,n,h){for(;t<n-h;){var x;for(x=0;x<h;++x){var S=e[t+x];e[t+x]=e[n-h+x],e[n-h+x]=S}t+=h,n-=h}};var Bi={};Bi.linearRingIsClockwise=function(e,t,n,h){for(var x=0,S=e[n-h],f=e[n-h+1];t<n;t+=h){var u=e[t],r=e[t+1];x+=(u-S)*(r+f),S=u,f=r}return x>0},Bi.linearRingsAreOriented=function(e,t,n,h,x){var S=x!==void 0?x:!1,f,u;for(f=0,u=n.length;f<u;++f){var r=n[f],i=Bi.linearRingIsClockwise(e,t,r,h);if(f===0){if(S&&i||!S&&!i)return!1}else if(S&&!i||!S&&i)return!1;t=r}return!0},Bi.linearRingssAreOriented=function(e,t,n,h,x){var S,f;for(S=0,f=n.length;S<f;++S)if(!Bi.linearRingsAreOriented(e,t,n[S],h,x))return!1;return!0},Bi.orientLinearRings=function(e,t,n,h,x){var S=x!==void 0?x:!1,f,u;for(f=0,u=n.length;f<u;++f){var r=n[f],i=Bi.linearRingIsClockwise(e,t,r,h),c=f===0?S&&i||!S&&!i:S&&!i||!S&&i;c&&Kl.coordinates(e,t,r,h),t=r}return t},Bi.orientLinearRingss=function(e,t,n,h,x){var S,f;for(S=0,f=n.length;S<f;++S)t=Bi.orientLinearRings(e,t,n[S],h,x);return t};var hn=function(e,t){cn.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(e,t)};tt.inherits(hn,cn),hn.prototype.appendLinearRing=function(e){this.flatCoordinates?Vr.extend(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},hn.prototype.clone=function(){var e=new hn(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),e},hn.prototype.closestPointXY=function(e,t,n,h){return h<Tt.closestSquaredDistanceXY(this.getExtent(),e,t)?h:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Fi.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Fi.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,h))},hn.prototype.containsXY=function(e,t){return Ui.linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)},hn.prototype.getArea=function(){return po.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},hn.prototype.getCoordinates=function(e){var t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Bi.orientLinearRings(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Ha.coordinatess(t,0,this.ends_,this.stride)},hn.prototype.getEnds=function(){return this.ends_},hn.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var e=Tt.getCenter(this.getExtent());this.flatInteriorPoint_=ws.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},hn.prototype.getInteriorPoint=function(){return new La(this.getFlatInteriorPoint(),ki.XYM)},hn.prototype.getLinearRingCount=function(){return this.ends_.length},hn.prototype.getLinearRing=function(e){if(e<0||this.ends_.length<=e)return null;var t=new ta(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e])),t},hn.prototype.getLinearRings=function(){var e=this.layout,t=this.flatCoordinates,n=this.ends_,h=[],x=0,S,f;for(S=0,f=n.length;S<f;++S){var u=n[S],r=new ta(null);r.setFlatCoordinates(e,t.slice(x,u)),h.push(r),x=u}return h},hn.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;Bi.linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Bi.orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},hn.prototype.getSimplifiedGeometryInternal=function(e){var t=[],n=[];t.length=Nn.quantizes(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n);var h=new hn(null);return h.setFlatCoordinates(ki.XY,t,n),h},hn.prototype.getType=function(){return Er.POLYGON},hn.prototype.intersectsExtent=function(e){return Ya.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)},hn.prototype.setCoordinates=function(e,t){if(!e)this.setFlatCoordinates(ki.XY,null,this.ends_);else{this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=qa.coordinatess(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}},hn.prototype.setFlatCoordinates=function(e,t,n){this.setFlatCoordinatesInternal(e,t),this.ends_=n,this.changed()},hn.circular=function(e,t,n,h){var x=h||32,S=[],f;for(f=0;f<x;++f)Vr.extend(S,e.offset(t,n,2*Math.PI*f/x));S.push(S[0],S[1]);var u=new hn(null);return u.setFlatCoordinates(ki.XY,S,[S.length]),u},hn.fromExtent=function(e){var t=e[0],n=e[1],h=e[2],x=e[3],S=[t,n,t,x,h,x,h,n,t,n],f=new hn(null);return f.setFlatCoordinates(ki.XY,S,[S.length]),f},hn.fromCircle=function(e,t,n){for(var h=t||32,x=e.getStride(),S=e.getLayout(),f=new hn(null,S),u=x*(h+1),r=new Array(u),i=0;i<u;i++)r[i]=0;var c=[r.length];return f.setFlatCoordinates(S,r,c),hn.makeRegular(f,e.getCenter(),e.getRadius(),n),f},hn.makeRegular=function(e,t,n,h){for(var x=e.getFlatCoordinates(),S=e.getLayout(),f=e.getStride(),u=e.getEnds(),r=x.length/f-1,i=h||0,c,a,l=0;l<=r;++l)a=l*f,c=i+wr.modulo(l,r)*2*Math.PI/r,x[a]=t[0]+n*Math.cos(c),x[a+1]=t[1]+n*Math.sin(c);e.setFlatCoordinates(S,x,u)};var Rr=function(e){Or.call(this);var t=Zr.assign({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=dr.createProjection(t.projection,"EPSG:3857"),this.applyOptions_(t)};tt.inherits(Rr,Or),Rr.prototype.applyOptions_=function(e){var t={};t[Pi.CENTER]=e.center!==void 0?e.center:null;var n=Rr.createResolutionConstraint_(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.minZoom_=n.minZoom;var h=Rr.createCenterConstraint_(e),x=n.constraint,S=Rr.createRotationConstraint_(e);this.constraints_={center:h,resolution:x,rotation:S},e.resolution!==void 0?t[Pi.RESOLUTION]=e.resolution:e.zoom!==void 0&&(t[Pi.RESOLUTION]=this.constrainResolution(this.maxResolution_,e.zoom-this.minZoom_),this.resolutions_&&(t[Pi.RESOLUTION]=wr.clamp(Number(this.getResolution()||t[Pi.RESOLUTION]),this.minResolution_,this.maxResolution_))),t[Pi.ROTATION]=e.rotation!==void 0?e.rotation:0,this.setProperties(t),this.options_=e},Rr.prototype.getUpdatedOptions_=function(e){var t=Zr.assign({},this.options_);return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenter(),t.rotation=this.getRotation(),Zr.assign({},t,e)},Rr.prototype.animate=function(e){var t=arguments.length,n;if(t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t),!this.isDef()){var h=arguments[t-1];h.center&&this.setCenter(h.center),h.zoom!==void 0&&this.setZoom(h.zoom),h.rotation!==void 0&&this.setRotation(h.rotation),n&&n(!0);return}for(var x=Date.now(),S=this.getCenter().slice(),f=this.getResolution(),u=this.getRotation(),r=[],i=0;i<t;++i){var c=arguments[i],a={start:x,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||ui.inAndOut};if(c.center&&(a.sourceCenter=S,a.targetCenter=c.center,S=a.targetCenter),c.zoom!==void 0?(a.sourceResolution=f,a.targetResolution=this.constrainResolution(this.maxResolution_,c.zoom-this.minZoom_,0),f=a.targetResolution):c.resolution&&(a.sourceResolution=f,a.targetResolution=c.resolution,f=a.targetResolution),c.rotation!==void 0){a.sourceRotation=u;var l=wr.modulo(c.rotation-u+Math.PI,2*Math.PI)-Math.PI;a.targetRotation=u+l,u=a.targetRotation}a.callback=n,Rr.isNoopAnimation(a)?a.complete=!0:x+=a.duration,r.push(a)}this.animations_.push(r),this.setHint(Tn.ANIMATING,1),this.updateAnimations_()},Rr.prototype.getAnimating=function(){return this.hints_[Tn.ANIMATING]>0},Rr.prototype.getInteracting=function(){return this.hints_[Tn.INTERACTING]>0},Rr.prototype.cancelAnimations=function(){this.setHint(Tn.ANIMATING,-this.hints_[Tn.ANIMATING]);for(var e=0,t=this.animations_.length;e<t;++e){var n=this.animations_[e];n[0].callback&&n[0].callback(!1)}this.animations_.length=0},Rr.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var e=Date.now(),t=!1,n=this.animations_.length-1;n>=0;--n){for(var h=this.animations_[n],x=!0,S=0,f=h.length;S<f;++S){var u=h[S];if(!u.complete){var r=e-u.start,i=u.duration>0?r/u.duration:1;i>=1?(u.complete=!0,i=1):x=!1;var c=u.easing(i);if(u.sourceCenter){var a=u.sourceCenter[0],l=u.sourceCenter[1],s=u.targetCenter[0],v=u.targetCenter[1],d=a+c*(s-a),p=l+c*(v-l);this.set(Pi.CENTER,[d,p])}if(u.sourceResolution&&u.targetResolution){var o=c===1?u.targetResolution:u.sourceResolution+c*(u.targetResolution-u.sourceResolution);u.anchor&&this.set(Pi.CENTER,this.calculateCenterZoom(o,u.anchor)),this.set(Pi.RESOLUTION,o)}if(u.sourceRotation!==void 0&&u.targetRotation!==void 0){var y=c===1?wr.modulo(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+c*(u.targetRotation-u.sourceRotation);u.anchor&&this.set(Pi.CENTER,this.calculateCenterRotate(y,u.anchor)),this.set(Pi.ROTATION,y)}if(t=!0,!u.complete)break}}if(x){this.animations_[n]=null,this.setHint(Tn.ANIMATING,-1);var _=h[0].callback;_&&_(!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},Rr.prototype.calculateCenterRotate=function(e,t){var n,h=this.getCenter();return h!==void 0&&(n=[h[0]-t[0],h[1]-t[1]],bn.rotate(n,e-this.getRotation()),bn.add(n,t)),n},Rr.prototype.calculateCenterZoom=function(e,t){var n,h=this.getCenter(),x=this.getResolution();if(h!==void 0&&x!==void 0){var S=t[0]-e*(t[0]-h[0])/x,f=t[1]-e*(t[1]-h[1])/x;n=[S,f]}return n},Rr.prototype.getSizeFromViewport_=function(){var e=[100,100],t='.ol-viewport[data-view="'+tt.getUid(this)+'"]',n=document.querySelector(t);if(n){var h=getComputedStyle(n);e[0]=parseInt(h.width,10),e[1]=parseInt(h.height,10)}return e},Rr.prototype.constrainCenter=function(e){return this.constraints_.center(e)},Rr.prototype.constrainResolution=function(e,t,n){var h=t||0,x=n||0;return this.constraints_.resolution(e,h,x)},Rr.prototype.constrainRotation=function(e,t){var n=t||0;return this.constraints_.rotation(e,n)},Rr.prototype.getCenter=function(){return this.get(Pi.CENTER)},Rr.prototype.getConstraints=function(){return this.constraints_},Rr.prototype.getHints=function(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()},Rr.prototype.calculateExtent=function(e){var t=e||this.getSizeFromViewport_(),n=this.getCenter();_n.assert(n,1);var h=this.getResolution();_n.assert(h!==void 0,2);var x=this.getRotation();return _n.assert(x!==void 0,3),Tt.getForViewAndSize(n,h,x,t)},Rr.prototype.getMaxResolution=function(){return this.maxResolution_},Rr.prototype.getMinResolution=function(){return this.minResolution_},Rr.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},Rr.prototype.setMaxZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))},Rr.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},Rr.prototype.setMinZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))},Rr.prototype.getProjection=function(){return this.projection_},Rr.prototype.getResolution=function(){return this.get(Pi.RESOLUTION)},Rr.prototype.getResolutions=function(){return this.resolutions_},Rr.prototype.getResolutionForExtent=function(e,t){var n=t||this.getSizeFromViewport_(),h=Tt.getWidth(e)/n[0],x=Tt.getHeight(e)/n[1];return Math.max(h,x)},Rr.prototype.getResolutionForValueFunction=function(e){var t=e||2,n=this.maxResolution_,h=this.minResolution_,x=Math.log(n/h)/Math.log(t);return function(S){var f=n/Math.pow(t,S*x);return f}},Rr.prototype.getRotation=function(){return this.get(Pi.ROTATION)},Rr.prototype.getValueForResolutionFunction=function(e){var t=e||2,n=this.maxResolution_,h=this.minResolution_,x=Math.log(n/h)/Math.log(t);return function(S){var f=Math.log(n/S)/Math.log(t)/x;return f}},Rr.prototype.getState=function(){var e=this.getCenter(),t=this.getProjection(),n=this.getResolution(),h=this.getRotation();return{center:e.slice(),projection:t!==void 0?t:null,resolution:n,rotation:h,zoom:this.getZoom()}},Rr.prototype.getZoom=function(){var e,t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e},Rr.prototype.getZoomForResolution=function(e){var t=this.minZoom_||0,n,h;if(this.resolutions_){var x=Vr.linearFindNearest(this.resolutions_,e,1);t=x,n=this.resolutions_[x],x==this.resolutions_.length-1?h=2:h=n/this.resolutions_[x+1]}else n=this.maxResolution_,h=this.zoomFactor_;return t+Math.log(n/e)/Math.log(h)},Rr.prototype.getResolutionForZoom=function(e){return this.constrainResolution(this.maxResolution_,e-this.minZoom_,0)},Rr.prototype.fit=function(e,t){var n=t||{},h=n.size;h||(h=this.getSizeFromViewport_());var x;e instanceof cn?e.getType()===Er.CIRCLE?(e=e.getExtent(),x=hn.fromExtent(e),x.rotate(this.getRotation(),Tt.getCenter(e))):x=e:(_n.assert(Array.isArray(e),24),_n.assert(!Tt.isEmpty(e),25),x=hn.fromExtent(e));var S=n.padding!==void 0?n.padding:[0,0,0,0],f=n.constrainResolution!==void 0?n.constrainResolution:!0,u=n.nearest!==void 0?n.nearest:!1,r;n.minResolution!==void 0?r=n.minResolution:n.maxZoom!==void 0?r=this.constrainResolution(this.maxResolution_,n.maxZoom-this.minZoom_,0):r=0;for(var i=x.getFlatCoordinates(),c=this.getRotation(),a=Math.cos(-c),l=Math.sin(-c),s=1/0,v=1/0,d=-1/0,p=-1/0,o=x.getStride(),y=0,_=i.length;y<_;y+=o){var E=i[y]*a-i[y+1]*l,M=i[y]*l+i[y+1]*a;s=Math.min(s,E),v=Math.min(v,M),d=Math.max(d,E),p=Math.max(p,M)}var b=this.getResolutionForExtent([s,v,d,p],[h[0]-S[1]-S[3],h[1]-S[0]-S[2]]);if(b=isNaN(b)?r:Math.max(b,r),f){var w=this.constrainResolution(b,0,0);!u&&w<b&&(w=this.constrainResolution(w,-1,0)),b=w}l=-l;var A=(s+d)/2,R=(v+p)/2;A+=(S[1]-S[3])/2*b,R+=(S[0]-S[2])/2*b;var T=A*a-R*l,C=R*a+A*l,m=[T,C],L=n.callback?n.callback:tt.nullFunction;n.duration!==void 0?this.animate({resolution:b,center:m,duration:n.duration,easing:n.easing},L):(this.setResolution(b),this.setCenter(m),setTimeout(L.bind(void 0,!0),0))},Rr.prototype.centerOn=function(e,t,n){var h=this.getRotation(),x=Math.cos(-h),S=Math.sin(-h),f=e[0]*x-e[1]*S,u=e[1]*x+e[0]*S,r=this.getResolution();f+=(t[0]/2-n[0])*r,u+=(n[1]-t[1]/2)*r,S=-S;var i=f*x-u*S,c=u*x+f*S;this.setCenter([i,c])},Rr.prototype.isDef=function(){return!!this.getCenter()&&this.getResolution()!==void 0},Rr.prototype.rotate=function(e,t){if(t!==void 0){var n=this.calculateCenterRotate(e,t);this.setCenter(n)}this.setRotation(e)},Rr.prototype.setCenter=function(e){this.set(Pi.CENTER,e),this.getAnimating()&&this.cancelAnimations()},Rr.prototype.setHint=function(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]},Rr.prototype.setResolution=function(e){this.set(Pi.RESOLUTION,e),this.getAnimating()&&this.cancelAnimations()},Rr.prototype.setRotation=function(e){this.set(Pi.ROTATION,e),this.getAnimating()&&this.cancelAnimations()},Rr.prototype.setZoom=function(e){this.setResolution(this.getResolutionForZoom(e))},Rr.createCenterConstraint_=function(e){return e.extent!==void 0?As.createExtent(e.extent):As.none},Rr.createResolutionConstraint_=function(e){var t,n,h,x=28,S=2,f=e.minZoom!==void 0?e.minZoom:tt.DEFAULT_MIN_ZOOM,u=e.maxZoom!==void 0?e.maxZoom:x,r=e.zoomFactor!==void 0?e.zoomFactor:S;if(e.resolutions!==void 0){var i=e.resolutions;n=i[f],h=i[u]!==void 0?i[u]:i[i.length-1],t=Ms.createSnapToResolutions(i)}else{var c=dr.createProjection(e.projection,"EPSG:3857"),a=c.getExtent(),l=a?Math.max(Tt.getWidth(a),Tt.getHeight(a)):360*dr.METERS_PER_UNIT[fi.DEGREES]/c.getMetersPerUnit(),s=l/tt.DEFAULT_TILE_SIZE/Math.pow(S,tt.DEFAULT_MIN_ZOOM),v=s/Math.pow(S,x-tt.DEFAULT_MIN_ZOOM);n=e.maxResolution,n!==void 0?f=0:n=s/Math.pow(r,f),h=e.minResolution,h===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?h=n/Math.pow(r,u):h=s/Math.pow(r,u):h=v),u=f+Math.floor(Math.log(n/h)/Math.log(r)),h=n/Math.pow(r,u-f),t=Ms.createSnapToPower(r,n,u-f)}return{constraint:t,maxResolution:n,minResolution:h,minZoom:f,zoomFactor:r}},Rr.createRotationConstraint_=function(e){var t=e.enableRotation!==void 0?e.enableRotation:!0;if(t){var n=e.constrainRotation;return n===void 0||n===!0?Sa.createSnapToZero():n===!1?Sa.none:typeof n=="number"?Sa.createSnapToN(n):Sa.none}else return Sa.disable},Rr.isNoopAnimation=function(e){return!(e.sourceCenter&&e.targetCenter&&!bn.equals(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)};var gn={};gn.createCanvasContext2D=function(e,t){var n=document.createElement("CANVAS");return e&&(n.width=e),t&&(n.height=t),n.getContext("2d")},gn.outerWidth=function(e){var t=e.offsetWidth,n=getComputedStyle(e);return t+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),t},gn.outerHeight=function(e){var t=e.offsetHeight,n=getComputedStyle(e);return t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),t},gn.replaceNode=function(e,t){var n=t.parentNode;n&&n.replaceChild(e,t)},gn.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},gn.removeChildren=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)};var Gi=function(e){var t=e||{},n=Zr.assign({},t);delete n.layers;var h=t.layers;Kn.call(this,n),this.layersListenerKeys_=[],this.listenerKeys_={},Jt.listen(this,Or.getChangeEventType(Gi.Property_.LAYERS),this.handleLayersChanged_,this),h?Array.isArray(h)?h=new Kr(h.slice(),{unique:!0}):(_n.assert(h instanceof Kr,43),h=h):h=new Kr(void 0,{unique:!0}),this.setLayers(h)};tt.inherits(Gi,Kn),Gi.prototype.handleLayerChange_=function(){this.changed()},Gi.prototype.handleLayersChanged_=function(e){this.layersListenerKeys_.forEach(Jt.unlistenByKey),this.layersListenerKeys_.length=0;var t=this.getLayers();this.layersListenerKeys_.push(Jt.listen(t,pa.ADD,this.handleLayersAdd_,this),Jt.listen(t,pa.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(Jt.unlistenByKey);Zr.clear(this.listenerKeys_);var h=t.getArray(),x,S,f;for(x=0,S=h.length;x<S;x++)f=h[x],this.listenerKeys_[tt.getUid(f).toString()]=[Jt.listen(f,ss.PROPERTYCHANGE,this.handleLayerChange_,this),Jt.listen(f,kr.CHANGE,this.handleLayerChange_,this)];this.changed()},Gi.prototype.handleLayersAdd_=function(e){var t=e.element,n=tt.getUid(t).toString();this.listenerKeys_[n]=[Jt.listen(t,ss.PROPERTYCHANGE,this.handleLayerChange_,this),Jt.listen(t,kr.CHANGE,this.handleLayerChange_,this)],this.changed()},Gi.prototype.handleLayersRemove_=function(e){var t=e.element,n=tt.getUid(t).toString();this.listenerKeys_[n].forEach(Jt.unlistenByKey),delete this.listenerKeys_[n],this.changed()},Gi.prototype.getLayers=function(){return this.get(Gi.Property_.LAYERS)},Gi.prototype.setLayers=function(e){this.set(Gi.Property_.LAYERS,e)},Gi.prototype.getLayersArray=function(e){var t=e!==void 0?e:[];return this.getLayers().forEach(function(n){n.getLayersArray(t)}),t},Gi.prototype.getLayerStatesArray=function(e){var t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(u){u.getLayerStatesArray(t)});var h=this.getLayerState(),x,S,f;for(x=n,S=t.length;x<S;x++)f=t[x],f.opacity*=h.opacity,f.visible=f.visible&&h.visible,f.maxResolution=Math.min(f.maxResolution,h.maxResolution),f.minResolution=Math.max(f.minResolution,h.minResolution),h.extent!==void 0&&(f.extent!==void 0?f.extent=Tt.getIntersection(f.extent,h.extent):f.extent=h.extent);return t},Gi.prototype.getSourceState=function(){return Yo.READY},Gi.Property_={LAYERS:"layers"};var Zo={MAP_RENDERER:"MAP_RENDERER",LAYER_RENDERER:"LAYER_RENDERER"},Ai={};Ai.mapRendererPlugins_=[],Ai.getMapRendererPlugins=function(){return Ai.mapRendererPlugins_},Ai.layerRendererPlugins_=[],Ai.getLayerRendererPlugins=function(){return Ai.layerRendererPlugins_},Ai.register=function(e,t){var n;switch(e){case Zo.MAP_RENDERER:{n=Ai.mapRendererPlugins_,n.push(t);break}case Zo.LAYER_RENDERER:{n=Ai.layerRendererPlugins_,n.push(t);break}default:throw new Error("Unsupported plugin type: "+e)}},Ai.registerMultiple=function(e,t){for(var n=0,h=t.length;n<h;++n)Ai.register(e,t[n])};var ra={CANVAS:"canvas",WEBGL:"webgl"},na={};na.buffer=function(e,t,n){return n===void 0&&(n=[0,0]),n[0]=e[0]+2*t,n[1]=e[1]+2*t,n},na.hasArea=function(e){return e[0]>0&&e[1]>0},na.scale=function(e,t,n){return n===void 0&&(n=[0,0]),n[0]=e[0]*t+.5|0,n[1]=e[1]*t+.5|0,n},na.toSize=function(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:t[0]=t[1]=e,t)};var br=function(e){Or.call(this);var t=br.createOptionsInternal(e);this.loadTilesWhileAnimating_=e.loadTilesWhileAnimating!==void 0?e.loadTilesWhileAnimating:!1,this.loadTilesWhileInteracting_=e.loadTilesWhileInteracting!==void 0?e.loadTilesWhileInteracting:!1,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:tn.DEVICE_PIXEL_RATIO,this.logos_=t.logos,this.animationDelayKey_,this.animationDelay_=(function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}).bind(this),this.coordinateToPixelTransform_=Qt.create(),this.pixelToCoordinateTransform_=Qt.create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("DIV"),this.viewport_.className="ol-viewport"+(tn.TOUCH?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var n=[kr.CLICK,kr.DBLCLICK,kr.MOUSEDOWN,kr.TOUCHSTART,kr.MSPOINTERDOWN,Mn.POINTERDOWN,kr.MOUSEWHEEL,kr.WHEEL],h=0,x=n.length;h<x;++h)Jt.listen(this.overlayContainerStopEvent_,n[h],oi.stopPropagation);this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new Ca(this,e.moveTolerance);for(var S in Mn)Jt.listen(this.mapBrowserEventHandler_,Mn[S],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=t.keyboardEventTarget,this.keyHandlerKeys_=null,Jt.listen(this.viewport_,kr.WHEEL,this.handleBrowserEvent,this),Jt.listen(this.viewport_,kr.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=t.controls||new Kr,this.interactions=t.interactions||new Kr,this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=t.mapRendererPlugin.create(this.viewport_,this),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new Xo(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},Jt.listen(this,Or.getChangeEventType(ji.LAYERGROUP),this.handleLayerGroupChanged_,this),Jt.listen(this,Or.getChangeEventType(ji.VIEW),this.handleViewChanged_,this),Jt.listen(this,Or.getChangeEventType(ji.SIZE),this.handleSizeChanged_,this),Jt.listen(this,Or.getChangeEventType(ji.TARGET),this.handleTargetChanged_,this),this.setProperties(t.values),this.controls.forEach(function(f){f.setMap(this)},this),Jt.listen(this.controls,pa.ADD,function(f){f.element.setMap(this)},this),Jt.listen(this.controls,pa.REMOVE,function(f){f.element.setMap(null)},this),this.interactions.forEach(function(f){f.setMap(this)},this),Jt.listen(this.interactions,pa.ADD,function(f){f.element.setMap(this)},this),Jt.listen(this.interactions,pa.REMOVE,function(f){f.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_,this),Jt.listen(this.overlays_,pa.ADD,function(f){this.addOverlayInternal_(f.element)},this),Jt.listen(this.overlays_,pa.REMOVE,function(f){var u=f.element,r=u.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],f.element.setMap(null)},this)};tt.inherits(br,Or),br.prototype.addControl=function(e){this.getControls().push(e)},br.prototype.addInteraction=function(e){this.getInteractions().push(e)},br.prototype.addLayer=function(e){var t=this.getLayerGroup().getLayers();t.push(e)},br.prototype.addOverlay=function(e){this.getOverlays().push(e)},br.prototype.addOverlayInternal_=function(e){var t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)},br.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),Jt.unlisten(this.viewport_,kr.WHEEL,this.handleBrowserEvent,this),Jt.unlisten(this.viewport_,kr.MOUSEWHEEL,this.handleBrowserEvent,this),this.handleResize_!==void 0&&(window.removeEventListener(kr.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),Or.prototype.disposeInternal.call(this)},br.prototype.forEachFeatureAtPixel=function(e,t,n){if(this.frameState_){var h=this.getCoordinateFromPixel(e);n=n!==void 0?n:{};var x=n.hitTolerance!==void 0?n.hitTolerance*this.frameState_.pixelRatio:0,S=n.layerFilter!==void 0?n.layerFilter:Qn.TRUE;return this.renderer_.forEachFeatureAtCoordinate(h,this.frameState_,x,t,null,S,null)}},br.prototype.getFeaturesAtPixel=function(e,t){var n=null;return this.forEachFeatureAtPixel(e,function(h){n||(n=[]),n.push(h)},t),n},br.prototype.forEachLayerAtPixel=function(e,t,n,h,x){if(this.frameState_){var S=n!==void 0?n:null,f=h!==void 0?h:Qn.TRUE,u=x!==void 0?x:null;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,t,S,f,u)}},br.prototype.hasFeatureAtPixel=function(e,t){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixel(e);t=t!==void 0?t:{};var h=t.layerFilter!==void 0?t.layerFilter:Qn.TRUE,x=t.hitTolerance!==void 0?t.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,x,h,null)},br.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},br.prototype.getEventPixel=function(e){var t=this.viewport_.getBoundingClientRect(),n=e.changedTouches?e.changedTouches[0]:e;return[n.clientX-t.left,n.clientY-t.top]},br.prototype.getTarget=function(){return this.get(ji.TARGET)},br.prototype.getTargetElement=function(){var e=this.getTarget();return e!==void 0?typeof e=="string"?document.getElementById(e):e:null},br.prototype.getCoordinateFromPixel=function(e){var t=this.frameState_;return t?Qt.apply(t.pixelToCoordinateTransform,e.slice()):null},br.prototype.getControls=function(){return this.controls},br.prototype.getOverlays=function(){return this.overlays_},br.prototype.getOverlayById=function(e){var t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null},br.prototype.getInteractions=function(){return this.interactions},br.prototype.getLayerGroup=function(){return this.get(ji.LAYERGROUP)},br.prototype.getLayers=function(){var e=this.getLayerGroup().getLayers();return e},br.prototype.getPixelFromCoordinate=function(e){var t=this.frameState_;return t?Qt.apply(t.coordinateToPixelTransform,e.slice(0,2)):null},br.prototype.getRenderer=function(){return this.renderer_},br.prototype.getSize=function(){return this.get(ji.SIZE)},br.prototype.getView=function(){return this.get(ji.VIEW)},br.prototype.getViewport=function(){return this.viewport_},br.prototype.getOverlayContainer=function(){return this.overlayContainer_},br.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},br.prototype.getTilePriority=function(e,t,n,h){var x=this.frameState_;if(!x||!(t in x.wantedTiles)||!x.wantedTiles[t][e.getKey()])return Hn.DROP;var S=n[0]-x.focus[0],f=n[1]-x.focus[1];return 65536*Math.log(h)+Math.sqrt(S*S+f*f)/h},br.prototype.handleBrowserEvent=function(e,t){var n=t||e.type,h=new Wo(n,this,e);this.handleMapBrowserEvent(h)},br.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){this.focus_=e.coordinate,e.frameState=this.frameState_;var t=this.getInteractions().getArray(),n;if(this.dispatchEvent(e)!==!1)for(n=t.length-1;n>=0;n--){var h=t[n];if(h.getActive()){var x=h.handleEvent(e);if(!x)break}}}},br.prototype.handlePostRender=function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var n=16,h=n;if(e){var x=e.viewHints;x[Tn.ANIMATING]&&(n=this.loadTilesWhileAnimating_?8:0,h=2),x[Tn.INTERACTING]&&(n=this.loadTilesWhileInteracting_?8:0,h=2)}t.getTilesLoading()<n&&(t.reprioritize(),t.loadMoreTiles(n,h))}var S=this.postRenderFunctions_,f,u;for(f=0,u=S.length;f<u;++f)S[f](this,e);S.length=0},br.prototype.handleSizeChanged_=function(){this.render()},br.prototype.handleTargetChanged_=function(){var e;if(this.getTarget()&&(e=this.getTargetElement()),this.keyHandlerKeys_){for(var t=0,n=this.keyHandlerKeys_.length;t<n;++t)Jt.unlistenByKey(this.keyHandlerKeys_[t]);this.keyHandlerKeys_=null}if(!e)this.renderer_.removeLayerRenderers(),gn.removeNode(this.viewport_),this.handleResize_!==void 0&&(window.removeEventListener(kr.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);else{e.appendChild(this.viewport_);var h=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[Jt.listen(h,kr.KEYDOWN,this.handleBrowserEvent,this),Jt.listen(h,kr.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(kr.RESIZE,this.handleResize_,!1))}this.updateSize()},br.prototype.handleTileChange_=function(){this.render()},br.prototype.handleViewPropertyChanged_=function(){this.render()},br.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Jt.unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Jt.unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.viewport_.setAttribute("data-view",tt.getUid(e)),this.viewPropertyListenerKey_=Jt.listen(e,ss.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Jt.listen(e,kr.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},br.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Jt.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[Jt.listen(e,ss.PROPERTYCHANGE,this.render,this),Jt.listen(e,kr.CHANGE,this.render,this)]),this.render()},br.prototype.isRendered=function(){return!!this.frameState_},br.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},br.prototype.render=function(){this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},br.prototype.removeControl=function(e){return this.getControls().remove(e)},br.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},br.prototype.removeLayer=function(e){var t=this.getLayerGroup().getLayers();return t.remove(e)},br.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},br.prototype.renderFrame_=function(e){var t,n,h,x=this.getSize(),S=this.getView(),f=Tt.createEmpty(),u=this.frameState_,r=null;if(x!==void 0&&na.hasArea(x)&&S&&S.isDef()){var i=S.getHints(this.frameState_?this.frameState_.viewHints:void 0),c=this.getLayerGroup().getLayerStatesArray(),a={};for(t=0,n=c.length;t<n;++t)a[tt.getUid(c[t].layer)]=c[t];h=S.getState();var l=h.center,s=h.resolution/this.pixelRatio_;l[0]=Math.round(l[0]/s)*s,l[1]=Math.round(l[1]/s)*s,r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:f,focus:this.focus_?this.focus_:l,index:this.frameIndex_++,layerStates:a,layerStatesArray:c,logos:Zr.assign({},this.logos_),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:x,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:h,viewHints:i,wantedTiles:{}}}if(r&&(r.extent=Tt.getForViewAndSize(h.center,h.resolution,h.rotation,r.size,f)),this.frameState_=r,this.renderer_.renderFrame(r),r){if(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),u){var v=!this.previousExtent_||!Tt.isEmpty(this.previousExtent_)&&!Tt.equals(r.extent,this.previousExtent_);v&&(this.dispatchEvent(new vo(ls.MOVESTART,this,u)),this.previousExtent_=Tt.createOrUpdateEmpty(this.previousExtent_))}var d=this.previousExtent_&&!r.viewHints[Tn.ANIMATING]&&!r.viewHints[Tn.INTERACTING]&&!Tt.equals(r.extent,this.previousExtent_);d&&(this.dispatchEvent(new vo(ls.MOVEEND,this,r)),Tt.clone(r.extent,this.previousExtent_))}this.dispatchEvent(new vo(ls.POSTRENDER,this,r)),setTimeout(this.handlePostRender.bind(this),0)},br.prototype.setLayerGroup=function(e){this.set(ji.LAYERGROUP,e)},br.prototype.setSize=function(e){this.set(ji.SIZE,e)},br.prototype.setTarget=function(e){this.set(ji.TARGET,e)},br.prototype.setView=function(e){this.set(ji.VIEW,e)},br.prototype.skipFeature=function(e){var t=tt.getUid(e).toString();this.skippedFeatureUids_[t]=!0,this.render()},br.prototype.updateSize=function(){var e=this.getTargetElement();if(!e)this.setSize(void 0);else{var t=getComputedStyle(e);this.setSize([e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderRightWidth),e.offsetHeight-parseFloat(t.borderTopWidth)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-parseFloat(t.borderBottomWidth)])}},br.prototype.unskipFeature=function(e){var t=tt.getUid(e).toString();delete this.skippedFeatureUids_[t],this.render()},br.DEFAULT_RENDERER_TYPES=[ra.CANVAS,ra.WEBGL],br.LOGO_URL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC",br.createOptionsInternal=function(e){var t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var n={},h={};if(e.logo===void 0||typeof e.logo=="boolean"&&e.logo)h[br.LOGO_URL]="https://openlayers.org/";else{var x=e.logo;typeof x=="string"?h[x]="":x instanceof HTMLElement?h[tt.getUid(x).toString()]=x:x&&(_n.assert(typeof x.href=="string",44),_n.assert(typeof x.src=="string",45),h[x.src]=x.href)}var S=e.layers instanceof Gi?e.layers:new Gi({layers:e.layers});n[ji.LAYERGROUP]=S,n[ji.TARGET]=e.target,n[ji.VIEW]=e.view!==void 0?e.view:new Rr;var f;e.renderer!==void 0?(Array.isArray(e.renderer)?f=e.renderer:typeof e.renderer=="string"?f=[e.renderer]:_n.assert(!1,46),f.indexOf("dom")>=0&&(f=f.concat(br.DEFAULT_RENDERER_TYPES))):f=br.DEFAULT_RENDERER_TYPES;var u,r=Ai.getMapRendererPlugins();e:for(var i=0,c=f.length;i<c;++i)for(var a=f[i],l=0,s=r.length;l<s;++l){var v=r[l];if(v.handles(a)){u=v;break e}}if(!u)throw new Error("Unable to create a map renderer for types: "+f.join(", "));var d;e.controls!==void 0&&(Array.isArray(e.controls)?d=new Kr(e.controls.slice()):(_n.assert(e.controls instanceof Kr,47),d=e.controls));var p;e.interactions!==void 0&&(Array.isArray(e.interactions)?p=new Kr(e.interactions.slice()):(_n.assert(e.interactions instanceof Kr,48),p=e.interactions));var o;return e.overlays!==void 0?Array.isArray(e.overlays)?o=new Kr(e.overlays.slice()):(_n.assert(e.overlays instanceof Kr,49),o=e.overlays):o=new Kr,{controls:d,interactions:p,keyboardEventTarget:t,logos:h,overlays:o,mapRendererPlugin:u,values:n}};var Ra=function(e){Or.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:tt.nullFunction,e.target&&this.setTarget(e.target)};tt.inherits(Ra,Or),Ra.prototype.disposeInternal=function(){gn.removeNode(this.element),Or.prototype.disposeInternal.call(this)},Ra.prototype.getMap=function(){return this.map_},Ra.prototype.setMap=function(e){this.map_&&gn.removeNode(this.element);for(var t=0,n=this.listenerKeys.length;t<n;++t)Jt.unlistenByKey(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,this.map_){var h=this.target_?this.target_:e.getOverlayContainerStopEvent();h.appendChild(this.element),this.render!==tt.nullFunction&&this.listenerKeys.push(Jt.listen(e,ls.POSTRENDER,this.render,this)),e.render()}},Ra.prototype.setTarget=function(e){this.target_=typeof e=="string"?document.getElementById(e):e};var hi={};hi.CLASS_HIDDEN="ol-hidden",hi.CLASS_SELECTABLE="ol-selectable",hi.CLASS_UNSELECTABLE="ol-unselectable",hi.CLASS_UNSUPPORTED="ol-unsupported",hi.CLASS_CONTROL="ol-control",hi.getFontFamilies=function(){var e,t={};return function(n){if(e||(e=document.createElement("div").style),!(n in t)){e.font=n;var h=e.fontFamily;if(e.font="",!h)return null;t[n]=h.split(/,\s?/)}return t[n]}}();var ua=function(e){var t=e||{};this.ulElement_=document.createElement("UL"),this.logoLi_=document.createElement("LI"),this.ulElement_.appendChild(this.logoLi_),this.logoLi_.style.display="none",this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);var n=t.className!==void 0?t.className:"ol-attribution",h=t.tipLabel!==void 0?t.tipLabel:"Attributions",x=t.collapseLabel!==void 0?t.collapseLabel:"";typeof x=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=x):this.collapseLabel_=x;var S=t.label!==void 0?t.label:"i";typeof S=="string"?(this.label_=document.createElement("span"),this.label_.textContent=S):this.label_=S;var f=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,u=document.createElement("button");u.setAttribute("type","button"),u.title=h,u.appendChild(f),Jt.listen(u,kr.CLICK,this.handleClick_,this);var r=n+" "+hi.CLASS_UNSELECTABLE+" "+hi.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),i=document.createElement("div");i.className=r,i.appendChild(this.ulElement_),i.appendChild(u);var c=t.render?t.render:ua.render;Ra.call(this,{element:i,render:c,target:t.target}),this.renderedAttributions_=[],this.renderedVisible_=!0,this.logoElements_={}};tt.inherits(ua,Ra),ua.prototype.getSourceAttributions_=function(e){for(var t={},n=[],h=e.layerStatesArray,x=e.viewState.resolution,S=0,f=h.length;S<f;++S){var u=h[S];if(li.visibleAtResolution(u,x)){var r=u.layer.getSource();if(r){var i=r.getAttributions2();if(i){var c=i(e);if(c)if(Array.isArray(c))for(var a=0,l=c.length;a<l;++a)c[a]in t||(n.push(c[a]),t[c[a]]=!0);else c in t||(n.push(c),t[c]=!0)}}}}return n},ua.render=function(e){this.updateElement_(e.frameState)},ua.prototype.updateElement_=function(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var t=this.getSourceAttributions_(e);if(!Vr.equals(t,this.renderedAttributions_)){for(;this.ulElement_.lastChild!==this.logoLi_;)this.ulElement_.removeChild(this.ulElement_.lastChild);for(var n=0,h=t.length;n<h;++n){var x=document.createElement("LI");x.innerHTML=t[n],this.ulElement_.appendChild(x)}t.length===0&&this.renderedAttributions_.length>0?this.element.classList.add("ol-logo-only"):this.renderedAttributions_.length===0&&t.length>0&&this.element.classList.remove("ol-logo-only");var S=t.length>0||!Zr.isEmpty(e.logos);this.renderedVisible_!=S&&(this.element.style.display=S?"":"none",this.renderedVisible_=S),this.renderedAttributions_=t,this.insertLogos_(e)}},ua.prototype.insertLogos_=function(e){var t,n=e.logos,h=this.logoElements_;for(t in h)t in n||(gn.removeNode(h[t]),delete h[t]);var x,S,f;for(f in n){var u=n[f];u instanceof HTMLElement&&(this.logoLi_.appendChild(u),h[f]=u),f in h||(x=new Image,x.src=f,u===""?S=x:(S=document.createElement("a"),S.href=u,S.appendChild(x)),this.logoLi_.appendChild(S),h[f]=S)}this.logoLi_.style.display=Zr.isEmpty(n)?"none":""},ua.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},ua.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?gn.replaceNode(this.collapseLabel_,this.label_):gn.replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},ua.prototype.getCollapsible=function(){return this.collapsible_},ua.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},ua.prototype.setCollapsed=function(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()},ua.prototype.getCollapsed=function(){return this.collapsed_};var Lo=function(e){var t=e||{},n=t.className!==void 0?t.className:"ol-rotate",h=t.label!==void 0?t.label:"";this.label_=null,typeof h=="string"?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=h):(this.label_=h,this.label_.classList.add("ol-compass"));var x=t.tipLabel?t.tipLabel:"Reset rotation",S=document.createElement("button");S.className=n+"-reset",S.setAttribute("type","button"),S.title=x,S.appendChild(this.label_),Jt.listen(S,kr.CLICK,Lo.prototype.handleClick_,this);var f=n+" "+hi.CLASS_UNSELECTABLE+" "+hi.CLASS_CONTROL,u=document.createElement("div");u.className=f,u.appendChild(S);var r=t.render?t.render:Lo.render;this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,Ra.call(this,{element:u,render:r,target:t.target}),this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(hi.CLASS_HIDDEN)};tt.inherits(Lo,Ra),Lo.prototype.handleClick_=function(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},Lo.prototype.resetNorth_=function(){var e=this.getMap(),t=e.getView();t&&t.getRotation()!==void 0&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:ui.easeOut}):t.setRotation(0))},Lo.render=function(e){var t=e.frameState;if(t){var n=t.viewState.rotation;if(n!=this.rotation_){var h="rotate("+n+"rad)";if(this.autoHide_){var x=this.element.classList.contains(hi.CLASS_HIDDEN);!x&&n===0?this.element.classList.add(hi.CLASS_HIDDEN):x&&n!==0&&this.element.classList.remove(hi.CLASS_HIDDEN)}this.label_.style.msTransform=h,this.label_.style.webkitTransform=h,this.label_.style.transform=h}this.rotation_=n}};var Ko=function(e){var t=e||{},n=t.className!==void 0?t.className:"ol-zoom",h=t.delta!==void 0?t.delta:1,x=t.zoomInLabel!==void 0?t.zoomInLabel:"+",S=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",f=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",u=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",r=document.createElement("button");r.className=n+"-in",r.setAttribute("type","button"),r.title=f,r.appendChild(typeof x=="string"?document.createTextNode(x):x),Jt.listen(r,kr.CLICK,Ko.prototype.handleClick_.bind(this,h));var i=document.createElement("button");i.className=n+"-out",i.setAttribute("type","button"),i.title=u,i.appendChild(typeof S=="string"?document.createTextNode(S):S),Jt.listen(i,kr.CLICK,Ko.prototype.handleClick_.bind(this,-h));var c=n+" "+hi.CLASS_UNSELECTABLE+" "+hi.CLASS_CONTROL,a=document.createElement("div");a.className=c,a.appendChild(r),a.appendChild(i),Ra.call(this,{element:a,target:t.target}),this.duration_=t.duration!==void 0?t.duration:250};tt.inherits(Ko,Ra),Ko.prototype.handleClick_=function(e,t){t.preventDefault(),this.zoomByDelta_(e)},Ko.prototype.zoomByDelta_=function(e){var t=this.getMap(),n=t.getView();if(n){var h=n.getResolution();if(h){var x=n.constrainResolution(h,e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:x,duration:this.duration_,easing:ui.easeOut})):n.setResolution(x)}}};var Jl={};Jl.defaults=function(e){var t=e||{},n=new Kr,h=t.zoom!==void 0?t.zoom:!0;h&&n.push(new Ko(t.zoomOptions));var x=t.rotate!==void 0?t.rotate:!0;x&&n.push(new Lo(t.rotateOptions));var S=t.attribution!==void 0?t.attribution:!0;return S&&n.push(new ua(t.attributionOptions)),n};var Jo=function(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0};Jo.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},Jo.prototype.update=function(e,t){this.points_.push(e,t,Date.now())},Jo.prototype.end=function(){if(this.points_.length<6)return!1;var e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;for(var n=t-3;n>0&&this.points_[n+2]>e;)n-=3;var h=this.points_[t+2]-this.points_[n+2];if(h<1e3/60)return!1;var x=this.points_[t]-this.points_[n],S=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(S,x),this.initialVelocity_=Math.sqrt(x*x+S*S)/h,this.initialVelocity_>this.minVelocity_},Jo.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},Jo.prototype.getAngle=function(){return this.angle_};var jl={ACTIVE:"active"},rn=function(e){Or.call(this),this.map_=null,this.setActive(!0),this.handleEvent=e.handleEvent};tt.inherits(rn,Or),rn.prototype.getActive=function(){return this.get(jl.ACTIVE)},rn.prototype.getMap=function(){return this.map_},rn.prototype.setActive=function(e){this.set(jl.ACTIVE,e)},rn.prototype.setMap=function(e){this.map_=e},rn.pan=function(e,t,n){var h=e.getCenter();if(h){var x=e.constrainCenter([h[0]+t[0],h[1]+t[1]]);n?e.animate({duration:n,easing:ui.linear,center:x}):e.setCenter(x)}},rn.rotate=function(e,t,n,h){t=e.constrainRotation(t,0),rn.rotateWithoutConstraints(e,t,n,h)},rn.rotateWithoutConstraints=function(e,t,n,h){if(t!==void 0){var x=e.getRotation(),S=e.getCenter();x!==void 0&&S&&h>0?e.animate({rotation:t,anchor:n,duration:h,easing:ui.easeOut}):e.rotate(t,n)}},rn.zoom=function(e,t,n,h,x){t=e.constrainResolution(t,0,x),rn.zoomWithoutConstraints(e,t,n,h)},rn.zoomByDelta=function(e,t,n,h){var x=e.getResolution(),S=e.constrainResolution(x,t,0);if(S!==void 0){var f=e.getResolutions();S=wr.clamp(S,e.getMinResolution()||f[f.length-1],e.getMaxResolution()||f[0])}if(n&&S!==void 0&&S!==x){var u=e.getCenter(),r=e.calculateCenterZoom(S,n);r=e.constrainCenter(r),n=[(S*u[0]-x*r[0])/(S-x),(S*u[1]-x*r[1])/(S-x)]}rn.zoomWithoutConstraints(e,S,n,h)},rn.zoomWithoutConstraints=function(e,t,n,h){if(t){var x=e.getResolution(),S=e.getCenter();if(x!==void 0&&S&&t!==x&&h)e.animate({resolution:t,anchor:n,duration:h,easing:ui.easeOut});else{if(n){var f=e.calculateCenterZoom(t,n);e.setCenter(f)}e.setResolution(t)}}};var Cs=function(e){var t=e||{};this.delta_=t.delta?t.delta:1,rn.call(this,{handleEvent:Cs.handleEvent}),this.duration_=t.duration!==void 0?t.duration:250};tt.inherits(Cs,rn),Cs.handleEvent=function(e){var t=!1,n=e.originalEvent;if(e.type==Mn.DBLCLICK){var h=e.map,x=e.coordinate,S=n.shiftKey?-this.delta_:this.delta_,f=h.getView();rn.zoomByDelta(f,S,x,this.duration_),e.preventDefault(),t=!0}return!t};var An={};An.altKeyOnly=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},An.altShiftKeysOnly=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},An.always=Qn.TRUE,An.click=function(e){return e.type==Mn.CLICK},An.mouseActionButton=function(e){var t=e.originalEvent;return t.button==0&&!(tn.WEBKIT&&tn.MAC&&t.ctrlKey)},An.never=Qn.FALSE,An.pointerMove=function(e){return e.type=="pointermove"},An.singleClick=function(e){return e.type==Mn.SINGLECLICK},An.doubleClick=function(e){return e.type==Mn.DBLCLICK},An.noModifierKeys=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},An.platformModifierKeyOnly=function(e){var t=e.originalEvent;return!t.altKey&&(tn.MAC?t.metaKey:t.ctrlKey)&&!t.shiftKey},An.shiftKeyOnly=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},An.targetNotEditable=function(e){var t=e.originalEvent.target,n=t.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"},An.mouseOnly=function(e){return _n.assert(e.pointerEvent,56),e.pointerEvent.pointerType=="mouse"},An.primaryAction=function(e){var t=e.pointerEvent;return t.isPrimary&&t.button===0};var wn=function(e){var t=e||{},n=t.handleEvent?t.handleEvent:wn.handleEvent;rn.call(this,{handleEvent:n}),this.handleDownEvent_=t.handleDownEvent?t.handleDownEvent:wn.handleDownEvent,this.handleDragEvent_=t.handleDragEvent?t.handleDragEvent:wn.handleDragEvent,this.handleMoveEvent_=t.handleMoveEvent?t.handleMoveEvent:wn.handleMoveEvent,this.handleUpEvent_=t.handleUpEvent?t.handleUpEvent:wn.handleUpEvent,this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]};tt.inherits(wn,rn),wn.centroid=function(e){for(var t=e.length,n=0,h=0,x=0;x<t;x++)n+=e[x].clientX,h+=e[x].clientY;return[n/t,h/t]},wn.prototype.isPointerDraggingEvent_=function(e){var t=e.type;return t===Mn.POINTERDOWN||t===Mn.POINTERDRAG||t===Mn.POINTERUP},wn.prototype.updateTrackedPointers_=function(e){if(this.isPointerDraggingEvent_(e)){var t=e.pointerEvent,n=t.pointerId.toString();e.type==Mn.POINTERUP?delete this.trackedPointers_[n]:e.type==Mn.POINTERDOWN?this.trackedPointers_[n]=t:n in this.trackedPointers_&&(this.trackedPointers_[n]=t),this.targetPointers=Zr.getValues(this.trackedPointers_)}},wn.handleDragEvent=tt.nullFunction,wn.handleUpEvent=Qn.FALSE,wn.handleDownEvent=Qn.FALSE,wn.handleMoveEvent=tt.nullFunction,wn.handleEvent=function(e){if(!(e instanceof $a))return!0;var t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Mn.POINTERDRAG)this.handleDragEvent_(e);else if(e.type==Mn.POINTERUP){var n=this.handleUpEvent_(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==Mn.POINTERDOWN){var h=this.handleDownEvent_(e);this.handlingDownUpSequence=h,t=this.shouldStopEvent(h)}else e.type==Mn.POINTERMOVE&&this.handleMoveEvent_(e);return!t},wn.prototype.shouldStopEvent=function(e){return e};var eo=function(e){wn.call(this,{handleDownEvent:eo.handleDownEvent_,handleDragEvent:eo.handleDragEvent_,handleUpEvent:eo.handleUpEvent_});var t=e||{};this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.condition_=t.condition?t.condition:An.noModifierKeys,this.noKinetic_=!1};tt.inherits(eo,wn),eo.handleDragEvent_=function(e){var t=this.targetPointers,n=wn.centroid(t);if(t.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var h=this.lastCentroid[0]-n[0],x=n[1]-this.lastCentroid[1],S=e.map,f=S.getView(),u=f.getState(),r=[h,x];bn.scale(r,u.resolution),bn.rotate(r,u.rotation),bn.add(r,u.center),r=f.constrainCenter(r),f.setCenter(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=t.length},eo.handleUpEvent_=function(e){var t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var h=this.kinetic_.getDistance(),x=this.kinetic_.getAngle(),S=n.getCenter(),f=t.getPixelFromCoordinate(S),u=t.getCoordinateFromPixel([f[0]-h*Math.cos(x),f[1]-h*Math.sin(x)]);n.animate({center:n.constrainCenter(u),duration:500,easing:ui.easeOut})}return n.setHint(Tn.INTERACTING,-1),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},eo.handleDownEvent_=function(e){if(this.targetPointers.length>0&&this.condition_(e)){var t=e.map,n=t.getView();return this.lastCentroid=null,this.handlingDownUpSequence||n.setHint(Tn.INTERACTING,1),n.getAnimating()&&n.setCenter(e.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},eo.prototype.shouldStopEvent=Qn.FALSE;var to=function(e){var t=e||{};wn.call(this,{handleDownEvent:to.handleDownEvent_,handleDragEvent:to.handleDragEvent_,handleUpEvent:to.handleUpEvent_}),this.condition_=t.condition?t.condition:An.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250};tt.inherits(to,wn),to.handleDragEvent_=function(e){if(An.mouseOnly(e)){var t=e.map,n=t.getView();if(n.getConstraints().rotation!==Sa.disable){var h=t.getSize(),x=e.pixel,S=Math.atan2(h[1]/2-x[1],x[0]-h[0]/2);if(this.lastAngle_!==void 0){var f=S-this.lastAngle_,u=n.getRotation();rn.rotateWithoutConstraints(n,u-f)}this.lastAngle_=S}}},to.handleUpEvent_=function(e){if(!An.mouseOnly(e))return!0;var t=e.map,n=t.getView();n.setHint(Tn.INTERACTING,-1);var h=n.getRotation();return rn.rotate(n,h,void 0,this.duration_),!1},to.handleDownEvent_=function(e){if(!An.mouseOnly(e))return!1;if(An.mouseActionButton(e)&&this.condition_(e)){var t=e.map;return t.getView().setHint(Tn.INTERACTING,1),this.lastAngle_=void 0,!0}else return!1},to.prototype.shouldStopEvent=Qn.FALSE;var go=function(e){this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null};tt.inherits(go,ja),go.prototype.disposeInternal=function(){this.setMap(null)},go.prototype.render_=function(){var e=this.startPixel_,t=this.endPixel_,n="px",h=this.element_.style;h.left=Math.min(e[0],t[0])+n,h.top=Math.min(e[1],t[1])+n,h.width=Math.abs(t[0]-e[0])+n,h.height=Math.abs(t[1]-e[1])+n},go.prototype.setMap=function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var t=this.element_.style;t.left=t.top=t.width=t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},go.prototype.setPixels=function(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()},go.prototype.createOrUpdateGeometry=function(){var e=this.startPixel_,t=this.endPixel_,n=[e,[e[0],t[1]],t,[t[0],e[1]]],h=n.map(this.map_.getCoordinateFromPixel,this.map_);h[4]=h[0].slice(),this.geometry_?this.geometry_.setCoordinates([h]):this.geometry_=new hn([h])},go.prototype.getGeometry=function(){return this.geometry_};var Jn=function(e){wn.call(this,{handleDownEvent:Jn.handleDownEvent_,handleDragEvent:Jn.handleDragEvent_,handleUpEvent:Jn.handleUpEvent_});var t=e||{};this.box_=new go(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,this.startPixel_=null,this.condition_=t.condition?t.condition:An.always,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:Jn.defaultBoxEndCondition};tt.inherits(Jn,wn),Jn.defaultBoxEndCondition=function(e,t,n){var h=n[0]-t[0],x=n[1]-t[1];return h*h+x*x>=this.minArea_},Jn.handleDragEvent_=function(e){An.mouseOnly(e)&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Jn.Event(Jn.EventType_.BOXDRAG,e.coordinate,e)))},Jn.prototype.getGeometry=function(){return this.box_.getGeometry()},Jn.prototype.onBoxEnd=tt.nullFunction,Jn.handleUpEvent_=function(e){return An.mouseOnly(e)?(this.box_.setMap(null),this.boxEndCondition_(e,this.startPixel_,e.pixel)&&(this.onBoxEnd(e),this.dispatchEvent(new Jn.Event(Jn.EventType_.BOXEND,e.coordinate,e))),!1):!0},Jn.handleDownEvent_=function(e){return An.mouseOnly(e)&&An.mouseActionButton(e)&&this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Jn.Event(Jn.EventType_.BOXSTART,e.coordinate,e)),!0):!1},Jn.EventType_={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},Jn.Event=function(e,t,n){oi.call(this,e),this.coordinate=t,this.mapBrowserEvent=n},tt.inherits(Jn.Event,oi);var ul=function(e){var t=e||{},n=t.condition?t.condition:An.shiftKeyOnly;this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1,Jn.call(this,{condition:n,className:t.className||"ol-dragzoom"})};tt.inherits(ul,Jn),ul.prototype.onBoxEnd=function(){var e=this.getMap(),t=e.getView(),n=e.getSize(),h=this.getGeometry().getExtent();if(this.out_){var x=t.calculateExtent(n),S=Tt.createOrUpdateFromCoordinates([e.getPixelFromCoordinate(Tt.getBottomLeft(h)),e.getPixelFromCoordinate(Tt.getTopRight(h))]),f=t.getResolutionForExtent(S,n);Tt.scaleFromCenter(x,1/f),h=x}var u=t.constrainResolution(t.getResolutionForExtent(h,n)),r=Tt.getCenter(h);r=t.constrainCenter(r),t.animate({resolution:u,center:r,duration:this.duration_,easing:ui.easeOut})};var Ro={LEFT:37,UP:38,RIGHT:39,DOWN:40},Ss=function(e){rn.call(this,{handleEvent:Ss.handleEvent});var t=e||{};this.defaultCondition_=function(n){return An.noModifierKeys(n)&&An.targetNotEditable(n)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128};tt.inherits(Ss,rn),Ss.handleEvent=function(e){var t=!1;if(e.type==kr.KEYDOWN){var n=e.originalEvent,h=n.keyCode;if(this.condition_(e)&&(h==Ro.DOWN||h==Ro.LEFT||h==Ro.RIGHT||h==Ro.UP)){var x=e.map,S=x.getView(),f=S.getResolution()*this.pixelDelta_,u=0,r=0;h==Ro.DOWN?r=-f:h==Ro.LEFT?u=-f:h==Ro.RIGHT?u=f:r=f;var i=[u,r];bn.rotate(i,S.getRotation()),rn.pan(S,i,this.duration_),e.preventDefault(),t=!0}}return!t};var Ls=function(e){rn.call(this,{handleEvent:Ls.handleEvent});var t=e||{};this.condition_=t.condition?t.condition:An.targetNotEditable,this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100};tt.inherits(Ls,rn),Ls.handleEvent=function(e){var t=!1;if(e.type==kr.KEYDOWN||e.type==kr.KEYPRESS){var n=e.originalEvent,h=n.charCode;if(this.condition_(e)&&(h==43||h==45)){var x=e.map,S=h==43?this.delta_:-this.delta_,f=x.getView();rn.zoomByDelta(f,S,void 0,this.duration_),e.preventDefault(),t=!0}}return!t};var Da=function(e){rn.call(this,{handleEvent:Da.handleEvent});var t=e||{};this.delta_=0,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution||!1,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_=void 0,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5};tt.inherits(Da,rn),Da.handleEvent=function(e){var t=e.type;if(t!==kr.WHEEL&&t!==kr.MOUSEWHEEL)return!0;e.preventDefault();var n=e.map,h=e.originalEvent;this.useAnchor_&&(this.lastAnchor_=e.coordinate);var x;if(e.type==kr.WHEEL?(x=h.deltaY,tn.FIREFOX&&h.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(x/=tn.DEVICE_PIXEL_RATIO),h.deltaMode===WheelEvent.DOM_DELTA_LINE&&(x*=40)):e.type==kr.MOUSEWHEEL&&(x=-h.wheelDeltaY,tn.SAFARI&&(x/=3)),x===0)return!1;var S=Date.now();if(this.startTime_===void 0&&(this.startTime_=S),(!this.mode_||S-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(x)<4?Da.Mode_.TRACKPAD:Da.Mode_.WHEEL),this.mode_===Da.Mode_.TRACKPAD){var f=n.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):f.setHint(Tn.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var u=f.getResolution()*Math.pow(2,x/this.trackpadDeltaPerZoom_),r=f.getMinResolution(),i=f.getMaxResolution(),c=0;if(u<r?(u=Math.max(u,r/this.trackpadZoomBuffer_),c=1):u>i&&(u=Math.min(u,i*this.trackpadZoomBuffer_),c=-1),this.lastAnchor_){var a=f.calculateCenterZoom(u,this.lastAnchor_);f.setCenter(f.constrainCenter(a))}return f.setResolution(u),c===0&&this.constrainResolution_&&f.animate({resolution:f.constrainResolution(u,x>0?-1:1),easing:ui.easeOut,anchor:this.lastAnchor_,duration:this.duration_}),c>0?f.animate({resolution:r,easing:ui.easeOut,anchor:this.lastAnchor_,duration:500}):c<0&&f.animate({resolution:i,easing:ui.easeOut,anchor:this.lastAnchor_,duration:500}),this.startTime_=S,!1}this.delta_+=x;var l=Math.max(this.timeout_-(S-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1},Da.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0;var e=this.getMap().getView();e.setHint(Tn.INTERACTING,-1)},Da.prototype.handleWheelZoom_=function(e){var t=e.getView();t.getAnimating()&&t.cancelAnimations();var n=tt.MOUSEWHEELZOOM_MAXDELTA,h=wr.clamp(this.delta_,-n,n);rn.zoomByDelta(t,-h,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},Da.prototype.setMouseAnchor=function(e){this.useAnchor_=e,e||(this.lastAnchor_=null)},Da.Mode_={TRACKPAD:"trackpad",WHEEL:"wheel"};var ro=function(e){wn.call(this,{handleDownEvent:ro.handleDownEvent_,handleDragEvent:ro.handleDragEvent_,handleUpEvent:ro.handleUpEvent_});var t=e||{};this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250};tt.inherits(ro,wn),ro.handleDragEvent_=function(e){var t=0,n=this.targetPointers[0],h=this.targetPointers[1],x=Math.atan2(h.clientY-n.clientY,h.clientX-n.clientX);if(this.lastAngle_!==void 0){var S=x-this.lastAngle_;this.rotationDelta_+=S,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=S}this.lastAngle_=x;var f=e.map,u=f.getView();if(u.getConstraints().rotation!==Sa.disable){var r=f.getViewport().getBoundingClientRect(),i=wn.centroid(this.targetPointers);if(i[0]-=r.left,i[1]-=r.top,this.anchor_=f.getCoordinateFromPixel(i),this.rotating_){var c=u.getRotation();f.render(),rn.rotateWithoutConstraints(u,c+t,this.anchor_)}}},ro.handleUpEvent_=function(e){if(this.targetPointers.length<2){var t=e.map,n=t.getView();if(n.setHint(Tn.INTERACTING,-1),this.rotating_){var h=n.getRotation();rn.rotate(n,h,this.anchor_,this.duration_)}return!1}else return!0},ro.handleDownEvent_=function(e){if(this.targetPointers.length>=2){var t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().setHint(Tn.INTERACTING,1),!0}else return!1},ro.prototype.shouldStopEvent=Qn.FALSE;var no=function(e){wn.call(this,{handleDownEvent:no.handleDownEvent_,handleDragEvent:no.handleDragEvent_,handleUpEvent:no.handleUpEvent_});var t=e||{};this.constrainResolution_=t.constrainResolution||!1,this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1};tt.inherits(no,wn),no.handleDragEvent_=function(e){var t=1,n=this.targetPointers[0],h=this.targetPointers[1],x=n.clientX-h.clientX,S=n.clientY-h.clientY,f=Math.sqrt(x*x+S*S);this.lastDistance_!==void 0&&(t=this.lastDistance_/f),this.lastDistance_=f;var u=e.map,r=u.getView(),i=r.getResolution(),c=r.getMaxResolution(),a=r.getMinResolution(),l=i*t;l>c?(t=c/i,l=c):l<a&&(t=a/i,l=a),t!=1&&(this.lastScaleDelta_=t);var s=u.getViewport().getBoundingClientRect(),v=wn.centroid(this.targetPointers);v[0]-=s.left,v[1]-=s.top,this.anchor_=u.getCoordinateFromPixel(v),u.render(),rn.zoomWithoutConstraints(r,l,this.anchor_)},no.handleUpEvent_=function(e){if(this.targetPointers.length<2){var t=e.map,n=t.getView();n.setHint(Tn.INTERACTING,-1);var h=n.getResolution();if(this.constrainResolution_||h<n.getMinResolution()||h>n.getMaxResolution()){var x=this.lastScaleDelta_-1;rn.zoom(n,h,this.anchor_,this.duration_,x)}return!1}else return!0},no.handleDownEvent_=function(e){if(this.targetPointers.length>=2){var t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().setHint(Tn.INTERACTING,1),!0}else return!1},no.prototype.shouldStopEvent=Qn.FALSE;var $l={};$l.defaults=function(e){var t=e||{},n=new Kr,h=new Jo(-.005,.05,100),x=t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0;x&&n.push(new to);var S=t.doubleClickZoom!==void 0?t.doubleClickZoom:!0;S&&n.push(new Cs({delta:t.zoomDelta,duration:t.zoomDuration}));var f=t.dragPan!==void 0?t.dragPan:!0;f&&n.push(new eo({kinetic:h}));var u=t.pinchRotate!==void 0?t.pinchRotate:!0;u&&n.push(new ro);var r=t.pinchZoom!==void 0?t.pinchZoom:!0;r&&n.push(new no({constrainResolution:t.constrainResolution,duration:t.zoomDuration}));var i=t.keyboard!==void 0?t.keyboard:!0;i&&(n.push(new Ss),n.push(new Ls({delta:t.zoomDelta,duration:t.zoomDuration})));var c=t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0;c&&n.push(new Da({constrainResolution:t.constrainResolution,duration:t.zoomDuration}));var a=t.shiftDragZoom!==void 0?t.shiftDragZoom:!0;return a&&n.push(new ul({duration:t.zoomDuration})),n};var Wa=function(e,t,n,h){$n.call(this),this.extent=e,this.pixelRatio_=n,this.resolution=t,this.state=h};tt.inherits(Wa,$n),Wa.prototype.changed=function(){this.dispatchEvent(kr.CHANGE)},Wa.prototype.getExtent=function(){return this.extent},Wa.prototype.getImage=function(){},Wa.prototype.getPixelRatio=function(){return this.pixelRatio_},Wa.prototype.getResolution=function(){return this.resolution},Wa.prototype.getState=function(){return this.state},Wa.prototype.load=function(){};var Hi={IDLE:0,LOADING:1,LOADED:2,ERROR:3},jo=function(e,t,n,h,x){this.loader_=x!==void 0?x:null;var S=x!==void 0?Hi.IDLE:Hi.LOADED;Wa.call(this,e,t,n,S),this.canvas_=h,this.error_=null};tt.inherits(jo,Wa),jo.prototype.getError=function(){return this.error_},jo.prototype.handleLoad_=function(e){e?(this.error_=e,this.state=Hi.ERROR):this.state=Hi.LOADED,this.changed()},jo.prototype.load=function(){this.state==Hi.IDLE&&(this.state=Hi.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},jo.prototype.getImage=function(){return this.canvas_};var Jf={IMAGE:"image",VECTOR:"vector"},fs=function(e,t,n,h,x){oi.call(this,e),this.vectorContext=t,this.frameState=n,this.context=h,this.glContext=x};tt.inherits(fs,oi);var ti=function(e){$n.call(this),this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null};tt.inherits(ti,$n),ti.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},ti.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(kr.CLEAR)},ti.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},ti.prototype.forEach=function(e,t){for(var n=this.oldest_;n;)e.call(t,n.value_,n.key_,this),n=n.newer},ti.prototype.get=function(e){var t=this.entries_[e];return _n.assert(t!==void 0,15),t===this.newest_||(t===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(t.newer.older=t.older,t.older.newer=t.newer),t.newer=null,t.older=this.newest_,this.newest_.newer=t,this.newest_=t),t.value_},ti.prototype.remove=function(e){var t=this.entries_[e];return _n.assert(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_},ti.prototype.getCount=function(){return this.count_},ti.prototype.getKeys=function(){var e=new Array(this.count_),t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e},ti.prototype.getValues=function(){var e=new Array(this.count_),t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e},ti.prototype.peekLast=function(){return this.oldest_.value_},ti.prototype.peekLastKey=function(){return this.oldest_.key_},ti.prototype.peekFirstKey=function(){return this.newest_.key_},ti.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},ti.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},ti.prototype.set=function(e,t){_n.assert(!(e in this.entries_),16);var n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_},ti.prototype.prune=function(){for(;this.canExpireCache();)this.pop()};var rr={};rr.defaultFont="10px sans-serif",rr.defaultFillStyle=[0,0,0,1],rr.defaultLineCap="round",rr.defaultLineDash=[],rr.defaultLineDashOffset=0,rr.defaultLineJoin="round",rr.defaultMiterLimit=10,rr.defaultStrokeStyle=[0,0,0,1],rr.defaultTextAlign="center",rr.defaultTextBaseline="middle",rr.defaultPadding=[0,0,0,0],rr.defaultLineWidth=1,rr.labelCache=new ti,rr.checkedFonts_={},rr.measureContext_=null,rr.textHeights_={},rr.checkFont=function(){var e=60,t=rr.checkedFonts_,n=rr.labelCache,h="32px monospace",x="wmytzilWMYTZIL@#/&?$%10",S,f;function u(i){var c=rr.getMeasureContext();c.font=h,f=c.measureText(x).width;var a=!0;if(i!="monospace"){c.font="32px "+i+",monospace";var l=c.measureText(x).width;a=l!=f}return a}function r(){var i=!0;for(var c in t)t[c]<e&&(u(c)?(t[c]=e,Zr.clear(rr.textHeights_),rr.measureContext_=null,n.clear()):(++t[c],i=!1));i&&(window.clearInterval(S),S=void 0)}return function(i){var c=hi.getFontFamilies(i);if(c)for(var a=0,l=c.length;a<l;++a){var s=c[a];s in t||(t[s]=e,u(s)||(t[s]=0,S===void 0&&(S=window.setInterval(r,32))))}}}(),rr.getMeasureContext=function(){var e=rr.measureContext_;return e||(e=rr.measureContext_=gn.createCanvasContext2D(1,1)),e},rr.measureTextHeight=function(){var e,t=rr.textHeights_;return function(n){var h=t[n];return h==null&&(e||(e=document.createElement("span"),e.textContent="M",e.style.margin=e.style.padding="0 !important",e.style.position="absolute !important",e.style.left="-99999px !important"),e.style.font=n,document.body.appendChild(e),h=t[n]=e.offsetHeight,document.body.removeChild(e)),h}}(),rr.measureTextWidth=function(e,t){var n=rr.getMeasureContext();return e!=n.font&&(n.font=e),n.measureText(t).width},rr.rotateAtOffset=function(e,t,n,h){t!==0&&(e.translate(n,h),e.rotate(t),e.translate(-n,-h))},rr.resetTransform_=Qt.create(),rr.drawImage=function(e,t,n,h,x,S,f,u,r,i,c){var a;n!=1&&(a=e.globalAlpha,e.globalAlpha=a*n),t&&e.setTransform.apply(e,t),e.drawImage(h,x,S,f,u,r,i,f*c,u*c),a&&(e.globalAlpha=a),t&&e.setTransform.apply(e,rr.resetTransform_)};var Ln={};Ln.HEX_COLOR_RE_=/^#(?:[0-9a-f]{3,4}){1,2}$/i,Ln.NAMED_COLOR_RE_=/^([a-z]*)$/i,Ln.asArray=function(e){return Array.isArray(e)?e:Ln.fromString(e)},Ln.asString=function(e){return typeof e=="string"?e:Ln.toString(e)},Ln.fromNamed=function(e){var t=document.createElement("div");t.style.color=e,document.body.appendChild(t);var n=getComputedStyle(t).color;return document.body.removeChild(t),n},Ln.fromString=function(){var e=1024,t={},n=0;return function(h){var x;if(t.hasOwnProperty(h))x=t[h];else{if(n>=e){var S=0,f;for(f in t)S++&3||(delete t[f],--n)}x=Ln.fromStringInternal_(h),t[h]=x,++n}return x}}(),Ln.fromStringInternal_=function(e){var t,n,h,x,S,f;if(Ln.NAMED_COLOR_RE_.exec(e)&&(e=Ln.fromNamed(e)),Ln.HEX_COLOR_RE_.exec(e)){var u=e.length-1,r;u<=4?r=1:r=2;var i=u===4||u===8;t=parseInt(e.substr(1+0*r,r),16),n=parseInt(e.substr(1+1*r,r),16),h=parseInt(e.substr(1+2*r,r),16),i?x=parseInt(e.substr(1+3*r,r),16):x=255,r==1&&(t=(t<<4)+t,n=(n<<4)+n,h=(h<<4)+h,i&&(x=(x<<4)+x)),S=[t,n,h,x/255]}else e.indexOf("rgba(")==0?(f=e.slice(5,-1).split(",").map(Number),S=Ln.normalize(f)):e.indexOf("rgb(")==0?(f=e.slice(4,-1).split(",").map(Number),f.push(1),S=Ln.normalize(f)):_n.assert(!1,14);return S},Ln.normalize=function(e,t){var n=t||[];return n[0]=wr.clamp(e[0]+.5|0,0,255),n[1]=wr.clamp(e[1]+.5|0,0,255),n[2]=wr.clamp(e[2]+.5|0,0,255),n[3]=wr.clamp(e[3],0,1),n},Ln.toString=function(e){var t=e[0];t!=(t|0)&&(t=t+.5|0);var n=e[1];n!=(n|0)&&(n=n+.5|0);var h=e[2];h!=(h|0)&&(h=h+.5|0);var x=e[3]===void 0?1:e[3];return"rgba("+t+","+n+","+h+","+x+")"};var fa={};fa.asColorLike=function(e){return fa.isColorLike(e)?e:Ln.asString(e)},fa.isColorLike=function(e){return typeof e=="string"||e instanceof CanvasPattern||e instanceof CanvasGradient};var On=function(){};On.prototype.drawCustom=function(e,t,n){},On.prototype.drawGeometry=function(e){},On.prototype.setStyle=function(e){},On.prototype.drawCircle=function(e,t){},On.prototype.drawFeature=function(e,t){},On.prototype.drawGeometryCollection=function(e,t){},On.prototype.drawLineString=function(e,t){},On.prototype.drawMultiLineString=function(e,t){},On.prototype.drawMultiPoint=function(e,t){},On.prototype.drawMultiPolygon=function(e,t){},On.prototype.drawPoint=function(e,t){},On.prototype.drawPolygon=function(e,t){},On.prototype.drawText=function(e,t){},On.prototype.setFillStrokeStyle=function(e,t){},On.prototype.setImageStyle=function(e,t){},On.prototype.setTextStyle=function(e,t){};var zn=function(e,t,n,h,x){On.call(this),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=h,this.viewRotation_=x,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageSnapToPixel_=!1,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Qt.create()};tt.inherits(zn,On),zn.prototype.drawImages_=function(e,t,n,h){if(this.image_){var x=qn.transform2D(e,t,n,2,this.transform_,this.pixelCoordinates_),S=this.context_,f=this.tmpLocalTransform_,u=S.globalAlpha;this.imageOpacity_!=1&&(S.globalAlpha=u*this.imageOpacity_);var r=this.imageRotation_;this.imageRotateWithView_&&(r+=this.viewRotation_);var i,c;for(i=0,c=x.length;i<c;i+=2){var a=x[i]-this.imageAnchorX_,l=x[i+1]-this.imageAnchorY_;if(this.imageSnapToPixel_&&(a=Math.round(a),l=Math.round(l)),r!==0||this.imageScale_!=1){var s=a+this.imageAnchorX_,v=l+this.imageAnchorY_;Qt.compose(f,s,v,this.imageScale_,this.imageScale_,r,-s,-v),S.setTransform.apply(S,f)}S.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,a,l,this.imageWidth_,this.imageHeight_)}(r!==0||this.imageScale_!=1)&&S.setTransform(1,0,0,1,0,0),this.imageOpacity_!=1&&(S.globalAlpha=u)}},zn.prototype.drawText_=function(e,t,n,h){if(!(!this.textState_||this.text_==="")){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var x=qn.transform2D(e,t,n,h,this.transform_,this.pixelCoordinates_),S=this.context_,f=this.textRotation_;for(this.textRotateWithView_&&(f+=this.viewRotation_);t<n;t+=h){var u=x[t]+this.textOffsetX_,r=x[t+1]+this.textOffsetY_;if(f!==0||this.textScale_!=1){var i=Qt.compose(this.tmpLocalTransform_,u,r,this.textScale_,this.textScale_,f,-u,-r);S.setTransform.apply(S,i)}this.textStrokeState_&&S.strokeText(this.text_,u,r),this.textFillState_&&S.fillText(this.text_,u,r)}(f!==0||this.textScale_!=1)&&S.setTransform(1,0,0,1,0,0)}},zn.prototype.moveToLineTo_=function(e,t,n,h,x){var S=this.context_,f=qn.transform2D(e,t,n,h,this.transform_,this.pixelCoordinates_);S.moveTo(f[0],f[1]);var u=f.length;x&&(u-=2);for(var r=2;r<u;r+=2)S.lineTo(f[r],f[r+1]);return x&&S.closePath(),n},zn.prototype.drawRings_=function(e,t,n,h){var x,S;for(x=0,S=n.length;x<S;++x)t=this.moveToLineTo_(e,t,n[x],h,!0);return t},zn.prototype.drawCircle=function(e){if(Tt.intersects(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var t=cn.transform2D(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],h=t[3]-t[1],x=Math.sqrt(n*n+h*h),S=this.context_;S.beginPath(),S.arc(t[0],t[1],x,0,2*Math.PI),this.fillState_&&S.fill(),this.strokeState_&&S.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}},zn.prototype.setStyle=function(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())},zn.prototype.drawGeometry=function(e){var t=e.getType();switch(t){case Er.POINT:this.drawPoint(e);break;case Er.LINE_STRING:this.drawLineString(e);break;case Er.POLYGON:this.drawPolygon(e);break;case Er.MULTI_POINT:this.drawMultiPoint(e);break;case Er.MULTI_LINE_STRING:this.drawMultiLineString(e);break;case Er.MULTI_POLYGON:this.drawMultiPolygon(e);break;case Er.GEOMETRY_COLLECTION:this.drawGeometryCollection(e);break;case Er.CIRCLE:this.drawCircle(e);break}},zn.prototype.drawFeature=function(e,t){var n=t.getGeometryFunction()(e);!n||!Tt.intersects(this.extent_,n.getExtent())||(this.setStyle(t),this.drawGeometry(n))},zn.prototype.drawGeometryCollection=function(e){var t=e.getGeometriesArray(),n,h;for(n=0,h=t.length;n<h;++n)this.drawGeometry(t[n])},zn.prototype.drawPoint=function(e){var t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)},zn.prototype.drawMultiPoint=function(e){var t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)},zn.prototype.drawLineString=function(e){if(Tt.intersects(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){var h=e.getFlatMidpoint();this.drawText_(h,0,2,2)}}},zn.prototype.drawMultiLineString=function(e){var t=e.getExtent();if(Tt.intersects(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,h=e.getFlatCoordinates(),x=0,S=e.getEnds(),f=e.getStride();n.beginPath();var u,r;for(u=0,r=S.length;u<r;++u)x=this.moveToLineTo_(h,x,S[u],f,!1);n.stroke()}if(this.text_!==""){var i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}},zn.prototype.drawPolygon=function(e){if(Tt.intersects(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){var n=e.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}},zn.prototype.drawMultiPolygon=function(e){if(Tt.intersects(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var t=this.context_,n=e.getOrientedFlatCoordinates(),h=0,x=e.getEndss(),S=e.getStride(),f,u;for(t.beginPath(),f=0,u=x.length;f<u;++f){var r=x[f];h=this.drawRings_(n,h,r,S)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){var i=e.getFlatInteriorPoints();this.drawText_(i,0,i.length,2)}}},zn.prototype.setContextFillState_=function(e){var t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})},zn.prototype.setContextStrokeState_=function(e){var t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=t.lineCap=e.lineCap),tn.CANVAS_LINE_DASH&&(Vr.equals(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset=e.lineDashOffset)),n.lineJoin!=e.lineJoin&&(n.lineJoin=t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,tn.CANVAS_LINE_DASH&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})},zn.prototype.setContextTextState_=function(e){var t=this.context_,n=this.contextTextState_,h=e.textAlign?e.textAlign:rr.defaultTextAlign;n?(n.font!=e.font&&(n.font=t.font=e.font),n.textAlign!=h&&(n.textAlign=h),n.textBaseline!=e.textBaseline&&(n.textBaseline=t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=h,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:h,textBaseline:e.textBaseline})},zn.prototype.setFillStrokeStyle=function(e,t){if(!e)this.fillState_=null;else{var n=e.getColor();this.fillState_={fillStyle:fa.asColorLike(n||rr.defaultFillStyle)}}if(!t)this.strokeState_=null;else{var h=t.getColor(),x=t.getLineCap(),S=t.getLineDash(),f=t.getLineDashOffset(),u=t.getLineJoin(),r=t.getWidth(),i=t.getMiterLimit();this.strokeState_={lineCap:x!==void 0?x:rr.defaultLineCap,lineDash:S||rr.defaultLineDash,lineDashOffset:f||rr.defaultLineDashOffset,lineJoin:u!==void 0?u:rr.defaultLineJoin,lineWidth:this.pixelRatio_*(r!==void 0?r:rr.defaultLineWidth),miterLimit:i!==void 0?i:rr.defaultMiterLimit,strokeStyle:fa.asColorLike(h||rr.defaultStrokeStyle)}}},zn.prototype.setImageStyle=function(e){if(!e)this.image_=null;else{var t=e.getAnchor(),n=e.getImage(1),h=e.getOrigin(),x=e.getSize();this.imageAnchorX_=t[0],this.imageAnchorY_=t[1],this.imageHeight_=x[1],this.image_=n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=h[0],this.imageOriginY_=h[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation(),this.imageScale_=e.getScale()*this.pixelRatio_,this.imageSnapToPixel_=e.getSnapToPixel(),this.imageWidth_=x[0]}},zn.prototype.setTextStyle=function(e){if(!e)this.text_="";else{var t=e.getFill();if(!t)this.textFillState_=null;else{var n=t.getColor();this.textFillState_={fillStyle:fa.asColorLike(n||rr.defaultFillStyle)}}var h=e.getStroke();if(!h)this.textStrokeState_=null;else{var x=h.getColor(),S=h.getLineCap(),f=h.getLineDash(),u=h.getLineDashOffset(),r=h.getLineJoin(),i=h.getWidth(),c=h.getMiterLimit();this.textStrokeState_={lineCap:S!==void 0?S:rr.defaultLineCap,lineDash:f||rr.defaultLineDash,lineDashOffset:u||rr.defaultLineDashOffset,lineJoin:r!==void 0?r:rr.defaultLineJoin,lineWidth:i!==void 0?i:rr.defaultLineWidth,miterLimit:c!==void 0?c:rr.defaultMiterLimit,strokeStyle:fa.asColorLike(x||rr.defaultStrokeStyle)}}var a=e.getFont(),l=e.getOffsetX(),s=e.getOffsetY(),v=e.getRotateWithView(),d=e.getRotation(),p=e.getScale(),o=e.getText(),y=e.getTextAlign(),_=e.getTextBaseline();this.textState_={font:a!==void 0?a:rr.defaultFont,textAlign:y!==void 0?y:rr.defaultTextAlign,textBaseline:_!==void 0?_:rr.defaultTextBaseline},this.text_=o!==void 0?o:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=v!==void 0?v:!1,this.textRotation_=d!==void 0?d:0,this.textScale_=this.pixelRatio_*(p!==void 0?p:1)}};var Yi=function(e){da.call(this),this.layer_=e};tt.inherits(Yi,da),Yi.prototype.forEachFeatureAtCoordinate=tt.nullFunction,Yi.prototype.hasFeatureAtCoordinate=Qn.FALSE,Yi.prototype.createLoadedTileFinder=function(e,t,n){return function(h,x){function S(f){n[h]||(n[h]={}),n[h][f.tileCoord.toString()]=f}return e.forEachLoadedTile(t,h,x,S)}},Yi.prototype.getLayer=function(){return this.layer_},Yi.prototype.handleImageChange_=function(e){var t=e.target;t.getState()===Hi.LOADED&&this.renderIfReadyAndVisible()},Yi.prototype.loadImage=function(e){var t=e.getState();return t!=Hi.LOADED&&t!=Hi.ERROR&&Jt.listen(e,kr.CHANGE,this.handleImageChange_,this),t==Hi.IDLE&&(e.load(),t=e.getState()),t==Hi.LOADED},Yi.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();e.getVisible()&&e.getSourceState()==Yo.READY&&this.changed()},Yi.prototype.scheduleExpireCache=function(e,t){if(t.canExpireCache()){var n=(function(h,x,S){var f=tt.getUid(h).toString();f in S.usedTiles&&h.expireCache(S.viewState.projection,S.usedTiles[f])}).bind(null,t);e.postRenderFunctions.push(n)}},Yi.prototype.updateLogos=function(e,t){var n=t.getLogo();n!==void 0&&(typeof n=="string"?e.logos[n]="":n&&(_n.assert(typeof n.href=="string",44),_n.assert(typeof n.src=="string",45),e.logos[n.src]=n.href))},Yi.prototype.updateUsedTiles=function(e,t,n,h){var x=tt.getUid(t).toString(),S=n.toString();x in e?S in e[x]?e[x][S].extend(h):e[x][S]=h:(e[x]={},e[x][S]=h)},Yi.prototype.manageTilePyramid=function(e,t,n,h,x,S,f,u,r,i){var c=tt.getUid(t).toString();c in e.wantedTiles||(e.wantedTiles[c]={});var a=e.wantedTiles[c],l=e.tileQueue,s=n.getMinZoom(),v,d,p,o,y,_;for(_=s;_<=f;++_)for(d=n.getTileRangeForExtentAndZ(S,_,d),p=n.getResolution(_),o=d.minX;o<=d.maxX;++o)for(y=d.minY;y<=d.maxY;++y)f-_<=u?(v=t.getTile(_,o,y,h,x),v.getState()==Tr.IDLE&&(a[v.getKey()]=!0,l.isKeyQueued(v.getKey())||l.enqueue([v,c,n.getTileCoordCenter(v.tileCoord),p])),r!==void 0&&r.call(i,v)):t.useTile(_,o,y,x)};var Wi=function(e){Yi.call(this,e),this.renderedResolution,this.transform_=Qt.create()};tt.inherits(Wi,Yi),Wi.prototype.clip=function(e,t,n){var h=t.pixelRatio,x=t.size[0]*h,S=t.size[1]*h,f=t.viewState.rotation,u=Tt.getTopLeft(n),r=Tt.getTopRight(n),i=Tt.getBottomRight(n),c=Tt.getBottomLeft(n);Qt.apply(t.coordinateToPixelTransform,u),Qt.apply(t.coordinateToPixelTransform,r),Qt.apply(t.coordinateToPixelTransform,i),Qt.apply(t.coordinateToPixelTransform,c),e.save(),rr.rotateAtOffset(e,-f,x/2,S/2),e.beginPath(),e.moveTo(u[0]*h,u[1]*h),e.lineTo(r[0]*h,r[1]*h),e.lineTo(i[0]*h,i[1]*h),e.lineTo(c[0]*h,c[1]*h),e.clip(),rr.rotateAtOffset(e,f,x/2,S/2)},Wi.prototype.dispatchComposeEvent_=function(e,t,n,h){var x=this.getLayer();if(x.hasListener(e)){var S=n.size[0]*n.pixelRatio,f=n.size[1]*n.pixelRatio,u=n.viewState.rotation;rr.rotateAtOffset(t,-u,S/2,f/2);var r=h!==void 0?h:this.getTransform(n,0),i=new zn(t,n.pixelRatio,n.extent,r,n.viewState.rotation),c=new fs(e,i,n,t,null);x.dispatchEvent(c),rr.rotateAtOffset(t,u,S/2,f/2)}},Wi.prototype.forEachLayerAtCoordinate=function(e,t,n,h){var x=this.forEachFeatureAtCoordinate(e,t,0,Qn.TRUE,this);if(x)return n.call(h,this.getLayer(),null)},Wi.prototype.postCompose=function(e,t,n,h){this.dispatchComposeEvent_(wa.POSTCOMPOSE,e,t,h)},Wi.prototype.preCompose=function(e,t,n){this.dispatchComposeEvent_(wa.PRECOMPOSE,e,t,n)},Wi.prototype.dispatchRenderEvent=function(e,t,n){this.dispatchComposeEvent_(wa.RENDER,e,t,n)},Wi.prototype.getTransform=function(e,t){var n=e.viewState,h=e.pixelRatio,x=h*e.size[0]/2,S=h*e.size[1]/2,f=h/n.resolution,u=-f,r=-n.rotation,i=-n.center[0]+t,c=-n.center[1];return Qt.compose(this.transform_,x,S,f,u,r,i,c)},Wi.prototype.composeFrame=function(e,t,n){},Wi.prototype.prepareFrame=function(e,t){};var Ia=function(e){Wi.call(this,e),this.coordinateToCanvasPixelTransform=Qt.create(),this.hitCanvasContext_=null};tt.inherits(Ia,Wi),Ia.prototype.composeFrame=function(e,t,n){this.preCompose(n,e);var h=this.getImage();if(h){var x=t.extent,S=x!==void 0&&!Tt.containsExtent(x,e.extent)&&Tt.intersects(x,e.extent);S&&this.clip(n,e,x);var f=this.getImageTransform(),u=n.globalAlpha;n.globalAlpha=t.opacity;var r=f[4],i=f[5],c=h.width*f[0],a=h.height*f[3];n.drawImage(h,0,0,+h.width,+h.height,Math.round(r),Math.round(i),Math.round(c),Math.round(a)),n.globalAlpha=u,S&&n.restore()}this.postCompose(n,e,t)},Ia.prototype.getImage=function(){},Ia.prototype.getImageTransform=function(){},Ia.prototype.forEachFeatureAtCoordinate=function(e,t,n,h,x){var S=this.getLayer(),f=S.getSource(),u=t.viewState.resolution,r=t.viewState.rotation,i=t.skippedFeatureUids;return f.forEachFeatureAtCoordinate(e,u,r,n,i,function(c){return h.call(x,c,S)})},Ia.prototype.forEachLayerAtCoordinate=function(e,t,n,h){if(this.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==tt.nullFunction)return Wi.prototype.forEachLayerAtCoordinate.apply(this,arguments);var x=Qt.apply(this.coordinateToCanvasPixelTransform,e.slice());bn.scale(x,t.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=gn.createCanvasContext2D(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),x[0],x[1],1,1,0,0,1,1);var S=this.hitCanvasContext_.getImageData(0,0,1,1).data;return S[3]>0?n.call(h,this.getLayer(),S):void 0}};var Pa=function(e){Ia.call(this,e),this.image_=null,this.imageTransform_=Qt.create(),this.skippedFeatures_=[],this.vectorRenderer_=null};tt.inherits(Pa,Ia),Pa.handles=function(e,t){return e===ra.CANVAS&&(t.getType()===Oa.IMAGE||t.getType()===Oa.VECTOR&&t.getRenderMode()===Jf.IMAGE)},Pa.create=function(e,t){var n=new Pa(t);if(t.getType()===Oa.VECTOR)for(var h=Ai.getLayerRendererPlugins(),x=0,S=h.length;x<S;++x){var f=h[x];f!==Pa&&f.handles(ra.CANVAS,t)&&n.setVectorRenderer(f.create(e,t))}return n},Pa.prototype.getImage=function(){return this.image_?this.image_.getImage():null},Pa.prototype.getImageTransform=function(){return this.imageTransform_},Pa.prototype.prepareFrame=function(e,t){var n=e.pixelRatio,h=e.size,x=e.viewState,S=x.center,f=x.resolution,u,r=this.getLayer(),i=r.getSource(),c=e.viewHints,a=e.extent;if(t.extent!==void 0&&(a=Tt.getIntersection(a,t.extent)),!c[Tn.ANIMATING]&&!c[Tn.INTERACTING]&&!Tt.isEmpty(a)){var l=x.projection;if(!tt.ENABLE_RASTER_REPROJECTION){var s=i.getProjection();s&&(l=s)}var v=this.vectorRenderer_;if(v){var d=v.context,p=Zr.assign({},e,{size:[Tt.getWidth(a)/f,Tt.getHeight(a)/f],viewState:Zr.assign({},e.viewState,{rotation:0})}),o=Object.keys(p.skippedFeatureUids).sort();v.prepareFrame(p,t)&&(v.replayGroupChanged||!Vr.equals(o,this.skippedFeatures_))&&(d.canvas.width=p.size[0]*n,d.canvas.height=p.size[1]*n,v.composeFrame(p,t,d),this.image_=new jo(a,f,n,d.canvas),this.skippedFeatures_=o)}else if(u=i.getImage(a,f,n,l),u){var y=this.loadImage(u);y&&(this.image_=u)}}if(this.image_){u=this.image_;var _=u.getExtent(),E=u.getResolution(),M=u.getPixelRatio(),b=n*E/(f*M),w=Qt.compose(this.imageTransform_,n*h[0]/2,n*h[1]/2,b,b,0,M*(_[0]-S[0])/E,M*(S[1]-_[3])/E);Qt.compose(this.coordinateToCanvasPixelTransform,n*h[0]/2-w[4],n*h[1]/2-w[5],n/f,-n/f,0,-S[0],-S[1]),this.updateLogos(e,i),this.renderedResolution=E*n/M}return!!this.image_},Pa.prototype.forEachFeatureAtCoordinate=function(e,t,n,h,x){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,n,h,x):Ia.prototype.forEachFeatureAtCoordinate.call(this,e,t,n,h,x)},Pa.prototype.setVectorRenderer=function(e){this.vectorRenderer_=e};var io=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};io.getKey=function(e,t,n){var h=n?Ln.asString(n):"null";return t+":"+e+":"+h},io.prototype.clear=function(){this.cache_={},this.cacheSize_=0},io.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var e=0,t,n;for(t in this.cache_)n=this.cache_[t],!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}},io.prototype.get=function(e,t,n){var h=io.getKey(e,t,n);return h in this.cache_?this.cache_[h]:null},io.prototype.set=function(e,t,n,h){var x=io.getKey(e,t,n);this.cache_[x]=h,++this.cacheSize_},io.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()};var Ql={};Ql.iconImageCache=new io;var Sn=function(e,t){ja.call(this),this.map_=t,this.layerRenderers_={},this.layerRendererListeners_={}};tt.inherits(Sn,ja),Sn.prototype.calculateMatrices2D=function(e){var t=e.viewState,n=e.coordinateToPixelTransform,h=e.pixelToCoordinateTransform;Qt.compose(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Qt.invert(Qt.setFromArray(h,n))},Sn.prototype.removeLayerRenderers=function(){for(var e in this.layerRenderers_)this.removeLayerRendererByKey_(e).dispose()},Sn.expireIconCache_=function(e,t){var n=Ql.iconImageCache;n.expire()},Sn.prototype.forEachFeatureAtCoordinate=function(e,t,n,h,x,S,f){var u,r=t.viewState,i=r.resolution;function c(w,A){var R=tt.getUid(w).toString(),T=t.layerStates[tt.getUid(A)].managed;if(!(R in t.skippedFeatureUids&&!T))return h.call(x,w,T?A:null)}var a=r.projection,l=e;if(a.canWrapX()){var s=a.getExtent(),v=Tt.getWidth(s),d=e[0];if(d<s[0]||d>s[2]){var p=Math.ceil((s[0]-d)/v);l=[d+v*p,e[1]]}}var o=t.layerStatesArray,y=o.length,_;for(_=y-1;_>=0;--_){var E=o[_],M=E.layer;if(li.visibleAtResolution(E,i)&&S.call(f,M)){var b=this.getLayerRenderer(M);if(M.getSource()&&(u=b.forEachFeatureAtCoordinate(M.getSource().getWrapX()?l:e,t,n,c,x)),u)return u}}},Sn.prototype.forEachLayerAtPixel=function(e,t,n,h,x,S){},Sn.prototype.hasFeatureAtCoordinate=function(e,t,n,h,x){var S=this.forEachFeatureAtCoordinate(e,t,n,Qn.TRUE,this,h,x);return S!==void 0},Sn.prototype.getLayerRenderer=function(e){var t=tt.getUid(e).toString();if(t in this.layerRenderers_)return this.layerRenderers_[t];for(var n=Ai.getLayerRendererPlugins(),h,x=this.getType(),S=0,f=n.length;S<f;++S){var u=n[S];if(u.handles(x,e)){h=u.create(this,e);break}}if(h)this.layerRenderers_[t]=h,this.layerRendererListeners_[t]=Jt.listen(h,kr.CHANGE,this.handleLayerRendererChange_,this);else throw new Error("Unable to create renderer for layer: "+e.getType());return h},Sn.prototype.getLayerRendererByKey=function(e){return this.layerRenderers_[e]},Sn.prototype.getLayerRenderers=function(){return this.layerRenderers_},Sn.prototype.getMap=function(){return this.map_},Sn.prototype.getType=function(){},Sn.prototype.handleLayerRendererChange_=function(){this.map_.render()},Sn.prototype.removeLayerRendererByKey_=function(e){var t=this.layerRenderers_[e];return delete this.layerRenderers_[e],Jt.unlistenByKey(this.layerRendererListeners_[e]),delete this.layerRendererListeners_[e],t},Sn.prototype.renderFrame=tt.nullFunction,Sn.prototype.removeUnusedLayerRenderers_=function(e,t){var n;for(n in this.layerRenderers_)(!t||!(n in t.layerStates))&&this.removeLayerRendererByKey_(n).dispose()},Sn.prototype.scheduleExpireIconCache=function(e){e.postRenderFunctions.push(Sn.expireIconCache_)},Sn.prototype.scheduleRemoveUnusedLayerRenderers=function(e){var t;for(t in this.layerRenderers_)if(!(t in e.layerStates)){e.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this));return}},Sn.sortByZIndex=function(e,t){return e.zIndex-t.zIndex};var Va=function(e,t){Sn.call(this,e,t),this.context_=gn.createCanvasContext2D(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=hi.CLASS_UNSELECTABLE,e.insertBefore(this.canvas_,e.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=Qt.create()};tt.inherits(Va,Sn),Va.handles=function(e){return e===ra.CANVAS},Va.create=function(e,t){return new Va(e,t)},Va.prototype.dispatchComposeEvent_=function(e,t){var n=this.getMap(),h=this.context_;if(n.hasListener(e)){var x=t.extent,S=t.pixelRatio,f=t.viewState,u=f.rotation,r=this.getTransform(t),i=new zn(h,S,x,r,u),c=new fs(e,i,t,h,null);n.dispatchEvent(c)}},Va.prototype.getTransform=function(e){var t=e.viewState,n=this.canvas_.width/2,h=this.canvas_.height/2,x=e.pixelRatio/t.resolution,S=-x,f=-t.rotation,u=-t.center[0],r=-t.center[1];return Qt.compose(this.transform_,n,h,x,S,f,u,r)},Va.prototype.getType=function(){return ra.CANVAS},Va.prototype.renderFrame=function(e){if(!e){this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1);return}var t=this.context_,n=e.pixelRatio,h=Math.round(e.size[0]*n),x=Math.round(e.size[1]*n);this.canvas_.width!=h||this.canvas_.height!=x?(this.canvas_.width=h,this.canvas_.height=x):t.clearRect(0,0,h,x);var S=e.viewState.rotation;this.calculateMatrices2D(e),this.dispatchComposeEvent_(wa.PRECOMPOSE,e);var f=e.layerStatesArray;Vr.stableSort(f,Sn.sortByZIndex),S&&(t.save(),rr.rotateAtOffset(t,S,h/2,x/2));var u=e.viewState.resolution,r,i,c,a,l;for(r=0,i=f.length;r<i;++r)l=f[r],c=l.layer,a=this.getLayerRenderer(c),!(!li.visibleAtResolution(l,u)||l.sourceState!=Yo.READY)&&a.prepareFrame(e,l)&&a.composeFrame(e,l,t);S&&t.restore(),this.dispatchComposeEvent_(wa.POSTCOMPOSE,e),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(e),this.scheduleExpireIconCache(e)},Va.prototype.forEachLayerAtPixel=function(e,t,n,h,x,S){var f,u=t.viewState,r=u.resolution,i=t.layerStatesArray,c=i.length,a=Qt.apply(t.pixelToCoordinateTransform,e.slice()),l;for(l=c-1;l>=0;--l){var s=i[l],v=s.layer;if(li.visibleAtResolution(s,r)&&x.call(S,v)){var d=this.getLayerRenderer(v);if(f=d.forEachLayerAtCoordinate(a,t,n,h),f)return f}}};var Mi=function(e,t,n,h){this.minX=e,this.maxX=t,this.minY=n,this.maxY=h};Mi.createOrUpdate=function(e,t,n,h,x){return x!==void 0?(x.minX=e,x.maxX=t,x.minY=n,x.maxY=h,x):new Mi(e,t,n,h)},Mi.prototype.contains=function(e){return this.containsXY(e[1],e[2])},Mi.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY},Mi.prototype.containsXY=function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY},Mi.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY},Mi.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)},Mi.prototype.getHeight=function(){return this.maxY-this.minY+1},Mi.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},Mi.prototype.getWidth=function(){return this.maxX-this.minX+1},Mi.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY};var Ni=function(e){Ia.call(this,e),this.context=this.context===null?null:gn.createCanvasContext2D(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.tmpExtent=Tt.createEmpty(),this.tmpTileRange_=new Mi(0,0,0,0),this.imageTransform_=Qt.create(),this.zDirection=0};tt.inherits(Ni,Ia),Ni.handles=function(e,t){return e===ra.CANVAS&&t.getType()===Oa.TILE},Ni.create=function(e,t){return new Ni(t)},Ni.prototype.isDrawableTile_=function(e){var t=e.getState(),n=this.getLayer().getUseInterimTilesOnError();return t==Tr.LOADED||t==Tr.EMPTY||t==Tr.ERROR&&!n},Ni.prototype.prepareFrame=function(e,t){var n=e.pixelRatio,h=e.size,x=e.viewState,S=x.projection,f=x.resolution,u=x.center,r=this.getLayer(),i=r.getSource(),c=i.getRevision(),a=i.getTileGridForProjection(S),l=a.getZForResolution(f,this.zDirection),s=a.getResolution(l),v=Math.round(f/s)||1,d=e.extent;if(t.extent!==void 0&&(d=Tt.getIntersection(d,t.extent)),Tt.isEmpty(d))return!1;var p=a.getTileRangeForExtentAndZ(d,l),o=a.getTileRangeExtent(l,p),y=i.getTilePixelRatio(n),_={};_[l]={};var E=this.createLoadedTileFinder(i,S,_),M=this.tmpExtent,b=this.tmpTileRange_,w=!1,A,R,T;for(R=p.minX;R<=p.maxX;++R)for(T=p.minY;T<=p.maxY;++T){if(A=i.getTile(l,R,T,n,S),A.getState()==Tr.ERROR&&(r.getUseInterimTilesOnError()?r.getPreload()>0&&(w=!0):A.setState(Tr.LOADED)),this.isDrawableTile_(A)||(A=A.getInterimTile()),this.isDrawableTile_(A)){var C=tt.getUid(this);if(A.getState()==Tr.LOADED){_[l][A.tileCoord.toString()]=A;var m=A.inTransition(C);!w&&(m||this.renderedTiles.indexOf(A)===-1)&&(w=!0)}if(A.getAlpha(C,e.time)===1)continue}var L=a.getTileCoordChildTileRange(A.tileCoord,b,M),D=!1;L&&(D=E(l+1,L)),D||a.forEachTileCoordParentTileRange(A.tileCoord,E,null,b,M)}var O=s*n/y*v,N=e.viewHints,V=N[Tn.ANIMATING]||N[Tn.INTERACTING];if(!(this.renderedResolution&&Date.now()-e.time>16&&V)&&(w||!(this.renderedExtent_&&Tt.containsExtent(this.renderedExtent_,d))||this.renderedRevision!=c||v!=this.oversampling_||!V&&O!=this.renderedResolution)){var X=this.context;if(X){var k=i.getTilePixelSize(l,n,S),Z=Math.round(p.getWidth()*k[0]/v),B=Math.round(p.getHeight()*k[1]/v),J=X.canvas;J.width!=Z||J.height!=B?(this.oversampling_=v,J.width=Z,J.height=B):(this.renderedExtent_&&!Tt.equals(o,this.renderedExtent_)&&X.clearRect(0,0,Z,B),v=this.oversampling_)}this.renderedTiles.length=0;var ne=Object.keys(_).map(Number);ne.sort(function(U,W){return U===l?1:W===l?-1:U>W?1:U<W?-1:0});var oe,Y,G,K,ee,ie,re,se,ge,xe,Se;for(ee=0,ie=ne.length;ee<ie;++ee){K=ne[ee],G=i.getTilePixelSize(K,n,S),oe=a.getResolution(K),Y=oe/s,se=y*i.getGutter(S),ge=_[K];for(var ce in ge)A=ge[ce],re=a.getTileCoordExtent(A.getTileCoord(),M),R=(re[0]-o[0])/s*y/v,T=(o[3]-re[3])/s*y/v,xe=G[0]*Y/v,Se=G[1]*Y/v,this.drawTileImage(A,e,t,R,T,xe,Se,se,l===K),this.renderedTiles.push(A)}this.renderedRevision=c,this.renderedResolution=s*n/y*v,this.renderedExtent_=o}var pe=this.renderedResolution/f,ye=Qt.compose(this.imageTransform_,n*h[0]/2,n*h[1]/2,pe,pe,0,(this.renderedExtent_[0]-u[0])/this.renderedResolution*n,(u[1]-this.renderedExtent_[3])/this.renderedResolution*n);return Qt.compose(this.coordinateToCanvasPixelTransform,n*h[0]/2-ye[4],n*h[1]/2-ye[5],n/f,-n/f,0,-u[0],-u[1]),this.updateUsedTiles(e.usedTiles,i,l,p),this.manageTilePyramid(e,i,a,n,S,d,l,r.getPreload()),this.scheduleExpireCache(e,i),this.updateLogos(e,i),this.renderedTiles.length>0},Ni.prototype.drawTileImage=function(e,t,n,h,x,S,f,u,r){var i=e.getImage(this.getLayer());if(i){var c=tt.getUid(this),a=r?e.getAlpha(c,t.time):1;a===1&&!this.getLayer().getSource().getOpaque(t.viewState.projection)&&this.context.clearRect(h,x,S,f);var l=a!==this.context.globalAlpha;l&&(this.context.save(),this.context.globalAlpha=a),this.context.drawImage(i,u,u,i.width-2*u,i.height-2*u,h,x,S,f),l&&this.context.restore(),a!==1?t.animate=!0:r&&e.endTransition(c)}},Ni.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},Ni.prototype.getLayer,Ni.prototype.getImageTransform=function(){return this.imageTransform_};var ql={exports:{}};(function(e,t){(function(n,h){e.exports=h()})(zl,function(){function n(f,u,r,i,c){h(f,u,r||0,i||f.length-1,c||S)}function h(f,u,r,i,c){for(;i>r;){if(i-r>600){var a=i-r+1,l=u-r+1,s=Math.log(a),v=.5*Math.exp(2*s/3),d=.5*Math.sqrt(s*v*(a-v)/a)*(l-a/2<0?-1:1),p=Math.max(r,Math.floor(u-l*v/a+d)),o=Math.min(i,Math.floor(u+(a-l)*v/a+d));h(f,u,p,o,c)}var y=f[u],_=r,E=i;for(x(f,r,u),c(f[i],y)>0&&x(f,r,i);_<E;){for(x(f,_,E),_++,E--;c(f[_],y)<0;)_++;for(;c(f[E],y)>0;)E--}c(f[r],y)===0?x(f,r,E):(E++,x(f,E,i)),E<=u&&(r=E+1),u<=E&&(i=E-1)}}function x(f,u,r){var i=f[u];f[u]=f[r],f[r]=i}function S(f,u){return f<u?-1:f>u?1:0}return n})})(ql);var jf=ql.exports,$f=Rs,Qf=jf;function Rs(e,t){if(!(this instanceof Rs))return new Rs(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),t&&this._initFormat(t),this.clear()}Rs.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,n=[],h=this.toBBox;if(!Is(e,t))return n;for(var x=[],S,f,u,r;t;){for(S=0,f=t.children.length;S<f;S++)u=t.children[S],r=t.leaf?h(u):u,Is(e,r)&&(t.leaf?n.push(u):cl(e,r)?this._all(u,n):x.push(u));t=x.pop()}return n},collides:function(e){var t=this.data,n=this.toBBox;if(!Is(e,t))return!1;for(var h=[],x,S,f,u;t;){for(x=0,S=t.children.length;x<S;x++)if(f=t.children[x],u=t.leaf?n(f):f,Is(e,u)){if(t.leaf||cl(e,u))return!0;h.push(f)}t=h.pop()}return!1},load:function(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var h=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=h;else if(this.data.height===h.height)this._splitRoot(this.data,h);else{if(this.data.height<h.height){var x=this.data;this.data=h,h=x}this._insert(h,this.data.height-h.height-1,!0)}return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Qo([]),this},remove:function(e,t){if(!e)return this;for(var n=this.data,h=this.toBBox(e),x=[],S=[],f,u,r,i;n||x.length;){if(n||(n=x.pop(),u=x[x.length-1],f=S.pop(),i=!0),n.leaf&&(r=qf(e,n.children,t),r!==-1))return n.children.splice(r,1),x.push(n),this._condense(x),this;!i&&!n.leaf&&cl(n,h)?(x.push(n),S.push(f),f=0,u=n,n=n.children[0]):u?(f++,n=u.children[f],i=!1):n=null}return this},toBBox:function(e){return e},compareMinX:eu,compareMinY:tu,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},_build:function(e,t,n,h){var x=n-t+1,S=this._maxEntries,f;if(x<=S)return f=Qo(e.slice(t,n+1)),$o(f,this.toBBox),f;h||(h=Math.ceil(Math.log(x)/Math.log(S)),S=Math.ceil(x/Math.pow(S,h-1))),f=Qo([]),f.leaf=!1,f.height=h;var u=Math.ceil(x/S),r=u*Math.ceil(Math.sqrt(S)),i,c,a,l;for(ru(e,t,n,r,this.compareMinX),i=t;i<=n;i+=r)for(a=Math.min(i+r-1,n),ru(e,i,a,u,this.compareMinY),c=i;c<=a;c+=u)l=Math.min(c+u-1,a),f.children.push(this._build(e,c,l,h-1));return $o(f,this.toBBox),f},_chooseSubtree:function(e,t,n,h){for(var x,S,f,u,r,i,c,a;h.push(t),!(t.leaf||h.length-1===n);){for(c=a=1/0,x=0,S=t.children.length;x<S;x++)f=t.children[x],r=fl(f),i=ec(e,f)-r,i<a?(a=i,c=r<c?r:c,u=f):i===a&&r<c&&(c=r,u=f);t=u||t.children[0]}return t},_insert:function(e,t,n){var h=this.toBBox,x=n?e:h(e),S=[],f=this._chooseSubtree(x,this.data,t,S);for(f.children.push(e),hs(f,x);t>=0&&S[t].children.length>this._maxEntries;)this._split(S,t),t--;this._adjustParentBBoxes(x,S,t)},_split:function(e,t){var n=e[t],h=n.children.length,x=this._minEntries;this._chooseSplitAxis(n,x,h);var S=this._chooseSplitIndex(n,x,h),f=Qo(n.children.splice(S,n.children.length-S));f.height=n.height,f.leaf=n.leaf,$o(n,this.toBBox),$o(f,this.toBBox),t?e[t-1].children.push(f):this._splitRoot(n,f)},_splitRoot:function(e,t){this.data=Qo([e,t]),this.data.height=e.height+1,this.data.leaf=!1,$o(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,n){var h,x,S,f,u,r,i,c;for(r=i=1/0,h=t;h<=n-t;h++)x=cs(e,0,h,this.toBBox),S=cs(e,h,n,this.toBBox),f=tc(x,S),u=fl(x)+fl(S),f<r?(r=f,c=h,i=u<i?u:i):f===r&&u<i&&(i=u,c=h);return c},_chooseSplitAxis:function(e,t,n){var h=e.leaf?this.compareMinX:eu,x=e.leaf?this.compareMinY:tu,S=this._allDistMargin(e,t,n,h),f=this._allDistMargin(e,t,n,x);S<f&&e.children.sort(h)},_allDistMargin:function(e,t,n,h){e.children.sort(h);var x=this.toBBox,S=cs(e,0,t,x),f=cs(e,n-t,n,x),u=Ds(S)+Ds(f),r,i;for(r=t;r<n-t;r++)i=e.children[r],hs(S,e.leaf?x(i):i),u+=Ds(S);for(r=n-t-1;r>=t;r--)i=e.children[r],hs(f,e.leaf?x(i):i),u+=Ds(f);return u},_adjustParentBBoxes:function(e,t,n){for(var h=n;h>=0;h--)hs(t[h],e)},_condense:function(e){for(var t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():$o(e[t],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function qf(e,t,n){if(!n)return t.indexOf(e);for(var h=0;h<t.length;h++)if(n(e,t[h]))return h;return-1}function $o(e,t){cs(e,0,e.children.length,t,e)}function cs(e,t,n,h,x){x||(x=Qo(null)),x.minX=1/0,x.minY=1/0,x.maxX=-1/0,x.maxY=-1/0;for(var S=t,f;S<n;S++)f=e.children[S],hs(x,e.leaf?h(f):f);return x}function hs(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function eu(e,t){return e.minX-t.minX}function tu(e,t){return e.minY-t.minY}function fl(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Ds(e){return e.maxX-e.minX+(e.maxY-e.minY)}function ec(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function tc(e,t){var n=Math.max(e.minX,t.minX),h=Math.max(e.minY,t.minY),x=Math.min(e.maxX,t.maxX),S=Math.min(e.maxY,t.maxY);return Math.max(0,x-n)*Math.max(0,S-h)}function cl(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Is(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Qo(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ru(e,t,n,h,x){for(var S=[t,n],f;S.length;)n=S.pop(),t=S.pop(),!(n-t<=h)&&(f=t+Math.ceil((n-t)/h/2)*h,Qf(e,f,t,n,x),S.push(t,f,f,n))}const hl=il($f);var qo=function(){};qo.prototype.getReplay=function(e,t){},qo.prototype.isEmpty=function(){};var Hr={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"},Ps={};Ps.lineString=function(e,t,n,h){var x=e[t],S=e[t+1],f=0,u;for(u=t+h;u<n;u+=h){var r=e[u],i=e[u+1];f+=Math.sqrt((r-x)*(r-x)+(i-S)*(i-S)),x=r,S=i}return f},Ps.linearRing=function(e,t,n,h){var x=Ps.lineString(e,t,n,h),S=e[n-h]-e[t],f=e[n-h+1]-e[t+1];return x+=Math.sqrt(S*S+f*f),x};var nu={};nu.lineString=function(e,t,n,h,x,S,f,u){var r=[],i=e[t]>e[n-h],c=x.length,a=e[t],l=e[t+1];t+=h;for(var s=e[t],v=e[t+1],d=0,p=Math.sqrt(Math.pow(s-a,2)+Math.pow(v-l,2)),o="",y=0,_,E,M,b=0;b<c;++b){E=i?c-b-1:b;var w=x.charAt(E);o=i?w+o:o+w;var A=S(o)-y;y+=A;for(var R=f+A/2;t<n-h&&d+p<R;)a=s,l=v,t+=h,s=e[t],v=e[t+1],d+=p,p=Math.sqrt(Math.pow(s-a,2)+Math.pow(v-l,2));var T=R-d,C=Math.atan2(v-l,s-a);if(i&&(C+=C>0?-Math.PI:Math.PI),M!==void 0){var m=C-M;if(m+=m>Math.PI?-2*Math.PI:m<-Math.PI?2*Math.PI:0,Math.abs(m)>u)return null}var L=T/p,D=wr.lerp(a,s,L),O=wr.lerp(l,v,L);M==C?(i&&(_[0]=D,_[1]=O,_[2]=A/2),_[4]=o):(o=w,y=A,_=[D,O,A/2,C,o],i?r.unshift(_):r.push(_),M=C),f+=A}return r};var Sr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Cn={};Cn.ORDER=[Hr.POLYGON,Hr.CIRCLE,Hr.LINE_STRING,Hr.IMAGE,Hr.TEXT,Hr.DEFAULT],Cn.TEXT_ALIGN={},Cn.TEXT_ALIGN.left=0,Cn.TEXT_ALIGN.end=0,Cn.TEXT_ALIGN.center=.5,Cn.TEXT_ALIGN.right=1,Cn.TEXT_ALIGN.start=1,Cn.TEXT_ALIGN.top=0,Cn.TEXT_ALIGN.middle=.5,Cn.TEXT_ALIGN.hanging=.2,Cn.TEXT_ALIGN.alphabetic=.8,Cn.TEXT_ALIGN.ideographic=.8,Cn.TEXT_ALIGN.bottom=1;var sn=function(e,t,n,h,x,S){On.call(this),this.declutterTree=S,this.tmpExtent_=Tt.createEmpty(),this.tolerance=e,this.maxExtent=t,this.overlaps=x,this.pixelRatio=h,this.maxLineWidth=0,this.resolution=n,this.fillOrigin_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=Qt.create(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0,this.tmpLocalTransform_=Qt.create(),this.resetTransform_=Qt.create()};tt.inherits(sn,On),sn.prototype.replayTextBackground_=function(e,t,n,h,x,S,f){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,h),e.lineTo.apply(e,x),e.lineTo.apply(e,t),S&&(this.fillOrigin_=S[2],this.fill_(e)),f&&(this.setStrokeStyle_(e,f),e.stroke())},sn.prototype.replayImage_=function(e,t,n,h,x,S,f,u,r,i,c,a,l,s,v,d,p,o){var y=p||o,_=this.tmpLocalTransform_;x*=l,S*=l,t-=x,n-=S,s&&(t=Math.round(t),n=Math.round(n));var E=v+i>h.width?h.width-i:v,M=u+c>h.height?h.height-c:u,b=this.tmpExtent_,w=d[3]+E*l+d[1],A=d[0]+M*l+d[2],R=t-d[3],T=n-d[0],C,m,L,D;(y||a!==0)&&(C=[R,T],m=[R+w,T],L=[R+w,T+A],D=[R,T+A]);var O=null;if(a!==0){var N=t+x,V=n+S;O=Qt.compose(_,N,V,1,1,a,-N,-V),Tt.createOrUpdateEmpty(b),Tt.extendCoordinate(b,Qt.apply(_,C)),Tt.extendCoordinate(b,Qt.apply(_,m)),Tt.extendCoordinate(b,Qt.apply(_,L)),Tt.extendCoordinate(b,Qt.apply(_,D))}else Tt.createOrUpdate(R,T,R+w,T+A,b);var X=e.canvas,k=b[0]<=X.width&&b[2]>=0&&b[1]<=X.height&&b[3]>=0;if(f){if(!k&&f[4]==1)return;Tt.extend(f,b);var Z=k?[e,O?O.slice(0):null,r,h,i,c,E,M,t,n,l]:null;Z&&y&&Z.push(p,o,C,m,L,D),f.push(Z)}else k&&(y&&this.replayTextBackground_(e,C,m,L,D,p,o),rr.drawImage(e,O,r,h,i,c,E,M,t,n,l))},sn.prototype.applyPixelRatio=function(e){var t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})},sn.prototype.appendFlatCoordinates=function(e,t,n,h,x,S){var f=this.coordinates.length,u=this.getBufferedMaxExtent();S&&(t+=h);var r=[e[t],e[t+1]],i=[NaN,NaN],c=!0,a,l,s;for(a=t+h;a<n;a+=h)i[0]=e[a],i[1]=e[a+1],s=Tt.coordinateRelationship(u,i),s!==l?(c&&(this.coordinates[f++]=r[0],this.coordinates[f++]=r[1]),this.coordinates[f++]=i[0],this.coordinates[f++]=i[1],c=!1):s===Ti.INTERSECTING?(this.coordinates[f++]=i[0],this.coordinates[f++]=i[1],c=!1):c=!0,r[0]=i[0],r[1]=i[1],l=s;return(x&&c||a===t+h)&&(this.coordinates[f++]=r[0],this.coordinates[f++]=r[1]),f},sn.prototype.drawCustomCoordinates_=function(e,t,n,h,x){for(var S=0,f=n.length;S<f;++S){var u=n[S],r=this.appendFlatCoordinates(e,t,u,h,!1,!1);x.push(r),t=u}return t},sn.prototype.drawCustom=function(e,t,n){this.beginGeometry(e,t);var h=e.getType(),x=e.getStride(),S=this.coordinates.length,f,u,r,i,c;if(h==Er.MULTI_POLYGON){e=e,f=e.getOrientedFlatCoordinates(),i=[];var a=e.getEndss();c=0;for(var l=0,s=a.length;l<s;++l){var v=[];c=this.drawCustomCoordinates_(f,c,a[l],x,v),i.push(v)}this.instructions.push([Sr.CUSTOM,S,i,e,n,Ha.coordinatesss])}else h==Er.POLYGON||h==Er.MULTI_LINE_STRING?(r=[],f=h==Er.POLYGON?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),c=this.drawCustomCoordinates_(f,0,e.getEnds(),x,r),this.instructions.push([Sr.CUSTOM,S,r,e,n,Ha.coordinatess])):h==Er.LINE_STRING||h==Er.MULTI_POINT?(f=e.getFlatCoordinates(),u=this.appendFlatCoordinates(f,0,f.length,x,!1,!1),this.instructions.push([Sr.CUSTOM,S,u,e,n,Ha.coordinates])):h==Er.POINT&&(f=e.getFlatCoordinates(),this.coordinates.push(f[0],f[1]),u=this.coordinates.length,this.instructions.push([Sr.CUSTOM,S,u,e,n]));this.endGeometry(e,t)},sn.prototype.beginGeometry=function(e,t){this.beginGeometryInstruction1_=[Sr.BEGIN_GEOMETRY,t,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Sr.BEGIN_GEOMETRY,t,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},sn.prototype.fill_=function(e){if(this.fillOrigin_){var t=Qt.apply(this.renderedTransform_,this.fillOrigin_.slice());e.translate(t[0],t[1]),e.rotate(this.viewRotation_)}e.fill(),this.fillOrigin_&&e.setTransform.apply(e,rr.resetTransform_)},sn.prototype.setStrokeStyle_=function(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],tn.CANVAS_LINE_DASH&&(e.lineDashOffset=t[7],e.setLineDash(t[6]))},sn.prototype.renderDeclutter_=function(e,t){if(e&&e.length>5){var n=e[4];if(n==1||n==e.length-5){var h={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};if(!this.declutterTree.collides(h)){this.declutterTree.insert(h);for(var x=rr.drawImage,S=5,f=e.length;S<f;++S){var u=e[S];u&&(u.length>11&&this.replayTextBackground_(u[0],u[13],u[14],u[15],u[16],u[11],u[12]),x.apply(void 0,u))}}e.length=5,Tt.createOrUpdateEmpty(e)}}},sn.prototype.replay_=function(e,t,n,h,x,S){var f;this.pixelCoordinates_&&Vr.equals(t,this.renderedTransform_)?f=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),f=qn.transform2D(this.coordinates,0,this.coordinates.length,2,t,this.pixelCoordinates_),Qt.setFromArray(this.renderedTransform_,t));for(var u=!Zr.isEmpty(n),r=0,i=h.length,c=0,a,l,s,v,d,p,o,y,_,E=0,M=0,b=null,w=null,A=this.coordinateCache_,R=this.viewRotation_,T={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:R},C=this.instructions!=h||this.overlaps?0:200;r<i;){var m=h[r],L=m[0],D,O,N;switch(L){case Sr.BEGIN_GEOMETRY:D=m[1],u&&n[tt.getUid(D).toString()]||!D.getGeometry()?r=m[2]:S!==void 0&&!Tt.intersects(S,D.getGeometry().getExtent())?r=m[2]+1:++r;break;case Sr.BEGIN_PATH:E>C&&(this.fill_(e),E=0),M>C&&(e.stroke(),M=0),!E&&!M&&(e.beginPath(),v=d=NaN),++r;break;case Sr.CIRCLE:c=m[1];var V=f[c],X=f[c+1],k=f[c+2],Z=f[c+3],B=k-V,J=Z-X,ne=Math.sqrt(B*B+J*J);e.moveTo(V+ne,X),e.arc(V,X,ne,0,2*Math.PI,!0),++r;break;case Sr.CLOSE_PATH:e.closePath(),++r;break;case Sr.CUSTOM:c=m[1],a=m[2];var oe=m[3],Y=m[4],G=m.length==6?m[5]:void 0;T.geometry=oe,T.feature=D,r in A||(A[r]=[]);var K=A[r];G?G(f,c,a,2,K):(K[0]=f[c],K[1]=f[c+1],K.length=2),Y(K,T),++r;break;case Sr.DRAW_IMAGE:c=m[1],a=m[2],_=m[3],l=m[4],s=m[5],y=x?null:m[6];var ee=m[7],ie=m[8],re=m[9],se=m[10],ge=m[11],xe=m[12],Se=m[13],ce=m[14],pe=m[15],ye,U,W;for(m.length>16?(ye=m[16],U=m[17],W=m[18]):(ye=rr.defaultPadding,U=W=!1),ge&&(xe+=R);c<a;c+=2)this.replayImage_(e,f[c],f[c+1],_,l,s,y,ee,ie,re,se,xe,Se,ce,pe,ye,U?b:null,W?w:null);this.renderDeclutter_(y,D),++r;break;case Sr.DRAW_CHARS:var j=m[1],F=m[2],P=m[3];y=x?null:m[4];var q=m[5],z=m[6],te=m[7],ue=m[8],ve=m[9],_e=m[10],Re=m[11],Le=m[12],Ve=m[13],Xe=m[14],Ze=Ps.lineString(f,j,F,2),Te=ue(Le);if(q||Te<=Ze){var we=this.textStates[Ve].textAlign,be=(Ze-Te)*Cn.TEXT_ALIGN[we],ke=nu.lineString(f,j,F,2,Le,ue,be,te);if(ke){var He,Ke,st,vt,pt;if(_e)for(He=0,Ke=ke.length;He<Ke;++He)pt=ke[He],st=pt[4],vt=this.getImage(st,Ve,"",_e),l=pt[2]+Re,s=P*vt.height+(.5-P)*2*Re-ve,this.replayImage_(e,pt[0],pt[1],vt,l,s,y,vt.height,1,0,0,pt[3],Xe,!1,vt.width,rr.defaultPadding,null,null);if(z)for(He=0,Ke=ke.length;He<Ke;++He)pt=ke[He],st=pt[4],vt=this.getImage(st,Ve,z,""),l=pt[2],s=P*vt.height-ve,this.replayImage_(e,pt[0],pt[1],vt,l,s,y,vt.height,1,0,0,pt[3],Xe,!1,vt.width,rr.defaultPadding,null,null)}}this.renderDeclutter_(y,D),++r;break;case Sr.END_GEOMETRY:if(x!==void 0){D=m[1];var ft=x(D);if(ft)return ft}++r;break;case Sr.FILL:C?E++:this.fill_(e),++r;break;case Sr.MOVE_TO_LINE_TO:for(c=m[1],a=m[2],O=f[c],N=f[c+1],p=O+.5|0,o=N+.5|0,(p!==v||o!==d)&&(e.moveTo(O,N),v=p,d=o),c+=2;c<a;c+=2)O=f[c],N=f[c+1],p=O+.5|0,o=N+.5|0,(c==a-2||p!==v||o!==d)&&(e.lineTo(O,N),v=p,d=o);++r;break;case Sr.SET_FILL_STYLE:b=m,this.fillOrigin_=m[2],E&&(this.fill_(e),E=0,M&&(e.stroke(),M=0)),e.fillStyle=m[1],++r;break;case Sr.SET_STROKE_STYLE:w=m,M&&(e.stroke(),M=0),this.setStrokeStyle_(e,m),++r;break;case Sr.STROKE:C?M++:e.stroke(),++r;break;default:++r;break}}E&&this.fill_(e),M&&e.stroke()},sn.prototype.replay=function(e,t,n,h){this.viewRotation_=n,this.replay_(e,t,h,this.instructions,void 0,void 0)},sn.prototype.replayHitDetection=function(e,t,n,h,x,S){return this.viewRotation_=n,this.replay_(e,t,h,this.hitDetectionInstructions,x,S)},sn.prototype.reverseHitDetectionInstructions=function(){var e=this.hitDetectionInstructions;e.reverse();var t,n=e.length,h,x,S=-1;for(t=0;t<n;++t)h=e[t],x=h[0],x==Sr.END_GEOMETRY?S=t:x==Sr.BEGIN_GEOMETRY&&(h[2]=t,Vr.reverseSubArray(this.hitDetectionInstructions,S,t),S=-1)},sn.prototype.setFillStrokeStyle=function(e,t){var n=this.state;if(e){var h=e.getColor();n.fillStyle=fa.asColorLike(h||rr.defaultFillStyle)}else n.fillStyle=void 0;if(t){var x=t.getColor();n.strokeStyle=fa.asColorLike(x||rr.defaultStrokeStyle);var S=t.getLineCap();n.lineCap=S!==void 0?S:rr.defaultLineCap;var f=t.getLineDash();n.lineDash=f?f.slice():rr.defaultLineDash;var u=t.getLineDashOffset();n.lineDashOffset=u||rr.defaultLineDashOffset;var r=t.getLineJoin();n.lineJoin=r!==void 0?r:rr.defaultLineJoin;var i=t.getWidth();n.lineWidth=i!==void 0?i:rr.defaultLineWidth;var c=t.getMiterLimit();n.miterLimit=c!==void 0?c:rr.defaultMiterLimit,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},sn.prototype.applyFill=function(e,t){var n=e.fillStyle,h=[Sr.SET_FILL_STYLE,n];if(typeof n!="string"){var x=t.getExtent();h.push([x[0],x[3]])}this.instructions.push(h)},sn.prototype.applyStroke=function(e){this.instructions.push([Sr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio])},sn.prototype.updateFillStyle=function(e,t,n){var h=e.fillStyle;(typeof h!="string"||e.currentFillStyle!=h)&&(t.call(this,e,n),e.currentFillStyle=h)},sn.prototype.updateStrokeStyle=function(e,t){var n=e.strokeStyle,h=e.lineCap,x=e.lineDash,S=e.lineDashOffset,f=e.lineJoin,u=e.lineWidth,r=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=h||x!=e.currentLineDash&&!Vr.equals(e.currentLineDash,x)||e.currentLineDashOffset!=S||e.currentLineJoin!=f||e.currentLineWidth!=u||e.currentMiterLimit!=r)&&(t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=h,e.currentLineDash=x,e.currentLineDashOffset=S,e.currentLineJoin=f,e.currentLineWidth=u,e.currentMiterLimit=r)},sn.prototype.endGeometry=function(e,t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[Sr.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},sn.prototype.finish=tt.nullFunction,sn.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Tt.clone(this.maxExtent),this.maxLineWidth>0)){var e=this.resolution*(this.maxLineWidth+1)/2;Tt.buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_};var Do=function(e,t,n,h,x,S){sn.call(this,e,t,n,h,x,S),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.snapToPixel_=void 0,this.width_=void 0};tt.inherits(Do,sn),Do.prototype.drawCoordinates_=function(e,t,n,h){return this.appendFlatCoordinates(e,t,n,h,!1,!1)},Do.prototype.drawPoint=function(e,t){if(this.image_){this.beginGeometry(e,t);var n=e.getFlatCoordinates(),h=e.getStride(),x=this.coordinates.length,S=this.drawCoordinates_(n,0,n.length,h);this.instructions.push([Sr.DRAW_IMAGE,x,S,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([Sr.DRAW_IMAGE,x,S,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(e,t)}},Do.prototype.drawMultiPoint=function(e,t){if(this.image_){this.beginGeometry(e,t);var n=e.getFlatCoordinates(),h=e.getStride(),x=this.coordinates.length,S=this.drawCoordinates_(n,0,n.length,h);this.instructions.push([Sr.DRAW_IMAGE,x,S,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([Sr.DRAW_IMAGE,x,S,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(e,t)}},Do.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.snapToPixel_=void 0,this.width_=void 0},Do.prototype.setImageStyle=function(e,t){var n=e.getAnchor(),h=e.getSize(),x=e.getHitDetectionImage(1),S=e.getImage(1),f=e.getOrigin();this.anchorX_=n[0],this.anchorY_=n[1],this.declutterGroup_=t,this.hitDetectionImage_=x,this.image_=S,this.height_=h[1],this.opacity_=e.getOpacity(),this.originX_=f[0],this.originY_=f[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScale(),this.snapToPixel_=e.getSnapToPixel(),this.width_=h[0]};var Io=function(e,t,n,h,x,S){sn.call(this,e,t,n,h,x,S)};tt.inherits(Io,sn),Io.prototype.drawFlatCoordinates_=function(e,t,n,h){var x=this.coordinates.length,S=this.appendFlatCoordinates(e,t,n,h,!1,!1),f=[Sr.MOVE_TO_LINE_TO,x,S];return this.instructions.push(f),this.hitDetectionInstructions.push(f),n},Io.prototype.drawLineString=function(e,t){var n=this.state,h=n.strokeStyle,x=n.lineWidth;if(!(h===void 0||x===void 0)){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Sr.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],[Sr.BEGIN_PATH]);var S=e.getFlatCoordinates(),f=e.getStride();this.drawFlatCoordinates_(S,0,S.length,f),this.hitDetectionInstructions.push([Sr.STROKE]),this.endGeometry(e,t)}},Io.prototype.drawMultiLineString=function(e,t){var n=this.state,h=n.strokeStyle,x=n.lineWidth;if(!(h===void 0||x===void 0)){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Sr.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],[Sr.BEGIN_PATH]);var S=e.getEnds(),f=e.getFlatCoordinates(),u=e.getStride(),r=0,i,c;for(i=0,c=S.length;i<c;++i)r=this.drawFlatCoordinates_(f,r,S[i],u);this.hitDetectionInstructions.push([Sr.STROKE]),this.endGeometry(e,t)}},Io.prototype.finish=function(){var e=this.state;e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push([Sr.STROKE]),this.reverseHitDetectionInstructions(),this.state=null},Io.prototype.applyStroke=function(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push([Sr.STROKE]),e.lastStroke=this.coordinates.length),e.lastStroke=0,sn.prototype.applyStroke.call(this,e),this.instructions.push([Sr.BEGIN_PATH])};var ao=function(e,t,n,h,x,S){sn.call(this,e,t,n,h,x,S)};tt.inherits(ao,sn),ao.prototype.drawFlatCoordinatess_=function(e,t,n,h){var x=this.state,S=x.fillStyle!==void 0,f=x.strokeStyle!=null,u=n.length,r=[Sr.BEGIN_PATH];this.instructions.push(r),this.hitDetectionInstructions.push(r);for(var i=0;i<u;++i){var c=n[i],a=this.coordinates.length,l=this.appendFlatCoordinates(e,t,c,h,!0,!f),s=[Sr.MOVE_TO_LINE_TO,a,l];if(this.instructions.push(s),this.hitDetectionInstructions.push(s),f){var v=[Sr.CLOSE_PATH];this.instructions.push(v),this.hitDetectionInstructions.push(v)}t=c}var d=[Sr.FILL];if(this.hitDetectionInstructions.push(d),S&&this.instructions.push(d),f){var p=[Sr.STROKE];this.instructions.push(p),this.hitDetectionInstructions.push(p)}return t},ao.prototype.drawCircle=function(e,t){var n=this.state,h=n.fillStyle,x=n.strokeStyle;if(!(h===void 0&&x===void 0)){this.setFillStrokeStyles_(e),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Sr.SET_FILL_STYLE,Ln.asString(rr.defaultFillStyle)]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Sr.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var S=e.getFlatCoordinates(),f=e.getStride(),u=this.coordinates.length;this.appendFlatCoordinates(S,0,S.length,f,!1,!1);var r=[Sr.BEGIN_PATH],i=[Sr.CIRCLE,u];this.instructions.push(r,i),this.hitDetectionInstructions.push(r,i);var c=[Sr.FILL];if(this.hitDetectionInstructions.push(c),n.fillStyle!==void 0&&this.instructions.push(c),n.strokeStyle!==void 0){var a=[Sr.STROKE];this.instructions.push(a),this.hitDetectionInstructions.push(a)}this.endGeometry(e,t)}},ao.prototype.drawPolygon=function(e,t){var n=this.state;this.setFillStrokeStyles_(e),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Sr.SET_FILL_STYLE,Ln.asString(rr.defaultFillStyle)]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Sr.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var h=e.getEnds(),x=e.getOrientedFlatCoordinates(),S=e.getStride();this.drawFlatCoordinatess_(x,0,h,S),this.endGeometry(e,t)},ao.prototype.drawMultiPolygon=function(e,t){var n=this.state,h=n.fillStyle,x=n.strokeStyle;if(!(h===void 0&&x===void 0)){this.setFillStrokeStyles_(e),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Sr.SET_FILL_STYLE,Ln.asString(rr.defaultFillStyle)]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Sr.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var S=e.getEndss(),f=e.getOrientedFlatCoordinates(),u=e.getStride(),r=0,i,c;for(i=0,c=S.length;i<c;++i)r=this.drawFlatCoordinatess_(f,r,S[i],u);this.endGeometry(e,t)}},ao.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(e!==0){var t=this.coordinates,n,h;for(n=0,h=t.length;n<h;++n)t[n]=Nn.snap(t[n],e)}},ao.prototype.setFillStrokeStyles_=function(e){var t=this.state,n=t.fillStyle;n!==void 0&&this.updateFillStyle(t,this.applyFill,e),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)};var iu={};iu.lineString=function(e,t,n,h,x){var S=n,f=n,u=0,r=0,i=n,c,a,l,s,v,d,p,o,y,_;for(a=n;a<h;a+=x){var E=t[a],M=t[a+1];v!==void 0&&(y=E-v,_=M-d,s=Math.sqrt(y*y+_*_),p!==void 0&&(r+=l,c=Math.acos((p*y+o*_)/(l*s)),c>e&&(r>u&&(u=r,S=i,f=a),r=0,i=a-x)),l=s,p=y,o=_),v=E,d=M}return r+=s,r>u?[i,a]:[S,f]};var rc={POINT:"point",LINE:"line"},oo=function(e,t,n,h,x,S){sn.call(this,e,t,n,h,x,S),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={};var f=rr.labelCache;f.prune()};tt.inherits(oo,sn),oo.measureTextWidths=function(e,t,n){var h=t.length,x=0,S,f;for(f=0;f<h;++f)S=rr.measureTextWidth(e,t[f]),x=Math.max(x,S),n.push(S);return x},oo.prototype.drawText=function(e,t){var n=this.textFillState_,h=this.textStrokeState_,x=this.textState_;if(!(this.text_===""||!x||!n&&!h)){var S=this.coordinates.length,f=e.getType(),u=null,r=2,i=2,c,a;if(x.placement===rc.LINE){if(!Tt.intersects(this.getBufferedMaxExtent(),e.getExtent()))return;var l;if(u=e.getFlatCoordinates(),i=e.getStride(),f==Er.LINE_STRING)l=[u.length];else if(f==Er.MULTI_LINE_STRING)l=e.getEnds();else if(f==Er.POLYGON)l=e.getEnds().slice(0,1);else if(f==Er.MULTI_POLYGON){var s=e.getEndss();for(l=[],c=0,a=s.length;c<a;++c)l.push(s[c][0])}this.beginGeometry(e,t);for(var v=x.textAlign,d=0,p,o=0,y=l.length;o<y;++o){if(v==null){var _=iu.lineString(x.maxAngle,u,d,l[o],i);d=_[0],p=_[1]}else p=l[o];for(c=d;c<p;c+=i)this.coordinates.push(u[c],u[c+1]);r=this.coordinates.length,d=l[o],this.drawChars_(S,r,this.declutterGroup_),S=r}this.endGeometry(e,t)}else{var E=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),M=E.width/this.pixelRatio;switch(f){case Er.POINT:case Er.MULTI_POINT:u=e.getFlatCoordinates(),r=u.length;break;case Er.LINE_STRING:u=e.getFlatMidpoint();break;case Er.CIRCLE:u=e.getCenter();break;case Er.MULTI_LINE_STRING:u=e.getFlatMidpoints(),r=u.length;break;case Er.POLYGON:if(u=e.getFlatInteriorPoint(),!x.overflow&&u[2]/this.resolution<M)return;i=3;break;case Er.MULTI_POLYGON:var b=e.getFlatInteriorPoints();for(u=[],c=0,a=b.length;c<a;c+=3)(x.overflow||b[c+2]/this.resolution>=M)&&u.push(b[c],b[c+1]);if(r=u.length,r==0)return;break}r=this.appendFlatCoordinates(u,0,r,i,!1,!1),this.beginGeometry(e,t),(x.backgroundFill||x.backgroundStroke)&&(this.setFillStrokeStyle(x.backgroundFill,x.backgroundStroke),this.updateFillStyle(this.state,this.applyFill,e),this.updateStrokeStyle(this.state,this.applyStroke)),this.drawTextImage_(E,S,r),this.endGeometry(e,t)}}},oo.prototype.getImage=function(e,t,n,h){var x,S=h+t+e+n+this.pixelRatio,f=rr.labelCache;if(!f.containsKey(S)){var u=h?this.strokeStates[h]||this.textStrokeState_:null,r=n?this.fillStates[n]||this.textFillState_:null,i=this.textStates[t]||this.textState_,c=this.pixelRatio,a=i.scale*c,l=Cn.TEXT_ALIGN[i.textAlign||rr.defaultTextAlign],s=h&&u.lineWidth?u.lineWidth:0,v=e.split(`
`),d=v.length,p=[],o=oo.measureTextWidths(i.font,v,p),y=rr.measureTextHeight(i.font),_=y*d,E=o+s,M=gn.createCanvasContext2D(Math.ceil(E*a),Math.ceil((_+s)*a));x=M.canvas,f.set(S,x),a!=1&&M.scale(a,a),M.font=i.font,h&&(M.strokeStyle=u.strokeStyle,M.lineWidth=s*(tn.SAFARI?a:1),M.lineCap=u.lineCap,M.lineJoin=u.lineJoin,M.miterLimit=u.miterLimit,tn.CANVAS_LINE_DASH&&u.lineDash.length&&(M.setLineDash(u.lineDash),M.lineDashOffset=u.lineDashOffset)),n&&(M.fillStyle=r.fillStyle),M.textBaseline="middle",M.textAlign="center";var b=.5-l,w=l*x.width/a+b*s,A;if(h)for(A=0;A<d;++A)M.strokeText(v[A],w+b*p[A],.5*(s+y)+A*y);if(n)for(A=0;A<d;++A)M.fillText(v[A],w+b*p[A],.5*(s+y)+A*y)}return f.get(S)},oo.prototype.drawTextImage_=function(e,t,n){var h=this.textState_,x=this.textStrokeState_,S=this.pixelRatio,f=Cn.TEXT_ALIGN[h.textAlign||rr.defaultTextAlign],u=Cn.TEXT_ALIGN[h.textBaseline],r=x&&x.lineWidth?x.lineWidth:0,i=f*e.width/S+2*(.5-f)*r,c=u*e.height/S+2*(.5-u)*r;this.instructions.push([Sr.DRAW_IMAGE,t,n,e,(i-this.textOffsetX_)*S,(c-this.textOffsetY_)*S,this.declutterGroup_,e.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,!0,e.width,h.padding==rr.defaultPadding?rr.defaultPadding:h.padding.map(function(a){return a*S}),!!h.backgroundFill,!!h.backgroundStroke]),this.hitDetectionInstructions.push([Sr.DRAW_IMAGE,t,n,e,(i-this.textOffsetX_)*S,(c-this.textOffsetY_)*S,this.declutterGroup_,e.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/S,!0,e.width,h.padding,!!h.backgroundFill,!!h.backgroundStroke])},oo.prototype.drawChars_=function(e,t,n){var h=this.textStrokeState_,x=this.textState_,S=this.textFillState_,f=this.strokeKey_;h&&(f in this.strokeStates||(this.strokeStates[f]={strokeStyle:h.strokeStyle,lineCap:h.lineCap,lineDashOffset:h.lineDashOffset,lineWidth:h.lineWidth,lineJoin:h.lineJoin,miterLimit:h.miterLimit,lineDash:h.lineDash}));var u=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:x.font,textAlign:x.textAlign||rr.defaultTextAlign,scale:x.scale});var r=this.fillKey_;S&&(r in this.fillStates||(this.fillStates[r]={fillStyle:S.fillStyle}));var i=this.pixelRatio,c=Cn.TEXT_ALIGN[x.textBaseline],a=this.textOffsetY_*i,l=this.text_,s=x.font,v=x.scale,d=h?h.lineWidth*v/2:0,p=this.widths_[s];p||(this.widths_[s]=p={}),this.instructions.push([Sr.DRAW_CHARS,e,t,c,n,x.overflow,r,x.maxAngle,function(o){var y=p[o];return y||(y=p[o]=rr.measureTextWidth(s,o)),y*v*i},a,f,d*i,l,u,1]),this.hitDetectionInstructions.push([Sr.DRAW_CHARS,e,t,c,n,x.overflow,r,x.maxAngle,function(o){var y=p[o];return y||(y=p[o]=rr.measureTextWidth(s,o)),y*v},a,f,d,l,u,1/i])},oo.prototype.setTextStyle=function(e,t){var n,h,x;if(!e)this.text_="";else{this.declutterGroup_=t;var S=e.getFill();S?(h=this.textFillState_,h||(h=this.textFillState_={}),h.fillStyle=fa.asColorLike(S.getColor()||rr.defaultFillStyle)):h=this.textFillState_=null;var f=e.getStroke();if(!f)x=this.textStrokeState_=null;else{x=this.textStrokeState_,x||(x=this.textStrokeState_={});var u=f.getLineDash(),r=f.getLineDashOffset(),i=f.getWidth(),c=f.getMiterLimit();x.lineCap=f.getLineCap()||rr.defaultLineCap,x.lineDash=u?u.slice():rr.defaultLineDash,x.lineDashOffset=r===void 0?rr.defaultLineDashOffset:r,x.lineJoin=f.getLineJoin()||rr.defaultLineJoin,x.lineWidth=i===void 0?rr.defaultLineWidth:i,x.miterLimit=c===void 0?rr.defaultMiterLimit:c,x.strokeStyle=fa.asColorLike(f.getColor()||rr.defaultStrokeStyle)}n=this.textState_;var a=e.getFont()||rr.defaultFont;rr.checkFont(a);var l=e.getScale();n.overflow=e.getOverflow(),n.font=a,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.textBaseline=e.getTextBaseline()||rr.defaultTextBaseline,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||rr.defaultPadding,n.scale=l===void 0?1:l;var s=e.getOffsetX(),v=e.getOffsetY(),d=e.getRotateWithView(),p=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=s===void 0?0:s,this.textOffsetY_=v===void 0?0:v,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=p===void 0?0:p,this.strokeKey_=x?(typeof x.strokeStyle=="string"?x.strokeStyle:tt.getUid(x.strokeStyle))+x.lineCap+x.lineDashOffset+"|"+x.lineWidth+x.lineJoin+x.miterLimit+"["+x.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?"),this.fillKey_=h?typeof h.fillStyle=="string"?h.fillStyle:"|"+tt.getUid(h.fillStyle):""}};var vn=function(e,t,n,h,x,S,f){qo.call(this),this.declutterTree_=S,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=t,this.overlaps_=x,this.pixelRatio_=h,this.resolution_=n,this.renderBuffer_=f,this.replaysByZIndex_={},this.hitDetectionContext_=gn.createCanvasContext2D(1,1),this.hitDetectionTransform_=Qt.create()};tt.inherits(vn,qo),vn.circleArrayCache_={0:[[!0]]},vn.fillCircleArrayRowToMiddle_=function(e,t,n){var h,x=Math.floor(e.length/2);if(t>=x)for(h=x;h<t;h++)e[h][n]=!0;else if(t<x)for(h=t+1;h<x;h++)e[h][n]=!0},vn.getCircleArray_=function(e){if(vn.circleArrayCache_[e]!==void 0)return vn.circleArrayCache_[e];for(var t=e*2+1,n=new Array(t),h=0;h<t;h++)n[h]=new Array(t);for(var x=e,S=0,f=0;x>=S;)vn.fillCircleArrayRowToMiddle_(n,e+x,e+S),vn.fillCircleArrayRowToMiddle_(n,e+S,e+x),vn.fillCircleArrayRowToMiddle_(n,e-S,e+x),vn.fillCircleArrayRowToMiddle_(n,e-x,e+S),vn.fillCircleArrayRowToMiddle_(n,e-x,e-S),vn.fillCircleArrayRowToMiddle_(n,e-S,e-x),vn.fillCircleArrayRowToMiddle_(n,e+S,e-x),vn.fillCircleArrayRowToMiddle_(n,e+x,e-S),S++,f+=1+2*S,2*(f-x)+1>0&&(x-=1,f+=1-2*x);return vn.circleArrayCache_[e]=n,n},vn.replayDeclutter=function(e,t,n){for(var h=Object.keys(e).map(Number).sort(Vr.numberSafeCompareFunction),x={},S=0,f=h.length;S<f;++S)for(var u=e[h[S].toString()],r=0,i=u.length;r<i;){var c=u[r++],a=u[r++];c.replay(t,a,n,x)}},vn.prototype.addDeclutter=function(e){var t=null;return this.declutterTree_&&(e?(t=this.declutterGroup_,t[4]++):(t=this.declutterGroup_=Tt.createEmpty(),t.push(1))),t},vn.prototype.clip=function(e,t){var n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()},vn.prototype.hasReplays=function(e){for(var t in this.replaysByZIndex_)for(var n=this.replaysByZIndex_[t],h=0,x=e.length;h<x;++h)if(e[h]in n)return!0;return!1},vn.prototype.finish=function(){var e;for(e in this.replaysByZIndex_){var t=this.replaysByZIndex_[e],n;for(n in t)t[n].finish()}},vn.prototype.forEachFeatureAtCoordinate=function(e,t,n,h,x,S,f){h=Math.round(h);var u=h*2+1,r=Qt.compose(this.hitDetectionTransform_,h+.5,h+.5,1/t,-1/t,-n,-e[0],-e[1]),i=this.hitDetectionContext_;i.canvas.width!==u||i.canvas.height!==u?(i.canvas.width=u,i.canvas.height=u):i.clearRect(0,0,u,u);var c;this.renderBuffer_!==void 0&&(c=Tt.createEmpty(),Tt.extendCoordinate(c,e),Tt.buffer(c,t*(this.renderBuffer_+h),c));var a=vn.getCircleArray_(h),l;this.declutterTree_&&(l=this.declutterTree_.all().map(function(w){return w.value}));var s;function v(w){for(var A=i.getImageData(0,0,u,u).data,R=0;R<u;R++)for(var T=0;T<u;T++)if(a[R][T]&&A[(T*u+R)*4+3]>0){var C;if((!(l&&(s==Hr.IMAGE||s==Hr.TEXT))||l.indexOf(w)!==-1)&&(C=S(w)),C)return C;i.clearRect(0,0,u,u);return}}var d=Object.keys(this.replaysByZIndex_).map(Number);d.sort(Vr.numberSafeCompareFunction);var p,o,y,_,E;for(p=d.length-1;p>=0;--p){var M=d[p].toString();for(y=this.replaysByZIndex_[M],o=Cn.ORDER.length-1;o>=0;--o)if(s=Cn.ORDER[o],_=y[s],_!==void 0){if(f&&(s==Hr.IMAGE||s==Hr.TEXT)){var b=f[M];b?b.push(_,r.slice(0)):f[M]=[_,r.slice(0)]}else if(E=_.replayHitDetection(i,r,n,x,v,c),E)return E}}},vn.prototype.getClipCoords=function(e){var t=this.maxExtent_,n=t[0],h=t[1],x=t[2],S=t[3],f=[n,h,n,S,x,S,x,h];return qn.transform2D(f,0,8,2,e,f),f},vn.prototype.getReplay=function(e,t){var n=e!==void 0?e.toString():"0",h=this.replaysByZIndex_[n];h===void 0&&(h={},this.replaysByZIndex_[n]=h);var x=h[t];if(x===void 0){var S=vn.BATCH_CONSTRUCTORS_[t];x=new S(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),h[t]=x}return x},vn.prototype.getReplays=function(){return this.replaysByZIndex_},vn.prototype.isEmpty=function(){return Zr.isEmpty(this.replaysByZIndex_)},vn.prototype.replay=function(e,t,n,h,x,S){var f=Object.keys(this.replaysByZIndex_).map(Number);f.sort(Vr.numberSafeCompareFunction),e.save(),this.clip(e,t);var u=x||Cn.ORDER,r,i,c,a,l,s;for(r=0,i=f.length;r<i;++r){var v=f[r].toString();for(l=this.replaysByZIndex_[v],c=0,a=u.length;c<a;++c){var d=u[c];if(s=l[d],s!==void 0)if(S&&(d==Hr.IMAGE||d==Hr.TEXT)){var p=S[v];p?p.push(s,t.slice(0)):S[v]=[s,t.slice(0)]}else s.replay(e,t,n,h)}}e.restore()},vn.BATCH_CONSTRUCTORS_={Circle:ao,Default:sn,Image:Do,LineString:Io,Polygon:ao,Text:oo};var Yr={};Yr.defaultOrder=function(e,t){return tt.getUid(e)-tt.getUid(t)},Yr.getSquaredTolerance=function(e,t){var n=Yr.getTolerance(e,t);return n*n},Yr.getTolerance=function(e,t){return tt.SIMPLIFY_TOLERANCE*e/t},Yr.renderCircleGeometry_=function(e,t,n,h){var x=n.getFill(),S=n.getStroke();if(x||S){var f=e.getReplay(n.getZIndex(),Hr.CIRCLE);f.setFillStrokeStyle(x,S),f.drawCircle(t,h)}var u=n.getText();if(u){var r=e.getReplay(n.getZIndex(),Hr.TEXT);r.setTextStyle(u,e.addDeclutter(!1)),r.drawText(t,h)}},Yr.renderFeature=function(e,t,n,h,x,S){var f=!1,u,r;return u=n.getImage(),u&&(r=u.getImageState(),r==Hi.LOADED||r==Hi.ERROR?u.unlistenImageChange(x,S):(r==Hi.IDLE&&u.load(),r=u.getImageState(),u.listenImageChange(x,S),f=!0)),Yr.renderFeature_(e,t,n,h),f},Yr.renderFeature_=function(e,t,n,h){var x=n.getGeometryFunction()(t);if(x){var S=x.getSimplifiedGeometry(h),f=n.getRenderer();if(f)Yr.renderGeometry_(e,S,n,t);else{var u=Yr.GEOMETRY_RENDERERS_[S.getType()];u(e,S,n,t)}}},Yr.renderGeometry_=function(e,t,n,h){if(t.getType()==Er.GEOMETRY_COLLECTION){for(var x=t.getGeometries(),S=0,f=x.length;S<f;++S)Yr.renderGeometry_(e,x[S],n,h);return}var u=e.getReplay(n.getZIndex(),Hr.DEFAULT);u.drawCustom(t,h,n.getRenderer())},Yr.renderGeometryCollectionGeometry_=function(e,t,n,h){var x=t.getGeometriesArray(),S,f;for(S=0,f=x.length;S<f;++S){var u=Yr.GEOMETRY_RENDERERS_[x[S].getType()];u(e,x[S],n,h)}},Yr.renderLineStringGeometry_=function(e,t,n,h){var x=n.getStroke();if(x){var S=e.getReplay(n.getZIndex(),Hr.LINE_STRING);S.setFillStrokeStyle(null,x),S.drawLineString(t,h)}var f=n.getText();if(f){var u=e.getReplay(n.getZIndex(),Hr.TEXT);u.setTextStyle(f,e.addDeclutter(!1)),u.drawText(t,h)}},Yr.renderMultiLineStringGeometry_=function(e,t,n,h){var x=n.getStroke();if(x){var S=e.getReplay(n.getZIndex(),Hr.LINE_STRING);S.setFillStrokeStyle(null,x),S.drawMultiLineString(t,h)}var f=n.getText();if(f){var u=e.getReplay(n.getZIndex(),Hr.TEXT);u.setTextStyle(f,e.addDeclutter(!1)),u.drawText(t,h)}},Yr.renderMultiPolygonGeometry_=function(e,t,n,h){var x=n.getFill(),S=n.getStroke();if(S||x){var f=e.getReplay(n.getZIndex(),Hr.POLYGON);f.setFillStrokeStyle(x,S),f.drawMultiPolygon(t,h)}var u=n.getText();if(u){var r=e.getReplay(n.getZIndex(),Hr.TEXT);r.setTextStyle(u,e.addDeclutter(!1)),r.drawText(t,h)}},Yr.renderPointGeometry_=function(e,t,n,h){var x=n.getImage();if(x){if(x.getImageState()!=Hi.LOADED)return;var S=e.getReplay(n.getZIndex(),Hr.IMAGE);S.setImageStyle(x,e.addDeclutter(!1)),S.drawPoint(t,h)}var f=n.getText();if(f){var u=e.getReplay(n.getZIndex(),Hr.TEXT);u.setTextStyle(f,e.addDeclutter(!!x)),u.drawText(t,h)}},Yr.renderMultiPointGeometry_=function(e,t,n,h){var x=n.getImage();if(x){if(x.getImageState()!=Hi.LOADED)return;var S=e.getReplay(n.getZIndex(),Hr.IMAGE);S.setImageStyle(x,e.addDeclutter(!1)),S.drawMultiPoint(t,h)}var f=n.getText();if(f){var u=e.getReplay(n.getZIndex(),Hr.TEXT);u.setTextStyle(f,e.addDeclutter(!!x)),u.drawText(t,h)}},Yr.renderPolygonGeometry_=function(e,t,n,h){var x=n.getFill(),S=n.getStroke();if(x||S){var f=e.getReplay(n.getZIndex(),Hr.POLYGON);f.setFillStrokeStyle(x,S),f.drawPolygon(t,h)}var u=n.getText();if(u){var r=e.getReplay(n.getZIndex(),Hr.TEXT);r.setTextStyle(u,e.addDeclutter(!1)),r.drawText(t,h)}},Yr.GEOMETRY_RENDERERS_={Point:Yr.renderPointGeometry_,LineString:Yr.renderLineStringGeometry_,Polygon:Yr.renderPolygonGeometry_,MultiPoint:Yr.renderMultiPointGeometry_,MultiLineString:Yr.renderMultiLineStringGeometry_,MultiPolygon:Yr.renderMultiPolygonGeometry_,GeometryCollection:Yr.renderGeometryCollectionGeometry_,Circle:Yr.renderCircleGeometry_};var ya=function(e){Wi.call(this,e),this.declutterTree_=e.getDeclutter()?hl(9):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Tt.createEmpty(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=gn.createCanvasContext2D(),Jt.listen(rr.labelCache,kr.CLEAR,this.handleFontsChanged_,this)};tt.inherits(ya,Wi),ya.handles=function(e,t){return e===ra.CANVAS&&t.getType()===Oa.VECTOR},ya.create=function(e,t){return new ya(t)},ya.prototype.disposeInternal=function(){Jt.unlisten(rr.labelCache,kr.CLEAR,this.handleFontsChanged_,this),Wi.prototype.disposeInternal.call(this)},ya.prototype.composeFrame=function(e,t,n){var h=e.extent,x=e.pixelRatio,S=t.managed?e.skippedFeatureUids:{},f=e.viewState,u=f.projection,r=f.rotation,i=u.getExtent(),c=this.getLayer().getSource(),a=this.getTransform(e,0);this.preCompose(n,e,a);var l=t.extent,s=l!==void 0;s&&this.clip(n,e,l);var v=this.replayGroup_;if(v&&!v.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var d=this.getLayer(),p=0,o=0,y,_=t.opacity!==1,E=d.hasListener(wa.RENDER);if(_||E){var M=n.canvas.width,b=n.canvas.height;if(r){var w=Math.round(Math.sqrt(M*M+b*b));p=(w-M)/2,o=(w-b)/2,M=b=w}this.context.canvas.width=M,this.context.canvas.height=b,y=this.context}else y=n;var A=y.globalAlpha;_||(y.globalAlpha=t.opacity),y!=n&&y.translate(p,o);var R=e.size[0]*x,T=e.size[1]*x;if(rr.rotateAtOffset(y,-r,R/2,T/2),v.replay(y,a,r,S),c.getWrapX()&&u.canWrapX()&&!Tt.containsExtent(i,h)){for(var C=h[0],m=Tt.getWidth(i),L=0,D;C<i[0];)--L,D=m*L,a=this.getTransform(e,D),v.replay(y,a,r,S),C+=m;for(L=0,C=h[2];C>i[2];)++L,D=m*L,a=this.getTransform(e,D),v.replay(y,a,r,S),C-=m;a=this.getTransform(e,0)}if(rr.rotateAtOffset(y,r,R/2,T/2),y!=n){if(E&&this.dispatchRenderEvent(y,e,a),_){var O=n.globalAlpha;n.globalAlpha=t.opacity,n.drawImage(y.canvas,-p,-o),n.globalAlpha=O}else n.drawImage(y.canvas,-p,-o);y.translate(-p,-o)}_||(y.globalAlpha=A)}s&&n.restore(),this.postCompose(n,e,t,a)},ya.prototype.forEachFeatureAtCoordinate=function(e,t,n,h,x){if(this.replayGroup_){var S=t.viewState.resolution,f=t.viewState.rotation,u=this.getLayer(),r={},i=this.replayGroup_.forEachFeatureAtCoordinate(e,S,f,n,{},function(c){var a=tt.getUid(c).toString();if(!(a in r))return r[a]=!0,h.call(x,c,u)},null);return i}else return},ya.prototype.handleFontsChanged_=function(e){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},ya.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},ya.prototype.prepareFrame=function(e,t){var n=this.getLayer(),h=n.getSource();this.updateLogos(e,h);var x=e.viewHints[Tn.ANIMATING],S=e.viewHints[Tn.INTERACTING],f=n.getUpdateWhileAnimating(),u=n.getUpdateWhileInteracting();if(!this.dirty_&&!f&&x||!u&&S)return!0;var r=e.extent,i=e.viewState,c=i.projection,a=i.resolution,l=e.pixelRatio,s=n.getRevision(),v=n.getRenderBuffer(),d=n.getRenderOrder();d===void 0&&(d=Yr.defaultOrder);var p=Tt.buffer(r,v*a),o=i.projection.getExtent();if(h.getWrapX()&&i.projection.canWrapX()&&!Tt.containsExtent(o,e.extent)){var y=Tt.getWidth(o),_=Math.max(Tt.getWidth(p)/2,y);p[0]=o[0]-_,p[2]=o[2]+_}if(!this.dirty_&&this.renderedResolution_==a&&this.renderedRevision_==s&&this.renderedRenderOrder_==d&&Tt.containsExtent(this.renderedExtent_,p))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var E=new vn(Yr.getTolerance(a,l),p,a,l,h.getOverlaps(),this.declutterTree_,n.getRenderBuffer());h.loadFeatures(p,a,c);var M=(function(R){var T,C=R.getStyleFunction();if(C?T=C.call(R,a):(C=n.getStyleFunction(),C&&(T=C(R,a))),T){var m=this.renderFeature(R,a,l,T,E);this.dirty_=this.dirty_||m}}).bind(this);if(d){var b=[];h.forEachFeatureInExtent(p,function(R){b.push(R)},this),b.sort(d);for(var w=0,A=b.length;w<A;++w)M(b[w])}else h.forEachFeatureInExtent(p,M,this);return E.finish(),this.renderedResolution_=a,this.renderedRevision_=s,this.renderedRenderOrder_=d,this.renderedExtent_=p,this.replayGroup_=E,this.replayGroupChanged=!0,!0},ya.prototype.renderFeature=function(e,t,n,h,x){if(!h)return!1;var S=!1;if(Array.isArray(h))for(var f=0,u=h.length;f<u;++f)S=Yr.renderFeature(x,e,h[f],Yr.getSquaredTolerance(t,n),this.handleStyleImageChange_,this)||S;else S=Yr.renderFeature(x,e,h,Yr.getSquaredTolerance(t,n),this.handleStyleImageChange_,this);return S};var ks={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},vi=function(e){this.context=null,Ni.call(this,e),this.declutterTree_=e.getDeclutter()?hl(9):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=Qt.create(),this.zDirection=e.getRenderMode()==ks.VECTOR?1:0,Jt.listen(rr.labelCache,kr.CLEAR,this.handleFontsChanged_,this)};tt.inherits(vi,Ni),vi.handles=function(e,t){return e===ra.CANVAS&&t.getType()===Oa.VECTOR_TILE},vi.create=function(e,t){return new vi(t)},vi.IMAGE_REPLAYS={image:[Hr.POLYGON,Hr.CIRCLE,Hr.LINE_STRING,Hr.IMAGE,Hr.TEXT],hybrid:[Hr.POLYGON,Hr.LINE_STRING]},vi.VECTOR_REPLAYS={image:[Hr.DEFAULT],hybrid:[Hr.IMAGE,Hr.TEXT,Hr.DEFAULT],vector:Cn.ORDER},vi.prototype.disposeInternal=function(){Jt.unlisten(rr.labelCache,kr.CLEAR,this.handleFontsChanged_,this),Ni.prototype.disposeInternal.call(this)},vi.prototype.prepareFrame=function(e,t){var n=this.getLayer(),h=n.getRevision();if(this.renderedLayerRevision_!=h){this.renderedTiles.length=0;var x=n.getRenderMode();!this.context&&x!=ks.VECTOR&&(this.context=gn.createCanvasContext2D()),this.context&&x==ks.VECTOR&&(this.context=null)}return this.renderedLayerRevision_=h,Ni.prototype.prepareFrame.apply(this,arguments)},vi.prototype.createReplayGroup_=function(e,t){var n=this.getLayer(),h=t.pixelRatio,x=t.viewState.projection,S=n.getRevision(),f=n.getRenderOrder()||null,u=e.getReplayState(n);if(!(!u.dirty&&u.renderedRevision==S&&u.renderedRenderOrder==f)){for(var r=n.getSource(),i=r.getTileGrid(),c=r.getTileGridForProjection(x),a=c.getResolution(e.tileCoord[0]),l=c.getTileCoordExtent(e.wrappedTileCoord),s=0,v=e.tileKeys.length;s<v;++s){var d=e.getTile(e.tileKeys[s]);if(d.getState()!=Tr.ERROR){var p=d.tileCoord,o=i.getTileCoordExtent(p),y=Tt.getIntersection(l,o),_=Tt.equals(o,y)?null:Tt.buffer(y,n.getRenderBuffer()*a),E=d.getProjection(),M=!1;dr.equivalent(x,E)||(M=!0,d.setProjection(x)),u.dirty=!1;var b=new vn(0,y,a,h,r.getOverlaps(),this.declutterTree_,n.getRenderBuffer()),w=Yr.getSquaredTolerance(a,h),A=function(D){var O,N=D.getStyleFunction();if(N?O=N.call(D,a):(N=n.getStyleFunction(),N&&(O=N(D,a))),O){var V=this.renderFeature(D,w,O,b);this.dirty_=this.dirty_||V,u.dirty=u.dirty||V}},R=d.getFeatures();f&&f!==u.renderedRenderOrder&&R.sort(f);for(var T,C=0,m=R.length;C<m;++C)T=R[C],M&&(E.getUnits()==fi.TILE_PIXELS&&(E.setWorldExtent(o),E.setExtent(d.getExtent())),T.getGeometry().transform(E,x)),(!_||Tt.intersects(_,T.getGeometry().getExtent()))&&A.call(this,T);b.finish();for(var L in b.getReplays());d.setReplayGroup(n,e.tileCoord.toString(),b)}}u.renderedRevision=S,u.renderedRenderOrder=f}},vi.prototype.drawTileImage=function(e,t,n,h,x,S,f,u,r){var i=e;this.createReplayGroup_(i,t),this.context&&(this.renderTileImage_(i,t,n),Ni.prototype.drawTileImage.apply(this,arguments))},vi.prototype.forEachFeatureAtCoordinate=function(e,t,n,h,x){var S=t.viewState.resolution,f=t.viewState.rotation;n=n??0;var u=this.getLayer(),r={},i=this.renderedTiles,c=u.getSource(),a=c.getTileGridForProjection(t.viewState.projection),l,s,v,d,p,o,y,_;for(v=0,d=i.length;v<d;++v)if(o=i[v],y=o.wrappedTileCoord,_=a.getTileCoordExtent(y,this.tmpExtent),l=Tt.buffer(_,n*S,l),!!Tt.containsCoordinate(l,e))for(var E=0,M=o.tileKeys.length;E<M;++E){var b=o.getTile(o.tileKeys[E]);b.getState()!=Tr.ERROR&&(p=b.getReplayGroup(u,o.tileCoord.toString()),s=s||p.forEachFeatureAtCoordinate(e,S,f,n,{},function(w){var A=tt.getUid(w).toString();if(!(A in r))return r[A]=!0,h.call(x,w,u)},null))}return s},vi.prototype.getReplayTransform_=function(e,t){var n=this.getLayer(),h=n.getSource(),x=h.getTileGrid(),S=e.tileCoord,f=x.getResolution(S[0]),u=t.viewState,r=t.pixelRatio,i=u.resolution/r,c=x.getTileCoordExtent(S,this.tmpExtent),a=u.center,l=Tt.getTopLeft(c),s=t.size,v=Math.round(r*s[0]/2),d=Math.round(r*s[1]/2);return Qt.compose(this.tmpTransform_,v,d,f/i,f/i,u.rotation,(l[0]-a[0])/f,(a[1]-l[1])/f)},vi.prototype.handleFontsChanged_=function(e){var t=this.getLayer();t.getVisible()&&this.renderedLayerRevision_!==void 0&&t.changed()},vi.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},vi.prototype.postCompose=function(e,t,n){var h=this.getLayer(),x=h.getDeclutter()?{}:null,S=h.getSource(),f=h.getRenderMode(),u=vi.VECTOR_REPLAYS[f],r=t.pixelRatio,i=t.viewState.rotation,c=t.size,a,l;i&&(a=Math.round(r*c[0]/2),l=Math.round(r*c[1]/2),rr.rotateAtOffset(e,-i,a,l)),x&&this.declutterTree_.clear();for(var s=this.renderedTiles,v=S.getTileGridForProjection(t.viewState.projection),d=[],p=[],o=s.length-1;o>=0;--o){var y=s[o];if(y.getState()!=Tr.ABORT)for(var _=y.tileCoord,E=v.getTileCoordExtent(_)[0]-v.getTileCoordExtent(y.wrappedTileCoord)[0],M=void 0,b=0,w=y.tileKeys.length;b<w;++b){var A=y.getTile(y.tileKeys[b]);if(A.getState()!=Tr.ERROR){var R=A.getReplayGroup(h,_.toString());if(!(f!=ks.VECTOR&&!R.hasReplays(u))){M||(M=this.getTransform(t,E));var T=A.tileCoord[0],C=R.getClipCoords(M);e.save(),e.globalAlpha=n.opacity;for(var m=0,L=d.length;m<L;++m){var D=d[m];T<p[m]&&(e.beginPath(),e.moveTo(C[0],C[1]),e.lineTo(C[2],C[3]),e.lineTo(C[4],C[5]),e.lineTo(C[6],C[7]),e.moveTo(D[6],D[7]),e.lineTo(D[4],D[5]),e.lineTo(D[2],D[3]),e.lineTo(D[0],D[1]),e.clip())}R.replay(e,M,i,{},u,x),e.restore(),d.push(C),p.push(T)}}}}x&&vn.replayDeclutter(x,e,i),i&&rr.rotateAtOffset(e,i,a,l),Ni.prototype.postCompose.apply(this,arguments)},vi.prototype.renderFeature=function(e,t,n,h){if(!n)return!1;var x=!1;if(Array.isArray(n))for(var S=0,f=n.length;S<f;++S)x=Yr.renderFeature(h,e,n[S],t,this.handleStyleImageChange_,this)||x;else x=Yr.renderFeature(h,e,n,t,this.handleStyleImageChange_,this);return x},vi.prototype.renderTileImage_=function(e,t,n){var h=this.getLayer(),x=e.getReplayState(h),S=h.getRevision(),f=vi.IMAGE_REPLAYS[h.getRenderMode()];if(f&&x.renderedTileRevision!==S){x.renderedTileRevision=S;var u=e.wrappedTileCoord,r=u[0],i=t.pixelRatio,c=h.getSource(),a=c.getTileGridForProjection(t.viewState.projection),l=a.getResolution(r),s=e.getContext(h),v=c.getTilePixelSize(r,i,t.viewState.projection);s.canvas.width=v[0],s.canvas.height=v[1];for(var d=a.getTileCoordExtent(u),p=0,o=e.tileKeys.length;p<o;++p){var y=e.getTile(e.tileKeys[p]);if(y.getState()!=Tr.ERROR){var _=i/l,E=Qt.reset(this.tmpTransform_);Qt.scale(E,_,-_),Qt.translate(E,-d[0],-d[3]);var M=y.getReplayGroup(h,e.tileCoord.toString());M.replay(s,E,0,{},f)}}}};var Po=function(e){this.source_=e};Po.prototype.getType=function(){},Po.prototype.getSource=function(){return this.source_},Po.prototype.isAnimated=Qn.FALSE;var yo=function(e){Po.call(this,e)};tt.inherits(yo,Po),yo.prototype.getType=function(){return Bt.FRAGMENT_SHADER};var mo=function(e){Po.call(this,e)};tt.inherits(mo,Po),mo.prototype.getType=function(){return Bt.VERTEX_SHADER};var Fs={};Fs.fragment=new yo(tt.DEBUG_WEBGL?`precision mediump float;
varying vec2 v_center;
varying vec2 v_offset;
varying float v_halfWidth;
varying float v_pixelRatio;



uniform float u_opacity;
uniform vec4 u_fillColor;
uniform vec4 u_strokeColor;
uniform vec2 u_size;

void main(void) {
  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,
      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);
  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,
      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);
  float radius = length(windowCenter - windowOffset);
  float dist = length(windowCenter - gl_FragCoord.xy);
  if (dist > radius + v_halfWidth) {
    if (u_strokeColor.a == 0.0) {
      gl_FragColor = u_fillColor;
    } else {
      gl_FragColor = u_strokeColor;
    }
    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));
  } else if (u_fillColor.a == 0.0) {
    // Hooray, no fill, just stroke. We can use real antialiasing.
    gl_FragColor = u_strokeColor;
    if (dist < radius - v_halfWidth) {
      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);
    }
  } else {
    gl_FragColor = u_fillColor;
    float strokeDist = radius - v_halfWidth;
    float antialias = 2.0 * v_pixelRatio;
    if (dist > strokeDist) {
      gl_FragColor = u_strokeColor;
    } else if (dist >= strokeDist - antialias) {
      float step = smoothstep(strokeDist - antialias, strokeDist, dist);
      gl_FragColor = mix(u_fillColor, u_strokeColor, step);
    }
  }
  gl_FragColor.a = gl_FragColor.a * u_opacity;
  if (gl_FragColor.a <= 0.0) {
    discard;
  }
}
`:"precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}"),Fs.vertex=new mo(tt.DEBUG_WEBGL?`varying vec2 v_center;
varying vec2 v_offset;
varying float v_halfWidth;
varying float v_pixelRatio;


attribute vec2 a_position;
attribute float a_instruction;
attribute float a_radius;

uniform mat4 u_projectionMatrix;
uniform mat4 u_offsetScaleMatrix;
uniform mat4 u_offsetRotateMatrix;
uniform float u_lineWidth;
uniform float u_pixelRatio;

void main(void) {
  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;
  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;
  v_pixelRatio = u_pixelRatio;
  float lineWidth = u_lineWidth * u_pixelRatio;
  v_halfWidth = lineWidth / 2.0;
  if (lineWidth == 0.0) {
    lineWidth = 2.0 * u_pixelRatio;
  }
  vec2 offset;
  // Radius with anitaliasing (roughly).
  float radius = a_radius + 3.0 * u_pixelRatio;
  // Until we get gl_VertexID in WebGL, we store an instruction.
  if (a_instruction == 0.0) {
    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however
    // we should also leave some space for the antialiasing, thus we offset by lineWidth.
    offset = vec2(-1.0, 1.0);
  } else if (a_instruction == 1.0) {
    offset = vec2(-1.0, -1.0);
  } else if (a_instruction == 2.0) {
    offset = vec2(1.0, -1.0);
  } else {
    offset = vec2(1.0, 1.0);
  }

  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +
      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);
  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,
      0.0, 1.0)).xy;

  if (distance(v_center, v_offset) > 20000.0) {
    gl_Position = vec4(v_center, 0.0, 1.0);
  }
}


`:"varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;//Until we get gl_VertexID in WebGL,we store an instruction.if(f==0.0){//Offsetting the edges of the triangle by lineWidth/2 is necessary,however//we should also leave some space for the antialiasing,thus we offset by lineWidth.offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}");var nc=function(e,t){this.u_projectionMatrix=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_lineWidth=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_lineWidth":"k"),this.u_pixelRatio=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_pixelRatio":"l"),this.u_opacity=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_opacity":"m"),this.u_fillColor=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_fillColor":"n"),this.u_strokeColor=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_strokeColor":"o"),this.u_size=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_size":"p"),this.a_position=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_position":"e"),this.a_instruction=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_instruction":"f"),this.a_radius=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_radius":"g")},so={};so.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},so.fromTransform=function(e,t){return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e};var yi=function(e,t){On.call(this),this.tolerance=e,this.maxExtent=t,this.origin=Tt.getCenter(t),this.projectionMatrix_=Qt.create(),this.offsetRotateMatrix_=Qt.create(),this.offsetScaleMatrix_=Qt.create(),this.tmpMat4_=so.create(),this.indices=[],this.indicesBuffer=null,this.startIndices=[],this.startIndicesFeature=[],this.vertices=[],this.verticesBuffer=null,this.lineStringReplay=void 0};tt.inherits(yi,On),yi.prototype.getDeleteResourcesFunction=function(e){},yi.prototype.finish=function(e){},yi.prototype.setUpProgram=function(e,t,n,h){},yi.prototype.shutDownProgram=function(e,t){},yi.prototype.drawReplay=function(e,t,n,h){},yi.prototype.drawHitDetectionReplayOneByOne=function(e,t,n,h,x){},yi.prototype.drawHitDetectionReplay=function(e,t,n,h,x,S){return x?this.drawHitDetectionReplayOneByOne(e,t,n,h,S):this.drawHitDetectionReplayAll(e,t,n,h)},yi.prototype.drawHitDetectionReplayAll=function(e,t,n,h){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.drawReplay(e,t,n,!0);var x=h(null);if(x)return x},yi.prototype.replay=function(e,t,n,h,x,S,f,u,r,i,c){var a=e.getGL(),l,s,v,d,p,o,y,_;this.lineStringReplay&&(l=a.isEnabled(a.STENCIL_TEST),s=a.getParameter(a.STENCIL_FUNC),v=a.getParameter(a.STENCIL_VALUE_MASK),d=a.getParameter(a.STENCIL_REF),p=a.getParameter(a.STENCIL_WRITEMASK),o=a.getParameter(a.STENCIL_FAIL),y=a.getParameter(a.STENCIL_PASS_DEPTH_PASS),_=a.getParameter(a.STENCIL_PASS_DEPTH_FAIL),a.enable(a.STENCIL_TEST),a.clear(a.STENCIL_BUFFER_BIT),a.stencilMask(255),a.stencilFunc(a.ALWAYS,1,255),a.stencilOp(a.KEEP,a.KEEP,a.REPLACE),this.lineStringReplay.replay(e,t,n,h,x,S,f,u,r,i,c),a.stencilMask(0),a.stencilFunc(a.NOTEQUAL,1,255)),e.bindBuffer(Bt.ARRAY_BUFFER,this.verticesBuffer),e.bindBuffer(Bt.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);var E=this.setUpProgram(a,e,x,S),M=Qt.reset(this.projectionMatrix_);Qt.scale(M,2/(n*x[0]),2/(n*x[1])),Qt.rotate(M,-h),Qt.translate(M,-(t[0]-this.origin[0]),-(t[1]-this.origin[1]));var b=Qt.reset(this.offsetScaleMatrix_);Qt.scale(b,2/x[0],2/x[1]);var w=Qt.reset(this.offsetRotateMatrix_);h!==0&&Qt.rotate(w,-h),a.uniformMatrix4fv(E.u_projectionMatrix,!1,so.fromTransform(this.tmpMat4_,M)),a.uniformMatrix4fv(E.u_offsetScaleMatrix,!1,so.fromTransform(this.tmpMat4_,b)),a.uniformMatrix4fv(E.u_offsetRotateMatrix,!1,so.fromTransform(this.tmpMat4_,w)),a.uniform1f(E.u_opacity,f);var A;return r===void 0?this.drawReplay(a,e,u,!1):A=this.drawHitDetectionReplay(a,e,u,r,i,c),this.shutDownProgram(a,E),this.lineStringReplay&&(l||a.disable(a.STENCIL_TEST),a.clear(a.STENCIL_BUFFER_BIT),a.stencilFunc(s,d,v),a.stencilMask(p),a.stencilOp(o,_,y)),A},yi.prototype.drawElements=function(e,t,n,h){var x=t.hasOESElementIndexUint?Bt.UNSIGNED_INT:Bt.UNSIGNED_SHORT,S=t.hasOESElementIndexUint?4:2,f=h-n,u=n*S;e.drawElements(Bt.TRIANGLES,f,x,u)};var Fr={};Fr.defaultFont="10px sans-serif",Fr.defaultFillStyle=[0,0,0,1],Fr.defaultLineCap="round",Fr.defaultLineDash=[],Fr.defaultLineDashOffset=0,Fr.defaultLineJoin="round",Fr.defaultMiterLimit=10,Fr.defaultStrokeStyle=[0,0,0,1],Fr.defaultTextAlign=.5,Fr.defaultTextBaseline=.5,Fr.defaultLineWidth=1,Fr.triangleIsCounterClockwise=function(e,t,n,h,x,S){var f=(n-e)*(S-t)-(x-e)*(h-t);return f<=Fr.EPSILON&&f>=-Fr.EPSILON?void 0:f>0},Fr.EPSILON=Number.EPSILON||2220446049250313e-31;var Vi=function(e,t){this.arr_=e!==void 0?e:[],this.usage_=t!==void 0?t:Vi.Usage_.STATIC_DRAW};Vi.prototype.getArray=function(){return this.arr_},Vi.prototype.getUsage=function(){return this.usage_},Vi.Usage_={STATIC_DRAW:Bt.STATIC_DRAW,STREAM_DRAW:Bt.STREAM_DRAW,DYNAMIC_DRAW:Bt.DYNAMIC_DRAW};var ia=function(e,t){yi.call(this,e,t),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.radius_=0,this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,changed:!1}};tt.inherits(ia,yi),ia.prototype.drawCoordinates_=function(e,t,n,h){var x=this.vertices.length,S=this.indices.length,f=x/4,u,r;for(u=t,r=n;u<r;u+=h)this.vertices[x++]=e[u],this.vertices[x++]=e[u+1],this.vertices[x++]=0,this.vertices[x++]=this.radius_,this.vertices[x++]=e[u],this.vertices[x++]=e[u+1],this.vertices[x++]=1,this.vertices[x++]=this.radius_,this.vertices[x++]=e[u],this.vertices[x++]=e[u+1],this.vertices[x++]=2,this.vertices[x++]=this.radius_,this.vertices[x++]=e[u],this.vertices[x++]=e[u+1],this.vertices[x++]=3,this.vertices[x++]=this.radius_,this.indices[S++]=f,this.indices[S++]=f+1,this.indices[S++]=f+2,this.indices[S++]=f+2,this.indices[S++]=f+3,this.indices[S++]=f,f+=4},ia.prototype.drawCircle=function(e,t){var n=e.getRadius(),h=e.getStride();if(n){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.radius_=n;var x=e.getFlatCoordinates();x=qn.translate(x,0,2,h,-this.origin[0],-this.origin[1]),this.drawCoordinates_(x,0,2,h)}else if(this.state_.changed&&(this.styles_.pop(),this.styles_.length)){var S=this.styles_[this.styles_.length-1];this.state_.fillColor=S[0],this.state_.strokeColor=S[1],this.state_.lineWidth=S[2],this.state_.changed=!1}},ia.prototype.finish=function(e){this.verticesBuffer=new Vi(this.vertices),this.indicesBuffer=new Vi(this.indices),this.startIndices.push(this.indices.length),this.styleIndices_.length===0&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},ia.prototype.getDeleteResourcesFunction=function(e){var t=this.verticesBuffer,n=this.indicesBuffer;return function(){e.deleteBuffer(t),e.deleteBuffer(n)}},ia.prototype.setUpProgram=function(e,t,n,h){var x,S;x=Fs.fragment,S=Fs.vertex;var f=t.getProgram(x,S),u;return this.defaultLocations_?u=this.defaultLocations_:(u=new nc(e,f),this.defaultLocations_=u),t.useProgram(f),e.enableVertexAttribArray(u.a_position),e.vertexAttribPointer(u.a_position,2,Bt.FLOAT,!1,16,0),e.enableVertexAttribArray(u.a_instruction),e.vertexAttribPointer(u.a_instruction,1,Bt.FLOAT,!1,16,8),e.enableVertexAttribArray(u.a_radius),e.vertexAttribPointer(u.a_radius,1,Bt.FLOAT,!1,16,12),e.uniform2fv(u.u_size,n),e.uniform1f(u.u_pixelRatio,h),u},ia.prototype.shutDownProgram=function(e,t){e.disableVertexAttribArray(t.a_position),e.disableVertexAttribArray(t.a_instruction),e.disableVertexAttribArray(t.a_radius)},ia.prototype.drawReplay=function(e,t,n,h){if(!Zr.isEmpty(n))this.drawReplaySkipping_(e,t,n);else{var x,S,f,u;for(f=this.startIndices[this.startIndices.length-1],x=this.styleIndices_.length-1;x>=0;--x)S=this.styleIndices_[x],u=this.styles_[x],this.setFillStyle_(e,u[0]),this.setStrokeStyle_(e,u[1],u[2]),this.drawElements(e,t,S,f),f=S}},ia.prototype.drawHitDetectionReplayOneByOne=function(e,t,n,h,x){var S,f,u,r,i,c,a,l;for(l=this.startIndices.length-2,u=this.startIndices[l+1],S=this.styleIndices_.length-1;S>=0;--S)for(r=this.styles_[S],this.setFillStyle_(e,r[0]),this.setStrokeStyle_(e,r[1],r[2]),i=this.styleIndices_[S];l>=0&&this.startIndices[l]>=i;){if(f=this.startIndices[l],c=this.startIndicesFeature[l],a=tt.getUid(c).toString(),n[a]===void 0&&c.getGeometry()&&(x===void 0||Tt.intersects(x,c.getGeometry().getExtent()))){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.drawElements(e,t,f,u);var s=h(c);if(s)return s}l--,u=f}},ia.prototype.drawReplaySkipping_=function(e,t,n){var h,x,S,f,u,r,i,c,a;for(c=this.startIndices.length-2,S=x=this.startIndices[c+1],h=this.styleIndices_.length-1;h>=0;--h){for(f=this.styles_[h],this.setFillStyle_(e,f[0]),this.setStrokeStyle_(e,f[1],f[2]),u=this.styleIndices_[h];c>=0&&this.startIndices[c]>=u;)a=this.startIndices[c],r=this.startIndicesFeature[c],i=tt.getUid(r).toString(),n[i]&&(x!==S&&this.drawElements(e,t,x,S),S=a),c--,x=a;x!==S&&this.drawElements(e,t,x,S),x=S=u}},ia.prototype.setFillStyle_=function(e,t){e.uniform4fv(this.defaultLocations_.u_fillColor,t)},ia.prototype.setStrokeStyle_=function(e,t,n){e.uniform4fv(this.defaultLocations_.u_strokeColor,t),e.uniform1f(this.defaultLocations_.u_lineWidth,n)},ia.prototype.setFillStrokeStyle=function(e,t){var n,h;if(t){var x=t.getLineDash();this.state_.lineDash=x||Fr.defaultLineDash;var S=t.getLineDashOffset();this.state_.lineDashOffset=S||Fr.defaultLineDashOffset,n=t.getColor(),!(n instanceof CanvasGradient)&&!(n instanceof CanvasPattern)?n=Ln.asArray(n).map(function(u,r){return r!=3?u/255:u})||Fr.defaultStrokeStyle:n=Fr.defaultStrokeStyle,h=t.getWidth(),h=h!==void 0?h:Fr.defaultLineWidth}else n=[0,0,0,0],h=0;var f=e?e.getColor():[0,0,0,0];!(f instanceof CanvasGradient)&&!(f instanceof CanvasPattern)?f=Ln.asArray(f).map(function(u,r){return r!=3?u/255:u})||Fr.defaultFillStyle:f=Fr.defaultFillStyle,(!this.state_.strokeColor||!Vr.equals(this.state_.strokeColor,n)||!this.state_.fillColor||!Vr.equals(this.state_.fillColor,f)||this.state_.lineWidth!==h)&&(this.state_.changed=!0,this.state_.fillColor=f,this.state_.strokeColor=n,this.state_.lineWidth=h,this.styles_.push([f,n,h]))};var Ns={};Ns.fragment=new yo(tt.DEBUG_WEBGL?`precision mediump float;
varying vec2 v_texCoord;
varying float v_opacity;

uniform float u_opacity;
uniform sampler2D u_image;

void main(void) {
  vec4 texColor = texture2D(u_image, v_texCoord);
  gl_FragColor.rgb = texColor.rgb;
  float alpha = texColor.a * v_opacity * u_opacity;
  if (alpha == 0.0) {
    discard;
  }
  gl_FragColor.a = alpha;
}
`:"precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),Ns.vertex=new mo(tt.DEBUG_WEBGL?`varying vec2 v_texCoord;
varying float v_opacity;

attribute vec2 a_position;
attribute vec2 a_texCoord;
attribute vec2 a_offsets;
attribute float a_opacity;
attribute float a_rotateWithView;

uniform mat4 u_projectionMatrix;
uniform mat4 u_offsetScaleMatrix;
uniform mat4 u_offsetRotateMatrix;

void main(void) {
  mat4 offsetMatrix = u_offsetScaleMatrix;
  if (a_rotateWithView == 1.0) {
    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;
  }
  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);
  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;
  v_texCoord = a_texCoord;
  v_opacity = a_opacity;
}


`:"varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}");var ic=function(e,t){this.u_projectionMatrix=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_opacity=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_opacity":"k"),this.u_image=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_image":"l"),this.a_position=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_position":"c"),this.a_texCoord=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_texCoord":"d"),this.a_offsets=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_offsets":"e"),this.a_opacity=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_opacity":"f"),this.a_rotateWithView=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_rotateWithView":"g")},Os={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},Yn=function(e,t){this.canvas_=e,this.gl_=t,this.bufferCache_={},this.shaderCache_={},this.programCache_={},this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null,this.hasOESElementIndexUint=Vr.includes(tt.WEBGL_EXTENSIONS,"OES_element_index_uint"),this.hasOESElementIndexUint&&t.getExtension("OES_element_index_uint"),Jt.listen(this.canvas_,Os.LOST,this.handleWebGLContextLost,this),Jt.listen(this.canvas_,Os.RESTORED,this.handleWebGLContextRestored,this)};tt.inherits(Yn,ja),Yn.prototype.bindBuffer=function(e,t){var n=this.getGL(),h=t.getArray(),x=String(tt.getUid(t));if(x in this.bufferCache_){var S=this.bufferCache_[x];n.bindBuffer(e,S.buffer)}else{var f=n.createBuffer();n.bindBuffer(e,f);var u;e==Bt.ARRAY_BUFFER?u=new Float32Array(h):e==Bt.ELEMENT_ARRAY_BUFFER&&(u=this.hasOESElementIndexUint?new Uint32Array(h):new Uint16Array(h)),n.bufferData(e,u,t.getUsage()),this.bufferCache_[x]={buf:t,buffer:f}}},Yn.prototype.deleteBuffer=function(e){var t=this.getGL(),n=String(tt.getUid(e)),h=this.bufferCache_[n];t.isContextLost()||t.deleteBuffer(h.buffer),delete this.bufferCache_[n]},Yn.prototype.disposeInternal=function(){Jt.unlistenAll(this.canvas_);var e=this.getGL();if(!e.isContextLost()){var t;for(t in this.bufferCache_)e.deleteBuffer(this.bufferCache_[t].buffer);for(t in this.programCache_)e.deleteProgram(this.programCache_[t]);for(t in this.shaderCache_)e.deleteShader(this.shaderCache_[t]);e.deleteFramebuffer(this.hitDetectionFramebuffer_),e.deleteRenderbuffer(this.hitDetectionRenderbuffer_),e.deleteTexture(this.hitDetectionTexture_)}},Yn.prototype.getCanvas=function(){return this.canvas_},Yn.prototype.getGL=function(){return this.gl_},Yn.prototype.getHitDetectionFramebuffer=function(){return this.hitDetectionFramebuffer_||this.initHitDetectionFramebuffer_(),this.hitDetectionFramebuffer_},Yn.prototype.getShader=function(e){var t=String(tt.getUid(e));if(t in this.shaderCache_)return this.shaderCache_[t];var n=this.getGL(),h=n.createShader(e.getType());return n.shaderSource(h,e.getSource()),n.compileShader(h),this.shaderCache_[t]=h,h},Yn.prototype.getProgram=function(e,t){var n=tt.getUid(e)+"/"+tt.getUid(t);if(n in this.programCache_)return this.programCache_[n];var h=this.getGL(),x=h.createProgram();return h.attachShader(x,this.getShader(e)),h.attachShader(x,this.getShader(t)),h.linkProgram(x),this.programCache_[n]=x,x},Yn.prototype.handleWebGLContextLost=function(){Zr.clear(this.bufferCache_),Zr.clear(this.shaderCache_),Zr.clear(this.programCache_),this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null},Yn.prototype.handleWebGLContextRestored=function(){},Yn.prototype.initHitDetectionFramebuffer_=function(){var e=this.gl_,t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var n=Yn.createEmptyTexture(e,1,1),h=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,h),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,1,1),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,h),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),this.hitDetectionFramebuffer_=t,this.hitDetectionTexture_=n,this.hitDetectionRenderbuffer_=h},Yn.prototype.useProgram=function(e){if(e==this.currentProgram_)return!1;var t=this.getGL();return t.useProgram(e),this.currentProgram_=e,!0},Yn.createTexture_=function(e,t,n){var h=e.createTexture();return e.bindTexture(e.TEXTURE_2D,h),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),t!==void 0&&e.texParameteri(Bt.TEXTURE_2D,Bt.TEXTURE_WRAP_S,t),n!==void 0&&e.texParameteri(Bt.TEXTURE_2D,Bt.TEXTURE_WRAP_T,n),h},Yn.createEmptyTexture=function(e,t,n,h,x){var S=Yn.createTexture_(e,h,x);return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),S},Yn.createTexture=function(e,t,n,h){var x=Yn.createTexture_(e,n,h);return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),x};var Ei=function(e,t){yi.call(this,e,t),this.anchorX=void 0,this.anchorY=void 0,this.groupIndices=[],this.hitDetectionGroupIndices=[],this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.defaultLocations=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.width=void 0};tt.inherits(Ei,yi),Ei.prototype.getDeleteResourcesFunction=function(e){var t=this.verticesBuffer,n=this.indicesBuffer,h=this.getTextures(!0),x=e.getGL();return function(){if(!x.isContextLost()){var S,f;for(S=0,f=h.length;S<f;++S)x.deleteTexture(h[S])}e.deleteBuffer(t),e.deleteBuffer(n)}},Ei.prototype.drawCoordinates=function(e,t,n,h){var x=this.anchorX,S=this.anchorY,f=this.height,u=this.imageHeight,r=this.imageWidth,i=this.opacity,c=this.originX,a=this.originY,l=this.rotateWithView?1:0,s=-this.rotation,v=this.scale,d=this.width,p=Math.cos(s),o=Math.sin(s),y=this.indices.length,_=this.vertices.length,E,M,b,w,A,R;for(E=t;E<n;E+=h)A=e[E]-this.origin[0],R=e[E+1]-this.origin[1],M=_/8,b=-v*x,w=-v*(f-S),this.vertices[_++]=A,this.vertices[_++]=R,this.vertices[_++]=b*p-w*o,this.vertices[_++]=b*o+w*p,this.vertices[_++]=c/r,this.vertices[_++]=(a+f)/u,this.vertices[_++]=i,this.vertices[_++]=l,b=v*(d-x),w=-v*(f-S),this.vertices[_++]=A,this.vertices[_++]=R,this.vertices[_++]=b*p-w*o,this.vertices[_++]=b*o+w*p,this.vertices[_++]=(c+d)/r,this.vertices[_++]=(a+f)/u,this.vertices[_++]=i,this.vertices[_++]=l,b=v*(d-x),w=v*S,this.vertices[_++]=A,this.vertices[_++]=R,this.vertices[_++]=b*p-w*o,this.vertices[_++]=b*o+w*p,this.vertices[_++]=(c+d)/r,this.vertices[_++]=a/u,this.vertices[_++]=i,this.vertices[_++]=l,b=-v*x,w=v*S,this.vertices[_++]=A,this.vertices[_++]=R,this.vertices[_++]=b*p-w*o,this.vertices[_++]=b*o+w*p,this.vertices[_++]=c/r,this.vertices[_++]=a/u,this.vertices[_++]=i,this.vertices[_++]=l,this.indices[y++]=M,this.indices[y++]=M+1,this.indices[y++]=M+2,this.indices[y++]=M,this.indices[y++]=M+2,this.indices[y++]=M+3;return _},Ei.prototype.createTextures=function(e,t,n,h){var x,S,f,u,r=t.length;for(u=0;u<r;++u)S=t[u],f=tt.getUid(S).toString(),f in n?x=n[f]:(x=Yn.createTexture(h,S,Bt.CLAMP_TO_EDGE,Bt.CLAMP_TO_EDGE),n[f]=x),e[u]=x},Ei.prototype.setUpProgram=function(e,t,n,h){var x=Ns.fragment,S=Ns.vertex,f=t.getProgram(x,S),u;return this.defaultLocations?u=this.defaultLocations:(u=new ic(e,f),this.defaultLocations=u),t.useProgram(f),e.enableVertexAttribArray(u.a_position),e.vertexAttribPointer(u.a_position,2,Bt.FLOAT,!1,32,0),e.enableVertexAttribArray(u.a_offsets),e.vertexAttribPointer(u.a_offsets,2,Bt.FLOAT,!1,32,8),e.enableVertexAttribArray(u.a_texCoord),e.vertexAttribPointer(u.a_texCoord,2,Bt.FLOAT,!1,32,16),e.enableVertexAttribArray(u.a_opacity),e.vertexAttribPointer(u.a_opacity,1,Bt.FLOAT,!1,32,24),e.enableVertexAttribArray(u.a_rotateWithView),e.vertexAttribPointer(u.a_rotateWithView,1,Bt.FLOAT,!1,32,28),u},Ei.prototype.shutDownProgram=function(e,t){e.disableVertexAttribArray(t.a_position),e.disableVertexAttribArray(t.a_offsets),e.disableVertexAttribArray(t.a_texCoord),e.disableVertexAttribArray(t.a_opacity),e.disableVertexAttribArray(t.a_rotateWithView)},Ei.prototype.drawReplay=function(e,t,n,h){var x=h?this.getHitDetectionTextures():this.getTextures(),S=h?this.hitDetectionGroupIndices:this.groupIndices;if(!Zr.isEmpty(n))this.drawReplaySkipping(e,t,n,x,S);else{var f,u,r;for(f=0,u=x.length,r=0;f<u;++f){e.bindTexture(Bt.TEXTURE_2D,x[f]);var i=S[f];this.drawElements(e,t,r,i),r=i}}},Ei.prototype.drawReplaySkipping=function(e,t,n,h,x){var S=0,f,u;for(f=0,u=h.length;f<u;++f){e.bindTexture(Bt.TEXTURE_2D,h[f]);for(var r=f>0?x[f-1]:0,i=x[f],c=r,a=r;S<this.startIndices.length&&this.startIndices[S]<=i;){var l=this.startIndicesFeature[S],s=tt.getUid(l).toString();n[s]!==void 0?(c!==a&&this.drawElements(e,t,c,a),c=S===this.startIndices.length-1?i:this.startIndices[S+1],a=c):a=S===this.startIndices.length-1?i:this.startIndices[S+1],S++}c!==a&&this.drawElements(e,t,c,a)}},Ei.prototype.drawHitDetectionReplayOneByOne=function(e,t,n,h,x){var S,f,u,r,i,c,a=this.startIndices.length-1,l=this.getHitDetectionTextures();for(S=l.length-1;S>=0;--S)for(e.bindTexture(Bt.TEXTURE_2D,l[S]),f=S>0?this.hitDetectionGroupIndices[S-1]:0,r=this.hitDetectionGroupIndices[S];a>=0&&this.startIndices[a]>=f;){if(u=this.startIndices[a],i=this.startIndicesFeature[a],c=tt.getUid(i).toString(),n[c]===void 0&&i.getGeometry()&&(x===void 0||Tt.intersects(x,i.getGeometry().getExtent()))){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.drawElements(e,t,u,r);var s=h(i);if(s)return s}r=u,a--}},Ei.prototype.finish=function(e){this.anchorX=void 0,this.anchorY=void 0,this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.indices=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.vertices=null,this.width=void 0},Ei.prototype.getTextures=function(e){},Ei.prototype.getHitDetectionTextures=function(){};var xo=function(e,t){Ei.call(this,e,t),this.images_=[],this.hitDetectionImages_=[],this.textures_=[],this.hitDetectionTextures_=[]};tt.inherits(xo,Ei),xo.prototype.drawMultiPoint=function(e,t){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(t);var n=e.getFlatCoordinates(),h=e.getStride();this.drawCoordinates(n,0,n.length,h)},xo.prototype.drawPoint=function(e,t){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(t);var n=e.getFlatCoordinates(),h=e.getStride();this.drawCoordinates(n,0,n.length,h)},xo.prototype.finish=function(e){var t=e.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices.push(this.indices.length),this.verticesBuffer=new Vi(this.vertices);var n=this.indices;this.indicesBuffer=new Vi(n);var h={};this.createTextures(this.textures_,this.images_,h,t),this.createTextures(this.hitDetectionTextures_,this.hitDetectionImages_,h,t),this.images_=null,this.hitDetectionImages_=null,Ei.prototype.finish.call(this,e)},xo.prototype.setImageStyle=function(e){var t=e.getAnchor(),n=e.getImage(1),h=e.getImageSize(),x=e.getHitDetectionImage(1),S=e.getOpacity(),f=e.getOrigin(),u=e.getRotateWithView(),r=e.getRotation(),i=e.getSize(),c=e.getScale(),a;this.images_.length===0?this.images_.push(n):(a=this.images_[this.images_.length-1],tt.getUid(a)!=tt.getUid(n)&&(this.groupIndices.push(this.indices.length),this.images_.push(n))),this.hitDetectionImages_.length===0?this.hitDetectionImages_.push(x):(a=this.hitDetectionImages_[this.hitDetectionImages_.length-1],tt.getUid(a)!=tt.getUid(x)&&(this.hitDetectionGroupIndices.push(this.indices.length),this.hitDetectionImages_.push(x))),this.anchorX=t[0],this.anchorY=t[1],this.height=i[1],this.imageHeight=h[1],this.imageWidth=h[0],this.opacity=S,this.originX=f[0],this.originY=f[1],this.rotation=r,this.rotateWithView=u,this.scale=c,this.width=i[0]},xo.prototype.getTextures=function(e){return e?this.textures_.concat(this.hitDetectionTextures_):this.textures_},xo.prototype.getHitDetectionTextures=function(){return this.hitDetectionTextures_};var zs={};zs.lineStringIsClosed=function(e,t,n,h){var x=n-h;return e[t]===e[x]&&e[t+1]===e[x+1]&&(n-t)/h>3?!!po.linearRing(e,t,n,h):!1};var Us={};Us.fragment=new yo(tt.DEBUG_WEBGL?`precision mediump float;
varying float v_round;
varying vec2 v_roundVertex;
varying float v_halfWidth;



uniform float u_opacity;
uniform vec4 u_color;
uniform vec2 u_size;
uniform float u_pixelRatio;

void main(void) {
  if (v_round > 0.0) {
    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,
        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);
    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {
      discard;
    }
  }
  gl_FragColor = u_color;
  float alpha = u_color.a * u_opacity;
  if (alpha == 0.0) {
    discard;
  }
  gl_FragColor.a = alpha;
}
`:"precision mediump float;varying float a;varying vec2 aVertex;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((aVertex.x+1.0)/2.0*o.x*p,(aVertex.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),Us.vertex=new mo(tt.DEBUG_WEBGL?`varying float v_round;
varying vec2 v_roundVertex;
varying float v_halfWidth;


attribute vec2 a_lastPos;
attribute vec2 a_position;
attribute vec2 a_nextPos;
attribute float a_direction;

uniform mat4 u_projectionMatrix;
uniform mat4 u_offsetScaleMatrix;
uniform mat4 u_offsetRotateMatrix;
uniform float u_lineWidth;
uniform float u_miterLimit;

bool nearlyEquals(in float value, in float ref) {
  float epsilon = 0.000000000001;
  return value >= ref - epsilon && value <= ref + epsilon;
}

void alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {
  vec2 dirVect = nextP - a_position;
  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));
  offset = u_lineWidth / 2.0 * normal * direction;
}

void miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {
  float halfWidth = u_lineWidth / 2.0;
  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 dirVect = a_nextPos - a_position;
  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));
  float miterLength = abs(halfWidth / dot(normal, tmpNormal));
  offset = normal * direction * miterLength;
  round = 0.0;
  if (isRound) {
    round = 1.0;
  } else if (miterLength > u_miterLimit + u_lineWidth) {
    offset = halfWidth * tmpNormal * direction;
  }
}

bool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {
  bool degenerate = false;
  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 dirVect = a_lastPos - a_position;
  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));
  vec2 longOffset, shortOffset, longVertex;
  vec4 shortProjVertex;
  float halfWidth = u_lineWidth / 2.0;
  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {
    longOffset = tmpNormal * direction * halfWidth;
    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;
    longVertex = a_nextPos;
    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);
  } else {
    shortOffset = tmpNormal * direction * halfWidth;
    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;
    longVertex = a_lastPos;
    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);
  }
  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).
  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);
  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);
  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);
  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);
  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);
  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;
  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;
  float epsilon = 0.000000000001;
  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {
    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);
    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);
    offset = shortProjVertex.xy;
    degenerate = true;
  } else {
    float miterLength = abs(halfWidth / dot(normal, tmpNormal));
    offset = normal * direction * miterLength;
  }
  return degenerate;
}

void squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,
    in float turnDir, in float direction) {
  round = 0.0;
  vec2 dirVect = a_position - nextP;
  vec2 firstNormal = normalize(dirVect);
  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);
  vec2 hypotenuse = normalize(firstNormal - secondNormal);
  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);
  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);
  offset = normal * length;
  if (isRound) {
    round = 1.0;
  }
}

void main(void) {
  bool degenerate = false;
  float direction = float(sign(a_direction));
  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;
  vec2 offset;
  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);

  v_round = 0.0;
  v_halfWidth = u_lineWidth / 2.0;
  v_roundVertex = projPos.xy;

  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {
    alongNormal(offset, a_nextPos, 1.0, direction);
  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {
    alongNormal(offset, a_lastPos, -1.0, direction);
  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {
    miterUp(offset, v_round, round, direction);
  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {
    degenerate = miterDown(offset, projPos, offsetMatrix, direction);
  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {
    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);
  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {
    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);
  }
  if (!degenerate) {
    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);
    gl_Position = projPos + offsets;
  } else {
    gl_Position = vec4(offset, 0.0, 1.0);
  }
}


`:"varying float a;varying vec2 aVertex;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;aVertex=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}");var ac=function(e,t){this.u_projectionMatrix=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_lineWidth=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_lineWidth":"k"),this.u_miterLimit=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_miterLimit":"l"),this.u_opacity=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_opacity":"m"),this.u_color=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_color":"n"),this.u_size=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_size":"o"),this.u_pixelRatio=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_pixelRatio":"p"),this.a_lastPos=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_lastPos":"d"),this.a_position=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_position":"e"),this.a_nextPos=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_nextPos":"f"),this.a_direction=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_direction":"g")},qr=function(e,t){yi.call(this,e,t),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,changed:!1}};tt.inherits(qr,yi),qr.prototype.drawCoordinates_=function(e,t,n,h){var x,S,f=this.vertices.length,u=this.indices.length,r=this.state_.lineJoin==="bevel"?0:this.state_.lineJoin==="miter"?1:2,i=this.state_.lineCap==="butt"?0:this.state_.lineCap==="square"?1:2,c=zs.lineStringIsClosed(e,t,n,h),a,l,s,v=u,d=1,p,o,y;for(x=t,S=n;x<S;x+=h){if(s=f/7,p=o,o=y||[e[x],e[x+1]],x===t){if(y=[e[x+h],e[x+h+1]],n-t===h*2&&Vr.equals(o,y))break;if(c)p=[e[n-h*2],e[n-h*2+1]],a=y;else{i&&(f=this.addVertices_([0,0],o,y,d*qr.Instruction_.BEGIN_LINE_CAP*i,f),f=this.addVertices_([0,0],o,y,-d*qr.Instruction_.BEGIN_LINE_CAP*i,f),this.indices[u++]=s+2,this.indices[u++]=s,this.indices[u++]=s+1,this.indices[u++]=s+1,this.indices[u++]=s+3,this.indices[u++]=s+2),f=this.addVertices_([0,0],o,y,d*qr.Instruction_.BEGIN_LINE*(i||1),f),f=this.addVertices_([0,0],o,y,-d*qr.Instruction_.BEGIN_LINE*(i||1),f),v=f/7-1;continue}}else if(x===n-h)if(c){y=a;break}else{p=p||[0,0],f=this.addVertices_(p,o,[0,0],d*qr.Instruction_.END_LINE*(i||1),f),f=this.addVertices_(p,o,[0,0],-d*qr.Instruction_.END_LINE*(i||1),f),this.indices[u++]=s,this.indices[u++]=v-1,this.indices[u++]=v,this.indices[u++]=v,this.indices[u++]=s+1,this.indices[u++]=s,i&&(f=this.addVertices_(p,o,[0,0],d*qr.Instruction_.END_LINE_CAP*i,f),f=this.addVertices_(p,o,[0,0],-d*qr.Instruction_.END_LINE_CAP*i,f),this.indices[u++]=s+2,this.indices[u++]=s,this.indices[u++]=s+1,this.indices[u++]=s+1,this.indices[u++]=s+3,this.indices[u++]=s+2);break}else y=[e[x+h],e[x+h+1]];l=Fr.triangleIsCounterClockwise(p[0],p[1],o[0],o[1],y[0],y[1])?-1:1,f=this.addVertices_(p,o,y,l*qr.Instruction_.BEVEL_FIRST*(r||1),f),f=this.addVertices_(p,o,y,l*qr.Instruction_.BEVEL_SECOND*(r||1),f),f=this.addVertices_(p,o,y,-l*qr.Instruction_.MITER_BOTTOM*(r||1),f),x>t&&(this.indices[u++]=s,this.indices[u++]=v-1,this.indices[u++]=v,this.indices[u++]=s+2,this.indices[u++]=s,this.indices[u++]=d*l>0?v:v-1),this.indices[u++]=s,this.indices[u++]=s+2,this.indices[u++]=s+1,v=s+2,d=l,r&&(f=this.addVertices_(p,o,y,l*qr.Instruction_.MITER_TOP*r,f),this.indices[u++]=s+1,this.indices[u++]=s+3,this.indices[u++]=s)}c&&(s=s||f/7,l=Bi.linearRingIsClockwise([p[0],p[1],o[0],o[1],y[0],y[1]],0,6,2)?1:-1,f=this.addVertices_(p,o,y,l*qr.Instruction_.BEVEL_FIRST*(r||1),f),f=this.addVertices_(p,o,y,-l*qr.Instruction_.MITER_BOTTOM*(r||1),f),this.indices[u++]=s,this.indices[u++]=v-1,this.indices[u++]=v,this.indices[u++]=s+1,this.indices[u++]=s,this.indices[u++]=d*l>0?v:v-1)},qr.prototype.addVertices_=function(e,t,n,h,x){return this.vertices[x++]=e[0],this.vertices[x++]=e[1],this.vertices[x++]=t[0],this.vertices[x++]=t[1],this.vertices[x++]=n[0],this.vertices[x++]=n[1],this.vertices[x++]=h,x},qr.prototype.isValid_=function(e,t,n,h){var x=n-t;if(x<h*2)return!1;if(x===h*2){var S=[e[t],e[t+1]],f=[e[t+h],e[t+h+1]];return!Vr.equals(S,f)}return!0},qr.prototype.drawLineString=function(e,t){var n=e.getFlatCoordinates(),h=e.getStride();this.isValid_(n,0,n.length,h)&&(n=qn.translate(n,0,n.length,h,-this.origin[0],-this.origin[1]),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.startIndices.push(this.indices.length),this.startIndicesFeature.push(t),this.drawCoordinates_(n,0,n.length,h))},qr.prototype.drawMultiLineString=function(e,t){var n=this.indices.length,h=e.getEnds();h.unshift(0);var x=e.getFlatCoordinates(),S=e.getStride(),f,u;if(h.length>1){for(f=1,u=h.length;f<u;++f)if(this.isValid_(x,h[f-1],h[f],S)){var r=qn.translate(x,h[f-1],h[f],S,-this.origin[0],-this.origin[1]);this.drawCoordinates_(r,0,r.length,S)}}this.indices.length>n&&(this.startIndices.push(n),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(n),this.state_.changed=!1))},qr.prototype.drawPolygonCoordinates=function(e,t,n){if(zs.lineStringIsClosed(e,0,e.length,n)||(e.push(e[0]),e.push(e[1])),this.drawCoordinates_(e,0,e.length,n),t.length){var h,x;for(h=0,x=t.length;h<x;++h)zs.lineStringIsClosed(t[h],0,t[h].length,n)||(t[h].push(t[h][0]),t[h].push(t[h][1])),this.drawCoordinates_(t[h],0,t[h].length,n)}},qr.prototype.setPolygonStyle=function(e,t){var n=t===void 0?this.indices.length:t;this.startIndices.push(n),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(n),this.state_.changed=!1)},qr.prototype.getCurrentIndex=function(){return this.indices.length},qr.prototype.finish=function(e){this.verticesBuffer=new Vi(this.vertices),this.indicesBuffer=new Vi(this.indices),this.startIndices.push(this.indices.length),this.styleIndices_.length===0&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},qr.prototype.getDeleteResourcesFunction=function(e){var t=this.verticesBuffer,n=this.indicesBuffer;return function(){e.deleteBuffer(t),e.deleteBuffer(n)}},qr.prototype.setUpProgram=function(e,t,n,h){var x,S;x=Us.fragment,S=Us.vertex;var f=t.getProgram(x,S),u;return this.defaultLocations_?u=this.defaultLocations_:(u=new ac(e,f),this.defaultLocations_=u),t.useProgram(f),e.enableVertexAttribArray(u.a_lastPos),e.vertexAttribPointer(u.a_lastPos,2,Bt.FLOAT,!1,28,0),e.enableVertexAttribArray(u.a_position),e.vertexAttribPointer(u.a_position,2,Bt.FLOAT,!1,28,8),e.enableVertexAttribArray(u.a_nextPos),e.vertexAttribPointer(u.a_nextPos,2,Bt.FLOAT,!1,28,16),e.enableVertexAttribArray(u.a_direction),e.vertexAttribPointer(u.a_direction,1,Bt.FLOAT,!1,28,24),e.uniform2fv(u.u_size,n),e.uniform1f(u.u_pixelRatio,h),u},qr.prototype.shutDownProgram=function(e,t){e.disableVertexAttribArray(t.a_lastPos),e.disableVertexAttribArray(t.a_position),e.disableVertexAttribArray(t.a_nextPos),e.disableVertexAttribArray(t.a_direction)},qr.prototype.drawReplay=function(e,t,n,h){var x=e.getParameter(e.DEPTH_FUNC),S=e.getParameter(e.DEPTH_WRITEMASK);if(h||(e.enable(e.DEPTH_TEST),e.depthMask(!0),e.depthFunc(e.NOTEQUAL)),!Zr.isEmpty(n))this.drawReplaySkipping_(e,t,n);else{var f,u,r,i;for(r=this.startIndices[this.startIndices.length-1],f=this.styleIndices_.length-1;f>=0;--f)u=this.styleIndices_[f],i=this.styles_[f],this.setStrokeStyle_(e,i[0],i[1],i[2]),this.drawElements(e,t,u,r),e.clear(e.DEPTH_BUFFER_BIT),r=u}h||(e.disable(e.DEPTH_TEST),e.clear(e.DEPTH_BUFFER_BIT),e.depthMask(S),e.depthFunc(x))},qr.prototype.drawReplaySkipping_=function(e,t,n){var h,x,S,f,u,r,i,c,a;for(c=this.startIndices.length-2,S=x=this.startIndices[c+1],h=this.styleIndices_.length-1;h>=0;--h){for(f=this.styles_[h],this.setStrokeStyle_(e,f[0],f[1],f[2]),u=this.styleIndices_[h];c>=0&&this.startIndices[c]>=u;)a=this.startIndices[c],r=this.startIndicesFeature[c],i=tt.getUid(r).toString(),n[i]&&(x!==S&&(this.drawElements(e,t,x,S),e.clear(e.DEPTH_BUFFER_BIT)),S=a),c--,x=a;x!==S&&(this.drawElements(e,t,x,S),e.clear(e.DEPTH_BUFFER_BIT)),x=S=u}},qr.prototype.drawHitDetectionReplayOneByOne=function(e,t,n,h,x){var S,f,u,r,i,c,a,l;for(l=this.startIndices.length-2,u=this.startIndices[l+1],S=this.styleIndices_.length-1;S>=0;--S)for(r=this.styles_[S],this.setStrokeStyle_(e,r[0],r[1],r[2]),i=this.styleIndices_[S];l>=0&&this.startIndices[l]>=i;){if(f=this.startIndices[l],c=this.startIndicesFeature[l],a=tt.getUid(c).toString(),n[a]===void 0&&c.getGeometry()&&(x===void 0||Tt.intersects(x,c.getGeometry().getExtent()))){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.drawElements(e,t,f,u);var s=h(c);if(s)return s}l--,u=f}},qr.prototype.setStrokeStyle_=function(e,t,n,h){e.uniform4fv(this.defaultLocations_.u_color,t),e.uniform1f(this.defaultLocations_.u_lineWidth,n),e.uniform1f(this.defaultLocations_.u_miterLimit,h)},qr.prototype.setFillStrokeStyle=function(e,t){var n=t.getLineCap();this.state_.lineCap=n!==void 0?n:Fr.defaultLineCap;var h=t.getLineDash();this.state_.lineDash=h||Fr.defaultLineDash;var x=t.getLineDashOffset();this.state_.lineDashOffset=x||Fr.defaultLineDashOffset;var S=t.getLineJoin();this.state_.lineJoin=S!==void 0?S:Fr.defaultLineJoin;var f=t.getColor();!(f instanceof CanvasGradient)&&!(f instanceof CanvasPattern)?f=Ln.asArray(f).map(function(i,c){return c!=3?i/255:i})||Fr.defaultStrokeStyle:f=Fr.defaultStrokeStyle;var u=t.getWidth();u=u!==void 0?u:Fr.defaultLineWidth;var r=t.getMiterLimit();r=r!==void 0?r:Fr.defaultMiterLimit,(!this.state_.strokeColor||!Vr.equals(this.state_.strokeColor,f)||this.state_.lineWidth!==u||this.state_.miterLimit!==r)&&(this.state_.changed=!0,this.state_.strokeColor=f,this.state_.lineWidth=u,this.state_.miterLimit=r,this.styles_.push([f,u,r]))},qr.Instruction_={ROUND:2,BEGIN_LINE:3,END_LINE:5,BEGIN_LINE_CAP:7,END_LINE_CAP:11,BEVEL_FIRST:13,BEVEL_SECOND:17,MITER_BOTTOM:19,MITER_TOP:23};var Bs={};Bs.fragment=new yo(tt.DEBUG_WEBGL?`precision mediump float;



uniform vec4 u_color;
uniform float u_opacity;

void main(void) {
  gl_FragColor = u_color;
  float alpha = u_color.a * u_opacity;
  if (alpha == 0.0) {
    discard;
  }
  gl_FragColor.a = alpha;
}
`:"precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),Bs.vertex=new mo(tt.DEBUG_WEBGL?`

attribute vec2 a_position;

uniform mat4 u_projectionMatrix;
uniform mat4 u_offsetScaleMatrix;
uniform mat4 u_offsetRotateMatrix;

void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
}


`:"attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}");var oc=function(e,t){this.u_projectionMatrix=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_projectionMatrix":"b"),this.u_offsetScaleMatrix=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_offsetScaleMatrix":"c"),this.u_offsetRotateMatrix=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_offsetRotateMatrix":"d"),this.u_color=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_color":"e"),this.u_opacity=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_opacity":"f"),this.a_position=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_position":"a")},wi=function(e){var t=e||{};this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width,this.checksum_=void 0};wi.prototype.clone=function(){var e=this.getColor();return new wi({color:e&&e.slice?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},wi.prototype.getColor=function(){return this.color_},wi.prototype.getLineCap=function(){return this.lineCap_},wi.prototype.getLineDash=function(){return this.lineDash_},wi.prototype.getLineDashOffset=function(){return this.lineDashOffset_},wi.prototype.getLineJoin=function(){return this.lineJoin_},wi.prototype.getMiterLimit=function(){return this.miterLimit_},wi.prototype.getWidth=function(){return this.width_},wi.prototype.setColor=function(e){this.color_=e,this.checksum_=void 0},wi.prototype.setLineCap=function(e){this.lineCap_=e,this.checksum_=void 0},wi.prototype.setLineDash=function(e){this.lineDash_=e,this.checksum_=void 0},wi.prototype.setLineDashOffset=function(e){this.lineDashOffset_=e,this.checksum_=void 0},wi.prototype.setLineJoin=function(e){this.lineJoin_=e,this.checksum_=void 0},wi.prototype.setMiterLimit=function(e){this.miterLimit_=e,this.checksum_=void 0},wi.prototype.setWidth=function(e){this.width_=e,this.checksum_=void 0},wi.prototype.getChecksum=function(){return this.checksum_===void 0&&(this.checksum_="s",this.color_?typeof this.color_=="string"?this.checksum_+=this.color_:this.checksum_+=tt.getUid(this.color_).toString():this.checksum_+="-",this.checksum_+=","+(this.lineCap_!==void 0?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(this.lineDashOffset_!==void 0?this.lineDashOffset_:"-")+","+(this.lineJoin_!==void 0?this.lineJoin_:"-")+","+(this.miterLimit_!==void 0?this.miterLimit_.toString():"-")+","+(this.width_!==void 0?this.width_.toString():"-")),this.checksum_};var $i=function(e){this.first_=void 0,this.last_=void 0,this.head_=void 0,this.circular_=e===void 0?!0:e,this.length_=0};$i.prototype.insertItem=function(e){var t={prev:void 0,next:void 0,data:e},n=this.head_;if(!n)this.first_=t,this.last_=t,this.circular_&&(t.next=t,t.prev=t);else{var h=n.next;t.prev=n,t.next=h,n.next=t,h&&(h.prev=t),n===this.last_&&(this.last_=t)}this.head_=t,this.length_++},$i.prototype.removeItem=function(){var e=this.head_;if(e){var t=e.next,n=e.prev;t&&(t.prev=n),n&&(n.next=t),this.head_=t||n,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===e?this.first_=this.head_:this.last_===e&&(this.last_=n?this.head_.prev:this.head_),this.length_--}},$i.prototype.firstItem=function(){if(this.head_=this.first_,this.head_)return this.head_.data},$i.prototype.lastItem=function(){if(this.head_=this.last_,this.head_)return this.head_.data},$i.prototype.nextItem=function(){if(this.head_&&this.head_.next)return this.head_=this.head_.next,this.head_.data},$i.prototype.getNextItem=function(){if(this.head_&&this.head_.next)return this.head_.next.data},$i.prototype.prevItem=function(){if(this.head_&&this.head_.prev)return this.head_=this.head_.prev,this.head_.data},$i.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev)return this.head_.prev.data},$i.prototype.getCurrItem=function(){if(this.head_)return this.head_.data},$i.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},$i.prototype.concat=function(e){if(e.head_){if(this.head_){var t=this.head_.next;this.head_.next=e.first_,e.first_.prev=this.head_,t.prev=e.last_,e.last_.next=t,this.length_+=e.length_}else this.head_=e.head_,this.first_=e.first_,this.last_=e.last_,this.length_=e.length_;e.head_=void 0,e.first_=void 0,e.last_=void 0,e.length_=0}},$i.prototype.getLength=function(){return this.length_};var Xi=function(e){this.rbush_=hl(e),this.items_={}};Xi.prototype.insert=function(e,t){var n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[tt.getUid(t)]=n},Xi.prototype.load=function(e,t){for(var n=new Array(t.length),h=0,x=t.length;h<x;h++){var S=e[h],f=t[h],u={minX:S[0],minY:S[1],maxX:S[2],maxY:S[3],value:f};n[h]=u,this.items_[tt.getUid(f)]=u}this.rbush_.load(n)},Xi.prototype.remove=function(e){var t=tt.getUid(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null},Xi.prototype.update=function(e,t){var n=this.items_[tt.getUid(t)],h=[n.minX,n.minY,n.maxX,n.maxY];Tt.equals(h,e)||(this.remove(t),this.insert(e,t))},Xi.prototype.getAll=function(){var e=this.rbush_.all();return e.map(function(t){return t.value})},Xi.prototype.getInExtent=function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},n=this.rbush_.search(t);return n.map(function(h){return h.value})},Xi.prototype.forEach=function(e,t){return this.forEach_(this.getAll(),e,t)},Xi.prototype.forEachInExtent=function(e,t,n){return this.forEach_(this.getInExtent(e),t,n)},Xi.prototype.forEach_=function(e,t,n){for(var h,x=0,S=e.length;x<S;x++)if(h=t.call(n,e[x]),h)return h;return h},Xi.prototype.isEmpty=function(){return Zr.isEmpty(this.items_)},Xi.prototype.clear=function(){this.rbush_.clear(),this.items_={}},Xi.prototype.getExtent=function(e){var t=this.rbush_.data;return Tt.createOrUpdate(t.minX,t.minY,t.maxX,t.maxY,e)},Xi.prototype.concat=function(e){this.rbush_.load(e.rbush_.all());for(var t in e.items_)this.items_[t|0]=e.items_[t|0]};var yn=function(e,t){yi.call(this,e,t),this.lineStringReplay=new qr(e,t),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={fillColor:null,changed:!1}};tt.inherits(yn,yi),yn.prototype.drawCoordinates_=function(e,t,n){var h=new $i,x=new Xi;this.processFlatCoordinates_(e,n,h,x,!0);var S=this.getMaxCoords_(h);if(t.length){var f,u,r=[];for(f=0,u=t.length;f<u;++f){var i={list:new $i,maxCoords:void 0,rtree:new Xi};r.push(i),this.processFlatCoordinates_(t[f],n,i.list,i.rtree,!1),this.classifyPoints_(i.list,i.rtree,!0),i.maxCoords=this.getMaxCoords_(i.list)}for(r.sort(function(v,d){return d.maxCoords[0]===v.maxCoords[0]?v.maxCoords[1]-d.maxCoords[1]:d.maxCoords[0]-v.maxCoords[0]}),f=0;f<r.length;++f){var c=r[f].list,a=c.firstItem(),l=a,s;do{if(this.getIntersections_(l,x).length){s=!0;break}l=c.nextItem()}while(a!==l);s||this.bridgeHole_(c,r[f].maxCoords[0],h,S[0],x)&&(x.concat(r[f].rtree),this.classifyPoints_(h,x,!1))}}else this.classifyPoints_(h,x,!1);this.triangulate_(h,x)},yn.prototype.processFlatCoordinates_=function(e,t,n,h,x){var S=Bi.linearRingIsClockwise(e,0,e.length,t),f,u,r=this.vertices.length/2,i,c,a,l=[],s=[];if(x===S){for(i=this.createPoint_(e[0],e[1],r++),c=i,f=t,u=e.length;f<u;f+=t)a=this.createPoint_(e[f],e[f+1],r++),s.push(this.insertItem_(c,a,n)),l.push([Math.min(c.x,a.x),Math.min(c.y,a.y),Math.max(c.x,a.x),Math.max(c.y,a.y)]),c=a;s.push(this.insertItem_(a,i,n)),l.push([Math.min(c.x,a.x),Math.min(c.y,a.y),Math.max(c.x,a.x),Math.max(c.y,a.y)])}else{var v=e.length-t;for(i=this.createPoint_(e[v],e[v+1],r++),c=i,f=v-t,u=0;f>=u;f-=t)a=this.createPoint_(e[f],e[f+1],r++),s.push(this.insertItem_(c,a,n)),l.push([Math.min(c.x,a.x),Math.min(c.y,a.y),Math.max(c.x,a.x),Math.max(c.y,a.y)]),c=a;s.push(this.insertItem_(a,i,n)),l.push([Math.min(c.x,a.x),Math.min(c.y,a.y),Math.max(c.x,a.x),Math.max(c.y,a.y)])}h.load(l,s)},yn.prototype.getMaxCoords_=function(e){var t=e.firstItem(),n=t,h=[n.p0.x,n.p0.y];do n=e.nextItem(),n.p0.x>h[0]&&(h=[n.p0.x,n.p0.y]);while(n!==t);return h},yn.prototype.classifyPoints_=function(e,t,n){var h=e.firstItem(),x=h,S=e.nextItem(),f=!1;do{var u=n?Fr.triangleIsCounterClockwise(S.p1.x,S.p1.y,x.p1.x,x.p1.y,x.p0.x,x.p0.y):Fr.triangleIsCounterClockwise(x.p0.x,x.p0.y,x.p1.x,x.p1.y,S.p1.x,S.p1.y);u===void 0?(this.removeItem_(x,S,e,t),f=!0,S===h&&(h=e.getNextItem()),S=x,e.prevItem()):x.p1.reflex!==u&&(x.p1.reflex=u,f=!0),x=S,S=e.nextItem()}while(x!==h);return f},yn.prototype.bridgeHole_=function(e,t,n,h,x){for(var S=e.firstItem();S.p1.x!==t;)S=e.nextItem();var f=S.p1,u={x:h,y:f.y,i:-1},r=1/0,i,c,a,l,s=this.getIntersections_({p0:f,p1:u},x,!0);for(i=0,c=s.length;i<c;++i){var v=s[i],d=this.calculateIntersection_(f,u,v.p0,v.p1,!0),p=Math.abs(f.x-d[0]);p<r&&Fr.triangleIsCounterClockwise(f.x,f.y,v.p0.x,v.p0.y,v.p1.x,v.p1.y)!==void 0&&(r=p,l={x:d[0],y:d[1],i:-1},S=v)}if(r===1/0)return!1;if(a=S.p1,r>0){var o=this.getPointsInTriangle_(f,l,S.p1,x);if(o.length){var y=1/0;for(i=0,c=o.length;i<c;++i){var _=o[i],E=Math.atan2(f.y-_.y,u.x-_.x);(E<y||E===y&&_.x<a.x)&&(y=E,a=_)}}}for(S=n.firstItem();S.p1.x!==a.x||S.p1.y!==a.y;)S=n.nextItem();var M={x:f.x,y:f.y,i:f.i,reflex:void 0},b={x:S.p1.x,y:S.p1.y,i:S.p1.i,reflex:void 0};return e.getNextItem().p0=M,this.insertItem_(f,S.p1,e,x),this.insertItem_(b,M,e,x),S.p1=b,e.setFirstItem(),n.concat(e),!0},yn.prototype.triangulate_=function(e,t){for(var n=!1,h=this.isSimple_(e,t);e.getLength()>3;)if(h){if(!this.clipEars_(e,t,h,n)&&!this.classifyPoints_(e,t,n)&&!this.resolveSelfIntersections_(e,t,!0))break}else if(!this.clipEars_(e,t,h,n)&&!this.classifyPoints_(e,t,n)&&!this.resolveSelfIntersections_(e,t))if(h=this.isSimple_(e,t),h)n=!this.isClockwise_(e),this.classifyPoints_(e,t,n);else{this.splitPolygon_(e,t);break}if(e.getLength()===3){var x=this.indices.length;this.indices[x++]=e.getPrevItem().p0.i,this.indices[x++]=e.getCurrItem().p0.i,this.indices[x++]=e.getNextItem().p0.i}},yn.prototype.clipEars_=function(e,t,n,h){var x=this.indices.length,S=e.firstItem(),f=e.getPrevItem(),u=S,r=e.nextItem(),i=e.getNextItem(),c,a,l,s=!1;do{if(c=u.p0,a=u.p1,l=r.p1,a.reflex===!1){var v;n?v=this.getPointsInTriangle_(c,a,l,t,!0).length===0:v=h?this.diagonalIsInside_(i.p1,l,a,c,f.p0):this.diagonalIsInside_(f.p0,c,a,l,i.p1),(n||this.getIntersections_({p0:c,p1:l},t).length===0)&&v&&(n||c.reflex===!1||l.reflex===!1||Bi.linearRingIsClockwise([f.p0.x,f.p0.y,c.x,c.y,a.x,a.y,l.x,l.y,i.p1.x,i.p1.y],0,10,2)===!h)&&(this.indices[x++]=c.i,this.indices[x++]=a.i,this.indices[x++]=l.i,this.removeItem_(u,r,e,t),r===S&&(S=i),s=!0)}f=e.getPrevItem(),u=e.getCurrItem(),r=e.nextItem(),i=e.getNextItem()}while(u!==S&&e.getLength()>3);return s},yn.prototype.resolveSelfIntersections_=function(e,t,n){var h=e.firstItem();e.nextItem();var x=h,S=e.nextItem(),f=!1;do{var u=this.calculateIntersection_(x.p0,x.p1,S.p0,S.p1,n);if(u){var r=!1,i=this.vertices.length,c=this.indices.length,a=i/2,l=e.prevItem();e.removeItem(),t.remove(l),r=l===h;var s;if(n?(u[0]===x.p0.x&&u[1]===x.p0.y?(e.prevItem(),s=x.p0,S.p0=s,t.remove(x),r=r||x===h):(s=S.p1,x.p1=s,t.remove(S),r=r||S===h),e.removeItem()):(s=this.createPoint_(u[0],u[1],a),x.p1=s,S.p0=s,t.update([Math.min(x.p0.x,x.p1.x),Math.min(x.p0.y,x.p1.y),Math.max(x.p0.x,x.p1.x),Math.max(x.p0.y,x.p1.y)],x),t.update([Math.min(S.p0.x,S.p1.x),Math.min(S.p0.y,S.p1.y),Math.max(S.p0.x,S.p1.x),Math.max(S.p0.y,S.p1.y)],S)),this.indices[c++]=l.p0.i,this.indices[c++]=l.p1.i,this.indices[c++]=s.i,f=!0,r)break}x=e.getPrevItem(),S=e.nextItem()}while(x!==h);return f},yn.prototype.isSimple_=function(e,t){var n=e.firstItem(),h=n;do{if(this.getIntersections_(h,t).length)return!1;h=e.nextItem()}while(h!==n);return!0},yn.prototype.isClockwise_=function(e){var t=e.getLength()*2,n=new Array(t),h=e.firstItem(),x=h,S=0;do n[S++]=x.p0.x,n[S++]=x.p0.y,x=e.nextItem();while(x!==h);return Bi.linearRingIsClockwise(n,0,t,2)},yn.prototype.splitPolygon_=function(e,t){var n=e.firstItem(),h=n;do{var x=this.getIntersections_(h,t);if(x.length){var S=x[0],f=this.vertices.length/2,u=this.calculateIntersection_(h.p0,h.p1,S.p0,S.p1),r=this.createPoint_(u[0],u[1],f),i=new $i,c=new Xi;this.insertItem_(r,h.p1,i,c),h.p1=r,t.update([Math.min(h.p0.x,r.x),Math.min(h.p0.y,r.y),Math.max(h.p0.x,r.x),Math.max(h.p0.y,r.y)],h);for(var a=e.nextItem();a!==S;)this.insertItem_(a.p0,a.p1,i,c),t.remove(a),e.removeItem(),a=e.getCurrItem();this.insertItem_(S.p0,r,i,c),S.p0=r,t.update([Math.min(S.p1.x,r.x),Math.min(S.p1.y,r.y),Math.max(S.p1.x,r.x),Math.max(S.p1.y,r.y)],S),this.classifyPoints_(e,t,!1),this.triangulate_(e,t),this.classifyPoints_(i,c,!1),this.triangulate_(i,c);break}h=e.nextItem()}while(h!==n)},yn.prototype.createPoint_=function(e,t,n){var h=this.vertices.length;this.vertices[h++]=e,this.vertices[h++]=t;var x={x:e,y:t,i:n,reflex:void 0};return x},yn.prototype.insertItem_=function(e,t,n,h){var x={p0:e,p1:t};return n.insertItem(x),h&&h.insert([Math.min(e.x,t.x),Math.min(e.y,t.y),Math.max(e.x,t.x),Math.max(e.y,t.y)],x),x},yn.prototype.removeItem_=function(e,t,n,h){n.getCurrItem()===t&&(n.removeItem(),e.p1=t.p1,h.remove(t),h.update([Math.min(e.p0.x,e.p1.x),Math.min(e.p0.y,e.p1.y),Math.max(e.p0.x,e.p1.x),Math.max(e.p0.y,e.p1.y)],e))},yn.prototype.getPointsInTriangle_=function(e,t,n,h,x){var S,f,u,r,i=[],c=h.getInExtent([Math.min(e.x,t.x,n.x),Math.min(e.y,t.y,n.y),Math.max(e.x,t.x,n.x),Math.max(e.y,t.y,n.y)]);for(S=0,f=c.length;S<f;++S)for(u in c[S])r=c[S][u],typeof r=="object"&&(!x||r.reflex)&&(r.x!==e.x||r.y!==e.y)&&(r.x!==t.x||r.y!==t.y)&&(r.x!==n.x||r.y!==n.y)&&i.indexOf(r)===-1&&Ui.linearRingContainsXY([e.x,e.y,t.x,t.y,n.x,n.y],0,6,2,r.x,r.y)&&i.push(r);return i},yn.prototype.getIntersections_=function(e,t,n){var h=e.p0,x=e.p1,S=t.getInExtent([Math.min(h.x,x.x),Math.min(h.y,x.y),Math.max(h.x,x.x),Math.max(h.y,x.y)]),f=[],u,r;for(u=0,r=S.length;u<r;++u){var i=S[u];e!==i&&(n||i.p0!==x||i.p1!==h)&&this.calculateIntersection_(h,x,i.p0,i.p1,n)&&f.push(i)}return f},yn.prototype.calculateIntersection_=function(e,t,n,h,x){var S=(h.y-n.y)*(t.x-e.x)-(h.x-n.x)*(t.y-e.y);if(S!==0){var f=((h.x-n.x)*(e.y-n.y)-(h.y-n.y)*(e.x-n.x))/S,u=((t.x-e.x)*(e.y-n.y)-(t.y-e.y)*(e.x-n.x))/S;if(!x&&f>Fr.EPSILON&&f<1-Fr.EPSILON&&u>Fr.EPSILON&&u<1-Fr.EPSILON||x&&f>=0&&f<=1&&u>=0&&u<=1)return[e.x+f*(t.x-e.x),e.y+f*(t.y-e.y)]}},yn.prototype.diagonalIsInside_=function(e,t,n,h,x){if(t.reflex===void 0||h.reflex===void 0)return!1;var S=(n.x-h.x)*(t.y-h.y)>(n.y-h.y)*(t.x-h.x),f=(x.x-h.x)*(t.y-h.y)<(x.y-h.y)*(t.x-h.x),u=(e.x-t.x)*(h.y-t.y)>(e.y-t.y)*(h.x-t.x),r=(n.x-t.x)*(h.y-t.y)<(n.y-t.y)*(h.x-t.x),i=h.reflex?f||S:f&&S,c=t.reflex?r||u:r&&u;return i&&c},yn.prototype.drawMultiPolygon=function(e,t){var n=e.getEndss(),h=e.getStride(),x=this.indices.length,S=this.lineStringReplay.getCurrentIndex(),f=e.getFlatCoordinates(),u,r,i,c,a=0;for(u=0,r=n.length;u<r;++u){var l=n[u];if(l.length>0){var s=qn.translate(f,a,l[0],h,-this.origin[0],-this.origin[1]);if(s.length){var v=[],d;for(i=1,c=l.length;i<c;++i)l[i]!==l[i-1]&&(d=qn.translate(f,l[i-1],l[i],h,-this.origin[0],-this.origin[1]),v.push(d));this.lineStringReplay.drawPolygonCoordinates(s,v,h),this.drawCoordinates_(s,v,h)}}a=l[l.length-1]}this.indices.length>x&&(this.startIndices.push(x),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(x),this.state_.changed=!1)),this.lineStringReplay.getCurrentIndex()>S&&this.lineStringReplay.setPolygonStyle(t,S)},yn.prototype.drawPolygon=function(e,t){var n=e.getEnds(),h=e.getStride();if(n.length>0){var x=e.getFlatCoordinates().map(Number),S=qn.translate(x,0,n[0],h,-this.origin[0],-this.origin[1]);if(S.length){var f=[],u,r,i;for(u=1,r=n.length;u<r;++u)n[u]!==n[u-1]&&(i=qn.translate(x,n[u-1],n[u],h,-this.origin[0],-this.origin[1]),f.push(i));this.startIndices.push(this.indices.length),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.lineStringReplay.setPolygonStyle(t),this.lineStringReplay.drawPolygonCoordinates(S,f,h),this.drawCoordinates_(S,f,h)}}},yn.prototype.finish=function(e){this.verticesBuffer=new Vi(this.vertices),this.indicesBuffer=new Vi(this.indices),this.startIndices.push(this.indices.length),this.lineStringReplay.finish(e),this.styleIndices_.length===0&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},yn.prototype.getDeleteResourcesFunction=function(e){var t=this.verticesBuffer,n=this.indicesBuffer,h=this.lineStringReplay.getDeleteResourcesFunction(e);return function(){e.deleteBuffer(t),e.deleteBuffer(n),h()}},yn.prototype.setUpProgram=function(e,t,n,h){var x,S;x=Bs.fragment,S=Bs.vertex;var f=t.getProgram(x,S),u;return this.defaultLocations_?u=this.defaultLocations_:(u=new oc(e,f),this.defaultLocations_=u),t.useProgram(f),e.enableVertexAttribArray(u.a_position),e.vertexAttribPointer(u.a_position,2,Bt.FLOAT,!1,8,0),u},yn.prototype.shutDownProgram=function(e,t){e.disableVertexAttribArray(t.a_position)},yn.prototype.drawReplay=function(e,t,n,h){var x=e.getParameter(e.DEPTH_FUNC),S=e.getParameter(e.DEPTH_WRITEMASK);if(h||(e.enable(e.DEPTH_TEST),e.depthMask(!0),e.depthFunc(e.NOTEQUAL)),!Zr.isEmpty(n))this.drawReplaySkipping_(e,t,n);else{var f,u,r,i;for(r=this.startIndices[this.startIndices.length-1],f=this.styleIndices_.length-1;f>=0;--f)u=this.styleIndices_[f],i=this.styles_[f],this.setFillStyle_(e,i),this.drawElements(e,t,u,r),r=u}h||(e.disable(e.DEPTH_TEST),e.clear(e.DEPTH_BUFFER_BIT),e.depthMask(S),e.depthFunc(x))},yn.prototype.drawHitDetectionReplayOneByOne=function(e,t,n,h,x){var S,f,u,r,i,c,a,l;for(l=this.startIndices.length-2,u=this.startIndices[l+1],S=this.styleIndices_.length-1;S>=0;--S)for(r=this.styles_[S],this.setFillStyle_(e,r),i=this.styleIndices_[S];l>=0&&this.startIndices[l]>=i;){if(f=this.startIndices[l],c=this.startIndicesFeature[l],a=tt.getUid(c).toString(),n[a]===void 0&&c.getGeometry()&&(x===void 0||Tt.intersects(x,c.getGeometry().getExtent()))){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.drawElements(e,t,f,u);var s=h(c);if(s)return s}l--,u=f}},yn.prototype.drawReplaySkipping_=function(e,t,n){var h,x,S,f,u,r,i,c,a;for(c=this.startIndices.length-2,S=x=this.startIndices[c+1],h=this.styleIndices_.length-1;h>=0;--h){for(f=this.styles_[h],this.setFillStyle_(e,f),u=this.styleIndices_[h];c>=0&&this.startIndices[c]>=u;)a=this.startIndices[c],r=this.startIndicesFeature[c],i=tt.getUid(r).toString(),n[i]&&(x!==S&&(this.drawElements(e,t,x,S),e.clear(e.DEPTH_BUFFER_BIT)),S=a),c--,x=a;x!==S&&(this.drawElements(e,t,x,S),e.clear(e.DEPTH_BUFFER_BIT)),x=S=u}},yn.prototype.setFillStyle_=function(e,t){e.uniform4fv(this.defaultLocations_.u_color,t)},yn.prototype.setFillStrokeStyle=function(e,t){var n=e?e.getColor():[0,0,0,0];if(!(n instanceof CanvasGradient)&&!(n instanceof CanvasPattern)?n=Ln.asArray(n).map(function(x,S){return S!=3?x/255:x})||Fr.defaultFillStyle:n=Fr.defaultFillStyle,(!this.state_.fillColor||!Vr.equals(n,this.state_.fillColor))&&(this.state_.fillColor=n,this.state_.changed=!0,this.styles_.push(n)),t)this.lineStringReplay.setFillStrokeStyle(null,t);else{var h=new wi({color:[0,0,0,0],lineWidth:0});this.lineStringReplay.setFillStrokeStyle(null,h)}};var ko=function(e,t){this.space_=t,this.emptyBlocks_=[{x:0,y:0,width:e,height:e}],this.entries_={},this.context_=gn.createCanvasContext2D(e,e),this.canvas_=this.context_.canvas};ko.prototype.get=function(e){return this.entries_[e]||null},ko.prototype.add=function(e,t,n,h,x){var S,f,u;for(f=0,u=this.emptyBlocks_.length;f<u;++f)if(S=this.emptyBlocks_[f],S.width>=t+this.space_&&S.height>=n+this.space_){var r={offsetX:S.x+this.space_,offsetY:S.y+this.space_,image:this.canvas_};return this.entries_[e]=r,h.call(x,this.context_,S.x+this.space_,S.y+this.space_),this.split_(f,S,t+this.space_,n+this.space_),r}return null},ko.prototype.split_=function(e,t,n,h){var x=t.width-n,S=t.height-h,f,u;x>S?(f={x:t.x+n,y:t.y,width:t.width-n,height:t.height},u={x:t.x,y:t.y+h,width:n,height:t.height-h},this.updateBlocks_(e,f,u)):(f={x:t.x+n,y:t.y,width:t.width-n,height:h},u={x:t.x,y:t.y+h,width:t.width,height:t.height-h},this.updateBlocks_(e,f,u))},ko.prototype.updateBlocks_=function(e,t,n){var h=[e,1];t.width>0&&t.height>0&&h.push(t),n.width>0&&n.height>0&&h.push(n),this.emptyBlocks_.splice.apply(this.emptyBlocks_,h)};var es=function(e){var t=e||{};this.currentSize_=t.initialSize!==void 0?t.initialSize:tt.INITIAL_ATLAS_SIZE,this.maxSize_=t.maxSize!==void 0?t.maxSize:tt.MAX_ATLAS_SIZE!=-1?tt.MAX_ATLAS_SIZE:tt.WEBGL_MAX_TEXTURE_SIZE!==void 0?tt.WEBGL_MAX_TEXTURE_SIZE:2048,this.space_=t.space!==void 0?t.space:1,this.atlases_=[new ko(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new ko(this.currentHitSize_,this.space_)]};es.prototype.getInfo=function(e){var t=this.getInfo_(this.atlases_,e);if(!t)return null;var n=this.getInfo_(this.hitAtlases_,e);return this.mergeInfos_(t,n)},es.prototype.getInfo_=function(e,t){var n,h,x,S;for(x=0,S=e.length;x<S;++x)if(n=e[x],h=n.get(t),h)return h;return null},es.prototype.mergeInfos_=function(e,t){return{offsetX:e.offsetX,offsetY:e.offsetY,image:e.image,hitImage:t.image}},es.prototype.add=function(e,t,n,h,x,S){if(t+this.space_>this.maxSize_||n+this.space_>this.maxSize_)return null;var f=this.add_(!1,e,t,n,h,S);if(!f)return null;var u=x!==void 0?x:tt.nullFunction,r=this.add_(!0,e,t,n,u,S);return this.mergeInfos_(f,r)},es.prototype.add_=function(e,t,n,h,x,S){var f=e?this.hitAtlases_:this.atlases_,u,r,i,c;for(i=0,c=f.length;i<c;++i){if(u=f[i],r=u.add(t,n,h,x,S),r)return r;if(!r&&i===c-1){var a;e?(a=Math.min(this.currentHitSize_*2,this.maxSize_),this.currentHitSize_=a):(a=Math.min(this.currentSize_*2,this.maxSize_),this.currentSize_=a),u=new ko(a,this.space_),f.push(u),++c}}return null};var ma=function(e,t){Ei.call(this,e,t),this.images_=[],this.textures_=[],this.measureCanvas_=gn.createCanvasContext2D(0,0).canvas,this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.atlases_={},this.currAtlas_=void 0,this.scale=1,this.opacity=1};tt.inherits(ma,Ei),ma.prototype.drawText=function(e,t){if(this.text_){var n=null,h=0,x=2,S=2;switch(e.getType()){case Er.POINT:case Er.MULTI_POINT:n=e.getFlatCoordinates(),x=n.length,S=e.getStride();break;case Er.CIRCLE:n=e.getCenter();break;case Er.LINE_STRING:n=e.getFlatMidpoint();break;case Er.MULTI_LINE_STRING:n=e.getFlatMidpoints(),x=n.length;break;case Er.POLYGON:n=e.getFlatInteriorPoint();break;case Er.MULTI_POLYGON:n=e.getFlatInteriorPoints(),x=n.length;break}this.startIndices.push(this.indices.length),this.startIndicesFeature.push(t);var f=this.currAtlas_,u=this.text_.split(`
`),r=this.getTextSize_(u),i,c,a,l,s,v,d,p,o=Math.round(r[0]*this.textAlign_-this.offsetX_),y=Math.round(r[1]*this.textBaseline_-this.offsetY_),_=this.state_.lineWidth/2*this.state_.scale;for(i=0,c=u.length;i<c;++i)for(s=0,v=f.height*i,d=u[i].split(""),a=0,l=d.length;a<l;++a){if(p=f.atlas.getInfo(d[a]),p){var E=p.image;this.anchorX=o-s,this.anchorY=y-v,this.originX=a===0?p.offsetX-_:p.offsetX,this.originY=p.offsetY,this.height=f.height,this.width=a===0||a===d.length-1?f.width[d[a]]+_:f.width[d[a]],this.imageHeight=E.height,this.imageWidth=E.width;var M;this.images_.length===0?this.images_.push(E):(M=this.images_[this.images_.length-1],tt.getUid(M)!=tt.getUid(E)&&(this.groupIndices.push(this.indices.length),this.images_.push(E))),this.drawText_(n,h,x,S)}s+=this.width}}},ma.prototype.getTextSize_=function(e){var t=this,n=this.currAtlas_,h=e.length*n.height,x=e.map(function(S){var f=0,u,r;for(u=0,r=S.length;u<r;++u){var i=S[u];n.width[i]||t.addCharToAtlas_(i),f+=n.width[i]?n.width[i]:0}return f}).reduce(function(S,f){return Math.max(S,f)});return[x,h]},ma.prototype.drawText_=function(e,t,n,h){var x,S;for(x=t,S=n;x<S;x+=h)this.drawCoordinates(e,t,n,h)},ma.prototype.addCharToAtlas_=function(e){if(e.length===1){var t=this.currAtlas_,n=this.state_,h=this.measureCanvas_.getContext("2d");h.font=n.font;var x=Math.ceil(h.measureText(e).width*n.scale),S=t.atlas.add(e,x,t.height,function(f,u,r){f.font=n.font,f.fillStyle=n.fillColor,f.strokeStyle=n.strokeColor,f.lineWidth=n.lineWidth,f.lineCap=n.lineCap,f.lineJoin=n.lineJoin,f.miterLimit=n.miterLimit,f.textAlign="left",f.textBaseline="top",tn.CANVAS_LINE_DASH&&n.lineDash&&(f.setLineDash(n.lineDash),f.lineDashOffset=n.lineDashOffset),n.scale!==1&&f.setTransform(n.scale,0,0,n.scale,0,0),n.strokeColor&&f.strokeText(e,u,r),n.fillColor&&f.fillText(e,u,r)});S&&(t.width[e]=x)}},ma.prototype.finish=function(e){var t=e.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices=this.groupIndices,this.verticesBuffer=new Vi(this.vertices),this.indicesBuffer=new Vi(this.indices);var n={};this.createTextures(this.textures_,this.images_,n,t),this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.images_=null,this.atlases_={},this.currAtlas_=void 0,Ei.prototype.finish.call(this,e)},ma.prototype.setTextStyle=function(e){var t=this.state_,n=e.getFill(),h=e.getStroke();if(!e||!e.getText()||!n&&!h)this.text_="";else{if(!n)t.fillColor=null;else{var x=n.getColor();t.fillColor=fa.asColorLike(x||Fr.defaultFillStyle)}if(!h)t.strokeColor=null,t.lineWidth=0;else{var S=h.getColor();t.strokeColor=fa.asColorLike(S||Fr.defaultStrokeStyle),t.lineWidth=h.getWidth()||Fr.defaultLineWidth,t.lineCap=h.getLineCap()||Fr.defaultLineCap,t.lineDashOffset=h.getLineDashOffset()||Fr.defaultLineDashOffset,t.lineJoin=h.getLineJoin()||Fr.defaultLineJoin,t.miterLimit=h.getMiterLimit()||Fr.defaultMiterLimit;var f=h.getLineDash();t.lineDash=f?f.slice():Fr.defaultLineDash}t.font=e.getFont()||Fr.defaultFont,t.scale=e.getScale()||1,this.text_=e.getText();var u=Cn.TEXT_ALIGN[e.getTextAlign()],r=Cn.TEXT_ALIGN[e.getTextBaseline()];this.textAlign_=u===void 0?Fr.defaultTextAlign:u,this.textBaseline_=r===void 0?Fr.defaultTextBaseline:r,this.offsetX_=e.getOffsetX()||0,this.offsetY_=e.getOffsetY()||0,this.rotateWithView=!!e.getRotateWithView(),this.rotation=e.getRotation()||0,this.currAtlas_=this.getAtlas_(t)}},ma.prototype.getAtlas_=function(e){var t=[],n;for(n in e)(e[n]||e[n]===0)&&(Array.isArray(e[n])?t=t.concat(e[n]):t.push(e[n]));var h=this.calculateHash_(t);if(!this.atlases_[h]){var x=this.measureCanvas_.getContext("2d");x.font=e.font;var S=Math.ceil((x.measureText("M").width*1.5+e.lineWidth/2)*e.scale);this.atlases_[h]={atlas:new es({space:e.lineWidth+1}),width:{},height:S}}return this.atlases_[h]},ma.prototype.calculateHash_=function(e){var t,n,h="";for(t=0,n=e.length;t<n;++t)h+=e[t];return h},ma.prototype.getTextures=function(e){return this.textures_},ma.prototype.getHitDetectionTextures=function(){return this.textures_};var Wn=function(e,t,n){qo.call(this),this.maxExtent_=t,this.tolerance_=e,this.renderBuffer_=n,this.replaysByZIndex_={}};tt.inherits(Wn,qo),Wn.prototype.addDeclutter=function(e,t){},Wn.prototype.getDeleteResourcesFunction=function(e){var t=[],n;for(n in this.replaysByZIndex_){var h=this.replaysByZIndex_[n],x;for(x in h)t.push(h[x].getDeleteResourcesFunction(e))}return function(){for(var S=t.length,f,u=0;u<S;u++)f=t[u].apply(this,arguments);return f}},Wn.prototype.finish=function(e){var t;for(t in this.replaysByZIndex_){var n=this.replaysByZIndex_[t],h;for(h in n)n[h].finish(e)}},Wn.prototype.getReplay=function(e,t){var n=e!==void 0?e.toString():"0",h=this.replaysByZIndex_[n];h===void 0&&(h={},this.replaysByZIndex_[n]=h);var x=h[t];if(x===void 0){var S=Wn.BATCH_CONSTRUCTORS_[t];x=new S(this.tolerance_,this.maxExtent_),h[t]=x}return x},Wn.prototype.isEmpty=function(){return Zr.isEmpty(this.replaysByZIndex_)},Wn.prototype.replay=function(e,t,n,h,x,S,f,u){var r=Object.keys(this.replaysByZIndex_).map(Number);r.sort(Vr.numberSafeCompareFunction);var i,c,a,l,s,v;for(i=0,c=r.length;i<c;++i)for(s=this.replaysByZIndex_[r[i].toString()],a=0,l=Cn.ORDER.length;a<l;++a)v=s[Cn.ORDER[a]],v!==void 0&&v.replay(e,t,n,h,x,S,f,u,void 0,!1)},Wn.prototype.replayHitDetection_=function(e,t,n,h,x,S,f,u,r,i,c){var a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(function(y,_){return _-y});var l,s,v,d,p,o;for(l=0,s=a.length;l<s;++l)for(d=this.replaysByZIndex_[a[l].toString()],v=Cn.ORDER.length-1;v>=0;--v)if(p=d[Cn.ORDER[v]],p!==void 0&&(o=p.replay(e,t,n,h,x,S,f,u,r,i,c),o))return o},Wn.prototype.forEachFeatureAtCoordinate=function(e,t,n,h,x,S,f,u,r,i){var c=t.getGL();c.bindFramebuffer(c.FRAMEBUFFER,t.getHitDetectionFramebuffer());var a;return this.renderBuffer_!==void 0&&(a=Tt.buffer(Tt.createOrUpdateFromCoordinate(e),h*this.renderBuffer_)),this.replayHitDetection_(t,e,h,x,Wn.HIT_DETECTION_SIZE_,f,u,r,function(l){var s=new Uint8Array(4);if(c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,s),s[3]>0){var v=i(l);if(v)return v}},!0,a)},Wn.prototype.hasFeatureAtCoordinate=function(e,t,n,h,x,S,f,u,r){var i=t.getGL();i.bindFramebuffer(i.FRAMEBUFFER,t.getHitDetectionFramebuffer());var c=this.replayHitDetection_(t,e,h,x,Wn.HIT_DETECTION_SIZE_,f,u,r,function(a){var l=new Uint8Array(4);return i.readPixels(0,0,1,1,i.RGBA,i.UNSIGNED_BYTE,l),l[3]>0},!1);return c!==void 0},Wn.HIT_DETECTION_SIZE_=[1,1],Wn.BATCH_CONSTRUCTORS_={Circle:ia,Image:xo,LineString:qr,Polygon:yn,Text:ma};var Ci=function(e,t,n,h,x,S,f){On.call(this),this.context_=e,this.center_=t,this.extent_=S,this.pixelRatio_=f,this.size_=x,this.rotation_=h,this.resolution_=n,this.imageStyle_=null,this.fillStyle_=null,this.strokeStyle_=null,this.textStyle_=null};tt.inherits(Ci,On),Ci.prototype.drawText_=function(e,t){var n=this.context_,h=e.getReplay(0,Hr.TEXT);h.setTextStyle(this.textStyle_),h.drawText(t,null),h.finish(n);var x=1,S={},f,u=!1;h.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,x,S,f,u),h.getDeleteResourcesFunction(n)()},Ci.prototype.setStyle=function(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())},Ci.prototype.drawGeometry=function(e){var t=e.getType();switch(t){case Er.POINT:this.drawPoint(e,null);break;case Er.LINE_STRING:this.drawLineString(e,null);break;case Er.POLYGON:this.drawPolygon(e,null);break;case Er.MULTI_POINT:this.drawMultiPoint(e,null);break;case Er.MULTI_LINE_STRING:this.drawMultiLineString(e,null);break;case Er.MULTI_POLYGON:this.drawMultiPolygon(e,null);break;case Er.GEOMETRY_COLLECTION:this.drawGeometryCollection(e,null);break;case Er.CIRCLE:this.drawCircle(e,null);break}},Ci.prototype.drawFeature=function(e,t){var n=t.getGeometryFunction()(e);!n||!Tt.intersects(this.extent_,n.getExtent())||(this.setStyle(t),this.drawGeometry(n))},Ci.prototype.drawGeometryCollection=function(e,t){var n=e.getGeometriesArray(),h,x;for(h=0,x=n.length;h<x;++h)this.drawGeometry(n[h])},Ci.prototype.drawPoint=function(e,t){var n=this.context_,h=new Wn(1,this.extent_),x=h.getReplay(0,Hr.IMAGE);x.setImageStyle(this.imageStyle_),x.drawPoint(e,t),x.finish(n);var S=1,f={},u,r=!1;x.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,S,f,u,r),x.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(h,e)},Ci.prototype.drawMultiPoint=function(e,t){var n=this.context_,h=new Wn(1,this.extent_),x=h.getReplay(0,Hr.IMAGE);x.setImageStyle(this.imageStyle_),x.drawMultiPoint(e,t),x.finish(n);var S=1,f={},u,r=!1;x.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,S,f,u,r),x.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(h,e)},Ci.prototype.drawLineString=function(e,t){var n=this.context_,h=new Wn(1,this.extent_),x=h.getReplay(0,Hr.LINE_STRING);x.setFillStrokeStyle(null,this.strokeStyle_),x.drawLineString(e,t),x.finish(n);var S=1,f={},u,r=!1;x.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,S,f,u,r),x.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(h,e)},Ci.prototype.drawMultiLineString=function(e,t){var n=this.context_,h=new Wn(1,this.extent_),x=h.getReplay(0,Hr.LINE_STRING);x.setFillStrokeStyle(null,this.strokeStyle_),x.drawMultiLineString(e,t),x.finish(n);var S=1,f={},u,r=!1;x.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,S,f,u,r),x.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(h,e)},Ci.prototype.drawPolygon=function(e,t){var n=this.context_,h=new Wn(1,this.extent_),x=h.getReplay(0,Hr.POLYGON);x.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),x.drawPolygon(e,t),x.finish(n);var S=1,f={},u,r=!1;x.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,S,f,u,r),x.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(h,e)},Ci.prototype.drawMultiPolygon=function(e,t){var n=this.context_,h=new Wn(1,this.extent_),x=h.getReplay(0,Hr.POLYGON);x.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),x.drawMultiPolygon(e,t),x.finish(n);var S=1,f={},u,r=!1;x.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,S,f,u,r),x.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(h,e)},Ci.prototype.drawCircle=function(e,t){var n=this.context_,h=new Wn(1,this.extent_),x=h.getReplay(0,Hr.CIRCLE);x.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),x.drawCircle(e,t),x.finish(n);var S=1,f={},u,r=!1;x.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,S,f,u,r),x.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(h,e)},Ci.prototype.setImageStyle=function(e){this.imageStyle_=e},Ci.prototype.setFillStrokeStyle=function(e,t){this.fillStyle_=e,this.strokeStyle_=t},Ci.prototype.setTextStyle=function(e){this.textStyle_=e};var Gs={};Gs.fragment=new yo(tt.DEBUG_WEBGL?`precision mediump float;
varying vec2 v_texCoord;


uniform float u_opacity;
uniform sampler2D u_texture;

void main(void) {
  vec4 texColor = texture2D(u_texture, v_texCoord);
  gl_FragColor.rgb = texColor.rgb;
  gl_FragColor.a = texColor.a * u_opacity;
}
`:"precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"),Gs.vertex=new mo(tt.DEBUG_WEBGL?`varying vec2 v_texCoord;


attribute vec2 a_position;
attribute vec2 a_texCoord;

uniform mat4 u_texCoordMatrix;
uniform mat4 u_projectionMatrix;

void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);
  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;
}


`:"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}");var sc=function(e,t){this.u_texCoordMatrix=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_texCoordMatrix":"d"),this.u_projectionMatrix=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_projectionMatrix":"e"),this.u_opacity=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_opacity":"f"),this.u_texture=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_texture":"g"),this.a_position=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_position":"b"),this.a_texCoord=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_texCoord":"c")},mi=function(e,t){Yi.call(this,t),this.mapRenderer=e,this.arrayBuffer_=new Vi([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0,this.texCoordMatrix=Qt.create(),this.projectionMatrix=Qt.create(),this.tmpMat4_=so.create(),this.defaultLocations_=null};tt.inherits(mi,Yi),mi.prototype.bindFramebuffer=function(e,t){var n=this.mapRenderer.getGL();if(this.framebufferDimension===void 0||this.framebufferDimension!=t){var h=(function(f,u,r){f.isContextLost()||(f.deleteFramebuffer(u),f.deleteTexture(r))}).bind(null,n,this.framebuffer,this.texture);e.postRenderFunctions.push(h);var x=Yn.createEmptyTexture(n,t,t),S=n.createFramebuffer();n.bindFramebuffer(Bt.FRAMEBUFFER,S),n.framebufferTexture2D(Bt.FRAMEBUFFER,Bt.COLOR_ATTACHMENT0,Bt.TEXTURE_2D,x,0),this.texture=x,this.framebuffer=S,this.framebufferDimension=t}else n.bindFramebuffer(Bt.FRAMEBUFFER,this.framebuffer)},mi.prototype.composeFrame=function(e,t,n){this.dispatchComposeEvent_(wa.PRECOMPOSE,n,e),n.bindBuffer(Bt.ARRAY_BUFFER,this.arrayBuffer_);var h=n.getGL(),x=Gs.fragment,S=Gs.vertex,f=n.getProgram(x,S),u;this.defaultLocations_?u=this.defaultLocations_:(u=new sc(h,f),this.defaultLocations_=u),n.useProgram(f)&&(h.enableVertexAttribArray(u.a_position),h.vertexAttribPointer(u.a_position,2,Bt.FLOAT,!1,16,0),h.enableVertexAttribArray(u.a_texCoord),h.vertexAttribPointer(u.a_texCoord,2,Bt.FLOAT,!1,16,8),h.uniform1i(u.u_texture,0)),h.uniformMatrix4fv(u.u_texCoordMatrix,!1,so.fromTransform(this.tmpMat4_,this.getTexCoordMatrix())),h.uniformMatrix4fv(u.u_projectionMatrix,!1,so.fromTransform(this.tmpMat4_,this.getProjectionMatrix())),h.uniform1f(u.u_opacity,t.opacity),h.bindTexture(Bt.TEXTURE_2D,this.getTexture()),h.drawArrays(Bt.TRIANGLE_STRIP,0,4),this.dispatchComposeEvent_(wa.POSTCOMPOSE,n,e)},mi.prototype.dispatchComposeEvent_=function(e,t,n){var h=this.getLayer();if(h.hasListener(e)){var x=n.viewState,S=x.resolution,f=n.pixelRatio,u=n.extent,r=x.center,i=x.rotation,c=n.size,a=new Ci(t,r,S,i,c,u,f),l=new fs(e,a,n,null,t);h.dispatchEvent(l)}},mi.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix},mi.prototype.getTexture=function(){return this.texture},mi.prototype.getProjectionMatrix=function(){return this.projectionMatrix},mi.prototype.handleWebGLContextLost=function(){this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0},mi.prototype.prepareFrame=function(e,t,n){},mi.prototype.forEachLayerAtPixel=function(e,t,n,h){};var xa=function(e,t){mi.call(this,e,t),this.image_=null,this.hitCanvasContext_=null,this.hitTransformationMatrix_=null};tt.inherits(xa,mi),xa.handles=function(e,t){return e===ra.WEBGL&&t.getType()===Oa.IMAGE},xa.create=function(e,t){return new xa(e,t)},xa.prototype.createTexture_=function(e){var t=e.getImage(),n=this.mapRenderer.getGL();return Yn.createTexture(n,t,Bt.CLAMP_TO_EDGE,Bt.CLAMP_TO_EDGE)},xa.prototype.forEachFeatureAtCoordinate=function(e,t,n,h,x){var S=this.getLayer(),f=S.getSource(),u=t.viewState.resolution,r=t.viewState.rotation,i=t.skippedFeatureUids;return f.forEachFeatureAtCoordinate(e,u,r,n,i,function(c){return h.call(x,c,S)})},xa.prototype.prepareFrame=function(e,t,n){var h=this.mapRenderer.getGL(),x=e.pixelRatio,S=e.viewState,f=S.center,u=S.resolution,r=S.rotation,i=this.image_,c=this.texture,a=this.getLayer(),l=a.getSource(),s=e.viewHints,v=e.extent;if(t.extent!==void 0&&(v=Tt.getIntersection(v,t.extent)),!s[Tn.ANIMATING]&&!s[Tn.INTERACTING]&&!Tt.isEmpty(v)){var d=S.projection;if(!tt.ENABLE_RASTER_REPROJECTION){var p=l.getProjection();p&&(d=p)}var o=l.getImage(v,u,x,d);if(o){var y=this.loadImage(o);if(y&&(i=o,c=this.createTexture_(o),this.texture)){var _=(function(b,w){b.isContextLost()||b.deleteTexture(w)}).bind(null,h,this.texture);e.postRenderFunctions.push(_)}}}if(i){var E=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(E.width,E.height,x,f,u,r,i.getExtent()),this.hitTransformationMatrix_=null;var M=this.texCoordMatrix;Qt.reset(M),Qt.scale(M,1,-1),Qt.translate(M,0,-1),this.image_=i,this.texture=c,this.updateLogos(e,l)}return!!i},xa.prototype.updateProjectionMatrix_=function(e,t,n,h,x,S,f){var u=e*x,r=t*x,i=this.projectionMatrix;Qt.reset(i),Qt.scale(i,n*2/u,n*2/r),Qt.rotate(i,-S),Qt.translate(i,f[0]-h[0],f[1]-h[1]),Qt.scale(i,(f[2]-f[0])/2,(f[3]-f[1])/2),Qt.translate(i,1,1)},xa.prototype.hasFeatureAtCoordinate=function(e,t){var n=this.forEachFeatureAtCoordinate(e,t,0,Qn.TRUE,this);return n!==void 0},xa.prototype.forEachLayerAtPixel=function(e,t,n,h){if(!(!this.image_||!this.image_.getImage()))if(this.getLayer().getSource().forEachFeatureAtCoordinate!==tt.nullFunction){var x=Qt.apply(t.pixelToCoordinateTransform,e.slice()),S=this.forEachFeatureAtCoordinate(x,t,0,Qn.TRUE,this);return S?n.call(h,this.getLayer(),null):void 0}else{var f=[this.image_.getImage().width,this.image_.getImage().height];this.hitTransformationMatrix_||(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(t.size,f));var u=Qt.apply(this.hitTransformationMatrix_,e.slice());if(u[0]<0||u[0]>f[0]||u[1]<0||u[1]>f[1])return;this.hitCanvasContext_||(this.hitCanvasContext_=gn.createCanvasContext2D(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),u[0],u[1],1,1,0,0,1,1);var r=this.hitCanvasContext_.getImageData(0,0,1,1).data;return r[3]>0?n.call(h,this.getLayer(),r):void 0}},xa.prototype.getHitTransformationMatrix_=function(e,t){var n=Qt.create();Qt.translate(n,-1,-1),Qt.scale(n,2/e[0],2/e[1]),Qt.translate(n,0,e[1]),Qt.scale(n,1,-1);var h=Qt.invert(this.projectionMatrix.slice()),x=Qt.create();return Qt.translate(x,0,t[1]),Qt.scale(x,1,-1),Qt.scale(x,t[0]/2,t[1]/2),Qt.translate(x,1,1),Qt.multiply(x,h),Qt.multiply(x,n),x};var ri=function(e,t){Sn.call(this,e,t),this.canvas_=document.createElement("CANVAS"),this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=hi.CLASS_UNSELECTABLE,e.insertBefore(this.canvas_,e.childNodes[0]||null),this.clipTileCanvasWidth_=0,this.clipTileCanvasHeight_=0,this.clipTileContext_=gn.createCanvasContext2D(),this.renderedVisible_=!0,this.gl_=Bt.getContext(this.canvas_,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.context_=new Yn(this.canvas_,this.gl_),Jt.listen(this.canvas_,Os.LOST,this.handleWebGLContextLost,this),Jt.listen(this.canvas_,Os.RESTORED,this.handleWebGLContextRestored,this),this.textureCache_=new ti,this.focus_=null,this.tileTextureQueue_=new Hn((function(n){var h=n[1],x=n[2],S=h[0]-this.focus_[0],f=h[1]-this.focus_[1];return 65536*Math.log(x)+Math.sqrt(S*S+f*f)/x}).bind(this),function(n){return n[0].getKey()}),this.loadNextTileTexture_=(function(n,h){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var x=this.tileTextureQueue_.dequeue(),S=x[0],f=x[3],u=x[4];this.bindTileTexture(S,f,u,Bt.LINEAR,Bt.LINEAR)}return!1}).bind(this),this.textureCacheFrameMarkerCount_=0,this.initializeGL_()};tt.inherits(ri,Sn),ri.handles=function(e){return tn.WEBGL&&e===ra.WEBGL},ri.create=function(e,t){return new ri(e,t)},ri.prototype.bindTileTexture=function(e,t,n,h,x){var S=this.getGL(),f=e.getKey();if(this.textureCache_.containsKey(f)){var u=this.textureCache_.get(f);S.bindTexture(Bt.TEXTURE_2D,u.texture),u.magFilter!=h&&(S.texParameteri(Bt.TEXTURE_2D,Bt.TEXTURE_MAG_FILTER,h),u.magFilter=h),u.minFilter!=x&&(S.texParameteri(Bt.TEXTURE_2D,Bt.TEXTURE_MIN_FILTER,x),u.minFilter=x)}else{var r=S.createTexture();if(S.bindTexture(Bt.TEXTURE_2D,r),n>0){var i=this.clipTileContext_.canvas,c=this.clipTileContext_;this.clipTileCanvasWidth_!==t[0]||this.clipTileCanvasHeight_!==t[1]?(i.width=t[0],i.height=t[1],this.clipTileCanvasWidth_=t[0],this.clipTileCanvasHeight_=t[1]):c.clearRect(0,0,t[0],t[1]),c.drawImage(e.getImage(),n,n,t[0],t[1],0,0,t[0],t[1]),S.texImage2D(Bt.TEXTURE_2D,0,Bt.RGBA,Bt.RGBA,Bt.UNSIGNED_BYTE,i)}else S.texImage2D(Bt.TEXTURE_2D,0,Bt.RGBA,Bt.RGBA,Bt.UNSIGNED_BYTE,e.getImage());S.texParameteri(Bt.TEXTURE_2D,Bt.TEXTURE_MAG_FILTER,h),S.texParameteri(Bt.TEXTURE_2D,Bt.TEXTURE_MIN_FILTER,x),S.texParameteri(Bt.TEXTURE_2D,Bt.TEXTURE_WRAP_S,Bt.CLAMP_TO_EDGE),S.texParameteri(Bt.TEXTURE_2D,Bt.TEXTURE_WRAP_T,Bt.CLAMP_TO_EDGE),this.textureCache_.set(f,{texture:r,magFilter:h,minFilter:x})}},ri.prototype.dispatchComposeEvent_=function(e,t){var n=this.getMap();if(n.hasListener(e)){var h=this.context_,x=t.extent,S=t.size,f=t.viewState,u=t.pixelRatio,r=f.resolution,i=f.center,c=f.rotation,a=new Ci(h,i,r,c,S,x,u),l=new fs(e,a,t,null,h);n.dispatchEvent(l)}},ri.prototype.disposeInternal=function(){var e=this.getGL();e.isContextLost()||this.textureCache_.forEach(function(t){t&&e.deleteTexture(t.texture)}),this.context_.dispose(),Sn.prototype.disposeInternal.call(this)},ri.prototype.expireCache_=function(e,t){for(var n=this.getGL(),h;this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>tt.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK;){if(h=this.textureCache_.peekLast(),h)n.deleteTexture(h.texture);else{if(+this.textureCache_.peekLastKey()==t.index)break;--this.textureCacheFrameMarkerCount_}this.textureCache_.pop()}},ri.prototype.getContext=function(){return this.context_},ri.prototype.getGL=function(){return this.gl_},ri.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_},ri.prototype.getType=function(){return ra.WEBGL},ri.prototype.handleWebGLContextLost=function(e){e.preventDefault(),this.textureCache_.clear(),this.textureCacheFrameMarkerCount_=0;var t=this.getLayerRenderers();for(var n in t){var h=t[n];h.handleWebGLContextLost()}},ri.prototype.handleWebGLContextRestored=function(){this.initializeGL_(),this.getMap().render()},ri.prototype.initializeGL_=function(){var e=this.gl_;e.activeTexture(Bt.TEXTURE0),e.blendFuncSeparate(Bt.SRC_ALPHA,Bt.ONE_MINUS_SRC_ALPHA,Bt.ONE,Bt.ONE_MINUS_SRC_ALPHA),e.disable(Bt.CULL_FACE),e.disable(Bt.DEPTH_TEST),e.disable(Bt.SCISSOR_TEST),e.disable(Bt.STENCIL_TEST)},ri.prototype.isTileTextureLoaded=function(e){return this.textureCache_.containsKey(e.getKey())},ri.prototype.renderFrame=function(e){var t=this.getContext(),n=this.getGL();if(n.isContextLost())return!1;if(!e)return this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1),!1;this.focus_=e.focus,this.textureCache_.set((-e.index).toString(),null),++this.textureCacheFrameMarkerCount_,this.dispatchComposeEvent_(wa.PRECOMPOSE,e);var h=[],x=e.layerStatesArray;Vr.stableSort(x,Sn.sortByZIndex);var S=e.viewState.resolution,f,u,r,i;for(f=0,u=x.length;f<u;++f)i=x[f],li.visibleAtResolution(i,S)&&i.sourceState==Yo.READY&&(r=this.getLayerRenderer(i.layer),r.prepareFrame(e,i,t)&&h.push(i));var c=e.size[0]*e.pixelRatio,a=e.size[1]*e.pixelRatio;for((this.canvas_.width!=c||this.canvas_.height!=a)&&(this.canvas_.width=c,this.canvas_.height=a),n.bindFramebuffer(Bt.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(Bt.COLOR_BUFFER_BIT),n.enable(Bt.BLEND),n.viewport(0,0,this.canvas_.width,this.canvas_.height),f=0,u=h.length;f<u;++f)i=h[f],r=this.getLayerRenderer(i.layer),r.composeFrame(e,i,t);this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.calculateMatrices2D(e),this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>tt.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK&&e.postRenderFunctions.push(this.expireCache_.bind(this)),this.tileTextureQueue_.isEmpty()||(e.postRenderFunctions.push(this.loadNextTileTexture_),e.animate=!0),this.dispatchComposeEvent_(wa.POSTCOMPOSE,e),this.scheduleRemoveUnusedLayerRenderers(e),this.scheduleExpireIconCache(e)},ri.prototype.forEachFeatureAtCoordinate=function(e,t,n,h,x,S,f){var u;if(this.getGL().isContextLost())return!1;var r=t.viewState,i=t.layerStatesArray,c=i.length,a;for(a=c-1;a>=0;--a){var l=i[a],s=l.layer;if(li.visibleAtResolution(l,r.resolution)&&S.call(f,s)){var v=this.getLayerRenderer(s);if(u=v.forEachFeatureAtCoordinate(e,t,n,h,x),u)return u}}},ri.prototype.hasFeatureAtCoordinate=function(e,t,n,h,x){var S=!1;if(this.getGL().isContextLost())return!1;var f=t.viewState,u=t.layerStatesArray,r=u.length,i;for(i=r-1;i>=0;--i){var c=u[i],a=c.layer;if(li.visibleAtResolution(c,f.resolution)&&h.call(x,a)){var l=this.getLayerRenderer(a);if(S=l.hasFeatureAtCoordinate(e,t),S)return!0}}return S},ri.prototype.forEachLayerAtPixel=function(e,t,n,h,x,S){if(this.getGL().isContextLost())return!1;var f=t.viewState,u,r=t.layerStatesArray,i=r.length,c;for(c=i-1;c>=0;--c){var a=r[c],l=a.layer;if(li.visibleAtResolution(a,f.resolution)&&x.call(h,l)){var s=this.getLayerRenderer(l);if(u=s.forEachLayerAtPixel(e,t,n,h),u)return u}}};var Hs={};Hs.fragment=new yo(tt.DEBUG_WEBGL?`precision mediump float;
varying vec2 v_texCoord;


uniform sampler2D u_texture;

void main(void) {
  gl_FragColor = texture2D(u_texture, v_texCoord);
}
`:"precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"),Hs.vertex=new mo(tt.DEBUG_WEBGL?`varying vec2 v_texCoord;


attribute vec2 a_position;
attribute vec2 a_texCoord;
uniform vec4 u_tileOffset;

void main(void) {
  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);
  v_texCoord = a_texCoord;
}


`:"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}");var lc=function(e,t){this.u_tileOffset=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_tileOffset":"d"),this.u_texture=e.getUniformLocation(t,tt.DEBUG_WEBGL?"u_texture":"e"),this.a_position=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_position":"b"),this.a_texCoord=e.getAttribLocation(t,tt.DEBUG_WEBGL?"a_texCoord":"c")},Xa=function(e,t){mi.call(this,e,t),this.fragmentShader_=Hs.fragment,this.vertexShader_=Hs.vertex,this.locations_=null,this.renderArrayBuffer_=new Vi([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,this.tmpSize_=[0,0]};tt.inherits(Xa,mi),Xa.handles=function(e,t){return e===ra.WEBGL&&t.getType()===Oa.TILE},Xa.create=function(e,t){return new Xa(e,t)},Xa.prototype.disposeInternal=function(){var e=this.mapRenderer.getContext();e.deleteBuffer(this.renderArrayBuffer_),mi.prototype.disposeInternal.call(this)},Xa.prototype.createLoadedTileFinder=function(e,t,n){var h=this.mapRenderer;return function(x,S){function f(u){var r=h.isTileTextureLoaded(u);return r&&(n[x]||(n[x]={}),n[x][u.tileCoord.toString()]=u),r}return e.forEachLoadedTile(t,x,S,f)}},Xa.prototype.handleWebGLContextLost=function(){mi.prototype.handleWebGLContextLost.call(this),this.locations_=null},Xa.prototype.prepareFrame=function(e,t,n){var h=this.mapRenderer,x=n.getGL(),S=e.viewState,f=S.projection,u=this.getLayer(),r=u.getSource(),i=r.getTileGridForProjection(f),c=i.getZForResolution(S.resolution),a=i.getResolution(c),l=r.getTilePixelSize(c,e.pixelRatio,f),s=l[0]/na.toSize(i.getTileSize(c),this.tmpSize_)[0],v=a/s,d=r.getTilePixelRatio(s)*r.getGutter(f),p=S.center,o=e.extent,y=i.getTileRangeForExtentAndZ(o,c),_;if(this.renderedTileRange_&&this.renderedTileRange_.equals(y)&&this.renderedRevision_==r.getRevision())_=this.renderedFramebufferExtent_;else{var E=y.getSize(),M=Math.max(E[0]*l[0],E[1]*l[1]),b=wr.roundUpToPowerOfTwo(M),w=v*b,A=i.getOrigin(c),R=A[0]+y.minX*l[0]*v,T=A[1]+y.minY*l[1]*v;_=[R,T,R+w,T+w],this.bindFramebuffer(e,b),x.viewport(0,0,b,b),x.clearColor(0,0,0,0),x.clear(Bt.COLOR_BUFFER_BIT),x.disable(Bt.BLEND);var C=n.getProgram(this.fragmentShader_,this.vertexShader_);n.useProgram(C),this.locations_||(this.locations_=new lc(x,C)),n.bindBuffer(Bt.ARRAY_BUFFER,this.renderArrayBuffer_),x.enableVertexAttribArray(this.locations_.a_position),x.vertexAttribPointer(this.locations_.a_position,2,Bt.FLOAT,!1,16,0),x.enableVertexAttribArray(this.locations_.a_texCoord),x.vertexAttribPointer(this.locations_.a_texCoord,2,Bt.FLOAT,!1,16,8),x.uniform1i(this.locations_.u_texture,0);var m={};m[c]={};var L=this.createLoadedTileFinder(r,f,m),D=u.getUseInterimTilesOnError(),O=!0,N=Tt.createEmpty(),V=new Mi(0,0,0,0),X,k,Z,B,J,ne,oe,Y;for(ne=y.minX;ne<=y.maxX;++ne)for(oe=y.minY;oe<=y.maxY;++oe)if(B=r.getTile(c,ne,oe,s,f),!(t.extent!==void 0&&(Y=i.getTileCoordExtent(B.tileCoord,N),!Tt.intersects(Y,t.extent)))){if(J=B.getState(),k=J==Tr.LOADED||J==Tr.EMPTY||J==Tr.ERROR&&!D,k||(B=B.getInterimTile()),J=B.getState(),J==Tr.LOADED){if(h.isTileTextureLoaded(B)){m[c][B.tileCoord.toString()]=B;continue}}else if(J==Tr.EMPTY||J==Tr.ERROR&&!D)continue;O=!1,Z=i.forEachTileCoordParentTileRange(B.tileCoord,L,null,V,N),Z||(X=i.getTileCoordChildTileRange(B.tileCoord,V,N),X&&L(c+1,X))}var G=Object.keys(m).map(Number);G.sort(Vr.numberSafeCompareFunction);var K=new Float32Array(4),ee,ie,re,se;for(ee=0,ie=G.length;ee<ie;++ee){se=m[G[ee]];for(re in se)B=se[re],Y=i.getTileCoordExtent(B.tileCoord,N),K[0]=2*(Y[2]-Y[0])/w,K[1]=2*(Y[3]-Y[1])/w,K[2]=2*(Y[0]-_[0])/w-1,K[3]=2*(Y[1]-_[1])/w-1,x.uniform4fv(this.locations_.u_tileOffset,K),h.bindTileTexture(B,l,d*s,Bt.LINEAR,Bt.LINEAR),x.drawArrays(Bt.TRIANGLE_STRIP,0,4)}O?(this.renderedTileRange_=y,this.renderedFramebufferExtent_=_,this.renderedRevision_=r.getRevision()):(this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,e.animate=!0)}this.updateUsedTiles(e.usedTiles,r,c,y);var ge=h.getTileTextureQueue();this.manageTilePyramid(e,r,i,s,f,o,c,u.getPreload(),function(Se){Se.getState()==Tr.LOADED&&!h.isTileTextureLoaded(Se)&&!ge.isKeyQueued(Se.getKey())&&ge.enqueue([Se,i.getTileCoordCenter(Se.tileCoord),i.getResolution(Se.tileCoord[0]),l,d*s])},this),this.scheduleExpireCache(e,r),this.updateLogos(e,r);var xe=this.texCoordMatrix;return Qt.reset(xe),Qt.translate(xe,(Math.round(p[0]/a)*a-_[0])/(_[2]-_[0]),(Math.round(p[1]/a)*a-_[1])/(_[3]-_[1])),S.rotation!==0&&Qt.rotate(xe,S.rotation),Qt.scale(xe,e.size[0]*S.resolution/(_[2]-_[0]),e.size[1]*S.resolution/(_[3]-_[1])),Qt.translate(xe,-.5,-.5),!0},Xa.prototype.forEachLayerAtPixel=function(e,t,n,h){if(this.framebuffer){var x=[e[0]/t.size[0],(t.size[1]-e[1])/t.size[1]],S=Qt.apply(this.texCoordMatrix,x.slice()),f=[S[0]*this.framebufferDimension,S[1]*this.framebufferDimension],u=this.mapRenderer.getContext().getGL();u.bindFramebuffer(u.FRAMEBUFFER,this.framebuffer);var r=new Uint8Array(4);if(u.readPixels(f[0],f[1],1,1,u.RGBA,u.UNSIGNED_BYTE,r),r[3]>0)return n.call(h,this.getLayer(),r)}};var ca=function(e,t){mi.call(this,e,t),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Tt.createEmpty(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.layerState_=null};tt.inherits(ca,mi),ca.handles=function(e,t){return e===ra.WEBGL&&t.getType()===Oa.VECTOR},ca.create=function(e,t){return new ca(e,t)},ca.prototype.composeFrame=function(e,t,n){this.layerState_=t;var h=e.viewState,x=this.replayGroup_,S=e.size,f=e.pixelRatio,u=this.mapRenderer.getGL();x&&!x.isEmpty()&&(u.enable(u.SCISSOR_TEST),u.scissor(0,0,S[0]*f,S[1]*f),x.replay(n,h.center,h.resolution,h.rotation,S,f,t.opacity,t.managed?e.skippedFeatureUids:{}),u.disable(u.SCISSOR_TEST))},ca.prototype.disposeInternal=function(){var e=this.replayGroup_;if(e){var t=this.mapRenderer.getContext();e.getDeleteResourcesFunction(t)(),this.replayGroup_=null}mi.prototype.disposeInternal.call(this)},ca.prototype.forEachFeatureAtCoordinate=function(e,t,n,h,x){if(!(!this.replayGroup_||!this.layerState_)){var S=this.mapRenderer.getContext(),f=t.viewState,u=this.getLayer(),r=this.layerState_,i={};return this.replayGroup_.forEachFeatureAtCoordinate(e,S,f.center,f.resolution,f.rotation,t.size,t.pixelRatio,r.opacity,{},function(c){var a=tt.getUid(c).toString();if(!(a in i))return i[a]=!0,h.call(x,c,u)})}},ca.prototype.hasFeatureAtCoordinate=function(e,t){if(!this.replayGroup_||!this.layerState_)return!1;var n=this.mapRenderer.getContext(),h=t.viewState,x=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(e,n,h.center,h.resolution,h.rotation,t.size,t.pixelRatio,x.opacity,t.skippedFeatureUids)},ca.prototype.forEachLayerAtPixel=function(e,t,n,h){var x=Qt.apply(t.pixelToCoordinateTransform,e.slice()),S=this.hasFeatureAtCoordinate(x,t);if(S)return n.call(h,this.getLayer(),null)},ca.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},ca.prototype.prepareFrame=function(e,t,n){var h=this.getLayer(),x=h.getSource();this.updateLogos(e,x);var S=e.viewHints[Tn.ANIMATING],f=e.viewHints[Tn.INTERACTING],u=h.getUpdateWhileAnimating(),r=h.getUpdateWhileInteracting();if(!this.dirty_&&!u&&S||!r&&f)return!0;var i=e.extent,c=e.viewState,a=c.projection,l=c.resolution,s=e.pixelRatio,v=h.getRevision(),d=h.getRenderBuffer(),p=h.getRenderOrder();p===void 0&&(p=Yr.defaultOrder);var o=Tt.buffer(i,d*l);if(!this.dirty_&&this.renderedResolution_==l&&this.renderedRevision_==v&&this.renderedRenderOrder_==p&&Tt.containsExtent(this.renderedExtent_,o))return!0;this.replayGroup_&&e.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(n)),this.dirty_=!1;var y=new Wn(Yr.getTolerance(l,s),o,h.getRenderBuffer());x.loadFeatures(o,l,a);var _=function(M){var b,w=M.getStyleFunction();if(w?b=w.call(M,l):(w=h.getStyleFunction(),w&&(b=w(M,l))),b){var A=this.renderFeature(M,l,s,b,y);this.dirty_=this.dirty_||A}};if(p){var E=[];x.forEachFeatureInExtent(o,function(M){E.push(M)},this),E.sort(p),E.forEach(_,this)}else x.forEachFeatureInExtent(o,_,this);return y.finish(n),this.renderedResolution_=l,this.renderedRevision_=v,this.renderedRenderOrder_=p,this.renderedExtent_=o,this.replayGroup_=y,!0},ca.prototype.renderFeature=function(e,t,n,h,x){if(!h)return!1;var S=!1;if(Array.isArray(h))for(var f=h.length-1,u=0;f>=u;--f)S=Yr.renderFeature(x,e,h[f],Yr.getSquaredTolerance(t,n),this.handleStyleImageChange_,this)||S;else S=Yr.renderFeature(x,e,h,Yr.getSquaredTolerance(t,n),this.handleStyleImageChange_,this)||S;return S},tt.ENABLE_CANVAS&&(Ai.register(Zo.MAP_RENDERER,Va),Ai.registerMultiple(Zo.LAYER_RENDERER,[Pa,Ni,ya,vi])),tt.ENABLE_WEBGL&&(Ai.register(Zo.MAP_RENDERER,ri),Ai.registerMultiple(Zo.LAYER_RENDERER,[xa,Xa,ca]));var au=function(e){e=Zr.assign({},e),e.controls||(e.controls=Jl.defaults()),e.interactions||(e.interactions=$l.defaults()),br.call(this,e)};tt.inherits(au,br);var ha={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},Xr=function(e){Or.call(this),this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("DIV"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+hi.CLASS_SELECTABLE,this.element.style.position="absolute",this.autoPan=e.autoPan!==void 0?e.autoPan:!1,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=e.autoPanMargin!==void 0?e.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,Jt.listen(this,Or.getChangeEventType(Xr.Property.ELEMENT),this.handleElementChanged,this),Jt.listen(this,Or.getChangeEventType(Xr.Property.MAP),this.handleMapChanged,this),Jt.listen(this,Or.getChangeEventType(Xr.Property.OFFSET),this.handleOffsetChanged,this),Jt.listen(this,Or.getChangeEventType(Xr.Property.POSITION),this.handlePositionChanged,this),Jt.listen(this,Or.getChangeEventType(Xr.Property.POSITIONING),this.handlePositioningChanged,this),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning!==void 0?e.positioning:ha.TOP_LEFT),e.position!==void 0&&this.setPosition(e.position)};tt.inherits(Xr,Or),Xr.prototype.getElement=function(){return this.get(Xr.Property.ELEMENT)},Xr.prototype.getId=function(){return this.id},Xr.prototype.getMap=function(){return this.get(Xr.Property.MAP)},Xr.prototype.getOffset=function(){return this.get(Xr.Property.OFFSET)},Xr.prototype.getPosition=function(){return this.get(Xr.Property.POSITION)},Xr.prototype.getPositioning=function(){return this.get(Xr.Property.POSITIONING)},Xr.prototype.handleElementChanged=function(){gn.removeChildren(this.element);var e=this.getElement();e&&this.element.appendChild(e)},Xr.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(gn.removeNode(this.element),Jt.unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey=Jt.listen(e,ls.POSTRENDER,this.render,this),this.updatePixelPosition();var t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element)}},Xr.prototype.render=function(){this.updatePixelPosition()},Xr.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},Xr.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(Xr.Property.POSITION)&&this.autoPan&&this.panIntoView()},Xr.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},Xr.prototype.setElement=function(e){this.set(Xr.Property.ELEMENT,e)},Xr.prototype.setMap=function(e){this.set(Xr.Property.MAP,e)},Xr.prototype.setOffset=function(e){this.set(Xr.Property.OFFSET,e)},Xr.prototype.setPosition=function(e){this.set(Xr.Property.POSITION,e)},Xr.prototype.panIntoView=function(){var e=this.getMap();if(!(!e||!e.getTargetElement())){var t=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),h=this.getRect(n,[gn.outerWidth(n),gn.outerHeight(n)]),x=this.autoPanMargin;if(!Tt.containsExtent(t,h)){var S=h[0]-t[0],f=t[2]-h[2],u=h[1]-t[1],r=t[3]-h[3],i=[0,0];if(S<0?i[0]=S-x:f<0&&(i[0]=Math.abs(f)+x),u<0?i[1]=u-x:r<0&&(i[1]=Math.abs(r)+x),i[0]!==0||i[1]!==0){var c=e.getView().getCenter(),a=e.getPixelFromCoordinate(c),l=[a[0]+i[0],a[1]+i[1]];e.getView().animate({center:e.getCoordinateFromPixel(l),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},Xr.prototype.getRect=function(e,t){var n=e.getBoundingClientRect(),h=n.left+window.pageXOffset,x=n.top+window.pageYOffset;return[h,x,h+t[0],x+t[1]]},Xr.prototype.setPositioning=function(e){this.set(Xr.Property.POSITIONING,e)},Xr.prototype.setVisible=function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)},Xr.prototype.updatePixelPosition=function(){var e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}var n=e.getPixelFromCoordinate(t),h=e.getSize();this.updateRenderedPosition(n,h)},Xr.prototype.updateRenderedPosition=function(e,t){var n=this.element.style,h=this.getOffset(),x=this.getPositioning();this.setVisible(!0);var S=h[0],f=h[1];if(x==ha.BOTTOM_RIGHT||x==ha.CENTER_RIGHT||x==ha.TOP_RIGHT){this.rendered.left_!==""&&(this.rendered.left_=n.left="");var u=Math.round(t[0]-e[0]-S)+"px";this.rendered.right_!=u&&(this.rendered.right_=n.right=u)}else{this.rendered.right_!==""&&(this.rendered.right_=n.right=""),(x==ha.BOTTOM_CENTER||x==ha.CENTER_CENTER||x==ha.TOP_CENTER)&&(S-=this.element.offsetWidth/2);var r=Math.round(e[0]+S)+"px";this.rendered.left_!=r&&(this.rendered.left_=n.left=r)}if(x==ha.BOTTOM_LEFT||x==ha.BOTTOM_CENTER||x==ha.BOTTOM_RIGHT){this.rendered.top_!==""&&(this.rendered.top_=n.top="");var i=Math.round(t[1]-e[1]-f)+"px";this.rendered.bottom_!=i&&(this.rendered.bottom_=n.bottom=i)}else{this.rendered.bottom_!==""&&(this.rendered.bottom_=n.bottom=""),(x==ha.CENTER_LEFT||x==ha.CENTER_CENTER||x==ha.CENTER_RIGHT)&&(f-=this.element.offsetHeight/2);var c=Math.round(e[1]+f)+"px";this.rendered.top_!=c&&(this.rendered.top_=n.top=c)}},Xr.prototype.getOptions=function(){return this.options},Xr.Property={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};var Si=function(e,t,n){$n.call(this);var h=n||{};this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=h.transition===void 0?250:h.transition,this.transitionStarts_={}};tt.inherits(Si,$n),Si.prototype.changed=function(){this.dispatchEvent(kr.CHANGE)},Si.prototype.getKey=function(){return this.key+"/"+this.tileCoord},Si.prototype.getInterimTile=function(){if(!this.interimTile)return this;var e=this.interimTile;do{if(e.getState()==Tr.LOADED)return e;e=e.interimTile}while(e);return this},Si.prototype.refreshInterimChain=function(){if(this.interimTile){var e=this.interimTile,t=this;do{if(e.getState()==Tr.LOADED){e.interimTile=null;break}else e.getState()==Tr.LOADING?t=e:e.getState()==Tr.IDLE?t.interimTile=e.interimTile:t=e;e=t.interimTile}while(e)}},Si.prototype.getTileCoord=function(){return this.tileCoord},Si.prototype.getState=function(){return this.state},Si.prototype.setState=function(e){this.state=e,this.changed()},Si.prototype.load=function(){},Si.prototype.getAlpha=function(e,t){if(!this.transition_)return 1;var n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;var h=t-n+1e3/60;return h>=this.transition_?1:ui.easeIn(h/this.transition_)},Si.prototype.inTransition=function(e){return this.transition_?this.transitionStarts_[e]!==-1:!1},Si.prototype.endTransition=function(e){this.transition_&&(this.transitionStarts_[e]=-1)};var _a=function(e,t,n,h,x,S){Si.call(this,e,t,S),this.crossOrigin_=h,this.src_=n,this.image_=new Image,h!==null&&(this.image_.crossOrigin=h),this.imageListenerKeys_=null,this.tileLoadFunction_=x};tt.inherits(_a,Si),_a.prototype.disposeInternal=function(){this.state==Tr.LOADING&&(this.unlistenImage_(),this.image_=_a.getBlankImage()),this.interimTile&&this.interimTile.dispose(),this.state=Tr.ABORT,this.changed(),Si.prototype.disposeInternal.call(this)},_a.prototype.getImage=function(){return this.image_},_a.prototype.getKey=function(){return this.src_},_a.prototype.handleImageError_=function(){this.state=Tr.ERROR,this.unlistenImage_(),this.image_=_a.getBlankImage(),this.changed()},_a.prototype.handleImageLoad_=function(){this.image_.naturalWidth&&this.image_.naturalHeight?this.state=Tr.LOADED:this.state=Tr.EMPTY,this.unlistenImage_(),this.changed()},_a.prototype.load=function(){this.state==Tr.ERROR&&(this.state=Tr.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Tr.IDLE&&(this.state=Tr.LOADING,this.changed(),this.imageListenerKeys_=[Jt.listenOnce(this.image_,kr.ERROR,this.handleImageError_,this),Jt.listenOnce(this.image_,kr.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},_a.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(Jt.unlistenByKey),this.imageListenerKeys_=null},_a.getBlankImage=function(){var e=gn.createCanvasContext2D(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas};var Li={};Li.createOrUpdate=function(e,t,n,h){return h!==void 0?(h[0]=e,h[1]=t,h[2]=n,h):[e,t,n]},Li.getKeyZXY=function(e,t,n){return e+"/"+t+"/"+n},Li.getKey=function(e){return Li.getKeyZXY(e[0],e[1],e[2])},Li.fromKey=function(e){return e.split("/").map(Number)},Li.hash=function(e){return(e[1]<<e[0])+e[2]},Li.quadKey=function(e){var t=e[0],n=new Array(t),h=1<<t-1,x,S;for(x=0;x<t;++x)S=48,e[1]&h&&(S+=1),e[2]&h&&(S+=2),n[x]=String.fromCharCode(S),h>>=1;return n.join("")},Li.withinExtentAndZ=function(e,t){var n=e[0],h=e[1],x=e[2];if(t.getMinZoom()>n||n>t.getMaxZoom())return!1;var S=t.getExtent(),f;return S?f=t.getTileRangeForExtentAndZ(S,n):f=t.getFullTileRange(n),f?f.containsXY(h,x):!0};var vs=function(e){ti.call(this,e)};tt.inherits(vs,ti),vs.prototype.expireCache=function(e){for(var t,n;this.canExpireCache()&&(t=this.peekLast(),n=t.tileCoord[0].toString(),!(n in e&&e[n].contains(t.tileCoord)));)this.pop().dispose()},vs.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var e=this.peekFirstKey(),t=Li.fromKey(e),n=t[0];this.forEach(function(h){h.tileCoord[0]!==n&&(this.remove(Li.getKey(h.tileCoord)),h.dispose())},this)}};var _o={};_o.calculateSourceResolution=function(e,t,n,h){var x=dr.transform(n,t,e),S=dr.getPointResolution(t,h,n),f=t.getMetersPerUnit();f!==void 0&&(S*=f);var u=e.getMetersPerUnit();u!==void 0&&(S/=u);var r=e.getExtent();if(!r||Tt.containsCoordinate(r,x)){var i=dr.getPointResolution(e,S,x)/S;isFinite(i)&&i>0&&(S/=i)}return S},_o.enlargeClipPoint_=function(e,t,n,h){var x=n-e,S=h-t,f=Math.sqrt(x*x+S*S);return[Math.round(n+x/f),Math.round(h+S/f)]},_o.render=function(e,t,n,h,x,S,f,u,r,i,c){var a=gn.createCanvasContext2D(Math.round(n*e),Math.round(n*t));if(r.length===0)return a.canvas;a.scale(n,n);var l=Tt.createEmpty();r.forEach(function(y,_,E){Tt.extend(l,y.extent)});var s=Tt.getWidth(l),v=Tt.getHeight(l),d=gn.createCanvasContext2D(Math.round(n*s/h),Math.round(n*v/h)),p=n/h;r.forEach(function(y,_,E){var M=y.extent[0]-l[0],b=-(y.extent[3]-l[3]),w=Tt.getWidth(y.extent),A=Tt.getHeight(y.extent);d.drawImage(y.image,i,i,y.image.width-2*i,y.image.height-2*i,M*p,b*p,w*p,A*p)});var o=Tt.getTopLeft(f);return u.getTriangles().forEach(function(y,_,E){var M=y.source,b=y.target,w=M[0][0],A=M[0][1],R=M[1][0],T=M[1][1],C=M[2][0],m=M[2][1],L=(b[0][0]-o[0])/S,D=-(b[0][1]-o[1])/S,O=(b[1][0]-o[0])/S,N=-(b[1][1]-o[1])/S,V=(b[2][0]-o[0])/S,X=-(b[2][1]-o[1])/S,k=w,Z=A;w=0,A=0,R-=k,T-=Z,C-=k,m-=Z;var B=[[R,T,0,0,O-L],[C,m,0,0,V-L],[0,0,R,T,N-D],[0,0,C,m,X-D]],J=wr.solveLinearSystem(B);if(J){a.save(),a.beginPath();var ne=(L+O+V)/3,oe=(D+N+X)/3,Y=_o.enlargeClipPoint_(ne,oe,L,D),G=_o.enlargeClipPoint_(ne,oe,O,N),K=_o.enlargeClipPoint_(ne,oe,V,X);a.moveTo(G[0],G[1]),a.lineTo(Y[0],Y[1]),a.lineTo(K[0],K[1]),a.clip(),a.transform(J[0],J[2],J[1],J[3],L,D),a.translate(l[0]-k,l[3]-Z),a.scale(h/n,-h/n),a.drawImage(d.canvas,0,0),a.restore()}}),c&&(a.save(),a.strokeStyle="black",a.lineWidth=1,u.getTriangles().forEach(function(y,_,E){var M=y.target,b=(M[0][0]-o[0])/S,w=-(M[0][1]-o[1])/S,A=(M[1][0]-o[0])/S,R=-(M[1][1]-o[1])/S,T=(M[2][0]-o[0])/S,C=-(M[2][1]-o[1])/S;a.beginPath(),a.moveTo(A,R),a.lineTo(b,w),a.lineTo(T,C),a.closePath(),a.stroke()}),a.restore()),a.canvas};var ds=function(e,t,n,h,x){this.sourceProj_=e,this.targetProj_=t;var S={},f=dr.getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(p){var o=p[0]+"/"+p[1];return S[o]||(S[o]=f(p)),S[o]},this.maxSourceExtent_=h,this.errorThresholdSquared_=x*x,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!h&&!!this.sourceProj_.getExtent()&&Tt.getWidth(h)==Tt.getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Tt.getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Tt.getWidth(this.targetProj_.getExtent()):null;var u=Tt.getTopLeft(n),r=Tt.getTopRight(n),i=Tt.getBottomRight(n),c=Tt.getBottomLeft(n),a=this.transformInv_(u),l=this.transformInv_(r),s=this.transformInv_(i),v=this.transformInv_(c);if(this.addQuad_(u,r,i,c,a,l,s,v,tt.RASTER_REPROJECTION_MAX_SUBDIVISION),this.wrapsXInSource_){var d=1/0;this.triangles_.forEach(function(p,o,y){d=Math.min(d,p.source[0][0],p.source[1][0],p.source[2][0])}),this.triangles_.forEach(function(p){if(Math.max(p.source[0][0],p.source[1][0],p.source[2][0])-d>this.sourceWorldWidth_/2){var o=[[p.source[0][0],p.source[0][1]],[p.source[1][0],p.source[1][1]],[p.source[2][0],p.source[2][1]]];o[0][0]-d>this.sourceWorldWidth_/2&&(o[0][0]-=this.sourceWorldWidth_),o[1][0]-d>this.sourceWorldWidth_/2&&(o[1][0]-=this.sourceWorldWidth_),o[2][0]-d>this.sourceWorldWidth_/2&&(o[2][0]-=this.sourceWorldWidth_);var y=Math.min(o[0][0],o[1][0],o[2][0]),_=Math.max(o[0][0],o[1][0],o[2][0]);_-y<this.sourceWorldWidth_/2&&(p.source=o)}},this)}S={}};ds.prototype.addTriangle_=function(e,t,n,h,x,S){this.triangles_.push({source:[h,x,S],target:[e,t,n]})},ds.prototype.addQuad_=function(e,t,n,h,x,S,f,u,r){var i=Tt.boundingExtent([x,S,f,u]),c=this.sourceWorldWidth_?Tt.getWidth(i)/this.sourceWorldWidth_:null,a=this.sourceWorldWidth_,l=this.sourceProj_.canWrapX()&&c>.5&&c<1,s=!1;if(r>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var v=Tt.boundingExtent([e,t,n,h]),d=Tt.getWidth(v)/this.targetWorldWidth_;s|=d>tt.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH}!l&&this.sourceProj_.isGlobal()&&c&&(s|=c>tt.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH)}if(!(!s&&this.maxSourceExtent_&&!Tt.intersects(i,this.maxSourceExtent_))){if(!s&&(!isFinite(x[0])||!isFinite(x[1])||!isFinite(S[0])||!isFinite(S[1])||!isFinite(f[0])||!isFinite(f[1])||!isFinite(u[0])||!isFinite(u[1])))if(r>0)s=!0;else return;if(r>0){if(!s){var p=[(e[0]+n[0])/2,(e[1]+n[1])/2],o=this.transformInv_(p),y;if(l){var _=(wr.modulo(x[0],a)+wr.modulo(f[0],a))/2;y=_-wr.modulo(o[0],a)}else y=(x[0]+f[0])/2-o[0];var E=(x[1]+f[1])/2-o[1],M=y*y+E*E;s=M>this.errorThresholdSquared_}if(s){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){var b=[(t[0]+n[0])/2,(t[1]+n[1])/2],w=this.transformInv_(b),A=[(h[0]+e[0])/2,(h[1]+e[1])/2],R=this.transformInv_(A);this.addQuad_(e,t,b,A,x,S,w,R,r-1),this.addQuad_(A,b,n,h,R,w,f,u,r-1)}else{var T=[(e[0]+t[0])/2,(e[1]+t[1])/2],C=this.transformInv_(T),m=[(n[0]+h[0])/2,(n[1]+h[1])/2],L=this.transformInv_(m);this.addQuad_(e,T,m,h,x,C,L,u,r-1),this.addQuad_(T,t,n,m,C,S,f,L,r-1)}return}}if(l){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(e,n,h,x,f,u),this.addTriangle_(e,t,n,x,S,f)}},ds.prototype.calculateSourceExtent=function(){var e=Tt.createEmpty();return this.triangles_.forEach(function(t,n,h){var x=t.source;Tt.extendCoordinate(e,x[0]),Tt.extendCoordinate(e,x[1]),Tt.extendCoordinate(e,x[2])}),e},ds.prototype.getTriangles=function(){return this.triangles_};var Fo=function(e,t,n,h,x,S,f,u,r,i,c){Si.call(this,x,Tr.IDLE),this.renderEdges_=c!==void 0?c:!1,this.pixelRatio_=f,this.gutter_=u,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=h,this.wrappedTileCoord_=S||x,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var a=h.getTileCoordExtent(this.wrappedTileCoord_),l=this.targetTileGrid_.getExtent(),s=this.sourceTileGrid_.getExtent(),v=l?Tt.getIntersection(a,l):a;if(Tt.getArea(v)===0){this.state=Tr.EMPTY;return}var d=e.getExtent();d&&(s?s=Tt.getIntersection(s,d):s=d);var p=h.getResolution(this.wrappedTileCoord_[0]),o=Tt.getCenter(v),y=_o.calculateSourceResolution(e,n,o,p);if(!isFinite(y)||y<=0){this.state=Tr.EMPTY;return}var _=i!==void 0?i:tt.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;if(this.triangulation_=new ds(e,n,v,s,y*_),this.triangulation_.getTriangles().length===0){this.state=Tr.EMPTY;return}this.sourceZ_=t.getZForResolution(y);var E=this.triangulation_.calculateSourceExtent();if(s&&(e.canWrapX()?(E[1]=wr.clamp(E[1],s[1],s[3]),E[3]=wr.clamp(E[3],s[1],s[3])):E=Tt.getIntersection(E,s)),!Tt.getArea(E))this.state=Tr.EMPTY;else{for(var M=t.getTileRangeForExtentAndZ(E,this.sourceZ_),b=M.minX;b<=M.maxX;b++)for(var w=M.minY;w<=M.maxY;w++){var A=r(this.sourceZ_,b,w,f);A&&this.sourceTiles_.push(A)}this.sourceTiles_.length===0&&(this.state=Tr.EMPTY)}};tt.inherits(Fo,Si),Fo.prototype.disposeInternal=function(){this.state==Tr.LOADING&&this.unlistenSources_(),Si.prototype.disposeInternal.call(this)},Fo.prototype.getImage=function(){return this.canvas_},Fo.prototype.reproject_=function(){var e=[];if(this.sourceTiles_.forEach(function(r,i,c){r&&r.getState()==Tr.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(r.tileCoord),image:r.getImage()})},this),this.sourceTiles_.length=0,e.length===0)this.state=Tr.ERROR;else{var t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),h=typeof n=="number"?n:n[0],x=typeof n=="number"?n:n[1],S=this.targetTileGrid_.getResolution(t),f=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=_o.render(h,x,this.pixelRatio_,f,this.sourceTileGrid_.getExtent(),S,u,this.triangulation_,e,this.gutter_,this.renderEdges_),this.state=Tr.LOADED}this.changed()},Fo.prototype.load=function(){if(this.state==Tr.IDLE){this.state=Tr.LOADING,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,n,h){var x=t.getState();if(x==Tr.IDLE||x==Tr.LOADING){e++;var S;S=Jt.listen(t,kr.CHANGE,function(f){var u=t.getState();(u==Tr.LOADED||u==Tr.ERROR||u==Tr.EMPTY)&&(Jt.unlistenByKey(S),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this),this.sourcesListenerKeys_.push(S)}},this),this.sourceTiles_.forEach(function(t,n,h){var x=t.getState();x==Tr.IDLE&&t.load()}),e===0&&setTimeout(this.reproject_.bind(this),0)}},Fo.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Jt.unlistenByKey),this.sourcesListenerKeys_=null};var ka={};ka.createFromTemplate=function(e,t){var n=/\{z\}/g,h=/\{x\}/g,x=/\{y\}/g,S=/\{-y\}/g;return function(f,u,r){if(f)return e.replace(n,f[0].toString()).replace(h,f[1].toString()).replace(x,function(){var i=-f[2]-1;return i.toString()}).replace(S,function(){var i=f[0],c=t.getFullTileRange(i);_n.assert(c,55);var a=c.getHeight()+f[2];return a.toString()})}},ka.createFromTemplates=function(e,t){for(var n=e.length,h=new Array(n),x=0;x<n;++x)h[x]=ka.createFromTemplate(e[x],t);return ka.createFromTileUrlFunctions(h)},ka.createFromTileUrlFunctions=function(e){return e.length===1?e[0]:function(t,n,h){if(t){var x=Li.hash(t),S=wr.modulo(x,e.length);return e[S](t,n,h)}else return}},ka.nullTileUrlFunction=function(e,t,n){},ka.expandUrl=function(e){var t=[],n=/\{([a-z])-([a-z])\}/.exec(e);if(n){var h=n[1].charCodeAt(0),x=n[2].charCodeAt(0),S;for(S=h;S<=x;++S)t.push(e.replace(n[0],String.fromCharCode(S)));return t}if(n=n=/\{(\d+)-(\d+)\}/.exec(e),n){for(var f=parseInt(n[2],10),u=parseInt(n[1],10);u<=f;u++)t.push(e.replace(n[0],u.toString()));return t}return t.push(e),t};var Rn=function(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,_n.assert(Vr.isSorted(this.resolutions_,function(S,f){return f-S},!0),17);var t;if(!e.origins){for(var n=0,h=this.resolutions_.length-1;n<h;++n)if(!t)t=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,_n.assert(this.origins_.length==this.resolutions_.length,20));var x=e.extent;x!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Tt.getTopLeft(x)),_n.assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,_n.assert(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:tt.DEFAULT_TILE_SIZE,_n.assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=x!==void 0?x:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(S,f){var u=new Mi(Math.min(0,S[0]),Math.max(S[0]-1,-1),Math.min(0,S[1]),Math.max(S[1]-1,-1));return u},this):x&&this.calculateTileRanges_(x)};Rn.tmpTileCoord_=[0,0,0],Rn.prototype.forEachTileCoord=function(e,t,n){for(var h=this.getTileRangeForExtentAndZ(e,t),x=h.minX,S=h.maxX;x<=S;++x)for(var f=h.minY,u=h.maxY;f<=u;++f)n([t,x,f])},Rn.prototype.forEachTileCoordParentTileRange=function(e,t,n,h,x){var S,f,u,r=null,i=e[0]-1;for(this.zoomFactor_===2?(f=e[1],u=e[2]):r=this.getTileCoordExtent(e,x);i>=this.minZoom;){if(this.zoomFactor_===2?(f=Math.floor(f/2),u=Math.floor(u/2),S=Mi.createOrUpdate(f,f,u,u,h)):S=this.getTileRangeForExtentAndZ(r,i,h),t.call(n,i,S))return!0;--i}return!1},Rn.prototype.getExtent=function(){return this.extent_},Rn.prototype.getMaxZoom=function(){return this.maxZoom},Rn.prototype.getMinZoom=function(){return this.minZoom},Rn.prototype.getOrigin=function(e){return this.origin_?this.origin_:this.origins_[e]},Rn.prototype.getResolution=function(e){return this.resolutions_[e]},Rn.prototype.getResolutions=function(){return this.resolutions_},Rn.prototype.getTileCoordChildTileRange=function(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){var h=e[1]*2,x=e[2]*2;return Mi.createOrUpdate(h,h+1,x,x+1,t)}var S=this.getTileCoordExtent(e,n);return this.getTileRangeForExtentAndZ(S,e[0]+1,t)}return null},Rn.prototype.getTileRangeExtent=function(e,t,n){var h=this.getOrigin(e),x=this.getResolution(e),S=na.toSize(this.getTileSize(e),this.tmpSize_),f=h[0]+t.minX*S[0]*x,u=h[0]+(t.maxX+1)*S[0]*x,r=h[1]+t.minY*S[1]*x,i=h[1]+(t.maxY+1)*S[1]*x;return Tt.createOrUpdate(f,r,u,i,n)},Rn.prototype.getTileRangeForExtentAndZ=function(e,t,n){var h=Rn.tmpTileCoord_;this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,h);var x=h[1],S=h[2];return this.getTileCoordForXYAndZ_(e[2],e[3],t,!0,h),Mi.createOrUpdate(x,h[1],S,h[2],n)},Rn.prototype.getTileCoordCenter=function(e){var t=this.getOrigin(e[0]),n=this.getResolution(e[0]),h=na.toSize(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*h[0]*n,t[1]+(e[2]+.5)*h[1]*n]},Rn.prototype.getTileCoordExtent=function(e,t){var n=this.getOrigin(e[0]),h=this.getResolution(e[0]),x=na.toSize(this.getTileSize(e[0]),this.tmpSize_),S=n[0]+e[1]*x[0]*h,f=n[1]+e[2]*x[1]*h,u=S+x[0]*h,r=f+x[1]*h;return Tt.createOrUpdate(S,f,u,r,t)},Rn.prototype.getTileCoordForCoordAndResolution=function(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)},Rn.prototype.getTileCoordForXYAndResolution_=function(e,t,n,h,x){var S=this.getZForResolution(n),f=n/this.getResolution(S),u=this.getOrigin(S),r=na.toSize(this.getTileSize(S),this.tmpSize_),i=h?.5:0,c=h?0:.5,a=Math.floor((e-u[0])/n+i),l=Math.floor((t-u[1])/n+c),s=f*a/r[0],v=f*l/r[1];return h?(s=Math.ceil(s)-1,v=Math.ceil(v)-1):(s=Math.floor(s),v=Math.floor(v)),Li.createOrUpdate(S,s,v,x)},Rn.prototype.getTileCoordForXYAndZ_=function(e,t,n,h,x){var S=this.getOrigin(n),f=this.getResolution(n),u=na.toSize(this.getTileSize(n),this.tmpSize_),r=h?.5:0,i=h?0:.5,c=Math.floor((e-S[0])/f+r),a=Math.floor((t-S[1])/f+i),l=c/u[0],s=a/u[1];return h?(l=Math.ceil(l)-1,s=Math.ceil(s)-1):(l=Math.floor(l),s=Math.floor(s)),Li.createOrUpdate(n,l,s,x)},Rn.prototype.getTileCoordForCoordAndZ=function(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)},Rn.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]},Rn.prototype.getTileSize=function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]},Rn.prototype.getFullTileRange=function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:null},Rn.prototype.getZForResolution=function(e,t){var n=Vr.linearFindNearest(this.resolutions_,e,t||0);return wr.clamp(n,this.minZoom,this.maxZoom)},Rn.prototype.calculateTileRanges_=function(e){for(var t=this.resolutions_.length,n=new Array(t),h=this.minZoom;h<t;++h)n[h]=this.getTileRangeForExtentAndZ(e,h);this.fullTileRanges_=n};var xi={};xi.getForProjection=function(e){var t=e.getDefaultTileGrid();return t||(t=xi.createForProjection(e),e.setDefaultTileGrid(t)),t},xi.wrapX=function(e,t,n){var h=t[0],x=e.getTileCoordCenter(t),S=xi.extentFromProjection(n);if(Tt.containsCoordinate(S,x))return t;var f=Tt.getWidth(S),u=Math.ceil((S[0]-x[0])/f);return x[0]+=f*u,e.getTileCoordForCoordAndZ(x,h)},xi.createForExtent=function(e,t,n,h){var x=h!==void 0?h:us.TOP_LEFT,S=xi.resolutionsFromExtent(e,t,n);return new Rn({extent:e,origin:Tt.getCorner(e,x),resolutions:S,tileSize:n})},xi.createXYZ=function(e){var t={};return Zr.assign(t,e!==void 0?e:{}),t.extent===void 0&&(t.extent=dr.get("EPSG:3857").getExtent()),t.resolutions=xi.resolutionsFromExtent(t.extent,t.maxZoom,t.tileSize),delete t.maxZoom,new Rn(t)},xi.resolutionsFromExtent=function(e,t,n){for(var h=t!==void 0?t:tt.DEFAULT_MAX_ZOOM,x=Tt.getHeight(e),S=Tt.getWidth(e),f=na.toSize(n!==void 0?n:tt.DEFAULT_TILE_SIZE),u=Math.max(S/f[0],x/f[1]),r=h+1,i=new Array(r),c=0;c<r;++c)i[c]=u/Math.pow(2,c);return i},xi.createForProjection=function(e,t,n,h){var x=xi.extentFromProjection(e);return xi.createForExtent(x,t,n,h)},xi.extentFromProjection=function(e){e=dr.get(e);var t=e.getExtent();if(!t){var n=180*dr.METERS_PER_UNIT[fi.DEGREES]/e.getMetersPerUnit();t=Tt.createOrUpdate(-n,-n,n,n)}return t};var ts=function(e){this.html_=e.html,this.tileRanges_=e.tileRanges?e.tileRanges:null};ts.prototype.getHTML=function(){return this.html_},ts.prototype.intersectsAnyTileRange=function(e,t,n){if(!this.tileRanges_)return!0;var h,x,S,f;for(f in e)if(f in this.tileRanges_){S=e[f];var u;for(h=0,x=this.tileRanges_[f].length;h<x;++h){if(u=this.tileRanges_[f][h],u.intersects(S))return!0;var r=t.getTileRangeForExtentAndZ(xi.extentFromProjection(n),parseInt(f,10)),i=r.getWidth();if((S.minX<r.minX||S.maxX>r.maxX)&&(u.intersects(new Mi(wr.modulo(S.minX,i),wr.modulo(S.maxX,i),S.minY,S.maxY))||S.getWidth()>i&&u.intersects(r)))return!0}}return!1};var Zi=function(e){Or.call(this),this.projection_=dr.get(e.projection),this.attributions_=null,this.attributions2_=this.adaptAttributions_(e.attributions),this.logo_=e.logo,this.state_=e.state!==void 0?e.state:Yo.READY,this.wrapX_=e.wrapX!==void 0?e.wrapX:!1};tt.inherits(Zi,Or),Zi.prototype.adaptAttributions_=function(e){if(!e)return null;if(e instanceof ts)return this.attributions_=[e],function(n){return[e.getHTML()]};if(Array.isArray(e)){if(e[0]instanceof ts){this.attributions_=e;var t=e.map(function(n){return n.getHTML()});return function(n){return t}}return this.attributions_=e.map(function(n){return new ts({html:n})}),function(n){return e}}return typeof e=="function"?e:(this.attributions_=[new ts({html:e})],function(n){return[e]})},Zi.prototype.forEachFeatureAtCoordinate=tt.nullFunction,Zi.prototype.getAttributions=function(){return this.attributions_},Zi.prototype.getAttributions2=function(){return this.attributions2_},Zi.prototype.getLogo=function(){return this.logo_},Zi.prototype.getProjection=function(){return this.projection_},Zi.prototype.getResolutions=function(){},Zi.prototype.getState=function(){return this.state_},Zi.prototype.getWrapX=function(){return this.wrapX_},Zi.prototype.refresh=function(){this.changed()},Zi.prototype.setAttributions=function(e){this.attributions2_=this.adaptAttributions_(e),this.changed()},Zi.prototype.setLogo=function(e){this.logo_=e},Zi.prototype.setState=function(e){this.state_=e,this.changed()};var Vn=function(e){Zi.call(this,{attributions:e.attributions,extent:e.extent,logo:e.logo,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null,this.tileCache=new vs(e.cacheSize),this.tmpSize=[0,0],this.key_="",this.tileOptions={transition:e.transition}};tt.inherits(Vn,Zi),Vn.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},Vn.prototype.expireCache=function(e,t){var n=this.getTileCacheForProjection(e);n&&n.expireCache(t)},Vn.prototype.forEachLoadedTile=function(e,t,n,h){var x=this.getTileCacheForProjection(e);if(!x)return!1;for(var S=!0,f,u,r,i=n.minX;i<=n.maxX;++i)for(var c=n.minY;c<=n.maxY;++c)u=Li.getKeyZXY(t,i,c),r=!1,x.containsKey(u)&&(f=x.get(u),r=f.getState()===Tr.LOADED,r&&(r=h(f)!==!1)),r||(S=!1);return S},Vn.prototype.getGutter=function(e){return 0},Vn.prototype.getKey=function(){return this.key_},Vn.prototype.setKey=function(e){this.key_!==e&&(this.key_=e,this.changed())},Vn.prototype.getOpaque=function(e){return this.opaque_},Vn.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},Vn.prototype.getTile=function(e,t,n,h,x){},Vn.prototype.getTileGrid=function(){return this.tileGrid},Vn.prototype.getTileGridForProjection=function(e){return this.tileGrid?this.tileGrid:xi.getForProjection(e)},Vn.prototype.getTileCacheForProjection=function(e){var t=this.getProjection();return t&&!dr.equivalent(t,e)?null:this.tileCache},Vn.prototype.getTilePixelRatio=function(e){return this.tilePixelRatio_},Vn.prototype.getTilePixelSize=function(e,t,n){var h=this.getTileGridForProjection(n),x=this.getTilePixelRatio(t),S=na.toSize(h.getTileSize(e),this.tmpSize);return x==1?S:na.scale(S,x,this.tmpSize)},Vn.prototype.getTileCoordForTileUrlFunction=function(e,t){var n=t!==void 0?t:this.getProjection(),h=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=xi.wrapX(h,e,n)),Li.withinExtentAndZ(e,h)?e:null},Vn.prototype.refresh=function(){this.tileCache.clear(),this.changed()},Vn.prototype.useTile=tt.nullFunction,Vn.Event=function(e,t){oi.call(this,e),this.tile=t},tt.inherits(Vn.Event,oi);var vl={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Ri=function(e){Vn.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,logo:e.logo,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition}),this.tileLoadFunction=e.tileLoadFunction,this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):ka.nullTileUrlFunction,this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),e.tileUrlFunction&&this.setTileUrlFunction(e.tileUrlFunction),this.tileLoadingKeys_={}};tt.inherits(Ri,Vn),Ri.prototype.fixedTileUrlFunction,Ri.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},Ri.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},Ri.prototype.getUrls=function(){return this.urls},Ri.prototype.handleTileChange=function(e){var t=e.target,n=tt.getUid(t),h=t.getState(),x;h==Tr.LOADING?(this.tileLoadingKeys_[n]=!0,x=vl.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],x=h==Tr.ERROR?vl.TILELOADERROR:h==Tr.LOADED||h==Tr.ABORT?vl.TILELOADEND:void 0),x!=null&&this.dispatchEvent(new Vn.Event(x,t))},Ri.prototype.setTileLoadFunction=function(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()},Ri.prototype.setTileUrlFunction=function(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()},Ri.prototype.setUrl=function(e){var t=this.urls=ka.expandUrl(e);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):ka.createFromTemplates(t,this.tileGrid),e)},Ri.prototype.setUrls=function(e){this.urls=e;var t=e.join(`
`);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):ka.createFromTemplates(e,this.tileGrid),t)},Ri.prototype.useTile=function(e,t,n){var h=Li.getKeyZXY(e,t,n);this.tileCache.containsKey(h)&&this.tileCache.get(h)};var Oi=function(e){Ri.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,logo:e.logo,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Oi.defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:_a,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1};tt.inherits(Oi,Ri),Oi.prototype.canExpireCache=function(){if(!tt.ENABLE_RASTER_REPROJECTION)return Ri.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},Oi.prototype.expireCache=function(e,t){if(!tt.ENABLE_RASTER_REPROJECTION){Ri.prototype.expireCache.call(this,e,t);return}var n=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==n?t:{});for(var h in this.tileCacheForProjection){var x=this.tileCacheForProjection[h];x.expireCache(x==n?t:{})}},Oi.prototype.getGutter=function(e){return tt.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&e&&!dr.equivalent(this.getProjection(),e)?0:this.getGutterInternal()},Oi.prototype.getGutterInternal=function(){return 0},Oi.prototype.getOpaque=function(e){return tt.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&e&&!dr.equivalent(this.getProjection(),e)?!1:Ri.prototype.getOpaque.call(this,e)},Oi.prototype.getTileGridForProjection=function(e){if(!tt.ENABLE_RASTER_REPROJECTION)return Ri.prototype.getTileGridForProjection.call(this,e);var t=this.getProjection();if(this.tileGrid&&(!t||dr.equivalent(t,e)))return this.tileGrid;var n=tt.getUid(e).toString();return n in this.tileGridForProjection||(this.tileGridForProjection[n]=xi.getForProjection(e)),this.tileGridForProjection[n]},Oi.prototype.getTileCacheForProjection=function(e){if(!tt.ENABLE_RASTER_REPROJECTION)return Ri.prototype.getTileCacheForProjection.call(this,e);var t=this.getProjection();if(!t||dr.equivalent(t,e))return this.tileCache;var n=tt.getUid(e).toString();return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new vs(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},Oi.prototype.createTile_=function(e,t,n,h,x,S){var f=[e,t,n],u=this.getTileCoordForTileUrlFunction(f,x),r=u?this.tileUrlFunction(u,h,x):void 0,i=new this.tileClass(f,r!==void 0?Tr.IDLE:Tr.EMPTY,r!==void 0?r:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return i.key=S,Jt.listen(i,kr.CHANGE,this.handleTileChange,this),i},Oi.prototype.getTile=function(e,t,n,h,x){var S=this.getProjection();if(!tt.ENABLE_RASTER_REPROJECTION||!S||!x||dr.equivalent(S,x))return this.getTileInternal(e,t,n,h,S||x);var f=this.getTileCacheForProjection(x),u=[e,t,n],r,i=Li.getKey(u);f.containsKey(i)&&(r=f.get(i));var c=this.getKey();if(r&&r.key==c)return r;var a=this.getTileGridForProjection(S),l=this.getTileGridForProjection(x),s=this.getTileCoordForTileUrlFunction(u,x),v=new Fo(S,a,x,l,u,s,this.getTilePixelRatio(h),this.getGutterInternal(),(function(d,p,o,y){return this.getTileInternal(d,p,o,y,S)}).bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return v.key=c,r?(v.interimTile=r,v.refreshInterimChain(),f.replace(i,v)):f.set(i,v),v},Oi.prototype.getTileInternal=function(e,t,n,h,x){var S=null,f=Li.getKeyZXY(e,t,n),u=this.getKey();if(!this.tileCache.containsKey(f))S=this.createTile_(e,t,n,h,x,u),this.tileCache.set(f,S);else if(S=this.tileCache.get(f),S.key!=u){var r=S;S=this.createTile_(e,t,n,h,x,u),r.getState()==Tr.IDLE?S.interimTile=r.interimTile:S.interimTile=r,S.refreshInterimChain(),this.tileCache.replace(f,S)}return S},Oi.prototype.setRenderReprojectionEdges=function(e){if(!(!tt.ENABLE_RASTER_REPROJECTION||this.renderReprojectionEdges_==e)){this.renderReprojectionEdges_=e;for(var t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}},Oi.prototype.setTileGridForProjection=function(e,t){if(tt.ENABLE_RASTER_REPROJECTION){var n=dr.get(e);if(n){var h=tt.getUid(n).toString();h in this.tileGridForProjection||(this.tileGridForProjection[h]=t)}}},Oi.defaultTileLoadFunction=function(e,t){e.getImage().src=t};var dl=function(e){var t=e||{},n=t.projection!==void 0?t.projection:"EPSG:3857",h=t.tileGrid!==void 0?t.tileGrid:xi.createXYZ({extent:xi.extentFromProjection(n),maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});Oi.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,opaque:t.opaque,projection:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:h,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition})};tt.inherits(dl,Oi);var Ys=function(e){var t=e||{},n;t.attributions!==void 0?n=t.attributions:n=[Ys.ATTRIBUTION];var h=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",x=t.url!==void 0?t.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";dl.call(this,{attributions:n,cacheSize:t.cacheSize,crossOrigin:h,opaque:t.opaque!==void 0?t.opaque:!0,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:x,wrapX:t.wrapX})};tt.inherits(Ys,dl),Ys.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.';function uc({className:e}){const t=Gn.useRef();return Gn.useEffect(()=>{const n=new Co({preload:1/0,source:new Ys}),h=new au({target:t.current,layers:[n],view:new Rr({center:[0,0],zoom:0})});return()=>h.setTarget(null)},[]),un.jsx("div",{id:"map",className:`map-container w-full ${e}`,ref:t})}const fc=new _s({headers:{accept:"application/json;version=2"}}),cc=new sl(fc);function hc({tsids:e,office:t,begin:n,end:h,title:x,fontSize:S,unit:f="EN",className:u=""}){const r=Gn.useRef(null);Gn.useState(null);const[i,c]=Gn.useState(null),[a,l]=Gn.useState(null),[s,v]=Gn.useState(S);Gn.useEffect(()=>{if(x||c((Array.isArray(e)?e[0]:e).split(".")[0]),!e.length)throw Error("You must specify one or more Timeseries IDs to plot.");if(!t)throw Error("You must specify a 3 letter ID for the office");typeof e=="string"&&(e=[e]),l(e)},[x,e,t]);const d=async()=>{let o=a.map(E=>cc.getCwmsDataTimeseries({name:E,end:h,unit:f,begin:n,office:t})),y=await Promise.all(o),_={ts:{},dates:[]};return y.forEach(E=>{E!=null&&E.units?(_.ts[E.units]||(_.ts[E.units]=[]),_.ts[E.units].push(E)):console.warn(`No unit found for ${E==null?void 0:E.name}`)}),_},{data:p}=Ol.useQuery({queryKey:["timeseries",a,n,h,f,t],queryFn:d,enabled:!!r.current});return Gn.useEffect(()=>{if(!r.current||!p)return;let o=Object.keys(p.ts),y=o.length,_={autosize:!0,shapes:[],annotations:[],title:{text:`${i}<br>Units: ${o.join(", ")}`,font:{family:"DejaVuSansMono, monospace"}},grid:{rows:y,columns:1,pattern:"independent"}},E=[],M=1,b=0,w=1/o.length,A=w;s?_.font={size:s}:o.length>4&&(_.font={size:8});let R;for(let T=0;T<o.length;T++){const C=o[T];for(let L=0;L<p.ts[C].length;L++){R=p.ts[C][L];const D={x:R.values.map(O=>new Date(O[0])),y:R.values.map(O=>O[1]),yaxis:"y"+M,type:"scatter",mode:"lines",showlegend:!0,legend:{x:1,xanchor:"right",y:1},name:`${R.name.split(".")[1]}<br>${R.name.split(".")[5]}`};E.push(D)}let m=`${R.name.split(".")[1]}<br>(${C})`;o.length>3&&(m=C),_["yaxis"+M]={domain:[Math.round(b*100)/100,Math.round(A*100)/100],title:{text:m}},o.length>4&&(_["yaxis"+M].nticks=1,_["yaxis"+M].tickvals=[R.values[R.values.length/2]],_["yaxis"+M].dtick=1,_["yaxis"+M].tick0=.5),b+=w,A+=w,M++}Vl.newPlot(r.current,E,_,{responsive:!0})},[p,x]),un.jsx("div",{className:`h-full w-full ${u}`,style:{height:"500px"},children:un.jsx("div",{ref:r,id:"plot",className:"h-full w-full",style:{height:"500px"},children:p?un.jsx("div",{children:"Loading..."}):un.jsx("div",{children:"No Data"})})})}Ea.CWMSPlot=hc,Ea.GageMap=uc,Ea.TSPlot=Bf,Ea.TSTable=Kf,Object.defineProperty(Ea,Symbol.toStringTag,{value:"Module"})});
